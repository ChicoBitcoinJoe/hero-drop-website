/*! For license information please see main.fbf708c4.js.LICENSE.txt */
(function(){var __webpack_modules__={9361:function(e,t,r){"use strict";var n=r(7061).default,a=r(8416).default,i=r(7156).default,o=-8,s=-4,u=0,c=1,l=1,f=2,p=5,h=1024,d=2048,v=8192,y=0,b=4,g=8,m=12,w=12,k=16,x="undefined"!==typeof BigUint64Array,_=Symbol(),E=1024;function S(e,t){var r=new Uint32Array(e),n=new Uint16Array(e),a=r[t+s>>>2]>>>1,i=t>>>1;if(a<=E)return String.fromCharCode.apply(String,n.subarray(i,i+a));var o=[];do{var u=n[i+E-1],c=u>=55296&&u<56320?E-1:E;o.push(String.fromCharCode.apply(String,n.subarray(i,i+=c))),a-=c}while(a>E);return o.join("")+String.fromCharCode.apply(String,n.subarray(i,i+a))}function A(e){var t={};function r(e,t){return e?S(e.buffer,t):"<yet unknown>"}var n=e.env=e.env||{};return n.abort=n.abort||function(e,a,i,o){var s=t.memory||n.memory;throw Error("abort: "+r(s,e)+" at "+r(s,a)+":"+i+":"+o)},n.trace=n.trace||function(e,a){var i=t.memory||n.memory;console.log("trace: "+r(i,e)+(a?" ":"")+Array.prototype.slice.call(arguments,2,2+a).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function C(e,t){var r=t.exports,n=r.memory,a=r.table,i=r.__alloc,_=r.__retain,E=r.__rtti_base||-1;function A(e){var t=new Uint32Array(n.buffer);if((e>>>=0)>=t[E>>>2])throw Error("invalid id: "+e);return t[(E+4>>>2)+2*e]}function C(e){var t=new Uint32Array(n.buffer);if((e>>>=0)>=t[E>>>2])throw Error("invalid id: "+e);return t[(E+4>>>2)+2*e+1]}function T(e){return 31-Math.clz32(e>>>p&31)}function R(e,t,r){var a=n.buffer;if(r)switch(e){case 2:return new Float32Array(a);case 3:return new Float64Array(a)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(a);case 1:return new(t?Int16Array:Uint16Array)(a);case 2:return new(t?Int32Array:Uint32Array)(a);case 3:return new(t?BigInt64Array:BigUint64Array)(a)}throw Error("unsupported align: "+e)}function I(e){var t=new Uint32Array(n.buffer),r=t[e+o>>>2],a=A(r);if(!(a&l))throw Error("not an array: "+r);var i=T(a),u=t[e+b>>>2],c=a&f?t[e+w>>>2]:t[u+s>>>2]>>>i;return R(i,a&h,a&d).subarray(u>>>=i,u+c)}function P(e,t,r){return new e(D(e,t,r))}function D(e,t,r){var a=n.buffer,i=new Uint32Array(a),o=i[r+b>>>2];return new e(a,o,i[o+s>>>2]>>>t)}return e.__allocString=function(e){for(var t=e.length,r=i(t<<1,c),a=new Uint16Array(n.buffer),o=0,s=r>>>1;o<t;++o)a[s+o]=e.charCodeAt(o);return r},e.__getString=function(e){var t=n.buffer;if(new Uint32Array(t)[e+o>>>2]!==c)throw Error("not a string: "+e);return S(t,e)},e.__allocArray=function(e,t){var r=A(e);if(!(r&(l|f)))throw Error("not an array: "+e+" @ "+r);var a=T(r),o=t.length,s=i(o<<a,u),c=i(r&f?k:m,e),p=new Uint32Array(n.buffer);p[c+y>>>2]=_(s),p[c+b>>>2]=s,p[c+g>>>2]=o<<a,r&f&&(p[c+w>>>2]=o);var x=R(a,r&h,r&d);if(r&v)for(var E=0;E<o;++E)x[(s>>>a)+E]=_(t[E]);else x.set(t,s>>>a);return c},e.__getArrayView=I,e.__getArray=function(e){for(var t=I(e),r=t.length,n=new Array(r),a=0;a<r;a++)n[a]=t[a];return n},e.__getArrayBuffer=function(e){var t=n.buffer,r=new Uint32Array(t)[e+s>>>2];return t.slice(e,e+r)},e.__getInt8Array=P.bind(null,Int8Array,0),e.__getInt8ArrayView=D.bind(null,Int8Array,0),e.__getUint8Array=P.bind(null,Uint8Array,0),e.__getUint8ArrayView=D.bind(null,Uint8Array,0),e.__getUint8ClampedArray=P.bind(null,Uint8ClampedArray,0),e.__getUint8ClampedArrayView=D.bind(null,Uint8ClampedArray,0),e.__getInt16Array=P.bind(null,Int16Array,1),e.__getInt16ArrayView=D.bind(null,Int16Array,1),e.__getUint16Array=P.bind(null,Uint16Array,1),e.__getUint16ArrayView=D.bind(null,Uint16Array,1),e.__getInt32Array=P.bind(null,Int32Array,2),e.__getInt32ArrayView=D.bind(null,Int32Array,2),e.__getUint32Array=P.bind(null,Uint32Array,2),e.__getUint32ArrayView=D.bind(null,Uint32Array,2),x&&(e.__getInt64Array=P.bind(null,BigInt64Array,3),e.__getInt64ArrayView=D.bind(null,BigInt64Array,3),e.__getUint64Array=P.bind(null,BigUint64Array,3),e.__getUint64ArrayView=D.bind(null,BigUint64Array,3)),e.__getFloat32Array=P.bind(null,Float32Array,2),e.__getFloat32ArrayView=D.bind(null,Float32Array,2),e.__getFloat64Array=P.bind(null,Float64Array,3),e.__getFloat64ArrayView=D.bind(null,Float64Array,3),e.__instanceof=function(e,t){var r=new Uint32Array(n.buffer),a=r[e+o>>>2];if(a<=r[E>>>2])do{if(a==t)return!0}while(a=C(a));return!1},e.memory=e.memory||n,e.table=e.table||a,N(r,e)}function T(e){return"undefined"!==typeof Response&&e instanceof Response}function R(e,t){return I.apply(this,arguments)}function I(){return(I=i(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=T,e.next=3,t;case 3:if(e.t1=t=e.sent,!(0,e.t0)(e.t1)){e.next=6;break}return e.abrupt("return",P(t,r));case 6:if(e.t2=C,e.t3=A(r||(r={})),e.t4=WebAssembly,!(t instanceof WebAssembly.Module)){e.next=13;break}e.t5=t,e.next=16;break;case 13:return e.next=15,WebAssembly.compile(t);case 15:e.t5=e.sent;case 16:return e.t6=e.t5,e.t7=r,e.next=20,e.t4.instantiate.call(e.t4,e.t6,e.t7);case 20:return e.t8=e.sent,e.abrupt("return",(0,e.t2)(e.t3,e.t8));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return D.apply(this,arguments)}function D(){return(D=i(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(WebAssembly.instantiateStreaming){e.next=14;break}return e.t0=R,e.t1=T,e.next=5,t;case 5:if(e.t2=t=e.sent,!(0,e.t1)(e.t2)){e.next=10;break}e.t3=t.arrayBuffer(),e.next=11;break;case 10:e.t3=t;case 11:return e.t4=e.t3,e.t5=r,e.abrupt("return",(0,e.t0)(e.t4,e.t5));case 14:return e.t6=C,e.t7=A(r||(r={})),e.next=18,WebAssembly.instantiateStreaming(t,r);case 18:return e.t8=e.sent.instance,e.abrupt("return",(0,e.t6)(e.t7,e.t8));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){var r=t?Object.create(t):{},n=e.__argumentsLength?function(t){e.__argumentsLength.value=t}:e.__setArgumentsLength||e.__setargc||function(){},i=function(){if(!Object.prototype.hasOwnProperty.call(e,o))return"continue";for(var t=e[o],i=o.split("."),s=r;i.length>1;){var u=i.shift();Object.prototype.hasOwnProperty.call(s,u)||(s[u]={}),s=s[u]}var c=i[0],l=c.indexOf("#");if(l>=0){var f=c.substring(0,l),p=s[f];if("undefined"===typeof p||!p.prototype){var h=function e(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.wrap((t=e.prototype).constructor.apply(t,[0].concat(n)))};h.prototype={valueOf:function(){return this[_]}},h.wrap=function(e){return Object.create(h.prototype,a({},_,{value:e,writable:!1}))},p&&Object.getOwnPropertyNames(p).forEach((function(e){return Object.defineProperty(h,e,Object.getOwnPropertyDescriptor(p,e))})),s[f]=h}if(c=c.substring(l+1),s=s[f].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(s,c=c.substring(4))){var d=e[o.replace("set:","get:")],v=e[o.replace("get:","set:")];Object.defineProperty(s,c,{get:function(){return d(this[_])},set:function(e){v(this[_],e)},enumerable:!0})}}else"constructor"===c?(s[c]=function(){return n(arguments.length),t.apply(void 0,arguments)}).original=t:(s[c]=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n(r.length),t.apply(void 0,[this[_]].concat(r))}).original=t}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(s,c=c.substring(4))||Object.defineProperty(s,c,{get:e[o.replace("set:","get:")],set:e[o.replace("get:","set:")],enumerable:!0}):"function"===typeof t&&t!==n?(s[c]=function(){return n(arguments.length),t.apply(void 0,arguments)}).original=t:s[c]=t};for(var o in e)i();return r}t.instantiate=R,t.instantiateSync=function(e,t){return C(A(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))},t.instantiateStreaming=P,t.demangle=N},3361:function(e,t,r){"use strict";r.d(t,{Z:function(){return ae}});var n=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(n){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),a=Math.abs,i=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function u(e,t,r){return e.replace(t,r)}function c(e,t){return e.indexOf(t)}function l(e,t){return 0|e.charCodeAt(t)}function f(e,t,r){return e.slice(t,r)}function p(e){return e.length}function h(e){return e.length}function d(e,t){return t.push(e),e}var v=1,y=1,b=0,g=0,m=0,w="";function k(e,t,r,n,a,i,o){return{value:e,root:t,parent:r,type:n,props:a,children:i,line:v,column:y,length:o,return:""}}function x(e,t){return o(k("",null,null,"",null,null,0),e,{length:-e.length},t)}function _(){return m=g>0?l(w,--g):0,y--,10===m&&(y=1,v--),m}function E(){return m=g<b?l(w,g++):0,y++,10===m&&(y=1,v++),m}function S(){return l(w,g)}function A(){return g}function C(e,t){return f(w,e,t)}function T(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){return v=y=1,b=p(w=e),g=0,[]}function I(e){return w="",e}function P(e){return s(C(g-1,O(91===e?e+2:40===e?e+1:e)))}function D(e){for(;(m=S())&&m<33;)E();return T(e)>2||T(m)>3?"":" "}function N(e,t){for(;--t&&E()&&!(m<48||m>102||m>57&&m<65||m>70&&m<97););return C(e,A()+(t<6&&32==S()&&32==E()))}function O(e){for(;E();)switch(m){case e:return g;case 34:case 39:34!==e&&39!==e&&O(m);break;case 40:41===e&&O(e);break;case 92:E()}return g}function L(e,t){for(;E()&&e+m!==57&&(e+m!==84||47!==S()););return"/*"+C(t,g-1)+"*"+i(47===e?e:E())}function B(e){for(;!T(S());)E();return C(e,g)}var M="-ms-",U="-moz-",j="-webkit-",F="comm",z="rule",Z="decl",q="@keyframes";function V(e,t){for(var r="",n=h(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function K(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Z:return e.return=e.return||e.value;case F:return"";case q:return e.return=e.value+"{"+V(e.children,n)+"}";case z:e.value=e.props.join(",")}return p(r=V(e.children,n))?e.return=e.value+"{"+r+"}":""}function H(e){return I(W("",null,null,null,[""],e=R(e),0,[0],e))}function W(e,t,r,n,a,o,s,f,h){for(var v=0,y=0,b=s,g=0,m=0,w=0,k=1,x=1,C=1,T=0,R="",I=a,O=o,M=n,U=R;x;)switch(w=T,T=E()){case 40:if(108!=w&&58==l(U,b-1)){-1!=c(U+=u(P(T),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:U+=P(T);break;case 9:case 10:case 13:case 32:U+=D(w);break;case 92:U+=N(A()-1,7);continue;case 47:switch(S()){case 42:case 47:d(Y(L(E(),A()),t,r),h);break;default:U+="/"}break;case 123*k:f[v++]=p(U)*C;case 125*k:case 59:case 0:switch(T){case 0:case 125:x=0;case 59+y:-1==C&&(U=u(U,/\f/g,"")),m>0&&p(U)-b&&d(m>32?Q(U+";",n,r,b-1):Q(u(U," ","")+";",n,r,b-2),h);break;case 59:U+=";";default:if(d(M=G(U,t,r,v,y,a,f,R,I=[],O=[],b),o),123===T)if(0===y)W(U,t,M,M,I,o,b,f,O);else switch(99===g&&110===l(U,3)?100:g){case 100:case 108:case 109:case 115:W(e,M,M,n&&d(G(e,M,M,0,0,a,f,R,a,I=[],b),O),a,O,b,f,n?I:O);break;default:W(U,M,M,M,[""],O,0,f,O)}}v=y=m=0,k=C=1,R=U="",b=s;break;case 58:b=1+p(U),m=w;default:if(k<1)if(123==T)--k;else if(125==T&&0==k++&&125==_())continue;switch(U+=i(T),T*k){case 38:C=y>0?1:(U+="\f",-1);break;case 44:f[v++]=(p(U)-1)*C,C=1;break;case 64:45===S()&&(U+=P(E())),g=S(),y=b=p(R=U+=B(A())),T++;break;case 45:45===w&&2==p(U)&&(k=0)}}return o}function G(e,t,r,n,i,o,c,l,p,d,v){for(var y=i-1,b=0===i?o:[""],g=h(b),m=0,w=0,x=0;m<n;++m)for(var _=0,E=f(e,y+1,y=a(w=c[m])),S=e;_<g;++_)(S=s(w>0?b[_]+" "+E:u(E,/&\f/g,b[_])))&&(p[x++]=S);return k(e,t,r,0===i?z:l,p,d,v)}function Y(e,t,r){return k(e,t,r,F,i(m),f(e,2,-2),0)}function Q(e,t,r,n){return k(e,t,r,Z,f(e,0,n),f(e,n+1,-1),n)}var J=function(e,t,r){for(var n=0,a=0;n=a,a=S(),38===n&&12===a&&(t[r]=1),!T(a);)E();return C(e,g)},X=function(e,t){return I(function(e,t){var r=-1,n=44;do{switch(T(n)){case 0:38===n&&12===S()&&(t[r]=1),e[r]+=J(g-1,t,r);break;case 2:e[r]+=P(n);break;case 4:if(44===n){e[++r]=58===S()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=i(n)}}while(n=E());return e}(R(e),t))},$=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||$.get(r))&&!n){$.set(e,!0);for(var a=[],i=X(t,a),o=r.props,s=0,u=0;s<i.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=a[s]?i[s].replace(/&\f/g,o[c]):o[c]+" "+i[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function re(e,t){switch(function(e,t){return 45^l(e,0)?(((t<<2^l(e,0))<<2^l(e,1))<<2^l(e,2))<<2^l(e,3):0}(e,t)){case 5103:return j+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return j+e+U+e+M+e+e;case 6828:case 4268:return j+e+M+e+e;case 6165:return j+e+M+"flex-"+e+e;case 5187:return j+e+u(e,/(\w+).+(:[^]+)/,j+"box-$1$2"+M+"flex-$1$2")+e;case 5443:return j+e+M+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return j+e+M+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return j+e+M+u(e,"shrink","negative")+e;case 5292:return j+e+M+u(e,"basis","preferred-size")+e;case 6060:return j+"box-"+u(e,"-grow","")+j+e+M+u(e,"grow","positive")+e;case 4554:return j+u(e,/([^-])(transform)/g,"$1"+j+"$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,j+"box-pack:$3"+M+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,j+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(e)-1-t>6)switch(l(e,t+1)){case 109:if(45!==l(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1"+j+"$2-$3$1"+U+(108==l(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?re(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==l(e,t+1))break;case 6444:switch(l(e,p(e)-3-(~c(e,"!important")&&10))){case 107:return u(e,":",":"+j)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===l(e,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+M+"$2box$3")+e}break;case 5936:switch(l(e,t+11)){case 114:return j+e+M+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return j+e+M+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return j+e+M+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return j+e+M+e+e}return e}var ne=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case Z:e.return=re(e.value,e.length);break;case q:return V([x(e,{value:u(e.value,"@","@"+j)})],n);case z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return V([x(e,{props:[u(t,/:(read-\w+)/,":"+U+"$1")]})],n);case"::placeholder":return V([x(e,{props:[u(t,/:(plac\w+)/,":"+j+"input-$1")]}),x(e,{props:[u(t,/:(plac\w+)/,":"+U+"$1")]}),x(e,{props:[u(t,/:(plac\w+)/,M+"input-$1")]})],n)}return""}))}}],ae=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var a=e.stylisPlugins||ne;var i,o,s={},u=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)s[t[r]]=!0;u.push(e)}));var c,l,f=[K,(l=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],p=function(e){var t=h(e);return function(r,n,a,i){for(var o="",s=0;s<t;s++)o+=e[s](r,n,a,i)||"";return o}}([ee,te].concat(a,f));o=function(e,t,r,n){c=r,V(H(e?e+"{"+t.styles+"}":t.styles),p),n&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new n({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return d.sheet.hydrate(u),d}},9797:function(e,t,r){"use strict";function n(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}r.d(t,{Z:function(){return n}})},2564:function(e,t,r){"use strict";r.d(t,{T:function(){return u},i:function(){return i},w:function(){return s}});var n=r(2791),a=r(3361),i=(r(9140),r(2561),!0),o=n.createContext("undefined"!==typeof HTMLElement?(0,a.Z)({key:"css"}):null);o.Provider;var s=function(e){return(0,n.forwardRef)((function(t,r){var a=(0,n.useContext)(o);return e(t,a,r)}))};i||(s=function(e){return function(t){var r=(0,n.useContext)(o);return null===r?(r=(0,a.Z)({key:"css"}),n.createElement(o.Provider,{value:r},e(t,r))):e(t,r)}});var u=n.createContext({})},9140:function(e,t,r){"use strict";r.d(t,{O:function(){return d}});var n={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},a=r(9797),i=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,s=function(e){return 45===e.charCodeAt(1)},u=function(e){return null!=e&&"boolean"!==typeof e},c=(0,a.Z)((function(e){return s(e)?e:e.replace(i,"-$&").toLowerCase()})),l=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(o,(function(e,t,r){return p={name:t,styles:r,next:p},t}))}return 1===n[e]||s(e)||"number"!==typeof t||0===t?t:t+"px"};function f(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return p={name:r.name,styles:r.styles,next:p},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)p={name:n.name,styles:n.styles,next:p},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var a=0;a<r.length;a++)n+=f(e,t,r[a])+";";else for(var i in r){var o=r[i];if("object"!==typeof o)null!=t&&void 0!==t[o]?n+=i+"{"+t[o]+"}":u(o)&&(n+=c(i)+":"+l(i,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=f(e,t,o);switch(i){case"animation":case"animationName":n+=c(i)+":"+s+";";break;default:n+=i+"{"+s+"}"}}else for(var p=0;p<o.length;p++)u(o[p])&&(n+=c(i)+":"+l(i,o[p])+";")}return n}(e,t,r);case"function":if(void 0!==e){var a=p,i=r(e);return p=a,f(e,t,i)}}if(null==t)return r;var o=t[r];return void 0!==o?o:r}var p,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var d=function(e,t,r){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,a="";p=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,a+=f(r,t,i)):a+=i[0];for(var o=1;o<e.length;o++)a+=f(r,t,e[o]),n&&(a+=i[o]);h.lastIndex=0;for(var s,u="";null!==(s=h.exec(a));)u+="-"+s[1];var c=function(e){for(var t,r=0,n=0,a=e.length;a>=4;++n,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(a){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(a)+u;return{name:c,styles:a,next:p}}},2561:function(e,t,r){"use strict";var n;r.d(t,{L:function(){return o},j:function(){return s}});var a=r(2791),i=!!(n||(n=r.t(a,2))).useInsertionEffect&&(n||(n=r.t(a,2))).useInsertionEffect,o=i||function(e){return e()},s=i||a.useLayoutEffect},5438:function(e,t,r){"use strict";r.d(t,{My:function(){return i},fp:function(){return n},hC:function(){return a}});function n(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}var a=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},i=function(e,t,r){a(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+n:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}},260:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew");t.Z=o},3385:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");t.Z=o},8243:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");t.Z=o},7541:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");t.Z=o},8014:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"Print");t.Z=o},1130:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"}),"Shield");t.Z=o},7227:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm6 9.09c0 4-2.55 7.7-6 8.83-3.45-1.13-6-4.82-6-8.83v-4.7l6-2.25 6 2.25v4.7z"}),"ShieldOutlined");t.Z=o},5649:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(4454)},7107:function(e,t,r){"use strict";r.d(t,{Z:function(){return z}});var n=r(7462),a=r(3366),i=r(6189),o=r(2466),s=r(5080),u=r(7416),c=r(104),l=r(4942);function f(e,t){var r;return(0,n.Z)({toolbar:(r={minHeight:56},(0,l.Z)(r,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,l.Z)(r,e.up("sm"),{minHeight:64}),r)},t)}var p=r(2065),h={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},v={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},y={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},b={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},m={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},w={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},k=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:h.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},_={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function E(e,t,r,n){var a=n.light||n,i=n.dark||1.5*n;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:"light"===t?e.light=(0,p.$n)(e.main,a):"dark"===t&&(e.dark=(0,p._j)(e.main,i)))}function S(e){var t=e.mode,r=void 0===t?"light":t,s=e.contrastThreshold,u=void 0===s?3:s,c=e.tonalOffset,l=void 0===c?.2:c,f=(0,a.Z)(e,k),S=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(r),A=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[200],light:v[50],dark:v[400]}:{main:v[500],light:v[300],dark:v[700]}}(r),C=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[500],light:y[300],dark:y[700]}:{main:y[700],light:y[400],dark:y[800]}}(r),T=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:m[700],light:m[500],dark:m[900]}}(r),R=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:w[400],light:w[300],dark:w[700]}:{main:w[800],light:w[500],dark:w[900]}}(r),I=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:"#ed6c02",light:b[500],dark:b[900]}}(r);function P(e){return(0,p.mi)(e,_.text.primary)>=u?_.text.primary:x.text.primary}var D=function(e){var t=e.color,r=e.name,a=e.mainShade,o=void 0===a?500:a,s=e.lightShade,u=void 0===s?300:s,c=e.darkShade,f=void 0===c?700:c;if(!(t=(0,n.Z)({},t)).main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,i.Z)(11,r?" (".concat(r,")"):"",o));if("string"!==typeof t.main)throw new Error((0,i.Z)(12,r?" (".concat(r,")"):"",JSON.stringify(t.main)));return E(t,"light",u,l),E(t,"dark",f,l),t.contrastText||(t.contrastText=P(t.main)),t},N={dark:_,light:x};return(0,o.Z)((0,n.Z)({common:(0,n.Z)({},h),mode:r,primary:D({color:S,name:"primary"}),secondary:D({color:A,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:D({color:C,name:"error"}),warning:D({color:I,name:"warning"}),info:D({color:T,name:"info"}),success:D({color:R,name:"success"}),grey:d,contrastThreshold:u,getContrastText:P,augmentColor:D,tonalOffset:l},N[r]),f)}var A=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var C={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function R(e,t){var r="function"===typeof t?t(e):t,i=r.fontFamily,s=void 0===i?T:i,u=r.fontSize,c=void 0===u?14:u,l=r.fontWeightLight,f=void 0===l?300:l,p=r.fontWeightRegular,h=void 0===p?400:p,d=r.fontWeightMedium,v=void 0===d?500:d,y=r.fontWeightBold,b=void 0===y?700:y,g=r.htmlFontSize,m=void 0===g?16:g,w=r.allVariants,k=r.pxToRem,x=(0,a.Z)(r,A);var _=c/14,E=k||function(e){return"".concat(e/m*_,"rem")},S=function(e,t,r,a,i){return(0,n.Z)({fontFamily:s,fontWeight:e,fontSize:E(t),lineHeight:r},s===T?{letterSpacing:"".concat((o=a/t,Math.round(1e5*o)/1e5),"em")}:{},i,w);var o},R={h1:S(f,96,1.167,-1.5),h2:S(f,60,1.2,-.5),h3:S(h,48,1.167,0),h4:S(h,34,1.235,.25),h5:S(h,24,1.334,0),h6:S(v,20,1.6,.15),subtitle1:S(h,16,1.75,.15),subtitle2:S(v,14,1.57,.1),body1:S(h,16,1.5,.15),body2:S(h,14,1.43,.15),button:S(v,14,1.75,.4,C),caption:S(h,12,1.66,.4),overline:S(h,12,2.66,1,C),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,o.Z)((0,n.Z)({htmlFontSize:m,pxToRem:E,fontFamily:s,fontSize:c,fontWeightLight:f,fontWeightRegular:h,fontWeightMedium:v,fontWeightBold:b},R),x,{clone:!1})}function I(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var P=["none",I(0,2,1,-1,0,1,1,0,0,1,3,0),I(0,3,1,-2,0,2,2,0,0,1,5,0),I(0,3,3,-2,0,3,4,0,0,1,8,0),I(0,2,4,-1,0,4,5,0,0,1,10,0),I(0,3,5,-1,0,5,8,0,0,1,14,0),I(0,3,5,-1,0,6,10,0,0,1,18,0),I(0,4,5,-2,0,7,10,1,0,2,16,1),I(0,5,5,-3,0,8,10,1,0,3,14,2),I(0,5,6,-3,0,9,12,1,0,3,16,2),I(0,6,6,-3,0,10,14,1,0,4,18,3),I(0,6,7,-4,0,11,15,1,0,4,20,3),I(0,7,8,-4,0,12,17,2,0,5,22,4),I(0,7,8,-4,0,13,19,2,0,5,24,4),I(0,7,9,-4,0,14,21,2,0,5,26,4),I(0,8,9,-5,0,15,22,2,0,6,28,5),I(0,8,10,-5,0,16,24,2,0,6,30,5),I(0,8,11,-5,0,17,26,2,0,6,32,5),I(0,9,11,-5,0,18,28,2,0,7,34,6),I(0,9,12,-6,0,19,29,2,0,7,36,6),I(0,10,13,-6,0,20,31,3,0,8,38,7),I(0,10,13,-6,0,21,33,3,0,8,40,7),I(0,10,14,-6,0,22,35,3,0,8,42,7),I(0,11,14,-7,0,23,36,3,0,9,44,8),I(0,11,15,-7,0,24,38,3,0,9,46,8)],D=["duration","easing","delay"],N={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},O={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function L(e){return"".concat(Math.round(e),"ms")}function B(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function M(e){var t=(0,n.Z)({},N,e.easing),r=(0,n.Z)({},O,e.duration);return(0,n.Z)({getAutoHeightDuration:B,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.duration,o=void 0===i?r.standard:i,s=n.easing,u=void 0===s?t.easeInOut:s,c=n.delay,l=void 0===c?0:c;(0,a.Z)(n,D);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:L(o)," ").concat(u," ").concat("string"===typeof l?l:L(l))})).join(",")}},e,{easing:t,duration:r})}var U={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},j=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,r=void 0===t?{}:t,l=e.palette,p=void 0===l?{}:l,h=e.transitions,d=void 0===h?{}:h,v=e.typography,y=void 0===v?{}:v,b=(0,a.Z)(e,j);if(e.vars)throw new Error((0,i.Z)(18));var g=S(p),m=(0,s.Z)(e),w=(0,o.Z)(m,{mixins:f(m.breakpoints,r),palette:g,shadows:P.slice(),typography:R(g,y),transitions:M(d),zIndex:(0,n.Z)({},U)});w=(0,o.Z)(w,b);for(var k=arguments.length,x=new Array(k>1?k-1:0),_=1;_<k;_++)x[_-1]=arguments[_];return(w=x.reduce((function(e,t){return(0,o.Z)(e,t)}),w)).unstable_sxConfig=(0,n.Z)({},u.Z,null==b?void 0:b.unstable_sxConfig),w.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},w}var z=F},6482:function(e,t,r){"use strict";var n=(0,r(7107).Z)();t.Z=n},988:function(e,t){"use strict";t.Z="$$material"},6934:function(e,t,r){"use strict";r.d(t,{Dz:function(){return s},FO:function(){return o}});var n=r(4046),a=r(6482),i=r(988),o=function(e){return(0,n.x9)(e)&&"classes"!==e},s=n.x9,u=(0,n.ZP)({themeId:i.Z,defaultTheme:a.Z,rootShouldForwardProp:o});t.ZP=u},1402:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7078),a=r(6482),i=r(988);function o(e){var t=e.props,r=e.name;return(0,n.Z)({props:t,name:r,defaultTheme:a.Z,themeId:i.Z})}},4036:function(e,t,r){"use strict";var n=r(1122);t.Z=n.Z},9201:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(7462),a=r(2791),i=r(3366),o=r(3733),s=r(4419),u=r(4036),c=r(1402),l=r(6934),f=r(5878),p=r(1217);function h(e){return(0,p.Z)("MuiSvgIcon",e)}(0,f.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var d=r(184),v=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],y=(0,l.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,"inherit"!==r.color&&t["color".concat((0,u.Z)(r.color))],t["fontSize".concat((0,u.Z)(r.fontSize))]]}})((function(e){var t,r,n,a,i,o,s,u,c,l,f,p,h,d=e.theme,v=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:v.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(t=d.transitions)||null==(r=t.create)?void 0:r.call(t,"fill",{duration:null==(n=d.transitions)||null==(n=n.duration)?void 0:n.shorter}),fontSize:{inherit:"inherit",small:(null==(a=d.typography)||null==(i=a.pxToRem)?void 0:i.call(a,20))||"1.25rem",medium:(null==(o=d.typography)||null==(s=o.pxToRem)?void 0:s.call(o,24))||"1.5rem",large:(null==(u=d.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875rem"}[v.fontSize],color:null!=(l=null==(f=(d.vars||d).palette)||null==(f=f[v.color])?void 0:f.main)?l:{action:null==(p=(d.vars||d).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(h=(d.vars||d).palette)||null==(h=h.action)?void 0:h.disabled,inherit:void 0}[v.color]}})),b=a.forwardRef((function(e,t){var r=(0,c.Z)({props:e,name:"MuiSvgIcon"}),l=r.children,f=r.className,p=r.color,b=void 0===p?"inherit":p,g=r.component,m=void 0===g?"svg":g,w=r.fontSize,k=void 0===w?"medium":w,x=r.htmlColor,_=r.inheritViewBox,E=void 0!==_&&_,S=r.titleAccess,A=r.viewBox,C=void 0===A?"0 0 24 24":A,T=(0,i.Z)(r,v),R=a.isValidElement(l)&&"svg"===l.type,I=(0,n.Z)({},r,{color:b,component:m,fontSize:k,instanceFontSize:e.fontSize,inheritViewBox:E,viewBox:C,hasSvgAsChild:R}),P={};E||(P.viewBox=C);var D=function(e){var t=e.color,r=e.fontSize,n=e.classes,a={root:["root","inherit"!==t&&"color".concat((0,u.Z)(t)),"fontSize".concat((0,u.Z)(r))]};return(0,s.Z)(a,h,n)}(I);return(0,d.jsxs)(y,(0,n.Z)({as:m,className:(0,o.Z)(D.root,f),focusable:"false",color:x,"aria-hidden":!S||void 0,role:S?"img":void 0,ref:t},P,T,R&&l.props,{ownerState:I,children:[R?l.props.children:l,S?(0,d.jsx)("title",{children:S}):null]}))}));b.muiName="SvgIcon";var g=b;function m(e,t){function r(r,a){return(0,d.jsx)(g,(0,n.Z)({"data-testid":"".concat(t,"Icon"),ref:a},r,{children:e}))}return r.muiName=g.muiName,a.memo(a.forwardRef(r))}},3199:function(e,t,r){"use strict";var n=r(2254);t.Z=n.Z},4454:function(e,t,r){"use strict";r.r(t),r.d(t,{capitalize:function(){return a.Z},createChainedFunction:function(){return i},createSvgIcon:function(){return o.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return u},isMuiElement:function(){return c.Z},ownerDocument:function(){return l.Z},ownerWindow:function(){return f.Z},requirePropFactory:function(){return p},setRef:function(){return h},unstable_ClassNameGenerator:function(){return k},unstable_useEnhancedEffect:function(){return d.Z},unstable_useId:function(){return v},unsupportedProp:function(){return y},useControlled:function(){return b.Z},useEventCallback:function(){return g.Z},useForkRef:function(){return m.Z},useIsFocusVisible:function(){return w.Z}});var n=r(5902),a=r(4036),i=r(8949).Z,o=r(9201),s=r(3199);var u=function(e,t){return function(){return null}},c=r(3701),l=r(8301),f=r(7602);r(7462);var p=function(e,t){return function(){return null}},h=r(2971).Z,d=r(162),v=r(8252).Z;var y=function(e,t,r,n,a){return null},b=r(5158),g=r(9683),m=r(2071),w=r(3031),k={configure:function(e){n.Z.configure(e)}}},3701:function(e,t,r){"use strict";var n=r(78);t.Z=n.Z},8301:function(e,t,r){"use strict";var n=r(4913);t.Z=n.Z},7602:function(e,t,r){"use strict";var n=r(5202);t.Z=n.Z},5158:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9439),a=r(2791);var i=function(e){var t=e.controlled,r=e.default,i=(e.name,e.state,a.useRef(void 0!==t).current),o=a.useState(r),s=(0,n.Z)(o,2),u=s[0],c=s[1];return[i?t:u,a.useCallback((function(e){i||c(e)}),[])]}},162:function(e,t,r){"use strict";var n=r(2876);t.Z=n.Z},9683:function(e,t,r){"use strict";var n=r(7054);t.Z=n.Z},2071:function(e,t,r){"use strict";var n=r(6117);t.Z=n.Z},3031:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n,a=r(2791),i=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function c(){i=!1}function l(){"hidden"===this.visibilityState&&o&&(i=!0)}function f(e){var t=e.target;try{return t.matches(":focus-visible")}catch(r){}return i||function(e){var t=e.type,r=e.tagName;return!("INPUT"!==r||!s[t]||e.readOnly)||"TEXTAREA"===r&&!e.readOnly||!!e.isContentEditable}(t)}var p=function(){var e=a.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",l,!0))}),[]),t=a.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!f(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(n),n=window.setTimeout((function(){o=!1}),100),t.current=!1,!0)},ref:e}}},2421:function(e,t,r){"use strict";r.d(t,{ZP:function(){return g},Co:function(){return m}});var n=r(7462),a=r(2791),i=r(9797),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,i.Z)((function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),u=r(2564),c=r(5438),l=r(9140),f=r(2561),p=s,h=function(e){return"theme"!==e},d=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?p:h},v=function(e,t,r){var n;if(t){var a=t.shouldForwardProp;n=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof n&&r&&(n=e.__emotion_forwardProp),n},y=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return(0,c.hC)(t,r,n),(0,f.L)((function(){return(0,c.My)(t,r,n)})),null},b=function e(t,r){var i,o,s=t.__emotion_real===t,f=s&&t.__emotion_base||t;void 0!==r&&(i=r.label,o=r.target);var p=v(t,r,s),h=p||d(f),b=!h("as");return function(){var g=arguments,m=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&m.push("label:"+i+";"),null==g[0]||void 0===g[0].raw)m.push.apply(m,g);else{0,m.push(g[0][0]);for(var w=g.length,k=1;k<w;k++)m.push(g[k],g[0][k])}var x=(0,u.w)((function(e,t,r){var n=b&&e.as||f,i="",s=[],v=e;if(null==e.theme){for(var g in v={},e)v[g]=e[g];v.theme=a.useContext(u.T)}"string"===typeof e.className?i=(0,c.fp)(t.registered,s,e.className):null!=e.className&&(i=e.className+" ");var w=(0,l.O)(m.concat(s),t.registered,v);i+=t.key+"-"+w.name,void 0!==o&&(i+=" "+o);var k=b&&void 0===p?d(n):h,x={};for(var _ in e)b&&"as"===_||k(_)&&(x[_]=e[_]);return x.className=i,x.ref=r,a.createElement(a.Fragment,null,a.createElement(y,{cache:t,serialized:w,isStringTag:"string"===typeof n}),a.createElement(n,x))}));return x.displayName=void 0!==i?i:"Styled("+("string"===typeof f?f:f.displayName||f.name||"Component")+")",x.defaultProps=t.defaultProps,x.__emotion_real=x,x.__emotion_base=f,x.__emotion_styles=m,x.__emotion_forwardProp=p,Object.defineProperty(x,"toString",{value:function(){return"."+o}}),x.withComponent=function(t,a){return e(t,(0,n.Z)({},r,a,{shouldForwardProp:v(x,a,!0)})).apply(void 0,m)},x}}.bind();function g(e,t){return b(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){b[e]=b(e)}));var m=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},1184:function(e,t,r){"use strict";r.d(t,{L7:function(){return u},P$:function(){return l},VO:function(){return a},W8:function(){return s},dt:function(){return c},k9:function(){return o}});var n=r(2466),a={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(a[e],"px)")}};function o(e,t,r){var n=e.theme||{};if(Array.isArray(t)){var o=n.breakpoints||i;return t.reduce((function(e,n,a){return e[o.up(o.keys[a])]=r(t[a]),e}),{})}if("object"===typeof t){var s=n.breakpoints||i;return Object.keys(t).reduce((function(e,n){if(-1!==Object.keys(s.values||a).indexOf(n)){e[s.up(n)]=r(t[n],n)}else{var i=n;e[i]=t[i]}return e}),{})}return r(t)}function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=t.keys)?void 0:e.reduce((function(e,r){return e[t.up(r)]={},e}),{}))||{}}function u(e,t){return e.reduce((function(e,t){var r=e[t];return(!r||0===Object.keys(r).length)&&delete e[t],e}),t)}function c(e){for(var t=s(e),r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var o=[t].concat(a).reduce((function(e,t){return(0,n.Z)(e,t)}),{});return u(Object.keys(t),o)}function l(e){var t,r=e.values,n=e.breakpoints,a=e.base||function(e,t){if("object"!==typeof e)return{};var r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((function(t,n){n<e.length&&(r[t]=!0)})):n.forEach((function(t){null!=e[t]&&(r[t]=!0)})),r}(r,n),i=Object.keys(a);return 0===i.length?r:i.reduce((function(e,n,a){return Array.isArray(r)?(e[n]=null!=r[a]?r[a]:r[t],t=a):"object"===typeof r?(e[n]=null!=r[n]?r[n]:r[t],t=n):e[n]=r,e}),{})}},2065:function(e,t,r){"use strict";r.d(t,{$n:function(){return f},Fq:function(){return c},_j:function(){return l},mi:function(){return u}});var n=r(6189);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),r)}function i(e){if(e.type)return e;if("#"===e.charAt(0))return i(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),r=e.match(t);return r&&1===r[0].length&&(r=r.map((function(e){return e+e}))),r?"rgb".concat(4===r.length?"a":"","(").concat(r.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),r=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(r))throw new Error((0,n.Z)(9,e));var a,o=e.substring(t+1,e.length-1);if("color"===r){if(a=(o=o.split(" ")).shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a))throw new Error((0,n.Z)(10,a))}else o=o.split(",");return{type:r,values:o=o.map((function(e){return parseFloat(e)})),colorSpace:a}}function o(e){var t=e.type,r=e.colorSpace,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),n=-1!==t.indexOf("color")?"".concat(r," ").concat(n.join(" ")):"".concat(n.join(", ")),"".concat(t,"(").concat(n,")")}function s(e){var t="hsl"===(e=i(e)).type||"hsla"===e.type?i(function(e){var t=(e=i(e)).values,r=t[0],n=t[1]/100,a=t[2]/100,s=n*Math.min(a,1-a),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+r/30)%12;return a-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),o({type:c,values:l})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){var r=s(e),n=s(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function c(e,t){return e=i(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,o(e)}function l(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]*=1-t;return o(e)}function f(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return o(e)}},4046:function(e,t,r){"use strict";r.d(t,{ZP:function(){return x},x9:function(){return g}});var n=r(3433),a=r(9439),i=r(3366),o=r(7462),s=r(2421),u=r(5080),c=r(1122),l=["variant"];function f(e){return 0===e.length}function p(e){var t=e.variant,r=(0,i.Z)(e,l),n=t||"";return Object.keys(r).sort().forEach((function(t){n+="color"===t?f(n)?e[t]:(0,c.Z)(e[t]):"".concat(f(n)?t:(0,c.Z)(t)).concat((0,c.Z)(e[t].toString()))})),n}var h=r(104),d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];var v=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},y=function(e,t){var r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);var n={};return r.forEach((function(e){var t=p(e.props);n[t]=e.style})),n},b=function(e,t,r,n){var a,i=e.ownerState,o=void 0===i?{}:i,s=[],u=null==r||null==(a=r.components)||null==(a=a[n])?void 0:a.variants;return u&&u.forEach((function(r){var n=!0;Object.keys(r.props).forEach((function(t){o[t]!==r.props[t]&&e[t]!==r.props[t]&&(n=!1)})),n&&s.push(t[p(r.props)])})),s};function g(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var m=(0,u.Z)(),w=function(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e};function k(e){var t,r=e.defaultTheme,n=e.theme,a=e.themeId;return t=n,0===Object.keys(t).length?r:n[a]||n}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,r=e.defaultTheme,u=void 0===r?m:r,c=e.rootShouldForwardProp,l=void 0===c?g:c,f=e.slotShouldForwardProp,p=void 0===f?g:f,x=function(e){return(0,h.Z)((0,o.Z)({},e,{theme:k((0,o.Z)({},e,{defaultTheme:u,themeId:t}))}))};return x.__mui_systemSx=!0,function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var c,f=r.name,h=r.slot,m=r.skipVariantsResolver,_=r.skipSx,E=r.overridesResolver,S=void 0===E?(c=w(h))?function(e,t){return t[c]}:null:E,A=(0,i.Z)(r,d),C=void 0!==m?m:h&&"Root"!==h&&"root"!==h||!1,T=_||!1;var R=g;"Root"===h||"root"===h?R=l:h?R=p:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(R=void 0);var I=(0,s.ZP)(e,(0,o.Z)({shouldForwardProp:R,label:undefined},A)),P=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];var l=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(r){return e((0,o.Z)({},r,{theme:k((0,o.Z)({},r,{defaultTheme:u,themeId:t}))}))}:e})):[],p=r;f&&S&&l.push((function(e){var r=k((0,o.Z)({},e,{defaultTheme:u,themeId:t})),n=v(f,r);if(n){var i={};return Object.entries(n).forEach((function(t){var n=(0,a.Z)(t,2),s=n[0],u=n[1];i[s]="function"===typeof u?u((0,o.Z)({},e,{theme:r})):u})),S(e,i)}return null})),f&&!C&&l.push((function(e){var r=k((0,o.Z)({},e,{defaultTheme:u,themeId:t}));return b(e,y(f,r),r,f)})),T||l.push(x);var h=l.length-s.length;if(Array.isArray(r)&&h>0){var d=new Array(h).fill("");(p=[].concat((0,n.Z)(r),(0,n.Z)(d))).raw=[].concat((0,n.Z)(r.raw),(0,n.Z)(d))}else"function"===typeof r&&r.__emotion_real!==r&&(p=function(e){return r((0,o.Z)({},e,{theme:k((0,o.Z)({},e,{defaultTheme:u,themeId:t}))}))});var g=I.apply(void 0,[p].concat((0,n.Z)(l)));return e.muiName&&(g.muiName=e.muiName),g};return I.withConfig&&(P.withConfig=I.withConfig),P}}},5080:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(7462),a=r(3366),i=r(2466),o=r(4942),s=["values","unit","step"],u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,n.Z)({},e,(0,o.Z)({},t.key,t.val))}),{})};var c={borderRadius:4},l=r(5682);var f=r(104),p=r(7416),h=["breakpoints","palette","spacing","shape"];var d=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,r=void 0===t?{}:t,o=e.palette,d=void 0===o?{}:o,v=e.spacing,y=e.shape,b=void 0===y?{}:y,g=(0,a.Z)(e,h),m=function(e){var t=e.values,r=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,i=e.unit,o=void 0===i?"px":i,c=e.step,l=void 0===c?5:c,f=(0,a.Z)(e,s),p=u(r),h=Object.keys(p);function d(e){var t="number"===typeof r[e]?r[e]:e;return"@media (min-width:".concat(t).concat(o,")")}function v(e){var t="number"===typeof r[e]?r[e]:e;return"@media (max-width:".concat(t-l/100).concat(o,")")}function y(e,t){var n=h.indexOf(t);return"@media (min-width:".concat("number"===typeof r[e]?r[e]:e).concat(o,") and ")+"(max-width:".concat((-1!==n&&"number"===typeof r[h[n]]?r[h[n]]:t)-l/100).concat(o,")")}return(0,n.Z)({keys:h,values:p,up:d,down:v,between:y,only:function(e){return h.indexOf(e)+1<h.length?y(e,h[h.indexOf(e)+1]):d(e)},not:function(e){var t=h.indexOf(e);return 0===t?d(h[1]):t===h.length-1?v(h[t]):y(e,h[h.indexOf(e)+1]).replace("@media","@media not all and")},unit:o},f)}(r),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,l.hB)({spacing:e}),r=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0===r.length?[1]:r).map((function(e){var r=t(e);return"number"===typeof r?"".concat(r,"px"):r})).join(" ")};return r.mui=!0,r}(v),k=(0,i.Z)({breakpoints:m,direction:"ltr",components:{},palette:(0,n.Z)({mode:"light"},d),spacing:w,shape:(0,n.Z)({},c,b)},g),x=arguments.length,_=new Array(x>1?x-1:0),E=1;E<x;E++)_[E-1]=arguments[E];return(k=_.reduce((function(e,t){return(0,i.Z)(e,t)}),k)).unstable_sxConfig=(0,n.Z)({},p.Z,null==g?void 0:g.unstable_sxConfig),k.unstable_sx=function(e){return(0,f.Z)({sx:e,theme:this})},k}},8247:function(e,t,r){"use strict";var n=r(2466);t.Z=function(e,t){return t?(0,n.Z)(e,t,{clone:!1}):e}},5682:function(e,t,r){"use strict";r.d(t,{hB:function(){return v},eI:function(){return d},NA:function(){return y},e6:function(){return m},o3:function(){return w}});var n=r(9439),a=r(1184),i=r(8529),o=r(8247);var s={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}((function(e){if(e.length>2){if(!c[e])return[e];e=c[e]}var t=e.split(""),r=(0,n.Z)(t,2),a=r[0],i=r[1],o=s[a],l=u[i]||"";return Array.isArray(l)?l.map((function(e){return o+e})):[o+l]})),f=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[].concat(f,p);function d(e,t,r,n){var a,o=null!=(a=(0,i.DW)(e,t,!1))?a:r;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function v(e){return d(e,"spacing",8)}function y(e,t){if("string"===typeof t||null==t)return t;var r=e(Math.abs(t));return t>=0?r:"number"===typeof r?-r:"-".concat(r)}function b(e,t,r,n){if(-1===t.indexOf(r))return null;var i=function(e,t){return function(r){return e.reduce((function(e,n){return e[n]=y(t,r),e}),{})}}(l(r),n),o=e[r];return(0,a.k9)(e,o,i)}function g(e,t){var r=v(e.theme);return Object.keys(e).map((function(n){return b(e,t,n,r)})).reduce(o.Z,{})}function m(e){return g(e,f)}function w(e){return g(e,p)}function k(e){return g(e,h)}m.propTypes={},m.filterProps=f,w.propTypes={},w.filterProps=p,k.propTypes={},k.filterProps=h},8529:function(e,t,r){"use strict";r.d(t,{DW:function(){return o},Jq:function(){return s}});var n=r(4942),a=r(1122),i=r(1184);function o(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&r){var n="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=n)return n}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function s(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;return n="function"===typeof e?e(r):Array.isArray(e)?e[r]||a:o(e,r)||a,t&&(n=t(n,a,e)),n}t.ZP=function(e){var t=e.prop,r=e.cssProperty,u=void 0===r?e.prop:r,c=e.themeKey,l=e.transform,f=function(e){if(null==e[t])return null;var r=e[t],f=o(e.theme,c)||{};return(0,i.k9)(e,r,(function(e){var r=s(f,l,e);return e===r&&"string"===typeof e&&(r=s(f,l,"".concat(t).concat("default"===e?"":(0,a.Z)(e)),e)),!1===u?r:(0,n.Z)({},u,r)}))};return f.propTypes={},f.filterProps=[t],f}},7416:function(e,t,r){"use strict";r.d(t,{Z:function(){return P}});var n=r(5682),a=r(8529),i=r(8247);var o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return t.filterProps.forEach((function(r){e[r]=t})),e}),{}),a=function(e){return Object.keys(e).reduce((function(t,r){return n[r]?(0,i.Z)(t,n[r](e)):t}),{})};return a.propTypes={},a.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),a},s=r(1184);function u(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var c=(0,a.ZP)({prop:"border",themeKey:"borders",transform:u}),l=(0,a.ZP)({prop:"borderTop",themeKey:"borders",transform:u}),f=(0,a.ZP)({prop:"borderRight",themeKey:"borders",transform:u}),p=(0,a.ZP)({prop:"borderBottom",themeKey:"borders",transform:u}),h=(0,a.ZP)({prop:"borderLeft",themeKey:"borders",transform:u}),d=(0,a.ZP)({prop:"borderColor",themeKey:"palette"}),v=(0,a.ZP)({prop:"borderTopColor",themeKey:"palette"}),y=(0,a.ZP)({prop:"borderRightColor",themeKey:"palette"}),b=(0,a.ZP)({prop:"borderBottomColor",themeKey:"palette"}),g=(0,a.ZP)({prop:"borderLeftColor",themeKey:"palette"}),m=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,n.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,n.NA)(t,e)}}))}return null};m.propTypes={},m.filterProps=["borderRadius"];o(c,l,f,p,h,d,v,y,b,g,m);var w=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,n.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,n.NA)(t,e)}}))}return null};w.propTypes={},w.filterProps=["gap"];var k=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,n.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,n.NA)(t,e)}}))}return null};k.propTypes={},k.filterProps=["columnGap"];var x=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,n.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,n.NA)(t,e)}}))}return null};x.propTypes={},x.filterProps=["rowGap"];o(w,k,x,(0,a.ZP)({prop:"gridColumn"}),(0,a.ZP)({prop:"gridRow"}),(0,a.ZP)({prop:"gridAutoFlow"}),(0,a.ZP)({prop:"gridAutoColumns"}),(0,a.ZP)({prop:"gridAutoRows"}),(0,a.ZP)({prop:"gridTemplateColumns"}),(0,a.ZP)({prop:"gridTemplateRows"}),(0,a.ZP)({prop:"gridTemplateAreas"}),(0,a.ZP)({prop:"gridArea"}));function _(e,t){return"grey"===t?t:e}o((0,a.ZP)({prop:"color",themeKey:"palette",transform:_}),(0,a.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:_}),(0,a.ZP)({prop:"backgroundColor",themeKey:"palette",transform:_}));function E(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var S=(0,a.ZP)({prop:"width",transform:E}),A=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var r,n,a=(null==(r=e.theme)||null==(r=r.breakpoints)||null==(r=r.values)?void 0:r[t])||s.VO[t];return a?"px"!==(null==(n=e.theme)||null==(n=n.breakpoints)?void 0:n.unit)?{maxWidth:"".concat(a).concat(e.theme.breakpoints.unit)}:{maxWidth:a}:{maxWidth:E(t)}}))}return null};A.filterProps=["maxWidth"];var C=(0,a.ZP)({prop:"minWidth",transform:E}),T=(0,a.ZP)({prop:"height",transform:E}),R=(0,a.ZP)({prop:"maxHeight",transform:E}),I=(0,a.ZP)({prop:"minHeight",transform:E}),P=((0,a.ZP)({prop:"size",cssProperty:"width",transform:E}),(0,a.ZP)({prop:"size",cssProperty:"height",transform:E}),o(S,A,C,T,R,I,(0,a.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:u},borderTop:{themeKey:"borders",transform:u},borderRight:{themeKey:"borders",transform:u},borderBottom:{themeKey:"borders",transform:u},borderLeft:{themeKey:"borders",transform:u},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:m},color:{themeKey:"palette",transform:_},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:_},backgroundColor:{themeKey:"palette",transform:_},p:{style:n.o3},pt:{style:n.o3},pr:{style:n.o3},pb:{style:n.o3},pl:{style:n.o3},px:{style:n.o3},py:{style:n.o3},padding:{style:n.o3},paddingTop:{style:n.o3},paddingRight:{style:n.o3},paddingBottom:{style:n.o3},paddingLeft:{style:n.o3},paddingX:{style:n.o3},paddingY:{style:n.o3},paddingInline:{style:n.o3},paddingInlineStart:{style:n.o3},paddingInlineEnd:{style:n.o3},paddingBlock:{style:n.o3},paddingBlockStart:{style:n.o3},paddingBlockEnd:{style:n.o3},m:{style:n.e6},mt:{style:n.e6},mr:{style:n.e6},mb:{style:n.e6},ml:{style:n.e6},mx:{style:n.e6},my:{style:n.e6},margin:{style:n.e6},marginTop:{style:n.e6},marginRight:{style:n.e6},marginBottom:{style:n.e6},marginLeft:{style:n.e6},marginX:{style:n.e6},marginY:{style:n.e6},marginInline:{style:n.e6},marginInlineStart:{style:n.e6},marginInlineEnd:{style:n.e6},marginBlock:{style:n.e6},marginBlockStart:{style:n.e6},marginBlockEnd:{style:n.e6},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:w},rowGap:{style:x},columnGap:{style:k},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:E},maxWidth:{style:A},minWidth:{transform:E},height:{transform:E},maxHeight:{transform:E},minHeight:{transform:E},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},104:function(e,t,r){"use strict";var n=r(4942),a=r(1122),i=r(8247),o=r(8529),s=r(1184),u=r(7416);var c=function(){function e(e,t,r,i){var u,c=(u={},(0,n.Z)(u,e,t),(0,n.Z)(u,"theme",r),u),l=i[e];if(!l)return(0,n.Z)({},e,t);var f=l.cssProperty,p=void 0===f?e:f,h=l.themeKey,d=l.transform,v=l.style;if(null==t)return null;if("typography"===h&&"inherit"===t)return(0,n.Z)({},e,t);var y=(0,o.DW)(r,h)||{};if(v)return v(c);return(0,s.k9)(c,t,(function(t){var r=(0,o.Jq)(y,d,t);return t===r&&"string"===typeof t&&(r=(0,o.Jq)(y,d,"".concat(e).concat("default"===t?"":(0,a.Z)(t)),t)),!1===p?r:(0,n.Z)({},p,r)}))}return function t(r){var a,o=r||{},c=o.sx,l=o.theme,f=void 0===l?{}:l;if(!c)return null;var p=null!=(a=f.unstable_sxConfig)?a:u.Z;function h(r){var a=r;if("function"===typeof r)a=r(f);else if("object"!==typeof r)return r;if(!a)return null;var o=(0,s.W8)(f.breakpoints),u=Object.keys(o),c=o;return Object.keys(a).forEach((function(r){var o,u,l=(o=a[r],u=f,"function"===typeof o?o(u):o);if(null!==l&&void 0!==l)if("object"===typeof l)if(p[r])c=(0,i.Z)(c,e(r,l,f,p));else{var h=(0,s.k9)({theme:f},l,(function(e){return(0,n.Z)({},r,e)}));!function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),a=new Set(n);return t.every((function(e){return a.size===Object.keys(e).length}))}(h,l)?c=(0,i.Z)(c,h):c[r]=t({sx:l,theme:f})}else c=(0,i.Z)(c,e(r,l,f,p))})),(0,s.L7)(u,c)}return Array.isArray(c)?c.map(h):h(c)}}();c.filterProps=["sx"],t.Z=c},418:function(e,t,r){"use strict";var n=r(5080),a=r(9120),i=(0,n.Z)();t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return(0,a.Z)(e)}},7078:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(5735);var a=r(418);function i(e){var t=e.props,r=e.name,i=e.defaultTheme,o=e.themeId,s=(0,a.Z)(i);o&&(s=s[o]||s);var u=function(e){var t=e.theme,r=e.name,a=e.props;return t&&t.components&&t.components[r]&&t.components[r].defaultProps?(0,n.Z)(t.components[r].defaultProps,a):a}({theme:s,name:r,props:t});return u}},9120:function(e,t,r){"use strict";var n=r(2791),a=r(2564);t.Z=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=n.useContext(a.T);return r&&(e=r,0!==Object.keys(e).length)?r:t}},5902:function(e,t){"use strict";var r=function(e){return e},n=function(){var e=r;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=r}}}();t.Z=n},1122:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(6189);function a(e){if("string"!==typeof e)throw new Error((0,n.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4419:function(e,t,r){"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n={};return Object.keys(e).forEach((function(a){n[a]=e[a].reduce((function(e,n){if(n){var a=t(n);""!==a&&e.push(a),r&&r[n]&&e.push(r[n])}return e}),[]).join(" ")})),n}r.d(t,{Z:function(){return n}})},8949:function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return null==t?e:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];e.apply(this,n),t.apply(this,n)}}),(function(){}))}r.d(t,{Z:function(){return n}})},2254:function(e,t,r){"use strict";function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((function(){e.apply(n,i)}),r)}return n.clear=function(){clearTimeout(t)},n}r.d(t,{Z:function(){return n}})},2466:function(e,t,r){"use strict";r.d(t,{P:function(){return a},Z:function(){return o}});var n=r(7462);function a(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function i(e){if(!a(e))return e;var t={};return Object.keys(e).forEach((function(r){t[r]=i(e[r])})),t}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},s=r.clone?(0,n.Z)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(n){"__proto__"!==n&&(a(t[n])&&n in e&&a(e[n])?s[n]=o(e[n],t[n],r):r.clone?s[n]=a(t[n])?i(t[n]):t[n]:s[n]=t[n])})),s}},6189:function(e,t,r){"use strict";function n(e){for(var t="https://mui.com/production-error/?code="+e,r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}r.d(t,{Z:function(){return n}})},1217:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(5902),a={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i=a[t];return i?"".concat(r,"-").concat(i):"".concat(n.Z.generate(e),"-").concat(t)}},5878:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(1217);function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a={};return t.forEach((function(t){a[t]=(0,n.Z)(e,t,r)})),a}},78:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2791);function a(e,t){return n.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},4913:function(e,t,r){"use strict";function n(e){return e&&e.ownerDocument||document}r.d(t,{Z:function(){return n}})},5202:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(4913);function a(e){return(0,n.Z)(e).defaultView||window}},5735:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(7462);function a(e,t){var r=(0,n.Z)({},t);return Object.keys(e).forEach((function(i){if(i.toString().match(/^(components|slots)$/))r[i]=(0,n.Z)({},e[i],r[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){var o=e[i]||{},s=t[i];r[i]={},s&&Object.keys(s)?o&&Object.keys(o)?(r[i]=(0,n.Z)({},s),Object.keys(o).forEach((function(e){r[i][e]=a(o[e],s[e])}))):r[i]=s:r[i]=o}else void 0===r[i]&&(r[i]=e[i])})),r}},2971:function(e,t,r){"use strict";function n(e,t){"function"===typeof e?e(t):e&&(e.current=t)}r.d(t,{Z:function(){return n}})},2876:function(e,t,r){"use strict";var n=r(2791),a="undefined"!==typeof window?n.useLayoutEffect:n.useEffect;t.Z=a},7054:function(e,t,r){"use strict";var n=r(2791),a=r(2876);t.Z=function(e){var t=n.useRef(e);return(0,a.Z)((function(){t.current=e})),n.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},6117:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2791),a=r(2971);function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){(0,a.Z)(t,e)}))}}),t)}},8252:function(e,t,r){"use strict";var n;r.d(t,{Z:function(){return u}});var a=r(9439),i=r(2791),o=0;var s=(n||(n=r.t(i,2)))["useId".toString()];function u(e){if(void 0!==s){var t=s();return null!=e?e:t}return function(e){var t=i.useState(e),r=(0,a.Z)(t,2),n=r[0],s=r[1],u=e||n;return i.useEffect((function(){null==n&&s("mui-".concat(o+=1))}),[n]),u}(e)}},7206:function(e){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,a=2,i=!0;for(;a<arguments.length;)r[n++]=arguments[a++];return new Promise((function(a,o){r[n]=function(e){if(i)if(i=!1,e)o(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];a.apply(null,t)}};try{e.apply(t||null,r)}catch(s){i&&(i=!1,o(s))}}))}},1:function(e,t){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),a=new Array(123),i=0;i<64;)a[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var a,i=null,o=[],s=0,u=0;t<r;){var c=e[t++];switch(u){case 0:o[s++]=n[c>>2],a=(3&c)<<4,u=1;break;case 1:o[s++]=n[a|c>>4],a=(15&c)<<2,u=2;break;case 2:o[s++]=n[a|c>>6],o[s++]=n[63&c],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=n[a],o[s++]=61,1===u&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var o="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,s=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=a[c]))throw Error(o);switch(s){case 0:n=c,s=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:t[r++]=(3&n)<<6|c,s=0}}if(1===s)throw Error(o);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},3297:function(e){"use strict";function t(e,r){"string"===typeof e&&(r=e,e=void 0);var n=[];function a(e){if("string"!==typeof e){var r=i();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var o=Object.keys(e),s=new Array(o.length+1),u=new Array(o.length),c=0;c<o.length;)s[c]=o[c],u[c]=e[o[c++]];return s[c]=r,Function.apply(null,s).apply(null,u)}return Function(r)()}for(var l=new Array(arguments.length-1),f=0;f<l.length;)l[f]=arguments[++f];if(f=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=l[f++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),f!==l.length)throw Error("parameter count mismatch");return n.push(e),a}function i(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return a.toString=i,a}e.exports=t,t.verbose=!1},7111:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},7635:function(e,t,r){"use strict";e.exports=i;var n=r(7206),a=r(7172)("fs");function i(e,t,r){return"function"===typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&a&&a.readFile?a.readFile(e,(function(n,a){return n&&"undefined"!==typeof XMLHttpRequest?i.xhr(e,t,r):n?r(n):r(null,t.binary?a:a.toString("utf8"))})):i.xhr(e,t,r):n(i,this,e,t)}i.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var a=0;a<n.responseText.length;++a)e.push(255&n.responseText.charCodeAt(a))}return r(null,"undefined"!==typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},802:function(e){"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function a(e,n,a){t[0]=e,n[a]=r[0],n[a+1]=r[1],n[a+2]=r[2],n[a+3]=r[3]}function i(e,n,a){t[0]=e,n[a]=r[3],n[a+1]=r[2],n[a+2]=r[1],n[a+3]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?a:i,e.writeFloatBE=n?i:a,e.readFloatLE=n?o:s,e.readFloatBE=n?s:o}():function(){function t(e,t,r,n){var a=t<0?1:0;if(a&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((a<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((a<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((a<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function o(e,t,r){var n=e(t,r),a=2*(n>>31)+1,i=n>>>23&255,o=8388607&n;return 255===i?o?NaN:a*(1/0):0===i?1401298464324817e-60*a*o:a*Math.pow(2,i-150)*(o+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=o.bind(null,a),e.readFloatBE=o.bind(null,i)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function a(e,n,a){t[0]=e,n[a]=r[0],n[a+1]=r[1],n[a+2]=r[2],n[a+3]=r[3],n[a+4]=r[4],n[a+5]=r[5],n[a+6]=r[6],n[a+7]=r[7]}function i(e,n,a){t[0]=e,n[a]=r[7],n[a+1]=r[6],n[a+2]=r[5],n[a+3]=r[4],n[a+4]=r[3],n[a+5]=r[2],n[a+6]=r[1],n[a+7]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?a:i,e.writeDoubleBE=n?i:a,e.readDoubleLE=n?o:s,e.readDoubleBE=n?s:o}():function(){function t(e,t,r,n,a,i){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,a,i+t),e(1/n>0?0:2147483648,a,i+r);else if(isNaN(n))e(0,a,i+t),e(2146959360,a,i+r);else if(n>17976931348623157e292)e(0,a,i+t),e((o<<31|2146435072)>>>0,a,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,a,i+t),e((o<<31|s/4294967296)>>>0,a,i+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=n*Math.pow(2,-u))>>>0,a,i+t),e((o<<31|u+1023<<20|1048576*s&1048575)>>>0,a,i+r)}}}function o(e,t,r,n,a){var i=e(n,a+t),o=e(n,a+r),s=2*(o>>31)+1,u=o>>>20&2047,c=4294967296*(1048575&o)+i;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=o.bind(null,a,0,4),e.readDoubleBE=o.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7172:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},7468:function(e,t){"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},a=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),a="";r&&(a=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):r?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return a+t.join("/")};r.resolve=function(e,t,r){return r||(t=a(t)),n(t)?t:(r||(e=a(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?a(e+"/"+t):t)}},8236:function(e){"use strict";e.exports=function(e,t,r){var n=r||8192,a=n>>>1,i=null,o=n;return function(r){if(r<1||r>a)return e(r);o+r>n&&(i=e(n),o=0);var s=t.call(i,o,o+=r);return 7&o&&(o=1+(7|o)),s}}},3861:function(e,t){"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,a=null,i=[],o=0;t<r;)(n=e[t++])<128?i[o++]=n:n>191&&n<224?i[o++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[o++]=55296+(n>>10),i[o++]=56320+(1023&n)):i[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,i.slice(0,o))),a.join("")):String.fromCharCode.apply(String,i.slice(0,o))},r.write=function(e,t,r){for(var n,a,i=r,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296===(64512&n)&&56320===(64512&(a=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&a),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},6232:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5073);function a(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function s(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function u(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function c(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function l(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function f(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function p(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),l(e/4294967296>>>0,t,r),l(e>>>0,t,r+4),t}function h(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),f(e>>>0,t,r),f(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=a,t.writeInt16BE=a,t.writeUint16LE=i,t.writeInt16LE=i,t.readInt32BE=o,t.readUint32BE=s,t.readInt32LE=u,t.readUint32LE=c,t.writeUint32BE=l,t.writeInt32BE=l,t.writeUint32LE=f,t.writeInt32LE=f,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=o(e,t),n=o(e,t+4);return 4294967296*r+n-4294967296*(n>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*s(e,t)+s(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=u(e,t);return 4294967296*u(e,t+4)+r-4294967296*(r>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r},t.writeUint64BE=p,t.writeInt64BE=p,t.writeUint64LE=h,t.writeInt64LE=h,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,a=1,i=e/8+r-1;i>=r;i--)n+=t[i]*a,a*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,a=1,i=r;i<r+e/8;i++)n+=t[i]*a,a*=256;return n},t.writeUintBE=function(e,t,r,a){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===a&&(a=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,o=e/8+a-1;o>=a;o--)r[o]=t/i&255,i*=256;return r},t.writeUintLE=function(e,t,r,a){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===a&&(a=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,o=a;o<a+e/8;o++)r[o]=t/i&255,i*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},3642:function(e,t,r){"use strict";var n=r(8284),a=r(5629),i=r(9116),o=r(6232),s=r(8770);t.Cv=32,t.WH=12,t.pg=16;var u=new Uint8Array(16),c=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,a){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var s=new Uint8Array(32);n.stream(this._key,o,s,4);var u,c=t.length+this.tagLength;if(a){if(a.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=a}else u=new Uint8Array(c);return n.streamXOR(this._key,o,t,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),s,u.subarray(0,u.length-this.tagLength),r),i.wipe(o),u},e.prototype.open=function(e,t,r,a){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var u=new Uint8Array(32);n.stream(this._key,o,u,4);var c=new Uint8Array(this.tagLength);if(this._authenticate(c,u,t.subarray(0,t.length-this.tagLength),r),!s.equal(c,t.subarray(t.length-this.tagLength,t.length)))return null;var l,f=t.length-this.tagLength;if(a){if(a.length!==f)throw new Error("ChaCha20Poly1305: incorrect destination length");l=a}else l=new Uint8Array(f);return n.streamXOR(this._key,o,t.subarray(0,t.length-this.tagLength),l,4),i.wipe(o),l},e.prototype.clean=function(){return i.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,n){var s=new a.Poly1305(t);n&&(s.update(n),n.length%16>0&&s.update(u.subarray(n.length%16))),s.update(r),r.length%16>0&&s.update(u.subarray(r.length%16));var c=new Uint8Array(8);n&&o.writeUint64LE(n.length,c),s.update(c),o.writeUint64LE(r.length,c),s.update(c);for(var l=s.digest(),f=0;f<l.length;f++)e[f]=l[f];s.clean(),i.wipe(l),i.wipe(c)},e}();t.OK=c},8284:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6232),a=r(9116),i=20;function o(e,t,r){for(var a=1634760805,o=857760878,s=2036477234,u=1797285236,c=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],f=r[11]<<24|r[10]<<16|r[9]<<8|r[8],p=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],d=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],y=r[31]<<24|r[30]<<16|r[29]<<8|r[28],b=t[3]<<24|t[2]<<16|t[1]<<8|t[0],g=t[7]<<24|t[6]<<16|t[5]<<8|t[4],m=t[11]<<24|t[10]<<16|t[9]<<8|t[8],w=t[15]<<24|t[14]<<16|t[13]<<8|t[12],k=a,x=o,_=s,E=u,S=c,A=l,C=f,T=p,R=h,I=d,P=v,D=y,N=b,O=g,L=m,B=w,M=0;M<i;M+=2)S=(S^=R=R+(N=(N^=k=k+S|0)>>>16|N<<16)|0)>>>20|S<<12,A=(A^=I=I+(O=(O^=x=x+A|0)>>>16|O<<16)|0)>>>20|A<<12,C=(C^=P=P+(L=(L^=_=_+C|0)>>>16|L<<16)|0)>>>20|C<<12,T=(T^=D=D+(B=(B^=E=E+T|0)>>>16|B<<16)|0)>>>20|T<<12,C=(C^=P=P+(L=(L^=_=_+C|0)>>>24|L<<8)|0)>>>25|C<<7,T=(T^=D=D+(B=(B^=E=E+T|0)>>>24|B<<8)|0)>>>25|T<<7,A=(A^=I=I+(O=(O^=x=x+A|0)>>>24|O<<8)|0)>>>25|A<<7,S=(S^=R=R+(N=(N^=k=k+S|0)>>>24|N<<8)|0)>>>25|S<<7,A=(A^=P=P+(B=(B^=k=k+A|0)>>>16|B<<16)|0)>>>20|A<<12,C=(C^=D=D+(N=(N^=x=x+C|0)>>>16|N<<16)|0)>>>20|C<<12,T=(T^=R=R+(O=(O^=_=_+T|0)>>>16|O<<16)|0)>>>20|T<<12,S=(S^=I=I+(L=(L^=E=E+S|0)>>>16|L<<16)|0)>>>20|S<<12,T=(T^=R=R+(O=(O^=_=_+T|0)>>>24|O<<8)|0)>>>25|T<<7,S=(S^=I=I+(L=(L^=E=E+S|0)>>>24|L<<8)|0)>>>25|S<<7,C=(C^=D=D+(N=(N^=x=x+C|0)>>>24|N<<8)|0)>>>25|C<<7,A=(A^=P=P+(B=(B^=k=k+A|0)>>>24|B<<8)|0)>>>25|A<<7;n.writeUint32LE(k+a|0,e,0),n.writeUint32LE(x+o|0,e,4),n.writeUint32LE(_+s|0,e,8),n.writeUint32LE(E+u|0,e,12),n.writeUint32LE(S+c|0,e,16),n.writeUint32LE(A+l|0,e,20),n.writeUint32LE(C+f|0,e,24),n.writeUint32LE(T+p|0,e,28),n.writeUint32LE(R+h|0,e,32),n.writeUint32LE(I+d|0,e,36),n.writeUint32LE(P+v|0,e,40),n.writeUint32LE(D+y|0,e,44),n.writeUint32LE(N+b|0,e,48),n.writeUint32LE(O+g|0,e,52),n.writeUint32LE(L+m|0,e,56),n.writeUint32LE(B+w|0,e,60)}function s(e,t,r,n,i){if(void 0===i&&(i=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,c;if(0===i){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=(s=new Uint8Array(16)).length-t.length,s.set(t,c)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");s=t,c=i}for(var l=new Uint8Array(64),f=0;f<r.length;f+=64){o(l,s,e);for(var p=f;p<f+64&&p<r.length;p++)n[p]=r[p]^l[p-f];u(s,0,c)}return a.wipe(l),0===i&&a.wipe(s),n}function u(e,t,r){for(var n=1;r--;)n=n+(255&e[t])|0,e[t]=255&n,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=s,t.stream=function(e,t,r,n){return void 0===n&&(n=0),a.wipe(r),s(e,t,r,r,n)}},8770:function(e,t){"use strict";function r(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,r){return~(e-1)&t|e-1&r},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=r,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==r(e,t)}},1412:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return"undefined"!==typeof e.saveState&&"undefined"!==typeof e.restoreState&&"undefined"!==typeof e.cleanSavedState}},2497:function(e,t,r){"use strict";var n=r(5499),a=r(9116),i=function(){function e(e,t,r,a){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var i=n.hmac(this._hash,r,t);this._hmac=new n.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),a.wipe(this._buffer),a.wipe(this._counter),this._bufpos=0},e}();t.t=i},5499:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1412),a=r(8770),i=r(9116),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var a=0;a<r.length;a++)r[a]^=54;this._inner.update(r);for(a=0;a<r.length;a++)r[a]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),i.wipe(r)}return e.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=o,t.hmac=function(e,t,r){var n=new o(e,t);n.update(r);var a=n.digest();return n.clean(),a},t.equal=a.equal},5073:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},5629:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8770),a=r(9116);t.DIGEST_LENGTH=16;var i=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=8191&r;var n=e[2]|e[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var a=e[4]|e[5]<<8;this._r[2]=7939&(n>>>10|a<<6);var i=e[6]|e[7]<<8;this._r[3]=8191&(a>>>7|i<<9);var o=e[8]|e[9]<<8;this._r[4]=255&(i>>>4|o<<12),this._r[5]=o>>>1&8190;var s=e[10]|e[11]<<8;this._r[6]=8191&(o>>>14|s<<2);var u=e[12]|e[13]<<8;this._r[7]=8065&(s>>>11|u<<5);var c=e[14]|e[15]<<8;this._r[8]=8191&(u>>>8|c<<8),this._r[9]=c>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){for(var n=this._fin?0:2048,a=this._h[0],i=this._h[1],o=this._h[2],s=this._h[3],u=this._h[4],c=this._h[5],l=this._h[6],f=this._h[7],p=this._h[8],h=this._h[9],d=this._r[0],v=this._r[1],y=this._r[2],b=this._r[3],g=this._r[4],m=this._r[5],w=this._r[6],k=this._r[7],x=this._r[8],_=this._r[9];r>=16;){var E=e[t+0]|e[t+1]<<8;a+=8191&E;var S=e[t+2]|e[t+3]<<8;i+=8191&(E>>>13|S<<3);var A=e[t+4]|e[t+5]<<8;o+=8191&(S>>>10|A<<6);var C=e[t+6]|e[t+7]<<8;s+=8191&(A>>>7|C<<9);var T=e[t+8]|e[t+9]<<8;u+=8191&(C>>>4|T<<12),c+=T>>>1&8191;var R=e[t+10]|e[t+11]<<8;l+=8191&(T>>>14|R<<2);var I=e[t+12]|e[t+13]<<8;f+=8191&(R>>>11|I<<5);var P=e[t+14]|e[t+15]<<8,D=0,N=D;N+=a*d,N+=i*(5*_),N+=o*(5*x),N+=s*(5*k),D=(N+=u*(5*w))>>>13,N&=8191,N+=c*(5*m),N+=l*(5*g),N+=f*(5*b),N+=(p+=8191&(I>>>8|P<<8))*(5*y);var O=D+=(N+=(h+=P>>>5|n)*(5*v))>>>13;O+=a*v,O+=i*d,O+=o*(5*_),O+=s*(5*x),D=(O+=u*(5*k))>>>13,O&=8191,O+=c*(5*w),O+=l*(5*m),O+=f*(5*g),O+=p*(5*b),D+=(O+=h*(5*y))>>>13,O&=8191;var L=D;L+=a*y,L+=i*v,L+=o*d,L+=s*(5*_),D=(L+=u*(5*x))>>>13,L&=8191,L+=c*(5*k),L+=l*(5*w),L+=f*(5*m),L+=p*(5*g);var B=D+=(L+=h*(5*b))>>>13;B+=a*b,B+=i*y,B+=o*v,B+=s*d,D=(B+=u*(5*_))>>>13,B&=8191,B+=c*(5*x),B+=l*(5*k),B+=f*(5*w),B+=p*(5*m);var M=D+=(B+=h*(5*g))>>>13;M+=a*g,M+=i*b,M+=o*y,M+=s*v,D=(M+=u*d)>>>13,M&=8191,M+=c*(5*_),M+=l*(5*x),M+=f*(5*k),M+=p*(5*w);var U=D+=(M+=h*(5*m))>>>13;U+=a*m,U+=i*g,U+=o*b,U+=s*y,D=(U+=u*v)>>>13,U&=8191,U+=c*d,U+=l*(5*_),U+=f*(5*x),U+=p*(5*k);var j=D+=(U+=h*(5*w))>>>13;j+=a*w,j+=i*m,j+=o*g,j+=s*b,D=(j+=u*y)>>>13,j&=8191,j+=c*v,j+=l*d,j+=f*(5*_),j+=p*(5*x);var F=D+=(j+=h*(5*k))>>>13;F+=a*k,F+=i*w,F+=o*m,F+=s*g,D=(F+=u*b)>>>13,F&=8191,F+=c*y,F+=l*v,F+=f*d,F+=p*(5*_);var z=D+=(F+=h*(5*x))>>>13;z+=a*x,z+=i*k,z+=o*w,z+=s*m,D=(z+=u*g)>>>13,z&=8191,z+=c*b,z+=l*y,z+=f*v,z+=p*d;var Z=D+=(z+=h*(5*_))>>>13;Z+=a*_,Z+=i*x,Z+=o*k,Z+=s*w,D=(Z+=u*m)>>>13,Z&=8191,Z+=c*g,Z+=l*b,Z+=f*y,Z+=p*v,a=N=8191&(D=(D=((D+=(Z+=h*d)>>>13)<<2)+D|0)+(N&=8191)|0),i=O+=D>>>=13,o=L&=8191,s=B&=8191,u=M&=8191,c=U&=8191,l=j&=8191,f=F&=8191,p=z&=8191,h=Z&=8191,t+=16,r-=16}this._h[0]=a,this._h[1]=i,this._h[2]=o,this._h[3]=s,this._h[4]=u,this._h[5]=c,this._h[6]=l,this._h[7]=f,this._h[8]=p,this._h[9]=h},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,n,a,i,o=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=r,r=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,i=1;i<10;i++)o[i]=this._h[i]+r,r=o[i]>>>13,o[i]&=8191;for(o[9]-=8192,n=(1^r)-1,i=0;i<10;i++)o[i]&=n;for(n=~n,i=0;i<10;i++)this._h[i]=this._h[i]&n|o[i];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),a=this._h[0]+this._pad[0],this._h[0]=65535&a,i=1;i<8;i++)a=(this._h[i]+this._pad[i]|0)+(a>>>16)|0,this._h[i]=65535&a;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,n=e.length;if(this._leftover){(t=16-this._leftover)>n&&(t=n);for(var a=0;a<t;a++)this._buffer[this._leftover+a]=e[r+a];if(n-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(t=n-n%16,this._blocks(e,r,t),r+=t,n-=t),n){for(a=0;a<n;a++)this._buffer[this._leftover+a]=e[r+a];this._leftover+=n}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return a.wipe(this._buffer),a.wipe(this._r),a.wipe(this._h),a.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=i,t.oneTimeAuth=function(e,t){var r=new i(e);r.update(t);var n=r.digest();return r.clean(),n},t.equal=function(e,r){return e.length===t.DIGEST_LENGTH&&r.length===t.DIGEST_LENGTH&&n.equal(e,r)}},6271:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;var n=r(933),a=r(6232),i=r(9116);function o(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultRandomSource).randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(){var e=o(4,arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.defaultRandomSource),r=(0,a.readUint32LE)(e);return(0,i.wipe)(e),r};var s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultRandomSource;if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");for(var a="",u=r.length,c=256-256%u;e>0;){for(var l=o(Math.ceil(256*e/c),n),f=0;f<l.length&&e>0;f++){var p=l[f];p<c&&(a+=r.charAt(p%u),e--)}(0,i.wipe)(l)}return a}t.randomString=u,t.randomStringForEntropy=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultRandomSource;return u(Math.ceil(e/(Math.log(r.length)/Math.LN2)),r,n)}},8136:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;var i=function(){function e(){n(this,e),this.isAvailable=!1,this.isInstantiated=!1;var t="undefined"!==typeof self?self.crypto||self.msCrypto:null;t&&void 0!==t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return a(e,[{key:"randomBytes",value:function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var t=new Uint8Array(e),r=0;r<t.length;r+=65536)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,65536)));return t}}]),e}();t.BrowserRandomSource=i},8188:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;var i=r(9116),o=function(){function e(){n(this,e),this.isAvailable=!1,this.isInstantiated=!1;var t=r(5883);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return a(e,[{key:"randomBytes",value:function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=t[n];return(0,i.wipe)(t),r}}]),e}();t.NodeRandomSource=o},933:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;var i=r(8136),o=r(8188),s=function(){function e(){return n(this,e),this.isAvailable=!1,this.name="",this._source=new i.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new o.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}return a(e,[{key:"randomBytes",value:function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}]),e}();t.SystemRandomSource=s},4888:function(e,t,r){"use strict";var n=r(6232),a=r(9116);t.k=32,t.cn=64;var i=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){a.wipe(this._buffer),a.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=s(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,a=t/536870912|0,i=t<<3,o=t%64<56?64:128;this._buffer[r]=128;for(var u=r+1;u<o-8;u++)this._buffer[u]=0;n.writeUint32BE(a,this._buffer,o-8),n.writeUint32BE(i,this._buffer,o-4),s(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(u=0;u<this.digestLength/4;u++)n.writeUint32BE(this._state[u],e,4*u);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){a.wipe(e.state),e.buffer&&a.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=i;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(e,t,r,a,i){for(;i>=64;){for(var s=t[0],u=t[1],c=t[2],l=t[3],f=t[4],p=t[5],h=t[6],d=t[7],v=0;v<16;v++){var y=a+4*v;e[v]=n.readUint32BE(r,y)}for(v=16;v<64;v++){var b=e[v-2],g=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,m=((b=e[v-15])>>>7|b<<25)^(b>>>18|b<<14)^b>>>3;e[v]=(g+e[v-7]|0)+(m+e[v-16]|0)}for(v=0;v<64;v++){g=(((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&p^~f&h)|0)+(d+(o[v]+e[v]|0)|0)|0,m=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&u^s&c^u&c)|0;d=h,h=p,p=f,f=l+g|0,l=c,c=u,u=s,s=g+m|0}t[0]+=s,t[1]+=u,t[2]+=c,t[3]+=l,t[4]+=f,t[5]+=p,t[6]+=h,t[7]+=d,a+=64,i-=64}return a}t.vp=function(e){var t=new i;t.update(e);var r=t.digest();return t.clean(),r}},9116:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},2029:function(e,t,r){"use strict";t.gi=t.Au=t._w=t.KS=t.kz=void 0;var n=r(6271),a=r(9116);function i(e){var t=new Float64Array(16);if(e)for(var r=0;r<e.length;r++)t[r]=e[r];return t}t.kz=32,t.KS=32;var o=new Uint8Array(32);o[0]=9;var s=i([56129,1]);function u(e){for(var t=1,r=0;r<16;r++){var n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function c(e,t,r){for(var n=~(r-1),a=0;a<16;a++){var i=n&(e[a]^t[a]);e[a]^=i,t[a]^=i}}function l(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function f(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function p(e,t,r){var n,a,i=0,o=0,s=0,u=0,c=0,l=0,f=0,p=0,h=0,d=0,v=0,y=0,b=0,g=0,m=0,w=0,k=0,x=0,_=0,E=0,S=0,A=0,C=0,T=0,R=0,I=0,P=0,D=0,N=0,O=0,L=0,B=r[0],M=r[1],U=r[2],j=r[3],F=r[4],z=r[5],Z=r[6],q=r[7],V=r[8],K=r[9],H=r[10],W=r[11],G=r[12],Y=r[13],Q=r[14],J=r[15];i+=(n=t[0])*B,o+=n*M,s+=n*U,u+=n*j,c+=n*F,l+=n*z,f+=n*Z,p+=n*q,h+=n*V,d+=n*K,v+=n*H,y+=n*W,b+=n*G,g+=n*Y,m+=n*Q,w+=n*J,o+=(n=t[1])*B,s+=n*M,u+=n*U,c+=n*j,l+=n*F,f+=n*z,p+=n*Z,h+=n*q,d+=n*V,v+=n*K,y+=n*H,b+=n*W,g+=n*G,m+=n*Y,w+=n*Q,k+=n*J,s+=(n=t[2])*B,u+=n*M,c+=n*U,l+=n*j,f+=n*F,p+=n*z,h+=n*Z,d+=n*q,v+=n*V,y+=n*K,b+=n*H,g+=n*W,m+=n*G,w+=n*Y,k+=n*Q,x+=n*J,u+=(n=t[3])*B,c+=n*M,l+=n*U,f+=n*j,p+=n*F,h+=n*z,d+=n*Z,v+=n*q,y+=n*V,b+=n*K,g+=n*H,m+=n*W,w+=n*G,k+=n*Y,x+=n*Q,_+=n*J,c+=(n=t[4])*B,l+=n*M,f+=n*U,p+=n*j,h+=n*F,d+=n*z,v+=n*Z,y+=n*q,b+=n*V,g+=n*K,m+=n*H,w+=n*W,k+=n*G,x+=n*Y,_+=n*Q,E+=n*J,l+=(n=t[5])*B,f+=n*M,p+=n*U,h+=n*j,d+=n*F,v+=n*z,y+=n*Z,b+=n*q,g+=n*V,m+=n*K,w+=n*H,k+=n*W,x+=n*G,_+=n*Y,E+=n*Q,S+=n*J,f+=(n=t[6])*B,p+=n*M,h+=n*U,d+=n*j,v+=n*F,y+=n*z,b+=n*Z,g+=n*q,m+=n*V,w+=n*K,k+=n*H,x+=n*W,_+=n*G,E+=n*Y,S+=n*Q,A+=n*J,p+=(n=t[7])*B,h+=n*M,d+=n*U,v+=n*j,y+=n*F,b+=n*z,g+=n*Z,m+=n*q,w+=n*V,k+=n*K,x+=n*H,_+=n*W,E+=n*G,S+=n*Y,A+=n*Q,C+=n*J,h+=(n=t[8])*B,d+=n*M,v+=n*U,y+=n*j,b+=n*F,g+=n*z,m+=n*Z,w+=n*q,k+=n*V,x+=n*K,_+=n*H,E+=n*W,S+=n*G,A+=n*Y,C+=n*Q,T+=n*J,d+=(n=t[9])*B,v+=n*M,y+=n*U,b+=n*j,g+=n*F,m+=n*z,w+=n*Z,k+=n*q,x+=n*V,_+=n*K,E+=n*H,S+=n*W,A+=n*G,C+=n*Y,T+=n*Q,R+=n*J,v+=(n=t[10])*B,y+=n*M,b+=n*U,g+=n*j,m+=n*F,w+=n*z,k+=n*Z,x+=n*q,_+=n*V,E+=n*K,S+=n*H,A+=n*W,C+=n*G,T+=n*Y,R+=n*Q,I+=n*J,y+=(n=t[11])*B,b+=n*M,g+=n*U,m+=n*j,w+=n*F,k+=n*z,x+=n*Z,_+=n*q,E+=n*V,S+=n*K,A+=n*H,C+=n*W,T+=n*G,R+=n*Y,I+=n*Q,P+=n*J,b+=(n=t[12])*B,g+=n*M,m+=n*U,w+=n*j,k+=n*F,x+=n*z,_+=n*Z,E+=n*q,S+=n*V,A+=n*K,C+=n*H,T+=n*W,R+=n*G,I+=n*Y,P+=n*Q,D+=n*J,g+=(n=t[13])*B,m+=n*M,w+=n*U,k+=n*j,x+=n*F,_+=n*z,E+=n*Z,S+=n*q,A+=n*V,C+=n*K,T+=n*H,R+=n*W,I+=n*G,P+=n*Y,D+=n*Q,N+=n*J,m+=(n=t[14])*B,w+=n*M,k+=n*U,x+=n*j,_+=n*F,E+=n*z,S+=n*Z,A+=n*q,C+=n*V,T+=n*K,R+=n*H,I+=n*W,P+=n*G,D+=n*Y,N+=n*Q,O+=n*J,w+=(n=t[15])*B,o+=38*(x+=n*U),s+=38*(_+=n*j),u+=38*(E+=n*F),c+=38*(S+=n*z),l+=38*(A+=n*Z),f+=38*(C+=n*q),p+=38*(T+=n*V),h+=38*(R+=n*K),d+=38*(I+=n*H),v+=38*(P+=n*W),y+=38*(D+=n*G),b+=38*(N+=n*Y),g+=38*(O+=n*Q),m+=38*(L+=n*J),i=(n=(i+=38*(k+=n*M))+(a=1)+65535)-65536*(a=Math.floor(n/65536)),o=(n=o+a+65535)-65536*(a=Math.floor(n/65536)),s=(n=s+a+65535)-65536*(a=Math.floor(n/65536)),u=(n=u+a+65535)-65536*(a=Math.floor(n/65536)),c=(n=c+a+65535)-65536*(a=Math.floor(n/65536)),l=(n=l+a+65535)-65536*(a=Math.floor(n/65536)),f=(n=f+a+65535)-65536*(a=Math.floor(n/65536)),p=(n=p+a+65535)-65536*(a=Math.floor(n/65536)),h=(n=h+a+65535)-65536*(a=Math.floor(n/65536)),d=(n=d+a+65535)-65536*(a=Math.floor(n/65536)),v=(n=v+a+65535)-65536*(a=Math.floor(n/65536)),y=(n=y+a+65535)-65536*(a=Math.floor(n/65536)),b=(n=b+a+65535)-65536*(a=Math.floor(n/65536)),g=(n=g+a+65535)-65536*(a=Math.floor(n/65536)),m=(n=m+a+65535)-65536*(a=Math.floor(n/65536)),w=(n=w+a+65535)-65536*(a=Math.floor(n/65536)),i=(n=(i+=a-1+37*(a-1))+(a=1)+65535)-65536*(a=Math.floor(n/65536)),o=(n=o+a+65535)-65536*(a=Math.floor(n/65536)),s=(n=s+a+65535)-65536*(a=Math.floor(n/65536)),u=(n=u+a+65535)-65536*(a=Math.floor(n/65536)),c=(n=c+a+65535)-65536*(a=Math.floor(n/65536)),l=(n=l+a+65535)-65536*(a=Math.floor(n/65536)),f=(n=f+a+65535)-65536*(a=Math.floor(n/65536)),p=(n=p+a+65535)-65536*(a=Math.floor(n/65536)),h=(n=h+a+65535)-65536*(a=Math.floor(n/65536)),d=(n=d+a+65535)-65536*(a=Math.floor(n/65536)),v=(n=v+a+65535)-65536*(a=Math.floor(n/65536)),y=(n=y+a+65535)-65536*(a=Math.floor(n/65536)),b=(n=b+a+65535)-65536*(a=Math.floor(n/65536)),g=(n=g+a+65535)-65536*(a=Math.floor(n/65536)),m=(n=m+a+65535)-65536*(a=Math.floor(n/65536)),w=(n=w+a+65535)-65536*(a=Math.floor(n/65536)),i+=a-1+37*(a-1),e[0]=i,e[1]=o,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=p,e[8]=h,e[9]=d,e[10]=v,e[11]=y,e[12]=b,e[13]=g,e[14]=m,e[15]=w}function h(e,t){p(e,t,t)}function d(e,t){for(var r=new Uint8Array(32),n=new Float64Array(80),a=i(),o=i(),d=i(),v=i(),y=i(),b=i(),g=0;g<31;g++)r[g]=e[g];r[31]=127&e[31]|64,r[0]&=248,function(e,t){for(var r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(n,t);for(var m=0;m<16;m++)o[m]=n[m];a[0]=v[0]=1;for(var w=254;w>=0;--w){var k=r[w>>>3]>>>(7&w)&1;c(a,o,k),c(d,v,k),l(y,a,d),f(a,a,d),l(d,o,v),f(o,o,v),h(v,y),h(b,a),p(a,d,a),p(d,o,y),l(y,a,d),f(a,a,d),h(o,a),f(d,v,b),p(a,d,s),l(a,a,v),p(d,d,a),p(a,v,b),p(v,o,n),h(o,y),c(a,o,k),c(d,v,k)}for(var x=0;x<16;x++)n[x+16]=a[x],n[x+32]=d[x],n[x+48]=o[x],n[x+64]=v[x];var _=n.subarray(32),E=n.subarray(16);!function(e,t){for(var r=i(),n=0;n<16;n++)r[n]=t[n];for(var a=253;a>=0;a--)h(r,r),2!==a&&4!==a&&p(r,r,t);for(var o=0;o<16;o++)e[o]=r[o]}(_,_),p(E,E,_);var S=new Uint8Array(32);return function(e,t){for(var r=i(),n=i(),a=0;a<16;a++)n[a]=t[a];u(n),u(n),u(n);for(var o=0;o<2;o++){r[0]=n[0]-65517;for(var s=1;s<15;s++)r[s]=n[s]-65535-(r[s-1]>>16&1),r[s-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);var l=r[15]>>16&1;r[14]&=65535,c(n,r,1-l)}for(var f=0;f<16;f++)e[2*f]=255&n[f],e[2*f+1]=n[f]>>8}(S,E),S}function v(e){return d(e,o)}function y(e){if(e.length!==t.KS)throw new Error("x25519: seed must be ".concat(t.KS," bytes"));var r=new Uint8Array(e);return{publicKey:v(r),secretKey:r}}t._w=y,t.Au=function(e){var t=(0,n.randomBytes)(32,e),r=y(t);return(0,a.wipe)(t),r},t.gi=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==t.kz)throw new Error("X25519: incorrect public key length");var a=d(e,r);if(n){for(var i=0,o=0;o<a.length;o++)i|=a[o];if(0===i)throw new Error("X25519: invalid shared key")}return a}},6755:function(e,t){"use strict";var r=Math.exp;e.exports=function(e){if("number"!==typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");var t,n,a=0,i=0,o=0,s={};return s.push=function(s,u){if(n){var c=1-r(-(s-n)/e),l=u-t;t=c*u+(1-c)*t,a=(1-c)*(a+l*(c*l)),i=Math.sqrt(a),o=t+c*l}else t=u;n=s},s.movingAverage=function(){return t},s.variance=function(){return a},s.deviation=function(){return i},s.forecast=function(){return o},s}},3906:function(e,t,r){"use strict";var n=r(4704).default,a=r(2122).default,i=r(6690).default,o=r(9728).default,s=r(5240).fromCallback,u=r(6134),c=r(2796),l=c.getCallback,f=c.getOptions,p=Symbol("promise"),h=Symbol("status"),d=Symbol("operations"),v=Symbol("finishClose"),y=Symbol("closeCallbacks"),b=function(){function e(t){if(i(this,e),"object"!==typeof t||null===t)throw new TypeError("The first argument must be an abstract-level database, received ".concat(null===t?"null":typeof t));this[d]=[],this[y]=[],this[h]="open",this[v]=this[v].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}return o(e,[{key:"length",get:function(){return this[d].length}},{key:"put",value:function(e,t,r){if("open"!==this[h])throw new u("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});var n=this.db._checkKey(e)||this.db._checkValue(t);if(n)throw n;var i=r&&null!=r.sublevel?r.sublevel:this.db,o=r,s=i.keyEncoding(r&&r.keyEncoding),c=i.valueEncoding(r&&r.valueEncoding),l=s.format;r=a(a({},r),{},{keyEncoding:l,valueEncoding:c.format}),i!==this.db&&(r.sublevel=null);var f=i.prefixKey(s.encode(e),l),p=c.encode(t);return this._put(f,p,r),this[d].push(a(a({},o),{},{type:"put",key:e,value:t})),this}},{key:"_put",value:function(e,t,r){}},{key:"del",value:function(e,t){if("open"!==this[h])throw new u("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});var r=this.db._checkKey(e);if(r)throw r;var n=t&&null!=t.sublevel?t.sublevel:this.db,i=t,o=n.keyEncoding(t&&t.keyEncoding),s=o.format;return t=a(a({},t),{},{keyEncoding:s}),n!==this.db&&(t.sublevel=null),this._del(n.prefixKey(o.encode(e),s),t),this[d].push(a(a({},i),{},{type:"del",key:e})),this}},{key:"_del",value:function(e,t){}},{key:"clear",value:function(){if("open"!==this[h])throw new u("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[d]=[],this}},{key:"_clear",value:function(){}},{key:"write",value:function(e,t){var r=this;return t=l(e,t),t=s(t,p),e=f(e),"open"!==this[h]?this.nextTick(t,new u("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(t):(this[h]="writing",this._write(e,(function(e){r[h]="closing",r[y].push((function(){return t(e)})),e||r.db.emit("batch",r[d]),r._close(r[v])}))),t[p]}},{key:"_write",value:function(e,t){}},{key:"close",value:function(e){return e=s(e,p),"closing"===this[h]?this[y].push(e):"closed"===this[h]?this.nextTick(e):(this[y].push(e),"writing"!==this[h]&&(this[h]="closing",this._close(this[v]))),e[p]}},{key:"_close",value:function(e){this.nextTick(e)}},{key:v,value:function(){this[h]="closed",this.db.detachResource(this);var e=this[y];this[y]=[];var t,r=n(e);try{for(r.s();!(t=r.n()).done;){(0,t.value)()}}catch(a){r.e(a)}finally{r.f()}}}]),e}();t.AbstractChainedBatch=b},261:function(e,t,r){"use strict";for(var n=r(1655).default,a=r(6389).default,i=r(7061).default,o=r(4704).default,s=r(2122).default,u=r(6690).default,c=r(9728).default,l=r(6737).default,f=r(8186).default,p=r(5240).fromCallback,h=r(6134),d=r(2796),v=d.getOptions,y=d.getCallback,b=Symbol("promise"),g=Symbol("callback"),m=Symbol("working"),w=Symbol("handleOne"),k=Symbol("handleMany"),x=Symbol("autoClose"),_=Symbol("finishWork"),E=Symbol("returnMany"),S=Symbol("closing"),A=Symbol("handleClose"),C=Symbol("closed"),T=Symbol("closeCallbacks"),R=Symbol("keyEncoding"),I=Symbol("valueEncoding"),P=Symbol("abortOnClose"),D=Symbol("legacy"),N=Symbol("keys"),O=Symbol("values"),L=Symbol("limit"),B=Symbol("count"),M=Object.freeze({}),U=function(){},j=!1,F=function(e){function t(e,r,n){if(u(this,t),"object"!==typeof e||null===e)throw new TypeError("The first argument must be an abstract-level database, received ".concat(null===e?"null":typeof e));if("object"!==typeof r||null===r)throw new TypeError("The second argument must be an options object");this[C]=!1,this[T]=[],this[m]=!1,this[S]=!1,this[x]=!1,this[g]=null,this[w]=this[w].bind(this),this[k]=this[k].bind(this),this[A]=this[A].bind(this),this[R]=r[R],this[I]=r[I],this[D]=n,this[L]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[B]=0,this[P]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}return c(t,[{key:"count",get:function(){return this[B]}},{key:"limit",get:function(){return this[L]}},{key:"next",value:function(e){var t,r=this;if(void 0===e)t=new Promise((function(t,n){e=function(e,a,i){e?n(e):r[D]?void 0===a&&void 0===i?t():t([a,i]):t(a)}}));else if("function"!==typeof e)throw new TypeError("Callback must be a function");return this[S]?this.nextTick(e,new h("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[m]?this.nextTick(e,new h("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[m]=!0,this[g]=e,this[B]>=this[L]?this.nextTick(this[w],null):this._next(this[w])),t}},{key:"_next",value:function(e){this.nextTick(e)}},{key:"nextv",value:function(e,t,r){return r=y(t,r),r=p(r,b),t=v(t,M),Number.isInteger(e)?(this[S]?this.nextTick(r,new h("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[m]?this.nextTick(r,new h("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[L]<1/0&&(e=Math.min(e,this[L]-this[B])),this[m]=!0,this[g]=r,e<=0?this.nextTick(this[k],null,[]):this._nextv(e,t,this[k])),r[b]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[b])}},{key:"_nextv",value:function(e,t,r){var n=this,a=[];this._next((function t(i,o,s){return i?r(i):(n[D]?void 0===o&&void 0===s:void 0===o)?r(null,a):(a.push(n[D]?[o,s]:o),void(a.length===e?r(null,a):n._next(t)))}))}},{key:"all",value:function(e,t){return t=y(e,t),t=p(t,b),e=v(e,M),this[S]?this.nextTick(t,new h("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[m]?this.nextTick(t,new h("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[m]=!0,this[g]=t,this[x]=!0,this[B]>=this[L]?this.nextTick(this[k],null,[]):this._all(e,this[k])),t[b]}},{key:"_all",value:function(e,t){var r=this,n=this[B],a=[],i=function(){var e=r[L]<1/0?Math.min(1e3,r[L]-n):1e3;e<=0?r.nextTick(t,null,a):r._nextv(e,M,o)},o=function(e,r){e?t(e):0===r.length?t(null,a):(a.push.apply(a,r),n+=r.length,i())};i()}},{key:_,value:function(){var e=this[g];return this[P]&&null===e?U:(this[m]=!1,this[g]=null,this[S]&&this._close(this[A]),e)}},{key:E,value:function(e,t,r){this[x]?this.close(e.bind(null,t,r)):e(t,r)}},{key:"seek",value:function(e,t){if(t=v(t,M),this[S]);else{if(this[m])throw new h("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});var r=this.db.keyEncoding(t.keyEncoding||this[R]),n=r.format;t.keyEncoding!==n&&(t=s(s({},t),{},{keyEncoding:n}));var a=this.db.prefixKey(r.encode(e),n);this._seek(a,t)}}},{key:"_seek",value:function(e,t){throw new h("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}},{key:"close",value:function(e){if(e=p(e,b),this[C])this.nextTick(e);else if(this[S])this[T].push(e);else if(this[S]=!0,this[T].push(e),this[m]){if(this[P]){this[_]()(new h("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))}}else this._close(this[A]);return e[b]}},{key:"_close",value:function(e){this.nextTick(e)}},{key:A,value:function(){this[C]=!0,this.db.detachResource(this);var e=this[T];this[T]=[];var t,r=o(e);try{for(r.s();!(t=r.n()).done;){(0,t.value)()}}catch(n){r.e(n)}finally{r.f()}}},{key:e,value:function(){var e=this;return f(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:return t.next=3,l(e.next());case 3:if(t.t0=r=t.sent,t.t1=void 0,t.t0===t.t1){t.next=10;break}return t.next=8,r;case 8:t.next=1;break;case 10:if(t.prev=10,e[C]){t.next=14;break}return t.next=14,l(e.close());case 14:return t.finish(10);case 15:case"end":return t.stop()}}),t,null,[[0,,10,15]])})))()}}]),t}(Symbol.asyncIterator),z=function(e){n(r,e);var t=a(r);function r(e,n){var a;return u(this,r),(a=t.call(this,e,n,!0))[N]=!1!==n.keys,a[O]=!1!==n.values,a}return c(r,[{key:w,value:function(e,t,r){var n=this[_]();if(e)return n(e);try{t=this[N]&&void 0!==t?this[R].decode(t):void 0,r=this[O]&&void 0!==r?this[I].decode(r):void 0}catch(e){return n(new V("entry",e))}void 0===t&&void 0===r||this[B]++,n(null,t,r)}},{key:k,value:function(e,t){var r=this[_]();if(e)return this[E](r,e);try{var n,a=o(t);try{for(a.s();!(n=a.n()).done;){var i=n.value,s=i[0],u=i[1];i[0]=this[N]&&void 0!==s?this[R].decode(s):void 0,i[1]=this[O]&&void 0!==u?this[I].decode(u):void 0}}catch(e){a.e(e)}finally{a.f()}}catch(e){return this[E](r,new V("entries",e))}this[B]+=t.length,this[E](r,null,t)}},{key:"end",value:function(e){return j||"undefined"===typeof console||(j=!0,console.warn(new h("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}]),r}(F),Z=function(e){n(r,e);var t=a(r);function r(e,n){return u(this,r),t.call(this,e,n,!1)}return c(r,[{key:w,value:function(e,t){var r=this[_]();if(e)return r(e);try{t=void 0!==t?this[R].decode(t):void 0}catch(e){return r(new V("key",e))}void 0!==t&&this[B]++,r(null,t)}},{key:k,value:function(e,t){var r=this[_]();if(e)return this[E](r,e);try{for(var n=0;n<t.length;n++){var a=t[n];t[n]=void 0!==a?this[R].decode(a):void 0}}catch(e){return this[E](r,new V("keys",e))}this[B]+=t.length,this[E](r,null,t)}}]),r}(F),q=function(e){n(r,e);var t=a(r);function r(e,n){return u(this,r),t.call(this,e,n,!1)}return c(r,[{key:w,value:function(e,t){var r=this[_]();if(e)return r(e);try{t=void 0!==t?this[I].decode(t):void 0}catch(e){return r(new V("value",e))}void 0!==t&&this[B]++,r(null,t)}},{key:k,value:function(e,t){var r=this[_]();if(e)return this[E](r,e);try{for(var n=0;n<t.length;n++){var a=t[n];t[n]=void 0!==a?this[I].decode(a):void 0}}catch(e){return this[E](r,new V("values",e))}this[B]+=t.length,this[E](r,null,t)}}]),r}(F),V=function(e){n(r,e);var t=a(r);function r(e,n){return u(this,r),t.call(this,"Iterator could not decode ".concat(e),{code:"LEVEL_DECODE_ERROR",cause:n})}return c(r)}(h),K=function(){var e=W[H];Object.defineProperty(z.prototype,e.split(" ")[0],{get:function(){throw new h("The ".concat(e," has been removed"),{code:"LEVEL_LEGACY"})},set:function(){throw new h("The ".concat(e," has been removed"),{code:"LEVEL_LEGACY"})}})},H=0,W=["_ended property","_nexting property","_end method"];H<W.length;H++)K();z.keyEncoding=R,z.valueEncoding=I,t.AbstractIterator=z,t.AbstractKeyIterator=Z,t.AbstractValueIterator=q},2486:function(e,t,r){"use strict";var n=r(2122).default,a=r(4704).default,i=r(215).default,o=r(6690).default,s=r(9728).default,u=r(6115).default,c=r(1655).default,l=r(6389).default,f=["keyEncoding","valueEncoding","passive"],p=["keyEncoding","valueEncoding"],h=r(7987).supports,d=r(7132).Transcoder,v=r(7465).EventEmitter,y=r(5240).fromCallback,b=r(6134),g=r(261).AbstractIterator,m=r(8218),w=m.DefaultKeyIterator,k=m.DefaultValueIterator,x=r(7174),_=x.DeferredIterator,E=x.DeferredKeyIterator,S=x.DeferredValueIterator,A=r(4895).DefaultChainedBatch,C=r(2796),T=C.getCallback,R=C.getOptions,I=r(3173),P=Symbol("promise"),D=Symbol("landed"),N=Symbol("resources"),O=Symbol("closeResources"),L=Symbol("operations"),B=Symbol("undefer"),M=Symbol("deferOpen"),U=Symbol("options"),j=Symbol("status"),F=Symbol("defaultOptions"),z=Symbol("transcoder"),Z=Symbol("keyEncoding"),q=Symbol("valueEncoding"),V=function(){},K=function(e){c(r,e);var t=l(r);function r(e,n){var s;if(o(this,r),s=t.call(this),"object"!==typeof e||null===e)throw new TypeError("The first argument 'manifest' must be an object");var c=n=R(n),l=c.keyEncoding,p=c.valueEncoding,v=(c.passive,i(c,f));s[N]=new Set,s[L]=[],s[M]=!0,s[U]=v,s[j]="opening",s.supports=h(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==e.snapshots,permanence:!1!==e.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),s[z]=new d(G(u(s))),s[Z]=s[z].encoding(l||"utf8"),s[q]=s[z].encoding(p||"utf8");var y,b=a(s[z].encodings());try{for(b.s();!(y=b.n()).done;){var g=y.value;s.supports.encodings[g.commonName]||(s.supports.encodings[g.commonName]=!0)}}catch(m){b.e(m)}finally{b.f()}return s[F]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:s[Z].commonName,valueEncoding:s[q].commonName}),key:Object.freeze({keyEncoding:s[Z].commonName})},s.nextTick((function(){s[M]&&s.open({passive:!1},V)})),s}return s(r,[{key:"status",get:function(){return this[j]}},{key:"keyEncoding",value:function(e){return this[z].encoding(null!=e?e:this[Z])}},{key:"valueEncoding",value:function(e){return this[z].encoding(null!=e?e:this[q])}},{key:"open",value:function(e,t){var r=this;t=T(e,t),t=y(t,P),(e=n(n({},this[U]),R(e))).createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists;var a=function e(n){"closing"===r[j]||"opening"===r[j]?r.once(D,n?function(){return e(n)}:e):"open"!==r[j]?t(new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:n})):t()};return e.passive?"opening"===this[j]?this.once(D,a):this.nextTick(a):"closed"===this[j]||this[M]?(this[M]=!1,this[j]="opening",this.emit("opening"),this._open(e,(function(e){if(e)return r[j]="closed",r[O]((function(){r.emit(D),a(e)})),void r[B]();r[j]="open",r[B](),r.emit(D),"open"===r[j]&&r.emit("open"),"open"===r[j]&&r.emit("ready"),a()}))):"open"===this[j]?this.nextTick(a):this.once(D,(function(){return r.open(e,t)})),t[P]}},{key:"_open",value:function(e,t){this.nextTick(t)}},{key:"close",value:function(e){var t=this;e=y(e,P);var r=function r(n){"opening"===t[j]||"closing"===t[j]?t.once(D,n?r(n):r):"closed"!==t[j]?e(new b("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if("open"===this[j]){this[j]="closing",this.emit("closing");this[O]((function(){t._close((function(e){if(e)return function(e){t[j]="open",t[B](),t.emit(D),r(e)}(e);t[j]="closed",t[B](),t.emit(D),"closed"===t[j]&&t.emit("closed"),r()}))}))}else"closed"===this[j]?this.nextTick(r):this.once(D,(function(){return t.close(e)}));return e[P]}},{key:O,value:function(e){var t=this;if(0===this[N].size)return this.nextTick(e);var r,n=this[N].size,i=!0,o=function(){0===--n&&(i?t.nextTick(e):e())},s=a(this[N]);try{for(s.s();!(r=s.n()).done;){r.value.close(o)}}catch(u){s.e(u)}finally{s.f()}i=!1,this[N].clear()}},{key:"_close",value:function(e){this.nextTick(e)}},{key:"get",value:function(e,t,r){var n=this;if(r=T(t,r),r=y(r,P),t=R(t,this[F].entry),"opening"===this[j])return this.defer((function(){return n.get(e,t,r)})),r[P];if(W(this,r))return r[P];var a=this._checkKey(e);if(a)return this.nextTick(r,a),r[P];var i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,u=o.format;return t.keyEncoding===s&&t.valueEncoding===u||(t=Object.assign({},t,{keyEncoding:s,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),s),t,(function(e,t){if(e)return("LEVEL_NOT_FOUND"===e.code||e.notFound||/NotFound/i.test(e))&&(e.code||(e.code="LEVEL_NOT_FOUND"),e.notFound||(e.notFound=!0),e.status||(e.status=404)),r(e);try{t=o.decode(t)}catch(e){return r(new b("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:e}))}r(null,t)})),r[P]}},{key:"_get",value:function(e,t,r){this.nextTick(r,new Error("NotFound"))}},{key:"getMany",value:function(e,t,r){var n=this;if(r=T(t,r),r=y(r,P),t=R(t,this[F].entry),"opening"===this[j])return this.defer((function(){return n.getMany(e,t,r)})),r[P];if(W(this,r))return r[P];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[P];if(0===e.length)return this.nextTick(r,null,[]),r[P];var a=this.keyEncoding(t.keyEncoding),i=this.valueEncoding(t.valueEncoding),o=a.format,s=i.format;t.keyEncoding===o&&t.valueEncoding===s||(t=Object.assign({},t,{keyEncoding:o,valueEncoding:s}));for(var u=new Array(e.length),c=0;c<e.length;c++){var l=e[c],f=this._checkKey(l);if(f)return this.nextTick(r,f),r[P];u[c]=this.prefixKey(a.encode(l),o)}return this._getMany(u,t,(function(e,t){if(e)return r(e);try{for(var n=0;n<t.length;n++)void 0!==t[n]&&(t[n]=i.decode(t[n]))}catch(e){return r(new b("Could not decode one or more of ".concat(t.length," value(s)"),{code:"LEVEL_DECODE_ERROR",cause:e}))}r(null,t)})),r[P]}},{key:"_getMany",value:function(e,t,r){this.nextTick(r,null,new Array(e.length).fill(void 0))}},{key:"put",value:function(e,t,r,n){var a=this;if(n=T(r,n),n=y(n,P),r=R(r,this[F].entry),"opening"===this[j])return this.defer((function(){return a.put(e,t,r,n)})),n[P];if(W(this,n))return n[P];var i=this._checkKey(e)||this._checkValue(t);if(i)return this.nextTick(n,i),n[P];var o=this.keyEncoding(r.keyEncoding),s=this.valueEncoding(r.valueEncoding),u=o.format,c=s.format;r.keyEncoding===u&&r.valueEncoding===c||(r=Object.assign({},r,{keyEncoding:u,valueEncoding:c}));var l=this.prefixKey(o.encode(e),u),f=s.encode(t);return this._put(l,f,r,(function(r){if(r)return n(r);a.emit("put",e,t),n()})),n[P]}},{key:"_put",value:function(e,t,r,n){this.nextTick(n)}},{key:"del",value:function(e,t,r){var n=this;if(r=T(t,r),r=y(r,P),t=R(t,this[F].key),"opening"===this[j])return this.defer((function(){return n.del(e,t,r)})),r[P];if(W(this,r))return r[P];var a=this._checkKey(e);if(a)return this.nextTick(r,a),r[P];var i=this.keyEncoding(t.keyEncoding),o=i.format;return t.keyEncoding!==o&&(t=Object.assign({},t,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),t,(function(t){if(t)return r(t);n.emit("del",e),r()})),r[P]}},{key:"_del",value:function(e,t,r){this.nextTick(r)}},{key:"batch",value:function(e,t,r){var n=this;if(!arguments.length){if("opening"===this[j])return new A(this);if("open"!==this[j])throw new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(r="function"===typeof e?e:T(t,r),r=y(r,P),t=R(t,this[F].empty),"opening"===this[j])return this.defer((function(){return n.batch(e,t,r)})),r[P];if(W(this,r))return r[P];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[P];if(0===e.length)return this.nextTick(r),r[P];for(var a=new Array(e.length),o=t,s=o.keyEncoding,u=o.valueEncoding,c=i(o,p),l=0;l<e.length;l++){if("object"!==typeof e[l]||null===e[l])return this.nextTick(r,new TypeError("A batch operation must be an object")),r[P];var f=Object.assign({},e[l]);if("put"!==f.type&&"del"!==f.type)return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[P];var h=this._checkKey(f.key);if(h)return this.nextTick(r,h),r[P];var d=null!=f.sublevel?f.sublevel:this,v=d.keyEncoding(f.keyEncoding||s),g=v.format;if(f.key=d.prefixKey(v.encode(f.key),g),f.keyEncoding=g,"put"===f.type){var m=this._checkValue(f.value);if(m)return this.nextTick(r,m),r[P];var w=d.valueEncoding(f.valueEncoding||u);f.value=w.encode(f.value),f.valueEncoding=w.format}d!==this&&(f.sublevel=null),a[l]=f}return this._batch(a,c,(function(t){if(t)return r(t);n.emit("batch",e),r()})),r[P]}},{key:"_batch",value:function(e,t,r){this.nextTick(r)}},{key:"sublevel",value:function(e,t){return this._sublevel(e,H.defaults(t))}},{key:"_sublevel",value:function(e,t){return new H(this,e,t)}},{key:"prefixKey",value:function(e,t){return e}},{key:"clear",value:function(e,t){var r=this;if(t=T(e,t),t=y(t,P),e=R(e,this[F].empty),"opening"===this[j])return this.defer((function(){return r.clear(e,t)})),t[P];if(W(this,t))return t[P];var n=e,a=this.keyEncoding(e.keyEncoding);return(e=I(e,a)).keyEncoding=a.format,0===e.limit?this.nextTick(t):this._clear(e,(function(e){if(e)return t(e);r.emit("clear",n),t()})),t[P]}},{key:"_clear",value:function(e,t){this.nextTick(t)}},{key:"iterator",value:function(e){var t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=I(e,t)).keys=!1!==e.keys,e.values=!1!==e.values,e[g.keyEncoding]=t,e[g.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[j])return new _(this,e);if("open"!==this[j])throw new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}},{key:"_iterator",value:function(e){return new g(this,e)}},{key:"keys",value:function(e){var t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=I(e,t))[g.keyEncoding]=t,e[g.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[j])return new E(this,e);if("open"!==this[j])throw new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}},{key:"_keys",value:function(e){return new w(this,e)}},{key:"values",value:function(e){var t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if((e=I(e,t))[g.keyEncoding]=t,e[g.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[j])return new S(this,e);if("open"!==this[j])throw new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}},{key:"_values",value:function(e){return new k(this,e)}},{key:"defer",value:function(e){if("function"!==typeof e)throw new TypeError("The first argument must be a function");this[L].push(e)}},{key:B,value:function(){if(0!==this[L].length){var e=this[L];this[L]=[];var t,r=a(e);try{for(r.s();!(t=r.n()).done;){(0,t.value)()}}catch(n){r.e(n)}finally{r.f()}}}},{key:"attachResource",value:function(e){if("object"!==typeof e||null===e||"function"!==typeof e.close)throw new TypeError("The first argument must be a resource object");this[N].add(e)}},{key:"detachResource",value:function(e){this[N].delete(e)}},{key:"_chainedBatch",value:function(){return new A(this)}},{key:"_checkKey",value:function(e){if(null===e||void 0===e)return new b("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}},{key:"_checkValue",value:function(e){if(null===e||void 0===e)return new b("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}]),r}(v);K.prototype.nextTick=r(3907);var H=r(4344)({AbstractLevel:K}).AbstractSublevel;t.AbstractLevel=K,t.AbstractSublevel=H;var W=function(e,t){return"open"!==e[j]&&(e.nextTick(t,new b("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},G=function(e){return Object.keys(e.supports.encodings).filter((function(t){return!!e.supports.encodings[t]}))}},7942:function(e,t,r){"use strict";t.AbstractLevel=r(2486).AbstractLevel,t.AbstractSublevel=r(2486).AbstractSublevel,t.AbstractIterator=r(261).AbstractIterator,t.AbstractKeyIterator=r(261).AbstractKeyIterator,t.AbstractValueIterator=r(261).AbstractValueIterator,t.AbstractChainedBatch=r(3906).AbstractChainedBatch},6445:function(e,t,r){"use strict";for(var n=r(4704).default,a=r(6690).default,i=r(9728).default,o=r(6115).default,s=r(1655).default,u=r(6389).default,c=r(261),l=c.AbstractIterator,f=c.AbstractKeyIterator,p=c.AbstractValueIterator,h=Symbol("unfix"),d=Symbol("iterator"),v=Symbol("handleOne"),y=Symbol("handleMany"),b=Symbol("callback"),g=function(e){s(r,e);var t=u(r);function r(e,n,i,s){var u;return a(this,r),(u=t.call(this,e,n))[d]=i,u[h]=s,u[v]=u[v].bind(o(u)),u[y]=u[y].bind(o(u)),u[b]=null,u}return i(r,[{key:v,value:function(e,t,r){var n=this[b];if(e)return n(e);void 0!==t&&(t=this[h](t)),n(e,t,r)}},{key:y,value:function(e,t){var r=this[b];if(e)return r(e);var a,i=n(t);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o[0];void 0!==s&&(o[0]=this[h](s))}}catch(e){i.e(e)}finally{i.f()}r(e,t)}}]),r}(l),m=function(e){s(r,e);var t=u(r);function r(e,n,i,s){var u;return a(this,r),(u=t.call(this,e,n))[d]=i,u[h]=s,u[v]=u[v].bind(o(u)),u[y]=u[y].bind(o(u)),u[b]=null,u}return i(r,[{key:v,value:function(e,t){var r=this[b];if(e)return r(e);void 0!==t&&(t=this[h](t)),r(e,t)}},{key:y,value:function(e,t){var r=this[b];if(e)return r(e);for(var n=0;n<t.length;n++){var a=t[n];void 0!==a&&(t[n]=this[h](a))}r(e,t)}}]),r}(f),w=function(e){s(r,e);var t=u(r);function r(e,n,i){var o;return a(this,r),(o=t.call(this,e,n))[d]=i,o}return i(r)}(p),k=0,x=[g,m];k<x.length;k++){var _=x[k];_.prototype._next=function(e){this[b]=e,this[d].next(this[v])},_.prototype._nextv=function(e,t,r){this[b]=r,this[d].nextv(e,t,this[y])},_.prototype._all=function(e,t){this[b]=t,this[d].all(e,this[y])}}for(var E=0,S=[w];E<S.length;E++){var A=S[E];A.prototype._next=function(e){this[d].next(e)},A.prototype._nextv=function(e,t,r){this[d].nextv(e,t,r)},A.prototype._all=function(e,t){this[d].all(e,t)}}for(var C=0,T=[g,m,w];C<T.length;C++){var R=T[C];R.prototype._seek=function(e,t){this[d].seek(e,t)},R.prototype._close=function(e){this[d].close(e)}}t.AbstractSublevelIterator=g,t.AbstractSublevelKeyIterator=m,t.AbstractSublevelValueIterator=w},4344:function(e,t,r){"use strict";var n=r(2122).default,a=r(215).default,i=r(6690).default,o=r(9728).default,s=r(1655).default,u=r(6389).default,c=["separator","manifest"],l=r(6134),f=(r(9778)||{}).Buffer,p=r(6445),h=p.AbstractSublevelIterator,d=p.AbstractSublevelKeyIterator,v=p.AbstractSublevelValueIterator,y=Symbol("prefix"),b=Symbol("upperBound"),g=Symbol("prefixRange"),m=Symbol("parent"),w=Symbol("unfix"),k=new TextEncoder,x={separator:"!"};e.exports=function(e){return{AbstractSublevel:function(e){s(r,e);var t=u(r);function r(e,n,o){var s;i(this,r);var u=r.defaults(o),f=u.separator,p=u.manifest,h=a(u,c);n=C(n,f);var d=f.charCodeAt(0)+1,v=e[m]||e;if(!k.encode(n).every((function(e){return e>d&&e<127})))throw new l("Prefix must use bytes > ".concat(d," < ",127),{code:"LEVEL_INVALID_PREFIX"});s=t.call(this,_(v,p),h);var g=(e.prefix||"")+f+n+f,x=g.slice(0,-1)+String.fromCharCode(d);return s[m]=v,s[y]=new S(g),s[b]=new S(x),s[w]=new A,s.nextTick=v.nextTick,s}return o(r,[{key:"prefixKey",value:function(e,t){if("utf8"===t)return this[y].utf8+e;if(0===e.byteLength)return this[y][t];if("view"===t){var r=this[y].view,n=new Uint8Array(r.byteLength+e.byteLength);return n.set(r,0),n.set(e,r.byteLength),n}var a=this[y].buffer;return f.concat([a,e],a.byteLength+e.byteLength)}},{key:g,value:function(e,t){void 0!==e.gte?e.gte=this.prefixKey(e.gte,t):void 0!==e.gt?e.gt=this.prefixKey(e.gt,t):e.gte=this[y][t],void 0!==e.lte?e.lte=this.prefixKey(e.lte,t):void 0!==e.lt?e.lt=this.prefixKey(e.lt,t):e.lte=this[b][t]}},{key:"prefix",get:function(){return this[y].utf8}},{key:"db",get:function(){return this[m]}},{key:"_open",value:function(e,t){this[m].open({passive:!0},t)}},{key:"_put",value:function(e,t,r,n){this[m].put(e,t,r,n)}},{key:"_get",value:function(e,t,r){this[m].get(e,t,r)}},{key:"_getMany",value:function(e,t,r){this[m].getMany(e,t,r)}},{key:"_del",value:function(e,t,r){this[m].del(e,t,r)}},{key:"_batch",value:function(e,t,r){this[m].batch(e,t,r)}},{key:"_clear",value:function(e,t){this[g](e,e.keyEncoding),this[m].clear(e,t)}},{key:"_iterator",value:function(e){this[g](e,e.keyEncoding);var t=this[m].iterator(e),r=this[w].get(this[y].utf8.length,e.keyEncoding);return new h(this,e,t,r)}},{key:"_keys",value:function(e){this[g](e,e.keyEncoding);var t=this[m].keys(e),r=this[w].get(this[y].utf8.length,e.keyEncoding);return new d(this,e,t,r)}},{key:"_values",value:function(e){this[g](e,e.keyEncoding);var t=this[m].values(e);return new v(this,e,t)}}],[{key:"defaults",value:function(e){if("string"===typeof e)throw new l("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(e&&e.open)throw new l("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==e?x:e.separator?e:n(n({},e),{},{separator:"!"})}}]),r}(e.AbstractLevel)}};var _=function(e,t){return n(n(n({},e.supports),{},{createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{}},t),{},{encodings:{utf8:E(e,"utf8"),buffer:E(e,"buffer"),view:E(e,"view")}})},E=function(e,t){return!!e.supports.encodings[t]&&e.keyEncoding(t).name===t},S=o((function e(t){i(this,e),this.utf8=t,this.view=k.encode(t),this.buffer=f?f.from(this.view.buffer,0,this.view.byteLength):{}})),A=function(){function e(){i(this,e),this.cache=new Map}return o(e,[{key:"get",value:function(e,t){var r=this.cache.get(t);return void 0===r&&(r="view"===t?function(e,t){return t.subarray(e)}.bind(null,e):function(e,t){return t.slice(e)}.bind(null,e),this.cache.set(t,r)),r}}]),e}(),C=function(e,t){for(var r=0,n=e.length;r<n&&e[r]===t;)r++;for(;n>r&&e[n-1]===t;)n--;return e.slice(r,n)}},2796:function(e,t){"use strict";t.getCallback=function(e,t){return"function"===typeof e?e:t},t.getOptions=function(e,t){return"object"===typeof e&&null!==e?e:void 0!==t?t:{}}},4895:function(e,t,r){"use strict";var n=r(2122).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=r(3906).AbstractChainedBatch,c=r(6134),l=Symbol("encoded"),f=function(e){o(r,e);var t=s(r);function r(e){var n;return a(this,r),(n=t.call(this,e))[l]=[],n}return i(r,[{key:"_put",value:function(e,t,r){this[l].push(n(n({},r),{},{type:"put",key:e,value:t}))}},{key:"_del",value:function(e,t){this[l].push(n(n({},t),{},{type:"del",key:e}))}},{key:"_clear",value:function(){this[l]=[]}},{key:"_write",value:function(e,t){var r=this;"opening"===this.db.status?this.db.defer((function(){return r._write(e,t)})):"open"===this.db.status?0===this[l].length?this.nextTick(t):this.db._batch(this[l],e,t):this.nextTick(t,new c("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}]),r}(u);t.DefaultChainedBatch=f},8218:function(e,t,r){"use strict";for(var n=r(2122).default,a=r(9728).default,i=r(6690).default,o=r(6115).default,s=r(1655).default,u=r(6389).default,c=r(261),l=c.AbstractKeyIterator,f=c.AbstractValueIterator,p=Symbol("iterator"),h=Symbol("callback"),d=Symbol("handleOne"),v=Symbol("handleMany"),y=function(e){s(r,e);var t=u(r);function r(e,a){var s;return i(this,r),(s=t.call(this,e,a))[p]=e.iterator(n(n({},a),{},{keys:!0,values:!1})),s[d]=s[d].bind(o(s)),s[v]=s[v].bind(o(s)),s}return a(r)}(l),b=function(e){s(r,e);var t=u(r);function r(e,a){var s;return i(this,r),(s=t.call(this,e,a))[p]=e.iterator(n(n({},a),{},{keys:!1,values:!0})),s[d]=s[d].bind(o(s)),s[v]=s[v].bind(o(s)),s}return a(r)}(f),g=function(){var e=w[m],t=e===y,r=t?function(e){return e[0]}:function(e){return e[1]};e.prototype._next=function(e){this[h]=e,this[p].next(this[d])},e.prototype[d]=function(e,r,n){var a=this[h];e?a(e):a(null,t?r:n)},e.prototype._nextv=function(e,t,r){this[h]=r,this[p].nextv(e,t,this[v])},e.prototype._all=function(e,t){this[h]=t,this[p].all(e,this[v])},e.prototype[v]=function(e,t){var n=this[h];e?n(e):n(null,t.map(r))},e.prototype._seek=function(e,t){this[p].seek(e,t)},e.prototype._close=function(e){this[p].close(e)}},m=0,w=[y,b];m<w.length;m++)g();t.DefaultKeyIterator=y,t.DefaultValueIterator=b},7174:function(e,t,r){"use strict";for(var n=r(9728).default,a=r(6690).default,i=r(1655).default,o=r(6389).default,s=r(261),u=s.AbstractIterator,c=s.AbstractKeyIterator,l=s.AbstractValueIterator,f=r(6134),p=Symbol("nut"),h=Symbol("undefer"),d=Symbol("factory"),v=function(e){i(r,e);var t=o(r);function r(e,n){var i;return a(this,r),(i=t.call(this,e,n))[p]=null,i[d]=function(){return e.iterator(n)},i.db.defer((function(){return i[h]()})),i}return n(r)}(u),y=function(e){i(r,e);var t=o(r);function r(e,n){var i;return a(this,r),(i=t.call(this,e,n))[p]=null,i[d]=function(){return e.keys(n)},i.db.defer((function(){return i[h]()})),i}return n(r)}(c),b=function(e){i(r,e);var t=o(r);function r(e,n){var i;return a(this,r),(i=t.call(this,e,n))[p]=null,i[d]=function(){return e.values(n)},i.db.defer((function(){return i[h]()})),i}return n(r)}(l),g=0,m=[v,y,b];g<m.length;g++){var w=m[g];w.prototype[h]=function(){"open"===this.db.status&&(this[p]=this[d]())},w.prototype._next=function(e){var t=this;null!==this[p]?this[p].next(e):"opening"===this.db.status?this.db.defer((function(){return t._next(e)})):this.nextTick(e,new f("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._nextv=function(e,t,r){var n=this;null!==this[p]?this[p].nextv(e,t,r):"opening"===this.db.status?this.db.defer((function(){return n._nextv(e,t,r)})):this.nextTick(r,new f("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._all=function(e,t){var r=this;null!==this[p]?this[p].all(t):"opening"===this.db.status?this.db.defer((function(){return r._all(e,t)})):this.nextTick(t,new f("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._seek=function(e,t){var r=this;null!==this[p]?this[p]._seek(e,t):"opening"===this.db.status&&this.db.defer((function(){return r._seek(e,t)}))},w.prototype._close=function(e){var t=this;null!==this[p]?this[p].close(e):"opening"===this.db.status?this.db.defer((function(){return t._close(e)})):this.nextTick(e)}}t.DeferredIterator=v,t.DeferredKeyIterator=y,t.DeferredValueIterator=b},3907:function(e,t,r){"use strict";var n=r(4183);e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];0===r.length?n(e):n((function(){return e.apply(void 0,r)}))}},3173:function(e,t,r){"use strict";var n=r(6134),a=Object.prototype.hasOwnProperty,i=new Set(["lt","lte","gt","gte"]);e.exports=function(e,t){var r={};for(var o in e)if(a.call(e,o)&&"keyEncoding"!==o&&"valueEncoding"!==o){if("start"===o||"end"===o)throw new n("The legacy range option '".concat(o,"' has been removed"),{code:"LEVEL_LEGACY"});if("encoding"===o)throw new n("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});i.has(o)?r[o]=t.encode(e[o]):r[o]=e[o]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}},6622:function(e,t,r){var n=r(4704).default;function a(e){var t=new globalThis.AbortController;function r(){t.abort();var a,i=n(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;o&&o.removeEventListener&&o.removeEventListener("abort",r)}}catch(s){i.e(s)}finally{i.f()}}var a,i=n(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o&&o.addEventListener){if(o.aborted){r();break}o.addEventListener("abort",r)}}}catch(s){i.e(s)}finally{i.f()}return t.signal}e.exports=a,e.exports.anySignal=a},2009:function(e,t){"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=s(e),o=i[0],u=i[1],c=new a(function(e,t,r){return 3*(t+r)/4-r}(0,o,u)),l=0,f=u>0?o-4:o;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=16383,s=0,c=n-a;s<c;s+=o)i.push(u(e,s,s+o>c?c:s+o));1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],n=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=i[o],n[i.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var a,i,o=[],s=t;s<n;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1976:function(e,t,r){"use strict";r(3744).default;var n=r(9778).Buffer,a=Symbol.for("BufferList");function i(e){if(!(this instanceof i))return new i(e);i._init.call(this,e)}i._init=function(e){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},i.prototype._new=function(e){return new i(e)},i.prototype._offset=function(e){if(0===e)return[0,0];for(var t=0,r=0;r<this._bufs.length;r++){var n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},i.prototype._reverseOffset=function(e){for(var t=e[0],r=e[1],n=0;n<t;n++)r+=this._bufs[n].length;return r},i.prototype.get=function(e){if(!(e>this.length||e<0)){var t=this._offset(e);return this._bufs[t[0]][t[1]]}},i.prototype.slice=function(e,t){return"number"===typeof e&&e<0&&(e+=this.length),"number"===typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(e,t,r,a){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof a||a>this.length)&&(a=this.length),r>=this.length)return e||n.alloc(0);if(a<=0)return e||n.alloc(0);var i=!!e,o=this._offset(r),s=a-r,u=s,c=i&&t||0,l=o[1];if(0===r&&a===this.length){if(!i)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(var f=0;f<this._bufs.length;f++)this._bufs[f].copy(e,c),c+=this._bufs[f].length;return e}if(u<=this._bufs[o[0]].length-l)return i?this._bufs[o[0]].copy(e,t,l,l+u):this._bufs[o[0]].slice(l,l+u);i||(e=n.allocUnsafe(s));for(var p=o[0];p<this._bufs.length;p++){var h=this._bufs[p].length-l;if(!(u>h)){this._bufs[p].copy(e,c,l,l+u),c+=h;break}this._bufs[p].copy(e,c,l),c+=h,u-=h,l&&(l=0)}return e.length>c?e.slice(0,c):e},i.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!==typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();var r=this._offset(e),n=this._offset(t),a=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?a.pop():a[a.length-1]=a[a.length-1].slice(0,n[1]),0!==r[1]&&(a[0]=a[0].slice(r[1])),this._new(a)},i.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},i.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){for(var e=this._new(),t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},i.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(var t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(var r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else"number"===typeof e&&(e=e.toString()),this._appendBuffer(n.from(e));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"===typeof t&&(r=t,t=void 0),"function"===typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof e?e=n.from([e]):"string"===typeof e?e=n.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=n.from(e.buffer,e.byteOffset,e.byteLength):n.isBuffer(e)||(e=n.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;for(var a=this._offset(t),i=a[0],o=a[1];i<this._bufs.length;i++){for(var s=this._bufs[i];o<s.length;){if(s.length-o>=e.length){var u=s.indexOf(e,o);if(-1!==u)return this._reverseOffset([i,u]);o=s.length-e.length+1}else{var c=this._reverseOffset([i,o]);if(this._match(c,e))return c;o++}}o=0}return-1},i.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)!function(t){i.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.slice(r,r+e[t])[t](0)}}(t)}(),i.prototype._isBufferList=function(e){return e instanceof i||i.isBufferList(e)},i.isBufferList=function(e){return null!=e&&e[a]},e.exports=i},6759:function(e,t,r){"use strict";var n=r(6314);e.exports=function(e){return"function"===typeof e.stream?n(e.stream()):n(new Response(e).body)}},7208:function(e,t,r){"use strict";var n=r(215).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=["prefix","version"],c=r(7942).AbstractLevel,l=r(6134),f=r(8636),p=r(5240).fromCallback,h=r(3721).Iterator,d=r(4605),v=r(618),y=r(1001),b="level-js-",g=Symbol("idb"),m=Symbol("namePrefix"),w=Symbol("location"),k=Symbol("version"),x=Symbol("store"),_=Symbol("onComplete"),E=Symbol("promise"),S=function(e){o(r,e);var t=s(r);function r(e,i,o){var s;if(a(this,r),"function"===typeof i||"function"===typeof o)throw new l("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});var c=i||{},f=c.prefix,p=c.version,h=n(c,u);if(s=t.call(this,{encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},h),"string"!==typeof e)throw new Error("constructor requires a location string argument");return s[w]=e,s[m]=null==f?b:f,s[k]=parseInt(p||1,10),s[g]=null,s}return i(r,[{key:"location",get:function(){return this[w]}},{key:"namePrefix",get:function(){return this[m]}},{key:"version",get:function(){return this[k]}},{key:"db",get:function(){return this[g]}},{key:"type",get:function(){return"browser-level"}},{key:"_open",value:function(e,t){var r=this,n=indexedDB.open(this[m]+this[w],this[k]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=function(){r[g]=n.result,t()},n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(r[w])||t.createObjectStore(r[w])}}},{key:x,value:function(e){return this[g].transaction([this[w]],e).objectStore(this[w])}},{key:_,value:function(e,t){var r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}}},{key:"_get",value:function(e,t,r){var n,a=this[x]("readonly");try{n=a.get(e)}catch(i){return this.nextTick(r,i)}this[_](n,(function(e,t){return e?r(e):void 0===t?r(new l("Entry not found",{code:"LEVEL_NOT_FOUND"})):void r(null,d(t))}))}},{key:"_getMany",value:function(e,t,r){var n=this[x]("readonly"),a=e.map((function(e){return function(t){var r;try{r=n.get(e)}catch(a){return t(a)}r.onsuccess=function(){var e=r.result;t(null,void 0===e?e:d(e))},r.onerror=function(e){e.stopPropagation(),t(r.error)}}}));f(a,16,r)}},{key:"_del",value:function(e,t,r){var n,a=this[x]("readwrite");try{n=a.delete(e)}catch(i){return this.nextTick(r,i)}this[_](n,r)}},{key:"_put",value:function(e,t,r,n){var a,i=this[x]("readwrite");try{a=i.put(t,e)}catch(o){return this.nextTick(n,o)}this[_](a,n)}},{key:"_iterator",value:function(e){return new h(this,this[w],e)}},{key:"_batch",value:function(e,t,r){var n,a=this[x]("readwrite"),i=a.transaction,o=0;i.onabort=function(){r(n||i.error||new Error("aborted by user"))},i.oncomplete=function(){r()},function t(){var r,s=e[o++],u=s.key;try{r="del"===s.type?a.delete(u):a.put(s.value,u)}catch(c){return n=c,void i.abort()}o<e.length?r.onsuccess=t:"function"===typeof i.commit&&i.commit()}()}},{key:"_clear",value:function(e,t){var r,n;try{r=y(e)}catch(i){return this.nextTick(t)}if(e.limit>=0)return v(this,this[w],r,e,t);try{var a=this[x]("readwrite");n=r?a.delete(r):a.clear()}catch(o){return this.nextTick(t,o)}this[_](n,t)}},{key:"_close",value:function(e){this[g].close(),this.nextTick(e)}}]),r}(c);S.destroy=function(e,t,r){"function"===typeof t&&(r=t,t=b),r=p(r,E);var n=indexedDB.deleteDatabase(t+e);return n.onsuccess=function(){r()},n.onerror=function(e){r(e)},r[E]},t.BrowserLevel=S},3721:function(e,t,r){"use strict";var n=r(7424).default,a=r(2122).default,i=r(6690).default,o=r(9728).default,s=r(1655).default,u=r(6389).default,c=r(7942).AbstractIterator,l=r(1001),f=r(4605),p=Symbol("cache"),h=Symbol("finished"),d=Symbol("options"),v=Symbol("currentOptions"),y=Symbol("position"),b=Symbol("location"),g=Symbol("first"),m={},w=function(e){s(r,e);var t=u(r);function r(e,n,o){var s;return i(this,r),(s=t.call(this,e,o))[p]=[],s[h]=0===s.limit,s[d]=o,s[v]=a({},o),s[y]=void 0,s[b]=n,s[g]=!0,s}return o(r,[{key:"_nextv",value:function(e,t,r){var n,a=this;if(this[g]=!1,this[h])return this.nextTick(r,null,[]);if(this[p].length>0)return e=Math.min(e,this[p].length),this.nextTick(r,null,this[p].splice(0,e));void 0!==this[y]&&(this[d].reverse?(this[v].lt=this[y],this[v].lte=void 0):(this[v].gt=this[y],this[v].gte=void 0));try{n=l(this[v])}catch(w){return this[h]=!0,this.nextTick(r,null,[])}var i=this.db.db.transaction([this[b]],"readonly"),o=i.objectStore(this[b]),s=[];if(this[d].reverse){o[!this[d].values&&o.openKeyCursor?"openKeyCursor":"openCursor"](n,"prev").onsuccess=function(t){var r=t.target.result;if(r){var n=r.key,o=r.value;a[y]=n,s.push([a[d].keys&&void 0!==n?f(n):void 0,a[d].values&&void 0!==o?f(o):void 0]),s.length<e?r.continue():k(i)}else a[h]=!0}}else{var u,c,m=function(){if(void 0!==u&&void 0!==c){var t=Math.max(u.length,c.length);0===t||e===1/0?a[h]=!0:a[y]=u[t-1],s.length=t;for(var r=0;r<t;r++){var n=u[r],o=c[r];s[r]=[a[d].keys&&void 0!==n?f(n):void 0,a[d].values&&void 0!==o?f(o):void 0]}k(i)}};this[d].keys||e<1/0?o.getAllKeys(n,e<1/0?e:void 0).onsuccess=function(e){u=e.target.result,m()}:(u=[],this.nextTick(m)),this[d].values?o.getAll(n,e<1/0?e:void 0).onsuccess=function(e){c=e.target.result,m()}:(c=[],this.nextTick(m))}i.onabort=function(){r(i.error||new Error("aborted by user")),r=null},i.oncomplete=function(){r(null,s),r=null}}},{key:"_next",value:function(e){var t=this;if(this[p].length>0){var r=this[p].shift(),a=n(r,2),i=a[0],o=a[1];this.nextTick(e,null,i,o)}else if(this[h])this.nextTick(e);else{var s=Math.min(100,this.limit-this.count);this[g]&&(this[g]=!1,s=1),this._nextv(s,m,(function(r,n){if(r)return e(r);t[p]=n,t._next(e)}))}}},{key:"_all",value:function(e,t){this[g]=!1;var r=this[p].splice(0,this[p].length),n=this.limit-this.count-r.length;if(n<=0)return this.nextTick(t,null,r);this._nextv(n,m,(function(e,n){if(e)return t(e);r.length>0&&(n=r.concat(n)),t(null,n)}))}},{key:"_seek",value:function(e,t){var r;this[g]=!0,this[p]=[],this[h]=!1,this[y]=void 0,this[v]=a({},this[d]);try{r=l(this[d])}catch(n){return void(this[h]=!0)}null===r||r.includes(e)?this[d].reverse?this[v].lte=e:this[v].gte=e:this[h]=!0}}]),r}(c);function k(e){"function"===typeof e.commit&&e.commit()}t.Iterator=w},618:function(e){"use strict";e.exports=function(e,t,r,n,a){if(0===n.limit)return e.nextTick(a);var i=e.db.transaction([t],"readwrite"),o=i.objectStore(t),s=0;i.oncomplete=function(){a()},i.onabort=function(){a(i.error||new Error("aborted by user"))};var u=o.openKeyCursor?"openKeyCursor":"openCursor",c=n.reverse?"prev":"next";o[u](r,c).onsuccess=function(e){var t=e.target.result;t&&(o.delete(t.key).onsuccess=function(){(n.limit<=0||++s<n.limit)&&t.continue()})}}},4605:function(e){"use strict";var t=new TextEncoder;e.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):t.encode(e)}},1001:function(e){"use strict";e.exports=function(e){var t=void 0!==e.gte?e.gte:void 0!==e.gt?e.gt:void 0,r=void 0!==e.lte?e.lte:void 0!==e.lt?e.lt:void 0,n=void 0===e.gte,a=void 0===e.lte;return void 0!==t&&void 0!==r?IDBKeyRange.bound(t,r,n,a):void 0!==t?IDBKeyRange.lowerBound(t,n):void 0!==r?IDBKeyRange.upperBound(r,a):null}},6314:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default;function o(){return o=i((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n().mark((function r(){var i,o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=e.getReader(),r.prev=1;case 2:return r.next=5,a(i.read());case 5:if(!(o=r.sent).done){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,o.value;case 10:r.next=2;break;case 12:return r.prev=12,!0!==t.preventCancel&&i.cancel(),i.releaseLock(),r.finish(12);case 16:case"end":return r.stop()}}),r,null,[[1,,12,16]])}))()})),o.apply(this,arguments)}e.exports=function(e){return o.apply(this,arguments)}},9778:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6115).default,o=r(1655).default,s=r(6389).default,u=r(2009),c=r(4038),l="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},t.INSPECT_MAX_BYTES=50;var f=2147483647;function p(e){if(e>f)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,h.prototype),t}function h(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return y(e)}return d(e,t,r)}function d(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|w(e,t),n=p(r),a=n.write(e,t);a!==r&&(n=n.slice(0,a));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return b(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return g(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return h.from(n,t,r);var a=function(e){if(h.isBuffer(e)){var t=0|m(e.length),r=p(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?p(0):b(e);if("Buffer"===e.type&&Array.isArray(e.data))return b(e.data)}(e);if(a)return a;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function v(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function y(e){return v(e),p(e<0?0:0|m(e))}function b(e){for(var t=e.length<0?0:0|m(e.length),r=p(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,h.prototype),n}function m(e){if(e>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|e}function w(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return J(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(a)return n?-1:J(e).length;t=(""+t).toLowerCase(),a=!0}}function k(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return N(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function x(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,a){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),te(r=+r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"===typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,a);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,a){var i,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var l=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*o}else-1!==l&&(i-=i-l),l=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){for(var f=!0,p=0;p<u;p++)if(c(e,i+p)!==c(t,p)){f=!1;break}if(f)return i}return-1}function S(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i,o=t.length;for(n>o/2&&(n=o/2),i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(te(s))return i;e[r+i]=s}return i}function A(e,t,r,n){return $(J(t,e.length-r),e,r,n)}function C(e,t,r,n){return $(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function T(e,t,r,n){return $(X(t),e,r,n)}function R(e,t,r,n){return $(function(e,t){for(var r,n,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,a=r%256,i.push(a),i.push(n);return i}(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i=e[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s<=r){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:i<128&&(o=i);break;case 2:128===(192&(u=e[a+1]))&&(f=(31&i)<<6|63&u)>127&&(o=f);break;case 3:u=e[a+1],c=e[a+2],128===(192&u)&&128===(192&c)&&(f=(15&i)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:u=e[a+1],c=e[a+2],l=e[a+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),a+=s}return function(e){var t=e.length;if(t<=D)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=D));return r}(n)}t.kMaxLength=f,h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(r){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(e,t,r){return d(e,t,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,r){return function(e,t,r){return v(e),e<=0?p(e):void 0!==t?"string"===typeof r?p(e).fill(t,r):p(e).fill(t):p(e)}(e,t,r)},h.allocUnsafe=function(e){return y(e)},h.allocUnsafeSlow=function(e){return y(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=h.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var i=e[r];if(ee(i,Uint8Array))a+i.length>n.length?(h.isBuffer(i)||(i=h.from(i)),i.copy(n,a)):Uint8Array.prototype.set.call(n,i,a);else{if(!h.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a)}a+=i.length}return n},h.byteLength=w,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)x(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):k.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},l&&(h.prototype[l]=h.prototype.inspect),h.prototype.compare=function(e,t,r,n,a){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(i,o),u=this.slice(n,a),c=e.slice(t,r),l=0;l<s;++l)if(u[l]!==c[l]){i=u[l],o=c[l];break}return i<o?-1:o<i?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return A(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function N(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function L(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=re[e[i]];return a}function B(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length-1;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function M(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,r,n,a,i){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function j(e,t,r,n,a){W(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function F(e,t,r,n,a){W(t,n,a,e,r,7);var i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function z(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Z(e,t,r,n,a){return t=+t,r>>>=0,a||z(e,0,r,4),c.write(e,t,r,n,23,4),r+4}function q(e,t,r,n,a){return t=+t,r>>>=0,a||z(e,0,r,8),c.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readBigUInt64LE=ne((function(e){G(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),a=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+r*Math.pow(2,24);return BigInt(n)+(BigInt(a)<<BigInt(32))})),h.prototype.readBigUInt64BE=ne((function(e){G(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],a=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r;return(BigInt(n)<<BigInt(32))+BigInt(a)})),h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},h.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readBigInt64LE=ne((function(e){G(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),h.prototype.readBigInt64BE=ne((function(e){G(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Y(e,this.length-8);var n=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r)})),h.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),c.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),c.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),c.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),c.read(this,e,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||U(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||U(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigUInt64LE=ne((function(e){return j(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ne((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);U(this,e,t,r,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);U(this,e,t,r,a-1,-a)}var i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigInt64LE=ne((function(e){return j(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ne((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(e,t,r){return Z(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return Z(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return q(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return q(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),a},h.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var a=e.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(e=a)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=h.isBuffer(e)?e:h.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};var V={};function K(e,t,r){V[e]=function(r){o(c,r);var u=s(c);function c(){var r;return n(this,c),r=u.call(this),Object.defineProperty(i(r),"message",{value:t.apply(i(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(e,"]"),r.stack,delete r.name,r}return a(c,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),c}(r)}function H(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function W(e,t,r,n,a,i){if(e>r||e<t){var o,s="bigint"===typeof t?"n":"";throw o=i>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(i+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(i+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(r).concat(s),new V.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){G(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||Y(t,e.length-(r+1))}(n,a,i)}function G(e,t){if("number"!==typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,r){if(Math.floor(e)!==e)throw G(e,r),new V.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,r){var n='The value of "'.concat(e,'" is out of range.'),a=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?a=H(String(r)):"bigint"===typeof r&&(a=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(a=H(a)),a+="n"),n+=" It must be ".concat(t,". Received ").concat(a)}),RangeError);var Q=/[^+/0-9A-Za-z-_]/g;function J(e,t){var r;t=t||1/0;for(var n=e.length,a=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function $(e,t,r,n){var a;for(a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var re=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,a=0;a<16;++a)t[n+a]=e[r]+e[a];return t}();function ne(e){return"undefined"===typeof BigInt?ae:e}function ae(){throw new Error("BigInt not supported")}},1438:function(e){"use strict";e.exports=function(e,t){if("string"===typeof e)return o(e);if("number"===typeof e)return i(e,t);return null},e.exports.format=i,e.exports.parse=o;var t=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},a=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function i(e,a){if(!Number.isFinite(e))return null;var i=Math.abs(e),o=a&&a.thousandsSeparator||"",s=a&&a.unitSeparator||"",u=a&&void 0!==a.decimalPlaces?a.decimalPlaces:2,c=Boolean(a&&a.fixedDecimals),l=a&&a.unit||"";l&&n[l.toLowerCase()]||(l=i>=n.pb?"PB":i>=n.tb?"TB":i>=n.gb?"GB":i>=n.mb?"MB":i>=n.kb?"KB":"B");var f=(e/n[l.toLowerCase()]).toFixed(u);return c||(f=f.replace(r,"$1")),o&&(f=f.split(".").map((function(e,r){return 0===r?e.replace(t,o):e})).join(".")),f+s+l}function o(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,r=a.exec(e),i="b";return r?(t=parseFloat(r[1]),i=r[4].toLowerCase()):(t=parseInt(e,10),i="b"),isNaN(t)?null:Math.floor(n[i]*t)}},5240:function(e,t,r){"use strict";var n=r(9650);t.fromCallback=function(e,t){if(void 0===e){var r=new Promise((function(t,r){e=function(e,n){e?r(e):t(n)}}));e[void 0!==t?t:"promise"]=r}else if("function"!==typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){n((function(){return t(null,e)}))})).catch((function(e){n((function(){return t(e)}))}))}},9650:function(e){e.exports="function"===typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)}},8392:function(e,t,r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"https://www.herodrop.org",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=r(8472)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},8472:function(e,t,r){var n=r(861).default;e.exports=function(e){function t(e){var r,n,i,o=null;function s(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(s.enabled){var i=s,o=Number(new Date),u=o-(r||o);i.diff=u,i.prev=r,i.curr=o,r=o,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";c++;var a=t.formatters[r];if("function"===typeof a){var o=n[c];e=a.call(i,o),n.splice(c,1),c--}return e})),t.formatArgs.call(i,n),(i.log||t.log).apply(i,n)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=a,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==o?o:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i)},set:function(e){o=e}}),"function"===typeof t.init&&t.init(s),s}function a(e,r){var n=t(this.namespace+("undefined"===typeof r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(n(t.names.map(i)),n(t.skips.map(i).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(8193),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},2096:function(e,t,r){"use strict";var n=r(2122).default,a=function(){var e=new Error("Delay aborted");return e.name="AbortError",e},i=function(e){var t=e.clearTimeout,r=e.setTimeout,n=e.willResolve;return function(e){var i,o,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.value,l=u.signal;if(l&&l.aborted)return Promise.reject(a());var f=t||clearTimeout,p=function(){f(i),s(a())},h=new Promise((function(t,a){o=function(){l&&l.removeEventListener("abort",p),n?t(c):a(c)},s=a,i=(r||setTimeout)(o,e)}));return l&&l.addEventListener("abort",p,{once:!0}),h.clear=function(){f(i),i=null,o()},h}},o=function(e){var t=i(n(n({},e),{},{willResolve:!0}));return t.reject=i(n(n({},e),{},{willResolve:!1})),t.range=function(e,r,n){return t(function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(e,r),n)},t},s=o();s.createWithTimers=o,e.exports=s,e.exports.default=s},8718:function(e){"use strict";function t(e,t){t=t||{};this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r||t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(void 0===e)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(void 0===e)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},t.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(t>=r||t<-r)){t<0&&(t+=r),t=this._head+t&this._capacityMask;var a,i=this._list[t];if(e<r/2){for(a=e;a>0;a--)this._list[t]=this._list[t=t-1+n&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=r-1-e;a>0;a--)this._list[t]=this._list[t=t+1+n&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+n&this._capacityMask}return i}}},t.prototype.remove=function(e,t){var r,n=e,a=t;if(n===(0|n)&&this._head!==this._tail){var i=this.size(),o=this._list.length;if(!(n>=i||n<-i||t<1)){if(n<0&&(n+=i),1===t||!t)return(r=new Array(1))[0]=this.removeOne(n),r;if(0===n&&n+t>=i)return r=this.toArray(),this.clear(),r;var s;for(n+t>i&&(t=i-n),r=new Array(t),s=0;s<t;s++)r[s]=this._list[this._head+n+s&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===i){for(this._tail=this._tail-t+o&this._capacityMask,s=t;s>0;s--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+o&this._capacityMask,s=t-1;s>0;s--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(n<i/2){for(this._head=this._head+e+t+o&this._capacityMask,s=e;s>0;s--)this.unshift(this._list[n=n-1+o&this._capacityMask]);for(n=this._head-1+o&this._capacityMask;a>0;)this._list[n=n-1+o&this._capacityMask]=void 0,a--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+o&this._capacityMask,s=i-(t+e);s>0;s--)this.push(this._list[n++]);for(n=this._tail;a>0;)this._list[n=n+1+o&this._capacityMask]=void 0,a--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),r}}},t.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var a,i,o,s=arguments.length,u=this._list.length,c=2;if(!n||r<n/2){for(i=new Array(r),a=0;a<r;a++)i[a]=this._list[this._head+a&this._capacityMask];for(0===t?(o=[],r>0&&(this._head=this._head+r+u&this._capacityMask)):(o=this.remove(r,t),this._head=this._head+r+u&this._capacityMask);s>c;)this.unshift(arguments[--s]);for(a=r;a>0;a--)this.unshift(i[a-1])}else{var l=(i=new Array(n-(r+t))).length;for(a=0;a<l;a++)i[a]=this._list[this._head+r+t+a&this._capacityMask];for(0===t?(o=[],r!=n&&(this._tail=this._head+r+u&this._capacityMask)):(o=this.remove(r,t),this._tail=this._tail-l+u&this._capacityMask);c<s;)this.push(arguments[c++]);for(a=0;a<l;a++)this.push(i[a])}return o}return this.remove(r,t)}}},t.prototype.clear=function(){this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])},t.prototype._copyArray=function(e){var t,r=[],n=this._list,a=n.length;if(e||this._head>this._tail){for(t=this._head;t<a;t++)r.push(n[t]);for(t=0;t<this._tail;t++)r.push(n[t])}else for(t=this._head;t<this._tail;t++)r.push(n[t]);return r},t.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=t},5157:function(e){e.exports=function(e,t,r,n,a){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:a;return e===a?r:e}},7963:function(e){"use strict";function t(e,t){for(var r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"===typeof r&&(n=r,r=""),r&&(n.code=r);try{return t(e,n)}catch(i){n.message=e.message,n.stack=e.stack;var a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(e)),t(new a,n)}}},3634:function(e,t,r){"use strict";var n=r(5413);t.zN=n.EventIterator,n.EventIterator},5413:function(e,t,r){"use strict";var n=r(4704).default,a=r(6690).default,i=r(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){a(this,t),this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}return i(t,[{key:"push",value:function(e){if(!this.isStopped){var t={value:e,done:!1};if(this.pullQueue.length){var r=this.pullQueue.shift();r&&r.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn("EventIterator queue reached ".concat(this.pushQueue.length," items")))}}},{key:"stop",value:function(){if(!this.isStopped){this.isStopped=!0,this.remove();var e,t=n(this.pullQueue);try{for(t.s();!(e=t.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(r){t.e(r)}finally{t.f()}this.pullQueue.length=0}}},{key:"fail",value:function(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){var t,r=n(this.pullQueue);try{for(r.s();!(t=r.n()).done;){t.value.reject(e)}}catch(i){r.e(i)}finally{r.f()}this.pullQueue.length=0}else{var a=Promise.reject(e);a.catch((function(){})),this.pushQueue.push(a)}}},{key:"remove",value:function(){var e=this;Promise.resolve().then((function(){e.removeCallback&&e.removeCallback()}))}},{key:e,value:function(){var e=this;return{next:function(t){var r=e.pushQueue.shift();return r?(void 0!==e.lowWaterMark&&e.pushQueue.length<=e.lowWaterMark&&e.isPaused&&(e.isPaused=!1,e.eventHandlers.lowWater&&e.eventHandlers.lowWater()),r):e.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((function(t,r){e.pullQueue.push({resolve:t,reject:r})}))},return:function(){return e.isStopped=!0,e.pushQueue.length=0,e.remove(),Promise.resolve({value:void 0,done:!0})}}}}]),t}(Symbol.asyncIterator),s=i((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.highWaterMark,i=void 0===n?100:n,s=r.lowWaterMark,u=void 0===s?1:s;a(this,e);var c=new o;c.highWaterMark=i,c.lowWaterMark=u,c.removeCallback=t({push:function(e){return c.push(e)},stop:function(){return c.stop()},fail:function(e){return c.fail(e)},on:function(e,t){c.eventHandlers[e]=t}})||function(){},this[Symbol.asyncIterator]=function(){return c[Symbol.asyncIterator]()},Object.freeze(this)}));t.EventIterator=s,t.default=s},7143:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||e,o),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,o=new Array(i);a<i;a++)o[a]=n[a].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,a,i,o){var s=r?r+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,a),!0;case 5:return l.fn.call(l.context,t,n,a,i),!0;case 6:return l.fn.call(l.context,t,n,a,i,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,a);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||n&&s.context!==n||o(this,i);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||a&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},7465:function(e){"use strict";var t,r="object"===typeof Reflect?Reflect:null,n=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i),n(r)}function i(){"function"===typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}v(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&v(e,"error",t,r)}(e,a,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var a,i,o,c;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"===typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(a=u(e))>0&&o.length>a&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=l.bind(n);return a.listener=r,n.wrapFn=a,a}function p(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"===typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):d(a,a.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function v(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){n.once&&e.removeEventListener(t,a),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)n(u,this,t);else{var c=u.length,l=d(u,c);for(r=0;r<c;++r)n(l[r],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,a,i,o;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1167:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(t){if(n(this,e),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}return a(e,[{key:"push",value:function(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}},{key:"shift",value:function(){var e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}},{key:"peek",value:function(){return this.buffer[this.btm]}},{key:"isEmpty",value:function(){return void 0===this.buffer[this.btm]}}]),e}()},5125:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1167);e.exports=function(){"use strict";function e(t){n(this,e),this.hwm=t||16,this.head=new i(this.hwm),this.tail=this.head,this.length=0}return a(e,[{key:"push",value:function(e){if(this.length++,!this.head.push(e)){var t=this.head;this.head=t.next=new i(2*this.head.buffer.length),this.head.push(e)}}},{key:"shift",value:function(){0!==this.length&&this.length--;var e=this.tail.shift();if(void 0===e&&this.tail.next){var t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}},{key:"peek",value:function(){return this.tail.peek()}},{key:"isEmpty",value:function(){return this.head.isEmpty()}}]),e}()},5187:function(e,t){"use strict";function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.BASE,n=e.length,a=0;a<n;a++)t^=e.charCodeAt(a),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}Object.defineProperty(t,"__esModule",{value:!0}),r.BASE=2166136261,t.default=r,e.exports=r},4737:function(e){e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function a(a,i){r[a]=i,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(a(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:a(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},2110:function(e,t,r){"use strict";var n=r(8309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return n.isMemo(e)?o:s[e.$$typeof]||a}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(d){var a=h(r);a&&a!==d&&e(t,a,n)}var o=l(r);f&&(o=o.concat(f(r)));for(var s=u(t),v=u(r),y=0;y<o.length;++y){var b=o[y];if(!i[b]&&(!n||!n[b])&&(!v||!v[b])&&(!s||!s[b])){var g=p(r,b);try{c(t,b,g)}catch(m){}}}}return t}},746:function(e,t){"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,d=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,m=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case l:case f:case i:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case p:case y:case v:case u:return e;default:return t}}case a:return t}}}function x(e){return k(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=n,t.ForwardRef=p,t.Fragment=i,t.Lazy=y,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return x(e)||k(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return k(e)===p},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===y},t.isMemo=function(e){return k(e)===v},t.isPortal=function(e){return k(e)===a},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===o},t.isSuspense=function(e){return k(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===f||e===s||e===o||e===h||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===p||e.$$typeof===g||e.$$typeof===m||e.$$typeof===w||e.$$typeof===b)},t.typeOf=k},8309:function(e,t,r){"use strict";e.exports=r(746)},4038:function(e,t){t.read=function(e,t,r,n,a){var i,o,s=8*a-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?a-1:0,p=r?-1:1,h=e[t+f];for(f+=p,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=p,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),i-=c}return(h?-1:1)*o*Math.pow(2,i-n)},t.write=function(e,t,r,n,a,i){var o,s,u,c=8*i-a-1,l=(1<<c)-1,f=l>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[r+h]=255&s,h+=d,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[r+h]=255&o,h+=d,o/=256,c-=8);e[r+h-d]|=128*v}},6730:function(e){"use strict";var t="[a-fA-F\\d:]",r=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",i="\n(?:\n(?:".concat(a,":){7}(?:").concat(a,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(a,":){6}(?:").concat(n,"|:").concat(a,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(a,":){5}(?::").concat(n,"|(?::").concat(a,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(a,":){4}(?:(?::").concat(a,"){0,1}:").concat(n,"|(?::").concat(a,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(a,":){3}(?:(?::").concat(a,"){0,2}:").concat(n,"|(?::").concat(a,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(a,":){2}(?:(?::").concat(a,"){0,3}:").concat(n,"|(?::").concat(a,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(a,":){1}(?:(?::").concat(a,"){0,4}:").concat(n,"|(?::").concat(a,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(a,"){0,5}:").concat(n,"|(?::").concat(a,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^".concat(n,"$)|(?:^").concat(i,"$)")),s=new RegExp("^".concat(n,"$")),u=new RegExp("^".concat(i,"$")),c=function(e){return e&&e.exact?o:new RegExp("(?:".concat(r(e)).concat(n).concat(r(e),")|(?:").concat(r(e)).concat(i).concat(r(e),")"),"g")};c.v4=function(e){return e&&e.exact?s:new RegExp("".concat(r(e)).concat(n).concat(r(e)),"g")},c.v6=function(e){return e&&e.exact?u:new RegExp("".concat(r(e)).concat(i).concat(r(e)),"g")},e.exports=c},7201:function(e){!function(t){"use strict";var r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),threeOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),twoOctet:new RegExp("^".concat(r,"\\.").concat(r,"$"),"i"),longValue:new RegExp("^".concat(r,"$"),"i")},a=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",s="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp(o,"i"),native:new RegExp("^(::)?(".concat(s,")?([0-9a-f]+)?(::)?(").concat(o,")?$"),"i"),deprecatedTransitional:new RegExp("^(?:::)(".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(o,")?)$"),"i"),transitional:new RegExp("^((?:".concat(s,")|(?:::)(?:").concat(s,")?)").concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(o,")?$"),"i")};function c(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;var r,n,a=0,i=-1,o=(e.match(u.zoneIndex)||[])[0];for(o&&(o=o.substring(1),e=e.replace(/%.+$/,""));(i=e.indexOf(":",i+1))>=0;)a++;if("::"===e.substr(0,2)&&a--,"::"===e.substr(-2,2)&&a--,a>t)return null;for(n=t-a,r=":";n--;)r+="0:";return":"===(e=e.replace("::",r))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){for(var t=e.split(":"),r=[],n=0;n<t.length;n++)r.push(parseInt(t[n],16));return r}(),zoneId:o}}function l(e,t,r,n){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(var a,i=0;n>0;){if((a=r-n)<0&&(a=0),e[i]>>a!==t[i]>>a)return!1;n-=r,i+=1}return!0}function f(e){if(i.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(a.test(e))return parseInt(e,8);throw new Error("ipaddr: cannot parse ".concat(e," as octal"))}return parseInt(e,10)}function p(e,t){for(;e.length<t;)e="0".concat(e);return e}var h={};h.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");var t,r;for(t=0;t<e.length;t++)if(!(0<=(r=e[t])&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){var r;if(void 0===t&&(e=(r=e)[0],t=r[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,r,n=0,a=!1,i={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};for(e=3;e>=0;e-=1){if(!((t=this.octets[e])in i))return null;if(r=i[t],a&&0!==r)return null;8!==r&&(a=!0),n+=r}return 32-n},e.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return h.IPv6.parse("::ffff:".concat(this.toString()))},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),h.IPv4.broadcastAddressFromCIDR=function(e){try{for(var t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],i=0;i<4;)a.push(parseInt(r[i],10)|255^parseInt(n[i],10)),i++;return new this(a)}catch(o){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.isIPv4=function(e){return null!==this.parser(e)},h.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(t){return!1}},h.IPv4.isValidFourPartDecimal=function(e){return!(!h.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},h.IPv4.networkAddressFromCIDR=function(e){var t,r,n,a,i;try{for(n=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],r=0;r<4;)a.push(parseInt(n[r],10)&parseInt(i[r],10)),r++;return new this(a)}catch(o){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.parse=function(e){var t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},h.IPv4.parseCIDR=function(e){var t;if(t=e.match(/^(.+)\/(\d+)$/)){var r=parseInt(t[2]);if(r>=0&&r<=32){var n=[this.parse(t[1]),r];return Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},h.IPv4.parser=function(e){var t,r,a;if(t=e.match(n.fourOctet))return function(){for(var e=t.slice(1,6),n=[],a=0;a<e.length;a++)r=e[a],n.push(f(r));return n}();if(t=e.match(n.longValue)){if((a=f(t[1]))>4294967295||a<0)throw new Error("ipaddr: address outside defined range");return function(){var e,t=[];for(e=0;e<=24;e+=8)t.push(a>>e&255);return t}().reverse()}return(t=e.match(n.twoOctet))?function(){var e=t.slice(1,4),r=[];if((a=f(e[1]))>16777215||a<0)throw new Error("ipaddr: address outside defined range");return r.push(f(e[0])),r.push(a>>16&255),r.push(a>>8&255),r.push(255&a),r}():(t=e.match(n.threeOctet))?function(){var e=t.slice(1,5),r=[];if((a=f(e[2]))>65535||a<0)throw new Error("ipaddr: address outside defined range");return r.push(f(e[0])),r.push(f(e[1])),r.push(a>>8&255),r.push(255&a),r}():null},h.IPv4.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(var t=[0,0,0,0],r=0,n=Math.floor(e/8);r<n;)t[r]=255,r++;return n<4&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},h.IPv6=function(){function e(e,t){var r,n;if(16===e.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(e[r]<<8|e[r+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(r=0;r<this.parts.length;r++)if(!(0<=(n=this.parts[r])&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){var r;if(void 0===t&&(e=(r=e)[0],t=r[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){for(var e,t,r=0,n=!1,a={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},i=7;i>=0;i-=1){if(!((e=this.parts[i])in a))return null;if(t=a[e],n&&0!==t)return null;16!==t&&(n=!0),r+=t}return 128-r},e.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){for(var e,t=[],r=this.parts,n=0;n<r.length;n++)e=r[n],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){var e=function(){for(var e=[],t=0;t<this.parts.length;t++)e.push(p(this.parts[t].toString(16),4));return e}.call(this).join(":"),t="";return this.zoneId&&(t="%".concat(this.zoneId)),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");var e=this.parts.slice(-2),t=e[0],r=e[1];return new h.IPv4([t>>8,255&t,r>>8,255&r])},e.prototype.toNormalizedString=function(){var e=function(){for(var e=[],t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":"),t="";return this.zoneId&&(t="%".concat(this.zoneId)),e+t},e.prototype.toRFC5952String=function(){for(var e,t=/((^|:)(0(:|$)){2,})/g,r=this.toNormalizedString(),n=0,a=-1;e=t.exec(r);)e[0].length>a&&(n=e.index,a=e[0].length);return a<0?r:"".concat(r.substring(0,n),"::").concat(r.substring(n+a))},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e}(),h.IPv6.broadcastAddressFromCIDR=function(e){try{for(var t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],i=0;i<16;)a.push(parseInt(r[i],10)|255^parseInt(n[i],10)),i++;return new this(a)}catch(o){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(o,")"))}},h.IPv6.isIPv6=function(e){return null!==this.parser(e)},h.IPv6.isValid=function(e){if("string"===typeof e&&-1===e.indexOf(":"))return!1;try{var t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(r){return!1}},h.IPv6.networkAddressFromCIDR=function(e){var t,r,n,a,i;try{for(n=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],r=0;r<16;)a.push(parseInt(n[r],10)&parseInt(i[r],10)),r++;return new this(a)}catch(o){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(o,")"))}},h.IPv6.parse=function(e){var t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},h.IPv6.parseCIDR=function(e){var t,r,n;if((r=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(r[2]))>=0&&t<=128)return n=[this.parse(r[1]),t],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},h.IPv6.parser=function(e){var t,r,n,a,i,o;if(n=e.match(u.deprecatedTransitional))return this.parser("::ffff:".concat(n[1]));if(u.native.test(e))return c(e,8);if((n=e.match(u.transitional))&&(o=n[6]||"",(t=c(n[1].slice(0,-1)+o,6)).parts)){for(i=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<i.length;r++)if(!(0<=(a=i[r])&&a<=255))return null;return t.parts.push(i[0]<<8|i[1]),t.parts.push(i[2]<<8|i[3]),{parts:t.parts,zoneId:t.zoneId}}return null},h.IPv6.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>128)throw new Error("ipaddr: invalid IPv6 prefix length");for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0,n=Math.floor(e/8);r<n;)t[r]=255,r++;return n<16&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},h.fromByteArray=function(e){var t=e.length;if(4===t)return new h.IPv4(e);if(16===t)return new h.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},h.isValid=function(e){return h.IPv6.isValid(e)||h.IPv4.isValid(e)},h.parse=function(e){if(h.IPv6.isValid(e))return h.IPv6.parse(e);if(h.IPv4.isValid(e))return h.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},h.parseCIDR=function(e){try{return h.IPv6.parseCIDR(e)}catch(t){try{return h.IPv4.parseCIDR(e)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},h.process=function(e){var t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},h.subnetMatch=function(e,t,r){var n,a,i,o;for(a in void 0!==r&&null!==r||(r="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,a))for(!(i=t[a])[0]||i[0]instanceof Array||(i=[i]),n=0;n<i.length;n++)if(o=i[n],e.kind()===o[0].kind()&&e.match.apply(e,o))return a;return r},e.exports?e.exports=h:t.ipaddr=h}(this)},3749:function(e,t,r){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:r(5359).default,Headers:r(5359).Headers,Request:r(5359).Request,Response:r(5359).Response}},6927:function(e,t,r){"use strict";var n=r(2193),a="object"===typeof window&&"object"===typeof document&&9===document.nodeType,i=n(),o=a&&!i,s=i&&!a,u=i&&a,c="undefined"!==typeof process&&"undefined"!==typeof process.release&&"node"===process.release.name&&!i,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,f="undefined"!==typeof process&&!1,p="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:f,isElectron:i,isElectronMain:s,isElectronRenderer:u,isNode:c,isBrowser:o,isWebWorker:l,isEnvWithDom:a,isReactNative:p}},5213:function(e,t,r){"use strict";e.exports=r(3749)},5014:function(e,t,r){"use strict";var n=r(7061).default,a=r(8186).default,i=r(6737).default,o=r(8131).default,s=r(8237).default,u=r(8257);function c(e,t){return l.apply(this,arguments)}function l(){return(l=a(n().mark((function e(t,r){var a,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new u,e.next=3,i(a.get(t,r));case 3:return c=e.sent,e.delegateYield(o(s(c.iterator()),i),"t0",5);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports=function(e,t){return{path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:c(e,t)}}},8257:function(e,t,r){"use strict";var n=r(8416).default,a=r(7061).default,i=r(2122).default,o=r(7156).default,s=r(6690).default,u=r(9728).default,c=r(8186).default,l=r(6737).default,f=r(8131).default,p=r(8237).default,h=r(2020),d=h.fetch,v=h.Request,y=h.Headers,b=r(8407),g=b.TimeoutError,m=b.HTTPError,w=r(9842).bind({ignoreUndefined:!0}),k=r(6791),x=k.URL,_=k.URLSearchParams,E=r(6622),S=r(6314),A=r(6927),C=A.isBrowser,T=A.isWebWorker,R=r(464),I=function(e,t,r){if(void 0===t)return e;var n=Date.now(),a=function(){return Date.now()-n>=t};return new Promise((function(n,i){var o=setTimeout((function(){a()&&(i(new g),r.abort())}),t),s=function(e){return function(t){clearTimeout(o),a()?i(new g):e(t)}};e.then(s(n),s(i))}))},P={throwHttpErrors:!0,credentials:"same-origin"},D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.opts=w(P,t)}return u(e,[{key:"fetch",value:function(){var e=o(a().mark((function e(t){var r,n,o,s,u,h,b,g,k,A,P=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=P.length>1&&void 0!==P[1]?P[1]:{},n=w(this.opts,r),o=new y(n.headers),"string"===typeof t||(t instanceof x||t instanceof v)){e.next=5;break}throw new TypeError("`resource` must be a string, URL, or Request");case 5:if(s=new x(t.toString(),n.base),u=n.searchParams,h=n.transformSearchParams,b=n.json,u&&(s.search="function"===typeof h?h(new _(n.searchParams)):new _(n.searchParams)),b&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json")),g=new AbortController,k=E([g.signal,n.signal]),!(null!=globalThis.ReadableStream&&n.body instanceof globalThis.ReadableStream&&(C||T))){e.next=17;break}return e.t0=Blob,e.next=15,R(S(n.body));case 15:e.t1=e.sent,n.body=new e.t0(e.t1);case 17:return e.next=19,I(d(s.toString(),i(i({},n),{},{signal:k,timeout:void 0,headers:o,duplex:"half"})),n.timeout,g);case 19:if((A=e.sent).ok||!n.throwHttpErrors){e.next=25;break}if(!n.handleError){e.next=24;break}return e.next=24,n.handleError(A);case 24:throw new m(A);case 25:return A.iterator=c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(f(p(O(A.body)),l),"t0",1);case 1:case"end":return e.stop()}}),e)}))),A.ndjson=c(a().mark((function e(){var t,n,i,o,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,n=!1,e.prev=2,o=p(N(A.iterator()));case 4:return e.next=6,l(o.next());case 6:if(!(t=!(s=e.sent).done)){e.next=18;break}if(u=s.value,!r.transform){e.next=13;break}return e.next=11,r.transform(u);case 11:e.next=15;break;case 13:return e.next=15,u;case 15:t=!1,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),n=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,!t||null==o.return){e.next=29;break}return e.next=29,l(o.return());case 29:if(e.prev=29,!n){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])}))),e.abrupt("return",A);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"POST"}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"GET"}))}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"PUT"}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"DELETE"}))}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,i(i({},t),{},{method:"OPTIONS"}))}}]),e}(),N=function(){var e=c(a().mark((function e(t){var r,n,i,o,s,u,c,f,h,d,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new TextDecoder,n="",i=!1,o=!1,e.prev=4,u=p(t);case 6:return e.next=8,l(u.next());case 8:if(!(i=!(c=e.sent).done)){e.next=25;break}f=c.value,n+=r.decode(f,{stream:!0}),h=n.split(/\r?\n/),d=0;case 13:if(!(d<h.length-1)){e.next=21;break}if(!((v=h[d].trim()).length>0)){e.next=18;break}return e.next=18,JSON.parse(v);case 18:d++,e.next=13;break;case 21:n=h[h.length-1];case 22:i=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),o=!0,s=e.t0;case 31:if(e.prev=31,e.prev=32,!i||null==u.return){e.next=36;break}return e.next=36,l(u.return());case 36:if(e.prev=36,!o){e.next=39;break}throw s;case 39:return e.finish(36);case 40:return e.finish(31);case 41:if(0===(n=(n+=r.decode()).trim()).length){e.next=46;break}return e.next=46,JSON.parse(n);case 46:case"end":return e.stop()}}),e,null,[[4,27,31,41],[32,,36,40]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){if(L(e))return e;if(M(e)){var t=e[Symbol.asyncIterator]();return n({},Symbol.asyncIterator,(function(){return{next:t.next.bind(t),return:function(r){return e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:r})}}}))}if(B(e)){var r=e.getReader();return c(a().mark((function e(){var t,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.next=4,l(r.read());case 4:if(t=e.sent,n=t.done,i=t.value,!n){e.next=9;break}return e.abrupt("return");case 9:if(!i){e.next=12;break}return e.next=12,i;case 12:e.next=1;break;case 14:return e.prev=14,r.releaseLock(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,,14,17]])})))()}throw new TypeError("Body can't be converted to AsyncIterable")},L=function(e){return"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator]},B=function(e){return e&&"function"===typeof e.getReader},M=function(e){return Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable")};D.HTTPError=m,D.TimeoutError=g,D.streamToAsyncIterator=O,D.post=function(e,t){return new D(t).post(e,t)},D.get=function(e,t){return new D(t).get(e,t)},D.put=function(e,t){return new D(t).put(e,t)},D.delete=function(e,t){return new D(t).delete(e,t)},D.options=function(e,t){return new D(t).options(e,t)},e.exports=D},8407:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(1655).default,o=r(6389).default,s=r(3496).default,u=function(e){i(r,e);var t=o(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out";return a(this,r),(e=t.call(this,n)).name="TimeoutError",e}return n(r)}(s(Error));t.TimeoutError=u;var c=function(e){i(r,e);var t=o(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted.";return a(this,r),(e=t.call(this,n)).name="AbortError",e}return n(r)}(s(Error));t.AbortError=c;var l=function(e){i(r,e);var t=o(r);function r(e){var n;return a(this,r),(n=t.call(this,e.statusText)).name="HTTPError",n.response=e,n}return n(r)}(s(Error));t.HTTPError=l},2020:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(6115).default,o=r(1655).default,s=r(6389).default,u=r(7424).default,c=r(4704).default,l=r(8407),f=l.TimeoutError,p=l.AbortError,h=r(5213),d=h.Response,v=h.Request,y=h.Headers,b=h.default,g=b,m=function(e){var t,r=new y,n=c(e.trim().split(/[\r\n]+/));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.indexOf(": ");i>0&&r.set(a.slice(0,i),a.slice(i+1))}}catch(o){n.e(o)}finally{n.f()}return r},w=function(e){o(r,e);var t=s(r);function r(e,n,o){var s;return a(this,r),s=t.call(this,n,o),Object.defineProperty(i(s),"url",{value:e}),s}return n(r)}(d);e.exports={fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t.onUploadProgress?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new XMLHttpRequest;r.open(t.method||"GET",e.toString(),!0);var n=t.timeout,a=t.headers;if(n&&n>0&&n<1/0&&(r.timeout=n),null!=t.overrideMimeType&&r.overrideMimeType(t.overrideMimeType),a){var i,o=c(new y(a));try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),l=s[0],h=s[1];r.setRequestHeader(l,h)}}catch(v){o.e(v)}finally{o.f()}}return t.signal&&(t.signal.onabort=function(){return r.abort()}),t.onUploadProgress&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((function(e,n){var a=function(t){switch(t.type){case"error":e(d.error());break;case"load":e(new w(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:m(r.getAllResponseHeaders())}));break;case"timeout":n(new f);break;case"abort":n(new p)}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(t.body)}))}(e,t):g(e,t)},Request:v,Headers:y}},819:function(e){"use strict";var t=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;e.exports=function(e,r){if(null==r&&(r=!1),e.length<2)return!1;if(e.length>255)return!1;var n=e[e.length-1];if(r){if("."!==n)return!1}else if("."===n)return!1;return t.test(e)}},2193:function(e){e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},2795:function(e,t,r){"use strict";var n=r(6730),a=function(e){return n({exact:!0}).test(e)};a.v4=function(e){return n.v4({exact:!0}).test(e)},a.v6=function(e){return n.v6({exact:!0}).test(e)},a.version=function(e){return a(e)?a.v4(e)?4:6:void 0},e.exports=a},887:function(e){"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},1926:function(e){"use strict";e.exports={E2BIG:7,EACCES:13,EADDRINUSE:100,EADDRNOTAVAIL:101,EAFNOSUPPORT:102,EAGAIN:11,EALREADY:103,EBADF:9,EBADMSG:104,EBUSY:16,ECANCELED:105,ECHILD:10,ECONNABORTED:106,ECONNREFUSED:107,ECONNRESET:108,EDEADLK:36,EDESTADDRREQ:109,EDOM:33,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:110,EIDRM:111,EILSEQ:42,EINPROGRESS:112,EINTR:4,EINVAL:22,EIO:5,EISCONN:113,EISDIR:21,ELOOP:114,EMFILE:24,EMLINK:31,EMSGSIZE:115,ENAMETOOLONG:38,ENETDOWN:116,ENETRESET:117,ENETUNREACH:118,ENFILE:23,ENOBUFS:119,ENODATA:120,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:39,ENOLINK:121,ENOMEM:12,ENOMSG:122,ENOPROTOOPT:123,ENOSPC:28,ENOSR:124,ENOSTR:125,ENOSYS:40,ENOTCONN:126,ENOTDIR:20,ENOTEMPTY:41,ENOTSOCK:128,ENOTSUP:129,ENOTTY:25,ENXIO:6,EOPNOTSUPP:130,EOVERFLOW:132,EPERM:1,EPIPE:32,EPROTO:134,EPROTONOSUPPORT:135,EPROTOTYPE:136,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ETIME:137,ETIMEDOUT:138,ETXTBSY:139,EWOULDBLOCK:140,EXDEV:18,WSAEINTR:10004,WSAEBADF:10009,WSAEACCES:10013,WSAEFAULT:10014,WSAEINVAL:10022,WSAEMFILE:10024,WSAEWOULDBLOCK:10035,WSAEINPROGRESS:10036,WSAEALREADY:10037,WSAENOTSOCK:10038,WSAEDESTADDRREQ:10039,WSAEMSGSIZE:10040,WSAEPROTOTYPE:10041,WSAENOPROTOOPT:10042,WSAEPROTONOSUPPORT:10043,WSAESOCKTNOSUPPORT:10044,WSAEOPNOTSUPP:10045,WSAEPFNOSUPPORT:10046,WSAEAFNOSUPPORT:10047,WSAEADDRINUSE:10048,WSAEADDRNOTAVAIL:10049,WSAENETDOWN:10050,WSAENETUNREACH:10051,WSAENETRESET:10052,WSAECONNABORTED:10053,WSAECONNRESET:10054,WSAENOBUFS:10055,WSAEISCONN:10056,WSAENOTCONN:10057,WSAESHUTDOWN:10058,WSAETOOMANYREFS:10059,WSAETIMEDOUT:10060,WSAECONNREFUSED:10061,WSAELOOP:10062,WSAENAMETOOLONG:10063,WSAEHOSTDOWN:10064,WSAEHOSTUNREACH:10065,WSAENOTEMPTY:10066,WSAEPROCLIM:10067,WSAEUSERS:10068,WSAEDQUOT:10069,WSAESTALE:10070,WSAEREMOTE:10071,WSASYSNOTREADY:10091,WSAVERNOTSUPPORTED:10092,WSANOTINITIALISED:10093,WSAEDISCON:10101,WSAENOMORE:10102,WSAECANCELLED:10103,WSAEINVALIDPROCTABLE:10104,WSAEINVALIDPROVIDER:10105,WSAEPROVIDERFAILEDINIT:10106,WSASYSCALLFAILURE:10107,WSASERVICE_NOT_FOUND:10108,WSATYPE_NOT_FOUND:10109,WSA_E_NO_MORE:10110,WSA_E_CANCELLED:10111,WSAEREFUSED:10112,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGABRT:22,SIGFPE:8,SIGKILL:9,SIGSEGV:11,SIGTERM:15,SIGBREAK:21,SIGWINCH:28,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFIFO:4096,S_IFLNK:40960,O_CREAT:256,O_EXCL:1024,UV_FS_O_FILEMAP:536870912,O_TRUNC:512,O_APPEND:8,S_IRUSR:256,S_IWUSR:128,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:805306528,SSL_OP_ALL:2147485776,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,RSA_PKCS1_PADDING:1,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},5410:function(e){"use strict";var t=65536;e.exports=function(e){var r=new Uint8Array(e),n=0;if(e>0)if(e>t)for(;n<e;)n+t>e?(crypto.getRandomValues(r.subarray(n,n+(e-n))),n+=e-n):(crypto.getRandomValues(r.subarray(n,n+t)),n+=t);else crypto.getRandomValues(r);return r}},6791:function(e,t,r){"use strict";var n=r(5732),a=n.URLWithLegacySupport,i=n.format,o=n.URLSearchParams,s=n.defaultBase,u=r(9640);e.exports={URL:a,URLSearchParams:o,format:i,relative:u,defaultBase:s}},9640:function(e,t,r){"use strict";var n=r(5732),a=n.URLWithLegacySupport,i=n.format;e.exports=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,s=r.protocol?r.protocol.replace(":",""):"http";s=(n[s]||o||s)+":";try{t=new a(e)}catch(c){t={}}var u=Object.assign({},r,{protocol:s||t.protocol,host:r.host||t.host});return new a(e,i(u)).toString()}},5732:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i="undefined"!==typeof navigator&&"ReactNative"===navigator.product;var o=self.URL,s=i?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"",u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;n(this,e),this.super=new o(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}return a(e,[{key:"hash",get:function(){return this.super.hash},set:function(e){this.super.hash=e}},{key:"host",get:function(){return this.super.host},set:function(e){this.super.host=e}},{key:"hostname",get:function(){return this.super.hostname},set:function(e){this.super.hostname=e}},{key:"href",get:function(){return this.super.href},set:function(e){this.super.href=e}},{key:"origin",get:function(){return this.super.origin}},{key:"password",get:function(){return this.super.password},set:function(e){this.super.password=e}},{key:"pathname",get:function(){return this.super.pathname},set:function(e){this.super.pathname=e}},{key:"port",get:function(){return this.super.port},set:function(e){this.super.port=e}},{key:"protocol",get:function(){return this.super.protocol},set:function(e){this.super.protocol=e}},{key:"search",get:function(){return this.super.search},set:function(e){this.super.search=e}},{key:"searchParams",get:function(){return this.super.searchParams}},{key:"username",get:function(){return this.super.username},set:function(e){this.super.username=e}},{key:"toJSON",value:function(){return this.super.toJSON()}},{key:"toString",value:function(){return this.super.toString()}},{key:"format",value:function(){return this.toString()}}],[{key:"createObjectURL",value:function(e){return o.createObjectURL(e)}},{key:"revokeObjectURL",value:function(e){o.revokeObjectURL(e)}}]),e}();e.exports={URLWithLegacySupport:u,URLSearchParams:self.URLSearchParams,defaultBase:s,format:function(e){if("string"===typeof e)return new o(e).toString();if(!(e instanceof o)){var t=e.username&&e.password?"".concat(e.username,":").concat(e.password,"@"):"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",a=e.protocol?e.protocol+"//":"",i=e.host||"",s=e.hostname||"",u=e.search||(e.query?"?"+e.query:""),c=e.hash||"",l=e.pathname||"",f=e.path||l+u;return"".concat(a).concat(t||r).concat(i||s+n).concat(f).concat(c)}}}},464:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,o=function(){var e=a(n().mark((function e(t){var r,a,o,s,u,c,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=!1,o=!1,e.prev=3,u=i(t);case 5:return e.next=7,u.next();case 7:if(!(a=!(c=e.sent).done)){e.next=13;break}l=c.value,r.push(l);case 10:a=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),o=!0,s=e.t0;case 19:if(e.prev=19,e.prev=20,!a||null==u.return){e.next=24;break}return e.next=24,u.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}();e.exports=o},817:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,o=r(8237).default;function s(){return s=i((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n().mark((function r(){var i,s,u,c,l,f,p;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=[],t<1&&(t=1),s=!1,u=!1,r.prev=4,l=o(e);case 6:return r.next=8,a(l.next());case 8:if(!(s=!(f=r.sent).done)){r.next=20;break}p=f.value,i.push(p);case 11:if(!(i.length>=t)){r.next=17;break}return r.next=14,i.slice(0,t);case 14:i=i.slice(t),r.next=11;break;case 17:s=!1,r.next=6;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(4),u=!0,c=r.t0;case 26:if(r.prev=26,r.prev=27,!s||null==l.return){r.next=31;break}return r.next=31,a(l.return());case 31:if(r.prev=31,!u){r.next=34;break}throw c;case 34:return r.finish(31);case 35:return r.finish(26);case 36:if(!i.length){r.next=42;break}return r.next=39,i.slice(0,t);case 39:i=i.slice(t),r.next=36;break;case 42:case"end":return r.stop()}}),r,null,[[4,22,26,36],[27,,31,35]])}))()})),s.apply(this,arguments)}e.exports=function(e){return s.apply(this,arguments)}},9272:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,o=function(){var e=a(n().mark((function e(t){var r,a,o,s,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,s=i(t);case 4:return e.next=6,s.next();case 6:if(!(r=!(u=e.sent).done)){e.next=11;break}u.value;case 8:r=!1,e.next=4;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),a=!0,o=e.t0;case 17:if(e.prev=17,e.prev=18,!r||null==s.return){e.next=22;break}return e.next=22,s.return();case 22:if(e.prev=22,!a){e.next=25;break}throw o;case 25:return e.finish(22);case 26:return e.finish(17);case 27:case"end":return e.stop()}}),e,null,[[2,13,17,27],[18,,22,26]])})));return function(t){return e.apply(this,arguments)}}();e.exports=o},2393:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,o=r(8237).default,s=function(){var e=i(n().mark((function e(t,r){var i,s,u,c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,s=!1,e.prev=2,c=o(t);case 4:return e.next=6,a(c.next());case 6:if(!(i=!(l=e.sent).done)){e.next=16;break}return f=l.value,e.next=10,a(r(f));case 10:if(!e.sent){e.next=13;break}return e.next=13,f;case 13:i=!1,e.next=4;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),s=!0,u=e.t0;case 22:if(e.prev=22,e.prev=23,!i||null==c.return){e.next=27;break}return e.next=27,a(c.return());case 27:if(e.prev=27,!s){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,null,[[2,18,22,32],[23,,27,31]])})));return function(t,r){return e.apply(this,arguments)}}();e.exports=s},4744:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,o=function(){var e=a(n().mark((function e(t){var r,a,o,s,u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,s=i(t);case 4:return e.next=6,s.next();case 6:if(!(r=!(u=e.sent).done)){e.next=12;break}return c=u.value,e.abrupt("return",c);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),a=!0,o=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==s.return){e.next=23;break}return e.next=23,s.return();case 23:if(e.prev=23,!a){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}();e.exports=o},1309:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,o=r(8237).default,s=function(){var e=i(n().mark((function e(t,r){var i,s,u,c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,s=!1,e.prev=2,c=o(t);case 4:return e.next=6,a(c.next());case 6:if(!(i=!(l=e.sent).done)){e.next=15;break}return f=l.value,e.next=10,a(r(f));case 10:return e.next=12,f;case 12:i=!1,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),s=!0,u=e.t0;case 21:if(e.prev=21,e.prev=22,!i||null==c.return){e.next=26;break}return e.next=26,a(c.return());case 26:if(e.prev=26,!s){e.next=29;break}throw u;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])})));return function(t,r){return e.apply(this,arguments)}}();e.exports=s},6723:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,o=function(){var e=a(n().mark((function e(t){var r,a,o,s,u,c,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,o=!1,e.prev=2,u=i(t);case 4:return e.next=6,u.next();case 6:if(!(a=!(c=e.sent).done)){e.next=12;break}l=c.value,r=l;case 9:a=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),o=!0,s=e.t0;case 18:if(e.prev=18,e.prev=19,!a||null==u.return){e.next=23;break}return e.next=23,u.return();case 23:if(e.prev=23,!o){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}();e.exports=o},3144:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,o=function(){var e=a(n().mark((function e(t){var r,a,o,s,u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,a=!1,o=!1,e.prev=3,u=i(t);case 5:return e.next=7,u.next();case 7:if(!(a=!(c=e.sent).done)){e.next=13;break}c.value,r++;case 10:a=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),o=!0,s=e.t0;case 19:if(e.prev=19,e.prev=20,!a||null==u.return){e.next=24;break}return e.next=24,u.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}();e.exports=o},7889:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,o=r(8237).default,s=function(){var e=i(n().mark((function e(t,r){var i,s,u,c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,s=!1,e.prev=2,c=o(t);case 4:return e.next=6,a(c.next());case 6:if(!(i=!(l=e.sent).done)){e.next=13;break}return f=l.value,e.next=10,r(f);case 10:i=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),s=!0,u=e.t0;case 19:if(e.prev=19,e.prev=20,!i||null==c.return){e.next=24;break}return e.next=24,a(c.return());case 24:if(e.prev=24,!s){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])})));return function(t,r){return e.apply(this,arguments)}}();e.exports=s},6155:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8186).default,o=r(6737).default,s=r(8131).default,u=r(8237).default,c=r(9202),l=function(){var e=i(n().mark((function e(){var t,r,i,l,f=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=f.length,r=new Array(t),i=0;i<t;i++)r[i]=f[i];return l=c(),setTimeout(a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(r.map(function(){var e=a(n().mark((function e(t){var r,a,i,o,s,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,o=u(t);case 4:return e.next=6,o.next();case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}c=s.value,l.push(c);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),a=!0,i=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!a){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()));case 3:l.end(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l.end(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),0),e.delegateYield(s(u(l),o),"t0",4);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.exports=l},9202:function(e,t,r){var n=r(8416).default,a=r(5125);e.exports=function(e){var t,r,i;"function"===typeof(e=e||{})?(i=e,e={}):i=e.onEnd;var o,s,u,c=new a,l=function(e){return s?s(e):(c.push(e),o)},f=function(e){return u?o:l({done:!1,value:e})},p=function(e){return u?o:(u=!0,e?function(e){return c=new a,s?s({error:e}):(c.push({error:e}),o)}(e):l({done:!0}))};if(n(t={},Symbol.asyncIterator,(function(){return this})),n(t,"next",(function(){if(!c.isEmpty()){if(e.writev){for(var t,r=[];!c.isEmpty();){if((t=c.shift()).error)throw t.error;r.push(t.value)}return{done:t.done,value:r}}var n=c.shift();if(n.error)throw n.error;return n}return u?{done:!0}:new Promise((function(t,r){s=function(n){return s=null,n.error?r(n.error):e.writev&&!n.done?t({done:n.done,value:[n.value]}):t(n),o}}))})),n(t,"return",(function(){return c=new a,p(),{done:!0}})),n(t,"throw",(function(e){return p(e),{done:!0}})),n(t,"push",f),n(t,"end",p),o=t,!i)return o;var h=o;return n(r={},Symbol.asyncIterator,(function(){return this})),n(r,"next",(function(){return h.next()})),n(r,"throw",(function(e){return h.throw(e),i&&(i(e),i=null),{done:!0}})),n(r,"return",(function(){return h.return(),i&&(i(),i=null),{done:!0}})),n(r,"push",f),n(r,"end",(function(e){return h.end(e),i&&(i(e),i=null),o})),o=r}},857:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,o=r(8237).default,s=r(817);function u(){return u=i((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n().mark((function r(){var i,u,c,l,f,p,h,d,v;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=!1,u=!1,r.prev=2,l=o(s(e,t));case 4:return r.next=6,a(l.next());case 6:if(!(i=!(f=r.sent).done)){r.next=26;break}p=f.value,h=p.map((function(e){return e().then((function(e){return{ok:!0,value:e}}),(function(e){return{ok:!1,err:e}}))})),d=0;case 10:if(!(d<h.length)){r.next=23;break}return r.next=13,a(h[d]);case 13:if(!(v=r.sent).ok){r.next=19;break}return r.next=17,v.value;case 17:r.next=20;break;case 19:throw v.err;case 20:d++,r.next=10;break;case 23:i=!1,r.next=4;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(2),u=!0,c=r.t0;case 32:if(r.prev=32,r.prev=33,!i||null==l.return){r.next=37;break}return r.next=37,a(l.return());case 37:if(r.prev=37,!u){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(32);case 42:case"end":return r.stop()}}),r,null,[[2,28,32,42],[33,,37,41]])}))()})),u.apply(this,arguments)}e.exports=function(e){return u.apply(this,arguments)}},1254:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8186).default,o=r(6737).default,s=r(8131).default,u=r(8237).default,c=r(1069),l=globalThis.CustomEvent||Event;function f(){return f=i((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n().mark((function r(){var i,f,p,h,d,v,y,b,g,m,w,k,x,_;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:_=function(){var e,t;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!k()){r.next=21;break}e=0;case 2:if(!(e<v.length)){r.next=19;break}if(!v[e].done){r.next=16;break}if(t=v[e],v.splice(e,1),e--,!t.ok){r.next=12;break}return r.next=10,t.value;case 10:r.next=15;break;case 12:throw w=!0,y.resolve(),t.err;case 15:y.resolve();case 16:e++,r.next=2;break;case 19:r.next=0;break;case 21:case"end":return r.stop()}}),f)},x=function(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.length||!v[0].done){t.next=14;break}if(e=v[0],v.shift(),!e.ok){t.next=8;break}return t.next=6,e.value;case 6:t.next=11;break;case 8:throw w=!0,y.resolve(),e.err;case 11:y.resolve(),t.next=0;break;case 14:case"end":return t.stop()}}),i)},k=function(){return h?Boolean(v[0]&&v[0].done):Boolean(v.find((function(e){return e.done})))},i=n().mark(x),f=n().mark(_),(p=t.concurrency||1/0)<1&&(p=1/0),h=null!=t.ordered&&t.ordered,d=new EventTarget,v=[],y=c(),b=c(),g=!1,w=!1,d.addEventListener("task-complete",(function(){b.resolve()})),Promise.resolve().then(a(n().mark((function t(){var r,a,i,o,s,f;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=!1,a=!1,t.prev=3,o=n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,v.length!==p){e.next=5;break}return y=c(),e.next=5,y.promise;case 5:if(!w){e.next=7;break}return e.abrupt("return","break");case 7:r={done:!1},v.push(r),t().then((function(e){r.done=!0,r.ok=!0,r.value=e,d.dispatchEvent(new l("task-complete"))}),(function(e){r.done=!0,r.err=e,d.dispatchEvent(new l("task-complete"))}));case 10:case"end":return e.stop()}}),e)})),s=u(e);case 6:return t.next=8,s.next();case 8:if(!(r=!(f=t.sent).done)){t.next=16;break}return t.delegateYield(o(),"t0",10);case 10:if("break"!==t.t0){t.next=13;break}return t.abrupt("break",16);case 13:r=!1,t.next=6;break;case 16:t.next=22;break;case 18:t.prev=18,t.t1=t.catch(3),a=!0,i=t.t1;case 22:if(t.prev=22,t.prev=23,!r||null==s.return){t.next=27;break}return t.next=27,s.return();case 27:if(t.prev=27,!a){t.next=30;break}throw i;case 30:return t.finish(27);case 31:return t.finish(22);case 32:g=!0,d.dispatchEvent(new l("task-complete")),t.next=40;break;case 36:t.prev=36,t.t2=t.catch(0),m=t.t2,d.dispatchEvent(new l("task-complete"));case 40:case"end":return t.stop()}}),t,null,[[0,36],[3,18,22,32],[23,,27,31]])}))));case 15:if(k()){r.next=20;break}return b=c(),r.next=20,o(b.promise);case 20:if(!m){r.next=22;break}throw m;case 22:if(!h){r.next=26;break}return r.delegateYield(s(u(x()),o),"t0",24);case 24:r.next=27;break;case 26:return r.delegateYield(s(u(_()),o),"t1",27);case 27:if(!g||0!==v.length){r.next=29;break}return r.abrupt("break",31);case 29:r.next=15;break;case 31:case"end":return r.stop()}}),r)}))()})),f.apply(this,arguments)}e.exports=function(e){return f.apply(this,arguments)}},1069:function(e){"use strict";e.exports=function(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}},8217:function(e,t,r){"use strict";var n=r(8416).default,a=r(7424).default;e.exports=function(e){var t=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=a(t,2),i=r[0],o=r[1],s=[];return n({peek:function(){return i.next()},push:function(e){s.push(e)},next:function(){return s.length?{done:!1,value:s.shift()}:i.next()}},o,(function(){return this}))}},5959:function(e,t,r){"use strict";var n=r(7061).default,a=r(6737).default,i=r(8186).default,o=r(8237).default,s=function(){var e=i(n().mark((function e(t,r){var i,s,u,c,l,f,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=0,!(r<1)){e.next=3;break}return e.abrupt("return");case 3:s=!1,u=!1,e.prev=5,l=o(t);case 7:return e.next=9,a(l.next());case 9:if(!(s=!(f=e.sent).done)){e.next=19;break}return p=f.value,e.next=13,p;case 13:if(++i!==r){e.next=16;break}return e.abrupt("return");case 16:s=!1,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),u=!0,c=e.t0;case 25:if(e.prev=25,e.prev=26,!s||null==l.return){e.next=30;break}return e.next=30,a(l.return());case 30:if(e.prev=30,!u){e.next=33;break}throw c;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[5,21,25,35],[26,,30,34]])})));return function(t,r){return e.apply(this,arguments)}}();e.exports=s},9765:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=r(8237).default,o=r(3466).concat;function s(){return(s=a(n().mark((function e(t){var r,a,s,u,c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Uint8Array(0),a=!1,s=!1,e.prev=3,c=i(t);case 5:return e.next=7,c.next();case 7:if(!(a=!(l=e.sent).done)){e.next=13;break}f=l.value,r=o([r,f],r.length+f.length);case 10:a=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),s=!0,u=e.t0;case 19:if(e.prev=19,e.prev=20,!a||null==c.return){e.next=24;break}return e.next=24,c.return();case 24:if(e.prev=24,!s){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}e.exports=function(e){return s.apply(this,arguments)}},3137:function(e,t,r){"use strict";var n=r(7061).default,a=r(4704).default,i=r(6690).default,o=r(9728).default,s=r(1655).default,u=r(6389).default,c=r(2525);function l(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0}function f(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}var p=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,r),(e=t.call(this)).localNodeId=n.localNodeId||c(20),e.numberOfNodesPerKBucket=n.numberOfNodesPerKBucket||20,e.numberOfNodesToPing=n.numberOfNodesToPing||3,e.distance=n.distance||r.distance,e.arbiter=n.arbiter||r.arbiter,e.metadata=Object.assign({},n.metadata),f("option.localNodeId as parameter 1",e.localNodeId),e.root={contacts:[],dontSplit:!1,left:null,right:null},e}return o(r,[{key:"add",value:function(e){f("contact.id",(e||{}).id);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e.id,t++);var n=this._indexOf(r,e.id);return n>=0?(this._update(r,n,e),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(e),this.emit("added",e),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(r,t),this.add(e))}},{key:"closest",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(f("id",e),!Number.isInteger(r)&&r!==1/0||r<=0)throw new TypeError("n is not positive number");for(var n=[],a=[this.root],i=0;a.length>0&&n.length<r;){var o=a.pop();if(null===o.contacts){var s=this._determineNode(o,e,i++);a.push(o.left===s?o.right:o.left),a.push(s)}else n=n.concat(o.contacts)}return n.map((function(r){return[t.distance(r.id,e),r]})).sort((function(e,t){return e[0]-t[0]})).slice(0,r).map((function(e){return e[1]}))}},{key:"count",value:function(){for(var e=0,t=[this.root];t.length>0;){var r=t.pop();null===r.contacts?t.push(r.right,r.left):e+=r.contacts.length}return e}},{key:"_determineNode",value:function(e,t,r){var n=r>>3,a=r%8;return t.length<=n&&0!==a?e.left:t[n]&1<<7-a?e.right:e.left}},{key:"get",value:function(e){f("id",e);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e,t++);var n=this._indexOf(r,e);return n>=0?r.contacts[n]:null}},{key:"_indexOf",value:function(e,t){for(var r=0;r<e.contacts.length;++r)if(l(e.contacts[r].id,t))return r;return-1}},{key:"remove",value:function(e){f("the id as parameter 1",e);for(var t=0,r=this.root;null===r.contacts;)r=this._determineNode(r,e,t++);var n=this._indexOf(r,e);if(n>=0){var a=r.contacts.splice(n,1)[0];this.emit("removed",a)}return this}},{key:"_split",value:function(e,t){e.left={contacts:[],dontSplit:!1,left:null,right:null},e.right={contacts:[],dontSplit:!1,left:null,right:null};var r,n=a(e.contacts);try{for(n.s();!(r=n.n()).done;){var i=r.value;this._determineNode(e,i.id,t).contacts.push(i)}}catch(s){n.e(s)}finally{n.f()}e.contacts=null;var o=this._determineNode(e,this.localNodeId,t);(e.left===o?e.right:e.left).dontSplit=!0}},{key:"toArray",value:function(){for(var e=[],t=[this.root];t.length>0;){var r=t.pop();null===r.contacts?t.push(r.right,r.left):e=e.concat(r.contacts)}return e}},{key:"toIterable",value:n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[this.root];case 1:if(!(t.length>0)){e.next=10;break}if(null!==(r=t.pop()).contacts){e.next=7;break}t.push(r.right,r.left),e.next=8;break;case 7:return e.delegateYield(r.contacts,"t0",8);case 8:e.next=1;break;case 10:case"end":return e.stop()}}),e,this)}))},{key:"_update",value:function(e,t,r){if(!l(e.contacts[t].id,r.id))throw new Error("wrong index for _update");var n=e.contacts[t],a=this.arbiter(n,r);a===n&&n!==r||(e.contacts.splice(t,1),e.contacts.push(a),this.emit("updated",n,a))}}],[{key:"arbiter",value:function(e,t){return e.vectorClock>t.vectorClock?e:t}},{key:"distance",value:function(e,t){for(var r=0,n=0,a=Math.min(e.length,t.length),i=Math.max(e.length,t.length);n<a;++n)r=256*r+(e[n]^t[n]);for(;n<i;++n)r=256*r+255;return r}}]),r}(r(7465).EventEmitter);e.exports=p},7987:function(e,t){"use strict";t.supports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return Object.assign(e,t)}),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}},7132:function(e,t,r){"use strict";var n=r(2122).default,a=r(6690).default,i=r(9728).default,o=r(6134),s=r(4967),u=r(2282).Encoding,c=r(6255),l=c.BufferFormat,f=c.ViewFormat,p=c.UTF8Format,h=Symbol("formats"),d=Symbol("encodings"),v=new Set(["buffer","view","utf8"]),y=function(){function e(t){if(a(this,e),!Array.isArray(t))throw new TypeError("The first argument 'formats' must be an array");if(!t.every((function(e){return v.has(e)})))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");for(var r in this[d]=new Map,this[h]=new Set(t),s)try{this.encoding(r)}catch(n){if("LEVEL_ENCODING_NOT_SUPPORTED"!==n.code)throw n}}return i(e,[{key:"encodings",value:function(){return Array.from(new Set(this[d].values()))}},{key:"encoding",value:function(e){var t=this[d].get(e);if(void 0===t){if("string"===typeof e&&""!==e){if(!(t=g[e]))throw new o("Encoding '".concat(e,"' is not found"),{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!==typeof e||null===e)throw new TypeError("First argument 'encoding' must be a string or object");t=function(e){if(e instanceof u)return e;var t="type"in e&&"string"===typeof e.type?e.type:void 0,r=e.name||t||"anonymous-".concat(m++);switch(function(e){return"format"in e&&void 0!==e.format?e.format:"buffer"in e&&"boolean"===typeof e.buffer?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}(e)){case"view":return new f(n(n({},e),{},{name:r}));case"utf8":return new p(n(n({},e),{},{name:r}));case"buffer":return new l(n(n({},e),{},{name:r}));default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(e)}var r=t,a=r.name,i=r.format;if(!this[h].has(i))if(this[h].has("view"))t=t.createViewTranscoder();else if(this[h].has("buffer"))t=t.createBufferTranscoder();else{if(!this[h].has("utf8"))throw new o("Encoding '".concat(a,"' cannot be transcoded"),{code:"LEVEL_ENCODING_NOT_SUPPORTED"});t=t.createUTF8Transcoder()}for(var s=0,c=[e,a,t.name,t.commonName];s<c.length;s++){var v=c[s];this[d].set(v,t)}}return t}}]),e}();t.Transcoder=y;var b={binary:s.buffer,"utf-8":s.utf8},g=n(n({},s),b),m=0},2282:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6134),o=new Set(["buffer","view","utf8"]),s=function(){function e(t){if(n(this,e),this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,"function"!==typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!==typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!==typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!==typeof this.format||!o.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}return a(e,[{key:"commonName",get:function(){return this.name.split("+")[0]}},{key:"createBufferTranscoder",value:function(){throw new i("Encoding '".concat(this.name,"' cannot be transcoded to 'buffer'"),{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}},{key:"createViewTranscoder",value:function(){throw new i("Encoding '".concat(this.name,"' cannot be transcoded to 'view'"),{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}},{key:"createUTF8Transcoder",value:function(){throw new i("Encoding '".concat(this.name,"' cannot be transcoded to 'utf8'"),{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}]),e}();t.Encoding=s},4967:function(e,t,r){"use strict";var n=(r(9778)||{Buffer:{isBuffer:function(){return!1}}}).Buffer,a=r(4260)(),i=a.textEncoder,o=a.textDecoder,s=r(6255),u=s.BufferFormat,c=s.ViewFormat,l=s.UTF8Format,f=function(e){return e};t.utf8=new l({encode:function(e){return n.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?o.decode(e):String(e)},decode:f,name:"utf8",createViewTranscoder:function(){return new c({encode:function(e){return ArrayBuffer.isView(e)?e:i.encode(e)},decode:function(e){return o.decode(e)},name:"".concat(this.name,"+view")})},createBufferTranscoder:function(){return new u({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:"".concat(this.name,"+buffer")})}}),t.json=new l({encode:JSON.stringify,decode:JSON.parse,name:"json"}),t.buffer=new u({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:f,name:"buffer",createViewTranscoder:function(){return new c({encode:function(e){return ArrayBuffer.isView(e)?e:n.from(String(e),"utf8")},decode:function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)},name:"".concat(this.name,"+view")})}}),t.view=new c({encode:function(e){return ArrayBuffer.isView(e)?e:i.encode(e)},decode:f,name:"view",createBufferTranscoder:function(){return new u({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:f,name:"".concat(this.name,"+buffer")})}}),t.hex=new u({encode:function(e){return n.isBuffer(e)?e:n.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"}),t.base64=new u({encode:function(e){return n.isBuffer(e)?e:n.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})},6255:function(e,t,r){"use strict";var n=r(2122).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=(r(9778)||{}).Buffer,c=r(2282).Encoding,l=r(4260),f=function(e){o(r,e);var t=s(r);function r(e){return a(this,r),t.call(this,n(n({},e),{},{format:"buffer"}))}return i(r,[{key:"createViewTranscoder",value:function(){var e=this;return new p({encode:this.encode,decode:function(t){return e.decode(u.from(t.buffer,t.byteOffset,t.byteLength))},name:"".concat(this.name,"+view")})}},{key:"createBufferTranscoder",value:function(){return this}}]),r}(c),p=function(e){o(r,e);var t=s(r);function r(e){return a(this,r),t.call(this,n(n({},e),{},{format:"view"}))}return i(r,[{key:"createBufferTranscoder",value:function(){var e=this;return new f({encode:function(t){var r=e.encode(t);return u.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:"".concat(this.name,"+buffer")})}},{key:"createViewTranscoder",value:function(){return this}}]),r}(c),h=function(e){o(r,e);var t=s(r);function r(e){return a(this,r),t.call(this,n(n({},e),{},{format:"utf8"}))}return i(r,[{key:"createBufferTranscoder",value:function(){var e=this;return new f({encode:function(t){return u.from(e.encode(t),"utf8")},decode:function(t){return e.decode(t.toString("utf8"))},name:"".concat(this.name,"+buffer")})}},{key:"createViewTranscoder",value:function(){var e=this,t=l(),r=t.textEncoder,n=t.textDecoder;return new p({encode:function(t){return r.encode(e.encode(t))},decode:function(t){return e.decode(n.decode(t))},name:"".concat(this.name,"+view")})}},{key:"createUTF8Transcoder",value:function(){return this}}]),r}(c);t.BufferFormat=f,t.ViewFormat=p,t.UTF8Format=h},4260:function(e){"use strict";var t=null;e.exports=function(){return null===t&&(t={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),t}},2164:function(e,t,r){t.Level=r(7208).BrowserLevel},1261:function(e,t,r){"use strict";var n=r(7061).default,a=r(8186).default,i=r(6737).default,o=r(8131).default,s=r(8237).default,u=r(464),c=function(){var e=a(n().mark((function e(t,r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(u(t));case 2:return a=e.sent,e.delegateYield(o(s(a.sort(r)),i),"t0",4);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();e.exports=c},9842:function(e,t,r){"use strict";var n=r(4704).default,a=r(887),i=Object.prototype.hasOwnProperty,o=Object.propertyIsEnumerable,s=function(e,t,r){return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})},u=this,c={concatArrays:!1,ignoreUndefined:!1},l=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){var a,s=Object.getOwnPropertySymbols(e),u=n(s);try{for(u.s();!(a=u.n()).done;){var c=a.value;o.call(e,c)&&t.push(c)}}catch(l){u.e(l)}finally{u.f()}}return t};function f(e){return Array.isArray(e)?function(e){var t=e.slice(0,0);return l(e).forEach((function(r){s(t,r,f(e[r]))})),t}(e):a(e)?function(e){var t=null===Object.getPrototypeOf(e)?Object.create(null):{};return l(e).forEach((function(r){s(t,r,f(e[r]))})),t}(e):e}var p=function(e,t,r,n){return r.forEach((function(r){"undefined"===typeof t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?s(e,r,d(e[r],t[r],n)):s(e,r,f(t[r])))})),e},h=function(e,t,r){var n=e.slice(0,0),a=0;return[e,t].forEach((function(t){for(var o=[],u=0;u<t.length;u++)i.call(t,u)&&(o.push(String(u)),s(n,a++,t===e?t[u]:f(t[u])));n=p(n,t,l(t).filter((function(e){return!o.includes(e)})),r)})),n};function d(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?h(e,t,r):a(t)&&a(e)?p(e,t,l(t),r):f(t)}e.exports=function(){for(var e=d(f(c),this!==u&&this||{},c),t={_:{}},r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var o=0,s=n;o<s.length;o++){var l=s[o];if(void 0!==l){if(!a(l))throw new TypeError("`"+l+"` is not an Option Object");t=d(t,{_:l},e)}}return t._}},6134:function(e,t,r){"use strict";var n=r(9728).default,a=r(6690).default,i=r(6115).default,o=r(1655).default,s=r(6389).default,u=r(3496).default;e.exports=function(e){o(r,e);var t=s(r);function r(e,n){var o;return a(this,r),o=t.call(this,e||""),"object"===typeof n&&null!==n&&(n.code&&(o.code=String(n.code)),n.expected&&(o.expected=!0),n.transient&&(o.transient=!0),n.cause&&(o.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(i(o),o.constructor),o}return n(r)}(u(Error))},8193:function(e){var t=1e3,r=60*t,n=60*r,a=24*n,i=7*a,o=365.25*a;function s(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,u){u=u||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var u=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*i;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&isFinite(e))return u.long?function(e){var i=Math.abs(e);if(i>=a)return s(e,i,a,"day");if(i>=n)return s(e,i,n,"hour");if(i>=r)return s(e,i,r,"minute");if(i>=t)return s(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=a)return Math.round(e/a)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2165:function(e,t,r){e.exports=r(407)},407:function(e,t){!function(r,n){"use strict";var a={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function s(e,t){return e<<t|e>>>32-t}function u(e){return e=o(e^=e>>>16,2246822507),e=o(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function p(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function h(e,t){return[e[0]^t[0],e[1]^t[1]]}function d(e){return e=h(e,[0,e[0]>>>1]),e=h(e=l(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=h(e=l(e,[3301882366,444984403]),[0,e[0]>>>1])}a.x86.hash32=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%4,c=e.length-r,l=t,f=0,p=3432918353,h=461845907,d=0;d<c;d+=4)f=o(f=e[d]|e[d+1]<<8|e[d+2]<<16|e[d+3]<<24,p),f=o(f=s(f,15),h),l=o(l=s(l^=f,13),5)+3864292196;switch(f=0,r){case 3:f^=e[d+2]<<16;case 2:f^=e[d+1]<<8;case 1:f=o(f^=e[d],p),l^=f=o(f=s(f,15),h)}return(l=u(l^=e.length))>>>0},a.x86.hash128=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%16,c=e.length-r,l=t,f=t,p=t,h=t,d=0,v=0,y=0,b=0,g=597399067,m=2869860233,w=951274213,k=2716044179,x=0;x<c;x+=16)d=e[x]|e[x+1]<<8|e[x+2]<<16|e[x+3]<<24,v=e[x+4]|e[x+5]<<8|e[x+6]<<16|e[x+7]<<24,y=e[x+8]|e[x+9]<<8|e[x+10]<<16|e[x+11]<<24,b=e[x+12]|e[x+13]<<8|e[x+14]<<16|e[x+15]<<24,d=s(d=o(d,g),15),l=s(l^=d=o(d,m),19),l=o(l+=f,5)+1444728091,v=s(v=o(v,m),16),f=s(f^=v=o(v,w),17),f=o(f+=p,5)+197830471,y=s(y=o(y,w),17),p=s(p^=y=o(y,k),15),p=o(p+=h,5)+2530024501,b=s(b=o(b,k),18),h=s(h^=b=o(b,g),13),h=o(h+=l,5)+850148119;switch(d=0,v=0,y=0,b=0,r){case 15:b^=e[x+14]<<16;case 14:b^=e[x+13]<<8;case 13:b=o(b^=e[x+12],k),h^=b=o(b=s(b,18),g);case 12:y^=e[x+11]<<24;case 11:y^=e[x+10]<<16;case 10:y^=e[x+9]<<8;case 9:y=o(y^=e[x+8],w),p^=y=o(y=s(y,17),k);case 8:v^=e[x+7]<<24;case 7:v^=e[x+6]<<16;case 6:v^=e[x+5]<<8;case 5:v=o(v^=e[x+4],m),f^=v=o(v=s(v,16),w);case 4:d^=e[x+3]<<24;case 3:d^=e[x+2]<<16;case 2:d^=e[x+1]<<8;case 1:d=o(d^=e[x],g),l^=d=o(d=s(d,15),m)}return l^=e.length,l+=f^=e.length,l+=p^=e.length,f+=l+=h^=e.length,p+=l,h+=l,l=u(l),l+=f=u(f),l+=p=u(p),f+=l+=h=u(h),p+=l,h+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)},a.x64.hash128=function(e,t){if(a.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%16,o=e.length-r,s=[0,t],u=[0,t],v=[0,0],y=[0,0],b=[2277735313,289559509],g=[1291169091,658871167],m=0;m<o;m+=16)v=[e[m+4]|e[m+5]<<8|e[m+6]<<16|e[m+7]<<24,e[m]|e[m+1]<<8|e[m+2]<<16|e[m+3]<<24],y=[e[m+12]|e[m+13]<<8|e[m+14]<<16|e[m+15]<<24,e[m+8]|e[m+9]<<8|e[m+10]<<16|e[m+11]<<24],v=f(v=l(v,b),31),s=c(s=f(s=h(s,v=l(v,g)),27),u),s=c(l(s,[0,5]),[0,1390208809]),y=f(y=l(y,g),33),u=c(u=f(u=h(u,y=l(y,b)),31),s),u=c(l(u,[0,5]),[0,944331445]);switch(v=[0,0],y=[0,0],r){case 15:y=h(y,p([0,e[m+14]],48));case 14:y=h(y,p([0,e[m+13]],40));case 13:y=h(y,p([0,e[m+12]],32));case 12:y=h(y,p([0,e[m+11]],24));case 11:y=h(y,p([0,e[m+10]],16));case 10:y=h(y,p([0,e[m+9]],8));case 9:y=l(y=h(y,[0,e[m+8]]),g),u=h(u,y=l(y=f(y,33),b));case 8:v=h(v,p([0,e[m+7]],56));case 7:v=h(v,p([0,e[m+6]],48));case 6:v=h(v,p([0,e[m+5]],40));case 5:v=h(v,p([0,e[m+4]],32));case 4:v=h(v,p([0,e[m+3]],24));case 3:v=h(v,p([0,e[m+2]],16));case 2:v=h(v,p([0,e[m+1]],8));case 1:v=l(v=h(v,[0,e[m]]),b),s=h(s,v=l(v=f(v,31),g))}return s=c(s=h(s,[0,e.length]),u=h(u,[0,e.length])),u=c(u,s),s=c(s=d(s),u=d(u)),u=c(u,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=a),t.murmurHash3=a}()},486:function(e){"use strict";e.exports=function(e){var t=void 0,r=void 0;function n(e){if(!(e instanceof Object))throw new Error('Target "'+e+'" is not an object');r=e}function a(e){Object.keys(e).forEach((function(t){var r=e[t];if("function"!==typeof r)throw new Error('Trap "'+t+": "+r+'" is not a function');if(!Reflect[t])throw new Error('Trap "'+t+": "+r+'" is not a valid trap')})),t=e}n((function(){})),e&&n(e),a(Reflect);var i=new Proxy({},{get:function(e,n){return function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return t[n].apply(null,[r].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a.slice(1))))}}});return{setTarget:n,setHandler:a,getTarget:function(){return r},getHandler:function(){return t},proxy:new Proxy(r,i)}}},7922:function(e,t){(function(){var e,r,n,a,i,o,s,u;u=function(e){return[(e&255<<24)>>>24,(e&255<<16)>>>16,(65280&e)>>>8,255&e].join(".")},s=function(e){var t,n,a,i,o,s;for(t=[],a=i=0;i<=3&&0!==e.length;a=++i){if(a>0){if("."!==e[0])throw new Error("Invalid IP");e=e.substring(1)}o=(s=r(e))[0],n=s[1],e=e.substring(n),t.push(o)}if(0!==e.length)throw new Error("Invalid IP");switch(t.length){case 1:if(t[0]>4294967295)throw new Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>16777215)throw new Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw new Error("Invalid IP")}},a=(n=function(e){return e.charCodeAt(0)})("0"),o=n("a"),i=n("A"),r=function(e){var t,r,s,u,c;for(u=0,t=10,r="9",s=0,e.length>1&&"0"===e[s]&&("x"===e[s+1]||"X"===e[s+1]?(s+=2,t=16):"0"<=e[s+1]&&e[s+1]<="9"&&(s++,t=8,r="7")),c=s;s<e.length;){if("0"<=e[s]&&e[s]<=r)u=u*t+(n(e[s])-a)>>>0;else{if(16!==t)break;if("a"<=e[s]&&e[s]<="f")u=u*t+(10+n(e[s])-o)>>>0;else{if(!("A"<=e[s]&&e[s]<="F"))break;u=u*t+(10+n(e[s])-i)>>>0}}if(u>4294967295)throw new Error("too large");s++}if(s===c)throw new Error("empty octet");return[u,s]},e=function(){function e(e,t){var r,n,a;if("string"!==typeof e)throw new Error("Missing `net' parameter");if(t||(a=e.split("/",2),e=a[0],t=a[1]),t||(t=32),"string"===typeof t&&t.indexOf(".")>-1){try{this.maskLong=s(t)}catch(i){throw i,new Error("Invalid mask: "+t)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!t&&0!==t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(s(e)&this.maskLong)>>>0}catch(i){throw i,new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=u(this.netLong),this.mask=u(this.maskLong),this.hostmask=u(~this.maskLong),this.first=this.bitmask<=30?u(this.netLong+1):this.base,this.last=this.bitmask<=30?u(this.netLong+this.size-2):u(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?u(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"===typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(s(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(u(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,r,n;for(n=s(this.first),r=s(this.last),t=0;n<=r;)e(u(n),n,t),t++,n++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=s,t.long2ip=u,t.Netmask=e}).call(this)},5359:function(e,t,r){"use strict";var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},8605:function(e,t,r){var n=r(392);function a(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.aes.Algorithm(e,t)}))}r(3397),r(4533),r(3877),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var a=v({key:e,output:r,decrypt:!1,mode:n});return a.start(t),a},n.aes.createEncryptionCipher=function(e,t){return v({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var a=v({key:e,output:r,decrypt:!0,mode:n});return a.start(t),a},n.aes.createDecryptionCipher=function(e,t){return v({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){l||p();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return d(r._w,e,t,!1)},decrypt:function(e,t){return d(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var a=0;a<t.length;++a)r.putByte(t[a])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var i=t.length();if(16===i||24===i||32===i){i>>>=2;for(a=0;a<i;++a)r.push(t.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=h(r,e.decrypt&&!s),this._init=!0}},n.aes._expandKey=function(e,t){return l||p(),h(e,t)},n.aes._updateBlock=d,a("AES-ECB",n.cipher.modes.ecb),a("AES-CBC",n.cipher.modes.cbc),a("AES-CFB",n.cipher.modes.cfb),a("AES-OFB",n.cipher.modes.ofb),a("AES-CTR",n.cipher.modes.ctr),a("AES-GCM",n.cipher.modes.gcm);var i,o,s,u,c,l=!1,f=4;function p(){l=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;i=new Array(256),o=new Array(256),u=new Array(4),c=new Array(4);for(t=0;t<4;++t)u[t]=new Array(256),c[t]=new Array(256);var r,n,a,f,p,h,d,v=0,y=0;for(t=0;t<256;++t){f=(f=y^y<<1^y<<2^y<<3^y<<4)>>8^255&f^99,i[v]=f,o[f]=v,h=(p=e[f])<<24^f<<16^f<<8^f^p,d=((r=e[v])^(n=e[r])^(a=e[n]))<<24^(v^a)<<16^(v^n^a)<<8^v^r^a;for(var b=0;b<4;++b)u[b][v]=h,c[b][f]=d,h=h<<24|h>>>8,d=d<<24|d>>>8;0===v?v=y=1:(v=r^e[e[e[r^a]]],y^=e[e[y]])}}function h(e,t){for(var r,n=e.slice(0),a=1,o=n.length,u=f*(o+6+1),l=o;l<u;++l)r=n[l-1],l%o===0?(r=i[r>>>16&255]<<24^i[r>>>8&255]<<16^i[255&r]<<8^i[r>>>24]^s[a]<<24,a++):o>6&&l%o===4&&(r=i[r>>>24]<<24^i[r>>>16&255]<<16^i[r>>>8&255]<<8^i[255&r]),n[l]=n[l-o]^r;if(t){for(var p,h=c[0],d=c[1],v=c[2],y=c[3],b=n.slice(0),g=(l=0,(u=n.length)-f);l<u;l+=f,g-=f)if(0===l||l===u-f)b[l]=n[g],b[l+1]=n[g+3],b[l+2]=n[g+2],b[l+3]=n[g+1];else for(var m=0;m<f;++m)p=n[g+m],b[l+(3&-m)]=h[i[p>>>24]]^d[i[p>>>16&255]]^v[i[p>>>8&255]]^y[i[255&p]];n=b}return n}function d(e,t,r,n){var a,s,l,f,p,h,d,v,y,b,g,m,w=e.length/4-1;n?(a=c[0],s=c[1],l=c[2],f=c[3],p=o):(a=u[0],s=u[1],l=u[2],f=u[3],p=i),h=t[0]^e[0],d=t[n?3:1]^e[1],v=t[2]^e[2],y=t[n?1:3]^e[3];for(var k=3,x=1;x<w;++x)b=a[h>>>24]^s[d>>>16&255]^l[v>>>8&255]^f[255&y]^e[++k],g=a[d>>>24]^s[v>>>16&255]^l[y>>>8&255]^f[255&h]^e[++k],m=a[v>>>24]^s[y>>>16&255]^l[h>>>8&255]^f[255&d]^e[++k],y=a[y>>>24]^s[h>>>16&255]^l[d>>>8&255]^f[255&v]^e[++k],h=b,d=g,v=m;r[0]=p[h>>>24]<<24^p[d>>>16&255]<<16^p[v>>>8&255]<<8^p[255&y]^e[++k],r[n?3:1]=p[d>>>24]<<24^p[v>>>16&255]<<16^p[y>>>8&255]<<8^p[255&h]^e[++k],r[2]=p[v>>>24]<<24^p[y>>>16&255]<<16^p[h>>>8&255]<<8^p[255&d]^e[++k],r[n?1:3]=p[y>>>24]<<24^p[h>>>16&255]<<16^p[d>>>8&255]<<8^p[255&v]^e[++k]}function v(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),a=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,a.call(t,r)},t}},5049:function(e,t,r){var n=r(392);r(3877),r(2886);var a=e.exports=n.asn1=n.asn1||{};function i(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}a.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},a.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},a.create=function(e,t,r,i,o){if(n.util.isArray(i)){for(var s=[],u=0;u<i.length;++u)void 0!==i[u]&&s.push(i[u]);i=s}var c={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(i),value:i};return o&&"bitStringContents"in o&&(c.bitStringContents=o.bitStringContents,c.original=a.copy(c)),c},a.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var i=0;i<e.length;++i)r.push(a.copy(e[i],t));return r}return"string"===typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:a.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},a.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!a.equals(e[i],t[i]))return!1;return!0}if(typeof e!==typeof t)return!1;if("string"===typeof e)return e===t;var o=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&a.equals(e.value,t.value);return r&&r.includeBitStringContents&&(o=o&&e.bitStringContents===t.bitStringContents),o},a.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};function o(e,t,r,n){var s;i(e,t,2);var u=e.getByte();t--;var c=192&u,l=31&u;s=e.length();var f,p,h=function(e,t){var r=e.getByte();if(t--,128!==r){var n;if(128&r){var a=127&r;i(e,t,a),n=e.getInt(a<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,t);if(t-=s-e.length(),void 0!==h&&h>t){if(n.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=t,d.requested=h,d}h=t}var v=32===(32&u);if(v)if(f=[],void 0===h)for(;;){if(i(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}s=e.length(),f.push(o(e,t,r+1,n)),t-=s-e.length()}else for(;h>0;)s=e.length(),f.push(o(e,h,r+1,n)),t-=s-e.length(),h-=s-e.length();if(void 0===f&&c===a.Class.UNIVERSAL&&l===a.Type.BITSTRING&&(p=e.bytes(h)),void 0===f&&n.decodeBitStrings&&c===a.Class.UNIVERSAL&&l===a.Type.BITSTRING&&h>1){var y=e.read,b=t,g=0;if(l===a.Type.BITSTRING&&(i(e,t,1),g=e.getByte(),t--),0===g)try{s=e.length();var m=o(e,t,r+1,{strict:!0,decodeBitStrings:!0}),w=s-e.length();t-=w,l==a.Type.BITSTRING&&w++;var k=m.tagClass;w!==h||k!==a.Class.UNIVERSAL&&k!==a.Class.CONTEXT_SPECIFIC||(f=[m])}catch(_){}void 0===f&&(e.read=y,t=b)}if(void 0===f){if(void 0===h){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=t}if(l===a.Type.BMPSTRING)for(f="";h>0;h-=2)i(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(h),t-=h}var x=void 0===p?null:{bitStringContents:p};return a.create(c,l,v,f,x)}a.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.length(),a=o(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return a},a.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,i=n.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=a.equals(e,e.original))),o)i.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:i.putByte(0);for(var s=0;s<e.value.length;++s)void 0!==e.value[s]&&i.putBuffer(a.toDer(e.value[s]))}else if(e.type===a.Type.BMPSTRING)for(s=0;s<e.value.length;++s)i.putInt16(e.value.charCodeAt(s));else e.type===a.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0===(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128===(128&e.value.charCodeAt(1)))?i.putBytes(e.value.substr(1)):i.putBytes(e.value);if(t.putByte(r),i.length()<=127)t.putByte(127&i.length());else{var u=i.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);t.putByte(128|c.length);for(s=c.length-1;s>=0;--s)t.putByte(c.charCodeAt(s))}return t.putBuffer(i),t},a.oidToDer=function(e){var t,r,a,i,o=e.split("."),s=n.util.createBuffer();s.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var u=2;u<o.length;++u){t=!0,r=[],a=parseInt(o[u],10);do{i=127&a,a>>>=7,t||(i|=128),r.push(i),t=!1}while(a>0);for(var c=r.length-1;c>=0;--c)s.putByte(r[c])}return s},a.derToOid=function(e){var t;"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var a=0;e.length()>0;)a<<=7,128&(r=e.getByte())?a+=127&r:(t+="."+(a+r),a=0);return t},a.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,a=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var u=e.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,a),t.setUTCHours(i,o,s,0),c&&("+"===(u=e.charAt(c))||"-"===u)){var l=60*parseInt(e.substr(c+1,2),10)+parseInt(e.substr(c+4,2),10);l*=6e4,"+"===u?t.setTime(+t-l):t.setTime(+t+l)}return t},a.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var f=e.length-5,p=e.charAt(f);"+"!==p&&"-"!==p||(c=60*parseInt(e.substr(f+1,2),10)+parseInt(e.substr(f+4,2),10),c*=6e4,"+"===p&&(c*=-1),l=!0);return"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,a),t.setUTCHours(i,o,s,u),t.setTime(+t+c)):(t.setFullYear(r,n,a),t.setHours(i,o,s,u)),t},a.dateToUtcTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},a.dateToGeneralizedTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},a.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},a.derToInteger=function(e){"string"===typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},a.validate=function(e,t,r,i){var o=!1;if(e.tagClass!==t.tagClass&&"undefined"!==typeof t.tagClass||e.type!==t.type&&"undefined"!==typeof t.type)i&&(e.tagClass!==t.tagClass&&i.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&i.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||"undefined"===typeof t.constructed){if(o=!0,t.value&&n.util.isArray(t.value))for(var s=0,u=0;o&&u<t.value.length;++u)o=t.value[u].optional||!1,e.value[s]&&((o=a.validate(e.value[s],t.value[u],r,i))?++s:t.value[u].optional&&(o=!0)),!o&&i&&i.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(o&&r)if(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else i&&i.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return o};var s=/[^\\u0000-\\u00ff]/;a.prettyPrint=function(e,t,r){var i="";r=r||2,(t=t||0)>0&&(i+="\n");for(var o="",u=0;u<t*r;++u)o+=" ";switch(i+=o+"Tag: ",e.tagClass){case a.Class.UNIVERSAL:i+="Universal:";break;case a.Class.APPLICATION:i+="Application:";break;case a.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case a.Class.PRIVATE:i+="Private:"}if(e.tagClass===a.Class.UNIVERSAL)switch(i+=e.type,e.type){case a.Type.NONE:i+=" (None)";break;case a.Type.BOOLEAN:i+=" (Boolean)";break;case a.Type.INTEGER:i+=" (Integer)";break;case a.Type.BITSTRING:i+=" (Bit string)";break;case a.Type.OCTETSTRING:i+=" (Octet string)";break;case a.Type.NULL:i+=" (Null)";break;case a.Type.OID:i+=" (Object Identifier)";break;case a.Type.ODESC:i+=" (Object Descriptor)";break;case a.Type.EXTERNAL:i+=" (External or Instance of)";break;case a.Type.REAL:i+=" (Real)";break;case a.Type.ENUMERATED:i+=" (Enumerated)";break;case a.Type.EMBEDDED:i+=" (Embedded PDV)";break;case a.Type.UTF8:i+=" (UTF8)";break;case a.Type.ROID:i+=" (Relative Object Identifier)";break;case a.Type.SEQUENCE:i+=" (Sequence)";break;case a.Type.SET:i+=" (Set)";break;case a.Type.PRINTABLESTRING:i+=" (Printable String)";break;case a.Type.IA5String:i+=" (IA5String (ASCII))";break;case a.Type.UTCTIME:i+=" (UTC time)";break;case a.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case a.Type.BMPSTRING:i+=" (BMP String)"}else i+=e.type;if(i+="\n",i+=o+"Constructed: "+e.constructed+"\n",e.composed){var c=0,l="";for(u=0;u<e.value.length;++u)void 0!==e.value[u]&&(c+=1,l+=a.prettyPrint(e.value[u],t+1,r),u+1<e.value.length&&(l+=","));i+=o+"Sub values: "+c+l}else{if(i+=o+"Value: ",e.type===a.Type.OID){var f=a.derToOid(e.value);i+=f,n.pki&&n.pki.oids&&f in n.pki.oids&&(i+=" ("+n.pki.oids[f]+") ")}if(e.type===a.Type.INTEGER)try{i+=a.derToInteger(e.value)}catch(h){i+="0x"+n.util.bytesToHex(e.value)}else if(e.type===a.Type.BITSTRING){if(e.value.length>1?i+="0x"+n.util.bytesToHex(e.value.slice(1)):i+="(none)",e.value.length>0){var p=e.value.charCodeAt(0);1==p?i+=" (1 unused bit shown)":p>1&&(i+=" ("+p+" unused bits shown)")}}else if(e.type===a.Type.OCTETSTRING)s.test(e.value)||(i+="("+e.value+") "),i+="0x"+n.util.bytesToHex(e.value);else if(e.type===a.Type.UTF8)try{i+=n.util.decodeUtf8(e.value)}catch(d){if("URI malformed"!==d.message)throw d;i+="0x"+n.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===a.Type.PRINTABLESTRING||e.type===a.Type.IA5String?i+=e.value:s.test(e.value)?i+="0x"+n.util.bytesToHex(e.value):0===e.value.length?i+="[null]":i+=e.value}return i}},5754:function(e){var t={};e.exports=t;var r={};t.encode=function(e,t,r){if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var a=0,i=t.length,o=t.charAt(0),s=[0];for(a=0;a<e.length;++a){for(var u=0,c=e[a];u<s.length;++u)c+=s[u]<<8,s[u]=c%i,c=c/i|0;for(;c>0;)s.push(c%i),c=c/i|0}for(a=0;0===e[a]&&a<e.length-1;++a)n+=o;for(a=s.length-1;a>=0;--a)n+=t[s[a]]}else n=function(e,t){var r=0,n=t.length,a=t.charAt(0),i=[0];for(r=0;r<e.length();++r){for(var o=0,s=e.at(r);o<i.length;++o)s+=i[o]<<8,i[o]=s%n,s=s/n|0;for(;s>0;)i.push(s%n),s=s/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=a;for(r=i.length-1;r>=0;--r)u+=t[i[r]];return u}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},t.decode=function(e,t){if("string"!==typeof e)throw new TypeError('"input" must be a string.');if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');var n=r[t];if(!n){n=r[t]=[];for(var a=0;a<t.length;++a)n[t.charCodeAt(a)]=a}e=e.replace(/\s/g,"");var i=t.length,o=t.charAt(0),s=[0];for(a=0;a<e.length;a++){var u=n[e.charCodeAt(a)];if(void 0===u)return;for(var c=0,l=u;c<s.length;++c)l+=s[c]*i,s[c]=255&l,l>>=8;for(;l>0;)s.push(255&l),l>>=8}for(var f=0;e[f]===o&&f<e.length-1;++f)s.push(0);return"undefined"!==typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},3397:function(e,t,r){var n=r(392);r(3877),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var a=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};a.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},a.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},a.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},4533:function(e,t,r){var n=r(392);r(3877),n.cipher=n.cipher||{};var a=e.exports=n.cipher.modes=n.cipher.modes||{};function i(e,t){if("string"===typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var a=0;a<r.length;++a)e.putByte(r[a])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var i=[],o=t/4;for(a=0;a<o;++a)i.push(e.getInt32());e=i}return e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function s(e){return[e/4294967296|0,4294967295&e]}a.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},a.ecb.prototype.start=function(e){},a.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},a.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},a.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},a.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},a.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},a.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},a.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},a.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},a.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},a.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},a.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},a.ofb.prototype.decrypt=a.ofb.prototype.encrypt,a.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},a.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},a.ctr.prototype.decrypt=a.ctr.prototype.encrypt,a.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},a.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=r.length();if(12===a)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*a)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=s(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},a.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},a.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},a.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var a=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},a.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),a=0;a<128;++a){e[a/32|0]&1<<31-a%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},a.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},a.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,a=this._m[r][n];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t},a.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},a.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,a=16*r,i=new Array(a),o=0;o<a;++o){var s=[0,0,0,0],u=(n-1-o%n)*t;s[o/n|0]=1<<t-1<<u,i[o]=this.generateSubHashTable(this.multiply(s,e),t)}return i},a.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,a=new Array(r);a[n]=e.slice(0);for(var i=n>>>1;i>0;)this.pow(a[2*i],a[i]=[]),i>>=1;for(i=2;i<n;){for(var o=1;o<i;++o){var s=a[i],u=a[o];a[i+o]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}i*=2}for(a[0]=[0,0,0,0],i=n+1;i<r;++i){var c=a[i^n];a[i]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return a}},1400:function(e,t,r){var n=r(392);function a(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.des.Algorithm(e,t)}))}r(3397),r(4533),r(3877),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},n.des.createEncryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var a=d({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},n.des.createDecryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return h(r._keys,e,t,!1)},decrypt:function(e,t){return h(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],v=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=e.length()>8?3:1,b=[],g=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],m=0,w=0;w<y;w++){var k=e.getInt32(),x=e.getInt32();k^=(t=252645135&(k>>>4^x))<<4,k^=t=65535&((x^=t)>>>-16^k),k^=(t=858993459&(k>>>2^(x^=t<<-16)))<<2,k^=t=65535&((x^=t)>>>-16^k),k^=(t=1431655765&(k>>>1^(x^=t<<-16)))<<1,k^=t=16711935&((x^=t)>>>8^k),t=(k^=(t=1431655765&(k>>>1^(x^=t<<8)))<<1)<<8|(x^=t)>>>20&240,k=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=t;for(var _=0;_<g.length;++_){g[_]?(k=k<<2|k>>>26,x=x<<2|x>>>26):(k=k<<1|k>>>27,x=x<<1|x>>>27),x&=-15;var E=r[(k&=-15)>>>28]|n[k>>>24&15]|a[k>>>20&15]|i[k>>>16&15]|o[k>>>12&15]|s[k>>>8&15]|u[k>>>4&15],S=c[x>>>28]|l[x>>>24&15]|f[x>>>20&15]|p[x>>>16&15]|h[x>>>12&15]|d[x>>>8&15]|v[x>>>4&15];t=65535&(S>>>16^E),b[m++]=E^t,b[m++]=S^t<<16}}return b}(t),this._init=!0}},a("DES-ECB",n.cipher.modes.ecb),a("DES-CBC",n.cipher.modes.cbc),a("DES-CFB",n.cipher.modes.cfb),a("DES-OFB",n.cipher.modes.ofb),a("DES-CTR",n.cipher.modes.ctr),a("3DES-ECB",n.cipher.modes.ecb),a("3DES-CBC",n.cipher.modes.cbc),a("3DES-CFB",n.cipher.modes.cfb),a("3DES-OFB",n.cipher.modes.ofb),a("3DES-CTR",n.cipher.modes.ctr);var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function h(e,t,r,n){var a,h,d=32===e.length?3:9;a=3===d?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var v=t[0],y=t[1];v^=(h=252645135&(v>>>4^y))<<4,v^=(h=65535&(v>>>16^(y^=h)))<<16,v^=h=858993459&((y^=h)>>>2^v),v^=h=16711935&((y^=h<<2)>>>8^v),v=(v^=(h=1431655765&(v>>>1^(y^=h<<8)))<<1)<<1|v>>>31,y=(y^=h)<<1|y>>>31;for(var b=0;b<d;b+=3){for(var g=a[b+1],m=a[b+2],w=a[b];w!=g;w+=m){var k=y^e[w],x=(y>>>4|y<<28)^e[w+1];h=v,v=y,y=h^(o[k>>>24&63]|u[k>>>16&63]|l[k>>>8&63]|p[63&k]|i[x>>>24&63]|s[x>>>16&63]|c[x>>>8&63]|f[63&x])}h=v,v=y,y=h}y=y>>>1|y<<31,y^=h=1431655765&((v=v>>>1|v<<31)>>>1^y),y^=(h=16711935&(y>>>8^(v^=h<<1)))<<8,y^=(h=858993459&(y>>>2^(v^=h)))<<2,y^=h=65535&((v^=h)>>>16^y),y^=h=252645135&((v^=h<<16)>>>4^y),v^=h<<4,r[0]=v,r[1]=y}function d(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),a=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,a.call(t,r)},t}},392:function(e){e.exports={options:{usePureJavaScript:!1}}},878:function(e,t,r){var n=r(392);r(29),r(3877),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,a=null,i={start:function(i,o){if(null!==i)if("string"===typeof i){if(!((i=i.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=n.md.algorithms[i].create()}else t=i;if(null===o)o=e;else{if("string"===typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var s=o;o=n.util.createBuffer();for(var u=0;u<s.length;++u)o.putByte(s[u])}var c=o.length();c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=n.util.createBuffer(),a=n.util.createBuffer(),c=o.length();for(u=0;u<c;++u){s=o.at(u);r.putByte(54^s),a.putByte(92^s)}if(c<t.blockLength)for(s=t.blockLength-c,u=0;u<s;++u)r.putByte(54),a.putByte(92);e=o,r=r.bytes(),a=a.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(a),t.update(e),t.digest()}};return i.digest=i.getMac,i}},3055:function(e,t,r){var n,a=r(392);e.exports=a.jsbn=a.jsbn||{};function i(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new i(null)}function s(e,t,r,n,a,i){for(var o=16383&t,s=t>>14;--i>=0;){var u=16383&this.data[e],c=this.data[e++]>>14,l=s*u+c*o;a=((u=o*u+((16383&l)<<14)+r.data[n]+a)>>28)+(l>>14)+s*c,r.data[n++]=268435455&u}return a}a.jsbn.BigInteger=i,"undefined"===typeof navigator?(i.prototype.am=s,n=28):"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(e,t,r,n,a,i){for(var o=32767&t,s=t>>15;--i>=0;){var u=32767&this.data[e],c=this.data[e++]>>15,l=s*u+c*o;a=((u=o*u+((32767&l)<<15)+r.data[n]+(1073741823&a))>>>30)+(l>>>15)+s*c+(a>>>30),r.data[n++]=1073741823&u}return a},n=30):"Netscape"!=navigator.appName?(i.prototype.am=function(e,t,r,n,a,i){for(;--i>=0;){var o=t*this.data[e++]+r.data[n]+a;a=Math.floor(o/67108864),r.data[n++]=67108863&o}return a},n=26):(i.prototype.am=s,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n;i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52;var u,c,l="0123456789abcdefghijklmnopqrstuvwxyz",f=new Array;for(u="0".charCodeAt(0),c=0;c<=9;++c)f[u++]=c;for(u="a".charCodeAt(0),c=10;c<36;++c)f[u++]=c;for(u="A".charCodeAt(0),c=10;c<36;++c)f[u++]=c;function p(e){return l.charAt(e)}function h(e,t){var r=f[e.charCodeAt(t)];return null==r?-1:r}function d(e){var t=o();return t.fromInt(e),t}function v(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function y(e){this.m=e}function b(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function g(e,t){return e&t}function m(e,t){return e|t}function w(e,t){return e^t}function k(e,t){return e&~t}function x(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function _(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function E(){}function S(e){return e}function A(e){this.r2=o(),this.q3=o(),i.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}y.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},y.prototype.revert=function(e){return e},y.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.convert=function(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t},b.prototype.revert=function(e){var t=o();return e.copyTo(t),this.reduce(t),t},b.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},b.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},b.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},i.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},i.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},i.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,a=!1,o=0;--n>=0;){var s=8==r?255&e[n]:h(e,n);s<0?"-"==e.charAt(n)&&(a=!0):(a=!1,0==o?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},i.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},i.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},i.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,a=this.DB-n,i=(1<<a)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>a|s,s=(this.data[r]&i)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},i.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,a=this.DB-n,i=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&i)<<a,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&i)<<a),t.t=this.t-r,t.clamp()}},i.prototype.subTo=function(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},i.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),a=r.t;for(t.t=a+n.t;--a>=0;)t.data[a]=0;for(a=0;a<n.t;++a)t.data[a+r.t]=r.am(0,n.data[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&i.ZERO.subTo(t,t)},i.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},i.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var a=this.abs();if(a.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var s=o(),u=this.s,c=e.s,l=this.DB-v(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),a.lShiftTo(l,r)):(n.copyTo(s),a.copyTo(r));var f=s.t,p=s.data[f-1];if(0!=p){var h=p*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/h,y=(1<<this.F1)/h,b=1<<this.F2,g=r.t,m=g-f,w=null==t?o():t;for(s.dlShiftTo(m,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),i.ONE.dlShiftTo(f,w),w.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--m>=0;){var k=r.data[--g]==p?this.DM:Math.floor(r.data[g]*d+(r.data[g-1]+b)*y);if((r.data[g]+=s.am(0,k,r,m,0,f))<k)for(s.dlShiftTo(m,w),r.subTo(w,r);r.data[g]<--k;)r.subTo(w,r)}null!=t&&(r.drShiftTo(f,t),u!=c&&i.ZERO.subTo(t,t)),r.t=f,r.clamp(),l>0&&r.rShiftTo(l,r),u<0&&i.ZERO.subTo(r,r)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},i.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},i.prototype.exp=function(e,t){if(e>4294967295||e<1)return i.ONE;var r=o(),n=o(),a=t.convert(this),s=v(e)-1;for(a.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,a,r);else{var u=r;r=n,n=u}return t.revert(r)},i.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,a=!1,i="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(r=this.data[o]>>s)>0&&(a=!0,i=p(r));o>=0;)s<t?(r=(this.data[o]&(1<<s)-1)<<t-s,r|=this.data[--o]>>(s+=this.DB-t)):(r=this.data[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),r>0&&(a=!0),a&&(i+=p(r));return a?i:"0"},i.prototype.negate=function(){var e=o();return i.ZERO.subTo(this,e),e},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+v(this.data[this.t-1]^this.s&this.DM)},i.prototype.mod=function(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(i.ZERO)>0&&e.subTo(t,t),t},i.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new y(t):new b(t),this.exp(e,r)},i.ZERO=d(0),i.ONE=d(1),E.prototype.convert=S,E.prototype.revert=S,E.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},E.prototype.sqrTo=function(e,t){e.squareTo(t)},A.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t},A.prototype.revert=function(e){return e},A.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},A.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},A.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var C=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],T=(1<<26)/C[C.length-1];i.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},i.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=d(r),a=o(),i=o(),s="";for(this.divRemTo(n,a,i);a.signum()>0;)s=(r+i.intValue()).toString(e).substr(1)+s,a.divRemTo(n,a,i);return i.intValue().toString(e)+s},i.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),a=!1,o=0,s=0,u=0;u<e.length;++u){var c=h(e,u);c<0?"-"==e.charAt(u)&&0==this.signum()&&(a=!0):(s=t*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),a&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(i.ONE.shiftLeft(e-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(i.ONE.shiftLeft(e-1),this);else{var n=new Array,a=7&e;n.length=1+(e>>3),t.nextBytes(n),a>0?n[0]&=(1<<a)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(e,t,r){var n,a,i=Math.min(e.t,this.t);for(n=0;n<i;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(a=e.s&this.DM,n=i;n<this.t;++n)r.data[n]=t(this.data[n],a);r.t=this.t}else{for(a=this.s&this.DM,n=i;n<e.t;++n)r.data[n]=t(a,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},i.prototype.changeBit=function(e,t){var r=i.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},i.prototype.addTo=function(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},i.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},i.prototype.multiplyLowerTo=function(e,t,r){var n,a=Math.min(this.t+e.t,t);for(r.s=0,r.t=a;a>0;)r.data[--a]=0;for(n=r.t-this.t;a<n;++a)r.data[a+this.t]=this.am(0,e.data[a],r,a,0,this.t);for(n=Math.min(e.t,t);a<n;++a)this.am(0,e.data[a],r,a,0,t-a);r.clamp()},i.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},i.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},i.prototype.millerRabin=function(e){var t=this.subtract(i.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,a=t.shiftRight(r),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},s=0;s<e;++s){do{n=new i(this.bitLength(),o)}while(n.compareTo(i.ONE)<=0||n.compareTo(t)>=0);var u=n.modPow(a,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(t)){for(var c=1;c++<r&&0!=u.compareTo(t);)if(0==(u=u.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0},i.prototype.clone=function(){var e=o();return this.copyTo(e),e},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},i.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,a=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[a++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(a>0||r!=this.s)&&(t[a++]=r);return t},i.prototype.equals=function(e){return 0==this.compareTo(e)},i.prototype.min=function(e){return this.compareTo(e)<0?this:e},i.prototype.max=function(e){return this.compareTo(e)>0?this:e},i.prototype.and=function(e){var t=o();return this.bitwiseTo(e,g,t),t},i.prototype.or=function(e){var t=o();return this.bitwiseTo(e,m,t),t},i.prototype.xor=function(e){var t=o();return this.bitwiseTo(e,w,t),t},i.prototype.andNot=function(e){var t=o();return this.bitwiseTo(e,k,t),t},i.prototype.not=function(){for(var e=o(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},i.prototype.shiftLeft=function(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},i.prototype.shiftRight=function(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},i.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+x(this.data[e]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=_(this.data[r]^t);return e},i.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},i.prototype.setBit=function(e){return this.changeBit(e,m)},i.prototype.clearBit=function(e){return this.changeBit(e,k)},i.prototype.flipBit=function(e){return this.changeBit(e,w)},i.prototype.add=function(e){var t=o();return this.addTo(e,t),t},i.prototype.subtract=function(e){var t=o();return this.subTo(e,t),t},i.prototype.multiply=function(e){var t=o();return this.multiplyTo(e,t),t},i.prototype.divide=function(e){var t=o();return this.divRemTo(e,t,null),t},i.prototype.remainder=function(e){var t=o();return this.divRemTo(e,null,t),t},i.prototype.divideAndRemainder=function(e){var t=o(),r=o();return this.divRemTo(e,t,r),new Array(t,r)},i.prototype.modPow=function(e,t){var r,n,a=e.bitLength(),i=d(1);if(a<=0)return i;r=a<18?1:a<48?3:a<144?4:a<768?5:6,n=a<8?new y(t):t.isEven()?new A(t):new b(t);var s=new Array,u=3,c=r-1,l=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=o();for(n.sqrTo(s[1],f);u<=l;)s[u]=o(),n.mulTo(f,s[u-2],s[u]),u+=2}var p,h,g=e.t-1,m=!0,w=o();for(a=v(e.data[g])-1;g>=0;){for(a>=c?p=e.data[g]>>a-c&l:(p=(e.data[g]&(1<<a+1)-1)<<c-a,g>0&&(p|=e.data[g-1]>>this.DB+a-c)),u=r;0==(1&p);)p>>=1,--u;if((a-=u)<0&&(a+=this.DB,--g),m)s[p].copyTo(i),m=!1;else{for(;u>1;)n.sqrTo(i,w),n.sqrTo(w,i),u-=2;u>0?n.sqrTo(i,w):(h=i,i=w,w=h),n.mulTo(w,s[p],i)}for(;g>=0&&0==(e.data[g]&1<<a);)n.sqrTo(i,w),h=i,i=w,w=h,--a<0&&(a=this.DB-1,--g)}return n.revert(i)},i.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return i.ZERO;for(var r=e.clone(),n=this.clone(),a=d(1),o=d(0),s=d(0),u=d(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),t&&a.subTo(s,a),o.subTo(u,o)):(n.subTo(r,n),t&&s.subTo(a,s),u.subTo(o,u))}return 0!=n.compareTo(i.ONE)?i.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u},i.prototype.pow=function(e){return this.exp(e,new E)},i.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var a=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(a<i&&(i=a),i>0&&(t.rShiftTo(i,t),r.rShiftTo(i,r));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r},i.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=C[C.length-1]){for(t=0;t<C.length;++t)if(r.data[0]==C[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<C.length;){for(var n=C[t],a=t+1;a<C.length&&n<T;)n*=C[a++];for(n=r.modInt(n);t<a;)if(n%C[t++]==0)return!1}return r.millerRabin(e)}},29:function(e,t,r){var n=r(392);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},1746:function(e,t,r){var n=r(392);r(7263),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},7263:function(e,t,r){var n=r(392);r(3877),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var a=new n.util.ByteBuffer,i=Math.ceil(r/e.digestLength),o=0;o<i;o++){var s=new n.util.ByteBuffer;s.putInt32(o),e.start(),e.update(t+s.getBytes()),a.putBuffer(e.digest())}return a.truncate(a.length()-r),a.getBytes()}}}},2886:function(e,t,r){var n=r(392);n.pki=n.pki||{};var a=e.exports=n.pki.oids=n.oids=n.oids||{};function i(e,t){a[e]=t,a[t]=e}function o(e,t){a[e]=t}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("1.3.14.3.2.29","sha1WithRSASignature"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("2.16.840.1.101.3.4.2.4","sha224"),i("2.16.840.1.101.3.4.2.5","sha512-224"),i("2.16.840.1.101.3.4.2.6","sha512-256"),i("1.2.840.113549.2.2","md2"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.4","surname"),i("2.5.4.5","serialNumber"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.12","title"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("2.5.4.42","givenName"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")},9835:function(e,t,r){var n=r(392);if(r(8605),r(5049),r(1400),r(29),r(2886),r(6019),r(6193),r(3860),r(654),r(5493),r(3877),"undefined"===typeof a)var a=n.jsbn.BigInteger;var i=n.asn1,o=n.pki=n.pki||{};e.exports=o.pbe=n.pbe=n.pbe||{};var s=o.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};function f(e,t){return e.start().update(t).digest().getBytes()}function p(e){var t;if(e){if(!(t=o.oids[i.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return h(t)}function h(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}o.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var a,u,c,l=n.random.getBytesSync(r.saltSize),f=r.count,p=i.integerToDer(f);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var d,v,y;switch(r.algorithm){case"aes128":a=16,d=16,v=s["aes128-CBC"],y=n.aes.createEncryptionCipher;break;case"aes192":a=24,d=16,v=s["aes192-CBC"],y=n.aes.createEncryptionCipher;break;case"aes256":a=32,d=16,v=s["aes256-CBC"],y=n.aes.createEncryptionCipher;break;case"des":a=8,d=8,v=s.desCBC,y=n.des.createEncryptionCipher;break;default:throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x}var b="hmacWith"+r.prfAlgorithm.toUpperCase(),g=h(b),m=n.pkcs5.pbkdf2(t,l,f,a,g),w=n.random.getBytesSync(d);(_=y(m)).start(w),_.update(i.toDer(e)),_.finish(),c=_.output.getBytes();var k=function(e,t,r,a){var s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==a&&s.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids[a]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return s}(l,p,a,b);u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBKDF2).getBytes()),k]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(v).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,w)])])])}else{var x;if("3des"!==r.algorithm)throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x;a=24;var _,E=new n.util.ByteBuffer(l);m=o.pbe.generatePkcs12Key(t,E,1,f,a),w=o.pbe.generatePkcs12Key(t,E,2,f,a);(_=n.des.createEncryptionCipher(m)).start(w),_.update(i.toDer(e)),_.finish(),c=_.output.getBytes(),u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,p.getBytes())])])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[u,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c)])},o.decryptPrivateKeyInfo=function(e,t){var r=null,a={},s=[];if(!i.validate(e,u,a,s)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=s,c}var l=i.derToOid(a.encryptionOid),f=o.pbe.getCipher(l,a.encryptionParams,t),p=n.util.createBuffer(a.encryptedData);return f.update(p),f.finish()&&(r=i.fromDer(f.output)),r},o.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return i.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var a=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return a=o.encryptPrivateKeyInfo(a,t,r),o.encryptedPrivateKeyToPem(a)}var s,u,c,l;switch(r.algorithm){case"aes128":s="AES-128-CBC",c=16,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",c=24,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",c=32,u=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",c=24,u=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;case"des":s="DES-CBC",c=8,u=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var p=l(n.pbe.opensslDeriveBytes(t,u.substr(0,8),c));p.start(u),p.update(i.toDer(o.privateKeyToAsn1(e))),p.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:n.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return n.pem.encode(h)},o.decryptRsaPrivateKey=function(e,t){var r=null,a=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==a.type&&"PRIVATE KEY"!==a.type&&"RSA PRIVATE KEY"!==a.type)throw(c=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=c,c;if(a.procType&&"ENCRYPTED"===a.procType.type){var s,u;switch(a.dekInfo.algorithm){case"DES-CBC":s=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,u=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":s=8,u=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":s=16,u=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var c;throw(c=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".')).algorithm=a.dekInfo.algorithm,c}var l=n.util.hexToBytes(a.dekInfo.parameters),f=u(n.pbe.opensslDeriveBytes(t,l.substr(0,8),s));if(f.start(l),f.update(n.util.createBuffer(a.body)),!f.finish())return r;r=f.output.getBytes()}else r=a.body;return null!==(r="ENCRYPTED PRIVATE KEY"===a.type?o.decryptPrivateKeyInfo(i.fromDer(r),t):i.fromDer(r))&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(e,t,r,a,i,o){var s,u;if("undefined"===typeof o||null===o){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');o=n.md.sha1.create()}var c=o.digestLength,l=o.blockLength,f=new n.util.ByteBuffer,p=new n.util.ByteBuffer;if(null!==e&&void 0!==e){for(u=0;u<e.length;u++)p.putInt16(e.charCodeAt(u));p.putInt16(0)}var h=p.length(),d=t.length(),v=new n.util.ByteBuffer;v.fillWithByte(r,l);var y=l*Math.ceil(d/l),b=new n.util.ByteBuffer;for(u=0;u<y;u++)b.putByte(t.at(u%d));var g=l*Math.ceil(h/l),m=new n.util.ByteBuffer;for(u=0;u<g;u++)m.putByte(p.at(u%h));var w=b;w.putBuffer(m);for(var k=Math.ceil(i/c),x=1;x<=k;x++){var _=new n.util.ByteBuffer;_.putBytes(v.bytes()),_.putBytes(w.bytes());for(var E=0;E<a;E++)o.start(),o.update(_.getBytes()),_=o.digest();var S=new n.util.ByteBuffer;for(u=0;u<l;u++)S.putByte(_.at(u%c));var A=Math.ceil(d/l)+Math.ceil(h/l),C=new n.util.ByteBuffer;for(s=0;s<A;s++){var T=new n.util.ByteBuffer(w.getBytes(l)),R=511;for(u=S.length()-1;u>=0;u--)R>>=8,R+=S.at(u)+T.at(u),T.setAt(u,255&R);C.putBuffer(T)}w=C,f.putBuffer(_)}return f.truncate(f.length()-i),f},o.pbe.getCipher=function(e,t,r){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},o.pbe.getCipherForPBES2=function(e,t,r){var a,s={},u=[];if(!i.validate(t,c,s,u))throw(a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,a;if((e=i.derToOid(s.kdfOid))!==o.oids.pkcs5PBKDF2)throw(a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,a.supportedOids=["pkcs5PBKDF2"],a;if((e=i.derToOid(s.encOid))!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids.desCBC)throw(a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a;var l,f,h=s.kdfSalt,d=n.util.createBuffer(s.kdfIterationCount);switch(d=d.getInt(d.length()<<3),o.oids[e]){case"aes128-CBC":l=16,f=n.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,f=n.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,f=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,f=n.des.createDecryptionCipher;break;case"desCBC":l=8,f=n.des.createDecryptionCipher}var v=p(s.prfOid),y=n.pkcs5.pbkdf2(r,h,d,l,v),b=s.encIv,g=f(y);return g.start(b),g},o.pbe.getCipherForPKCS12PBE=function(e,t,r){var a={},s=[];if(!i.validate(t,l,a,s))throw(v=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,v;var u,c,f,h=n.util.createBuffer(a.salt),d=n.util.createBuffer(a.iterations);switch(d=d.getInt(d.length()<<3),e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=n.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var v;throw(v=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,v}var y=p(a.prfOid),b=o.pbe.generatePkcs12Key(r,h,1,d,u,y);return y.start(),f(b,o.pbe.generatePkcs12Key(r,h,2,d,c,y))},o.pbe.opensslDeriveBytes=function(e,t,r,a){if("undefined"===typeof a||null===a){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');a=n.md.md5.create()}null===t&&(t="");for(var i=[f(a,e+t)],o=16,s=1;o<r;++s,o+=16)i.push(f(a,i[s-1]+e+t));return i.join("").substr(0,r)}},6019:function(e,t,r){var n=r(392);r(878),r(29),r(3877);var a,i=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(a=r(5819)),e.exports=n.pbkdf2=i.pbkdf2=function(e,t,r,i,o,s){if("function"===typeof o&&(s=o,o=null),n.util.isNodejs&&!n.options.usePureJavaScript&&a.pbkdf2&&(null===o||"object"!==typeof o)&&(a.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!==typeof o&&(o="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?4===a.pbkdf2Sync.length?a.pbkdf2(e,t,r,i,(function(e,t){if(e)return s(e);s(null,t.toString("binary"))})):a.pbkdf2(e,t,r,i,o,(function(e,t){if(e)return s(e);s(null,t.toString("binary"))})):4===a.pbkdf2Sync.length?a.pbkdf2Sync(e,t,r,i).toString("binary"):a.pbkdf2Sync(e,t,r,i,o).toString("binary");if("undefined"!==typeof o&&null!==o||(o="sha1"),"string"===typeof o){if(!(o in n.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=n.md[o].create()}var u=o.digestLength;if(i>4294967295*u){var c=new Error("Derived key is too long.");if(s)return s(c);throw c}var l=Math.ceil(i/u),f=i-(l-1)*u,p=n.hmac.create();p.start(o,e);var h,d,v,y="";if(!s){for(var b=1;b<=l;++b){p.start(null,null),p.update(t),p.update(n.util.int32ToBytes(b)),h=v=p.digest().getBytes();for(var g=2;g<=r;++g)p.start(null,null),p.update(v),d=p.digest().getBytes(),h=n.util.xorBytes(h,d,u),v=d;y+=b<l?h:h.substr(0,f)}return y}b=1;function m(){if(b>l)return s(null,y);p.start(null,null),p.update(t),p.update(n.util.int32ToBytes(b)),h=v=p.digest().getBytes(),g=2,w()}function w(){if(g<=r)return p.start(null,null),p.update(v),d=p.digest().getBytes(),h=n.util.xorBytes(h,d,u),v=d,++g,n.util.setImmediate(w);y+=b<l?h:h.substr(0,f),++b,m()}m()}},6193:function(e,t,r){var n=r(392);r(3877);var a=e.exports=n.pem=n.pem||{};function i(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},a=0;a<e.values.length;++a)r.push(e.values[a].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var i=0,o=-1;for(a=0;a<t.length;++a,++i)if(i>65&&-1!==o){var s=t[o];","===s?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+s+t.substr(o+1),i=a-o-1,o=-1,++a}else" "!==t[a]&&"\t"!==t[a]&&","!==t[a]||(o=a);return t}function o(e){return e.replace(/^\s+/,"")}a.encode=function(e,t){t=t||{};var r,a="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(a+=i(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(a+=i(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),a+=i(r)),e.headers)for(var o=0;o<e.headers.length;++o)a+=i(e.headers[o]);return e.procType&&(a+="\r\n"),a+=n.util.encode64(e.body,t.maxline||64)+"\r\n",a+="-----END "+e.type+"-----\r\n"},a.decode=function(e){for(var t,r=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;t=a.exec(e);){var u=t[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var c={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(c),t[2]){for(var l=t[2].split(s),f=0;t&&f<l.length;){for(var p=l[f].replace(/\s+$/,""),h=f+1;h<l.length;++h){var d=l[h];if(!/\s/.test(d[0]))break;p+=d,f=h}if(t=p.match(i)){for(var v={name:t[1],values:[]},y=t[2].split(","),b=0;b<y.length;++b)v.values.push(o(y[b]));if(c.procType)if(c.contentDomain||"Content-Domain"!==v.name)if(c.dekInfo||"DEK-Info"!==v.name)c.headers.push(v);else{if(0===v.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:y[0],parameters:y[1]||null}}else c.contentDomain=y[0]||"";else{if("Proc-Type"!==v.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==v.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:y[0],type:y[1]}}}++f}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},2627:function(e,t,r){var n=r(392);r(3877),r(3860),r(928);var a=e.exports=n.pkcs1=n.pkcs1||{};function i(e,t,r){r||(r=n.md.sha1.create());for(var a="",i=Math.ceil(t/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(e+s),a+=r.digest().getBytes()}return a.substring(0,t)}a.encode_rsa_oaep=function(e,t,r){var a,o,s,u;"string"===typeof r?(a=r,o=arguments[3]||void 0,s=arguments[4]||void 0):r&&(a=r.label||void 0,o=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),s?s.start():s=n.md.sha1.create(),u||(u=s);var c=Math.ceil(e.n.bitLength()/8),l=c-2*s.digestLength-2;if(t.length>l)throw(y=new Error("RSAES-OAEP input message length is too long.")).length=t.length,y.maxLength=l,y;a||(a=""),s.update(a,"raw");for(var f=s.digest(),p="",h=l-t.length,d=0;d<h;d++)p+="\0";var v=f.getBytes()+p+"\x01"+t;if(o){if(o.length!==s.digestLength){var y;throw(y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,y.digestLength=s.digestLength,y}}else o=n.random.getBytes(s.digestLength);var b=i(o,c-s.digestLength-1,u),g=n.util.xorBytes(v,b,v.length),m=i(g,s.digestLength,u);return"\0"+n.util.xorBytes(o,m,o.length)+g},a.decode_rsa_oaep=function(e,t,r){var a,o,s;"string"===typeof r?(a=r,o=arguments[3]||void 0):r&&(a=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var u=Math.ceil(e.n.bitLength()/8);if(t.length!==u)throw(b=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,b.expectedLength=u,b;if(void 0===o?o=n.md.sha1.create():o.start(),s||(s=o),u<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var c=o.digest().getBytes(),l=t.charAt(0),f=t.substring(1,o.digestLength+1),p=t.substring(1+o.digestLength),h=i(p,o.digestLength,s),d=i(n.util.xorBytes(f,h,f.length),u-o.digestLength-1,s),v=n.util.xorBytes(p,d,p.length),y=v.substring(0,o.digestLength),b="\0"!==l,g=0;g<o.digestLength;++g)b|=c.charAt(g)!==y.charAt(g);for(var m=1,w=o.digestLength,k=o.digestLength;k<v.length;k++){var x=v.charCodeAt(k);b|=x&(m?65534:0),w+=m&=1&x^1}if(b||1!==v.charCodeAt(w))throw new Error("Invalid RSAES-OAEP padding.");return v.substring(w+1)}},4660:function(e,t,r){var n=r(392);r(8605),r(5049),r(1400),r(2886),r(6193),r(4922),r(3860),r(3877),r(3391);var a=n.asn1,i=e.exports=n.pkcs7=n.pkcs7||{};function o(e){var t={},r=[];if(!a.validate(e,i.asn1.recipientInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=r,o}return{version:t.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(t.issuer),serialNumber:n.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:a.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function s(e){for(var t,r=[],i=0;i<e.length;++i)r.push((t=e[i],a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(t.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.encryptedContent.algorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function u(e){var t=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.digestAlgorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureAlgorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<e.unauthenticatedAttributes.length;++i){var o=e.unauthenticatedAttributes[i];r.values.push(c(o))}t.value.push(r)}return t}function c(e){var t;if(e.type===n.pki.oids.contentType)t=a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.value).getBytes());else if(e.type===n.pki.oids.messageDigest)t=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"===typeof o){var s=Date.parse(o);o=isNaN(s)?13===o.length?a.utcTimeToDate(o):a.generalizedTimeToDate(o):new Date(s)}t=o>=r&&o<i?a.create(a.Class.UNIVERSAL,a.Type.UTCTIME,!1,a.dateToUtcTime(o)):a.create(a.Class.UNIVERSAL,a.Type.GENERALIZEDTIME,!1,a.dateToGeneralizedTime(o))}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[t])])}function l(e,t,r){var i={};if(!a.validate(t,r,i,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(a.derToOid(i.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var s="";if(n.util.isArray(i.encryptedContent))for(var u=0;u<i.encryptedContent.length;++u){if(i.encryptedContent[u].type!==a.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=i.encryptedContent[u].value}else s=i.encryptedContent;e.encryptedContent={algorithm:a.derToOid(i.encAlgorithm),parameter:n.util.createBuffer(i.encParameter.value),content:n.util.createBuffer(s)}}if(i.content){s="";if(n.util.isArray(i.content))for(u=0;u<i.content.length;++u){if(i.content[u].type!==a.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=i.content[u].value}else s=i.content;e.content=n.util.createBuffer(s)}return e.version=i.version.charCodeAt(0),e.rawCapture=i,i}function f(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:t=n.aes.createDecryptionCipher(e.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:t=n.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}i.messageFromPem=function(e){var t=n.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=a.fromDer(t.body);return i.messageFromAsn1(o)},i.messageToPem=function(e,t){var r={type:"PKCS7",body:a.toDer(e.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:t})},i.messageFromAsn1=function(e){var t={},r=[];if(!a.validate(e,i.asn1.contentInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=r,o}var s,u=a.derToOid(t.contentType);switch(u){case n.pki.oids.envelopedData:s=i.createEnvelopedData();break;case n.pki.oids.encryptedData:s=i.createEncryptedData();break;case n.pki.oids.signedData:s=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s},i.createSignedData=function(){var e=null;return e={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(l(e,t,i.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,a=0;a<r.length;++a)e.certificates.push(n.pki.certificateFromAsn1(r[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(n.pki.certificateToAsn1(e.certificates[r]));var i=[],o=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&o.value[0].value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,t)),i.length>0&&o.value[0].value.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,i)),o.value[0].value.push(a.create(a.Class.UNIVERSAL,a.Type.SET,!0,e.signerInfos)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var r=t.issuer,a=t.serialNumber;if(t.certificate){var i=t.certificate;"string"===typeof i&&(i=n.pki.certificateFromPem(i)),r=i.issuer.attributes,a=i.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof o&&(o=n.pki.privateKeyFromPem(o));var s=t.digestAlgorithm||n.pki.oids.sha1;switch(s){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var u=t.authenticatedAttributes||[];if(u.length>0){for(var c=!1,l=!1,f=0;f<u.length;++f){var p=u[f];if(c||p.type!==n.pki.oids.contentType){if(l||p.type!==n.pki.oids.messageDigest);else if(l=!0,c)break}else if(c=!0,l)break}if(!c||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:r,serialNumber:a,digestAlgorithm:s,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(t){var r;(t=t||{},"object"!==typeof e.content||null===e.contentInfo)&&(e.contentInfo=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(n.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof n.util.ByteBuffer?r=e.content.bytes():"string"===typeof e.content&&(r=n.util.encodeUtf8(e.content)),t.detached?e.detachedContent=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r)]))));0!==e.signers.length&&function(t){var r;r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=a.derToOid(e.contentInfo.value[0].value),o=a.toDer(r);for(var s in o.getByte(),a.getBerValueLength(o),o=o.getBytes(),t)t[s].start().update(o);for(var l=new Date,f=0;f<e.signers.length;++f){var p=e.signers[f];if(0===p.authenticatedAttributes.length){if(i!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[]),d=0;d<p.authenticatedAttributes.length;++d){var v=p.authenticatedAttributes[d];v.type===n.pki.oids.messageDigest?v.value=t[p.digestAlgorithm].digest():v.type===n.pki.oids.signingTime&&(v.value||(v.value=l)),h.value.push(c(v)),p.authenticatedAttributesAsn1.value.push(c(v))}o=a.toDer(h).getBytes(),p.md.start().update(o)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(u(e[r]));return t}(e.signers)}(function(){for(var t={},r=0;r<e.signers.length;++r){var i=e.signers[r];(o=i.digestAlgorithm)in t||(t[o]=n.md[n.pki.oids[o]].create()),0===i.authenticatedAttributes.length?i.md=t[o]:i.md=n.md[n.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},i.createEncryptedData=function(){var e=null;return e={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){l(e,t,i.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),f(e)}}},i.createEnvelopedData=function(){var e=null;return e={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=l(e,t,i.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}(r.recipientInfos.value)},toAsn1:function(){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,s(e.recipients)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,(t=e.encryptedContent,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(n.pki.oids.data).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.algorithm).getBytes()),t.parameter?a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var a=e.recipients[n],i=a.issuer;if(a.serialNumber===t.serialNumber&&i.length===r.length){for(var o=!0,s=0;s<r.length;++s)if(i[s].type!==r[s].type||i[s].value!==r[s].value){o=!1;break}if(o)return a}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var a=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=n.util.createBuffer(a);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}f(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var a,i,o;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:a=16,i=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:a=24,i=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:a=32,i=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:a=24,i=8,o=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=n.util.createBuffer(n.random.getBytes(a));else if(t.length()!=a)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+a+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(i));var s=o(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var u=0;u<e.recipients.length;++u){var c=e.recipients[u];if(void 0===c.encryptedContent.content){if(c.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm);c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}}}},4922:function(e,t,r){var n=r(392);r(5049),r(3877);var a=n.asn1,i=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=i;var o={name:"ContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=o;var s={name:"EncryptedContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},i.encryptedDataValidator={name:"EncryptedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var u={name:"SignerInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},5132:function(e,t,r){var n=r(392);r(3877),r(3055),r(3860),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,a=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,a){"function"===typeof t&&(a=t,t={});var i=(t=t||{}).algorithm||"PRIMEINC";"string"===typeof i&&(i={name:i}),i.options=i.options||{};var o=t.prng||n.random,u={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(e,t,a,i){if("workers"in a)return function(e,t,a,i){if("undefined"===typeof Worker)return s(e,t,a,i);var o=c(e,t),u=a.workers,l=a.workLoad||100,f=30*l/8,p=a.workerScript||"forge/prime.worker.js";if(-1===u)return n.util.estimateCores((function(e,t){e&&(t=2),u=t-1,h()}));function h(){u=Math.max(1,u);for(var n=[],a=0;a<u;++a)n[a]=new Worker(p);for(a=0;a<u;++a)n[a].addEventListener("message",h);var s=!1;function h(a){if(!s){0;var u=a.data;if(u.found){for(var p=0;p<n.length;++p)n[p].terminate();return s=!0,i(null,new r(u.prime,16))}o.bitLength()>e&&(o=c(e,t));var h=o.toString(16);a.target.postMessage({hex:h,workLoad:l}),o.dAddOffset(f,0)}}}h()}(e,t,a,i);return s(e,t,a,i)}(e,u,i.options,a);throw new Error("Invalid prime generation algorithm: "+i.name)}}function s(e,t,r,n){var a=c(e,t),i=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(i=r.millerRabinTests);var o=10;"maxBlockTime"in r&&(o=r.maxBlockTime),u(a,e,t,0,i,o,n)}function u(e,t,r,i,o,s,l){var f=+new Date;do{if(e.bitLength()>t&&(e=c(t,r)),e.isProbablePrime(o))return l(null,e);e.dAddOffset(a[i++%8],0)}while(s<0||+new Date-f<s);n.util.setImmediate((function(){u(e,t,r,i,o,s,l)}))}function c(e,t){var n=new r(e,t),a=e-1;return n.testBit(a)||n.bitwiseTo(r.ONE.shiftLeft(a),o,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()},6140:function(e,t,r){var n=r(392);r(3877);var a=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(a=r(5819)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,i=new Array(32),o=0;o<32;++o)i[o]=r.create();function s(){if(t.pools[0].messageLength>=32)return u();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),u()}function u(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r===0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var a=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(a),t.generated=0}function c(e){var t=null,r=n.util.globalScope,a=r.crypto||r.msCrypto;a&&a.getRandomValues&&(t=function(e){return a.getRandomValues(e)});var i=n.util.createBuffer();if(t)for(;i.length()<e;){var o=Math.max(1,Math.min(e-i.length(),65536)/4),s=new Uint32Array(Math.floor(o));try{t(s);for(var u=0;u<s.length;++u)i.putInt32(s[u])}catch(h){if(!("undefined"!==typeof QuotaExceededError&&h instanceof QuotaExceededError))throw h}}if(i.length()<e)for(var c,l,f,p=Math.floor(65536*Math.random());i.length()<e;){l=16807*(65535&p),l+=(32767&(c=16807*(p>>16)))<<16,p=4294967295&(l=(2147483647&(l+=c>>15))+(l>>31));for(u=0;u<3;++u)f=p>>>(u<<3),f^=Math.floor(256*Math.random()),i.putByte(255&f)}return i.getBytes(e)}return t.pools=i,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var a=t.plugin.cipher,i=t.plugin.increment,o=t.plugin.formatKey,s=t.plugin.formatSeed,c=n.util.createBuffer();t.key=null,function l(f){if(f)return r(f);if(c.length()>=e)return r(null,c.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return u(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),u(),e()}))}(l)}));var p=a(t.key,t.seed);t.generated+=p.length,c.putBytes(p),t.key=o(a(t.key,i(t.seed))),t.seed=s(a(t.key,t.seed)),n.util.setImmediate(l)}()},t.generateSync=function(e){var r=t.plugin.cipher,a=t.plugin.increment,i=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var u=n.util.createBuffer();u.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&s();var c=r(t.key,t.seed);t.generated+=c.length,u.putBytes(c),t.key=i(r(t.key,a(t.seed))),t.seed=o(r(t.key,t.seed))}return u.getBytes(e)},a?(t.seedFile=function(e,t){a.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return a.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,c(e))}catch(r){t(r)}},t.seedFileSync=c),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",a=0;a<r;a+=8)n+=String.fromCharCode(e>>a&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))}},t}},325:function(e,t,r){var n=r(392);r(3860),r(3877),(e.exports=n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,a=e.mgf,i=r.digestLength,o=e.salt||null;if("string"===typeof o&&(o=n.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||n.random,u={encode:function(e,u){var c,l,f=u-1,p=Math.ceil(f/8),h=e.digest().getBytes();if(p<i+t+2)throw new Error("Message is too long to encrypt.");l=null===o?s.getBytesSync(t):o.bytes();var d=new n.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(h),d.putBytes(l),r.start(),r.update(d.getBytes());var v=r.digest().getBytes(),y=new n.util.ByteBuffer;y.fillWithByte(0,p-t-i-2),y.putByte(1),y.putBytes(l);var b=y.getBytes(),g=p-i-1,m=a.generate(v,g),w="";for(c=0;c<g;c++)w+=String.fromCharCode(b.charCodeAt(c)^m.charCodeAt(c));var k=65280>>8*p-f&255;return(w=String.fromCharCode(w.charCodeAt(0)&~k)+w.substr(1))+v+String.fromCharCode(188)},verify:function(e,o,s){var u,c=s-1,l=Math.ceil(c/8);if(o=o.substr(-l),l<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var f=l-i-1,p=o.substr(0,f),h=o.substr(f,i),d=65280>>8*l-c&255;if(0!==(p.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var v=a.generate(h,f),y="";for(u=0;u<f;u++)y+=String.fromCharCode(p.charCodeAt(u)^v.charCodeAt(u));y=String.fromCharCode(y.charCodeAt(0)&~d)+y.substr(1);var b=l-i-t-2;for(u=0;u<b;u++)if(0!==y.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(b))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var g=y.substr(-t),m=new n.util.ByteBuffer;return m.fillWithByte(0,8),m.putBytes(e),m.putBytes(g),r.start(),r.update(m.getBytes()),h===r.digest().getBytes()}};return u}},3860:function(e,t,r){var n=r(392);r(8605),r(7404),r(6140),r(3877),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},a=new Array(4),i=n.util.createBuffer();function o(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,a,!1),i.putInt32(a[0]),i.putInt32(a[1]),i.putInt32(a[2]),i.putInt32(a[3]),i.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var s=o(),u=null,c=n.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(u=function(e){return l.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"===typeof window||window.document,s.collectInt(+new Date,32),"undefined"!==typeof navigator){var f="";for(var p in navigator)try{"string"==typeof navigator[p]&&(f+=navigator[p])}catch(h){}s.collect(f),f=null}t&&(t().mousemove((function(e){s.collectInt(e.clientX,16),s.collectInt(e.clientY,16)})),t().keypress((function(e){s.collectInt(e.charCode,8)})))}if(n.random)for(var p in s)n.random[p]=s[p];else n.random=s;n.random.createInstance=o,e.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)},654:function(e,t,r){var n=r(392);r(3877);var a=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],o=function(e,t){return e<<t&65535|(65535&e)>>16-t},s=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"===typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,i=e,o=e.length(),s=t,u=Math.ceil(s/8),c=255>>(7&s);for(r=o;r<128;r++)i.putByte(a[i.at(r-1)+i.at(r-o)&255]);for(i.setAt(128-u,a[i.at(128-u)&c]),r=127-u;r>=0;r--)i.setAt(r,a[i.at(r+1)^i.at(r+u)]);return i};var u=function(e,t,r){var a,u,c,l,f=!1,p=null,h=null,d=null,v=[];for(e=n.rc2.expandKey(e,t),c=0;c<64;c++)v.push(e.getInt16Le());r?(a=function(e){for(c=0;c<4;c++)e[c]+=v[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),e[c]=o(e[c],i[c]),l++},u=function(e){for(c=0;c<4;c++)e[c]+=v[63&e[(c+3)%4]]}):(a=function(e){for(c=3;c>=0;c--)e[c]=s(e[c],i[c]),e[c]-=v[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),l--},u=function(e){for(c=3;c>=0;c--)e[c]-=v[63&e[(c+3)%4]]});var y=function(e){var t=[];for(c=0;c<4;c++){var n=p.getInt16Le();null!==d&&(r?n^=d.getInt16Le():d.putInt16Le(n)),t.push(65535&n)}l=r?0:63;for(var a=0;a<e.length;a++)for(var i=0;i<e[a][0];i++)e[a][1](t);for(c=0;c<4;c++)null!==d&&(r?d.putInt16Le(t[c]):t[c]^=d.getInt16Le()),h.putInt16Le(t[c])},b=null;return b={start:function(e,t){e&&"string"===typeof e&&(e=n.util.createBuffer(e)),f=!1,p=n.util.createBuffer(),h=t||new n.util.createBuffer,d=e,b.output=h},update:function(e){for(f||p.putBuffer(e);p.length()>=8;)y([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,p,!r);else{var n=8===p.length()?8:8-p.length();p.fillWithByte(n,n)}if(t&&(f=!0,b.update()),!r&&(t=0===p.length()))if(e)t=e(8,h,!r);else{var a=h.length(),i=h.at(a-1);i>a?t=!1:h.truncate(i)}return t}}};n.rc2.startEncrypting=function(e,t,r){var a=n.rc2.createEncryptionCipher(e,128);return a.start(t,r),a},n.rc2.createEncryptionCipher=function(e,t){return u(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var a=n.rc2.createDecryptionCipher(e,128);return a.start(t,r),a},n.rc2.createDecryptionCipher=function(e,t){return u(e,t,!1)}},5493:function(e,t,r){var n=r(392);if(r(5049),r(3055),r(2886),r(2627),r(5132),r(3860),r(3877),"undefined"===typeof a)var a=n.jsbn.BigInteger;var i=n.util.isNodejs?r(5819):null,o=n.asn1,s=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var u=n.pki,c=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},p={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},h=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},v=function(e){var t;if(!(e.algorithm in u.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=u.oids[e.algorithm];var n=o.oidToDer(t).getBytes(),a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);i.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),i.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var s=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.digest().getBytes());return a.value.push(i),a.value.push(s),o.toDer(a).getBytes()},y=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var i;t.dP||(t.dP=t.d.mod(t.p.subtract(a.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(a.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{i=new a(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(i.compareTo(t.n)>=0||!i.gcd(t.n).equals(a.ONE));for(var o=(e=e.multiply(i.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);o.compareTo(s)<0;)o=o.add(t.p);var u=o.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return u=u.multiply(i.modInverse(t.n)).mod(t.n)};function b(e,t,r){var a=n.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=i-11,o}a.putByte(0),a.putByte(r);var s,u=i-3-e.length;if(0===r||1===r){s=0===r?0:255;for(var c=0;c<u;++c)a.putByte(s)}else for(;u>0;){var l=0,f=n.random.getBytes(u);for(c=0;c<u;++c)0===(s=f.charCodeAt(c))?++l:a.putByte(s);u=l}return a.putByte(0),a.putBytes(e),a}function g(e,t,r,a){var i=Math.ceil(t.n.bitLength()/8),o=n.util.createBuffer(e),s=o.getByte(),u=o.getByte();if(0!==s||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&"undefined"===typeof a)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=i-3-a;for(var l=0;l<c;++l)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++c}else if(2===u)for(c=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++c}if(0!==o.getByte()||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function m(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function w(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function k(e){return n.util.isNodejs&&"function"===typeof i[e]}function x(e){return"undefined"!==typeof s.globalScope&&"object"===typeof s.globalScope.crypto&&"object"===typeof s.globalScope.crypto.subtle&&"function"===typeof s.globalScope.crypto.subtle[e]}function _(e){return"undefined"!==typeof s.globalScope&&"object"===typeof s.globalScope.msCrypto&&"object"===typeof s.globalScope.msCrypto.subtle&&"function"===typeof s.globalScope.msCrypto.subtle[e]}function E(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r}u.rsa.encrypt=function(e,t,r){var i,o=r,s=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(o=2===r,i=b(e,t,r)):(i=n.util.createBuffer()).putBytes(e);for(var u=new a(i.toHex(),16),c=y(u,t,o).toString(16),l=n.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)l.putByte(0),--f;return l.putBytes(n.util.hexToBytes(c)),l.getBytes()},u.rsa.decrypt=function(e,t,r,i){var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=o,s}var u=new a(n.util.createBuffer(e).toHex(),16);if(u.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=y(u,t,r).toString(16),l=n.util.createBuffer(),f=o-Math.ceil(c.length/2);f>0;)l.putByte(0),--f;return l.putBytes(n.util.hexToBytes(c)),!1!==i?g(l.getBytes(),t,r):l.getBytes()},u.rsa.createKeyPairGenerationState=function(e,t,r){"string"===typeof e&&(e=parseInt(e,10)),e=e||2048;var i,o=(r=r||{}).prng||n.random,s={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(i={algorithm:u,state:0,bits:e,rng:s,eInt:t||65537,e:new a(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(i.eInt),i},u.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new a(null);r.fromInt(30);for(var n,i=0,o=function(e,t){return e|t},s=+new Date,l=0;null===e.keys&&(t<=0||l<t);){if(0===e.state){var f=null===e.p?e.pBits:e.qBits,p=f-1;0===e.pqState?(e.num=new a(f,e.rng),e.num.testBit(p)||e.num.bitwiseTo(a.ONE.shiftLeft(p),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>f?e.pqState=0:e.num.isProbablePrime(w(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(c[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(a.ONE).gcd(e.e).compareTo(a.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(a.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var h=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)}}l+=(n=+new Date)-s,s=n}return null!==e.keys},u.rsa.generateKeyPair=function(e,t,r,c){if(1===arguments.length?"object"===typeof e?(r=e,e=void 0):"function"===typeof e&&(c=e,e=void 0):2===arguments.length?"number"===typeof e?"function"===typeof t?(c=t,t=void 0):"number"!==typeof t&&(r=t,t=void 0):(r=e,c=t,e=void 0,t=void 0):3===arguments.length&&("number"===typeof t?"function"===typeof r&&(c=r,r=void 0):(c=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(c){if(k("generateKeyPair"))return i.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return c(e);c(null,{privateKey:u.privateKeyFromPem(r),publicKey:u.publicKeyFromPem(t)})}));if(x("generateKey")&&x("exportKey"))return s.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:E(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return s.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){c(e)})).then((function(e){if(e){var t=u.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));c(null,{privateKey:t,publicKey:u.setRsaPublicKey(t.n,t.e)})}}));if(_("generateKey")&&_("exportKey")){var l=s.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:E(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return l.oncomplete=function(e){var t=e.target.result,r=s.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=u.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));c(null,{privateKey:r,publicKey:u.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){c(e)}},void(l.onerror=function(e){c(e)})}}else if(k("generateKeyPairSync")){var f=i.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:u.privateKeyFromPem(f.privateKey),publicKey:u.publicKeyFromPem(f.publicKey)}}var p=u.rsa.createKeyPairGenerationState(e,t,r);if(!c)return u.rsa.stepKeyPairGenerationState(p,0),p.keys;!function(e,t,r){"function"===typeof t&&(r=t,t={});t=t||{};var i={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(i.prng=t.prng);function o(){s(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?c(t,e.q):void s(e.qBits,c))}))}function s(e,t){n.prime.generateProbablePrime(e,i,t)}function c(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var i=e.p;e.p=e.q,e.q=i}if(0!==e.p.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.p=null,void o();if(0!==e.q.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.q=null,void s(e.qBits,c);if(e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(a.ONE))return e.p=e.q=null,void o();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void s(e.qBits,c);var l=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}o()}(p,r,c)},u.setRsaPublicKey=u.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,a){if("string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return b(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,a)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"===typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return u.rsa.encrypt(i,r,!0)},verify:function(e,t,a,i){"string"===typeof a?a=a.toUpperCase():void 0===a&&(a="RSASSA-PKCS1-V1_5"),void 0===i&&(i={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in i||(i._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===a?a={verify:function(e,t){t=g(t,r,!0);var a=o.fromDer(t,{parseAllBytes:i._parseAllDigestBytes}),s={},u=[];if(!o.validate(a,d,s,u))throw(c=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,c;var c,l=o.derToOid(s.algorithmIdentifier);if(l!==n.oids.md2&&l!==n.oids.md5&&l!==n.oids.sha1&&l!==n.oids.sha224&&l!==n.oids.sha256&&l!==n.oids.sha384&&l!==n.oids.sha512&&l!==n.oids["sha512-224"]&&l!==n.oids["sha512-256"])throw(c=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=l,c;if((l===n.oids.md2||l===n.oids.md5)&&!("parameters"in s))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===s.digest}}:"NONE"!==a&&"NULL"!==a&&null!==a||(a={verify:function(e,t){return e===(t=g(t,r,!0))}});var s=u.rsa.decrypt(t,r,!0,!1);return a.verify(e,s,r.n.bitLength())}};return r},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(e,t,r,a,i,o,s,c){var l={n:e,e:t,d:r,p:a,q:i,dP:o,dQ:s,qInv:c,decrypt:function(e,t,r){"string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var a=u.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:g};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(a,l,!1)},sign:function(e,t){var r=!1;"string"===typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:v},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,l.n.bitLength());return u.rsa.encrypt(n,l,r)}};return l},u.wrapRsaPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(e).getBytes())])},u.privateKeyFromAsn1=function(e){var t,r,i,s,c,p,h,d,v={},y=[];if(o.validate(e,l,v,y)&&(e=o.fromDer(n.util.createBuffer(v.privateKey))),v={},y=[],!o.validate(e,f,v,y)){var b=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw b.errors=y,b}return t=n.util.createBuffer(v.privateKeyModulus).toHex(),r=n.util.createBuffer(v.privateKeyPublicExponent).toHex(),i=n.util.createBuffer(v.privateKeyPrivateExponent).toHex(),s=n.util.createBuffer(v.privateKeyPrime1).toHex(),c=n.util.createBuffer(v.privateKeyPrime2).toHex(),p=n.util.createBuffer(v.privateKeyExponent1).toHex(),h=n.util.createBuffer(v.privateKeyExponent2).toHex(),d=n.util.createBuffer(v.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new a(t,16),new a(r,16),new a(i,16),new a(s,16),new a(c,16),new a(p,16),new a(h,16),new a(d,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.qInv))])},u.publicKeyFromAsn1=function(e){var t={},r=[];if(o.validate(e,h,t,r)){var i,s=o.derToOid(t.publicKeyOid);if(s!==u.oids.rsaEncryption)throw(i=new Error("Cannot read public key. Unknown OID.")).oid=s,i;e=t.rsaPublicKey}if(r=[],!o.validate(e,p,t,r))throw(i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,i;var c=n.util.createBuffer(t.publicKeyModulus).toHex(),l=n.util.createBuffer(t.publicKeyExponent).toHex();return u.setRsaPublicKey(new a(c,16),new a(l,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(u.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(e)])])},u.publicKeyToRSAPublicKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,m(e.e))])}},928:function(e,t,r){var n=r(392);r(29),r(3877);var a=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=a,a.create=function(){o||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),o=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),a={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,i=0;i<r;++i)a.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},a}};return a.start(),a.update=function(i,o){"utf8"===o&&(i=n.util.encodeUtf8(i));var u=i.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=a.fullMessageLength.length-1;c>=0;--c)a.fullMessageLength[c]+=u[1],u[1]=u[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]=a.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(i),s(e,r,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var u,c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;o.putBytes(i.substr(0,a.blockLength-c));for(var l=8*a.fullMessageLength[0],f=0;f<a.fullMessageLength.length-1;++f)l+=(u=8*a.fullMessageLength[f+1])/4294967296>>>0,o.putInt32(l>>>0),l=u>>>0;o.putInt32(l);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};s(p,r,o);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h},a};var i=null,o=!1;function s(e,t,r){for(var n,a,i,o,s,u,c,l=r.length();l>=64;){for(a=e.h0,i=e.h1,o=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,n=(a<<5|a>>>27)+(s^i&(o^s))+u+1518500249+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(a<<5|a>>>27)+(s^i&(o^s))+u+1518500249+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(a<<5|a>>>27)+(i^o^s)+u+1859775393+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i^o^s)+u+1859775393+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i&o|s&(i^o))+u+2400959708+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(a<<5|a>>>27)+(i^o^s)+u+3395469782+n,u=s,s=o,o=(i<<30|i>>>2)>>>0,i=a,a=n;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,l-=64}}},7404:function(e,t,r){var n=r(392);r(29),r(3877);var a=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=a,a.create=function(){o||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,i=0;i<r;++i)a.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a}};return a.start(),a.update=function(i,o){"utf8"===o&&(i=n.util.encodeUtf8(i));var s=i.length;a.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var c=a.fullMessageLength.length-1;c>=0;--c)a.fullMessageLength[c]+=s[1],s[1]=s[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]=a.fullMessageLength[c]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),u(e,r,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var s,c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;o.putBytes(i.substr(0,a.blockLength-c));for(var l=8*a.fullMessageLength[0],f=0;f<a.fullMessageLength.length-1;++f)l+=(s=8*a.fullMessageLength[f+1])/4294967296>>>0,o.putInt32(l>>>0),l=s>>>0;o.putInt32(l);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};u(p,r,o);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h.putInt32(p.h5),h.putInt32(p.h6),h.putInt32(p.h7),h},a};var i=null,o=!1,s=null;function u(e,t,r){for(var n,a,i,o,u,c,l,f,p,h,d,v,y,b=r.length();b>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=((a=t[u-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[u]=n+t[u-7]+a+t[u-16]|0;for(c=e.h0,l=e.h1,f=e.h2,p=e.h3,h=e.h4,d=e.h5,v=e.h6,y=e.h7,u=0;u<64;++u)i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),o=c&l|f&(c^l),n=y+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(v^h&(d^v))+s[u]+t[u],y=v,v=d,d=h,h=p+n>>>0,p=f,f=l,l=c,c=n+(a=i+o)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+p|0,e.h4=e.h4+h|0,e.h5=e.h5+d|0,e.h6=e.h6+v|0,e.h7=e.h7+y|0,b-=64}}},4770:function(e,t,r){var n=r(392);r(29),r(3877);var a=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=a;var i=n.sha384=n.sha512.sha384=n.sha512.sha384||{};i.create=function(){return a.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=i,n.sha512.sha256=n.sha512.sha256||{create:function(){return a.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return a.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,a.create=function(e){if(s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(c={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0),"undefined"===typeof e&&(e="SHA-512"),!(e in c))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=c[e],r=null,a=n.util.createBuffer(),i=new Array(80),f=0;f<80;++f)i[f]=new Array(2);var p=64;switch(e){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var h={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];for(var e=h.messageLengthSize/4,i=0;i<e;++i)h.fullMessageLength.push(0);a=n.util.createBuffer(),r=new Array(t.length);for(i=0;i<t.length;++i)r[i]=t[i].slice(0);return h}};return h.start(),h.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var o=e.length;h.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var s=h.fullMessageLength.length-1;s>=0;--s)h.fullMessageLength[s]+=o[1],o[1]=o[0]+(h.fullMessageLength[s]/4294967296>>>0),h.fullMessageLength[s]=h.fullMessageLength[s]>>>0,o[0]=o[1]/4294967296>>>0;return a.putBytes(e),l(r,i,a),(a.read>2048||0===a.length())&&a.compact(),h},h.digest=function(){var t=n.util.createBuffer();t.putBytes(a.bytes());var s,u=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize&h.blockLength-1;t.putBytes(o.substr(0,h.blockLength-u));for(var c=8*h.fullMessageLength[0],f=0;f<h.fullMessageLength.length-1;++f)c+=(s=8*h.fullMessageLength[f+1])/4294967296>>>0,t.putInt32(c>>>0),c=s>>>0;t.putInt32(c);var p=new Array(r.length);for(f=0;f<r.length;++f)p[f]=r[f].slice(0);l(p,i,t);var d,v=n.util.createBuffer();d="SHA-512"===e?p.length:"SHA-384"===e?p.length-2:p.length-4;for(f=0;f<d;++f)v.putInt32(p[f][0]),f===d-1&&"SHA-512/224"===e||v.putInt32(p[f][1]);return v},h};var o=null,s=!1,u=null,c=null;function l(e,t,r){for(var n,a,i,o,s,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T,R,I,P,D,N,O,L,B,M=r.length();M>=128;){for(I=0;I<16;++I)t[I][0]=r.getInt32()>>>0,t[I][1]=r.getInt32()>>>0;for(;I<80;++I)n=(((P=(N=t[I-2])[0])>>>19|(D=N[1])<<13)^(D>>>29|P<<3)^P>>>6)>>>0,a=((P<<13|D>>>19)^(D<<3|P>>>29)^(P<<26|D>>>6))>>>0,i=(((P=(L=t[I-15])[0])>>>1|(D=L[1])<<31)^(P>>>8|D<<24)^P>>>7)>>>0,o=((P<<31|D>>>1)^(P<<24|D>>>8)^(P<<25|D>>>7))>>>0,O=t[I-7],B=t[I-16],D=a+O[1]+o+B[1],t[I][0]=n+O[0]+i+B[0]+(D/4294967296>>>0)>>>0,t[I][1]=D>>>0;for(d=e[0][0],v=e[0][1],y=e[1][0],b=e[1][1],g=e[2][0],m=e[2][1],w=e[3][0],k=e[3][1],x=e[4][0],_=e[4][1],E=e[5][0],S=e[5][1],A=e[6][0],C=e[6][1],T=e[7][0],R=e[7][1],I=0;I<80;++I)l=((x>>>14|_<<18)^(x>>>18|_<<14)^(_>>>9|x<<23))>>>0,f=(A^x&(E^A))>>>0,s=((d>>>28|v<<4)^(v>>>2|d<<30)^(v>>>7|d<<25))>>>0,c=((d<<4|v>>>28)^(v<<30|d>>>2)^(v<<25|d>>>7))>>>0,p=(d&y|g&(d^y))>>>0,h=(v&b|m&(v^b))>>>0,D=R+(((x<<18|_>>>14)^(x<<14|_>>>18)^(_<<23|x>>>9))>>>0)+((C^_&(S^C))>>>0)+u[I][1]+t[I][1],n=T+l+f+u[I][0]+t[I][0]+(D/4294967296>>>0)>>>0,a=D>>>0,i=s+p+((D=c+h)/4294967296>>>0)>>>0,o=D>>>0,T=A,R=C,A=E,C=S,E=x,S=_,x=w+n+((D=k+a)/4294967296>>>0)>>>0,_=D>>>0,w=g,k=m,g=y,m=b,y=d,b=v,d=n+i+((D=a+o)/4294967296>>>0)>>>0,v=D>>>0;D=e[0][1]+v,e[0][0]=e[0][0]+d+(D/4294967296>>>0)>>>0,e[0][1]=D>>>0,D=e[1][1]+b,e[1][0]=e[1][0]+y+(D/4294967296>>>0)>>>0,e[1][1]=D>>>0,D=e[2][1]+m,e[2][0]=e[2][0]+g+(D/4294967296>>>0)>>>0,e[2][1]=D>>>0,D=e[3][1]+k,e[3][0]=e[3][0]+w+(D/4294967296>>>0)>>>0,e[3][1]=D>>>0,D=e[4][1]+_,e[4][0]=e[4][0]+x+(D/4294967296>>>0)>>>0,e[4][1]=D>>>0,D=e[5][1]+S,e[5][0]=e[5][0]+E+(D/4294967296>>>0)>>>0,e[5][1]=D>>>0,D=e[6][1]+C,e[6][0]=e[6][0]+A+(D/4294967296>>>0)>>>0,e[6][1]=D>>>0,D=e[7][1]+R,e[7][0]=e[7][0]+T+(D/4294967296>>>0)>>>0,e[7][1]=D>>>0,M-=128}}},3877:function(e,t,r){var n=r(392),a=r(5754),i=e.exports=n.util=n.util||{};function o(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function s(e){if(this.data="",this.read=0,"string"===typeof e)this.data=e;else if(i.isArrayBuffer(e)||i.isArrayBufferView(e))if("undefined"!==typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof s||"object"===typeof e&&"string"===typeof e.data&&"number"===typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!==typeof process&&process.nextTick&&!process.browser)return i.nextTick=process.nextTick,void("function"===typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"===typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(e){return setImmediate(e)});if(i.setImmediate=function(e){setTimeout(e,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var e="forge.setImmediate",t=[];i.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!==typeof MutationObserver){var r=Date.now(),n=!0,a=document.createElement("div");t=[];new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(a,{attributes:!0});var o=i.setImmediate;i.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),o(e)):(t.push(e),1===t.length&&a.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}(),i.isNodejs="undefined"!==typeof process&&process.versions&&process.versions.node,i.globalScope=i.isNodejs?r.g:"undefined"===typeof self?window:self,i.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isArrayBuffer=function(e){return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer},i.isArrayBufferView=function(e){return e&&i.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},i.ByteBuffer=s,i.ByteStringBuffer=s;i.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},i.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},i.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},i.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(i.encodeUtf8(e))},i.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},i.ByteStringBuffer.prototype.putInt=function(e,t){o(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},i.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},i.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},i.ByteStringBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},i.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},i.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.ByteStringBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},i.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var e=i.createBuffer(this.data);return e.read=this.read,e},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=i.isArrayBuffer(e),n=i.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},i.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},i.DataBuffer.prototype.putBytes=function(e,t){if(i.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(i.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof i.DataBuffer||"object"===typeof e&&"number"===typeof e.read&&"number"===typeof e.write&&i.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof i.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"===typeof e){var a;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(e,a,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(e,a,this.write),this;if("utf8"===t&&(e=i.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(a),this;if("utf16"===t)return this.accommodate(2*e.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},i.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},i.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},i.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(e,t){o(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},i.DataBuffer.prototype.putSignedInt=function(e,t){return o(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},i.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},i.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},i.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},i.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},i.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},i.DataBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},i.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},i.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.DataBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},i.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},i.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return i.binary.raw.encode(t);if("hex"===e)return i.binary.hex.encode(t);if("base64"===e)return i.binary.base64.encode(t);if("utf8"===e)return i.text.utf8.decode(t);if("utf16"===e)return i.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},i.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=i.encodeUtf8(e)),new i.ByteBuffer(e)},i.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},i.xorBytes=function(e,t,r){for(var n="",a="",i="",o=0,s=0;r>0;--r,++o)a=e.charCodeAt(o)^t.charCodeAt(o),s>=10&&(n+=i,i="",s=0),i+=String.fromCharCode(a),++s;return n+=i},i.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},i.bytesToHex=function(e){return i.createBuffer(e).toHex()},i.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(e,t){for(var r,n,a,i="",o="",s=0;s<e.length;)r=e.charCodeAt(s++),n=e.charCodeAt(s++),a=e.charCodeAt(s++),i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),t&&i.length>t&&(o+=i.substr(0,t)+"\r\n",i=i.substr(t));return o+=i},i.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,a,i="",o=0;o<e.length;)t=c[e.charCodeAt(o++)-43],r=c[e.charCodeAt(o++)-43],n=c[e.charCodeAt(o++)-43],a=c[e.charCodeAt(o++)-43],i+=String.fromCharCode(t<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==a&&(i+=String.fromCharCode((3&n)<<6|a)));return i},i.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},i.decodeUtf8=function(e){return decodeURIComponent(escape(e))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},i.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},i.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var a=r=r||0,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var a=0,i=r=r||0;for(1&e.length&&(a=1,n[i++]=parseInt(e[0],16));a<e.length;a+=2)n[i++]=parseInt(e.substr(a,2),16);return t?i-r:n},i.binary.base64.encode=function(e,t){for(var r,n,a,i="",o="",s=0;s<e.byteLength;)r=e[s++],n=e[s++],a=e[s++],i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),t&&i.length>t&&(o+=i.substr(0,t)+"\r\n",i=i.substr(t));return o+=i},i.binary.base64.decode=function(e,t,r){var n,a,i,o,s=t;s||(s=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<e.length;)n=c[e.charCodeAt(u++)-43],a=c[e.charCodeAt(u++)-43],i=c[e.charCodeAt(u++)-43],o=c[e.charCodeAt(u++)-43],s[l++]=n<<2|a>>4,64!==i&&(s[l++]=(15&a)<<4|i>>2,64!==o&&(s[l++]=(3&i)<<6|o));return t?l-r:s.subarray(0,l)},i.binary.base58.encode=function(e,t){return i.binary.baseN.encode(e,l,t)},i.binary.base58.decode=function(e,t){return i.binary.baseN.decode(e,l,t)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(e,t,r){e=i.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var a=r=r||0,o=0;o<e.length;++o)n[a++]=e.charCodeAt(o);return t?a-r:n},i.text.utf8.decode=function(e){return i.decodeUtf8(String.fromCharCode.apply(null,e))},i.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var a=new Uint16Array(n.buffer),i=r=r||0,o=r,s=0;s<e.length;++s)a[o++]=e.charCodeAt(s),i+=2;return t?i-r:n},i.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},i.deflate=function(e,t,r){if(t=i.decode64(e.deflate(i.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},i.inflate=function(e,t,r){var n=e.inflate(i.encode64(t)).rval;return null===n?null:i.decode64(n)};var f=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=i.encode64(JSON.stringify(r)),n=e.setItem(t,r)),"undefined"!==typeof n&&!0!==n.rval){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}},p=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},h=function(e,t,r,n){var a=p(e,t);null===a&&(a={}),a[r]=n,f(e,t,a)},d=function(e,t,r){var n=p(e,t);return null!==n&&(n=r in n?n[r]:null),n},v=function(e,t,r){var n=p(e,t);if(null!==n&&r in n){delete n[r];var a=!0;for(var i in n){a=!1;break}a&&(n=null),f(e,t,n)}},y=function(e,t){f(e,t,null)},b=function(e,t,r){var n,a=null;"undefined"===typeof r&&(r=["web","flash"]);var i=!1,o=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");a=e.apply(this,t),i="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,a=e.apply(this,t),i=!0)}catch(u){o=u}if(i)break}if(!i)throw o;return a};i.setItem=function(e,t,r,n,a){b(h,arguments,a)},i.getItem=function(e,t,r,n){return b(d,arguments,n)},i.removeItem=function(e,t,r,n){b(v,arguments,n)},i.clearItems=function(e,t,r){b(y,arguments,r)},i.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},i.format=function(e){for(var t,r,n=/%./g,a=0,i=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&i.push(r),o=n.lastIndex;var s=t[0][1];switch(s){case"s":case"o":a<arguments.length?i.push(arguments[1+a++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(e.substring(o)),i.join("")},i.formatNumber=function(e,t,r,n){var a=e,i=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,s=void 0===n?".":n,u=a<0?"-":"",c=parseInt(a=Math.abs(+a||0).toFixed(i),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(i?o+Math.abs(a-c).toFixed(i).slice(2):"")},i.formatSize=function(e){return e=e>=1073741824?i.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?i.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?i.formatNumber(e/1024,0)+" KiB":i.formatNumber(e,0)+" bytes"},i.bytesFromIP=function(e){return-1!==e.indexOf(".")?i.bytesFromIPv4(e):-1!==e.indexOf(":")?i.bytesFromIPv6(e):null},i.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=i.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},i.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=i.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var o=i.hexToBytes(e[a]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(e){return 4===e.length?i.bytesToIPv4(e):16===e.length?i.bytesToIPv6(e):null},i.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},i.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,a=0;a<e.length;a+=2){for(var o=i.bytesToHex(e[a]+e[a+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=r[r.length-1],u=t.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}t.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),0===c.start&&t.unshift(""),7===c.end&&t.push(""))}return t.join(":")},i.estimateCores=function(e,t){if("function"===typeof e&&(t=e,e={}),e=e||{},"cores"in i&&!e.update)return t(null,i.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,t(null,i.cores);if("undefined"===typeof Worker)return i.cores=1,t(null,i.cores);if("undefined"===typeof Blob)return i.cores=2,t(null,i.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,a,o){if(0===a){var s=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return i.cores=Math.max(1,s),URL.revokeObjectURL(r),t(null,i.cores)}!function(e,t){for(var n=[],a=[],i=0;i<e;++i){var o=new Worker(r);o.addEventListener("message",(function(r){if(a.push(r.data),a.length===e){for(var i=0;i<e;++i)n[i].terminate();t(null,a)}})),n.push(o)}for(i=0;i<e;++i)n[i].postMessage(i)}(o,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var a=t[n],i=r[n]=[],o=0;o<e;++o)if(n!==o){var s=t[o];(a.st>s.st&&a.st<s.et||s.st>a.st&&s.st<a.et)&&i.push(o)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(o,r)),e(n,a-1,o)}))}([],5,16)}},3391:function(e,t,r){var n=r(392);r(8605),r(5049),r(1400),r(29),r(1746),r(2886),r(6193),r(325),r(5493),r(3877);var a=n.asn1,i=e.exports=n.pki=n.pki||{},o=i.oids,s={};s.CN=o.commonName,s.commonName="CN",s.C=o.countryName,s.countryName="C",s.L=o.localityName,s.localityName="L",s.ST=o.stateOrProvinceName,s.stateOrProvinceName="ST",s.O=o.organizationName,s.organizationName="O",s.OU=o.organizationalUnitName,s.organizationalUnitName="OU",s.E=o.emailAddress,s.emailAddress="E";var u=n.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:a.Class.UNIVERSAL,type:a.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:a.Class.UNIVERSAL,type:a.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:a.Class.UNIVERSAL,type:a.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:a.Class.UNIVERSAL,type:a.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:a.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:a.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:a.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:a.Class.UNIVERSAL,type:a.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:a.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:a.Class.UNIVERSAL,type:a.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},f={name:"CertificationRequestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},u,{name:"CertificationRequestInfo.attributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0}]}]}]},p={name:"CertificationRequest",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[f,{name:"CertificationRequest.signatureAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function h(e,t){"string"===typeof t&&(t={shortName:t});for(var r,n=null,a=0;null===n&&a<e.attributes.length;++a)r=e.attributes[a],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}i.RDNAttributesAsArray=function(e,t){for(var r,n,i,u=[],c=0;c<e.value.length;++c){r=e.value[c];for(var l=0;l<r.value.length;++l)i={},n=r.value[l],i.type=a.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in o&&(i.name=o[i.type],i.name in s&&(i.shortName=s[i.name])),t&&(t.update(i.type),t.update(i.value)),u.push(i)}return u},i.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],u=a.derToOid(n.value[0].value),c=n.value[1].value,l=0;l<c.length;++l){var f={};if(f.type=u,f.value=c[l].value,f.valueTagClass=c[l].type,f.type in o&&(f.name=o[f.type],f.name in s&&(f.shortName=s[f.name])),f.type===o.extensionRequest){f.extensions=[];for(var p=0;p<f.value.length;++p)f.extensions.push(i.certificateExtensionFromAsn1(f.value[p]))}t.push(f)}return t};var d=function(e,t,r){var n={};if(e!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var i={},s=[];if(!a.validate(t,l,i,s)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=s,u}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=a.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=a.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=a.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n},v=function(e){switch(o[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},y=function(e){var t,r=e.certificate;switch(r.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var a,i,s;if(void 0===(a=o[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[a])throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=a,s;if(void 0===(i=o[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[i])throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=i,s;if(i=n.mgf[i].create(n.md[a].create()),void 0===(a=o[r.signatureParameters.hash.algorithmOid])||void 0===n.md[a])throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=a,s;t=n.pss.create(n.md[a].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function b(e){for(var t,r,i=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),o=e.attributes,s=0;s<o.length;++s){var u=(t=o[s]).value,c=a.Type.PRINTABLESTRING;"valueTagClass"in t&&(c=t.valueTagClass)===a.Type.UTF8&&(u=n.util.encodeUtf8(u)),r=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.type).getBytes()),a.create(a.Class.UNIVERSAL,c,!1,u)])]),i.value.push(r)}return i}function g(e){for(var t,r=0;r<e.length;++r){if("undefined"===typeof(t=e[r]).name&&(t.type&&t.type in i.oids?t.name=i.oids[t.type]:t.shortName&&t.shortName in s&&(t.name=i.oids[s[t.shortName]])),"undefined"===typeof t.type){if(!t.name||!(t.name in i.oids))throw(u=new Error("Attribute type not specified.")).attribute=t,u;t.type=i.oids[t.name]}if("undefined"===typeof t.shortName&&t.name&&t.name in s&&(t.shortName=s[t.name]),t.type===o.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=a.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(i.certificateExtensionToAsn1(m(t.extensions[n])))}var u;if("undefined"===typeof t.value)throw(u=new Error("Attribute value not specified.")).attribute=t,u}}function m(e,t){if(t=t||{},"undefined"===typeof e.name&&e.id&&e.id in i.oids&&(e.name=i.oids[e.id]),"undefined"===typeof e.id){if(!e.name||!(e.name in i.oids))throw(k=new Error("Extension ID not specified.")).extension=e,k;e.id=i.oids[e.name]}if("undefined"!==typeof e.value)return e;if("keyUsage"===e.name){var r=0,s=0,u=0;e.digitalSignature&&(s|=128,r=7),e.nonRepudiation&&(s|=64,r=6),e.keyEncipherment&&(s|=32,r=5),e.dataEncipherment&&(s|=16,r=4),e.keyAgreement&&(s|=8,r=3),e.keyCertSign&&(s|=4,r=2),e.cRLSign&&(s|=2,r=1),e.encipherOnly&&(s|=1,r=0),e.decipherOnly&&(u|=128,r=7);var c=String.fromCharCode(r);0!==u?c+=String.fromCharCode(s)+String.fromCharCode(u):0!==s&&(c+=String.fromCharCode(s)),e.value=a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,c)}else if("basicConstraints"===e.name)e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(a.create(a.Class.UNIVERSAL,a.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);var l=e.value.value;for(var f in e)!0===e[f]&&(f in o?l.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o[f]).getBytes())):-1!==f.indexOf(".")&&l.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(f).getBytes())))}else if("nsCertType"===e.name){r=0,s=0;e.client&&(s|=128,r=7),e.server&&(s|=64,r=6),e.email&&(s|=32,r=5),e.objsign&&(s|=16,r=4),e.reserved&&(s|=8,r=3),e.sslCA&&(s|=4,r=2),e.emailCA&&(s|=2,r=1),e.objCA&&(s|=1,r=0);c=String.fromCharCode(r);0!==s&&(c+=String.fromCharCode(s)),e.value=a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,c)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);for(var p=0;p<e.altNames.length;++p){c=(g=e.altNames[p]).value;if(7===g.type&&g.ip){if(null===(c=n.util.bytesFromIP(g.ip)))throw(k=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,k}else 8===g.type&&(c=g.oid?a.oidToDer(a.oidToDer(g.oid)):a.oidToDer(c));e.value.value.push(a.create(a.Class.CONTEXT_SPECIFIC,g.type,!1,c))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=a.create(a.Class.UNIVERSAL,a.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var h=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=h.toHex(),e.value=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,h.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);l=e.value.value;if(e.keyIdentifier){var d=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;l.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!1,d))}if(e.authorityCertIssuer){var v=[a.create(a.Class.CONTEXT_SPECIFIC,4,!0,[b(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];l.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,v))}if(e.serialNumber){var y=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);l.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if("cRLDistributionPoints"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);l=e.value.value;var g,m=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),w=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<e.altNames.length;++p){c=(g=e.altNames[p]).value;if(7===g.type&&g.ip){if(null===(c=n.util.bytesFromIP(g.ip)))throw(k=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,k}else 8===g.type&&(c=g.oid?a.oidToDer(a.oidToDer(g.oid)):a.oidToDer(c));w.value.push(a.create(a.Class.CONTEXT_SPECIFIC,g.type,!1,c))}m.value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[w])),l.push(m)}var k;if("undefined"===typeof e.value)throw(k=new Error("Extension value not specified.")).extension=e,k;return e}function w(e,t){if(e===o["RSASSA-PSS"]){var r=[];return void 0!==t.hash.algorithmOid&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.hash.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.mgf.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.mgf.hash.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(t.saltLength).getBytes())])),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,r)}return a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")}function k(e){var t=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,i=0;i<r.length;++i){var o=r[i],s=o.value,u=a.Type.UTF8;"valueTagClass"in o&&(u=o.valueTagClass),u===a.Type.UTF8&&(s=n.util.encodeUtf8(s));var c=!1;"valueConstructed"in o&&(c=o.valueConstructed);var l=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o.type).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,u,c,s)])]);t.value.push(l)}return t}i.certificateFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=o.type,s}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=a.fromDer(o.body,r);return i.certificateFromAsn1(u,t)},i.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:a.toDer(i.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=a.fromDer(t.body);return i.publicKeyFromAsn1(o)},i.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:a.toDer(i.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:a.toDer(i.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.getPublicKeyFingerprint=function(e,t){var r,o=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=a.toDer(i.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=a.toDer(i.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}o.start(),o.update(r);var s=o.digest();if("hex"===t.encoding){var u=s.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return s},i.certificationRequestFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=o.type,s}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=a.fromDer(o.body,r);return i.certificationRequestFromAsn1(u,t)},i.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:a.toDer(i.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return h(e.issuer,t)},e.issuer.addField=function(t){g([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return h(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){g(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){g(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)m(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"===typeof t&&(t={name:t});for(var r,n=null,a=0;null===n&&a<e.extensions.length;++a)r=e.extensions[a],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var s=o[e.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=s,e.tbsCertificate=i.getTBSCertificate(e);var c=a.toDer(e.tbsCertificate);e.md.update(c.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,o=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=o.attributes,s.actualIssuer=n.attributes,s}var u=t.md;if(null===u){u=v({signatureOid:t.signatureOid,type:"certificate"});var c=t.tbsCertificate||i.getTBSCertificate(t),l=a.toDer(c);u.update(l.getBytes())}return null!==u&&(r=y({certificate:e,md:u,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,a=t.subject;if(n.hash&&a.hash)r=n.hash===a.hash;else if(n.attributes.length===a.attributes.length){var i,o;r=!0;for(var s=0;r&&s<n.attributes.length;++s)i=n.attributes[s],o=a.attributes[s],i.type===o.type&&i.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return i.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=o.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var a=e.extensions[r];if(a.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(a.subjectKeyIdentifier)===i}}return!1},e},i.certificateFromAsn1=function(e,t){var r={},o=[];if(!a.validate(e,c,r,o)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=o,s}if(a.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=n.asn1.derToOid(r.certSignatureOid),u.signatureParameters=d(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var f=[];if(void 0!==r.certValidity1UTCTime&&f.push(a.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&f.push(a.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&f.push(a.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&f.push(a.generalizedTimeToDate(r.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=f[0],u.validity.notAfter=f[1],u.tbsCertificate=r.tbsCertificate,t){u.md=v({signatureOid:u.signatureOid,type:"certificate"});var p=a.toDer(u.tbsCertificate);u.md.update(p.getBytes())}var y=n.md.sha1.create(),b=a.toDer(r.certIssuer);y.update(b.getBytes()),u.issuer.getField=function(e){return h(u.issuer,e)},u.issuer.addField=function(e){g([e]),u.issuer.attributes.push(e)},u.issuer.attributes=i.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=y.digest().toHex();var m=n.md.sha1.create(),w=a.toDer(r.certSubject);return m.update(w.getBytes()),u.subject.getField=function(e){return h(u.subject,e)},u.subject.addField=function(e){g([e]),u.subject.attributes.push(e)},u.subject.attributes=i.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=m.digest().toHex(),r.certExtensions?u.extensions=i.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},i.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],a=0;a<n.value.length;++a)t.push(i.certificateExtensionFromAsn1(n.value[a]));return t},i.certificateExtensionFromAsn1=function(e){var t={};if(t.id=a.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===a.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in o)if(t.name=o[t.id],"keyUsage"===t.name){var r=0,i=0;(u=a.fromDer(t.value)).value.length>1&&(r=u.value.charCodeAt(1),i=u.value.length>2?u.value.charCodeAt(2):0),t.digitalSignature=128===(128&r),t.nonRepudiation=64===(64&r),t.keyEncipherment=32===(32&r),t.dataEncipherment=16===(16&r),t.keyAgreement=8===(8&r),t.keyCertSign=4===(4&r),t.cRLSign=2===(2&r),t.encipherOnly=1===(1&r),t.decipherOnly=128===(128&i)}else if("basicConstraints"===t.name){(u=a.fromDer(t.value)).value.length>0&&u.value[0].type===a.Type.BOOLEAN?t.cA=0!==u.value[0].value.charCodeAt(0):t.cA=!1;var s=null;u.value.length>0&&u.value[0].type===a.Type.INTEGER?s=u.value[0].value:u.value.length>1&&(s=u.value[1].value),null!==s&&(t.pathLenConstraint=a.derToInteger(s))}else if("extKeyUsage"===t.name)for(var u=a.fromDer(t.value),c=0;c<u.value.length;++c){var l=a.derToOid(u.value[c].value);l in o?t[o[l]]=!0:t[l]=!0}else if("nsCertType"===t.name){r=0;(u=a.fromDer(t.value)).value.length>1&&(r=u.value.charCodeAt(1)),t.client=128===(128&r),t.server=64===(64&r),t.email=32===(32&r),t.objsign=16===(16&r),t.reserved=8===(8&r),t.sslCA=4===(4&r),t.emailCA=2===(2&r),t.objCA=1===(1&r)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var f;t.altNames=[];u=a.fromDer(t.value);for(var p=0;p<u.value.length;++p){var h={type:(f=u.value[p]).type,value:f.value};switch(t.altNames.push(h),f.type){case 1:case 2:case 6:break;case 7:h.ip=n.util.bytesToIP(f.value);break;case 8:h.oid=a.derToOid(f.value)}}}else if("subjectKeyIdentifier"===t.name){u=a.fromDer(t.value);t.subjectKeyIdentifier=n.util.bytesToHex(u.value)}return t},i.certificationRequestFromAsn1=function(e,t){var r={},o=[];if(!a.validate(e,p,r,o)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=o,s}if(a.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=d(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,t){u.md=v({signatureOid:u.signatureOid,type:"certification request"});var c=a.toDer(u.certificationRequestInfo);u.md.update(c.getBytes())}var l=n.md.sha1.create();return u.subject.getField=function(e){return h(u.subject,e)},u.subject.addField=function(e){g([e]),u.subject.attributes.push(e)},u.subject.attributes=i.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),u.subject.hash=l.digest().toHex(),u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(e){return h(u,e)},u.addAttribute=function(e){g([e]),u.attributes.push(e)},u.attributes=i.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},i.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return h(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return h(e,t)},e.addAttribute=function(t){g([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){g(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){g(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var s=o[e.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=s,e.certificationRequestInfo=i.getCertificationRequestInfo(e);var c=a.toDer(e.certificationRequestInfo);e.md.update(c.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=v({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||i.getCertificationRequestInfo(e),o=a.toDer(n);r.update(o.getBytes())}return null!==r&&(t=y({certificate:e,md:r,signature:e.signature})),t},e};var x=new Date("1950-01-01T00:00:00Z"),_=new Date("2050-01-01T00:00:00Z");function E(e){return e>=x&&e<_?a.create(a.Class.UNIVERSAL,a.Type.UTCTIME,!1,a.dateToUtcTime(e)):a.create(a.Class.UNIVERSAL,a.Type.GENERALIZEDTIME,!1,a.dateToGeneralizedTime(e))}i.getTBSCertificate=function(e){var t=E(e.validity.notBefore),r=E(e.validity.notAfter),o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes())]),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.siginfo.algorithmOid).getBytes()),w(e.siginfo.algorithmOid,e.siginfo.parameters)]),b(e.issuer),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,r]),b(e.subject),i.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!0,[a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(i.certificateExtensionsToAsn1(e.extensions)),o},i.getCertificationRequestInfo=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),b(e.subject),i.publicKeyToAsn1(e.publicKey),k(e)])},i.distinguishedNameToAsn1=function(e){return b(e)},i.certificateToAsn1=function(e){var t=e.tbsCertificate||i.getTBSCertificate(e);return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},i.certificateExtensionsToAsn1=function(e){var t=a.create(a.Class.CONTEXT_SPECIFIC,3,!0,[]),r=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(i.certificateExtensionToAsn1(e[n]));return t},i.certificateExtensionToAsn1=function(e){var t=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.id).getBytes())),e.critical&&t.value.push(a.create(a.Class.UNIVERSAL,a.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!==typeof e.value&&(r=a.toDer(r).getBytes()),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,r)),t},i.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||i.getCertificationRequestInfo(e);return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},i.createCaStore=function(e){var t={certs:{}};function r(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=i.RDNAttributesAsArray(b(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var o=a.toDer(i.certificateToAsn1(e)).getBytes(),s=0;s<t.length;++s){if(o===a.toDer(i.certificateToAsn1(t[s])).getBytes())return!0}return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var a=t.certs[r];if(n.util.isArray(a))for(var i=0;i<a.length;++i)e.push(a[i]);else e.push(a)}return e},t.removeCertificate=function(e){var s;if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))return null;var u=r(e.subject);if(!n.util.isArray(u))return s=t.certs[e.subject.hash],delete t.certs[e.subject.hash],s;for(var c=a.toDer(i.certificateToAsn1(e)).getBytes(),l=0;l<u.length;++l){c===a.toDer(i.certificateToAsn1(u[l])).getBytes()&&(s=u[l],u.splice(l,1))}return 0===u.length&&delete t.certs[e.subject.hash],s},e)for(var s=0;s<e.length;++s){var u=e[s];t.addCertificate(u)}return t},i.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},i.verifyCertificateChain=function(e,t,r){"function"===typeof r&&(r={verify:r}),r=r||{};var a=(t=t.slice(0)).slice(0),o=r.validityCheckDate;"undefined"===typeof o&&(o=new Date);var s=!0,u=null,c=0;do{var l=t.shift(),f=null,p=!1;if(o&&(o<l.validity.notBefore||o>l.validity.notAfter)&&(u={message:"Certificate is not valid yet or has expired.",error:i.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===u){if(null===(f=t[0]||e.getIssuer(l))&&l.isIssuer(l)&&(p=!0,f=l),f){var h=f;n.util.isArray(h)||(h=[h]);for(var d=!1;!d&&h.length>0;){f=h.shift();try{d=f.verify(l)}catch(x){}}d||(u={message:"Certificate signature is invalid.",error:i.certificateError.bad_certificate})}null!==u||f&&!p||e.hasCertificate(l)||(u={message:"Certificate is not trusted.",error:i.certificateError.unknown_ca})}if(null===u&&f&&!l.isIssuer(f)&&(u={message:"Certificate issuer is invalid.",error:i.certificateError.bad_certificate}),null===u)for(var v={keyUsage:!0,basicConstraints:!0},y=0;null===u&&y<l.extensions.length;++y){var b=l.extensions[y];b.critical&&!(b.name in v)&&(u={message:"Certificate has an unsupported critical extension.",error:i.certificateError.unsupported_certificate})}if(null===u&&(!s||0===t.length&&(!f||p))){var g=l.getExtension("basicConstraints"),m=l.getExtension("keyUsage");if(null!==m&&(m.keyCertSign&&null!==g||(u={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:i.certificateError.bad_certificate})),null!==u||null===g||g.cA||(u={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:i.certificateError.bad_certificate}),null===u&&null!==m&&"pathLenConstraint"in g)c-1>g.pathLenConstraint&&(u={message:"Certificate basicConstraints pathLenConstraint violated.",error:i.certificateError.bad_certificate})}var w=null===u||u.error,k=r.verify?r.verify(w,c,a):w;if(!0!==k)throw!0===w&&(u={message:"The application rejected the certificate.",error:i.certificateError.bad_certificate}),(k||0===k)&&("object"!==typeof k||n.util.isArray(k)?"string"===typeof k&&(u.error=k):(k.message&&(u.message=k.message),k.error&&(u.error=k.error))),u;u=null,s=!1,++c}while(t.length>0);return!0}},9879:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(5125),o=r(2673);e.exports=function(){"use strict";function e(){n(this,e),this._buffer=new i,this._waitingConsumers=new i}return a(e,[{key:"push",value:function(e){var t=o(),r=t.promise,n=t.resolve;return this._buffer.push({chunk:e,resolve:n}),this._consume(),r}},{key:"_consume",value:function(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){var e=this._waitingConsumers.shift(),t=this._buffer.shift();e.resolve(t.chunk),t.resolve()}}},{key:"shift",value:function(){var e=o(),t=e.promise,r=e.resolve;return this._waitingConsumers.push({resolve:r}),this._consume(),t}},{key:"isEmpty",value:function(){return this._buffer.isEmpty()}}]),e}()},2673:function(e){"use strict";e.exports=function(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}},3931:function(e,t,r){"use strict";e.exports=r(3794).default},3794:function(e,t,r){"use strict";var n=r(4704).default,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(7922),o=a(r(6730)),s=a(r(2795)),u=r(7201),c=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((function(e){return new i.Netmask(e)}));function l(e){return/^::$/.test(e)||/^::1$/.test(e)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}t.default=function(e){if((0,u.isValid)(e)){var t=(0,u.parse)(e);if("ipv4"===t.kind())return function(e){var t,r=n(c);try{for(r.s();!(t=r.n()).done;)if(t.value.contains(e))return!0}catch(a){r.e(a)}finally{r.f()}return!1}(t.toNormalizedString());if("ipv6"===t.kind())return l(e)}else if((0,s.default)(e)&&o.default.v6().test(e))return l(e)}},5368:function(e,t,r){"use strict";e.exports=r(8154)},886:function(e,t,r){"use strict";e.exports=r(4722)},1427:function(e){"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},7276:function(e,t,r){"use strict";var n=t,a=r(222),i=r(2440);function o(e,t,r,n){var i=!1;if(t.resolvedType)if(t.resolvedType instanceof a){e("switch(d%s){",n);for(var o=t.resolvedType.values,s=Object.keys(o),u=0;u<s.length;++u)o[s[u]]!==t.typeDefault||i||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),i=!0),e("case%j:",s[u])("case %i:",o[s[u]])("m%s=%j",n,o[s[u]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function s(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof a?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var s=t[n].resolve(),u=i.safeProp(s.name);s.map?(r("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),o(r,s,n,u+"[ks[i]]")("}")("}")):s.repeated?(r("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),o(r,s,n,u+"[i]")("}")("}")):(s.resolvedType instanceof a||r("if(d%s!=null){",u),o(r,s,n,u),s.resolvedType instanceof a||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],u=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?n:t[c].map?o:u).push(t[c]);if(n.length){for(r("if(o.arrays||o.defaults){"),c=0;c<n.length;++c)r("d%s=[]",i.safeProp(n[c].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),c=0;c<o.length;++c)r("d%s={}",i.safeProp(o[c].name));r("}")}if(u.length){for(r("if(o.defaults){"),c=0;c<u.length;++c){var l=u[c],f=i.safeProp(l.name);if(l.resolvedType instanceof a)r("d%s=o.enums===String?%j:%j",f,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var p="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",f,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",f,p)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",f,f)("}")}else r("d%s=%j",f,l.typeDefault)}r("}")}var h=!1;for(c=0;c<t.length;++c){l=t[c];var d=e._fieldsArray.indexOf(l);f=i.safeProp(l.name);l.map?(h||(h=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),s(r,l,d,f+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),s(r,l,d,f+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",f,l.name),s(r,l,d,f),l.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}},2715:function(e,t,r){"use strict";e.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var s=e._fieldsArray[r].resolve(),u=s.resolvedType instanceof n?"int32":s.type,c="m"+i.safeProp(s.name);t("case %i: {",s.id),s.map?(t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==a.defaults[s.keyType]?t("k=%j",a.defaults[s.keyType]):t("k=null"),void 0!==a.defaults[u]?t("value=%j",a.defaults[u]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",s.keyType)("case 2:"),void 0===a.basic[u]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",u),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==a.long[s.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',c):t("%s[k]=value",c)):s.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==a.packed[u]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,u)("}else"),void 0===a.basic[u]?t(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,r):t("%s.push(r.%s())",c,u)):void 0===a.basic[u]?t(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,r):t("%s=r.%s()",c,u),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var l=e._fieldsArray[r];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",o(l))}return t("return m")};var n=r(222),a=r(8517),i=r(2440);function o(e){return"missing required '"+e.name+"'"}},6886:function(e,t,r){"use strict";e.exports=function(e){for(var t,r=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),s=e.fieldsArray.slice().sort(i.compareFieldsById),u=0;u<s.length;++u){var c=s[u].resolve(),l=e._fieldsArray.indexOf(c),f=c.resolvedType instanceof n?"int32":c.type,p=a.basic[f];t="m"+i.safeProp(c.name),c.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|a.mapKey[c.keyType],c.keyType),void 0===p?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,f,t),r("}")("}")):c.repeated?(r("if(%s!=null&&%s.length){",t,t),c.packed&&void 0!==a.packed[f]?r("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",f,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===p?o(r,c,l,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(c.id<<3|p)>>>0,f,t)),r("}")):(c.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,c.name),void 0===p?o(r,c,l,t):r("w.uint32(%i).%s(%s)",(c.id<<3|p)>>>0,f,t))}return r("return w")};var n=r(222),a=r(8517),i=r(2440);function o(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},222:function(e,t,r){"use strict";e.exports=o;var n=r(5154);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var a=r(3452),i=r(2440);function o(e,t,r,a,i,o){if(n.call(this,e,r),t&&"object"!==typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=a,this.comments=i||{},this.valuesOptions=o,this.reserved=void 0,t)for(var s=Object.keys(t),u=0;u<s.length;++u)"number"===typeof t[s[u]]&&(this.valuesById[this.values[s[u]]=t[s[u]]]=s[u])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,r,n){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},o.prototype.isReservedId=function(e){return a.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return a.isReservedName(this.reserved,e)}},6734:function(e,t,r){"use strict";e.exports=c;var n=r(5154);((c.prototype=Object.create(n.prototype)).constructor=c).className="Field";var a,i=r(222),o=r(8517),s=r(2440),u=/^required|optional|repeated$/;function c(e,t,r,a,i,c,l){if(s.isObject(a)?(l=i,c=a,a=i=void 0):s.isObject(i)&&(l=c,c=i,i=void 0),n.call(this,e,c),!s.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!s.isString(r))throw TypeError("type must be a string");if(void 0!==a&&!u.test(a=a.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!s.isString(i))throw TypeError("extend must be a string");"proto3_optional"===a&&(a="optional"),this.rule=a&&"optional"!==a?a:void 0,this.type=r,this.id=t,this.extend=i||void 0,this.required="required"===a,this.optional=!this.required,this.repeated="repeated"===a,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!s.Long&&void 0!==o.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}c.fromJSON=function(e,t){return new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),c.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},c.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof a?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"===typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=s.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"===typeof this.typeDefault){var e;s.base64.test(this.typeDefault)?s.base64.decode(this.typeDefault,e=s.newBuffer(s.base64.length(this.typeDefault)),0):s.utf8.write(this.typeDefault,e=s.newBuffer(s.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=s.emptyObject:this.repeated?this.defaultValue=s.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof a&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},c.d=function(e,t,r,n){return"function"===typeof t?t=s.decorateType(t).name:t&&"object"===typeof t&&(t=s.decorateEnum(t).name),function(a,i){s.decorateType(a.constructor).add(new c(i,e,t,r,{default:n}))}},c._configure=function(e){a=e}},4582:function(e,t,r){"use strict";var n=e.exports=r(4722);n.build="light",n.load=function(e,t,r){return"function"===typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=r(6886),n.decoder=r(2715),n.verifier=r(709),n.converter=r(7276),n.ReflectionObject=r(5154),n.Namespace=r(3452),n.Root=r(8622),n.Enum=r(222),n.Type=r(8716),n.Field=r(6734),n.OneOf=r(9794),n.MapField=r(4479),n.Service=r(4173),n.Method=r(4865),n.Message=r(4486),n.wrappers=r(9025),n.types=r(8517),n.util=r(2440),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},4722:function(e,t,r){"use strict";var n=t;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(7063),n.BufferWriter=r(2815),n.Reader=r(6216),n.BufferReader=r(3557),n.util=r(3097),n.rpc=r(9994),n.roots=r(7907),n.configure=a,a()},8154:function(e,t,r){"use strict";var n=e.exports=r(4582);n.build="full",n.tokenize=r(3077),n.parse=r(7781),n.common=r(1427),n.Root._configure(n.Type,n.parse,n.common)},4479:function(e,t,r){"use strict";e.exports=o;var n=r(6734);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var a=r(8517),i=r(2440);function o(e,t,r,a,o,s){if(n.call(this,e,t,a,void 0,void 0,o,s),!i.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===a.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"===typeof r?r=i.decorateType(r).name:r&&"object"===typeof r&&(r=i.decorateEnum(r).name),function(n,a){i.decorateType(n.constructor).add(new o(a,e,t,r))}}},4486:function(e,t,r){"use strict";e.exports=a;var n=r(3097);function a(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}a.create=function(e){return this.$type.create(e)},a.encode=function(e,t){return this.$type.encode(e,t)},a.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},a.decode=function(e){return this.$type.decode(e)},a.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},a.verify=function(e){return this.$type.verify(e)},a.fromObject=function(e){return this.$type.fromObject(e)},a.toObject=function(e,t){return this.$type.toObject(e,t)},a.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},4865:function(e,t,r){"use strict";e.exports=i;var n=r(5154);((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var a=r(2440);function i(e,t,r,i,o,s,u,c,l){if(a.isObject(o)?(u=o,o=s=void 0):a.isObject(s)&&(u=s,s=void 0),void 0!==t&&!a.isString(t))throw TypeError("type must be a string");if(!a.isString(r))throw TypeError("requestType must be a string");if(!a.isString(i))throw TypeError("responseType must be a string");n.call(this,e,u),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||void 0,this.responseType=i,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=l}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},3452:function(e,t,r){"use strict";e.exports=f;var n=r(5154);((f.prototype=Object.create(n.prototype)).constructor=f).className="Namespace";var a,i,o,s=r(6734),u=r(2440),c=r(9794);function l(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function f(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function p(e){return e._nestedArray=null,e}f.fromJSON=function(e,t){return new f(e,t.options).addJSON(t.nested)},f.arrayToJSON=l,f.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!==typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},f.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(f.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),f.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},f.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?a.fromJSON:void 0!==t.values?o.fromJSON:void 0!==t.methods?i.fromJSON:void 0!==t.id?s.fromJSON:f.fromJSON)(r[n],t));return this},f.prototype.get=function(e){return this.nested&&this.nested[e]||null},f.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},f.prototype.add=function(e){if(!(e instanceof s&&void 0!==e.extend||e instanceof a||e instanceof c||e instanceof o||e instanceof i||e instanceof f))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof f&&e instanceof f)||t instanceof a||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),p(this)},f.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),p(this)},f.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof f))throw Error("path conflicts with non-namespace objects")}else r.add(r=new f(n))}return t&&r.addJSON(t),r},f.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof f?e[t++].resolveAll():e[t++].resolve();return this.resolve()},f.prototype.lookup=function(e,t,r){if("boolean"===typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof f&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var a=0;a<this.nestedArray.length;++a)if(this._nestedArray[a]instanceof f&&(n=this._nestedArray[a].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},f.prototype.lookupType=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such type: "+e);return t},f.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},f.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[a,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},f.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},f._configure=function(e,t,r){a=e,i=t,o=r}},5154:function(e,t,r){"use strict";e.exports=i,i.className="ReflectionObject";var n,a=r(2440);function i(e,t){if(!a.isString(e))throw TypeError("name must be a string");if(t&&!a.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},i.prototype.getOption=function(e){if(this.options)return this.options[e]},i.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var i=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(i){var o=i[e];a.setProperty(o,r,t)}else(i={})[e]=a.setProperty({},r,t),n.push(i)}else{var s={};s[e]=t,n.push(s)}return this},i.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){n=e}},9794:function(e,t,r){"use strict";e.exports=o;var n=r(5154);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var a=r(6734),i=r(2440);function o(e,t,r,a){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=a}function s(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof a))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,s(this),this},o.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}s(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},7781:function(e,t,r){"use strict";e.exports=E,E.filename=null,E.defaults={keepCase:!1};var n=r(3077),a=r(8622),i=r(8716),o=r(6734),s=r(4479),u=r(9794),c=r(222),l=r(4173),f=r(4865),p=r(8517),h=r(2440),d=/^[1-9][0-9]*$/,v=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,b=/^-?0[x][0-9a-fA-F]+$/,g=/^0[0-7]+$/,m=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,k=/^[a-zA-Z_][a-zA-Z_0-9]*$/,x=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,_=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function E(e,t,r){t instanceof a||(r=t,t=new a),r||(r=E.defaults);var S,A,C,T,R,I=r.preferTrailingComment||!1,P=n(e,r.alternateCommentMode||!1),D=P.next,N=P.push,O=P.peek,L=P.skip,B=P.cmnt,M=!0,U=!1,j=t,F=r.keepCase?function(e){return e}:h.camelCase;function z(e,t,r){var n=E.filename;return r||(E.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+P.line+")")}function Z(){var e,t=[];do{if('"'!==(e=D())&&"'"!==e)throw z(e);t.push(D()),L(e),e=O()}while('"'===e||"'"===e);return t.join("")}function q(e){var t=D();switch(t){case"'":case'"':return N(t),Z();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;"-"===e.charAt(0)&&(r=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(d.test(e))return r*parseInt(e,10);if(y.test(e))return r*parseInt(e,16);if(g.test(e))return r*parseInt(e,8);if(w.test(e))return r*parseFloat(e);throw z(e,"number",t)}(t,!0)}catch(r){if(e&&x.test(t))return t;throw z(t,"value")}}function V(e,t){var r,n;do{!t||'"'!==(r=O())&&"'"!==r?e.push([n=K(D()),L("to",!0)?K(D()):n]):e.push(Z())}while(L(",",!0));L(";")}function K(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw z(e,"id");if(v.test(e))return parseInt(e,10);if(b.test(e))return parseInt(e,16);if(m.test(e))return parseInt(e,8);throw z(e,"id")}function H(){if(void 0!==S)throw z("package");if(S=D(),!x.test(S))throw z(S,"name");j=j.define(S),L(";")}function W(){var e,t=O();switch(t){case"weak":e=C||(C=[]),D();break;case"public":D();default:e=A||(A=[])}t=Z(),L(";"),e.push(t)}function G(){if(L("="),T=Z(),!(U="proto3"===T)&&"proto2"!==T)throw z(T,"syntax");L(";")}function Y(e,t){switch(t){case"option":return ee(e,t),L(";"),!0;case"message":return J(e,t),!0;case"enum":return $(e,t),!0;case"service":return function(e,t){if(!k.test(t=D()))throw z(t,"service name");var r=new l(t);Q(r,(function(e){if(!Y(r,e)){if("rpc"!==e)throw z(e);!function(e,t){var r=B(),n=t;if(!k.test(t=D()))throw z(t,"name");var a,i,o,s,u=t;L("("),L("stream",!0)&&(i=!0);if(!x.test(t=D()))throw z(t);a=t,L(")"),L("returns"),L("("),L("stream",!0)&&(s=!0);if(!x.test(t=D()))throw z(t);o=t,L(")");var c=new f(u,n,a,o,i,s);c.comment=r,Q(c,(function(e){if("option"!==e)throw z(e);ee(c,e),L(";")})),e.add(c)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!x.test(t=D()))throw z(t,"reference");var r=t;Q(null,(function(t){switch(t){case"required":case"repeated":X(e,t,r);break;case"optional":X(e,U?"proto3_optional":"optional",r);break;default:if(!U||!x.test(t))throw z(t);N(t),X(e,"optional",r)}}))}(e,t),!0}return!1}function Q(e,t,r){var n=P.line;if(e&&("string"!==typeof e.comment&&(e.comment=B()),e.filename=E.filename),L("{",!0)){for(var a;"}"!==(a=D());)t(a);L(";",!0)}else r&&r(),L(";"),e&&("string"!==typeof e.comment||I)&&(e.comment=B(n)||e.comment)}function J(e,t){if(!k.test(t=D()))throw z(t,"type name");var r=new i(t);Q(r,(function(e){if(!Y(r,e))switch(e){case"map":!function(e){L("<");var t=D();if(void 0===p.mapKey[t])throw z(t,"type");L(",");var r=D();if(!x.test(r))throw z(r,"type");L(">");var n=D();if(!k.test(n))throw z(n,"name");L("=");var a=new s(F(n),K(D()),t,r);Q(a,(function(e){if("option"!==e)throw z(e);ee(a,e),L(";")}),(function(){ne(a)})),e.add(a)}(r);break;case"required":case"repeated":X(r,e);break;case"optional":X(r,U?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!k.test(t=D()))throw z(t,"name");var r=new u(F(t));Q(r,(function(e){"option"===e?(ee(r,e),L(";")):(N(e),X(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":V(r.extensions||(r.extensions=[]));break;case"reserved":V(r.reserved||(r.reserved=[]),!0);break;default:if(!U||!x.test(e))throw z(e);N(e),X(r,"optional")}})),e.add(r)}function X(e,t,r){var n=D();if("group"!==n){for(;n.endsWith(".")||O().startsWith(".");)n+=D();if(!x.test(n))throw z(n,"type");var a=D();if(!k.test(a))throw z(a,"name");a=F(a),L("=");var s=new o(a,K(D()),n,t,r);if(Q(s,(function(e){if("option"!==e)throw z(e);ee(s,e),L(";")}),(function(){ne(s)})),"proto3_optional"===t){var c=new u("_"+a);s.setOption("proto3_optional",!0),c.add(s),e.add(c)}else e.add(s);U||!s.repeated||void 0===p.packed[n]&&void 0!==p.basic[n]||s.setOption("packed",!1,!0)}else!function(e,t){var r=D();if(!k.test(r))throw z(r,"name");var n=h.lcFirst(r);r===n&&(r=h.ucFirst(r));L("=");var a=K(D()),s=new i(r);s.group=!0;var u=new o(n,a,r,t);u.filename=E.filename,Q(s,(function(e){switch(e){case"option":ee(s,e),L(";");break;case"required":case"repeated":X(s,e);break;case"optional":X(s,U?"proto3_optional":"optional");break;case"message":J(s,e);break;case"enum":$(s,e);break;default:throw z(e)}})),e.add(s).add(u)}(e,t)}function $(e,t){if(!k.test(t=D()))throw z(t,"name");var r=new c(t);Q(r,(function(e){switch(e){case"option":ee(r,e),L(";");break;case"reserved":V(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!k.test(t))throw z(t,"name");L("=");var r=K(D(),!0),n={options:void 0,setOption:function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t}};Q(n,(function(e){if("option"!==e)throw z(e);ee(n,e),L(";")}),(function(){ne(n)})),e.add(t,r,n.comment,n.options)}(r,e)}})),e.add(r)}function ee(e,t){var r=L("(",!0);if(!x.test(t=D()))throw z(t,"name");var n,a=t,i=a;r&&(L(")"),i=a="("+a+")",t=O(),_.test(t)&&(n=t.slice(1),a+=t,D())),L("="),function(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}(e,i,te(e,a),n)}function te(e,t){if(L("{",!0)){for(var r={};!L("}",!0);){if(!k.test(R=D()))throw z(R,"name");var n,a=R;if(L(":",!0),"{"===O())n=te(e,t+"."+R);else if("["===O()){var i;if(n=[],L("[",!0)){do{i=q(!0),n.push(i)}while(L(",",!0));L("]"),"undefined"!==typeof i&&re(e,t+"."+R,i)}}else n=q(!0),re(e,t+"."+R,n);var o=r[a];o&&(n=[].concat(o).concat(n)),r[a]=n,L(",",!0),L(";",!0)}return r}var s=q(!0);return re(e,t,s),s}function re(e,t,r){e.setOption&&e.setOption(t,r)}function ne(e){if(L("[",!0)){do{ee(e,"option")}while(L(",",!0));L("]")}return e}for(;null!==(R=D());)switch(R){case"package":if(!M)throw z(R);H();break;case"import":if(!M)throw z(R);W();break;case"syntax":if(!M)throw z(R);G();break;case"option":ee(j,R),L(";");break;default:if(Y(j,R)){M=!1;continue}throw z(R)}return E.filename=null,{package:S,imports:A,weakImports:C,syntax:T,root:t}}},6216:function(e,t,r){"use strict";e.exports=u;var n,a=r(3097),i=a.LongBits,o=a.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},l=function(){return a.Buffer?function(e){return(u.create=function(e){return a.Buffer.isBuffer(e)?new n(e):c(e)})(e)}:c};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw s(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}u.create=l(),u.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,u.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return e}}(),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},u.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){n=e,u.create=l(),n._configure();var t=a.Long?"toLong":"toNumber";a.merge(u.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},3557:function(e,t,r){"use strict";e.exports=i;var n=r(6216);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(3097);function i(e){n.call(this,e)}i._configure=function(){a.Buffer&&(i.prototype._slice=a.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},8622:function(e,t,r){"use strict";e.exports=f;var n=r(3452);((f.prototype=Object.create(n.prototype)).constructor=f).className="Root";var a,i,o,s=r(6734),u=r(222),c=r(9794),l=r(2440);function f(e){n.call(this,"",e),this.deferred=[],this.files=[]}function p(){}f.fromJSON=function(e,t){return t||(t=new f),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},f.prototype.resolvePath=l.path.resolve,f.prototype.fetch=l.fetch,f.prototype.load=function e(t,r,n){"function"===typeof r&&(n=r,r=void 0);var a=this;if(!n)return l.asPromise(e,a,t,r);var s=n===p;function u(e,t){if(n){var r=n;if(n=null,s)throw e;r(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in o)return r}return null}function f(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){i.filename=e;var n,o=i(t,a,r),f=0;if(o.imports)for(;f<o.imports.length;++f)(n=c(o.imports[f])||a.resolvePath(e,o.imports[f]))&&h(n);if(o.weakImports)for(f=0;f<o.weakImports.length;++f)(n=c(o.weakImports[f])||a.resolvePath(e,o.weakImports[f]))&&h(n,!0)}else a.setOptions(t.options).addJSON(t.nested)}catch(p){u(p)}s||d||u(null,a)}function h(e,t){if(e=c(e)||e,!(a.files.indexOf(e)>-1))if(a.files.push(e),e in o)s?f(e,o[e]):(++d,setTimeout((function(){--d,f(e,o[e])})));else if(s){var r;try{r=l.fs.readFileSync(e).toString("utf8")}catch(i){return void(t||u(i))}f(e,r)}else++d,a.fetch(e,(function(r,i){--d,n&&(r?t?d||u(null,a):u(r):f(e,i))}))}var d=0;l.isString(t)&&(t=[t]);for(var v,y=0;y<t.length;++y)(v=a.resolvePath("",t[y]))&&h(v);if(s)return a;d||u(null,a)},f.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,p)},f.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function d(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new s(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n)),!0}return!1}f.prototype._handleAdd=function(e){if(e instanceof s)void 0===e.extend||e.extensionField||d(0,e)||this.deferred.push(e);else if(e instanceof u)h.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof a)for(var t=0;t<this.deferred.length;)d(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);h.test(e.name)&&(e.parent[e.name]=e)}},f.prototype._handleRemove=function(e){if(e instanceof s){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof u)h.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);h.test(e.name)&&delete e.parent[e.name]}},f._configure=function(e,t,r){a=e,i=t,o=r}},7907:function(e){"use strict";e.exports={}},9994:function(e,t,r){"use strict";t.Service=r(4281)},4281:function(e,t,r){"use strict";e.exports=a;var n=r(3097);function a(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a,a.prototype.rpcCall=function e(t,r,a,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return n.asPromise(e,s,t,r,a,i);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof a))try{r=a[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),o(e)}return s.emit("data",r,t),o(null,r)}s.end(!0)}))}catch(u){return s.emit("error",u,t),void setTimeout((function(){o(u)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},a.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},4173:function(e,t,r){"use strict";e.exports=s;var n=r(3452);((s.prototype=Object.create(n.prototype)).constructor=s).className="Service";var a=r(4865),i=r(2440),o=r(9994);function s(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function u(e){return e._methodsArray=null,e}s.fromJSON=function(e,t){var r=new s(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),i=0;i<n.length;++i)r.add(a.fromJSON(n[i],t.methods[n[i]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},s.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof a?(this.methods[e.name]=e,e.parent=this,u(this)):n.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof a){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,u(this)}return n.prototype.remove.call(this,e)},s.prototype.create=function(e,t,r){for(var n,a=new o.Service(e,t,r),s=0;s<this.methodsArray.length;++s){var u=i.lcFirst((n=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");a[u]=i.codegen(["r","c"],i.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return a}},3077:function(e){"use strict";e.exports=f;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,a=/^ *[*/]+ */,i=/^\s*\*?\/*/,o=/\n/g,s=/\s/,u=/\\(.?)/g,c={0:"\0",r:"\r",n:"\n",t:"\t"};function l(e){return e.replace(u,(function(e,t){switch(t){case"\\":case"":return t;default:return c[t]||""}}))}function f(e,u){e=e.toString();var c=0,f=e.length,p=1,h=0,d={},v=[],y=null;function b(e){return Error("illegal "+e+" (line "+p+")")}function g(t){return e.charAt(t)}function m(t,r,n){var s,c={type:e.charAt(t++),lineEmpty:!1,leading:n},l=t-(u?2:3);do{if(--l<0||"\n"===(s=e.charAt(l))){c.lineEmpty=!0;break}}while(" "===s||"\t"===s);for(var f=e.substring(t,r).split(o),v=0;v<f.length;++v)f[v]=f[v].replace(u?i:a,"").trim();c.text=f.join("\n").trim(),d[p]=c,h=p}function w(t){var r=k(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function k(e){for(var t=e;t<f&&"\n"!==g(t);)t++;return t}function x(){if(v.length>0)return v.shift();if(y)return function(){var t="'"===y?n:r;t.lastIndex=c-1;var a=t.exec(e);if(!a)throw b("string");return c=t.lastIndex,_(y),y=null,l(a[1])}();var a,i,o,h,d,x=0===c;do{if(c===f)return null;for(a=!1;s.test(o=g(c));)if("\n"===o&&(x=!0,++p),++c===f)return null;if("/"===g(c)){if(++c===f)throw b("comment");if("/"===g(c))if(u){if(h=c,d=!1,w(c)){d=!0;do{if((c=k(c))===f)break;if(c++,!x)break}while(w(c))}else c=Math.min(f,k(c)+1);d&&(m(h,c,x),x=!0),p++,a=!0}else{for(d="/"===g(h=c+1);"\n"!==g(++c);)if(c===f)return null;++c,d&&(m(h,c-1,x),x=!0),++p,a=!0}else{if("*"!==(o=g(c)))return"/";h=c+1,d=u||"*"===g(h);do{if("\n"===o&&++p,++c===f)throw b("comment");i=o,o=g(c)}while("*"!==i||"/"!==o);++c,d&&(m(h,c-2,x),x=!0),a=!0}}}while(a);var E=c;if(t.lastIndex=0,!t.test(g(E++)))for(;E<f&&!t.test(g(E));)++E;var S=e.substring(c,c=E);return'"'!==S&&"'"!==S||(y=S),S}function _(e){v.push(e)}function E(){if(!v.length){var e=x();if(null===e)return null;_(e)}return v[0]}return Object.defineProperty({next:x,peek:E,push:_,skip:function(e,t){var r=E();if(r===e)return x(),!0;if(!t)throw b("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t,r=null;return void 0===e?(t=d[p-1],delete d[p-1],t&&(u||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(h<e&&E(),t=d[e],delete d[e],!t||t.lineEmpty||!u&&"/"!==t.type||(r=t.leading?null:t.text)),r}},"line",{get:function(){return p}})}f.unescape=l},8716:function(e,t,r){"use strict";e.exports=g;var n=r(3452);((g.prototype=Object.create(n.prototype)).constructor=g).className="Type";var a=r(222),i=r(9794),o=r(6734),s=r(4479),u=r(4173),c=r(4486),l=r(6216),f=r(7063),p=r(2440),h=r(6886),d=r(2715),v=r(709),y=r(7276),b=r(9025);function g(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function m(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=g.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,p.merge(e.prototype,t)),e.$type=e.prototype.$type=this,p.merge(e,c,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:p.oneOfGetter(this._oneofsArray[r].oneof),set:p.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),g.generateConstructor=function(e){for(var t,r=p.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",p.safeProp(t.name)):t.repeated&&r("this%s=[]",p.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},g.fromJSON=function(e,t){var r=new g(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var c=Object.keys(t.fields),l=0;l<c.length;++l)r.add(("undefined"!==typeof t.fields[c[l]].keyType?s.fromJSON:o.fromJSON)(c[l],t.fields[c[l]]));if(t.oneofs)for(c=Object.keys(t.oneofs),l=0;l<c.length;++l)r.add(i.fromJSON(c[l],t.oneofs[c[l]]));if(t.nested)for(c=Object.keys(t.nested),l=0;l<c.length;++l){var f=t.nested[c[l]];r.add((void 0!==f.id?o.fromJSON:void 0!==f.fields?g.fromJSON:void 0!==f.values?a.fromJSON:void 0!==f.methods?u.fromJSON:n.fromJSON)(c[l],f))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},g.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return p.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},g.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},g.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},g.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),m(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),m(this)):n.prototype.add.call(this,e)},g.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),m(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),m(this)}return n.prototype.remove.call(this,e)},g.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},g.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},g.prototype.create=function(e){return new this.ctor(e)},g.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=h(this)({Writer:f,types:t,util:p}),this.decode=d(this)({Reader:l,types:t,util:p}),this.verify=v(this)({types:t,util:p}),this.fromObject=y.fromObject(this)({types:t,util:p}),this.toObject=y.toObject(this)({types:t,util:p});var n=b[e];if(n){var a=Object.create(this);a.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(a),a.toObject=this.toObject,this.toObject=n.toObject.bind(a)}return this},g.prototype.encode=function(e,t){return this.setup().encode(e,t)},g.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},g.prototype.decode=function(e,t){return this.setup().decode(e,t)},g.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},g.prototype.verify=function(e){return this.setup().verify(e)},g.prototype.fromObject=function(e){return this.setup().fromObject(e)},g.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},g.d=function(e){return function(t){p.decorateType(t,e)}}},8517:function(e,t,r){"use strict";var n=t,a=r(2440),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",a.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},2440:function(e,t,r){"use strict";var n,a,i=e.exports=r(3097),o=r(7907);i.codegen=r(3297),i.fetch=r(7635),i.path=r(7468),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],a=e[r++];void 0!==a&&(t[n]=a)}return t};var s=/\\/g,u=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(s,"\\\\").replace(u,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type;n||(n=r(8716));var a=new n(t||e.name);return i.decorateRoot.add(a),a.ctor=e,Object.defineProperty(e,"$type",{value:a,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:a,enumerable:!1}),a};var l=0;i.decorateEnum=function(e){if(e.$type)return e.$type;a||(a=r(222));var t=new a("Enum"+l++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},i.setProperty=function(e,t,r){if("object"!==typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var a=r.shift();if("__proto__"===a)return t;if(r.length>0)t[a]=e(t[a]||{},r,n);else{var i=t[a];i&&(n=[].concat(i).concat(n)),t[a]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(r(8622)))}})},9351:function(e,t,r){"use strict";e.exports=a;var n=r(3097);function a(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=a.zero=new a(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new a(r,n)},a.from=function(e){if("number"===typeof e)return a.fromNumber(e);if(n.isString(e)){if(!n.Long)return a.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new a(e.low>>>0,e.high>>>0):i},a.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},a.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;a.fromHash=function(e){return e===o?i:new a((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},a.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},a.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},3097:function(e,t,r){"use strict";var n=t;function a(e,t,r){for(var n=Object.keys(t),a=0;a<n.length;++a)void 0!==e[n[a]]&&r||(e[n[a]]=t[n[a]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&a(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(7206),n.base64=r(1),n.EventEmitter=r(7111),n.float=r(802),n.inquire=r(7172),n.utf8=r(3861),n.pool=r(8236),n.LongBits=r(9351),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=a,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},709:function(e,t,r){"use strict";e.exports=function(e){var t=a.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var u=0;u<e.fieldsArray.length;++u){var c=e._fieldsArray[u].resolve(),l="m"+a.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",i(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),s(t,c,"k[i]"),o(t,c,u,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",i(c,"array"))("for(var i=0;i<%s.length;++i){",l),o(t,c,u,l+"[i]")("}");else{if(c.partOf){var f=a.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",f)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",f)}o(t,c,u,l)}c.optional&&t("}")}return t("return null")};var n=r(222),a=r(2440);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,a){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",a)("default:")("return%j",i(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),s=0;s<o.length;++s)e("case %i:",t.resolvedType.values[o[s]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,a)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",a)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",a,a,a,a)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',a)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',a)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",a)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',a,a,a)("return%j",i(t,"buffer"))}return e}function s(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",i(t,"boolean key"))}return e}},9025:function(e,t,r){"use strict";var n=t,a=r(4486);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof a){var o=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),o["@type"]=n,o}return this.toObject(e,t)}}},7063:function(e,t,r){"use strict";e.exports=f;var n,a=r(3097),i=a.LongBits,o=a.base64,s=a.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var p=function(){return a.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function h(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function v(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=p(),f.alloc=function(e){return new a.Array(e)},a.Array!==Array&&(f.alloc=a.pool(f.alloc,a.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},d.prototype=Object.create(u.prototype),d.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(v,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(v,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(v,t.length(),t)},f.prototype.bool=function(e){return this._push(h,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(a.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(a.float.writeDoubleLE,8,e)};var b=a.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(a.isString(e)){var r=f.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(b,t,e)},f.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(h,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){n=e,f.create=p(),n._configure()}},2815:function(e,t,r){"use strict";e.exports=i;var n=r(7063);(i.prototype=Object.create(n.prototype)).constructor=i;var a=r(3097);function i(){n.call(this)}function o(e,t,r){e.length<40?a.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=a._Buffer_allocUnsafe,i.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&"set"===a.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){a.isString(e)&&(e=a._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()},4183:function(e,t,r){var n;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:r.g):function(e){return(n||(n=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))}},760:function(e,t,r){var n=r(9361).instantiate;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return n(new Response(new Blob([t],{type:"application/wasm"})),e)}a.supported="undefined"!==typeof WebAssembly,e.exports=a},8729:function(e,t,r){var n=r(7061).default,a=r(7156).default,i=r(2983),o=r(760),s=function(){var e=a(n().mark((function e(t,r,a,s,u){var c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return c=e.sent,e.abrupt("return",new i(c,t,r,a,s,u));case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}();e.exports={Rabin:i,create:s}},2983:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=function(){"use strict";function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8192,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32768,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:64,s=arguments.length>5?arguments[5]:void 0;n(this,e),this.bits=r,this.min=a,this.max=i,this.asModule=t,this.rabin=new t.Rabin(r,a,i,o,s),this.polynomial=s}return a(e,[{key:"fingerprint",value:function(e){var t=this.asModule,r=t.__retain,n=t.__release,a=t.__allocArray,i=t.__getInt32Array,o=t.Int32Array_ID,s=t.Uint8Array_ID,u=r(a(o,new Int32Array(Math.ceil(e.length/this.min)))),c=r(a(s,e)),l=i(this.rabin.fingerprint(c,u));n(c),n(u);var f=l.indexOf(0);return f>=0?l.subarray(0,f):l}}]),e}();e.exports=i},2525:function(e,t,r){"use strict";var n=65536,a=4294967295;var i=r(2543).Buffer,o=r.g.crypto||r.g.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>a)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(e>0)if(e>n)for(var s=0;s<e;s+=n)o.getRandomValues(r.slice(s,s+n));else o.getRandomValues(r);if("function"===typeof t)return process.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},7896:function(e,t,r){var n=r(8139),a=r(5339),i=r(4052),o=r(3654),s=r(5503),u=s.RateLimiterClusterMaster,c=s.RateLimiterClusterMasterPM2,l=s.RateLimiterCluster,f=r(2408),p=r(8134),h=r(5e3),d=r(4066),v=r(3081),y=r(438),b=r(4819);e.exports={RateLimiterRedis:n,RateLimiterMongo:a,RateLimiterMySQL:i,RateLimiterPostgres:o,RateLimiterMemory:f,RateLimiterMemcache:p,RateLimiterClusterMaster:u,RateLimiterClusterMasterPM2:c,RateLimiterCluster:l,RLWrapperBlackAndWhite:h,RateLimiterUnion:d,RateLimiterQueue:v,BurstyRateLimiter:y,RateLimiterRes:b}},438:function(e,t,r){var n=r(7424).default,a=r(6690).default,i=r(9728).default,o=r(4819);e.exports=function(){"use strict";function e(t,r){a(this,e),this._rateLimiter=t,this._burstLimiter=r}return i(e,[{key:"_combineRes",value:function(e,t){return new o(e.remainingPoints,Math.min(e.msBeforeNext,t.msBeforeNext),e.consumedPoints,e.isFirstInDuration)}},{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._rateLimiter.consume(e,r,n).catch((function(a){return a instanceof o?t._burstLimiter.consume(e,r,n).then((function(e){return Promise.resolve(t._combineRes(a,e))})).catch((function(e){return e instanceof o?Promise.reject(t._combineRes(a,e)):Promise.reject(e)})):Promise.reject(a)}))}},{key:"get",value:function(e){var t=this;return Promise.all([this._rateLimiter.get(e),this._burstLimiter.get(e)]).then((function(e){var r=n(e,2),a=r[0],i=r[1];return t._combineRes(a,i)}))}},{key:"points",get:function(){return this._rateLimiter.points}}]),e}()},5e3:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(4819);e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.limiter=t.limiter,this.blackList=t.blackList,this.whiteList=t.whiteList,this.isBlackListed=t.isBlackListed,this.isWhiteListed=t.isWhiteListed,this.runActionAnyway=t.runActionAnyway}return a(e,[{key:"limiter",get:function(){return this._limiter},set:function(e){if("undefined"===typeof e)throw new Error("limiter is not set");this._limiter=e}},{key:"runActionAnyway",get:function(){return this._runActionAnyway},set:function(e){this._runActionAnyway="undefined"!==typeof e&&e}},{key:"blackList",get:function(){return this._blackList},set:function(e){this._blackList=Array.isArray(e)?e:[]}},{key:"isBlackListed",get:function(){return this._isBlackListed},set:function(e){if("undefined"===typeof e&&(e=function(){return!1}),"function"!==typeof e)throw new Error("isBlackListed must be function");this._isBlackListed=e}},{key:"whiteList",get:function(){return this._whiteList},set:function(e){this._whiteList=Array.isArray(e)?e:[]}},{key:"isWhiteListed",get:function(){return this._isWhiteListed},set:function(e){if("undefined"===typeof e&&(e=function(){return!1}),"function"!==typeof e)throw new Error("isWhiteListed must be function");this._isWhiteListed=e}},{key:"isBlackListedSomewhere",value:function(e){return this.blackList.indexOf(e)>=0||this.isBlackListed(e)}},{key:"isWhiteListedSomewhere",value:function(e){return this.whiteList.indexOf(e)>=0||this.isWhiteListed(e)}},{key:"getBlackRes",value:function(){return new i(0,Number.MAX_SAFE_INTEGER,0,!1)}},{key:"getWhiteRes",value:function(){return new i(Number.MAX_SAFE_INTEGER,0,0,!1)}},{key:"rejectBlack",value:function(){return Promise.reject(this.getBlackRes())}},{key:"resolveBlack",value:function(){return Promise.resolve(this.getBlackRes())}},{key:"resolveWhite",value:function(){return Promise.resolve(this.getWhiteRes())}},{key:"consume",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.rejectBlack()),"undefined"===typeof t?this.limiter.consume(e,r):(this.runActionAnyway&&this.limiter.consume(e,r).catch((function(){})),t)}},{key:"block",value:function(e,t){var r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.block(e,t):(this.runActionAnyway&&this.limiter.block(e,t).catch((function(){})),r)}},{key:"penalty",value:function(e,t){var r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.penalty(e,t):(this.runActionAnyway&&this.limiter.penalty(e,t).catch((function(){})),r)}},{key:"reward",value:function(e,t){var r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.reward(e,t):(this.runActionAnyway&&this.limiter.reward(e,t).catch((function(){})),r)}},{key:"get",value:function(e){var t;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.resolveBlack()),"undefined"===typeof t||this.runActionAnyway?this.limiter.get(e):t}},{key:"delete",value:function(e){return this.limiter.delete(e)}}]),e}()},8855:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.points=t.points,this.duration=t.duration,this.blockDuration=t.blockDuration,this.execEvenly=t.execEvenly,this.execEvenlyMinDelayMs=t.execEvenlyMinDelayMs,this.keyPrefix=t.keyPrefix}return a(e,[{key:"points",get:function(){return this._points},set:function(e){this._points=e>=0?e:4}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration="undefined"===typeof e?1:e}},{key:"msDuration",get:function(){return 1e3*this.duration}},{key:"blockDuration",get:function(){return this._blockDuration},set:function(e){this._blockDuration="undefined"===typeof e?0:e}},{key:"msBlockDuration",get:function(){return 1e3*this.blockDuration}},{key:"execEvenly",get:function(){return this._execEvenly},set:function(e){this._execEvenly="undefined"!==typeof e&&Boolean(e)}},{key:"execEvenlyMinDelayMs",get:function(){return this._execEvenlyMinDelayMs},set:function(e){this._execEvenlyMinDelayMs="undefined"===typeof e?Math.ceil(this.msDuration/this.points):e}},{key:"keyPrefix",get:function(){return this._keyPrefix},set:function(e){if("undefined"===typeof e&&(e="rlflx"),"string"!==typeof e)throw new Error("keyPrefix must be string");this._keyPrefix=e}},{key:"_getKeySecDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.customDuration>=0?e.customDuration:this.duration}},{key:"getKey",value:function(e){return this.keyPrefix.length>0?"".concat(this.keyPrefix,":").concat(e):e}},{key:"parseKey",value:function(e){return e.substring(this.keyPrefix.length)}},{key:"consume",value:function(){throw new Error("You have to implement the method 'consume'!")}},{key:"penalty",value:function(){throw new Error("You have to implement the method 'penalty'!")}},{key:"reward",value:function(){throw new Error("You have to implement the method 'reward'!")}},{key:"get",value:function(){throw new Error("You have to implement the method 'get'!")}},{key:"set",value:function(){throw new Error("You have to implement the method 'set'!")}},{key:"block",value:function(){throw new Error("You have to implement the method 'block'!")}},{key:"delete",value:function(){throw new Error("You have to implement the method 'delete'!")}}]),e}()},5503:function(e,t,r){var n=r(6115).default,a=r(1655).default,i=r(6389).default,o=r(9728).default,s=r(6690).default,u=r(1265),c=r(5539),l=r(8855),f=r(2408),p=r(4819),h="rate_limiter_flexible",d=null,v=function(e,t,r,n){var a;a=null===n||!0===n||!1===n?n:{remainingPoints:n.remainingPoints,msBeforeNext:n.msBeforeNext,consumedPoints:n.consumedPoints,isFirstInDuration:n.isFirstInDuration},e.send({channel:h,keyPrefix:t.keyPrefix,promiseId:t.promiseId,type:r,data:a})},y=function e(t){var r=this;setTimeout((function(){r._initiated?process.send(t):"undefined"!==typeof r._promises[t.promiseId]&&e.call(r,t)}),30)},b=function(e,t,r,n,a){var i={channel:h,keyPrefix:this.keyPrefix,func:e,promiseId:t,data:{key:r,arg:n,opts:a}};this._initiated?process.send(i):y.call(this,i)},g=function(e,t){if(!t||t.channel!==h||"undefined"===typeof this._rateLimiters[t.keyPrefix])return!1;var r;switch(t.func){case"consume":r=this._rateLimiters[t.keyPrefix].consume(t.data.key,t.data.arg,t.data.opts);break;case"penalty":r=this._rateLimiters[t.keyPrefix].penalty(t.data.key,t.data.arg,t.data.opts);break;case"reward":r=this._rateLimiters[t.keyPrefix].reward(t.data.key,t.data.arg,t.data.opts);break;case"block":r=this._rateLimiters[t.keyPrefix].block(t.data.key,t.data.arg,t.data.opts);break;case"get":r=this._rateLimiters[t.keyPrefix].get(t.data.key,t.data.opts);break;case"delete":r=this._rateLimiters[t.keyPrefix].delete(t.data.key,t.data.opts);break;default:return!1}r&&r.then((function(r){v(e,t,"resolve",r)})).catch((function(r){v(e,t,"reject",r)}))},m=function(e){if(!e||e.channel!==h||e.keyPrefix!==this.keyPrefix)return!1;if(this._promises[e.promiseId]){var t;switch(clearTimeout(this._promises[e.promiseId].timeoutId),t=null===e.data||!0===e.data||!1===e.data?e.data:new p(e.data.remainingPoints,e.data.msBeforeNext,e.data.consumedPoints,e.data.isFirstInDuration),e.type){case"resolve":this._promises[e.promiseId].resolve(t);break;case"reject":this._promises[e.promiseId].reject(t);break;default:throw new Error("RateLimiterCluster: no such message type '".concat(e.type,"'"))}delete this._promises[e.promiseId]}},w=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},k=function(e,t){var r=this,n=process.hrtime(),a=n[0].toString()+n[1].toString();return"undefined"!==typeof this._promises[a]&&(a+=c.randomBytes(12).toString("base64")),this._promises[a]={resolve:e,reject:t,timeoutId:setTimeout((function(){delete r._promises[a],t(new Error("RateLimiterCluster timeout: no answer from master in time"))}),this.timeoutMs)},a},x=o((function e(){"use strict";var t=this;if(s(this,e),d)return d;this._rateLimiters={},u.setMaxListeners(0),u.on("message",(function(e,r){r&&r.channel===h&&"init"===r.type?("undefined"===typeof t._rateLimiters[r.opts.keyPrefix]&&(t._rateLimiters[r.opts.keyPrefix]=new f(r.opts)),e.send({channel:h,type:"init",keyPrefix:r.opts.keyPrefix})):g.call(t,e,r)})),d=this})),_=o((function e(t){"use strict";var r=this;if(s(this,e),d)return d;this._rateLimiters={},t.launchBus((function(e,n){n.on("process:msg",(function(e){var n=e.raw;n&&n.channel===h&&"init"===n.type?("undefined"===typeof r._rateLimiters[n.opts.keyPrefix]&&(r._rateLimiters[n.opts.keyPrefix]=new f(n.opts)),t.sendDataToProcessId(e.process.pm_id,{data:{},topic:h,channel:h,type:"init",keyPrefix:n.opts.keyPrefix},(function(e,t){e&&console.log(e,t)}))):g.call(r,{send:function(r){var n=r;n.topic=h,"undefined"===typeof n.data&&(n.data={}),t.sendDataToProcessId(e.process.pm_id,n,(function(e,t){e&&console.log(e,t)}))}},n)}))})),d=this})),E=function(e){"use strict";a(r,e);var t=i(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,r),e=t.call(this,a),process.setMaxListeners(0),e.timeoutMs=a.timeoutMs,e._initiated=!1,process.on("message",(function(t){t&&t.channel===h&&"init"===t.type&&t.keyPrefix===e.keyPrefix?e._initiated=!0:m.call(n(e),t)})),process.send({channel:h,type:"init",opts:w.call(n(e))}),e._promises={},e}return o(r,[{key:"timeoutMs",get:function(){return this._timeoutMs},set:function(e){this._timeoutMs="undefined"===typeof e?5e3:Math.abs(parseInt(e))}},{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=k.call(t,a,i);b.call(t,"consume",o,e,r,n)}))}},{key:"penalty",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=k.call(t,a,i);b.call(t,"penalty",o,e,r,n)}))}},{key:"reward",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=k.call(t,a,i);b.call(t,"reward",o,e,r,n)}))}},{key:"block",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=k.call(r,a,i);b.call(r,"block",o,e,t,n)}))}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){var i=k.call(t,n,a);b.call(t,"get",i,e,r)}))}},{key:"delete",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){var i=k.call(t,n,a);b.call(t,"delete",i,e,r)}))}}]),r}(l);e.exports={RateLimiterClusterMaster:x,RateLimiterClusterMasterPM2:_,RateLimiterCluster:E}},8134:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(1434),u=r(4819),c=function(e){"use strict";i(r,e);var t=o(r);function r(e){var a;return n(this,r),(a=t.call(this,e)).client=e.storeClient,a}return a(r,[{key:"_getRateLimiterRes",value:function(e,t,r){var n=new u;return n.consumedPoints=parseInt(r.consumedPoints),n.isFirstInDuration=r.consumedPoints===t,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=r.msBeforeNext,n}},{key:"_upsert",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new Promise((function(o,s){var u=Date.now(),c=Math.floor(r/1e3);a?n.client.set(e,t,c,(function(r){r?s(r):n.client.set("".concat(e,"_expire"),c>0?u+1e3*c:-1,c,(function(){o({consumedPoints:t,msBeforeNext:c>0?1e3*c:-1})}))})):n.client.incr(e,t,(function(l,f){l||!1===f?n.client.add(e,t,c,(function(l,f){if(l||!f)if("undefined"===typeof i.attemptNumber||i.attemptNumber<3){var p=Object.assign({},i);p.attemptNumber=p.attemptNumber?p.attemptNumber+1:1,n._upsert(e,t,r,a,p).then((function(e){return o(e)})).catch((function(e){return s(e)}))}else s(new Error("Can not add key"));else n.client.add("".concat(e,"_expire"),c>0?u+1e3*c:-1,c,(function(){o({consumedPoints:t,msBeforeNext:c>0?1e3*c:-1})}))})):n.client.get("".concat(e,"_expire"),(function(e,t){if(e)s(e);else{var r=!1===t?0:t,n={consumedPoints:f,msBeforeNext:r>=0?Math.max(r-u,0):-1};o(n)}}))}))}))}},{key:"_get",value:function(e){var t=this;return new Promise((function(r,n){var a=Date.now();t.client.get(e,(function(i,o){o?t.client.get("".concat(e,"_expire"),(function(e,t){if(e)n(e);else{var i=!1===t?0:t,s={consumedPoints:o,msBeforeNext:i>=0?Math.max(i-a,0):-1};r(s)}})):r(null)}))}))}},{key:"_delete",value:function(e){var t=this;return new Promise((function(r,n){t.client.del(e,(function(a,i){a?n(a):!1===i?r(i):t.client.del("".concat(e,"_expire"),(function(e){e?n(e):r(i)}))}))}))}}]),r}(s);e.exports=c},2408:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(8855),u=r(4327),c=r(4819),l=function(e){"use strict";i(r,e);var t=o(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,r),(e=t.call(this,a))._memoryStorage=new u,e}return a(r,[{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=t.getKey(e),s=t._getKeySecDuration(n),u=t._memoryStorage.incrby(o,r,s);if(u.remainingPoints=Math.max(t.points-u.consumedPoints,0),u.consumedPoints>t.points)t.blockDuration>0&&u.consumedPoints<=t.points+r&&(u=t._memoryStorage.set(o,u.consumedPoints,t.blockDuration)),i(u);else if(t.execEvenly&&u.msBeforeNext>0&&!u.isFirstInDuration){var c=Math.ceil(u.msBeforeNext/(u.remainingPoints+2));c<t.execEvenlyMinDelayMs&&(c=u.consumedPoints*t.execEvenlyMinDelayMs),setTimeout(a,c,u)}else a(u)}))}},{key:"penalty",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.getKey(e);return new Promise((function(e){var i=t._getKeySecDuration(n),o=t._memoryStorage.incrby(a,r,i);o.remainingPoints=Math.max(t.points-o.consumedPoints,0),e(o)}))}},{key:"reward",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.getKey(e);return new Promise((function(e){var i=t._getKeySecDuration(n),o=t._memoryStorage.incrby(a,-r,i);o.remainingPoints=Math.max(t.points-o.consumedPoints,0),e(o)}))}},{key:"block",value:function(e,t){var r=1e3*t,n=this.points+1;return this._memoryStorage.set(this.getKey(e),n,t),Promise.resolve(new c(0,0===r?-1:r,n))}},{key:"set",value:function(e,t,r){var n=1e3*(r>=0?r:this.duration);return this._memoryStorage.set(this.getKey(e),t,r),Promise.resolve(new c(0,0===n?-1:n,t))}},{key:"get",value:function(e){var t=this._memoryStorage.get(this.getKey(e));return null!==t&&(t.remainingPoints=Math.max(this.points-t.consumedPoints,0)),Promise.resolve(t)}},{key:"delete",value:function(e){return Promise.resolve(this._memoryStorage.delete(this.getKey(e)))}}]),r}(s);e.exports=l},5339:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(1434),u=r(4819);function c(e){try{var t=(e.client?e.client:e).topology.s.options.metadata.driver.version.split(".").map((function(e){return parseInt(e)}));return{major:t[0],feature:t[1],patch:t[2]}}catch(r){return{major:0,feature:0,patch:0}}}var l=function(e){"use strict";i(r,e);var t=o(r);function r(e){var a;return n(this,r),(a=t.call(this,e)).dbName=e.dbName,a.tableName=e.tableName,a.indexKeyPrefix=e.indexKeyPrefix,e.mongo?a.client=e.mongo:a.client=e.storeClient,"function"===typeof a.client.then?a.client.then((function(e){a.client=e,a._initCollection(),a._driverVersion=c(a.client)})):(a._initCollection(),a._driverVersion=c(a.client)),a}return a(r,[{key:"dbName",get:function(){return this._dbName},set:function(e){this._dbName="undefined"===typeof e?r.getDbName():e}},{key:"tableName",get:function(){return this._tableName},set:function(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}},{key:"client",get:function(){return this._client},set:function(e){if("undefined"===typeof e)throw new Error("mongo is not set");this._client=e}},{key:"indexKeyPrefix",get:function(){return this._indexKeyPrefix},set:function(e){this._indexKeyPrefix=e||{}}},{key:"_initCollection",value:function(){var e=("function"===typeof this.client.db?this.client.db(this.dbName):this.client).collection(this.tableName);e.createIndex({expire:-1},{expireAfterSeconds:0}),e.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=e}},{key:"_getRateLimiterRes",value:function(e,t,r){var n,a=new u;return n="undefined"===typeof r.value?r:r.value,a.isFirstInDuration=n.points===t,a.consumedPoints=n.points,a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.msBeforeNext=null!==n.expire?Math.max(new Date(n.expire).getTime()-Date.now(),0):-1,a}},{key:"_upsert",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));var o,s,u=i.attrs||{};a?(o={key:e},o=Object.assign(o,u),(s={$set:{key:e,points:t,expire:r>0?new Date(Date.now()+r):null}}).$set=Object.assign(s.$set,u)):(o={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:e},o=Object.assign(o,u),(s={$setOnInsert:{key:e,expire:r>0?new Date(Date.now()+r):null},$inc:{points:t}}).$setOnInsert=Object.assign(s.$setOnInsert,u));var c={upsert:!0};return this._driverVersion.major>=4||3===this._driverVersion.major&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?c.returnDocument="after":c.returnOriginal=!1,new Promise((function(i,l){n._collection.findOneAndUpdate(o,s,c).then((function(e){i(e)})).catch((function(o){if(o&&11e3===o.code){var s=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:e},u),f={$set:Object.assign({key:e,points:t,expire:r>0?new Date(Date.now()+r):null},u)};n._collection.findOneAndUpdate(s,f,c).then((function(e){i(e)})).catch((function(o){o&&11e3===o.code?n._upsert(e,t,r,a).then((function(e){return i(e)})).catch((function(e){return l(e)})):l(o)}))}else l(o)}))}))}},{key:"_get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));var r=t.attrs||{},n=Object.assign({key:e,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},r);return this._collection.findOne(n)}},{key:"_delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));var r=t.attrs||{},n=Object.assign({key:e},r);return this._collection.deleteOne(n).then((function(e){return e.deletedCount>0}))}}],[{key:"getDbName",value:function(){return"node-rate-limiter-flexible"}}]),r}(s);e.exports=l},4052:function(e,t,r){var n=r(7424).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=r(1434),c=r(4819),l=function(e){"use strict";o(r,e);var t=s(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a(this,r),(n=t.call(this,e)).client=e.storeClient,n.clientType=e.storeType,n.dbName=e.dbName,n.tableName=e.tableName,n.clearExpiredByTimeout=e.clearExpiredByTimeout,n.tableCreated=e.tableCreated,n.tableCreated?(n.clearExpiredByTimeout&&n._clearExpiredHourAgo(),"function"===typeof i&&i()):n._createDbAndTable().then((function(){n.tableCreated=!0,n.clearExpiredByTimeout&&n._clearExpiredHourAgo(),"function"===typeof i&&i()})).catch((function(e){if("function"!==typeof i)throw e;i(e)})),n}return i(r,[{key:"clearExpired",value:function(e){var t=this;return new Promise((function(r){t._getConnection().then((function(n){n.query("DELETE FROM ??.?? WHERE expire < ?",[t.dbName,t.tableName,e],(function(){t._releaseConnection(n),r()}))})).catch((function(){r()}))}))}},{key:"_clearExpiredHourAgo",value:function(){var e=this;this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((function(){e.clearExpired(Date.now()-36e5).then((function(){e._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}},{key:"_getConnection",value:function(){var e=this;switch(this.clientType){case"pool":return new Promise((function(t,r){e.client.getConnection((function(e,n){if(e)return r(e);t(n)}))}));case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}},{key:"_releaseConnection",value:function(e){switch(this.clientType){case"pool":return e.release();case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);default:return!0}}},{key:"_createDbAndTable",value:function(){var e=this;return new Promise((function(t,r){e._getConnection().then((function(n){n.query("CREATE DATABASE IF NOT EXISTS `".concat(e.dbName,"`;"),(function(a){if(a)return e._releaseConnection(n),r(a);n.query(e._getCreateTableStmt(),(function(a){if(a)return e._releaseConnection(n),r(a);e._releaseConnection(n),t()}))}))})).catch((function(e){r(e)}))}))}},{key:"_getCreateTableStmt",value:function(){return"CREATE TABLE IF NOT EXISTS `".concat(this.dbName,"`.`").concat(this.tableName,"` (")+"`key` VARCHAR(255) CHARACTER SET utf8 NOT NULL,`points` INT(9) NOT NULL default 0,`expire` BIGINT UNSIGNED,PRIMARY KEY (`key`)) ENGINE = INNODB;"}},{key:"clientType",get:function(){return this._clientType},set:function(e){if("undefined"===typeof e)if("Connection"===this.client.constructor.name)e="connection";else if("Pool"===this.client.constructor.name)e="pool";else{if("Sequelize"!==this.client.constructor.name)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}},{key:"dbName",get:function(){return this._dbName},set:function(e){this._dbName="undefined"===typeof e?"rtlmtrflx":e}},{key:"tableName",get:function(){return this._tableName},set:function(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}},{key:"tableCreated",get:function(){return this._tableCreated},set:function(e){this._tableCreated="undefined"!==typeof e&&!!e}},{key:"clearExpiredByTimeout",get:function(){return this._clearExpiredByTimeout},set:function(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}},{key:"_getRateLimiterRes",value:function(e,t,r){var a=new c,i=n(r,1)[0];return a.isFirstInDuration=t===i.points,a.consumedPoints=a.isFirstInDuration?t:i.points,a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.msBeforeNext=i.expire?Math.max(i.expire-Date.now(),0):-1,a}},{key:"_upsertTransaction",value:function(e,t,r,n,a){var i=this;return new Promise((function(o,s){e.query("BEGIN",(function(u){if(u)return e.rollback(),s(u);var c,l,f=Date.now(),p=n>0?f+n:null;a?(c="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = ?, \n            expire = ?;",l=[i.dbName,i.tableName,t,r,p,r,p]):(c="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = IF(expire <= ?, ?, points + (?)), \n            expire = IF(expire <= ?, ?, expire);",l=[i.dbName,i.tableName,t,r,p,f,r,r,f,p]),e.query(c,l,(function(r){if(r)return e.rollback(),s(r);e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[i.dbName,i.tableName,t],(function(t,r){if(t)return e.rollback(),s(t);e.query("COMMIT",(function(t){if(t)return e.rollback(),s(t);o(r)}))}))}))}))}))}},{key:"_upsert",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.tableCreated?new Promise((function(i,o){n._getConnection().then((function(s){n._upsertTransaction(s,e,t,r,a).then((function(e){i(e),n._releaseConnection(s)})).catch((function(e){o(e),n._releaseConnection(s)}))})).catch((function(e){o(e)}))})):Promise.reject(Error("Table is not created yet"))}},{key:"_get",value:function(e){var t=this;return this.tableCreated?new Promise((function(r,n){t._getConnection().then((function(a){a.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[t.dbName,t.tableName,e,Date.now()],(function(e,i){e?n(e):0===i.length?r(null):r(i),t._releaseConnection(a)}))})).catch((function(e){n(e)}))})):Promise.reject(Error("Table is not created yet"))}},{key:"_delete",value:function(e){var t=this;return this.tableCreated?new Promise((function(r,n){t._getConnection().then((function(a){a.query("DELETE FROM ??.?? WHERE `key` = ?",[t.dbName,t.tableName,e],(function(e,i){e?n(e):r(i.affectedRows>0),t._releaseConnection(a)}))})).catch((function(e){n(e)}))})):Promise.reject(Error("Table is not created yet"))}}]),r}(u);e.exports=l},3654:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(1434),u=r(4819),c=function(e){"use strict";i(r,e);var t=o(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n(this,r),(a=t.call(this,e)).client=e.storeClient,a.clientType=e.storeType,a.tableName=e.tableName,a.clearExpiredByTimeout=e.clearExpiredByTimeout,a.tableCreated=e.tableCreated,a.tableCreated?"function"===typeof i&&i():a._createTable().then((function(){a.tableCreated=!0,a.clearExpiredByTimeout&&a._clearExpiredHourAgo(),"function"===typeof i&&i()})).catch((function(e){if("function"!==typeof i)throw e;i(e)})),a}return a(r,[{key:"clearExpired",value:function(e){var t=this;return new Promise((function(r){var n={name:"rlflx-clear-expired",text:"DELETE FROM ".concat(t.tableName," WHERE expire < $1"),values:[e]};t._query(n).then((function(){r()})).catch((function(){r()}))}))}},{key:"_clearExpiredHourAgo",value:function(){var e=this;this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((function(){e.clearExpired(Date.now()-36e5).then((function(){e._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}},{key:"_getConnection",value:function(){switch(this.clientType){case"pool":default:return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master)}}},{key:"_releaseConnection",value:function(e){switch(this.clientType){case"pool":case"typeorm":default:return!0;case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e)}}},{key:"_createTable",value:function(){var e=this;return new Promise((function(t,r){e._query({text:e._getCreateTableStmt()}).then((function(){t()})).catch((function(e){"23505"===e.code?t():r(e)}))}))}},{key:"_getCreateTableStmt",value:function(){return"CREATE TABLE IF NOT EXISTS ".concat(this.tableName," ( \n      key varchar(255) PRIMARY KEY,\n      points integer NOT NULL DEFAULT 0,\n      expire bigint\n    );")}},{key:"clientType",get:function(){return this._clientType},set:function(e){var t=this.client.constructor.name;if("undefined"===typeof e)if("Client"===t)e="client";else if("Pool"===t||"BoundPool"===t)e="pool";else{if("Sequelize"!==t)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}},{key:"tableName",get:function(){return this._tableName},set:function(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}},{key:"tableCreated",get:function(){return this._tableCreated},set:function(e){this._tableCreated="undefined"!==typeof e&&!!e}},{key:"clearExpiredByTimeout",get:function(){return this._clearExpiredByTimeout},set:function(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}},{key:"_getRateLimiterRes",value:function(e,t,r){var n=new u,a=r.rows[0];return n.isFirstInDuration=t===a.points,n.consumedPoints=n.isFirstInDuration?t:a.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=a.expire?Math.max(a.expire-Date.now(),0):-1,n}},{key:"_query",value:function(e){var t=this,r=this.tableName.toLowerCase(),n={name:"".concat(r,":").concat(e.name),text:e.text,values:e.values};return new Promise((function(e,r){t._getConnection().then((function(a){a.query(n).then((function(r){e(r),t._releaseConnection(a)})).catch((function(e){r(e),t._releaseConnection(a)}))})).catch((function(e){r(e)}))}))}},{key:"_upsert",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));var a=r>0?Date.now()+r:null,i=n?" $3 ":" CASE\n             WHEN ".concat(this.tableName,".expire <= $4 THEN $3\n             ELSE ").concat(this.tableName,".expire\n            END ");return this._query({name:n?"rlflx-upsert-force":"rlflx-upsert",text:"\n            INSERT INTO ".concat(this.tableName," VALUES ($1, $2, $3)\n              ON CONFLICT(key) DO UPDATE SET\n                points = CASE\n                          WHEN (").concat(this.tableName,".expire <= $4 OR 1=").concat(n?1:0,") THEN $2\n                          ELSE ").concat(this.tableName,".points + ($2)\n                         END,\n                expire = ").concat(i,"\n            RETURNING points, expire;"),values:[e,t,a,Date.now()]})}},{key:"_get",value:function(e){var t=this;return this.tableCreated?new Promise((function(r,n){t._query({name:"rlflx-get",text:"\n            SELECT points, expire FROM ".concat(t.tableName," WHERE key = $1 AND (expire > $2 OR expire IS NULL);"),values:[e,Date.now()]}).then((function(e){0===e.rowCount&&(e=null),r(e)})).catch((function(e){n(e)}))})):Promise.reject(Error("Table is not created yet"))}},{key:"_delete",value:function(e){return this.tableCreated?this._query({name:"rlflx-delete",text:"DELETE FROM ".concat(this.tableName," WHERE key = $1"),values:[e]}).then((function(e){return e.rowCount>0})):Promise.reject(Error("Table is not created yet"))}}]),r}(s);e.exports=c},3081:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(4688),o=4294967295,s="limiter";e.exports=function(){"use strict";function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxQueueSize:o};n(this,e),this._queueLimiters={KEY_DEFAULT:new u(t,r)},this._limiterFlexible=t,this._maxQueueSize=r.maxQueueSize}return a(e,[{key:"getTokensRemaining",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this._queueLimiters[e]?this._queueLimiters[e].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}},{key:"removeTokens",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return this._queueLimiters[t]||(this._queueLimiters[t]=new u(this._limiterFlexible,{key:t,maxQueueSize:this._maxQueueSize})),this._queueLimiters[t].removeTokens(e)}}]),e}();var u=function(){"use strict";function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxQueueSize:o,key:s};n(this,e),this._key=r.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=t,this._maxQueueSize=r.maxQueueSize}return a(e,[{key:"getTokensRemaining",value:function(){var e=this;return this._limiterFlexible.get(this._key).then((function(t){return null!==t?t.remainingPoints:e._limiterFlexible.points}))}},{key:"removeTokens",value:function(e){var t=this;return new Promise((function(r,n){e>t._limiterFlexible.points?n(new i("Requested tokens ".concat(e," exceeds maximum ").concat(t._limiterFlexible.points," tokens per interval"))):t._queue.length>0?t._queueRequest.call(t,r,n,e):t._limiterFlexible.consume(t._key,e).then((function(e){r(e.remainingPoints)})).catch((function(a){a instanceof Error?n(a):(t._queueRequest.call(t,r,n,e),null===t._waitTimeout&&(t._waitTimeout=setTimeout(t._processFIFO.bind(t),a.msBeforeNext)))}))}))}},{key:"_queueRequest",value:function(e,t,r){var n=this;n._queue.length<n._maxQueueSize?n._queue.push({resolve:e,reject:t,tokens:r}):t(new i("Number of requests reached it's maximum ".concat(n._maxQueueSize)))}},{key:"_processFIFO",value:function(){var e=this;if(null!==e._waitTimeout&&(clearTimeout(e._waitTimeout),e._waitTimeout=null),0!==e._queue.length){var t=e._queue.shift();e._limiterFlexible.consume(e._key,t.tokens).then((function(r){t.resolve(r.remainingPoints),e._processFIFO.call(e)})).catch((function(r){r instanceof Error?(t.reject(r),e._processFIFO.call(e)):(e._queue.unshift(t),null===e._waitTimeout&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),r.msBeforeNext)))}))}}}]),e}()},8139:function(e,t,r){var n=r(7424).default,a=r(6690).default,i=r(9728).default,o=r(1655).default,s=r(6389).default,u=r(1434),c=r(4819),l="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ",f=function(e){"use strict";o(r,e);var t=s(r);function r(e){var n;return a(this,r),n=t.call(this,e),e.redis?n.client=e.redis:n.client=e.storeClient,n._rejectIfRedisNotReady=!!e.rejectIfRedisNotReady,"function"===typeof n.client.defineCommand&&n.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:l}),n}return i(r,[{key:"_isRedisReady",value:function(){return!this._rejectIfRedisNotReady||(!this.client.status||"ready"===this.client.status)&&!("function"===typeof this.client.isReady&&!this.client.isReady())}},{key:"_getRateLimiterRes",value:function(e,t,r){var a=n(r,2),i=a[0],o=a[1];Array.isArray(i)&&(i=n(i,2)[1],o=n(o,2)[1]);var s=new c;return s.consumedPoints=parseInt(i),s.isFirstInDuration=s.consumedPoints===t,s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s.msBeforeNext=o,s}},{key:"_upsert",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(i,o){if(!n._isRedisReady())return o(new Error("Redis connection is not ready"));var s=Math.floor(r/1e3),u=n.client.multi();if(a)s>0?u.set(e,t,"EX",s):u.set(e,t),u.pttl(e).exec((function(e,t){return e?o(e):i(t)}));else if(s>0){var c=function(e,t){return e?o(e):i(t)};"function"===typeof n.client.rlflxIncr?n.client.rlflxIncr(e,t,s,c):n.client.eval(l,1,e,t,s,c)}else u.incrby(e,t).pttl(e).exec((function(e,t){return e?o(e):i(t)}))}))}},{key:"_get",value:function(e){var t=this;return new Promise((function(r,a){if(!t._isRedisReady())return a(new Error("Redis connection is not ready"));t.client.multi().get(e).pttl(e).exec((function(e,t){if(e)a(e);else{if(null===n(t,1)[0])return r(null);r(t)}}))}))}},{key:"_delete",value:function(e){var t=this;return new Promise((function(r,n){t.client.del(e,(function(e,t){e?n(e):r(t>0)}))}))}}]),r}(u);e.exports=f},4819:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(e){"use strict";function t(e,r,a,i){n(this,t),this.remainingPoints="undefined"===typeof e?0:e,this.msBeforeNext="undefined"===typeof r?0:r,this.consumedPoints="undefined"===typeof a?0:a,this.isFirstInDuration="undefined"!==typeof i&&i}return a(t,[{key:"msBeforeNext",get:function(){return this._msBeforeNext},set:function(e){return this._msBeforeNext=e,this}},{key:"remainingPoints",get:function(){return this._remainingPoints},set:function(e){return this._remainingPoints=e,this}},{key:"consumedPoints",get:function(){return this._consumedPoints},set:function(e){return this._consumedPoints=e,this}},{key:"isFirstInDuration",get:function(){return this._isFirstInDuration},set:function(e){this._isFirstInDuration=Boolean(e)}},{key:"_getDecoratedProperties",value:function(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}},{key:e,value:function(){return this._getDecoratedProperties()}},{key:"toString",value:function(){return JSON.stringify(this._getDecoratedProperties())}},{key:"toJSON",value:function(){return this._getDecoratedProperties()}}]),t}(Symbol.for("nodejs.util.inspect.custom"))},1434:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(1655).default,o=r(6389).default,s=r(8855),u=r(6704),c=r(4819);e.exports=function(e){"use strict";i(r,e);var t=o(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,r),(e=t.call(this,a)).inMemoryBlockOnConsumed=a.inMemoryBlockOnConsumed||a.inmemoryBlockOnConsumed,e.inMemoryBlockDuration=a.inMemoryBlockDuration||a.inmemoryBlockDuration,e.insuranceLimiter=a.insuranceLimiter,e._inMemoryBlockedKeys=new u,e}return a(r,[{key:"client",get:function(){return this._client},set:function(e){if("undefined"===typeof e)throw new Error("storeClient is not set");this._client=e}},{key:"_afterConsume",value:function(e,t,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=this._getRateLimiterRes(r,n,a);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&o.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(r,o.msBeforeNext),o.consumedPoints>this.points?t(o):e(o);if(o.consumedPoints>this.points){var s=Promise.resolve();this.blockDuration>0&&o.consumedPoints<=this.points+n&&(o.msBeforeNext=this.msBlockDuration,s=this._block(r,o.consumedPoints,this.msBlockDuration,i)),this.inMemoryBlockOnConsumed>0&&o.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(r,this.inMemoryBlockDuration),o.msBeforeNext=this.msInMemoryBlockDuration),s.then((function(){t(o)})).catch((function(e){t(e)}))}else if(this.execEvenly&&o.msBeforeNext>0&&!o.isFirstInDuration){var u=Math.ceil(o.msBeforeNext/(o.remainingPoints+2));u<this.execEvenlyMinDelayMs&&(u=o.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(e,u,o)}else e(o)}},{key:"_handleError",value:function(e,t,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};this.insuranceLimiter instanceof s?this.insuranceLimiter[t](a,i,o).then((function(e){r(e)})).catch((function(e){n(e)})):n(e)}},{key:"_inmemoryBlockedKeys",get:function(){return this._inMemoryBlockedKeys}},{key:"getInmemoryBlockMsBeforeExpire",value:function(e){return this.getInMemoryBlockMsBeforeExpire(e)}},{key:"inmemoryBlockOnConsumed",get:function(){return this.inMemoryBlockOnConsumed},set:function(e){this.inMemoryBlockOnConsumed=e}},{key:"inmemoryBlockDuration",get:function(){return this.inMemoryBlockDuration},set:function(e){this.inMemoryBlockDuration=e}},{key:"msInmemoryBlockDuration",get:function(){return 1e3*this.inMemoryBlockDuration}},{key:"getInMemoryBlockMsBeforeExpire",value:function(e){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(e):0}},{key:"inMemoryBlockOnConsumed",get:function(){return this._inMemoryBlockOnConsumed},set:function(e){if(this._inMemoryBlockOnConsumed=e?parseInt(e):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}},{key:"inMemoryBlockDuration",get:function(){return this._inMemoryBlockDuration},set:function(e){if(this._inMemoryBlockDuration=e?parseInt(e):0,this.inMemoryBlockDuration>0&&0===this.inMemoryBlockOnConsumed)throw new Error("inMemoryBlockOnConsumed option must be set up")}},{key:"msInMemoryBlockDuration",get:function(){return 1e3*this._inMemoryBlockDuration}},{key:"insuranceLimiter",get:function(){return this._insuranceLimiter},set:function(e){if("undefined"!==typeof e&&!(e instanceof s))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=e,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}},{key:"block",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=1e3*t;return this._block(this.getKey(e),this.points+1,n,r)}},{key:"set",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=1e3*(r>=0?r:this.duration);return this._block(this.getKey(e),t,a,n)}},{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,i){var o=t.getKey(e),s=t.getInMemoryBlockMsBeforeExpire(o);if(s>0)return i(new c(0,s));t._upsert(o,r,1e3*t._getKeySecDuration(n),!1,n).then((function(e){t._afterConsume(a,i,o,r,e)})).catch((function(o){t._handleError(o,"consume",a,i,e,r,n)}))}))}},{key:"penalty",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.getKey(e);return new Promise((function(i,o){t._upsert(a,r,1e3*t._getKeySecDuration(n),!1,n).then((function(e){i(t._getRateLimiterRes(a,r,e))})).catch((function(a){t._handleError(a,"penalty",i,o,e,r,n)}))}))}},{key:"reward",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.getKey(e);return new Promise((function(i,o){t._upsert(a,-r,1e3*t._getKeySecDuration(n),!1,n).then((function(e){i(t._getRateLimiterRes(a,-r,e))})).catch((function(a){t._handleError(a,"reward",i,o,e,r,n)}))}))}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getKey(e);return new Promise((function(a,i){t._get(n,r).then((function(e){a(null===e||"undefined"===typeof e?null:t._getRateLimiterRes(n,0,e))})).catch((function(n){t._handleError(n,"get",a,i,e,r)}))}))}},{key:"delete",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getKey(e);return new Promise((function(a,i){t._delete(n,r).then((function(e){t._inMemoryBlockedKeys.delete(n),a(e)})).catch((function(n){t._handleError(n,"delete",a,i,e,r)}))}))}},{key:"deleteInMemoryBlockedAll",value:function(){this._inMemoryBlockedKeys.delete()}},{key:"_getRateLimiterRes",value:function(e,t,r){throw new Error("You have to implement the method '_getRateLimiterRes'!")}},{key:"_block",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(i,o){n._upsert(e,t,r,!0,a).then((function(){i(new c(0,r>0?r:-1,t))})).catch((function(t){n._handleError(t,"block",i,o,n.parseKey(e),r/1e3,a)}))}))}},{key:"_get",value:function(e){throw new Error("You have to implement the method '_get'!")}},{key:"_delete",value:function(e){throw new Error("You have to implement the method '_delete'!")}},{key:"_upsert",value:function(e,t,r){throw new Error("You have to implement the method '_upsert'!")}}]),r}(s)},4066:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(8855);e.exports=function(){"use strict";function e(){n(this,e);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length<1)throw new Error("RateLimiterUnion: at least one limiter have to be passed");r.forEach((function(e){if(!(e instanceof i))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")})),this._limiters=r}return a(e,[{key:"consume",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(n,a){var i=[];t._limiters.forEach((function(t){i.push(t.consume(e,r).catch((function(e){return{rejected:!0,rej:e}})))})),Promise.all(i).then((function(e){var r={},i=!1;e.forEach((function(e){!0===e.rejected&&(i=!0)}));for(var o=0;o<e.length;o++)i&&!0===e[o].rejected?r[t._limiters[o].keyPrefix]=e[o].rej:i||(r[t._limiters[o].keyPrefix]=e[o]);i?a(r):n(r)}))}))}}]),e}()},9682:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(){n(this,e),this._keys={},this._addedKeysAmount=0}return a(e,[{key:"collectExpired",value:function(){var e=this,t=Date.now();Object.keys(this._keys).forEach((function(r){e._keys[r]<=t&&delete e._keys[r]})),this._addedKeysAmount=Object.keys(this._keys).length}},{key:"add",value:function(e,t){this.addMs(e,1e3*t)}},{key:"addMs",value:function(e,t){this._keys[e]=Date.now()+t,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}},{key:"msBeforeExpire",value:function(e){var t=this._keys[e];if(t&&t>=Date.now()){this.collectExpired();var r=Date.now();return t>=r?t-r:0}return 0}},{key:"delete",value:function(e){var t=this;e?delete this._keys[e]:Object.keys(this._keys).forEach((function(e){delete t._keys[e]}))}}]),e}()},6704:function(e,t,r){var n=r(9682);e.exports=n},4327:function(e,t,r){var n=r(6690).default,a=r(9728).default,i=r(9359),o=r(4819);e.exports=function(){"use strict";function e(){n(this,e),this._storage={}}return a(e,[{key:"incrby",value:function(e,t,r){if(this._storage[e]){var n=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return 0!==n?(this._storage[e].value=this._storage[e].value+t,new o(0,n,this._storage[e].value,!1)):this.set(e,t,r)}return this.set(e,t,r)}},{key:"set",value:function(e,t,r){var n=this,a=1e3*r;return this._storage[e]&&this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),this._storage[e]=new i(t,a>0?new Date(Date.now()+a):null),a>0&&(this._storage[e].timeoutId=setTimeout((function(){delete n._storage[e]}),a),this._storage[e].timeoutId.unref&&this._storage[e].timeoutId.unref()),new o(0,0===a?-1:a,this._storage[e].value,!0)}},{key:"get",value:function(e){if(this._storage[e]){var t=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return new o(0,t,this._storage[e].value,!1)}return null}},{key:"delete",value:function(e){return!!this._storage[e]&&(this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),delete this._storage[e],!0)}}]),e}()},9359:function(e,t,r){var n=r(6690).default,a=r(9728).default;e.exports=function(){"use strict";function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,e),this.value=t,this.expiresAt=r,this.timeoutId=a}return a(e,[{key:"value",get:function(){return this._value},set:function(e){this._value=parseInt(e)}},{key:"expiresAt",get:function(){return this._expiresAt},set:function(e){e instanceof Date||!Number.isInteger(e)||(e=new Date(e)),this._expiresAt=e}},{key:"timeoutId",get:function(){return this._timeoutId},set:function(e){this._timeoutId=e}}]),e}()},4688:function(e,t,r){var n=r(9728).default,a=r(6690).default,i=r(6115).default,o=r(1655).default,s=r(6389).default,u=r(3496).default;e.exports=function(e){"use strict";o(r,e);var t=s(r);function r(e,n){var o;return a(this,r),o=t.call(this),Error.captureStackTrace&&Error.captureStackTrace(i(o),o.constructor),o.name="CustomError",o.message=e,n&&(o.extra=n),o}return n(r)}(u(Error))},4463:function(e,t,r){"use strict";var n=r(2791),a=r(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},d={};function v(e,t,r,n,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function m(e,t,r,n){var a=y.hasOwnProperty(t)?y[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!f.call(d,e)||!f.call(h,e)&&(p.test(e)?d[e]=!0:(h[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var B,M=Object.assign;function U(e){if(void 0===B)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var j=!1;function F(e,t){if(!e||j)return"";j=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=n.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:Z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return Z(e(t))}catch(r){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=K(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&m(e,"checked",t,!1)}function X(e,t){J(e,t);var r=V(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&G(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function ie(e,t){var r=V(t.value),n=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function ve(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ye(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=ve(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(he).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var be=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function me(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Se(e){if(e=ma(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=ka(t),xe(e.stateNode,e.type,t))}}function Ae(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Re(){}var Ie=!1;function Pe(e,t,r){if(Ie)return e(t,r);Ie=!0;try{return Te(e,t,r)}finally{Ie=!1,(null!==_e||null!==Ee)&&(Re(),Ce())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=ka(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Ne=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Ne=!1}function Le(e,t,r,n,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(l){this.onError(l)}}var Be=!1,Me=null,Ue=!1,je=null,Fe={onError:function(e){Be=!0,Me=e}};function ze(e,t,r,n,a,i,o,s,u){Be=!1,Me=null,Le.apply(Fe,arguments)}function Ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Ze(e)!==e)throw Error(i(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(n=a.return)){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return Ve(a),e;if(o===n)return Ve(a),t;o=o.sibling}throw Error(i(188))}if(r.return!==n.return)r=a,n=o;else{for(var s=!1,u=a.child;u;){if(u===r){s=!0,r=a,n=o;break}if(u===n){s=!0,n=a,r=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===r){s=!0,r=o,n=a;break}if(u===n){s=!0,n=o,r=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Je=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&r;if(0!==o){var s=o&~a;0!==s?n=ft(s):0!==(i&=o)&&(n=ft(i))}else 0!==(o=r&~a)?n=ft(o):0!==i&&(n=ft(i));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-ot(t)),n|=e[r],t&=~a;return n}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function gt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var mt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,xt,_t,Et,St,At=!1,Ct=[],Tt=null,Rt=null,It=null,Pt=new Map,Dt=new Map,Nt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Bt(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ma(t))&&xt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=ga(e.target);if(null!==t){var r=Ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qe(r)))return e.blockedOn=t,void St(e.priority,(function(){_t(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ma(r))&&xt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);we=n,r.target.dispatchEvent(n),we=null,t.shift()}return!0}function jt(e,t,r){Ut(e)&&r.delete(t)}function Ft(){At=!1,null!==Tt&&Ut(Tt)&&(Tt=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==It&&Ut(It)&&(It=null),Pt.forEach(jt),Dt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function Zt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Rt&&zt(Rt,e),null!==It&&zt(It,e),Pt.forEach(t),Dt.forEach(t),r=0;r<Nt.length;r++)(n=Nt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Nt.length&&null===(r=Nt[0]).blockedOn;)Mt(r),null===r.blockedOn&&Nt.shift()}var qt=w.ReactCurrentBatchConfig,Vt=!0;function Kt(e,t,r,n){var a=mt,i=qt.transition;qt.transition=null;try{mt=1,Wt(e,t,r,n)}finally{mt=a,qt.transition=i}}function Ht(e,t,r,n){var a=mt,i=qt.transition;qt.transition=null;try{mt=4,Wt(e,t,r,n)}finally{mt=a,qt.transition=i}}function Wt(e,t,r,n){if(Vt){var a=Yt(e,t,r,n);if(null===a)Vn(e,t,n,Gt,r),Lt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Tt=Bt(Tt,e,t,r,n,a),!0;case"dragenter":return Rt=Bt(Rt,e,t,r,n,a),!0;case"mouseover":return It=Bt(It,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Pt.set(i,Bt(Pt.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Dt.set(i,Bt(Dt.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var i=ma(a);if(null!==i&&kt(i),null===(i=Yt(e,t,r,n))&&Vn(e,t,n,Gt,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else Vn(e,t,n,null,r)}}var Gt=null;function Yt(e,t,r,n){if(Gt=null,null!==(e=ga(e=ke(n))))if(null===(t=Ze(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,$t=null;function er(){if($t)return $t;var e,t,r=Xt,n=r.length,a="value"in Jt?Jt.value:Jt.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,i){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,or,sr,ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(ur),lr=M({},ur,{view:0,detail:0}),fr=ar(lr),pr=M({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(ir=e.screenX-sr.screenX,or=e.screenY-sr.screenY):or=ir=0,sr=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:or}}),hr=ar(pr),dr=ar(M({},pr,{dataTransfer:0})),vr=ar(M({},lr,{relatedTarget:0})),yr=ar(M({},ur,{animationName:0,elapsedTime:0,pseudoElement:0})),br=M({},ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gr=ar(br),mr=ar(M({},ur,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xr[e])&&!!t[e]}function Er(){return _r}var Sr=M({},lr,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ar=ar(Sr),Cr=ar(M({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tr=ar(M({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Rr=ar(M({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ir=M({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=ar(Ir),Dr=[9,13,27,32],Nr=l&&"CompositionEvent"in window,Or=null;l&&"documentMode"in document&&(Or=document.documentMode);var Lr=l&&"TextEvent"in window&&!Or,Br=l&&(!Nr||Or&&8<Or&&11>=Or),Mr=String.fromCharCode(32),Ur=!1;function jr(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zr[e.type]:"textarea"===t}function Vr(e,t,r,n){Ae(n),0<(t=Hn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Kr=null,Hr=null;function Wr(e){Un(e,0)}function Gr(e){if(W(wa(e)))return e}function Yr(e,t){if("change"===e)return t}var Qr=!1;if(l){var Jr;if(l){var Xr="oninput"in document;if(!Xr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Xr="function"===typeof $r.oninput}Jr=Xr}else Jr=!1;Qr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){Kr&&(Kr.detachEvent("onpropertychange",tn),Hr=Kr=null)}function tn(e){if("value"===e.propertyName&&Gr(Hr)){var t=[];Vr(t,Hr,e,ke(e)),Pe(Wr,t)}}function rn(e,t,r){"focusin"===e?(en(),Hr=r,(Kr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Hr)}function an(e,t){if("click"===e)return Gr(t)}function on(e,t){if("input"===e||"change"===e)return Gr(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function un(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!f.call(t,a)||!sn(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ln(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function fn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pn(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=G((e=t.contentWindow).document)}return t}function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function dn(e){var t=pn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fn(r.ownerDocument.documentElement,r)){if(null!==n&&hn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=void 0===n.end?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=ln(r,i);var o=ln(r,n);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vn=l&&"documentMode"in document&&11>=document.documentMode,yn=null,bn=null,gn=null,mn=!1;function wn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;mn||null==yn||yn!==G(n)||("selectionStart"in(n=yn)&&hn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},gn&&un(gn,n)||(gn=n,0<(n=Hn(bn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yn)))}function kn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xn={animationend:kn("Animation","AnimationEnd"),animationiteration:kn("Animation","AnimationIteration"),animationstart:kn("Animation","AnimationStart"),transitionend:kn("Transition","TransitionEnd")},_n={},En={};function Sn(e){if(_n[e])return _n[e];if(!xn[e])return e;var t,r=xn[e];for(t in r)if(r.hasOwnProperty(t)&&t in En)return _n[e]=r[t];return e}l&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var An=Sn("animationend"),Cn=Sn("animationiteration"),Tn=Sn("animationstart"),Rn=Sn("transitionend"),In=new Map,Pn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){In.set(e,t),u(t,[e])}for(var Nn=0;Nn<Pn.length;Nn++){var On=Pn[Nn];Dn(On.toLowerCase(),"on"+(On[0].toUpperCase()+On.slice(1)))}Dn(An,"onAnimationEnd"),Dn(Cn,"onAnimationIteration"),Dn(Tn,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(Rn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Mn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,o,s,u,c){if(ze.apply(this,arguments),Be){if(!Be)throw Error(i(198));var l=Me;Be=!1,Me=null,Ue||(Ue=!0,je=l)}}(n,t,void 0,e),e.currentTarget=null}function Un(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Mn(a,s,c),i=u}else for(o=0;o<n.length;o++){if(u=(s=n[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Mn(a,s,c),i=u}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jn(e,t){var r=t[va];void 0===r&&(r=t[va]=new Set);var n=e+"__bubble";r.has(n)||(qn(t,e,2,!1),r.add(n))}function Fn(e,t,r){var n=0;t&&(n|=4),qn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Zn(e){if(!e[zn]){e[zn]=!0,o.forEach((function(t){"selectionchange"!==t&&(Bn.has(t)||Fn(t,!1,e),Fn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Fn("selectionchange",!1,t))}}function qn(e,t,r,n){switch(Qt(t)){case 1:var a=Kt;break;case 4:a=Ht;break;default:a=Wt}r=a.bind(null,t,r,e),a=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Vn(e,t,r,n,a){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=n.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ga(s)))return;if(5===(u=o.tag)||6===u){n=i=o;continue e}s=s.parentNode}}n=n.return}Pe((function(){var n=i,a=ke(r),o=[];e:{var s=In.get(e);if(void 0!==s){var u=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":u=Ar;break;case"focusin":c="focus",u=vr;break;case"focusout":c="blur",u=vr;break;case"beforeblur":case"afterblur":u=vr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=dr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tr;break;case An:case Cn:case Tn:u=yr;break;case Rn:u=Rr;break;case"scroll":u=fr;break;case"wheel":u=Pr;break;case"copy":case"cut":case"paste":u=gr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cr}var l=0!==(4&t),f=!l&&"scroll"===e,p=l?null!==s?s+"Capture":null:s;l=[];for(var h,d=n;null!==d;){var v=(h=d).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==p&&(null!=(v=De(d,p))&&l.push(Kn(d,v,h)))),f)break;d=d.return}0<l.length&&(s=new u(s,c,null,r,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===we||!(c=r.relatedTarget||r.fromElement)||!ga(c)&&!c[da])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=n,null!==(c=(c=r.relatedTarget||r.toElement)?ga(c):null)&&(c!==(f=Ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=n),u!==c)){if(l=hr,v="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cr,v="onPointerLeave",p="onPointerEnter",d="pointer"),f=null==u?s:wa(u),h=null==c?s:wa(c),(s=new l(v,d+"leave",u,r,a)).target=f,s.relatedTarget=h,v=null,ga(a)===n&&((l=new l(p,d+"enter",c,r,a)).target=h,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(p=c,d=0,h=l=u;h;h=Wn(h))d++;for(h=0,v=p;v;v=Wn(v))h++;for(;0<d-h;)l=Wn(l),d--;for(;0<h-d;)p=Wn(p),h--;for(;d--;){if(l===p||null!==p&&l===p.alternate)break e;l=Wn(l),p=Wn(p)}l=null}else l=null;null!==u&&Gn(o,s,u,l,!1),null!==c&&null!==f&&Gn(o,f,c,l,!0)}if("select"===(u=(s=n?wa(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Yr;else if(qr(s))if(Qr)y=on;else{y=nn;var b=rn}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=an);switch(y&&(y=y(e,n))?Vr(o,y,r,a):(b&&b(e,s,n),"focusout"===e&&(b=s._wrapperState)&&b.controlled&&"number"===s.type&&ee(s,"number",s.value)),b=n?wa(n):window,e){case"focusin":(qr(b)||"true"===b.contentEditable)&&(yn=b,bn=n,gn=null);break;case"focusout":gn=bn=yn=null;break;case"mousedown":mn=!0;break;case"contextmenu":case"mouseup":case"dragend":mn=!1,wn(o,r,a);break;case"selectionchange":if(vn)break;case"keydown":case"keyup":wn(o,r,a)}var g;if(Nr)e:{switch(e){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else zr?jr(e,r)&&(m="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(m="onCompositionStart");m&&(Br&&"ko"!==r.locale&&(zr||"onCompositionStart"!==m?"onCompositionEnd"===m&&zr&&(g=er()):(Xt="value"in(Jt=a)?Jt.value:Jt.textContent,zr=!0)),0<(b=Hn(n,m)).length&&(m=new mr(m,e,null,r,a),o.push({event:m,listeners:b}),g?m.data=g:null!==(g=Fr(r))&&(m.data=g))),(g=Lr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Mr);case"textInput":return(e=t.data)===Mr&&Ur?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Nr&&jr(e,t)?(e=er(),$t=Xt=Jt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Br&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Hn(n,"onBeforeInput")).length&&(a=new mr("onBeforeInput","beforeinput",null,r,a),o.push({event:a,listeners:n}),a.data=g))}Un(o,t)}))}function Kn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=De(e,r))&&n.unshift(Kn(e,i,a)),null!=(i=De(e,t))&&n.push(Kn(e,i,a))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gn(e,t,r,n,a){for(var i=t._reactName,o=[];null!==r&&r!==n;){var s=r,u=s.alternate,c=s.stateNode;if(null!==u&&u===n)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=De(r,i))&&o.unshift(Kn(r,u,s)):a||null!=(u=De(r,i))&&o.push(Kn(r,u,s))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Yn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Yn,"\n").replace(Qn,"")}function Xn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(i(425))}function $n(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:na;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void Zt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);Zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),pa="__reactFiber$"+fa,ha="__reactProps$"+fa,da="__reactContainer$"+fa,va="__reactEvents$"+fa,ya="__reactListeners$"+fa,ba="__reactHandles$"+fa;function ga(e){var t=e[pa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[da]||r[pa]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=la(e);null!==e;){if(r=e[pa])return r;e=la(e)}return t}r=(e=r).parentNode}return null}function ma(e){return!(e=e[pa]||e[da])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ka(e){return e[ha]||null}var xa=[],_a=-1;function Ea(e){return{current:e}}function Sa(e){0>_a||(e.current=xa[_a],xa[_a]=null,_a--)}function Aa(e,t){_a++,xa[_a]=e.current,e.current=t}var Ca={},Ta=Ea(Ca),Ra=Ea(!1),Ia=Ca;function Pa(e,t){var r=e.type.contextTypes;if(!r)return Ca;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in r)i[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Na(){Sa(Ra),Sa(Ta)}function Oa(e,t,r){if(Ta.current!==Ca)throw Error(i(168));Aa(Ta,t),Aa(Ra,r)}function La(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(i(108,q(e)||"Unknown",a));return M({},r,n)}function Ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Ia=Ta.current,Aa(Ta,e),Aa(Ra,Ra.current),!0}function Ma(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=La(e,t,Ia),n.__reactInternalMemoizedMergedChildContext=e,Sa(Ra),Sa(Ta),Aa(Ta,e)):Sa(Ra),Aa(Ra,r)}var Ua=null,ja=!1,Fa=!1;function za(e){null===Ua?Ua=[e]:Ua.push(e)}function Za(){if(!Fa&&null!==Ua){Fa=!0;var e=0,t=mt;try{var r=Ua;for(mt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ua=null,ja=!1}catch(a){throw null!==Ua&&(Ua=Ua.slice(e+1)),We($e,Za),a}finally{mt=t,Fa=!1}}return null}var qa=[],Va=0,Ka=null,Ha=0,Wa=[],Ga=0,Ya=null,Qa=1,Ja="";function Xa(e,t){qa[Va++]=Ha,qa[Va++]=Ka,Ka=e,Ha=t}function $a(e,t,r){Wa[Ga++]=Qa,Wa[Ga++]=Ja,Wa[Ga++]=Ya,Ya=e;var n=Qa;e=Ja;var a=32-ot(n)-1;n&=~(1<<a),r+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Qa=1<<32-ot(t)+a|r<<a|n,Ja=i+e}else Qa=1<<i|r<<a|n,Ja=e}function ei(e){null!==e.return&&(Xa(e,1),$a(e,1,0))}function ti(e){for(;e===Ka;)Ka=qa[--Va],qa[Va]=null,Ha=qa[--Va],qa[Va]=null;for(;e===Ya;)Ya=Wa[--Ga],Wa[Ga]=null,Ja=Wa[--Ga],Wa[Ga]=null,Qa=Wa[--Ga],Wa[Ga]=null}var ri=null,ni=null,ai=!1,ii=null;function oi(e,t){var r=Dc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function si(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,ni=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ya?{id:Qa,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Dc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ri=e,ni=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ni;if(t){var r=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=ca(r.nextSibling);var n=ri;t&&si(e,t)?oi(n,r):(e.flags=-4097&e.flags|2,ai=!1,ri=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ri=e}}}function li(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function fi(e){if(e!==ri)return!1;if(!ai)return li(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ni)){if(ui(e))throw pi(),Error(i(418));for(;t;)oi(e,t),t=ca(t.nextSibling)}if(li(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ni=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ni=null}}else ni=ri?ca(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ni;e;)e=ca(e.nextSibling)}function hi(){ni=ri=null,ai=!1}function di(e){null===ii?ii=[e]:ii.push(e)}var vi=w.ReactCurrentBatchConfig;function yi(e,t){if(e&&e.defaultProps){for(var r in t=M({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var bi=Ea(null),gi=null,mi=null,wi=null;function ki(){wi=mi=gi=null}function xi(e){var t=bi.current;Sa(bi),e._currentValue=t}function _i(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ei(e,t){gi=e,wi=mi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Si(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===mi){if(null===gi)throw Error(i(308));mi=e,gi.dependencies={lanes:0,firstContext:e}}else mi=mi.next=e;return t}var Ai=null;function Ci(e){null===Ai?Ai=[e]:Ai.push(e)}function Ti(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Ci(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ri(e,n)}function Ri(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ii=!1;function Pi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ni(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Ru)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ri(e,r)}return null===(a=n.interleaved)?(t.next=t,Ci(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ri(e,r)}function Li(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,gt(e,r)}}function Bi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?a=i=o:i=i.next=o,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Mi(e,t,r,n){var a=e.updateQueue;Ii=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?i=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var f=a.baseState;for(o=0,l=c=u=null,s=i;;){var p=s.lane,h=s.eventTime;if((n&p)===p){null!==l&&(l=l.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var d=e,v=s;switch(p=t,h=r,v.tag){case 1:if("function"===typeof(d=v.payload)){f=d.call(h,f,p);break e}f=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(p="function"===typeof(d=v.payload)?d.call(h,f,p):d)||void 0===p)break e;f=M({},f,p);break e;case 2:Ii=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=h,u=f):l=l.next=h,o|=p;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(p=s).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===l&&(u=f),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=f}}function Ui(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(i(191,a));a.call(n)}}}var ji=(new n.Component).refs;function Fi(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:M({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var zi={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tc(),a=rc(e),i=Ni(n,a);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Oi(e,i,a))&&(nc(t,e,a,n),Li(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tc(),a=rc(e),i=Ni(n,a);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Oi(e,i,a))&&(nc(t,e,a,n),Li(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tc(),n=rc(e),a=Ni(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Oi(e,a,n))&&(nc(t,e,n,r),Li(t,e,n))}};function Zi(e,t,r,n,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!un(r,n)||!un(a,i))}function qi(e,t,r){var n=!1,a=Ca,i=t.contextType;return"object"===typeof i&&null!==i?i=Si(i):(a=Da(t)?Ia:Ta.current,i=(n=null!==(n=t.contextTypes)&&void 0!==n)?Pa(e,a):Ca),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zi,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Vi(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&zi.enqueueReplaceState(t,t.state,null)}function Ki(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=ji,Pi(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Si(i):(i=Da(t)?Ia:Ta.current,a.context=Pa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Fi(e,t,i,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&zi.enqueueReplaceState(a,a.state,null),Mi(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Hi(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var a=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===ji&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gi(e){return(0,e._init)(e._payload)}function Yi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,r,n){return null===t||6!==t.tag?((t=Uc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===_?f(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&Gi(i)===t.type)?((n=a(t,r.props)).ref=Hi(e,t,r),n.return=e,n):((n=Lc(r.type,r.key,r.props,null,e.mode,n)).ref=Hi(e,t,r),n.return=e,n)}function l(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=jc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function f(e,t,r,n,i){return null===t||7!==t.tag?((t=Bc(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function p(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(r=Lc(t.type,t.key,t.props,null,e.mode,r)).ref=Hi(e,null,t),r.return=e,r;case x:return(t=jc(t,e.mode,r)).return=e,t;case D:return p(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Bc(t,e.mode,r,null)).return=e,t;Wi(e,t)}return null}function h(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:u(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return r.key===a?c(e,t,r,n):null;case x:return r.key===a?l(e,t,r,n):null;case D:return h(e,t,(a=r._init)(r._payload),n)}if(te(r)||L(r))return null!==a?null:f(e,t,r,n,null);Wi(e,r)}return null}function d(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return u(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case x:return l(t,e=e.get(null===n.key?r:n.key)||null,n,a);case D:return d(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||L(n))return f(t,e=e.get(r)||null,n,a,null);Wi(t,n)}return null}function v(a,i,s,u){for(var c=null,l=null,f=i,v=i=0,y=null;null!==f&&v<s.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var b=h(a,f,s[v],u);if(null===b){null===f&&(f=y);break}e&&f&&null===b.alternate&&t(a,f),i=o(b,i,v),null===l?c=b:l.sibling=b,l=b,f=y}if(v===s.length)return r(a,f),ai&&Xa(a,v),c;if(null===f){for(;v<s.length;v++)null!==(f=p(a,s[v],u))&&(i=o(f,i,v),null===l?c=f:l.sibling=f,l=f);return ai&&Xa(a,v),c}for(f=n(a,f);v<s.length;v++)null!==(y=d(f,a,v,s[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),i=o(y,i,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(a,e)})),ai&&Xa(a,v),c}function y(a,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var f=l=null,v=s,y=s=0,b=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(b=v,v=null):b=v.sibling;var m=h(a,v,g.value,c);if(null===m){null===v&&(v=b);break}e&&v&&null===m.alternate&&t(a,v),s=o(m,s,y),null===f?l=m:f.sibling=m,f=m,v=b}if(g.done)return r(a,v),ai&&Xa(a,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=p(a,g.value,c))&&(s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return ai&&Xa(a,y),l}for(v=n(a,v);!g.done;y++,g=u.next())null!==(g=d(v,a,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(a,e)})),ai&&Xa(a,y),l}return function e(n,i,o,u){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case k:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){r(n,l.sibling),(i=a(l,o.props.children)).return=n,n=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Gi(c)===l.type){r(n,l.sibling),(i=a(l,o.props)).ref=Hi(n,l,o),i.return=n,n=i;break e}r(n,l);break}t(n,l),l=l.sibling}o.type===_?((i=Bc(o.props.children,n.mode,u,o.key)).return=n,n=i):((u=Lc(o.type,o.key,o.props,null,n.mode,u)).ref=Hi(n,i,o),u.return=n,n=u)}return s(n);case x:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){r(n,i.sibling),(i=a(i,o.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=jc(o,n.mode,u)).return=n,n=i}return s(n);case D:return e(n,i,(l=o._init)(o._payload),u)}if(te(o))return v(n,i,o,u);if(L(o))return y(n,i,o,u);Wi(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(r(n,i.sibling),(i=a(i,o)).return=n,n=i):(r(n,i),(i=Uc(o,n.mode,u)).return=n,n=i),s(n)):r(n,i)}}var Qi=Yi(!0),Ji=Yi(!1),Xi={},$i=Ea(Xi),eo=Ea(Xi),to=Ea(Xi);function ro(e){if(e===Xi)throw Error(i(174));return e}function no(e,t){switch(Aa(to,t),Aa(eo,e),Aa($i,Xi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa($i),Aa($i,t)}function ao(){Sa($i),Sa(eo),Sa(to)}function io(e){ro(to.current);var t=ro($i.current),r=ue(t,e.type);t!==r&&(Aa(eo,e),Aa($i,r))}function oo(e){eo.current===e&&(Sa($i),Sa(eo))}var so=Ea(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,po=w.ReactCurrentBatchConfig,ho=0,vo=null,yo=null,bo=null,go=!1,mo=!1,wo=0,ko=0;function xo(){throw Error(i(321))}function _o(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function Eo(e,t,r,n,a,o){if(ho=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=r(n,a),mo){o=0;do{if(mo=!1,wo=0,25<=o)throw Error(i(301));o+=1,bo=yo=null,t.updateQueue=null,fo.current=cs,e=r(n,a)}while(mo)}if(fo.current=os,t=null!==yo&&null!==yo.next,ho=0,bo=yo=vo=null,go=!1,t)throw Error(i(300));return e}function So(){var e=0!==wo;return wo=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bo?vo.memoizedState=bo=e:bo=bo.next=e,bo}function Co(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===bo?vo.memoizedState:bo.next;if(null!==t)bo=t,yo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===bo?vo.memoizedState=bo=e:bo=bo.next=e}return bo}function To(e,t){return"function"===typeof t?t(e):t}function Ro(e){var t=Co(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=yo,a=n.baseQueue,o=r.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}n.baseQueue=a=o,r.pending=null}if(null!==a){o=a.next,n=n.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((ho&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var p={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=p,s=n):c=c.next=p,vo.lanes|=f,Mu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=n:c.next=u,sn(n,t.memoizedState)||(ws=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{o=a.lane,vo.lanes|=o,Mu|=o,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Io(e){var t=Co(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(null!==a){r.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sn(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Po(){}function Do(e,t){var r=vo,n=Co(),a=t(),o=!sn(n.memoizedState,a);if(o&&(n.memoizedState=a,ws=!0),n=n.queue,Vo(Lo.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==bo&&1&bo.memoizedState.tag){if(r.flags|=2048,jo(9,Oo.bind(null,r,n,a,t),void 0,null),null===Iu)throw Error(i(349));0!==(30&ho)||No(r,t,a)}return a}function No(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Oo(e,t,r,n){t.value=r,t.getSnapshot=n,Bo(t)&&Mo(e)}function Lo(e,t,r){return r((function(){Bo(t)&&Mo(e)}))}function Bo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(n){return!0}}function Mo(e){var t=Ri(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Fo(){return Co().memoizedState}function zo(e,t,r,n){var a=Ao();vo.flags|=e,a.memoizedState=jo(1|t,r,void 0,void 0===n?null:n)}function Zo(e,t,r,n){var a=Co();n=void 0===n?null:n;var i=void 0;if(null!==yo){var o=yo.memoizedState;if(i=o.destroy,null!==n&&_o(n,o.deps))return void(a.memoizedState=jo(t,r,i,n))}vo.flags|=e,a.memoizedState=jo(1|t,r,i,n)}function qo(e,t){return zo(8390656,8,e,t)}function Vo(e,t){return Zo(2048,8,e,t)}function Ko(e,t){return Zo(4,2,e,t)}function Ho(e,t){return Zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Zo(4,4,Wo.bind(null,t,e),r)}function Yo(){}function Qo(e,t){var r=Co();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&_o(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Jo(e,t){var r=Co();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&_o(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xo(e,t,r){return 0===(21&ho)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=r):(sn(r,t)||(r=vt(),vo.lanes|=r,Mu|=r,e.baseState=!0),t)}function $o(e,t){var r=mt;mt=0!==r&&4>r?r:4,e(!0);var n=po.transition;po.transition={};try{e(!1),t()}finally{mt=r,po.transition=n}}function es(){return Co().memoizedState}function ts(e,t,r){var n=rc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ns(e))as(t,r);else if(null!==(r=Ti(e,t,r,n))){nc(r,e,n,tc()),is(r,t,n)}}function rs(e,t,r){var n=rc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ns(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,sn(s,o)){var u=t.interleaved;return null===u?(a.next=a,Ci(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ti(e,t,a,n))&&(nc(r,e,n,a=tc()),is(r,t,n))}}function ns(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function as(e,t){mo=go=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function is(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,gt(e,r)}}var os={readContext:Si,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:Si,useCallback:function(e,t){return Ao().memoizedState=[e,void 0===t?null:t],e},useContext:Si,useEffect:qo,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var r=Ao();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ao();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ts.bind(null,vo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ao().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=vo,a=Ao();if(ai){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===Iu)throw Error(i(349));0!==(30&ho)||No(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,qo(Lo.bind(null,n,o,e),[e]),n.flags|=2048,jo(9,Oo.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Ao(),t=Iu.identifierPrefix;if(ai){var r=Ja;t=":"+t+"R"+(r=(Qa&~(1<<32-ot(Qa)-1)).toString(32)+r),0<(r=wo++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ko++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Si,useCallback:Qo,useContext:Si,useEffect:Vo,useImperativeHandle:Go,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ro,useRef:Fo,useState:function(){return Ro(To)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(Co(),yo.memoizedState,e)},useTransition:function(){return[Ro(To)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},cs={readContext:Si,useCallback:Qo,useContext:Si,useEffect:Vo,useImperativeHandle:Go,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Io,useRef:Fo,useState:function(){return Io(To)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Io(To)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var r="",n=t;do{r+=z(n),n=n.return}while(n);var a=r}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function fs(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ps(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,r){(r=Ni(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ku||(Ku=!0,Hu=n),ps(0,t)},r}function vs(e,t,r){(r=Ni(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){ps(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(r.callback=function(){ps(0,t),"function"!==typeof n&&(null===Wu?Wu=new Set([this]):Wu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ys(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new hs;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Ac.bind(null,e,t,r),t.then(e,e))}function bs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ni(-1,1)).tag=2,Oi(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var ms=w.ReactCurrentOwner,ws=!1;function ks(e,t,r,n){t.child=null===e?Ji(t,null,r,n):Qi(t,e.child,r,n)}function xs(e,t,r,n,a){r=r.render;var i=t.ref;return Ei(t,a),n=Eo(e,t,r,n,i,a),r=So(),null===e||ws?(ai&&r&&ei(t),t.flags|=1,ks(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ks(e,t,a))}function _s(e,t,r,n,a){if(null===e){var i=r.type;return"function"!==typeof i||Nc(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Lc(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,n,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((r=null!==(r=r.compare)?r:un)(o,n)&&e.ref===t.ref)return Ks(e,t,a)}return t.flags|=1,(e=Oc(i,n)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(un(i,n)&&e.ref===t.ref){if(ws=!1,t.pendingProps=n=i,0===(e.lanes&a))return t.lanes=e.lanes,Ks(e,t,a);0!==(131072&e.flags)&&(ws=!0)}}return Cs(e,t,r,n,a)}function Ss(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Ou,Nu),Nu|=r;else{if(0===(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Aa(Ou,Nu),Nu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,Aa(Ou,Nu),Nu|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,Aa(Ou,Nu),Nu|=n;return ks(e,t,a,r),t.child}function As(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,r,n,a){var i=Da(r)?Ia:Ta.current;return i=Pa(t,i),Ei(t,a),r=Eo(e,t,r,n,i,a),n=So(),null===e||ws?(ai&&n&&ei(t),t.flags|=1,ks(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ks(e,t,a))}function Ts(e,t,r,n,a){if(Da(r)){var i=!0;Ba(t)}else i=!1;if(Ei(t,a),null===t.stateNode)Vs(e,t),qi(t,r,n),Ki(t,r,n,a),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=r.contextType;"object"===typeof c&&null!==c?c=Si(c):c=Pa(t,c=Da(r)?Ia:Ta.current);var l=r.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==n||u!==c)&&Vi(t,o,n,c),Ii=!1;var p=t.memoizedState;o.state=p,Mi(t,n,o,a),u=t.memoizedState,s!==n||p!==u||Ra.current||Ii?("function"===typeof l&&(Fi(t,r,l,n),u=t.memoizedState),(s=Ii||Zi(t,r,s,n,p,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),o.props=n,o.state=u,o.context=c,n=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Di(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:yi(t.type,s),o.props=c,f=t.pendingProps,p=o.context,"object"===typeof(u=r.contextType)&&null!==u?u=Si(u):u=Pa(t,u=Da(r)?Ia:Ta.current);var h=r.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||p!==u)&&Vi(t,o,n,u),Ii=!1,p=t.memoizedState,o.state=p,Mi(t,n,o,a);var d=t.memoizedState;s!==f||p!==d||Ra.current||Ii?("function"===typeof h&&(Fi(t,r,h,n),d=t.memoizedState),(c=Ii||Zi(t,r,c,n,p,d,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,d,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,d,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=u,n=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Rs(e,t,r,n,i,a)}function Rs(e,t,r,n,a,i){As(e,t);var o=0!==(128&t.flags);if(!n&&!o)return a&&Ma(t,r,!1),Ks(e,t,i);n=t.stateNode,ms.current=t;var s=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Qi(t,e.child,null,i),t.child=Qi(t,null,s,i)):ks(e,t,s,i),t.memoizedState=n.state,a&&Ma(t,r,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),no(e,t.containerInfo)}function Ps(e,t,r,n,a){return hi(),di(a),t.flags|=256,ks(e,t,r,n),t.child}var Ds,Ns,Os,Ls,Bs={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Us(e,t,r){var n,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((n=u)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Aa(so,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,a,0,null),e=Bc(e,a,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(r),t.memoizedState=Bs,e):js(t,u));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,a,o,s){if(r)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,n=fs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=Mc({mode:"visible",children:n.children},a,0,null),(o=Bc(o,a,s,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&Qi(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Bs,o);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var u=n.dgst;return n=u,Fs(e,t,s,n=fs(o=Error(i(419)),n,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(n=Iu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ri(e,a),nc(n,e,a,-1))}return yc(),Fs(e,t,s,n=fs(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ni=ca(a.nextSibling),ri=t,ai=!0,ii=null,null!==e&&(Wa[Ga++]=Qa,Wa[Ga++]=Ja,Wa[Ga++]=Ya,Qa=e.id,Ja=e.overflow,Ya=t),t=js(t,n.children),t.flags|=4096,t)}(e,t,u,a,n,o,r);if(s){s=a.fallback,u=t.mode,n=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==n?s=Oc(n,s):(s=Bc(s,u,r,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~r,t.memoizedState=Bs,a}return e=(s=e.child).sibling,a=Oc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function js(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,r,n){return null!==n&&di(n),Qi(t,e.child,null,r),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),_i(e.return,t,r)}function Zs(e,t,r,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function qs(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ks(e,t,n.children,r),0!==(2&(n=so.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,r,t);else if(19===e.tag)zs(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Aa(so,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===uo(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Zs(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Zs(t,!0,r,null,i);break;case"together":Zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Oc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Oc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Hs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Gs(e,t,r){var n=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Da(t.type)&&Na(),Ws(t),null;case 3:return n=t.stateNode,ao(),Sa(Ra),Sa(Ta),lo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sc(ii),ii=null))),Ns(e,t),Ws(t),null;case 5:oo(t);var a=ro(to.current);if(r=t.type,null!==e&&null!=t.stateNode)Os(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return Ws(t),null}if(e=ro($i.current),fi(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[pa]=t,n[ha]=o,e=0!==(1&t.mode),r){case"dialog":jn("cancel",n),jn("close",n);break;case"iframe":case"object":case"embed":jn("load",n);break;case"video":case"audio":for(a=0;a<Ln.length;a++)jn(Ln[a],n);break;case"source":jn("error",n);break;case"img":case"image":case"link":jn("error",n),jn("load",n);break;case"details":jn("toggle",n);break;case"input":Q(n,o),jn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},jn("invalid",n);break;case"textarea":ae(n,o),jn("invalid",n)}for(var u in ge(r,o),a=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?n.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&jn("scroll",n)}switch(r){case"input":H(n),$(n,o,!0);break;case"textarea":H(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=$n)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),"select"===r&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[pa]=t,e[ha]=n,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(u=me(r,n),r){case"dialog":jn("cancel",e),jn("close",e),a=n;break;case"iframe":case"object":case"embed":jn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ln.length;a++)jn(Ln[a],e);a=n;break;case"source":jn("error",e),a=n;break;case"img":case"image":case"link":jn("error",e),jn("load",e),a=n;break;case"details":jn("toggle",e),a=n;break;case"input":Q(e,n),a=Y(e,n),jn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=M({},n,{value:void 0}),jn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),jn("invalid",e)}for(o in ge(r,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==r||""!==l)&&pe(e,l):"number"===typeof l&&pe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jn("scroll",e):null!=l&&m(e,o,l,u))}switch(r){case"input":H(e),$(e,n,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+V(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$n)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(i(166));if(r=ro(to.current),ro($i.current),fi(t)){if(n=t.stateNode,r=t.memoizedProps,n[pa]=t,(o=n.nodeValue!==r)&&null!==(e=ri))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[pa]=t,t.stateNode=n}return Ws(t),null;case 13:if(Sa(so),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ni&&0!==(1&t.mode)&&0===(128&t.flags))pi(),hi(),t.flags|=98560,o=!1;else if(o=fi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[pa]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),o=!1}else null!==ii&&(sc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):yc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return ao(),Ns(e,t),null===e&&Zn(t.stateNode.containerInfo),Ws(t),null;case 10:return xi(t.type._context),Ws(t),null;case 19:if(Sa(so),null===(o=t.memoizedState))return Ws(t),null;if(n=0!==(128&t.flags),null===(u=o.rendering))if(n)Hs(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(n=u.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Aa(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qu&&(t.flags|=128,n=!0,Hs(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=uo(u))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return Ws(t),null}else 2*Je()-o.renderingStartTime>qu&&1073741824!==r&&(t.flags|=128,n=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(r=o.last)?r.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,r=so.current,Aa(so,n?1&r|2:1&r),t):(Ws(t),null);case 22:case 23:return pc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Nu)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ti(t),t.tag){case 1:return Da(t.type)&&Na(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Sa(Ra),Sa(Ta),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Sa(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(so),null;case 4:return ao(),null;case 10:return xi(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Ds=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ns=function(){},Os=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ro($i.current);var i,o=null;switch(r){case"input":a=Y(e,a),n=Y(e,n),o=[];break;case"select":a=M({},a,{value:void 0}),n=M({},n,{value:void 0}),o=[];break;case"textarea":a=ne(e,a),n=ne(e,n),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(l in ge(r,n),r=null,a)if(!n.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var c=n[l];if(u=null!=a?a[l]:void 0,n.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(l,r)),r=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jn("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}r&&(o=o||[]).push("style",r);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,r,n){r!==n&&(t.flags|=4)};var Qs=!1,Js=!1,Xs="function"===typeof WeakSet?WeakSet:Set,$s=null;function eu(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Sc(e,t,n)}else r.current=null}function tu(e,t,r){try{r()}catch(n){Sc(e,t,n)}}var ru=!1;function nu(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&tu(t,r,i)}a=a.next}while(a!==n)}}function au(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function iu(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[ha],delete t[va],delete t[ya],delete t[ba])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(cu(e,t,r),e=e.sibling;null!==e;)cu(e,t,r),e=e.sibling}function lu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(lu(e,t,r),e=e.sibling;null!==e;)lu(e,t,r),e=e.sibling}var fu=null,pu=!1;function hu(e,t,r){for(r=r.child;null!==r;)du(e,t,r),r=r.sibling}function du(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,r)}catch(s){}switch(r.tag){case 5:Js||eu(r,t);case 6:var n=fu,a=pu;fu=null,hu(e,t,r),pu=a,null!==(fu=n)&&(pu?(e=fu,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):fu.removeChild(r.stateNode));break;case 18:null!==fu&&(pu?(e=fu,r=r.stateNode,8===e.nodeType?ua(e.parentNode,r):1===e.nodeType&&ua(e,r),Zt(e)):ua(fu,r.stateNode));break;case 4:n=fu,a=pu,fu=r.stateNode.containerInfo,pu=!0,hu(e,t,r),fu=n,pu=a;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&tu(r,t,o),a=a.next}while(a!==n)}hu(e,t,r);break;case 1:if(!Js&&(eu(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Sc(r,t,s)}hu(e,t,r);break;case 21:hu(e,t,r);break;case 22:1&r.mode?(Js=(n=Js)||null!==r.memoizedState,hu(e,t,r),Js=n):hu(e,t,r);break;default:hu(e,t,r)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Xs),t.forEach((function(t){var n=Rc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function yu(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,pu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,pu=!0;break e}u=u.return}if(null===fu)throw Error(i(160));du(o,s,a),fu=null,pu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Sc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bu(t,e),t=t.sibling}function bu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),gu(e),4&n){try{nu(3,e,e.return),au(3,e)}catch(y){Sc(e,e.return,y)}try{nu(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:yu(t,e),gu(e),512&n&&null!==r&&eu(r,r.return);break;case 5:if(yu(t,e),gu(e),512&n&&null!==r&&eu(r,r.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(y){Sc(e,e.return,y)}}if(4&n&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==r?r.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(a,o),me(u,s);var l=me(u,o);for(s=0;s<c.length;s+=2){var f=c[s],p=c[s+1];"style"===f?ye(a,p):"dangerouslySetInnerHTML"===f?fe(a,p):"children"===f?pe(a,p):m(a,f,p,l)}switch(u){case"input":X(a,o);break;case"textarea":ie(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var d=o.value;null!=d?re(a,!!o.multiple,d,!1):h!==!!o.multiple&&(null!=o.defaultValue?re(a,!!o.multiple,o.defaultValue,!0):re(a,!!o.multiple,o.multiple?[]:"",!1))}a[ha]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(yu(t,e),gu(e),4&n){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(yu(t,e),gu(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Zt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:yu(t,e),gu(e);break;case 13:yu(t,e),gu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Zu=Je())),4&n&&vu(e);break;case 22:if(f=null!==r&&null!==r.memoizedState,1&e.mode?(Js=(l=Js)||f,yu(t,e),Js=l):yu(t,e),gu(e),8192&n){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for($s=e,f=e.child;null!==f;){for(p=$s=f;null!==$s;){switch(d=(h=$s).child,h.tag){case 0:case 11:case 14:case 15:nu(4,h,h.return);break;case 1:eu(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(n,r,y)}}break;case 5:eu(h,h.return);break;case 22:if(null!==h.memoizedState){xu(p);continue}}null!==d?(d.return=h,$s=d):xu(p)}f=f.sibling}e:for(f=null,p=e;;){if(5===p.tag){if(null===f){f=p;try{a=p.stateNode,l?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=p.stateNode,s=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){Sc(e,e.return,y)}}}else if(6===p.tag){if(null===f)try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:yu(t,e),gu(e),4&n&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(su(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(pe(a,""),n.flags&=-33),lu(e,uu(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(i(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function mu(e,t,r){$s=e,wu(e,t,r)}function wu(e,t,r){for(var n=0!==(1&e.mode);null!==$s;){var a=$s,i=a.child;if(22===a.tag&&n){var o=null!==a.memoizedState||Qs;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Qs;var c=Js;if(Qs=o,(Js=u)&&!c)for($s=a;null!==$s;)u=(o=$s).child,22===o.tag&&null!==o.memoizedState?_u(a):null!==u?(u.return=o,$s=u):_u(a);for(;null!==i;)$s=i,wu(i,t,r),i=i.sibling;$s=a,Qs=s,Js=c}ku(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,$s=i):ku(e)}}function ku(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||au(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Js)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:yi(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ui(t,o,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ui(t,s,r)}break;case 5:var u=t.stateNode;if(null===r&&4&t.flags){r=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var p=f.dehydrated;null!==p&&Zt(p)}}}break;default:throw Error(i(163))}Js||512&t.flags&&iu(t)}catch(h){Sc(t,t.return,h)}}if(t===e){$s=null;break}if(null!==(r=t.sibling)){r.return=t.return,$s=r;break}$s=t.return}}function xu(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var r=t.sibling;if(null!==r){r.return=t.return,$s=r;break}$s=t.return}}function _u(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{au(4,t)}catch(u){Sc(t,r,u)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(u){Sc(t,a,u)}}var i=t.return;try{iu(t)}catch(u){Sc(t,i,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Eu,Su=Math.ceil,Au=w.ReactCurrentDispatcher,Cu=w.ReactCurrentOwner,Tu=w.ReactCurrentBatchConfig,Ru=0,Iu=null,Pu=null,Du=0,Nu=0,Ou=Ea(0),Lu=0,Bu=null,Mu=0,Uu=0,ju=0,Fu=null,zu=null,Zu=0,qu=1/0,Vu=null,Ku=!1,Hu=null,Wu=null,Gu=!1,Yu=null,Qu=0,Ju=0,Xu=null,$u=-1,ec=0;function tc(){return 0!==(6&Ru)?Je():-1!==$u?$u:$u=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Ru)&&0!==Du?Du&-Du:null!==vi.transition?(0===ec&&(ec=vt()),ec):0!==(e=mt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,r,n){if(50<Ju)throw Ju=0,Xu=null,Error(i(185));bt(e,r,n),0!==(2&Ru)&&e===Iu||(e===Iu&&(0===(2&Ru)&&(Uu|=r),4===Lu&&uc(e,Du)),ac(e,n),1===r&&0===Ru&&0===(1&t.mode)&&(qu=Je()+500,ja&&Za()))}function ac(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&r)&&0===(s&n)||(a[o]=ht(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var n=pt(e,e===Iu?Du:0);if(0===n)null!==r&&Ge(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ge(r),1===t)0===e.tag?function(e){ja=!0,za(e)}(cc.bind(null,e)):za(cc.bind(null,e)),oa((function(){0===(6&Ru)&&Za()})),r=null;else{switch(wt(n)){case 1:r=$e;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ic(r,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ic(e,t){if($u=-1,ec=0,0!==(6&Ru))throw Error(i(327));var r=e.callbackNode;if(_c()&&e.callbackNode!==r)return null;var n=pt(e,e===Iu?Du:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=bc(e,n);else{t=n;var a=Ru;Ru|=2;var o=vc();for(Iu===e&&Du===t||(Vu=null,qu=Je()+500,hc(e,t));;)try{mc();break}catch(u){dc(e,u)}ki(),Au.current=o,Ru=a,null!==Pu?t=0:(Iu=null,Du=0,t=Lu)}if(0!==t){if(2===t&&(0!==(a=dt(e))&&(n=a,t=oc(e,a))),1===t)throw r=Bu,hc(e,0),uc(e,n),ac(e,Je()),r;if(6===t)uc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!sn(i(),a))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=bc(e,n))&&(0!==(o=dt(e))&&(n=o,t=oc(e,o))),1===t))throw r=Bu,hc(e,0),uc(e,n),ac(e,Je()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,zu,Vu);break;case 3:if(uc(e,n),(130023424&n)===n&&10<(t=Zu+500-Je())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(xc.bind(null,e,zu,Vu),t);break}xc(e,zu,Vu);break;case 4:if(uc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-ot(n);o=1<<s,(s=t[s])>a&&(a=s),n&=~o}if(n=a,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Su(n/1960))-n)){e.timeoutHandle=na(xc.bind(null,e,zu,Vu),n);break}xc(e,zu,Vu);break;default:throw Error(i(329))}}}return ac(e,Je()),e.callbackNode===r?ic.bind(null,e):null}function oc(e,t){var r=Fu;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=bc(e,t))&&(t=zu,zu=r,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~ju,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function cc(e){if(0!==(6&Ru))throw Error(i(327));_c();var t=pt(e,0);if(0===(1&t))return ac(e,Je()),null;var r=bc(e,t);if(0!==e.tag&&2===r){var n=dt(e);0!==n&&(t=n,r=oc(e,n))}if(1===r)throw r=Bu,hc(e,0),uc(e,t),ac(e,Je()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zu,Vu),ac(e,Je()),null}function lc(e,t){var r=Ru;Ru|=1;try{return e(t)}finally{0===(Ru=r)&&(qu=Je()+500,ja&&Za())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Ru)&&_c();var t=Ru;Ru|=1;var r=Tu.transition,n=mt;try{if(Tu.transition=null,mt=1,e)return e()}finally{mt=n,Tu.transition=r,0===(6&(Ru=t))&&Za()}}function pc(){Nu=Ou.current,Sa(Ou)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Pu)for(r=Pu.return;null!==r;){var n=r;switch(ti(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Na();break;case 3:ao(),Sa(Ra),Sa(Ta),lo();break;case 5:oo(n);break;case 4:ao();break;case 13:case 19:Sa(so);break;case 10:xi(n.type._context);break;case 22:case 23:pc()}r=r.return}if(Iu=e,Pu=e=Oc(e.current,null),Du=Nu=t,Lu=0,Bu=null,ju=Uu=Mu=0,zu=Fu=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(n=(r=Ai[t]).interleaved)){r.interleaved=null;var a=n.next,i=r.pending;if(null!==i){var o=i.next;i.next=a,n.next=o}r.pending=n}Ai=null}return e}function dc(e,t){for(;;){var r=Pu;try{if(ki(),fo.current=os,go){for(var n=vo.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}go=!1}if(ho=0,bo=yo=vo=null,mo=!1,wo=0,Cu.current=null,null===r||null===r.return){Lu=1,Bu=t,Pu=null;break}e:{var o=e,s=r.return,u=r,c=t;if(t=Du,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,p=f.tag;if(0===(1&f.mode)&&(0===p||11===p||15===p)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var d=bs(s);if(null!==d){d.flags&=-257,gs(d,s,u,0,t),1&d.mode&&ys(o,l,t),c=l;var v=(t=d).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),yc();break e}c=Error(i(426))}else if(ai&&1&u.mode){var b=bs(s);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),gs(b,s,u,0,t),di(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Fu?Fu=[o]:Fu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bi(o,ds(0,c,t));break e;case 1:u=c;var g=o.type,m=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==m&&"function"===typeof m.componentDidCatch&&(null===Wu||!Wu.has(m)))){o.flags|=65536,t&=-t,o.lanes|=t,Bi(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}kc(r)}catch(w){t=w,Pu===r&&null!==r&&(Pu=r=r.return);continue}break}}function vc(){var e=Au.current;return Au.current=os,null===e?os:e}function yc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Iu||0===(268435455&Mu)&&0===(268435455&Uu)||uc(Iu,Du)}function bc(e,t){var r=Ru;Ru|=2;var n=vc();for(Iu===e&&Du===t||(Vu=null,hc(e,t));;)try{gc();break}catch(a){dc(e,a)}if(ki(),Ru=r,Au.current=n,null!==Pu)throw Error(i(261));return Iu=null,Du=0,Lu}function gc(){for(;null!==Pu;)wc(Pu)}function mc(){for(;null!==Pu&&!Ye();)wc(Pu)}function wc(e){var t=Eu(e.alternate,e,Nu);e.memoizedProps=e.pendingProps,null===t?kc(e):Pu=t,Cu.current=null}function kc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Gs(r,t,Nu)))return void(Pu=r)}else{if(null!==(r=Ys(r,t)))return r.flags&=32767,void(Pu=r);if(null===e)return Lu=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Lu&&(Lu=5)}function xc(e,t,r){var n=mt,a=Tu.transition;try{Tu.transition=null,mt=1,function(e,t,r,n){do{_c()}while(null!==Yu);if(0!==(6&Ru))throw Error(i(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ot(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}(e,o),e===Iu&&(Pu=Iu=null,Du=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gu||(Gu=!0,Ic(tt,(function(){return _c(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=mt;mt=1;var u=Ru;Ru|=4,Cu.current=null,function(e,t){if(ea=Vt,hn(e=pn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(k){r=null;break e}var s=0,u=-1,c=-1,l=0,f=0,p=e,h=null;t:for(;;){for(var d;p!==r||0!==a&&3!==p.nodeType||(u=s+a),p!==o||0!==n&&3!==p.nodeType||(c=s+n),3===p.nodeType&&(s+=p.nodeValue.length),null!==(d=p.firstChild);)h=p,p=d;for(;;){if(p===e)break t;if(h===r&&++l===a&&(u=s),h===o&&++f===n&&(c=s),null!==(d=p.nextSibling))break;h=(p=h).parentNode}p=d}r=-1===u||-1===c?null:{start:u,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Vt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,b=v.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:yi(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(k){Sc(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=ru,ru=!1}(e,r),bu(r,e),dn(ta),Vt=!!ea,ta=ea=null,e.current=r,mu(r,e,a),Qe(),Ru=u,mt=s,Tu.transition=o}else e.current=r;if(Gu&&(Gu=!1,Yu=e,Qu=a),o=e.pendingLanes,0===o&&(Wu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ac(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ku)throw Ku=!1,e=Hu,Hu=null,e;0!==(1&Qu)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xu?Ju++:(Ju=0,Xu=e):Ju=0,Za()}(e,t,r,n)}finally{Tu.transition=a,mt=n}return null}function _c(){if(null!==Yu){var e=wt(Qu),t=Tu.transition,r=mt;try{if(Tu.transition=null,mt=16>e?16:e,null===Yu)var n=!1;else{if(e=Yu,Yu=null,Qu=0,0!==(6&Ru))throw Error(i(331));var a=Ru;for(Ru|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for($s=l;null!==$s;){var f=$s;switch(f.tag){case 0:case 11:case 15:nu(8,f,o)}var p=f.child;if(null!==p)p.return=f,$s=p;else for(;null!==$s;){var h=(f=$s).sibling,d=f.return;if(ou(f),f===l){$s=null;break}if(null!==h){h.return=d,$s=h;break}$s=d}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(null!==y)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,$s=g;break e}$s=o.return}}var m=e.current;for($s=m;null!==$s;){var w=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,$s=w;else e:for(s=m;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:au(9,u)}}catch(x){Sc(u,u.return,x)}if(u===s){$s=null;break e}var k=u.sibling;if(null!==k){k.return=u.return,$s=k;break e}$s=u.return}}if(Ru=a,Za(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(x){}n=!0}return n}finally{mt=r,Tu.transition=t}}return!1}function Ec(e,t,r){e=Oi(e,t=ds(0,t=ls(r,t),1),1),t=tc(),null!==e&&(bt(e,1,t),ac(e,t))}function Sc(e,t,r){if(3===e.tag)Ec(e,e,r);else for(;null!==t;){if(3===t.tag){Ec(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Wu||!Wu.has(n))){t=Oi(t,e=vs(t,e=ls(r,e),1),1),e=tc(),null!==t&&(bt(t,1,e),ac(t,e));break}}t=t.return}}function Ac(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&r,Iu===e&&(Du&r)===r&&(4===Lu||3===Lu&&(130023424&Du)===Du&&500>Je()-Zu?hc(e,0):ju|=r),ac(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var r=tc();null!==(e=Ri(e,t))&&(bt(e,t,r),ac(e,r))}function Tc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cc(e,r)}function Rc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),Cc(e,r)}function Ic(e,t){return We(e,t)}function Pc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,r,n){return new Pc(e,t,r,n)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var r=e.alternate;return null===r?((r=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lc(e,t,r,n,a,o){var s=2;if(n=e,"function"===typeof e)Nc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Bc(r.children,a,o,t);case E:s=8,a|=8;break;case S:return(e=Dc(12,r,t,2|a)).elementType=S,e.lanes=o,e;case R:return(e=Dc(13,r,t,a)).elementType=R,e.lanes=o,e;case I:return(e=Dc(19,r,t,a)).elementType=I,e.lanes=o,e;case N:return Mc(r,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case C:s=9;break e;case T:s=11;break e;case P:s=14;break e;case D:s=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Dc(s,r,t,a)).elementType=e,t.type=n,t.lanes=o,t}function Bc(e,t,r,n){return(e=Dc(7,e,n,t)).lanes=r,e}function Mc(e,t,r,n){return(e=Dc(22,e,n,t)).elementType=N,e.lanes=r,e.stateNode={isHidden:!1},e}function Uc(e,t,r){return(e=Dc(6,e,null,t)).lanes=r,e}function jc(e,t,r){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,r,n,a,i,o,s,u){return e=new Fc(e,t,r,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Dc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pi(i),e}function Zc(e){if(!e)return Ca;e:{if(Ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Da(r))return La(e,r,t)}return t}function qc(e,t,r,n,a,i,o,s,u){return(e=zc(r,n,!0,e,0,i,0,s,u)).context=Zc(null),r=e.current,(i=Ni(n=tc(),a=rc(r))).callback=void 0!==t&&null!==t?t:null,Oi(r,i,a),e.current.lanes=a,bt(e,a,n),ac(e,n),e}function Vc(e,t,r,n){var a=t.current,i=tc(),o=rc(a);return r=Zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ni(i,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Oi(a,t,o))&&(nc(e,a,o,i),Li(e,a,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Eu=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ra.current)ws=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ws=!1,function(e,t,r){switch(t.tag){case 3:Is(t),hi();break;case 5:io(t);break;case 1:Da(t.type)&&Ba(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Aa(bi,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Aa(so,1&so.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Us(e,t,r):(Aa(so,1&so.current),null!==(e=Ks(e,t,r))?e.sibling:null);Aa(so,1&so.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return qs(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(so,so.current),n)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,r)}return Ks(e,t,r)}(e,t,r);ws=0!==(131072&e.flags)}else ws=!1,ai&&0!==(1048576&t.flags)&&$a(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vs(e,t),e=t.pendingProps;var a=Pa(t,Ta.current);Ei(t,r),a=Eo(null,t,n,e,a,r);var o=So();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(n)?(o=!0,Ba(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Pi(t),a.updater=zi,t.stateNode=a,a._reactInternals=t,Ki(t,n,e,r),t=Rs(null,t,n,!0,o,r)):(t.tag=0,ai&&o&&ei(t),ks(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(n),e=yi(n,e),a){case 0:t=Cs(null,t,n,e,r);break e;case 1:t=Ts(null,t,n,e,r);break e;case 11:t=xs(null,t,n,e,r);break e;case 14:t=_s(null,t,n,yi(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,Cs(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 1:return n=t.type,a=t.pendingProps,Ts(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 3:e:{if(Is(t),null===e)throw Error(i(387));n=t.pendingProps,a=(o=t.memoizedState).element,Di(e,t),Mi(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,n,r,a=ls(Error(i(423)),t));break e}if(n!==a){t=Ps(e,t,n,r,a=ls(Error(i(424)),t));break e}for(ni=ca(t.stateNode.containerInfo.firstChild),ri=t,ai=!0,ii=null,r=Ji(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(hi(),n===a){t=Ks(e,t,r);break e}ks(e,t,n,r)}t=t.child}return t;case 5:return io(t),null===e&&ci(t),n=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,ra(n,a)?s=null:null!==o&&ra(n,o)&&(t.flags|=32),As(e,t),ks(e,t,s,r),t.child;case 6:return null===e&&ci(t),null;case 13:return Us(e,t,r);case 4:return no(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Qi(t,null,n,r):ks(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,xs(e,t,n,a=t.elementType===n?a:yi(n,a),r);case 7:return ks(e,t,t.pendingProps,r),t.child;case 8:case 12:return ks(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Aa(bi,n._currentValue),n._currentValue=s,null!==o)if(sn(o.value,s)){if(o.children===a.children&&!Ra.current){t=Ks(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===n){if(1===o.tag){(c=Ni(-1,r&-r)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=r,null!==(c=o.alternate)&&(c.lanes|=r),_i(o.return,r,t),u.lanes|=r;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=r,null!==(u=s.alternate)&&(u.lanes|=r),_i(s,r,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ks(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ei(t,r),n=n(a=Si(a)),t.flags|=1,ks(e,t,n,r),t.child;case 14:return a=yi(n=t.type,t.pendingProps),_s(e,t,n,a=yi(n.type,a),r);case 15:return Es(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:yi(n,a),Vs(e,t),t.tag=1,Da(n)?(e=!0,Ba(t)):e=!1,Ei(t,r),qi(t,n,a),Ki(t,n,a,r),Rs(null,t,n,!0,e,r);case 19:return qs(e,t,r);case 22:return Ss(e,t,r)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Kc(o);s.call(e)}}Vc(t,o,e,a)}else o=function(e,t,r,n,a){if(a){if("function"===typeof n){var i=n;n=function(){var e=Kc(o);i.call(e)}}var o=qc(t,n,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[da]=o.current,Zn(8===e.nodeType?e.parentNode:e),fc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var s=n;n=function(){var e=Kc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=u,e[da]=u.current,Zn(8===e.nodeType?e.parentNode:e),fc((function(){Vc(t,u,r,n)})),u}(r,t,e,a,n);return Kc(o)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Vc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Vc(null,e,null,null)})),t[da]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nt.length&&0!==t&&t<Nt[r].priority;r++);Nt.splice(r,0,e),0===r&&Mt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ft(t.pendingLanes);0!==r&&(gt(t,1|r),ac(t,Je()),0===(6&Ru)&&(qu=Je()+500,Za()))}break;case 13:fc((function(){var t=Ri(e,1);if(null!==t){var r=tc();nc(t,e,1,r)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=rc(e),r=Ri(e,t);if(null!==r)nc(r,e,t,tc());Wc(e,t)}},Et=function(){return mt},St=function(e,t){var r=mt;try{return mt=e,t()}finally{mt=r}},xe=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ka(n);if(!a)throw Error(i(90));W(n),X(n,a)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Te=lc,Re=fc;var tl={usingClientEntryPoint:!1,Events:[ma,wa,ka,Ae,Ce,lc]},rl={findFiberByHostInstance:ga,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nl={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(nl),it=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(i(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Jc(e))throw Error(i(299));var r=!1,n="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,r,0,n,a),e[da]=t.current,Zn(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,r){if(!Xc(t))throw Error(i(200));return el(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Jc(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,a=!1,o="",s=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,a,0,o,s),e[da]=t.current,Zn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Qc(t)},t.render=function(e,t,r){if(!Xc(t))throw Error(i(200));return el(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[da]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xc(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,r){"use strict";var n=r(4164);t.s=n.createRoot,n.hydrateRoot},4164:function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4463)},1372:function(e,t){"use strict";var r,n=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case p:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case d:case u:return e;default:return t}}case a:return t}}}r=Symbol.for("react.module.reference")},7441:function(e,t,r){"use strict";r(1372)},6374:function(e,t,r){"use strict";var n=r(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,n)&&!u.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function b(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||d}function g(){}function m(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||d}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=b.prototype;var w=m.prototype=new g;w.constructor=m,v(w,b.prototype),w.isPureReactComponent=!0;var k=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,a)&&!E.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:r,type:e,key:o,ref:s,props:i,_owner:_.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0}}if(u)return o=o(u=e),e=""===i?"."+T(u,0):i,k(o)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),R(o,t,a,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var l=i+T(s=e[c],c);u+=R(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=R(s=s.value,t,a,l=i+T(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function I(e,t,r){if(null==e)return e;var n=[],a=0;return R(e,n,"","",(function(e){return t.call(r,e,a++)})),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},N={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:N,ReactCurrentOwner:_};t.Children={map:I,forEach:function(e,t,r){I(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=a,t.Profiler=o,t.PureComponent=m,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:r,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},2791:function(e,t,r){"use strict";e.exports=r(9117)},184:function(e,t,r){"use strict";e.exports=r(6374)},449:function(e,t,r){"use strict";e.exports=o;var n=r(8193),a=o.prototype,i=new Date%1e9;function o(e){e=e||{},this.id=e.id||(1e9*Math.random()>>>0)+i++,this.max=e.max||1/0,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,r,n=this.items.length;n--;)t=this.items[n],r=new Date(t.expires)-new Date,this._lookup[t.key]=t,r>0?this.expire(t.key,r):r<=0&&this.delete(t.key)}a.has=function(e){return e in this._lookup},a.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},a.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},a.set=function(e,t,r){var n=this._lookup[e],a=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,a)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(a),this.size++),r&&("ttl"in r&&this.expire(e,r.ttl),"meta"in r&&(a.meta=r.meta),r.refresh&&(a.refresh=r.ttl)),this},a.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},a.expire=function(e,t){var r=t||0,a=this._lookup[e];if(!a)return this;if("string"===typeof r&&(r=n(t)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(a.timeout),a.timeout=setTimeout(this.delete.bind(this,a.key),r),a.expires=Number(new Date)+r,this},a.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},a.toJSON=function(){for(var e,t=new Array(this.items.length),r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}},1779:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6222),o=function(){function e(t,r,a){n(this,e);var o=this;this._started=i(),this._rescheduled=0,this._scheduled=r,this._args=a,this._triggered=!1,this._timerWrapper=function(){o._rescheduled>0?(o._scheduled=o._rescheduled-(i()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,t.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,r)}return a(e,[{key:"reschedule",value:function(e){e||(e=this._scheduled);var t=i();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}},{key:"_schedule",value:function(e){this._triggered=!1,this._started=i(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}},{key:"clear",value:function(){clearTimeout(this._timer)}}]),e}();e.exports=function(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new o(arguments[0],arguments[1],e)}},6222:function(e){"use strict";e.exports=function(){return Date.now()}},8636:function(e,t,r){e.exports=function(e,t,r){if("number"!==typeof t)throw new Error("second argument must be a Number");var a,i,o,s,u,c,l=!0;Array.isArray(e)?(a=[],o=i=e.length):(s=Object.keys(e),a={},o=i=s.length);function f(e){function t(){r&&r(e,a),r=null}l?n(t):t()}function p(t,r,n){if(a[t]=n,r&&(u=!0),0===--o||r)f(r);else if(!u&&c<i){var l;s?(l=s[c],c+=1,e[l]((function(e,t){p(l,e,t)}))):(l=c,c+=1,e[l]((function(e,t){p(l,e,t)})))}}c=t,o?s?s.some((function(r,n){return e[r]((function(e,t){p(r,e,t)})),n===t-1})):e.some((function(e,r){return e((function(e,t){p(r,e,t)})),r===t-1})):f(null);l=!1};var n=r(4183)},2543:function(e,t,r){var n=r(9778),a=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return a(e,t,r)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},o.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},6327:function(e,t,r){"use strict";var n=r(206),a=/[\/\?<>\\:\*\|"]/g,i=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,s=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u=/[\. ]+$/;function c(e,t){if("string"!==typeof e)throw new Error("Input must be string");var r=e.replace(a,t).replace(i,t).replace(o,t).replace(s,t).replace(u,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=c(e,r);return""===r?n:c(n,"")}},6813:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,o=a>>>1;n<o;){var s=2*(n+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,r))c<a&&0>i(l,u)?(e[n]=l,e[c]=r,n=c):(e[n]=u,e[s]=r,n=s);else{if(!(c<a&&0>i(l,r)))break e;e[n]=l,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,p=null,h=3,d=!1,v=!1,y=!1,b="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,m="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,r(c,t)}t=n(l)}}function k(e){if(y=!1,w(e),!v)if(null!==n(c))v=!0,N(x);else{var t=n(l);null!==t&&O(k,t.startTime-e)}}function x(e,r){v=!1,y&&(y=!1,g(A),A=-1),d=!0;var i=h;try{for(w(r),p=n(c);null!==p&&(!(p.expirationTime>r)||e&&!R());){var o=p.callback;if("function"===typeof o){p.callback=null,h=p.priorityLevel;var s=o(p.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?p.callback=s:p===n(c)&&a(c),w(r)}else a(c);p=n(c)}if(null!==p)var u=!0;else{var f=n(l);null!==f&&O(k,f.startTime-r),u=!1}return u}finally{p=null,h=i,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,A=-1,C=5,T=-1;function R(){return!(t.unstable_now()-T<C)}function I(){if(null!==S){var e=t.unstable_now();T=e;var r=!0;try{r=S(!0,e)}finally{r?_():(E=!1,S=null)}}else E=!1}if("function"===typeof m)_=function(){m(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=I,_=function(){D.postMessage(null)}}else _=function(){b(I,0)};function N(e){S=e,E||(E=!0,_())}function O(e,r){A=b((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,r(l,e),null===n(c)&&e===n(l)&&(y?(g(A),A=-1):y=!0,O(k,i-o))):(e.sortIndex=s,r(c,e),v||d||(v=!0,N(x))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},5296:function(e,t,r){"use strict";e.exports=r(6813)},8928:function(e,t,r){"use strict";var n=r(7061).default,a=r(7156).default,i=new Map;function o(){return(o=a(n().mark((function e(t,r,a){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),setTimeout((function(){throw e.t0}),1),e.abrupt("return","break");case 9:if(i.get(a)){e.next=11;break}return e.abrupt("return","break");case 11:return e.next=13,new Promise((function(e){var t=setTimeout(e,r);i.set(a,t)}));case 13:case"end":return e.stop()}}),e,null,[[0,5]])}));case 1:if(!i.get(a)){e.next=8;break}return e.delegateYield(o(),"t0",3);case 3:if("break"!==e.t0){e.next=6;break}return e.abrupt("break",8);case 6:e.next=1;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={setDelayedInterval:function(e,t,r){r=r||t;var n="".concat(Date.now(),":").concat(Math.floor(1e6*Math.random())),a=setTimeout((function(){!function(e,t,r){o.apply(this,arguments)}(e,t,n)}),r);return i.set(n,a),n},clearDelayedInterval:function(e){var t=i.get(e);t&&(clearTimeout(t),i.delete(e))}}},1620:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default;function i(e,t){return e+o(t)}function o(e){var t=e;return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24}function s(e,t){return e[0]-t[0]}function u(e){return e[1]}e.exports=function(){function e(){n(this,e),this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}return a(e,[{key:"set",value:function(e,t){var r=this._internalPositionFor(e,!1);if(void 0===t)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{var n=!1;-1===r?(r=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(r,e,t,n),this._changedLength=!0}}},{key:"unset",value:function(e){this.set(e,void 0)}},{key:"get",value:function(e){this._sortData();var t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}},{key:"push",value:function(e){return this.set(this.length,e),this.length}},{key:"length",get:function(){if(this._sortData(),this._changedLength){var e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}},{key:"forEach",value:function(e){for(var t=0;t<this.length;)e(this.get(t),t,this),t++}},{key:"map",value:function(e){for(var t=0,r=new Array(this.length);t<this.length;)r[t]=e(this.get(t),t,this),t++;return r}},{key:"reduce",value:function(e,t){for(var r=0,n=t;r<this.length;){n=e(n,this.get(r),r),r++}return n}},{key:"find",value:function(e){for(var t,r,n=0;n<this.length&&!t;)t=e(r=this.get(n)),n++;return t?r:void 0}},{key:"_internalPositionFor",value:function(e,t){var r=this._bytePosFor(e,t);if(r>=this._bitArrays.length)return-1;var n=this._bitArrays[r],a=e-7*r;return(n&1<<a)>0?this._bitArrays.slice(0,r).reduce(i,0)+o(n&~(4294967295<<a+1))-1:-1}},{key:"_bytePosFor",value:function(e,t){for(var r=Math.floor(e/7),n=r+1;!t&&this._bitArrays.length<n;)this._bitArrays.push(0);return r}},{key:"_setBit",value:function(e){var t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}},{key:"_unsetBit",value:function(e){var t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}},{key:"_setInternalPos",value:function(e,t,r,n){var a=this._data,i=[t,r];if(n)this._sortData(),a[e]=i;else{if(a.length)if(a[a.length-1][0]>=t)a.push(i);else if(a[0][0]<=t)a.unshift(i);else{var o=Math.round(a.length/2);this._data=a.slice(0,o).concat(i).concat(a.slice(o))}else this._data.push(i);this._changedData=!0,this._changedLength=!0}}},{key:"_unsetInternalPos",value:function(e){this._data.splice(e,1)}},{key:"_sortData",value:function(){this._changedData&&this._data.sort(s),this._changedData=!1}},{key:"bitField",value:function(){for(var e,t=[],r=8,n=0,a=0,i=this._bitArrays.slice();i.length||n;){0===n&&(e=i.shift(),n=7);var o=Math.min(n,r);a|=(e&~(255<<o))<<8-r,e>>>=o,n-=o,(r-=o)&&(n||i.length)||(t.push(a),a=0,r=8)}for(var s=t.length-1;s>0;s--){if(0!==t[s])break;t.pop()}return t}},{key:"compactArray",value:function(){return this._sortData(),this._data.map(u)}}]),e}()},6662:function(e,t,r){var n=r(7061).default,a=r(6737).default,i=r(8186).default;e.exports=function(e){if(e[Symbol.asyncIterator])return e;if(e.getReader)return i(n().mark((function t(){var r,i,o,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getReader(),t.prev=1;case 2:return t.next=5,a(r.read());case 5:if(i=t.sent,o=i.done,s=i.value,!o){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,s;case 12:t.next=2;break;case 14:return t.prev=14,r.releaseLock(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,,14,17]])})))();throw new Error("unknown stream")}},7683:function(e,t,r){"use strict";var n=r(6690).default,a=r(9728).default,i=r(6115).default,o=r(1588).default,s=r(3808).default,u=r(1655).default,c=r(6389).default,l=globalThis.AbortController,f=r(1779),p=function(e){u(r,e);var t=c(r);function r(e){var a;return n(this,r),(a=t.call(this))._ms=e,a._timer=f((function(){return a.abort()}),e),Object.setPrototypeOf(i(a),r.prototype),a}return a(r,[{key:"abort",value:function(){return this._timer.clear(),o(s(r.prototype),"abort",this).call(this)}},{key:"clear",value:function(){this._timer.clear()}},{key:"reset",value:function(){var e=this;this._timer.clear(),this._timer=f((function(){return e.abort()}),this._ms)}}]),r}(l);e.exports={TimeoutController:p}},206:function(e,t,r){"use strict";var n=r(9022),a=r(4847);e.exports=n.bind(null,a)},9022:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e,n,a){if("string"!==typeof n)throw new Error("Input must be string");for(var i,o,s=n.length,u=0,c=0;c<s;c+=1){if(i=n.charCodeAt(c),o=n[c],t(i)&&r(n.charCodeAt(c+1))&&(o+=n[c+=1]),(u+=e(o))===a)return n.slice(0,c+1);if(u>a)return n.slice(0,c-o.length+1)}return n}},4847:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!==typeof e)throw new Error("Input must be string");for(var n=e.length,a=0,i=null,o=null,s=0;s<n;s++)r(i=e.charCodeAt(s))?null!=o&&t(o)?a+=1:a+=3:i<=127?a+=1:i>=128&&i<=2047?a+=2:i>=2048&&i<=65535&&(a+=3),o=i;return a}},9662:function(e){e.exports=function e(n,a){var i,o=0,s=0,u=a=a||0,c=n.length;do{if(u>=c)throw e.bytes=0,new RangeError("Could not decode varint");i=n[u++],o+=s<28?(i&r)<<s:(i&r)*Math.pow(2,s),s+=7}while(i>=t);return e.bytes=u-a,o};var t=128,r=127},1625:function(e){e.exports=function e(a,i,o){i=i||[];var s=o=o||0;for(;a>=n;)i[o++]=255&a|t,a/=128;for(;a&r;)i[o++]=255&a|t,a>>>=7;return i[o]=0|a,e.bytes=o-s+1,i};var t=128,r=-128,n=Math.pow(2,31)},6074:function(e,t,r){e.exports={encode:r(1625),decode:r(9662),encodingLength:r(3120)}},3120:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),a=Math.pow(2,28),i=Math.pow(2,35),o=Math.pow(2,42),s=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<a?4:e<i?5:e<o?6:e<s?7:e<u?8:e<c?9:10}},9806:function(e,t,r){"use strict";var n=r(6074);e.exports=function(e){if(!(e instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");for(var t=[];e.length>0;){var r=n.decode(e);t.push(r),e=e.slice(n.decode.bytes)}return t}},3522:function(e){e.exports=function e(n,a){var i,o=0,s=0,u=a=a||0,c=n.length;do{if(u>=c||s>49)throw e.bytes=0,new RangeError("Could not decode varint");i=n[u++],o+=s<28?(i&r)<<s:(i&r)*Math.pow(2,s),s+=7}while(i>=t);return e.bytes=u-a,o};var t=128,r=127},6993:function(e){e.exports=function e(a,i,o){if(Number.MAX_SAFE_INTEGER&&a>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");i=i||[];var s=o=o||0;for(;a>=n;)i[o++]=255&a|t,a/=128;for(;a&r;)i[o++]=255&a|t,a>>>=7;return i[o]=0|a,e.bytes=o-s+1,i};var t=128,r=-128,n=Math.pow(2,31)},4561:function(e,t,r){e.exports={encode:r(6993),decode:r(3522),encodingLength:r(2570)}},2570:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),a=Math.pow(2,28),i=Math.pow(2,35),o=Math.pow(2,42),s=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<a?4:e<i?5:e<o?6:e<s?7:e<u?8:e<c?9:10}},7420:function(){},5856:function(){},5883:function(){},2596:function(){},9880:function(){},5819:function(){},1265:function(){},5539:function(){},4642:function(e,t,r){var n=r(3801);function a(e){var t,r;function a(t,r){try{var o=e[t](r),s=o.value,u=s instanceof n;Promise.resolve(u?s.v:s).then((function(r){if(u){var n="return"===t?"return":"next";if(!s.k||r.done)return a(n,r);r=e[n](r).value}i(o.done?"return":"normal",r)}),(function(e){a("throw",e)}))}catch(e){i("throw",e)}}function i(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?a(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise((function(i,o){var s={key:e,arg:n,resolve:i,reject:o,next:null};r?r=r.next=s:(t=r=s,a(e,n))}))},"function"!=typeof e.return&&(this.return=void 0)}a.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)},e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},3801:function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,r){var n=r(3897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8131:function(e,t,r){var n=r(3801);e.exports=function(e){var t={},r=!1;function a(t,a){return r=!0,a=new Promise((function(r){r(e[t](a))})),{done:!1,value:new n(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):a("return",e)}),t},e.exports.__esModule=!0,e.exports.default=e.exports},8237:function(e){function t(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return t=function(e){this.s=e,this.n=e.next},t.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new t(e)}e.exports=function(e){var r,n,a,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);i--;){if(n&&null!=(r=e[n]))return r.call(e);if(a&&null!=(r=e[a]))return new t(r.call(e));n="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(a,i){var o=e.apply(r,n);function s(e){t(o,a,i,s,u,"next",e)}function u(e){t(o,a,i,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6737:function(e,t,r){var n=r(3801);e.exports=function(e){return new n(e,0)},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,r){var n=r(6015),a=r(9617);function i(t,r,o){return a()?(e.exports=i=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,r){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return r&&n(i,r.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,r){var n=r(4062);function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}e.exports=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,r){var n=r(6116);e.exports=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,r){var n=r(3808),a=r(9617),i=r(4993);e.exports=function(e){var t=a();return function(){var r,a=n(e);if(t){var o=n(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return i(this,r)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,r){var n=r(4062);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,r){var n=r(1753);function a(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=a=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,r){var n=r(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,r){var n=r(8416);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},215:function(e,t,r){var n=r(7071);e.exports=function(e,t){if(null==e)return{};var r,a,i=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},7071:function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,r){var n=r(8698).default,a=r(6115);e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3744:function(e){e.exports=function(e){throw new TypeError('"'+e+'" is read-only')},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,r){var n=r(8698).default;function a(){"use strict";e.exports=a=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},i=Object.prototype,o=i.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var a=t&&t.prototype instanceof w?t:w,i=Object.create(a.prototype),o=new N(n||[]);return s(i,"_invoke",{value:R(e,r,o)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var v="suspendedStart",y="suspendedYield",b="executing",g="completed",m={};function w(){}function k(){}function x(){}var _={};p(_,c,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(O([])));S&&S!==i&&o.call(S,c)&&(_=S);var A=x.prototype=w.prototype=Object.create(_);function C(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(a,i,s,u){var c=d(e[a],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;s(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}})}function R(e,r,n){var a=v;return function(i,o){if(a===b)throw new Error("Generator is already running");if(a===g){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var u=I(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===v)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var c=d(e,r,n);if("normal"===c.type){if(a=n.done?g:y,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=g,n.method="throw",n.arg=c.arg)}}}function I(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=d(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(o.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return k.prototype=x,s(A,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:k,configurable:!0}),k.displayName=p(x,f,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,p(e,f,"GeneratorFunction")),e.prototype=Object.create(A),e},r.awrap=function(e){return{__await:e}},C(T.prototype),p(T.prototype,l,(function(){return this})),r.AsyncIterator=T,r.async=function(e,t,n,a,i){void 0===i&&(i=Promise);var o=new T(h(e,t,n,a),i);return r.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(A),p(A,f,"Generator"),p(A,c,(function(){return this})),p(A,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=O,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;D(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},r}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,r){var n=r(5372),a=r(8872),i=r(6116),o=r(2218);e.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,r){var n=r(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,r){var n=r(3405),a=r(9498),i=r(6116),o=r(2281);e.exports=function(e){return n(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,r){var n=r(8698).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,r){var n=r(8698).default,a=r(5036);e.exports=function(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,r){var n=r(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},8186:function(e,t,r){var n=r(4642);e.exports=function(e){return function(){return new n(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,r){var n=r(3808),a=r(6015),i=r(6035),o=r(3515);function s(t){var r="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},8974:function(e){!function(){e.exports=y;var t=86400,r=3200,n=146097*r/400,a=t*n,i=1e3*a,o=864e13,s=4294967296,u=1e6,c="000000000",l=Math.trunc||function(e){var t=e-e%1;return 0==t&&(e<0||0===e&&1/e!=1/0)?-0:t},f=y.prototype,p=(y.fromDate=function(e){return new y(+e)},y.fromInt64BE=k(0,1,2,3,0,4),y.fromInt64LE=k(3,2,1,0,4,0),y.fromString=function(e){var t,r=new y;e=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=1970+((e=+e)-1970)%400;return r.year=e-t,t})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,r,n){return r<0&&(n*=-1),t=6e4*(60*+r+ +n),""})).replace(/\.\d+$/,(function(e){return r.nano=+(e+c).substr(1,9),""})).split(/\D+/);if(1<e.length?e[1]--:e[1]=0,r.time=t=Date.UTC.apply(Date,e)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return b(r)},y.fromTimeT=function(e){return m(e,0)},f.year=0,f.time=0,f.nano=0,f.addNano=function(e){return this.nano+=+e||0,this},f.getNano=function(){var e=b(this);return(e.time%1e3*u+ +e.nano+1e9)%1e9},f.getTimeT=function(){var e=b(this),a=Math.floor(e.time/1e3);return(e=e.year)&&(a+=e*n*t/r),a},f.getYear=function(){return this.toDate().getUTCFullYear()+this.year},f.toDate=function(){return g(b(this).time)},f.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},f.toString=function(e){var t=this,r=t.toDate(),n={H:function(){return _(r.getUTCHours())},L:function(){return E(r.getUTCMilliseconds(),3)},M:function(){return _(r.getUTCMinutes())},N:function(){return E(t.getNano(),9)},S:function(){return _(r.getUTCSeconds())},Y:function(){var e=t.getYear();return 999999<e?"+"+e:9999<e?"+"+E(e,6):0<=e?E(e,4):-999999<=e?"-"+E(-e,6):e},a:function(){return d[r.getUTCDay()]},b:function(){return h[r.getUTCMonth()]},d:function(){return _(r.getUTCDate())},e:function(){return function(e){return(9<e?"":" ")+(0|e)}(r.getUTCDate())},m:function(){return _(r.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var r=t[1],a=v[r];r=n[r];return a?e(a):r?r():t}))}(e||p)},f.writeInt64BE=w(0,1,2,3,0,4),f.writeInt64LE=w(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return y;function y(e,t,r){var n=this;if(!(n instanceof y))return new y(e,t,r);n.time=+e||0,n.nano=+t||0,n.year=+r||0,b(n)}function b(e){var t,n,a,s=e.year,c=e.time,f=e.nano,p=((f<0||u<=f)&&(f-=(n=Math.floor(f/u))*u,c+=n,n=1),s%r);return(c<-o||o<c||p)&&((t=l(c/i))&&(s+=t*r,c-=t*i),(a=g(c)).setUTCFullYear(p+a.getUTCFullYear()),a=(c=+a)+(t=l((s-=p)/r))*i,t&&-o<=a&&a<=o&&(s-=t*r,c=a),n=1),n&&(e.year=s,e.time=c,e.nano=f),e}function g(e){var t=new Date(0);return t.setTime(e),t}function m(e,t){e=+e||0;var n=l((t=(0|t)*s)/a)+l(e/a);return(e=l((t=t%a+e%a)/a))&&(n+=e,t-=e*a),new y(1e3*t,0,n*r)}function w(e,a,i,o,u,c){return function(e,a){var i=b(this);x(e=e||new Array(8),a|=0);var o=Math.floor(i.time/1e3),p=(i=i.year*(n*t/r),l(i/s)+l(o/s));i=i%s+o%s;return(o=Math.floor(i/s))&&(p+=o,i-=o*s),f(e,a+u,p),f(e,a+c,i),e};function f(t,r,n){t[r+e]=n>>24&255,t[r+a]=n>>16&255,t[r+i]=n>>8&255,t[r+o]=255&n}}function k(e,t,r,n,a,i){return function(e,t){x(e,t|=0);var r=o(e,t+a);return m(o(e,t+i),r)};function o(a,i){return 16777216*a[i+e]+(a[i+t]<<16|a[i+r]<<8|a[i+n])}}function x(e,t){if(null==(e=e&&e.length))throw new TypeError("Invalid Buffer");if(e<t+8)throw new RangeError("Out of range")}function _(e){return(9<e?"":"0")+(0|e)}function E(e,t){return(c+(0|e)).substr(-t)}}()},907:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:function(){return n}})},3878:function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}r.d(t,{Z:function(){return n}})},7762:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(181);function a(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=(0,n.Z)(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}},4942:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(9142);function a(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},7462:function(e,t,r){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:function(){return n}})},9199:function(e,t,r){"use strict";function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r.d(t,{Z:function(){return n}})},5267:function(e,t,r){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,{Z:function(){return n}})},3366:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}r.d(t,{Z:function(){return n}})},9439:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(3878);var a=r(181),i=r(5267);function o(e,t){return(0,n.Z)(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},3433:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(907);var a=r(9199),i=r(181);function o(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(1002);function a(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==(0,n.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,n.Z)(t)?t:String(t)}},1002:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:function(){return n}})},181:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(907);function a(e,t){if(e){if("string"===typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}},3733:function(e,t,r){"use strict";function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.Z=function(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}},3089:function(e,t,r){"use strict";r.d(t,{E:function(){return a}});var n=r(1799);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,n.P)(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}},3466:function(e,t,r){"use strict";r.r(t),r.d(t,{concat:function(){return o}});var n=r(7762),a=r(3089),i=r(1799);function o(e,t){t||(t=e.reduce((function(e,t){return e+t.length}),0));var r,o=(0,a.E)(t),s=0,u=(0,n.Z)(e);try{for(u.s();!(r=u.n()).done;){var c=r.value;o.set(c,s),s+=c.length}}catch(l){u.e(l)}finally{u.f()}return(0,i.P)(o)}},1799:function(e,t,r){"use strict";function n(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}r.d(t,{P:function(){return n}})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};__webpack_require__.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var a=Object.create(null);__webpack_require__.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){i[e]=function(){return r[e]}}));return i.default=function(){return r},__webpack_require__.d(a,i),a}}(),__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,r){return __webpack_require__.f[r](e,t),t}),[]))},__webpack_require__.u=function(e){return"static/js/"+e+".792544f5.chunk.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="hero-drop:";__webpack_require__.l=function(r,n,a,i){if(e[r])e[r].push(n);else{var o,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var l=u[c];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==t+a){o=l;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[n];var f=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),s&&document.head.appendChild(o)}}}(),__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="https://www.herodrop.org/",function(){var e={179:0};__webpack_require__.f.j=function(t,r){var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise((function(r,a){n=e[t]=[r,a]}));r.push(n[2]=a);var i=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(i,(function(r){if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,n[1](o)}}),"chunk-"+t,t)}};var t=function(t,r){var n,a,i=r[0],o=r[1],s=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)__webpack_require__.o(o,n)&&(__webpack_require__.m[n]=o[n]);if(s)s(__webpack_require__)}for(t&&t(r);u<i.length;u++)a=i[u],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkhero_drop=self.webpackChunkhero_drop||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{base58btc:function(){return ov},base58flickr:function(){return sv}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{base32:function(){return uv},base32hex:function(){return pv},base32hexpad:function(){return dv},base32hexpadupper:function(){return vv},base32hexupper:function(){return hv},base32pad:function(){return lv},base32padupper:function(){return fv},base32upper:function(){return cv},base32z:function(){return yv}});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{code:function(){return ey},createLink:function(){return Xv},createNode:function(){return Jv},decode:function(){return ry},encode:function(){return ty},name:function(){return $v},prepare:function(){return Yv},validate:function(){return Qv}});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{code:function(){return Qb},decode:function(){return Xb},encode:function(){return Jb},name:function(){return Yb}});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{base64:function(){return rg},base64pad:function(){return ng},base64url:function(){return ag},base64urlpad:function(){return ig}});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{code:function(){return dg},decode:function(){return yg},encode:function(){return vg},name:function(){return hg}});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{code:function(){return Eg},decode:function(){return Rg},encode:function(){return Tg},name:function(){return _g},toGeneral:function(){return Cg}});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{identity:function(){return Pg}});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{identity:function(){return Dg}});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{base2:function(){return Ng}});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{base8:function(){return Og}});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{base10:function(){return Lg}});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{base16:function(){return Bg},base16upper:function(){return Mg}});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{base36:function(){return Ug},base36upper:function(){return jg}});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{base256emoji:function(){return qg}});var v={};__webpack_require__.r(v),__webpack_require__.d(v,{sha256:function(){return Kg},sha512:function(){return Hg}});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{code:function(){return Gg},decode:function(){return Qg},encode:function(){return Yg},name:function(){return Wg}});var b={};__webpack_require__.r(b),__webpack_require__.d(b,{code:function(){return em},decode:function(){return rm},encode:function(){return tm},name:function(){return $g}});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{identity:function(){return _w}});var m={};__webpack_require__.r(m),__webpack_require__.d(m,{base2:function(){return Ew}});var w={};__webpack_require__.r(w),__webpack_require__.d(w,{base8:function(){return Sw}});var k={};__webpack_require__.r(k),__webpack_require__.d(k,{base10:function(){return Aw}});var x={};__webpack_require__.r(x),__webpack_require__.d(x,{base16:function(){return Cw},base16upper:function(){return Tw}});var _={};__webpack_require__.r(_),__webpack_require__.d(_,{base32:function(){return Rw},base32hex:function(){return Nw},base32hexpad:function(){return Lw},base32hexpadupper:function(){return Bw},base32hexupper:function(){return Ow},base32pad:function(){return Pw},base32padupper:function(){return Dw},base32upper:function(){return Iw},base32z:function(){return Mw}});var E={};__webpack_require__.r(E),__webpack_require__.d(E,{base36:function(){return Uw},base36upper:function(){return jw}});var S={};__webpack_require__.r(S),__webpack_require__.d(S,{base58btc:function(){return Fw},base58flickr:function(){return zw}});var A={};__webpack_require__.r(A),__webpack_require__.d(A,{base64:function(){return Zw},base64pad:function(){return qw},base64url:function(){return Vw},base64urlpad:function(){return Kw}});var C={};__webpack_require__.r(C),__webpack_require__.d(C,{base256emoji:function(){return Yw}});var T={};__webpack_require__.r(T),__webpack_require__.d(T,{sha256:function(){return _k},sha512:function(){return Ek}});var R={};__webpack_require__.r(R),__webpack_require__.d(R,{identity:function(){return Ak}});var I={};__webpack_require__.r(I),__webpack_require__.d(I,{code:function(){return Tk},decode:function(){return Ik},encode:function(){return Rk},name:function(){return Ck}});var P={};__webpack_require__.r(P),__webpack_require__.d(P,{code:function(){return Ok},decode:function(){return Bk},encode:function(){return Lk},name:function(){return Nk}});var D={};__webpack_require__.r(D),__webpack_require__.d(D,{identity:function(){return o_}});var N={};__webpack_require__.r(N),__webpack_require__.d(N,{base2:function(){return s_}});var O={};__webpack_require__.r(O),__webpack_require__.d(O,{base8:function(){return u_}});var L={};__webpack_require__.r(L),__webpack_require__.d(L,{base10:function(){return c_}});var B={};__webpack_require__.r(B),__webpack_require__.d(B,{base16:function(){return l_},base16upper:function(){return f_}});var M={};__webpack_require__.r(M),__webpack_require__.d(M,{base32:function(){return p_},base32hex:function(){return y_},base32hexpad:function(){return g_},base32hexpadupper:function(){return m_},base32hexupper:function(){return b_},base32pad:function(){return d_},base32padupper:function(){return v_},base32upper:function(){return h_},base32z:function(){return w_}});var U={};__webpack_require__.r(U),__webpack_require__.d(U,{base36:function(){return k_},base36upper:function(){return x_}});var j={};__webpack_require__.r(j),__webpack_require__.d(j,{base58btc:function(){return __},base58flickr:function(){return E_}});var F={};__webpack_require__.r(F),__webpack_require__.d(F,{base64:function(){return S_},base64pad:function(){return A_},base64url:function(){return C_},base64urlpad:function(){return T_}});var z={};__webpack_require__.r(z),__webpack_require__.d(z,{base256emoji:function(){return D_}});var Z={};__webpack_require__.r(Z),__webpack_require__.d(Z,{sha256:function(){return oE},sha512:function(){return sE}});var q={};__webpack_require__.r(q),__webpack_require__.d(q,{identity:function(){return cE}});var V={};__webpack_require__.r(V),__webpack_require__.d(V,{code:function(){return fE},decode:function(){return hE},encode:function(){return pE},name:function(){return lE}});var K={};__webpack_require__.r(K),__webpack_require__.d(K,{code:function(){return bE},decode:function(){return mE},encode:function(){return gE},name:function(){return yE}});var H={};__webpack_require__.r(H),__webpack_require__.d(H,{identity:function(){return TA}});var W={};__webpack_require__.r(W),__webpack_require__.d(W,{base2:function(){return RA}});var G={};__webpack_require__.r(G),__webpack_require__.d(G,{base8:function(){return IA}});var Y={};__webpack_require__.r(Y),__webpack_require__.d(Y,{base10:function(){return PA}});var Q={};__webpack_require__.r(Q),__webpack_require__.d(Q,{base16:function(){return DA},base16upper:function(){return NA}});var J={};__webpack_require__.r(J),__webpack_require__.d(J,{base32:function(){return OA},base32hex:function(){return UA},base32hexpad:function(){return FA},base32hexpadupper:function(){return zA},base32hexupper:function(){return jA},base32pad:function(){return BA},base32padupper:function(){return MA},base32upper:function(){return LA},base32z:function(){return ZA}});var X={};__webpack_require__.r(X),__webpack_require__.d(X,{base36:function(){return qA},base36upper:function(){return VA}});var $={};__webpack_require__.r($),__webpack_require__.d($,{base58btc:function(){return KA},base58flickr:function(){return HA}});var ee={};__webpack_require__.r(ee),__webpack_require__.d(ee,{base64:function(){return WA},base64pad:function(){return GA},base64url:function(){return YA},base64urlpad:function(){return QA}});var te={};__webpack_require__.r(te),__webpack_require__.d(te,{base256emoji:function(){return eC}});var re={};__webpack_require__.r(re),__webpack_require__.d(re,{sha256:function(){return AC},sha512:function(){return CC}});var ne={};__webpack_require__.r(ne),__webpack_require__.d(ne,{identity:function(){return RC}});var ae={};__webpack_require__.r(ae),__webpack_require__.d(ae,{code:function(){return PC},decode:function(){return NC},encode:function(){return DC},name:function(){return IC}});var ie={};__webpack_require__.r(ie),__webpack_require__.d(ie,{code:function(){return MC},decode:function(){return jC},encode:function(){return UC},name:function(){return BC}});var oe={};__webpack_require__.r(oe),__webpack_require__.d(oe,{identity:function(){return dT}});var se={};__webpack_require__.r(se),__webpack_require__.d(se,{base2:function(){return vT}});var ue={};__webpack_require__.r(ue),__webpack_require__.d(ue,{base8:function(){return yT}});var ce={};__webpack_require__.r(ce),__webpack_require__.d(ce,{base10:function(){return bT}});var le={};__webpack_require__.r(le),__webpack_require__.d(le,{base16:function(){return gT},base16upper:function(){return mT}});var fe={};__webpack_require__.r(fe),__webpack_require__.d(fe,{base32:function(){return wT},base32hex:function(){return ET},base32hexpad:function(){return AT},base32hexpadupper:function(){return CT},base32hexupper:function(){return ST},base32pad:function(){return xT},base32padupper:function(){return _T},base32upper:function(){return kT},base32z:function(){return TT}});var pe={};__webpack_require__.r(pe),__webpack_require__.d(pe,{base36:function(){return RT},base36upper:function(){return IT}});var he={};__webpack_require__.r(he),__webpack_require__.d(he,{base58btc:function(){return PT},base58flickr:function(){return DT}});var de={};__webpack_require__.r(de),__webpack_require__.d(de,{base64:function(){return NT},base64pad:function(){return OT},base64url:function(){return LT},base64urlpad:function(){return BT}});var ve={};__webpack_require__.r(ve),__webpack_require__.d(ve,{base256emoji:function(){return FT}});var ye={};__webpack_require__.r(ye),__webpack_require__.d(ye,{sha256:function(){return pR},sha512:function(){return hR}});var be={};__webpack_require__.r(be),__webpack_require__.d(be,{identity:function(){return vR}});var ge={};__webpack_require__.r(ge),__webpack_require__.d(ge,{code:function(){return bR},decode:function(){return mR},encode:function(){return gR},name:function(){return yR}});var me={};__webpack_require__.r(me),__webpack_require__.d(me,{code:function(){return _R},decode:function(){return SR},encode:function(){return ER},name:function(){return xR}});var we={};__webpack_require__.r(we),__webpack_require__.d(we,{base58btc:function(){return PP},base58flickr:function(){return DP}});var ke={};__webpack_require__.r(ke),__webpack_require__.d(ke,{base32:function(){return NP},base32hex:function(){return MP},base32hexpad:function(){return jP},base32hexpadupper:function(){return FP},base32hexupper:function(){return UP},base32pad:function(){return LP},base32padupper:function(){return BP},base32upper:function(){return OP},base32z:function(){return zP}});var xe={};__webpack_require__.r(xe),__webpack_require__.d(xe,{identity:function(){return XP}});var _e={};__webpack_require__.r(_e),__webpack_require__.d(_e,{base2:function(){return $P}});var Ee={};__webpack_require__.r(Ee),__webpack_require__.d(Ee,{base8:function(){return eD}});var Se={};__webpack_require__.r(Se),__webpack_require__.d(Se,{base10:function(){return tD}});var Ae={};__webpack_require__.r(Ae),__webpack_require__.d(Ae,{base16:function(){return rD},base16upper:function(){return nD}});var Ce={};__webpack_require__.r(Ce),__webpack_require__.d(Ce,{base36:function(){return aD},base36upper:function(){return iD}});var Te={};__webpack_require__.r(Te),__webpack_require__.d(Te,{base64:function(){return oD},base64pad:function(){return sD},base64url:function(){return uD},base64urlpad:function(){return cD}});var Re={};__webpack_require__.r(Re),__webpack_require__.d(Re,{base256emoji:function(){return hD}});var Ie={};__webpack_require__.r(Ie),__webpack_require__.d(Ie,{sha256:function(){return bD},sha512:function(){return gD}});var Pe={};__webpack_require__.r(Pe),__webpack_require__.d(Pe,{identity:function(){return wD}});var De={};__webpack_require__.r(De),__webpack_require__.d(De,{code:function(){return xD},decode:function(){return ED},encode:function(){return _D},name:function(){return kD}});var Ne={};__webpack_require__.r(Ne),__webpack_require__.d(Ne,{code:function(){return TD},decode:function(){return ID},encode:function(){return RD},name:function(){return CD}});var Oe={};__webpack_require__.r(Oe),__webpack_require__.d(Oe,{identity:function(){return _N}});var Le={};__webpack_require__.r(Le),__webpack_require__.d(Le,{base2:function(){return EN}});var Be={};__webpack_require__.r(Be),__webpack_require__.d(Be,{base8:function(){return SN}});var Me={};__webpack_require__.r(Me),__webpack_require__.d(Me,{base10:function(){return AN}});var Ue={};__webpack_require__.r(Ue),__webpack_require__.d(Ue,{base16:function(){return CN},base16upper:function(){return TN}});var je={};__webpack_require__.r(je),__webpack_require__.d(je,{base32:function(){return RN},base32hex:function(){return NN},base32hexpad:function(){return LN},base32hexpadupper:function(){return BN},base32hexupper:function(){return ON},base32pad:function(){return PN},base32padupper:function(){return DN},base32upper:function(){return IN},base32z:function(){return MN}});var Fe={};__webpack_require__.r(Fe),__webpack_require__.d(Fe,{base36:function(){return UN},base36upper:function(){return jN}});var ze={};__webpack_require__.r(ze),__webpack_require__.d(ze,{base58btc:function(){return FN},base58flickr:function(){return zN}});var Ze={};__webpack_require__.r(Ze),__webpack_require__.d(Ze,{base64:function(){return ZN},base64pad:function(){return qN},base64url:function(){return VN},base64urlpad:function(){return KN}});var qe={};__webpack_require__.r(qe),__webpack_require__.d(qe,{base256emoji:function(){return YN}});var Ve={};__webpack_require__.r(Ve),__webpack_require__.d(Ve,{sha256:function(){return kO},sha512:function(){return xO}});var Ke={};__webpack_require__.r(Ke),__webpack_require__.d(Ke,{identity:function(){return EO}});var He={};__webpack_require__.r(He),__webpack_require__.d(He,{code:function(){return AO},decode:function(){return TO},encode:function(){return CO},name:function(){return SO}});var We={};__webpack_require__.r(We),__webpack_require__.d(We,{code:function(){return DO},decode:function(){return OO},encode:function(){return NO},name:function(){return PO}});var Ge={};__webpack_require__.r(Ge),__webpack_require__.d(Ge,{Ed25519PrivateKey:function(){return IB},Ed25519PublicKey:function(){return RB},generateKeyPair:function(){return NB},generateKeyPairFromSeed:function(){return LB},unmarshalEd25519PrivateKey:function(){return PB},unmarshalEd25519PublicKey:function(){return DB}});var Ye={};__webpack_require__.r(Ye),__webpack_require__.d(Ye,{RsaPrivateKey:function(){return wU},RsaPublicKey:function(){return mU},fromJwk:function(){return EU},generateKeyPair:function(){return AU},unmarshalRsaPrivateKey:function(){return kU},unmarshalRsaPublicKey:function(){return _U}});var Qe={};__webpack_require__.r(Qe),__webpack_require__.d(Qe,{Secp256k1PrivateKey:function(){return OU},Secp256k1PublicKey:function(){return NU},generateKeyPair:function(){return MU},unmarshalSecp256k1PrivateKey:function(){return LU},unmarshalSecp256k1PublicKey:function(){return BU}});var Je={};__webpack_require__.r(Je),__webpack_require__.d(Je,{identity:function(){return BZ}});var Xe={};__webpack_require__.r(Xe),__webpack_require__.d(Xe,{base2:function(){return MZ}});var $e={};__webpack_require__.r($e),__webpack_require__.d($e,{base8:function(){return UZ}});var et={};__webpack_require__.r(et),__webpack_require__.d(et,{base10:function(){return jZ}});var tt={};__webpack_require__.r(tt),__webpack_require__.d(tt,{base16:function(){return FZ},base16upper:function(){return zZ}});var rt={};__webpack_require__.r(rt),__webpack_require__.d(rt,{base32:function(){return ZZ},base32hex:function(){return HZ},base32hexpad:function(){return GZ},base32hexpadupper:function(){return YZ},base32hexupper:function(){return WZ},base32pad:function(){return VZ},base32padupper:function(){return KZ},base32upper:function(){return qZ},base32z:function(){return QZ}});var nt={};__webpack_require__.r(nt),__webpack_require__.d(nt,{base36:function(){return JZ},base36upper:function(){return XZ}});var at={};__webpack_require__.r(at),__webpack_require__.d(at,{base58btc:function(){return $Z},base58flickr:function(){return eq}});var it={};__webpack_require__.r(it),__webpack_require__.d(it,{base64:function(){return tq},base64pad:function(){return rq},base64url:function(){return nq},base64urlpad:function(){return aq}});var ot={};__webpack_require__.r(ot),__webpack_require__.d(ot,{base256emoji:function(){return uq}});var st={};__webpack_require__.r(st),__webpack_require__.d(st,{sha256:function(){return Oq},sha512:function(){return Lq}});var ut={};__webpack_require__.r(ut),__webpack_require__.d(ut,{identity:function(){return Mq}});var ct={};__webpack_require__.r(ct),__webpack_require__.d(ct,{code:function(){return jq},decode:function(){return zq},encode:function(){return Fq},name:function(){return Uq}});var lt={};__webpack_require__.r(lt),__webpack_require__.d(lt,{code:function(){return Kq},decode:function(){return Wq},encode:function(){return Hq},name:function(){return Vq}});var ft={};__webpack_require__.r(ft),__webpack_require__.d(ft,{identity:function(){return GK}});var pt={};__webpack_require__.r(pt),__webpack_require__.d(pt,{base2:function(){return YK}});var ht={};__webpack_require__.r(ht),__webpack_require__.d(ht,{base8:function(){return QK}});var dt={};__webpack_require__.r(dt),__webpack_require__.d(dt,{base10:function(){return JK}});var vt={};__webpack_require__.r(vt),__webpack_require__.d(vt,{base16:function(){return XK},base16upper:function(){return $K}});var yt={};__webpack_require__.r(yt),__webpack_require__.d(yt,{base32:function(){return eH},base32hex:function(){return aH},base32hexpad:function(){return oH},base32hexpadupper:function(){return sH},base32hexupper:function(){return iH},base32pad:function(){return rH},base32padupper:function(){return nH},base32upper:function(){return tH},base32z:function(){return uH}});var bt={};__webpack_require__.r(bt),__webpack_require__.d(bt,{base36:function(){return cH},base36upper:function(){return lH}});var gt={};__webpack_require__.r(gt),__webpack_require__.d(gt,{base58btc:function(){return fH},base58flickr:function(){return pH}});var mt={};__webpack_require__.r(mt),__webpack_require__.d(mt,{base64:function(){return hH},base64pad:function(){return dH},base64url:function(){return vH},base64urlpad:function(){return yH}});var wt={};__webpack_require__.r(wt),__webpack_require__.d(wt,{base256emoji:function(){return wH}});var kt={};__webpack_require__.r(kt),__webpack_require__.d(kt,{sha256:function(){return HH},sha512:function(){return WH}});var xt={};__webpack_require__.r(xt),__webpack_require__.d(xt,{identity:function(){return YH}});var _t={};__webpack_require__.r(_t),__webpack_require__.d(_t,{code:function(){return JH},decode:function(){return $H},encode:function(){return XH},name:function(){return QH}});var Et={};__webpack_require__.r(Et),__webpack_require__.d(Et,{code:function(){return nW},decode:function(){return iW},encode:function(){return aW},name:function(){return rW}});var St={};__webpack_require__.r(St),__webpack_require__.d(St,{identity:function(){return _X}});var At={};__webpack_require__.r(At),__webpack_require__.d(At,{base2:function(){return EX}});var Ct={};__webpack_require__.r(Ct),__webpack_require__.d(Ct,{base8:function(){return SX}});var Tt={};__webpack_require__.r(Tt),__webpack_require__.d(Tt,{base10:function(){return AX}});var Rt={};__webpack_require__.r(Rt),__webpack_require__.d(Rt,{base16:function(){return CX},base16upper:function(){return TX}});var It={};__webpack_require__.r(It),__webpack_require__.d(It,{base32:function(){return RX},base32hex:function(){return NX},base32hexpad:function(){return LX},base32hexpadupper:function(){return BX},base32hexupper:function(){return OX},base32pad:function(){return PX},base32padupper:function(){return DX},base32upper:function(){return IX},base32z:function(){return MX}});var Pt={};__webpack_require__.r(Pt),__webpack_require__.d(Pt,{base36:function(){return UX},base36upper:function(){return jX}});var Dt={};__webpack_require__.r(Dt),__webpack_require__.d(Dt,{base58btc:function(){return FX},base58flickr:function(){return zX}});var Nt={};__webpack_require__.r(Nt),__webpack_require__.d(Nt,{base64:function(){return ZX},base64pad:function(){return qX},base64url:function(){return VX},base64urlpad:function(){return KX}});var Ot={};__webpack_require__.r(Ot),__webpack_require__.d(Ot,{base256emoji:function(){return YX}});var Lt={};__webpack_require__.r(Lt),__webpack_require__.d(Lt,{sha256:function(){return _$},sha512:function(){return E$}});var Bt={};__webpack_require__.r(Bt),__webpack_require__.d(Bt,{identity:function(){return A$}});var Mt={};__webpack_require__.r(Mt),__webpack_require__.d(Mt,{code:function(){return T$},decode:function(){return I$},encode:function(){return R$},name:function(){return C$}});var Ut={};__webpack_require__.r(Ut),__webpack_require__.d(Ut,{code:function(){return O$},decode:function(){return B$},encode:function(){return L$},name:function(){return N$}});var jt={};__webpack_require__.r(jt),__webpack_require__.d(jt,{InvalidValueError:function(){return k5},MissingRepoOptionsError:function(){return x5},NonReversibleMigrationError:function(){return g5},NotInitializedRepoError:function(){return m5},RequiredParameterError:function(){return w5}});var Ft={};__webpack_require__.r(Ft),__webpack_require__.d(Ft,{identity:function(){return v8}});var zt={};__webpack_require__.r(zt),__webpack_require__.d(zt,{base2:function(){return y8}});var Zt={};__webpack_require__.r(Zt),__webpack_require__.d(Zt,{base8:function(){return b8}});var qt={};__webpack_require__.r(qt),__webpack_require__.d(qt,{base10:function(){return g8}});var Vt={};__webpack_require__.r(Vt),__webpack_require__.d(Vt,{base16:function(){return m8},base16upper:function(){return w8}});var Kt={};__webpack_require__.r(Kt),__webpack_require__.d(Kt,{base32:function(){return k8},base32hex:function(){return S8},base32hexpad:function(){return C8},base32hexpadupper:function(){return T8},base32hexupper:function(){return A8},base32pad:function(){return _8},base32padupper:function(){return E8},base32upper:function(){return x8},base32z:function(){return R8}});var Ht={};__webpack_require__.r(Ht),__webpack_require__.d(Ht,{base36:function(){return I8},base36upper:function(){return P8}});var Wt={};__webpack_require__.r(Wt),__webpack_require__.d(Wt,{base58btc:function(){return D8},base58flickr:function(){return N8}});var Gt={};__webpack_require__.r(Gt),__webpack_require__.d(Gt,{base64:function(){return O8},base64pad:function(){return L8},base64url:function(){return B8},base64urlpad:function(){return M8}});var Yt={};__webpack_require__.r(Yt),__webpack_require__.d(Yt,{base256emoji:function(){return z8}});var Qt={};__webpack_require__.r(Qt),__webpack_require__.d(Qt,{sha256:function(){return h7},sha512:function(){return d7}});var Jt={};__webpack_require__.r(Jt),__webpack_require__.d(Jt,{identity:function(){return y7}});var Xt={};__webpack_require__.r(Xt),__webpack_require__.d(Xt,{code:function(){return g7},decode:function(){return w7},encode:function(){return m7},name:function(){return b7}});var $t={};__webpack_require__.r($t),__webpack_require__.d($t,{code:function(){return E7},decode:function(){return A7},encode:function(){return S7},name:function(){return _7}});var er={};__webpack_require__.r(er),__webpack_require__.d(er,{Decoder:function(){return qie},Encoder:function(){return Zie},PacketType:function(){return Fie},protocol:function(){return zie}});var tr={};__webpack_require__.r(tr),__webpack_require__.d(tr,{identity:function(){return loe}});var rr={};__webpack_require__.r(rr),__webpack_require__.d(rr,{base2:function(){return foe}});var nr={};__webpack_require__.r(nr),__webpack_require__.d(nr,{base8:function(){return poe}});var ar={};__webpack_require__.r(ar),__webpack_require__.d(ar,{base10:function(){return hoe}});var ir={};__webpack_require__.r(ir),__webpack_require__.d(ir,{base16:function(){return doe},base16upper:function(){return voe}});var or={};__webpack_require__.r(or),__webpack_require__.d(or,{base32:function(){return yoe},base32hex:function(){return woe},base32hexpad:function(){return xoe},base32hexpadupper:function(){return _oe},base32hexupper:function(){return koe},base32pad:function(){return goe},base32padupper:function(){return moe},base32upper:function(){return boe},base32z:function(){return Eoe}});var sr={};__webpack_require__.r(sr),__webpack_require__.d(sr,{base36:function(){return Soe},base36upper:function(){return Aoe}});var ur={};__webpack_require__.r(ur),__webpack_require__.d(ur,{base58btc:function(){return Coe},base58flickr:function(){return Toe}});var cr={};__webpack_require__.r(cr),__webpack_require__.d(cr,{base64:function(){return Roe},base64pad:function(){return Ioe},base64url:function(){return Poe},base64urlpad:function(){return Doe}});var lr={};__webpack_require__.r(lr),__webpack_require__.d(lr,{base256emoji:function(){return Boe}});var fr={};__webpack_require__.r(fr),__webpack_require__.d(fr,{sha256:function(){return use},sha512:function(){return cse}});var pr={};__webpack_require__.r(pr),__webpack_require__.d(pr,{identity:function(){return fse}});var hr={};__webpack_require__.r(hr),__webpack_require__.d(hr,{code:function(){return hse},decode:function(){return vse},encode:function(){return dse},name:function(){return pse}});var dr={};__webpack_require__.r(dr),__webpack_require__.d(dr,{code:function(){return mse},decode:function(){return kse},encode:function(){return wse},name:function(){return gse}});var vr={};__webpack_require__.r(vr),__webpack_require__.d(vr,{identity:function(){return lfe}});var yr={};__webpack_require__.r(yr),__webpack_require__.d(yr,{base2:function(){return ffe}});var br={};__webpack_require__.r(br),__webpack_require__.d(br,{base8:function(){return pfe}});var gr={};__webpack_require__.r(gr),__webpack_require__.d(gr,{base10:function(){return hfe}});var mr={};__webpack_require__.r(mr),__webpack_require__.d(mr,{base16:function(){return dfe},base16upper:function(){return vfe}});var wr={};__webpack_require__.r(wr),__webpack_require__.d(wr,{base32:function(){return yfe},base32hex:function(){return wfe},base32hexpad:function(){return xfe},base32hexpadupper:function(){return _fe},base32hexupper:function(){return kfe},base32pad:function(){return gfe},base32padupper:function(){return mfe},base32upper:function(){return bfe},base32z:function(){return Efe}});var kr={};__webpack_require__.r(kr),__webpack_require__.d(kr,{base36:function(){return Sfe},base36upper:function(){return Afe}});var xr={};__webpack_require__.r(xr),__webpack_require__.d(xr,{base58btc:function(){return Cfe},base58flickr:function(){return Tfe}});var _r={};__webpack_require__.r(_r),__webpack_require__.d(_r,{base64:function(){return Rfe},base64pad:function(){return Ife},base64url:function(){return Pfe},base64urlpad:function(){return Dfe}});var Er={};__webpack_require__.r(Er),__webpack_require__.d(Er,{base256emoji:function(){return Bfe}});var Sr={};__webpack_require__.r(Sr),__webpack_require__.d(Sr,{sha256:function(){return upe},sha512:function(){return cpe}});var Ar={};__webpack_require__.r(Ar),__webpack_require__.d(Ar,{identity:function(){return fpe}});var Cr={};__webpack_require__.r(Cr),__webpack_require__.d(Cr,{code:function(){return hpe},decode:function(){return vpe},encode:function(){return dpe},name:function(){return ppe}});var Tr={};__webpack_require__.r(Tr),__webpack_require__.d(Tr,{code:function(){return mpe},decode:function(){return kpe},encode:function(){return wpe},name:function(){return gpe}});var Rr={};__webpack_require__.r(Rr),__webpack_require__.d(Rr,{identity:function(){return Bde}});var Ir={};__webpack_require__.r(Ir),__webpack_require__.d(Ir,{base2:function(){return Mde}});var Pr={};__webpack_require__.r(Pr),__webpack_require__.d(Pr,{base8:function(){return Ude}});var Dr={};__webpack_require__.r(Dr),__webpack_require__.d(Dr,{base10:function(){return jde}});var Nr={};__webpack_require__.r(Nr),__webpack_require__.d(Nr,{base16:function(){return Fde},base16upper:function(){return zde}});var Or={};__webpack_require__.r(Or),__webpack_require__.d(Or,{base32:function(){return Zde},base32hex:function(){return Hde},base32hexpad:function(){return Gde},base32hexpadupper:function(){return Yde},base32hexupper:function(){return Wde},base32pad:function(){return Vde},base32padupper:function(){return Kde},base32upper:function(){return qde},base32z:function(){return Qde}});var Lr={};__webpack_require__.r(Lr),__webpack_require__.d(Lr,{base36:function(){return Jde},base36upper:function(){return Xde}});var Br={};__webpack_require__.r(Br),__webpack_require__.d(Br,{base58btc:function(){return $de},base58flickr:function(){return eve}});var Mr={};__webpack_require__.r(Mr),__webpack_require__.d(Mr,{base64:function(){return tve},base64pad:function(){return rve},base64url:function(){return nve},base64urlpad:function(){return ave}});var Ur={};__webpack_require__.r(Ur),__webpack_require__.d(Ur,{base256emoji:function(){return uve}});var jr={};__webpack_require__.r(jr),__webpack_require__.d(jr,{sha256:function(){return Ove},sha512:function(){return Lve}});var Fr={};__webpack_require__.r(Fr),__webpack_require__.d(Fr,{identity:function(){return Mve}});var zr={};__webpack_require__.r(zr),__webpack_require__.d(zr,{code:function(){return jve},decode:function(){return zve},encode:function(){return Fve},name:function(){return Uve}});var Zr={};__webpack_require__.r(Zr),__webpack_require__.d(Zr,{code:function(){return Kve},decode:function(){return Wve},encode:function(){return Hve},name:function(){return Vve}});var qr={};__webpack_require__.r(qr),__webpack_require__.d(qr,{identity:function(){return gbe}});var Vr={};__webpack_require__.r(Vr),__webpack_require__.d(Vr,{base2:function(){return mbe}});var Kr={};__webpack_require__.r(Kr),__webpack_require__.d(Kr,{base8:function(){return wbe}});var Hr={};__webpack_require__.r(Hr),__webpack_require__.d(Hr,{base10:function(){return kbe}});var Wr={};__webpack_require__.r(Wr),__webpack_require__.d(Wr,{base16:function(){return xbe},base16upper:function(){return _be}});var Gr={};__webpack_require__.r(Gr),__webpack_require__.d(Gr,{base32:function(){return Ebe},base32hex:function(){return Tbe},base32hexpad:function(){return Ibe},base32hexpadupper:function(){return Pbe},base32hexupper:function(){return Rbe},base32pad:function(){return Abe},base32padupper:function(){return Cbe},base32upper:function(){return Sbe},base32z:function(){return Dbe}});var Yr={};__webpack_require__.r(Yr),__webpack_require__.d(Yr,{base36:function(){return Nbe},base36upper:function(){return Obe}});var Qr={};__webpack_require__.r(Qr),__webpack_require__.d(Qr,{base58btc:function(){return Lbe},base58flickr:function(){return Bbe}});var Jr={};__webpack_require__.r(Jr),__webpack_require__.d(Jr,{base64:function(){return Mbe},base64pad:function(){return Ube},base64url:function(){return jbe},base64urlpad:function(){return Fbe}});var Xr={};__webpack_require__.r(Xr),__webpack_require__.d(Xr,{base256emoji:function(){return Vbe}});var $r={};__webpack_require__.r($r),__webpack_require__.d($r,{sha256:function(){return yge},sha512:function(){return bge}});var en={};__webpack_require__.r(en),__webpack_require__.d(en,{identity:function(){return mge}});var tn={};__webpack_require__.r(tn),__webpack_require__.d(tn,{code:function(){return kge},decode:function(){return _ge},encode:function(){return xge},name:function(){return wge}});var rn={};__webpack_require__.r(rn),__webpack_require__.d(rn,{code:function(){return Cge},decode:function(){return Rge},encode:function(){return Tge},name:function(){return Age}});var nn={};__webpack_require__.r(nn),__webpack_require__.d(nn,{identity:function(){return dwe}});var an={};__webpack_require__.r(an),__webpack_require__.d(an,{base2:function(){return vwe}});var on={};__webpack_require__.r(on),__webpack_require__.d(on,{base8:function(){return ywe}});var sn={};__webpack_require__.r(sn),__webpack_require__.d(sn,{base10:function(){return bwe}});var un={};__webpack_require__.r(un),__webpack_require__.d(un,{base16:function(){return gwe},base16upper:function(){return mwe}});var cn={};__webpack_require__.r(cn),__webpack_require__.d(cn,{base32:function(){return wwe},base32hex:function(){return Ewe},base32hexpad:function(){return Awe},base32hexpadupper:function(){return Cwe},base32hexupper:function(){return Swe},base32pad:function(){return xwe},base32padupper:function(){return _we},base32upper:function(){return kwe},base32z:function(){return Twe}});var ln={};__webpack_require__.r(ln),__webpack_require__.d(ln,{base36:function(){return Rwe},base36upper:function(){return Iwe}});var fn={};__webpack_require__.r(fn),__webpack_require__.d(fn,{base58btc:function(){return Pwe},base58flickr:function(){return Dwe}});var pn={};__webpack_require__.r(pn),__webpack_require__.d(pn,{base64:function(){return Nwe},base64pad:function(){return Owe},base64url:function(){return Lwe},base64urlpad:function(){return Bwe}});var hn={};__webpack_require__.r(hn),__webpack_require__.d(hn,{base256emoji:function(){return Fwe}});var dn={};__webpack_require__.r(dn),__webpack_require__.d(dn,{sha256:function(){return pke},sha512:function(){return hke}});var vn={};__webpack_require__.r(vn),__webpack_require__.d(vn,{identity:function(){return vke}});var yn={};__webpack_require__.r(yn),__webpack_require__.d(yn,{code:function(){return bke},decode:function(){return mke},encode:function(){return gke},name:function(){return yke}});var bn={};__webpack_require__.r(bn),__webpack_require__.d(bn,{code:function(){return _ke},decode:function(){return Ske},encode:function(){return Eke},name:function(){return xke}});var gn={};__webpack_require__.r(gn),__webpack_require__.d(gn,{abortedError:function(){return hEe},notFoundError:function(){return pEe}});var mn=__webpack_require__(2791),wn=__webpack_require__(9439),kn=__webpack_require__(3433);function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _n=__webpack_require__(9142);function En(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,_n.Z)(n.key),n)}}function Sn(e,t,r){return t&&En(e.prototype,t),r&&En(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function An(e,t){return An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},An(e,t)}function Cn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&An(e,t)}function Tn(e){return Tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tn(e)}function Rn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var In=__webpack_require__(1002);function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e){var t=Rn();return function(){var r,n=Tn(e);if(t){var a=Tn(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===(0,In.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}(this,r)}}function Nn(e,t,r){return Nn=Rn()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&An(a,r.prototype),a},Nn.apply(null,arguments)}function On(e){var t="function"===typeof Map?new Map:void 0;return On=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Nn(e,arguments,Tn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),An(n,e)},On(e)}var Ln=__webpack_require__(3878),Bn=__webpack_require__(9199),Mn=__webpack_require__(181),Un=__webpack_require__(5267);function jn(e){return(0,Ln.Z)(e)||(0,Bn.Z)(e)||(0,Mn.Z)(e)||(0,Un.Z)()}var Fn,zn=__webpack_require__(7762);function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zn.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Fn||(Fn={}));var qn,Vn="popstate";function Kn(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Hn(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function Wn(e,t){return{usr:e.state,key:e.key,idx:t}}function Gn(e,t,r,n){return void 0===r&&(r=null),Zn({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Qn(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function Yn(e){var t=e.pathname,r=void 0===t?"/":t,n=e.search,a=void 0===n?"":n,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(r+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(r+="#"===o.charAt(0)?o:"#"+o),r}function Qn(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Jn(e,t,r,n){void 0===n&&(n={});var a=n,i=a.window,o=void 0===i?document.defaultView:i,s=a.v5Compat,u=void 0!==s&&s,c=o.history,l=Fn.Pop,f=null,p=h();function h(){return(c.state||{idx:null}).idx}function d(){l=Fn.Pop;var e=h(),t=null==e?null:e-p;p=e,f&&f({action:l,location:y.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,r="string"===typeof e?e:Yn(e);return Kn(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==p&&(p=0,c.replaceState(Zn({},c.state,{idx:p}),""));var y={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Vn,d),f=e,function(){o.removeEventListener(Vn,d),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=Fn.Push;var n=Gn(y.location,e,t);r&&r(n,e);var a=Wn(n,p=h()+1),i=y.createHref(n);try{c.pushState(a,"",i)}catch(s){o.location.assign(i)}u&&f&&f({action:l,location:y.location,delta:1})},replace:function(e,t){l=Fn.Replace;var n=Gn(y.location,e,t);r&&r(n,e);var a=Wn(n,p=h()),i=y.createHref(n);c.replaceState(a,"",i),u&&f&&f({action:l,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(qn||(qn={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Xn(e,t,r){void 0===r&&(r="/");var n=pa(("string"===typeof t?Qn(t):t).pathname||"/",r);if(null==n)return null;var a=$n(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var r=e.length===t.length&&e.slice(0,-1).every((function(e,r){return e===t[r]}));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=ca(a[o],fa(n));return i}function $n(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");var a=function(e,a,i){var o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(Kn(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));var s=ya([n,o.relativePath]),u=r.concat(o);e.children&&e.children.length>0&&(Kn(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),$n(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:ua(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?")){var n,i=(0,zn.Z)(ea(e.path));try{for(i.s();!(n=i.n()).done;){var o=n.value;a(e,t,o)}}catch(sY){i.e(sY)}finally{i.f()}}else a(e,t)})),t}function ea(e){var t=e.split("/");if(0===t.length)return[];var r=jn(t),n=r[0],a=r.slice(1),i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===a.length)return i?[o,""]:[o];var s=ea(a.join("/")),u=[];return u.push.apply(u,(0,kn.Z)(s.map((function(e){return""===e?o:[o,e].join("/")})))),i&&u.push.apply(u,(0,kn.Z)(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var ta=/^:\w+$/,ra=3,na=2,aa=1,ia=10,oa=-2,sa=function(e){return"*"===e};function ua(e,t){var r=e.split("/"),n=r.length;return r.some(sa)&&(n+=oa),t&&(n+=na),r.filter((function(e){return!sa(e)})).reduce((function(e,t){return e+(ta.test(t)?ra:""===t?aa:ia)}),n)}function ca(e,t){for(var r=e.routesMeta,n={},a="/",i=[],o=0;o<r.length;++o){var s=r[o],u=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",l=la({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(n,l.params);var f=s.route;i.push({params:n,pathname:ya([a,l.pathname]),pathnameBase:ba(ya([a,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(a=ya([a,l.pathnameBase]))}return i}function la(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var r=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);Hn("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return n.push(t),"/([^\\/]+)"}));e.endsWith("*")?(n.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");var i=new RegExp(a,t?void 0:"i");return[i,n]}(e.path,e.caseSensitive,e.end),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=i.reduce((function(e,t,r){if("*"===t){var n=c[r]||"";u=s.slice(0,s.length-n.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(r){return Hn(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}(c[r]||"",t),e}),{});return{params:l,pathname:s,pathnameBase:u,pattern:e}}function fa(e){try{return decodeURI(e)}catch(t){return Hn(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function pa(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function ha(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function da(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function va(e,t,r,n){var a;void 0===n&&(n=!1),"string"===typeof e?a=Qn(e):(Kn(!(a=Zn({},e)).pathname||!a.pathname.includes("?"),ha("?","pathname","search",a)),Kn(!a.pathname||!a.pathname.includes("#"),ha("#","pathname","hash",a)),Kn(!a.search||!a.search.includes("#"),ha("#","search","hash",a)));var i,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(n||null==s)i=r;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;a.pathname=c.join("/")}i=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var r="string"===typeof e?Qn(e):e,n=r.pathname,a=r.search,i=void 0===a?"":a,o=r.hash,s=void 0===o?"":o,u=n?n.startsWith("/")?n:function(e,t){var r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(n,t):t;return{pathname:u,search:ga(i),hash:ma(s)}}(a,i),f=s&&"/"!==s&&s.endsWith("/"),p=(o||"."===s)&&r.endsWith("/");return l.pathname.endsWith("/")||!f&&!p||(l.pathname+="/"),l}var ya=function(e){return e.join("/").replace(/\/\/+/g,"/")},ba=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ga=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ma=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},wa=function(e){Cn(r,e);var t=Dn(r);function r(){return xn(this,r),t.apply(this,arguments)}return Sn(r)}(On(Error));function ka(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var xa=["post","put","patch","delete"],_a=(new Set(xa),["get"].concat(xa));new Set(_a),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ea.apply(this,arguments)}var Sa=mn.createContext(null);var Aa=mn.createContext(null);var Ca=mn.createContext(null);var Ta=mn.createContext(null);var Ra=mn.createContext(null);var Ia=mn.createContext({outlet:null,matches:[],isDataRoute:!1});var Pa=mn.createContext(null);function Da(){return null!=mn.useContext(Ra)}function Na(){return Da()||Kn(!1),mn.useContext(Ra).location}function Oa(e){mn.useContext(Ta).static||mn.useLayoutEffect(e)}function La(){return mn.useContext(Ia).isDataRoute?function(){var e=Va(Ua.UseNavigateStable).router,t=Ha(ja.UseNavigateStable),r=mn.useRef(!1);return Oa((function(){r.current=!0})),mn.useCallback((function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,Ea({fromRouteId:t},a)))}),[e,t])}():function(){Da()||Kn(!1);var e=mn.useContext(Ta),t=e.basename,r=e.navigator,n=mn.useContext(Ia).matches,a=Na().pathname,i=JSON.stringify(da(n).map((function(e){return e.pathnameBase}))),o=mn.useRef(!1);return Oa((function(){o.current=!0})),mn.useCallback((function(e,n){if(void 0===n&&(n={}),o.current)if("number"!==typeof e){var s=va(e,JSON.parse(i),a,"path"===n.relative);"/"!==t&&(s.pathname="/"===s.pathname?t:ya([t,s.pathname])),(n.replace?r.replace:r.push)(s,n.state,n)}else r.go(e)}),[t,r,i,a])}()}function Ba(e,t,r){Da()||Kn(!1);var n,a=mn.useContext(Ta).navigator,i=mn.useContext(Ia).matches,o=i[i.length-1],s=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,Na());if(t){var l,f="string"===typeof t?Qn(t):t;"/"===u||(null==(l=f.pathname)?void 0:l.startsWith(u))||Kn(!1),n=f}else n=c;var p=n.pathname||"/",h=Xn(e,{pathname:"/"===u?p:p.slice(u.length)||"/"});var d=qa(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:ya([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:ya([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),i,r);return t&&d?mn.createElement(Ra.Provider,{value:{location:Ea({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:Fn.Pop}},d):d}function Ma(){var e=function(){var e,t=mn.useContext(Pa),r=Ka(ja.UseRouteError),n=Ha(ja.UseRouteError);if(t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=ka(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n};return mn.createElement(mn.Fragment,null,mn.createElement("h2",null,"Unexpected Application Error!"),mn.createElement("h3",{style:{fontStyle:"italic"}},t),r?mn.createElement("pre",{style:a},r):null,null)}var Ua,ja,Fa=mn.createElement(Ma,null),za=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},n}return Sn(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?mn.createElement(Ia.Provider,{value:this.props.routeContext},mn.createElement(Pa.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(mn.Component);function Za(e){var t=e.routeContext,r=e.match,n=e.children,a=mn.useContext(Sa);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),mn.createElement(Ia.Provider,{value:t},n)}function qa(e,t,r){var n;if(void 0===t&&(t=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var i=e,o=null==(n=r)?void 0:n.errors;if(null!=o){var s=i.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));s>=0||Kn(!1),i=i.slice(0,Math.min(i.length,s+1))}return i.reduceRight((function(e,n,a){var s=n.route.id?null==o?void 0:o[n.route.id]:null,u=null;r&&(u=n.route.errorElement||Fa);var c=t.concat(i.slice(0,a+1)),l=function(){var t;return t=s?u:n.route.Component?mn.createElement(n.route.Component,null):n.route.element?n.route.element:e,mn.createElement(Za,{match:n,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===a)?mn.createElement(za,{location:r.location,revalidation:r.revalidation,component:u,error:s,children:l(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):l()}),null)}function Va(e){var t=mn.useContext(Sa);return t||Kn(!1),t}function Ka(e){var t=mn.useContext(Aa);return t||Kn(!1),t}function Ha(e){var t=function(e){var t=mn.useContext(Ia);return t||Kn(!1),t}(),r=t.matches[t.matches.length-1];return r.route.id||Kn(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Ua||(Ua={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(ja||(ja={}));var Wa;function Ga(e){var t=e.to,r=e.replace,n=e.state,a=e.relative;Da()||Kn(!1);var i=mn.useContext(Ia).matches,o=Na().pathname,s=La(),u=va(t,da(i).map((function(e){return e.pathnameBase})),o,"path"===a),c=JSON.stringify(u);return mn.useEffect((function(){return s(JSON.parse(c),{replace:r,state:n,relative:a})}),[s,c,a,r,n]),null}function Ya(e){Kn(!1)}function Qa(e){var t=e.basename,r=void 0===t?"/":t,n=e.children,a=void 0===n?null:n,i=e.location,o=e.navigationType,s=void 0===o?Fn.Pop:o,u=e.navigator,c=e.static,l=void 0!==c&&c;Da()&&Kn(!1);var f=r.replace(/^\/*/,"/"),p=mn.useMemo((function(){return{basename:f,navigator:u,static:l}}),[f,u,l]);"string"===typeof i&&(i=Qn(i));var h=i,d=h.pathname,v=void 0===d?"/":d,y=h.search,b=void 0===y?"":y,g=h.hash,m=void 0===g?"":g,w=h.state,k=void 0===w?null:w,x=h.key,_=void 0===x?"default":x,E=mn.useMemo((function(){var e=pa(v,f);return null==e?null:{location:{pathname:e,search:b,hash:m,state:k,key:_},navigationType:s}}),[f,v,b,m,k,_,s]);return null==E?null:mn.createElement(Ta.Provider,{value:p},mn.createElement(Ra.Provider,{children:a,value:E}))}function Ja(e){var t=e.children,r=e.location;return Ba($a(t),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Wa||(Wa={}));var Xa=new Promise((function(){}));mn.Component;function $a(e,t){void 0===t&&(t=[]);var r=[];return mn.Children.forEach(e,(function(e,n){if(mn.isValidElement(e)){var a=[].concat((0,kn.Z)(t),[n]);if(e.type!==mn.Fragment){e.type!==Ya&&Kn(!1),e.props.index&&e.props.children&&Kn(!1);var i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=$a(e.props.children,a)),r.push(i)}else r.push.apply(r,$a(e.props.children,a))}})),r}function ei(e){var t,r=e.basename,n=e.children,a=e.window,i=mn.useRef();null==i.current&&(i.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),Jn((function(e,t){var r=e.location;return Gn("",{pathname:r.pathname,search:r.search,hash:r.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Yn(t)}),null,t)));var o=i.current,s=mn.useState({action:o.action,location:o.location}),u=(0,wn.Z)(s,2),c=u[0],l=u[1];return mn.useLayoutEffect((function(){return o.listen(l)}),[o]),mn.createElement(Qa,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:o})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ti,ri;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(ti||(ti={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ri||(ri={}));var ni=__webpack_require__(7107),ai=__webpack_require__(7462),ii=__webpack_require__(3366),oi=__webpack_require__(4942);var si=mn.createContext(null);function ui(){return mn.useContext(si)}var ci="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",li=__webpack_require__(184);var fi=function(e){var t=e.children,r=e.theme,n=ui(),a=mn.useMemo((function(){var e=null===n?r:function(e,t){return"function"===typeof t?t(e):(0,ai.Z)({},e,t)}(n,r);return null!=e&&(e[ci]=null!==n),e}),[r,n]);return(0,li.jsx)(si.Provider,{value:a,children:t})},pi=__webpack_require__(2564),hi=__webpack_require__(9120),di={};function vi(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mn.useMemo((function(){var a=e&&t[e]||t;if("function"===typeof r){var i=r(a),o=e?(0,ai.Z)({},t,(0,oi.Z)({},e,i)):i;return n?function(){return o}:o}return e?(0,ai.Z)({},t,(0,oi.Z)({},e,r)):(0,ai.Z)({},t,r)}),[e,t,r,n])}var yi=function(e){var t=e.children,r=e.theme,n=e.themeId,a=(0,hi.Z)(di),i=ui()||di,o=vi(n,a,r),s=vi(n,i,r,!0);return(0,li.jsx)(fi,{theme:s,children:(0,li.jsx)(pi.T.Provider,{value:o,children:t})})},bi=__webpack_require__(988),gi=["theme"];function mi(e){var t=e.theme,r=(0,ii.Z)(e,gi),n=t[bi.Z];return(0,li.jsx)(yi,(0,ai.Z)({},r,{themeId:n?bi.Z:void 0,theme:n||t}))}var wi=__webpack_require__(1402),ki=__webpack_require__(5438),xi=__webpack_require__(2561),_i=__webpack_require__(9140),Ei=(__webpack_require__(3361),__webpack_require__(2110),(0,pi.w)((function(e,t){var r=e.styles,n=(0,_i.O)([r],void 0,mn.useContext(pi.T));if(!pi.i){for(var a,i=n.name,o=n.styles,s=n.next;void 0!==s;)i+=" "+s.name,o+=s.styles,s=s.next;var u=!0===t.compat,c=t.insert("",{name:i,styles:o},t.sheet,u);return u?null:mn.createElement("style",((a={})["data-emotion"]=t.key+"-global "+i,a.dangerouslySetInnerHTML={__html:c},a.nonce=t.sheet.nonce,a))}var l=mn.useRef();return(0,xi.j)((function(){var e=t.key+"-global",r=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,i=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(r.before=t.sheet.tags[0]),null!==i&&(a=!0,i.setAttribute("data-emotion",e),r.hydrate([i])),l.current=[r,a],function(){r.flush()}}),[t]),(0,xi.j)((function(){var e=l.current,r=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&(0,ki.My)(t,n.next,!0),r.tags.length){var a=r.tags[r.tags.length-1].nextElementSibling;r.before=a,r.flush()}t.insert("",n,r,!1)}}),[t,n.name]),null})));function Si(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,_i.O)(t)}var Ai=function(){var e=Si.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Ci(e){var t=e.styles,r=e.defaultTheme,n=void 0===r?{}:r,a="function"===typeof t?function(e){return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,li.jsx)(Ei,{styles:a})}var Ti=__webpack_require__(418);var Ri=function(e){var t=e.styles,r=e.themeId,n=e.defaultTheme,a=void 0===n?{}:n,i=(0,Ti.Z)(a),o="function"===typeof t?t(r&&i[r]||i):t;return(0,li.jsx)(Ci,{styles:o})},Ii=__webpack_require__(6482);var Pi=function(e){return(0,li.jsx)(Ri,(0,ai.Z)({},e,{defaultTheme:Ii.Z,themeId:bi.Z}))},Di=function(e,t){return(0,ai.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode})},Ni=function(e){return(0,ai.Z)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}})};var Oi=function(e){var t=(0,wi.Z)({props:e,name:"MuiCssBaseline"}),r=t.children,n=t.enableColorScheme,a=void 0!==n&&n;return(0,li.jsxs)(mn.Fragment,{children:[(0,li.jsx)(Pi,{styles:function(e){return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};r&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((function(t){var r,a=(0,wn.Z)(t,2),i=a[0],o=a[1];n[e.getColorSchemeSelector(i).replace(/\s*&/,"")]={colorScheme:null==(r=o.palette)?void 0:r.mode}}));var a=(0,ai.Z)({html:Di(e,r),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,ai.Z)({margin:0},Ni(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},n),i=null==(t=e.components)||null==(t=t.MuiCssBaseline)?void 0:t.styleOverrides;return i&&(a=[a,i]),a}(e,a)}}),r]})},Li=__webpack_require__(3733),Bi=__webpack_require__(4419),Mi=__webpack_require__(1217),Ui=__webpack_require__(78),ji=(0,__webpack_require__(4046).ZP)(),Fi=__webpack_require__(7078),zi=__webpack_require__(2466),Zi=__webpack_require__(7416),qi=["sx"],Vi=function(e){var t,r,n={systemProps:{},otherProps:{}},a=null!=(t=null==e||null==(r=e.theme)?void 0:r.unstable_sxConfig)?t:Zi.Z;return Object.keys(e).forEach((function(t){a[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]})),n};function Ki(e){var t,r=e.sx,n=(0,ii.Z)(e,qi),a=Vi(n),i=a.systemProps,o=a.otherProps;return t=Array.isArray(r)?[i].concat((0,kn.Z)(r)):"function"===typeof r?function(){var e=r.apply(void 0,arguments);return(0,zi.P)(e)?(0,ai.Z)({},i,e):i}:(0,ai.Z)({},i,r),(0,ai.Z)({},o,{sx:t})}var Hi=__webpack_require__(5080),Wi=function(e,t,r){var n,a,i=e.keys[0];if(Array.isArray(t))t.forEach((function(t,n){r((function(t,r){n<=e.keys.length-1&&(0===n?Object.assign(t,r):t[e.up(e.keys[n])]=r)}),t)}));else if(t&&"object"===typeof t){(Object.keys(t).length>e.keys.length?e.keys:(n=e.keys,a=Object.keys(t),n.filter((function(e){return a.includes(e)})))).forEach((function(n){if(-1!==e.keys.indexOf(n)){var a=t[n];void 0!==a&&r((function(t,r){i===n?Object.assign(t,r):t[e.up(n)]=r}),a)}}))}else"number"!==typeof t&&"string"!==typeof t||r((function(e,t){Object.assign(e,t)}),t)};function Gi(e){return e?"Level".concat(e):""}function Yi(e){return e.unstable_level>0&&e.container}function Qi(e){return function(t){return"var(--Grid-".concat(t,"Spacing").concat(Gi(e.unstable_level),")")}}function Ji(e){return function(t){return 0===e.unstable_level?"var(--Grid-".concat(t,"Spacing)"):"var(--Grid-".concat(t,"Spacing").concat(Gi(e.unstable_level-1),")")}}function Xi(e){return 0===e.unstable_level?"var(--Grid-columns)":"var(--Grid-columns".concat(Gi(e.unstable_level-1),")")}var $i=function(e){var t=e.theme,r=e.ownerState,n=Qi(r),a={};return Wi(t.breakpoints,r.gridSize,(function(e,t){var i={};!0===t&&(i={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===t&&(i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"===typeof t&&(i={flexGrow:0,flexBasis:"auto",width:"calc(100% * ".concat(t," / ").concat(Xi(r)).concat(Yi(r)?" + ".concat(n("column")):"",")")}),e(a,i)})),a},eo=function(e){var t=e.theme,r=e.ownerState,n={};return Wi(t.breakpoints,r.gridOffset,(function(e,t){var a={};"auto"===t&&(a={marginLeft:"auto"}),"number"===typeof t&&(a={marginLeft:0===t?"0px":"calc(100% * ".concat(t," / ").concat(Xi(r),")")}),e(n,a)})),n},to=function(e){var t=e.theme,r=e.ownerState;if(!r.container)return{};var n=Yi(r)?(0,oi.Z)({},"--Grid-columns".concat(Gi(r.unstable_level)),Xi(r)):{"--Grid-columns":12};return Wi(t.breakpoints,r.columns,(function(e,t){e(n,(0,oi.Z)({},"--Grid-columns".concat(Gi(r.unstable_level)),t))})),n},ro=function(e){var t=e.theme,r=e.ownerState;if(!r.container)return{};var n=Ji(r),a=Yi(r)?(0,oi.Z)({},"--Grid-rowSpacing".concat(Gi(r.unstable_level)),n("row")):{};return Wi(t.breakpoints,r.rowSpacing,(function(e,n){var i;e(a,(0,oi.Z)({},"--Grid-rowSpacing".concat(Gi(r.unstable_level)),"string"===typeof n?n:null==(i=t.spacing)?void 0:i.call(t,n)))})),a},no=function(e){var t=e.theme,r=e.ownerState;if(!r.container)return{};var n=Ji(r),a=Yi(r)?(0,oi.Z)({},"--Grid-columnSpacing".concat(Gi(r.unstable_level)),n("column")):{};return Wi(t.breakpoints,r.columnSpacing,(function(e,n){var i;e(a,(0,oi.Z)({},"--Grid-columnSpacing".concat(Gi(r.unstable_level)),"string"===typeof n?n:null==(i=t.spacing)?void 0:i.call(t,n)))})),a},ao=function(e){var t=e.theme,r=e.ownerState;if(!r.container)return{};var n={};return Wi(t.breakpoints,r.direction,(function(e,t){e(n,{flexDirection:t})})),n},io=function(e){var t=e.ownerState,r=Qi(t),n=Ji(t);return(0,ai.Z)({minWidth:0,boxSizing:"border-box"},t.container&&(0,ai.Z)({display:"flex",flexWrap:"wrap"},t.wrap&&"wrap"!==t.wrap&&{flexWrap:t.wrap},{margin:"calc(".concat(r("row")," / -2) calc(").concat(r("column")," / -2)")},t.disableEqualOverflow&&{margin:"calc(".concat(r("row")," * -1) 0px 0px calc(").concat(r("column")," * -1)")}),(!t.container||Yi(t))&&(0,ai.Z)({padding:"calc(".concat(n("row")," / 2) calc(").concat(n("column")," / 2)")},(t.disableEqualOverflow||t.parentDisableEqualOverflow)&&{padding:"".concat(n("row")," 0px 0px ").concat(n("column"))}))},oo=function(e){var t=[];return Object.entries(e).forEach((function(e){var r=(0,wn.Z)(e,2),n=r[0],a=r[1];!1!==a&&void 0!==a&&t.push("grid-".concat(n,"-").concat(String(a)))})),t},so=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xs";function r(e){return void 0!==e&&("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e&&e>0)}if(r(e))return["spacing-".concat(t,"-").concat(String(e))];if("object"===typeof e&&!Array.isArray(e)){var n=[];return Object.entries(e).forEach((function(e){var t=(0,wn.Z)(e,2),a=t[0],i=t[1];r(i)&&n.push("spacing-".concat(a,"-").concat(String(i)))})),n}return[]},uo=function(e){return void 0===e?[]:"object"===typeof e?Object.entries(e).map((function(e){var t=(0,wn.Z)(e,2),r=t[0],n=t[1];return"direction-".concat(r,"-").concat(n)})):["direction-xs-".concat(String(e))]},co=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],lo=(0,Hi.Z)(),fo=ji("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,t){return t.root}});function po(e){return(0,Fi.Z)({props:e,name:"MuiGrid",defaultTheme:lo})}var ho=__webpack_require__(6934),vo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createStyledComponent,r=void 0===t?fo:t,n=e.useThemeProps,a=void 0===n?po:n,i=e.componentName,o=void 0===i?"MuiGrid":i,s=mn.createContext(void 0),u=r(to,no,ro,$i,ao,io,eo),c=mn.forwardRef((function(e,t){var r,n,i,c,l,f,p,h,d=(0,Ti.Z)(),v=Ki(a(e)),y=mn.useContext(s),b=v.className,g=v.children,m=v.columns,w=void 0===m?12:m,k=v.container,x=void 0!==k&&k,_=v.component,E=void 0===_?"div":_,S=v.direction,A=void 0===S?"row":S,C=v.wrap,T=void 0===C?"wrap":C,R=v.spacing,I=void 0===R?0:R,P=v.rowSpacing,D=void 0===P?I:P,N=v.columnSpacing,O=void 0===N?I:N,L=v.disableEqualOverflow,B=v.unstable_level,M=void 0===B?0:B,U=(0,ii.Z)(v,co),j=L;M&&void 0!==L&&(j=e.disableEqualOverflow);var F={},z={},Z={};Object.entries(U).forEach((function(e){var t=(0,wn.Z)(e,2),r=t[0],n=t[1];void 0!==d.breakpoints.values[r]?F[r]=n:void 0!==d.breakpoints.values[r.replace("Offset","")]?z[r.replace("Offset","")]=n:Z[r]=n}));var q=null!=(r=e.columns)?r:M?void 0:w,V=null!=(n=e.spacing)?n:M?void 0:I,K=null!=(i=null!=(c=e.rowSpacing)?c:e.spacing)?i:M?void 0:D,H=null!=(l=null!=(f=e.columnSpacing)?f:e.spacing)?l:M?void 0:O,W=(0,ai.Z)({},v,{level:M,columns:q,container:x,direction:A,wrap:T,spacing:V,rowSpacing:K,columnSpacing:H,gridSize:F,gridOffset:z,disableEqualOverflow:null!=(p=null!=(h=j)?h:y)&&p,parentDisableEqualOverflow:y}),G=function(e,t){var r=e.container,n=e.direction,a=e.spacing,i=e.wrap,s=e.gridSize,u={root:["root",r&&"container","wrap"!==i&&"wrap-xs-".concat(String(i))].concat((0,kn.Z)(uo(n)),(0,kn.Z)(oo(s)),(0,kn.Z)(r?so(a,t.breakpoints.keys[0]):[]))};return(0,Bi.Z)(u,(function(e){return(0,Mi.Z)(o,e)}),{})}(W,d),Y=(0,li.jsx)(u,(0,ai.Z)({ref:t,as:E,ownerState:W,className:(0,Li.Z)(G.root,b)},Z,{children:mn.Children.map(g,(function(e){var t;return mn.isValidElement(e)&&(0,Ui.Z)(e,["Grid"])?mn.cloneElement(e,{unstable_level:null!=(t=e.props.unstable_level)?t:M+1}):e}))}));return void 0!==j&&j!==(null!=y&&y)&&(Y=(0,li.jsx)(s.Provider,{value:j,children:Y})),Y}));return c.muiName="Grid",c}({createStyledComponent:(0,ho.ZP)("div",{name:"MuiGrid2",slot:"Root",overridesResolver:function(e,t){return t.root}}),componentName:"MuiGrid2",useThemeProps:function(e){return(0,wi.Z)({props:e,name:"MuiGrid2"})}}),yo=vo,bo=__webpack_require__(2421),go=__webpack_require__(104),mo=["className","component"];var wo=__webpack_require__(5902),ko=(0,ni.Z)(),xo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,r=e.defaultTheme,n=e.defaultClassName,a=void 0===n?"MuiBox-root":n,i=e.generateClassName,o=(0,bo.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(go.Z);return mn.forwardRef((function(e,n){var s=(0,Ti.Z)(r),u=Ki(e),c=u.className,l=u.component,f=void 0===l?"div":l,p=(0,ii.Z)(u,mo);return(0,li.jsx)(o,(0,ai.Z)({as:f,ref:n,className:(0,Li.Z)(c,i?i(a):a),theme:t&&s[t]||s},p))}))}({themeId:bi.Z,defaultTheme:ko,defaultClassName:"MuiBox-root",generateClassName:wo.Z.generate}),_o=xo;function Eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function So(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(r),!0).forEach((function(t){(0,oi.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ao(e){var t=e.size,r=e.margin,n=e.styles,a=e.children,i=e.landscape,o="A4"===t?{width:"210mm",minWidth:"210mm",maxWidth:"210mm",height:"297mm",minHeight:"297mm",maxHeight:"297mm",overflow:"hidden"}:"Letter"===t?i?{height:"216mm",minHeight:"216mm",maxHeight:"216mm",width:"279mm",minWidth:"279mm",maxWidth:"279mm",overflow:"hidden"}:{width:"216mm",minWidth:"216mm",maxWidth:"216mm",height:"279mm",minHeight:"279mm",maxHeight:"279mm",overflow:"hidden"}:{},s={backgroundColor:"white",padding:r||"0.5in"};return(0,li.jsx)("div",{style:So(So(So({},s),o),n),children:a})}var Co=__webpack_require__(4036),To=__webpack_require__(5878);function Ro(e){return(0,Mi.Z)("MuiTypography",e)}(0,To.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var Io=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Po=(0,ho.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t["align".concat((0,Co.Z)(r.align))],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({margin:0},"inherit"===r.variant&&{font:"inherit"},"inherit"!==r.variant&&t.typography[r.variant],"inherit"!==r.align&&{textAlign:r.align},r.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r.gutterBottom&&{marginBottom:"0.35em"},r.paragraph&&{marginBottom:16})})),Do={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},No={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Oo=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiTypography"}),n=function(e){return No[e]||e}(r.color),a=Ki((0,ai.Z)({},r,{color:n})),i=a.align,o=void 0===i?"inherit":i,s=a.className,u=a.component,c=a.gutterBottom,l=void 0!==c&&c,f=a.noWrap,p=void 0!==f&&f,h=a.paragraph,d=void 0!==h&&h,v=a.variant,y=void 0===v?"body1":v,b=a.variantMapping,g=void 0===b?Do:b,m=(0,ii.Z)(a,Io),w=(0,ai.Z)({},a,{align:o,color:n,className:s,component:u,gutterBottom:l,noWrap:p,paragraph:d,variant:y,variantMapping:g}),k=u||(d?"p":g[y]||Do[y])||"span",x=function(e){var t=e.align,r=e.gutterBottom,n=e.noWrap,a=e.paragraph,i=e.variant,o=e.classes,s={root:["root",i,"inherit"!==e.align&&"align".concat((0,Co.Z)(t)),r&&"gutterBottom",n&&"noWrap",a&&"paragraph"]};return(0,Bi.Z)(s,Ro,o)}(w);return(0,li.jsx)(Po,(0,ai.Z)({as:k,ref:t,ownerState:w,className:(0,Li.Z)(x.root,s)},m))})),Lo=__webpack_require__(3031),Bo=__webpack_require__(2071);function Mo(e){return(0,Mi.Z)("MuiLink",e)}var Uo=(0,To.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),jo=__webpack_require__(8529),Fo=__webpack_require__(2065),zo={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Zo=function(e){var t=e.theme,r=e.ownerState,n=function(e){return zo[e]||e}(r.color),a=(0,jo.DW)(t,"palette.".concat(n),!1)||r.color,i=(0,jo.DW)(t,"palette.".concat(n,"Channel"));return"vars"in t&&i?"rgba(".concat(i," / 0.4)"):(0,Fo.Fq)(a,.4)},qo=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],Vo=(0,ho.ZP)(Oo,{name:"MuiLink",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["underline".concat((0,Co.Z)(r.underline))],"button"===r.component&&t.button]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({},"none"===r.underline&&{textDecoration:"none"},"hover"===r.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===r.underline&&(0,ai.Z)({textDecoration:"underline"},"inherit"!==r.color&&{textDecorationColor:Zo({theme:t,ownerState:r})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===r.component&&(0,oi.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(Uo.focusVisible),{outline:"auto"}))})),Ko=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiLink"}),n=r.className,a=r.color,i=void 0===a?"primary":a,o=r.component,s=void 0===o?"a":o,u=r.onBlur,c=r.onFocus,l=r.TypographyClasses,f=r.underline,p=void 0===f?"always":f,h=r.variant,d=void 0===h?"inherit":h,v=r.sx,y=(0,ii.Z)(r,qo),b=(0,Lo.Z)(),g=b.isFocusVisibleRef,m=b.onBlur,w=b.onFocus,k=b.ref,x=mn.useState(!1),_=(0,wn.Z)(x,2),E=_[0],S=_[1],A=(0,Bo.Z)(t,k),C=(0,ai.Z)({},r,{color:i,component:s,focusVisible:E,underline:p,variant:d}),T=function(e){var t=e.classes,r=e.component,n=e.focusVisible,a=e.underline,i={root:["root","underline".concat((0,Co.Z)(a)),"button"===r&&"button",n&&"focusVisible"]};return(0,Bi.Z)(i,Mo,t)}(C);return(0,li.jsx)(Vo,(0,ai.Z)({color:i,className:(0,Li.Z)(T.root,n),classes:l,component:s,onBlur:function(e){m(e),!1===g.current&&S(!1),u&&u(e)},onFocus:function(e){w(e),!0===g.current&&S(!0),c&&c(e)},ref:A,ownerState:C,variant:d,sx:[].concat((0,kn.Z)(Object.keys(zo).includes(i)?[]:[{color:i}]),(0,kn.Z)(Array.isArray(v)?v:[v]))},y))}));function Ho(e){return(0,Mi.Z)("MuiDivider",e)}(0,To.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var Wo=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Go=(0,ho.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},r.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},r.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,Fo.Fq)(t.palette.divider,.08)},"inset"===r.variant&&{marginLeft:72},"middle"===r.variant&&"horizontal"===r.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===r.variant&&"vertical"===r.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===r.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},r.flexItem&&{alignSelf:"stretch",height:"auto"})}),(function(e){var t=e.ownerState;return(0,ai.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({},r.children&&"vertical"!==r.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider)}})}),(function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({},r.children&&"vertical"===r.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider)}})}),(function(e){var t=e.ownerState;return(0,ai.Z)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),Yo=(0,ho.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:function(e,t){var r=e.ownerState;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===r.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),Qo=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiDivider"}),n=r.absolute,a=void 0!==n&&n,i=r.children,o=r.className,s=r.component,u=void 0===s?i?"div":"hr":s,c=r.flexItem,l=void 0!==c&&c,f=r.light,p=void 0!==f&&f,h=r.orientation,d=void 0===h?"horizontal":h,v=r.role,y=void 0===v?"hr"!==u?"separator":void 0:v,b=r.textAlign,g=void 0===b?"center":b,m=r.variant,w=void 0===m?"fullWidth":m,k=(0,ii.Z)(r,Wo),x=(0,ai.Z)({},r,{absolute:a,component:u,flexItem:l,light:p,orientation:d,role:y,textAlign:g,variant:w}),_=function(e){var t=e.absolute,r=e.children,n=e.classes,a=e.flexItem,i=e.light,o=e.orientation,s=e.textAlign,u={root:["root",t&&"absolute",e.variant,i&&"light","vertical"===o&&"vertical",a&&"flexItem",r&&"withChildren",r&&"vertical"===o&&"withChildrenVertical","right"===s&&"vertical"!==o&&"textAlignRight","left"===s&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,Bi.Z)(u,Ho,n)}(x);return(0,li.jsx)(Go,(0,ai.Z)({as:u,className:(0,Li.Z)(_.root,o),role:y,ref:t,ownerState:x},k,{children:i?(0,li.jsx)(Yo,{className:_.wrapper,ownerState:x,children:i}):null}))}));Qo.muiSkipListHighlight=!0;var Jo=Qo;function Xo(e){return{width:"100%",color:e?"grey":"black",webkitUserSelect:e&&"none",msUserSelect:e&&"none",userSelect:e&&"none"}}function $o(e){var t=e.text,r=e.page,n=e.onClick,a=!n;return(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Ko,{component:a?"div":"button",onClick:n,sx:So({mt:2,fontSize:"20px",textTransform:"uppercase"},Xo(a)),underline:"none",children:(0,li.jsxs)(yo,{xs:12,container:!0,children:[(0,li.jsx)(yo,{xs:"auto",children:t}),(0,li.jsx)(yo,{xs:!0}),(0,li.jsx)(yo,{xs:"auto",children:r}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Jo,{})})]})})})}function es(e){var t=e.text,r=e.page,n=e.onClick,a=!n;return(0,li.jsx)(yo,{xs:12,pt:1,children:(0,li.jsx)(Ko,{component:a?"div":"button",onClick:n,sx:So({width:"100%",fontSize:"16px"},Xo(a)),underline:"none",children:(0,li.jsxs)(yo,{xs:12,container:!0,children:[(0,li.jsx)(yo,{xs:"auto",children:t}),(0,li.jsx)(yo,{xs:!0,children:(0,li.jsx)(Oo,{noWrap:!0,children:"......................................................"})}),(0,li.jsx)(yo,{xs:"auto",children:r})]})})})}function ts(){return(0,li.jsxs)(yo,{container:!0,pt:70,children:[(0,li.jsx)(yo,{xs:12,pb:.5,children:(0,li.jsx)(Jo,{})}),(0,li.jsx)(yo,{xs:"auto",children:(0,li.jsx)(Oo,{children:"Created by Joseph Reed"})}),(0,li.jsx)(yo,{xs:!0}),(0,li.jsx)(yo,{xs:"auto",children:(0,li.jsx)(Oo,{sx:{color:"black"},children:(0,li.jsx)(Ko,{color:"inherit",href:"mailto:support@herodrop.org",target:"_blank",underline:"none",children:"Contact us"})})})]})}function rs(e){var t=e.navigate,r=mn.useState(null),n=(0,wn.Z)(r,2);n[0],n[1];return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)(_o,{sx:{width:"calc(216mm + 56px)",pr:"56px"},children:(0,li.jsx)(Ao,{size:"Letter",margin:"0.5in",children:(0,li.jsxs)(yo,{container:!0,children:[(0,li.jsxs)(yo,{xs:12,container:!0,children:[(0,li.jsx)(yo,{xs:5,children:(0,li.jsx)(Oo,{sx:{fontSize:"48px",fontWeight:"bold"},children:"HERO DROP"})}),(0,li.jsx)(yo,{xs:!0,container:!0,alignItems:"end",pb:1.25,children:(0,li.jsx)(Oo,{sx:{fontSize:"24px",fontWeight:"bold",color:"grey !important"},children:"TTRPG"})})]}),(0,li.jsxs)(yo,{xs:6,container:!0,pr:4,children:[(0,li.jsx)($o,{text:"About",page:1,onClick:null}),(0,li.jsx)($o,{text:"Introduction",page:2,onClick:null}),(0,li.jsx)(es,{text:"Player's Handbook",page:3,onClick:null}),(0,li.jsx)(es,{text:"Bard's Guide",page:4,onClick:null}),(0,li.jsx)($o,{text:"Lore",page:5,onClick:null}),(0,li.jsx)(es,{text:"Primordials, Gods, and Heroes",page:6,onClick:null}),(0,li.jsx)(es,{text:"The Continents of Planar",page:7,onClick:null}),(0,li.jsx)(es,{text:"Beyond the Edge of the World",page:8,onClick:null})]}),(0,li.jsx)(yo,{xs:6,pl:4,children:(0,li.jsxs)(yo,{container:!0,children:[(0,li.jsx)($o,{text:"Character Sheet",page:9,onClick:function(){return t("/character-sheet")}}),(0,li.jsx)($o,{text:"Log in",page:10,onClick:null})]})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ts,{})})]})})})})}function ns(){var e=La();return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(_o,{displayPrint:"none",sx:{zIndex:3,position:"absolute",top:"8px",left:"0.5in",width:"216mm",color:"white"},children:(0,li.jsxs)(yo,{container:!0,children:[(0,li.jsx)(yo,{xs:"auto"}),(0,li.jsx)(yo,{xs:"auto"}),(0,li.jsx)(yo,{xs:!0}),(0,li.jsx)(yo,{xs:"auto"})]})}),(0,li.jsx)(_o,{sx:{p:"0.5in",pt:"calc(.5in + 8px)","@media print":{minWidth:"100%",m:0,p:0}},children:(0,li.jsx)(rs,{navigate:e})})]})}var as=__webpack_require__(5735),is=__webpack_require__(9683);function os(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ss(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,An(e,t)}var us=mn.createContext(null);function cs(e,t){var r=Object.create(null);return e&&mn.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return t&&(0,mn.isValidElement)(e)?t(e):e}(e)})),r}function ls(e,t,r){return null!=r[t]?r[t]:e.props[t]}function fs(e,t,r){var n=cs(e.children),a=function(e,t){function r(r){return r in t?t[r]:e[r]}e=e||{},t=t||{};var n,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var u in t){if(a[u])for(n=0;n<a[u].length;n++){var c=a[u][n];s[a[u][n]]=r(c)}s[u]=r(u)}for(n=0;n<i.length;n++)s[i[n]]=r(i[n]);return s}(t,n);return Object.keys(a).forEach((function(i){var o=a[i];if((0,mn.isValidElement)(o)){var s=i in t,u=i in n,c=t[i],l=(0,mn.isValidElement)(c)&&!c.props.in;!u||s&&!l?u||!s||l?u&&s&&(0,mn.isValidElement)(c)&&(a[i]=(0,mn.cloneElement)(o,{onExited:r.bind(null,o),in:c.props.in,exit:ls(o,"exit",e),enter:ls(o,"enter",e)})):a[i]=(0,mn.cloneElement)(o,{in:!1}):a[i]=(0,mn.cloneElement)(o,{onExited:r.bind(null,o),in:!0,exit:ls(o,"exit",e),enter:ls(o,"enter",e)})}})),a}var ps=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},hs=function(e){function t(t,r){var n,a=(n=e.call(this,t,r)||this).handleExited.bind(Pn(n));return n.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},n}ss(t,e);var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var r,n,a=t.children,i=t.handleExited;return{children:t.firstRender?(r=e,n=i,cs(r.children,(function(e){return(0,mn.cloneElement)(e,{onExited:n.bind(null,e),in:!0,appear:ls(e,"appear",r),enter:ls(e,"enter",r),exit:ls(e,"exit",r)})}))):fs(e,a,i),firstRender:!1}},r.handleExited=function(e,t){var r=cs(this.props.children);e.key in r||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var r=(0,ai.Z)({},t.children);return delete r[e.key],{children:r}})))},r.render=function(){var e=this.props,t=e.component,r=e.childFactory,n=(0,ii.Z)(e,["component","childFactory"]),a=this.state.contextValue,i=ps(this.state.children).map(r);return delete n.appear,delete n.enter,delete n.exit,null===t?mn.createElement(us.Provider,{value:a},i):mn.createElement(us.Provider,{value:a},mn.createElement(t,n,i))},t}(mn.Component);hs.propTypes={},hs.defaultProps={component:"div",childFactory:function(e){return e}};var ds=hs;var vs=function(e){var t=e.className,r=e.classes,n=e.pulsate,a=void 0!==n&&n,i=e.rippleX,o=e.rippleY,s=e.rippleSize,u=e.in,c=e.onExited,l=e.timeout,f=mn.useState(!1),p=(0,wn.Z)(f,2),h=p[0],d=p[1],v=(0,Li.Z)(t,r.ripple,r.rippleVisible,a&&r.ripplePulsate),y={width:s,height:s,top:-s/2+o,left:-s/2+i},b=(0,Li.Z)(r.child,h&&r.childLeaving,a&&r.childPulsate);return u||h||d(!0),mn.useEffect((function(){if(!u&&null!=c){var e=setTimeout(c,l);return function(){clearTimeout(e)}}}),[c,u,l]),(0,li.jsx)("span",{className:v,style:y,children:(0,li.jsx)("span",{className:b})})};var ys,bs,gs,ms,ws,ks,xs,_s,Es=(0,To.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ss=["center","classes","className"],As=Ai(ws||(ws=ys||(ys=os(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Cs=Ai(ks||(ks=bs||(bs=os(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Ts=Ai(xs||(xs=gs||(gs=os(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),Rs=(0,ho.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Is=(0,ho.ZP)(vs,{name:"MuiTouchRipple",slot:"Ripple"})(_s||(_s=ms||(ms=os(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Es.rippleVisible,As,550,(function(e){return e.theme.transitions.easing.easeInOut}),Es.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Es.child,Es.childLeaving,Cs,550,(function(e){return e.theme.transitions.easing.easeInOut}),Es.childPulsate,Ts,(function(e){return e.theme.transitions.easing.easeInOut})),Ps=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiTouchRipple"}),n=r.center,a=void 0!==n&&n,i=r.classes,o=void 0===i?{}:i,s=r.className,u=(0,ii.Z)(r,Ss),c=mn.useState([]),l=(0,wn.Z)(c,2),f=l[0],p=l[1],h=mn.useRef(0),d=mn.useRef(null);mn.useEffect((function(){d.current&&(d.current(),d.current=null)}),[f]);var v=mn.useRef(!1),y=mn.useRef(0),b=mn.useRef(null),g=mn.useRef(null);mn.useEffect((function(){return function(){y.current&&clearTimeout(y.current)}}),[]);var m=mn.useCallback((function(e){var t=e.pulsate,r=e.rippleX,n=e.rippleY,a=e.rippleSize,i=e.cb;p((function(e){return[].concat((0,kn.Z)(e),[(0,li.jsx)(Is,{classes:{ripple:(0,Li.Z)(o.ripple,Es.ripple),rippleVisible:(0,Li.Z)(o.rippleVisible,Es.rippleVisible),ripplePulsate:(0,Li.Z)(o.ripplePulsate,Es.ripplePulsate),child:(0,Li.Z)(o.child,Es.child),childLeaving:(0,Li.Z)(o.childLeaving,Es.childLeaving),childPulsate:(0,Li.Z)(o.childPulsate,Es.childPulsate)},timeout:550,pulsate:t,rippleX:r,rippleY:n,rippleSize:a},h.current)])})),h.current+=1,d.current=i}),[o]),w=mn.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=t.pulsate,i=void 0!==n&&n,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===(null==e?void 0:e.type)&&v.current)v.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(v.current=!0);var l,f,p,h=c?null:g.current,d=h?h.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(d.width/2),f=Math.round(d.height/2);else{var w=e.touches&&e.touches.length>0?e.touches[0]:e,k=w.clientX,x=w.clientY;l=Math.round(k-d.left),f=Math.round(x-d.top)}if(s)(p=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(p+=1);else{var _=2*Math.max(Math.abs((h?h.clientWidth:0)-l),l)+2,E=2*Math.max(Math.abs((h?h.clientHeight:0)-f),f)+2;p=Math.sqrt(Math.pow(_,2)+Math.pow(E,2))}null!=e&&e.touches?null===b.current&&(b.current=function(){m({pulsate:i,rippleX:l,rippleY:f,rippleSize:p,cb:r})},y.current=setTimeout((function(){b.current&&(b.current(),b.current=null)}),80)):m({pulsate:i,rippleX:l,rippleY:f,rippleSize:p,cb:r})}}),[a,m]),k=mn.useCallback((function(){w({},{pulsate:!0})}),[w]),x=mn.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===(null==e?void 0:e.type)&&b.current)return b.current(),b.current=null,void(y.current=setTimeout((function(){x(e,t)})));b.current=null,p((function(e){return e.length>0?e.slice(1):e})),d.current=t}),[]);return mn.useImperativeHandle(t,(function(){return{pulsate:k,start:w,stop:x}}),[k,w,x]),(0,li.jsx)(Rs,(0,ai.Z)({className:(0,Li.Z)(Es.root,o.root,s),ref:g},u,{children:(0,li.jsx)(ds,{component:null,exit:!0,children:f})}))})),Ds=Ps;function Ns(e){return(0,Mi.Z)("MuiButtonBase",e)}var Os,Ls=(0,To.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Bs=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Ms=(0,ho.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Os={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,oi.Z)(Os,"&.".concat(Ls.disabled),{pointerEvents:"none",cursor:"default"}),(0,oi.Z)(Os,"@media print",{colorAdjust:"exact"}),Os)),Us=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiButtonBase"}),n=r.action,a=r.centerRipple,i=void 0!==a&&a,o=r.children,s=r.className,u=r.component,c=void 0===u?"button":u,l=r.disabled,f=void 0!==l&&l,p=r.disableRipple,h=void 0!==p&&p,d=r.disableTouchRipple,v=void 0!==d&&d,y=r.focusRipple,b=void 0!==y&&y,g=r.LinkComponent,m=void 0===g?"a":g,w=r.onBlur,k=r.onClick,x=r.onContextMenu,_=r.onDragLeave,E=r.onFocus,S=r.onFocusVisible,A=r.onKeyDown,C=r.onKeyUp,T=r.onMouseDown,R=r.onMouseLeave,I=r.onMouseUp,P=r.onTouchEnd,D=r.onTouchMove,N=r.onTouchStart,O=r.tabIndex,L=void 0===O?0:O,B=r.TouchRippleProps,M=r.touchRippleRef,U=r.type,j=(0,ii.Z)(r,Bs),F=mn.useRef(null),z=mn.useRef(null),Z=(0,Bo.Z)(z,M),q=(0,Lo.Z)(),V=q.isFocusVisibleRef,K=q.onFocus,H=q.onBlur,W=q.ref,G=mn.useState(!1),Y=(0,wn.Z)(G,2),Q=Y[0],J=Y[1];f&&Q&&J(!1),mn.useImperativeHandle(n,(function(){return{focusVisible:function(){J(!0),F.current.focus()}}}),[]);var X=mn.useState(!1),$=(0,wn.Z)(X,2),ee=$[0],te=$[1];mn.useEffect((function(){te(!0)}),[]);var re=ee&&!h&&!f;function ne(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return(0,is.Z)((function(n){return t&&t(n),!r&&z.current&&z.current[e](n),!0}))}mn.useEffect((function(){Q&&b&&!h&&ee&&z.current.pulsate()}),[h,b,Q,ee]);var ae=ne("start",T),ie=ne("stop",x),oe=ne("stop",_),se=ne("stop",I),ue=ne("stop",(function(e){Q&&e.preventDefault(),R&&R(e)})),ce=ne("start",N),le=ne("stop",P),fe=ne("stop",D),pe=ne("stop",(function(e){H(e),!1===V.current&&J(!1),w&&w(e)}),!1),he=(0,is.Z)((function(e){F.current||(F.current=e.currentTarget),K(e),!0===V.current&&(J(!0),S&&S(e)),E&&E(e)})),de=function(){var e=F.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},ve=mn.useRef(!1),ye=(0,is.Z)((function(e){b&&!ve.current&&Q&&z.current&&" "===e.key&&(ve.current=!0,z.current.stop(e,(function(){z.current.start(e)}))),e.target===e.currentTarget&&de()&&" "===e.key&&e.preventDefault(),A&&A(e),e.target===e.currentTarget&&de()&&"Enter"===e.key&&!f&&(e.preventDefault(),k&&k(e))})),be=(0,is.Z)((function(e){b&&" "===e.key&&z.current&&Q&&!e.defaultPrevented&&(ve.current=!1,z.current.stop(e,(function(){z.current.pulsate(e)}))),C&&C(e),k&&e.target===e.currentTarget&&de()&&" "===e.key&&!e.defaultPrevented&&k(e)})),ge=c;"button"===ge&&(j.href||j.to)&&(ge=m);var me={};"button"===ge?(me.type=void 0===U?"button":U,me.disabled=f):(j.href||j.to||(me.role="button"),f&&(me["aria-disabled"]=f));var we=(0,Bo.Z)(t,W,F);var ke=(0,ai.Z)({},r,{centerRipple:i,component:c,disabled:f,disableRipple:h,disableTouchRipple:v,focusRipple:b,tabIndex:L,focusVisible:Q}),xe=function(e){var t=e.disabled,r=e.focusVisible,n=e.focusVisibleClassName,a=e.classes,i={root:["root",t&&"disabled",r&&"focusVisible"]},o=(0,Bi.Z)(i,Ns,a);return r&&n&&(o.root+=" ".concat(n)),o}(ke);return(0,li.jsxs)(Ms,(0,ai.Z)({as:ge,className:(0,Li.Z)(xe.root,s),ownerState:ke,onBlur:pe,onClick:k,onContextMenu:ie,onFocus:he,onKeyDown:ye,onKeyUp:be,onMouseDown:ae,onMouseLeave:ue,onMouseUp:se,onDragLeave:oe,onTouchEnd:le,onTouchMove:fe,onTouchStart:ce,ref:we,tabIndex:f?-1:L,type:U},me,j,{children:[o,re?(0,li.jsx)(Ds,(0,ai.Z)({ref:Z,center:i},B)):null]}))})),js=Us;function Fs(e){return(0,Mi.Z)("MuiButton",e)}var zs=(0,To.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var Zs=mn.createContext({});var qs=mn.createContext(void 0),Vs=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ks=function(e){return(0,ai.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},Hs=(0,ho.ZP)(js,{shouldForwardProp:function(e){return(0,ho.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],t["".concat(r.variant).concat((0,Co.Z)(r.color))],t["size".concat((0,Co.Z)(r.size))],t["".concat(r.variant,"Size").concat((0,Co.Z)(r.size))],"inherit"===r.color&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})((function(e){var t,r,n,a=e.theme,i=e.ownerState,o="light"===a.palette.mode?a.palette.grey[300]:a.palette.grey[800],s="light"===a.palette.mode?a.palette.grey.A100:a.palette.grey[700];return(0,ai.Z)({},a.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":(0,ai.Z)({textDecoration:"none",backgroundColor:a.vars?"rgba(".concat(a.vars.palette.text.primaryChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,Fo.Fq)(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===i.variant&&"inherit"!==i.color&&{backgroundColor:a.vars?"rgba(".concat(a.vars.palette[i.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,Fo.Fq)(a.palette[i.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===i.variant&&"inherit"!==i.color&&{border:"1px solid ".concat((a.vars||a).palette[i.color].main),backgroundColor:a.vars?"rgba(".concat(a.vars.palette[i.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,Fo.Fq)(a.palette[i.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===i.variant&&{backgroundColor:a.vars?a.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2],backgroundColor:(a.vars||a).palette.grey[300]}},"contained"===i.variant&&"inherit"!==i.color&&{backgroundColor:(a.vars||a).palette[i.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[i.color].main}}),"&:active":(0,ai.Z)({},"contained"===i.variant&&{boxShadow:(a.vars||a).shadows[8]})},(0,oi.Z)(t,"&.".concat(zs.focusVisible),(0,ai.Z)({},"contained"===i.variant&&{boxShadow:(a.vars||a).shadows[6]})),(0,oi.Z)(t,"&.".concat(zs.disabled),(0,ai.Z)({color:(a.vars||a).palette.action.disabled},"outlined"===i.variant&&{border:"1px solid ".concat((a.vars||a).palette.action.disabledBackground)},"contained"===i.variant&&{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground})),t),"text"===i.variant&&{padding:"6px 8px"},"text"===i.variant&&"inherit"!==i.color&&{color:(a.vars||a).palette[i.color].main},"outlined"===i.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===i.variant&&"inherit"!==i.color&&{color:(a.vars||a).palette[i.color].main,border:a.vars?"1px solid rgba(".concat(a.vars.palette[i.color].mainChannel," / 0.5)"):"1px solid ".concat((0,Fo.Fq)(a.palette[i.color].main,.5))},"contained"===i.variant&&{color:a.vars?a.vars.palette.text.primary:null==(r=(n=a.palette).getContrastText)?void 0:r.call(n,a.palette.grey[300]),backgroundColor:a.vars?a.vars.palette.Button.inheritContainedBg:o,boxShadow:(a.vars||a).shadows[2]},"contained"===i.variant&&"inherit"!==i.color&&{color:(a.vars||a).palette[i.color].contrastText,backgroundColor:(a.vars||a).palette[i.color].main},"inherit"===i.color&&{color:"inherit",borderColor:"currentColor"},"small"===i.size&&"text"===i.variant&&{padding:"4px 5px",fontSize:a.typography.pxToRem(13)},"large"===i.size&&"text"===i.variant&&{padding:"8px 11px",fontSize:a.typography.pxToRem(15)},"small"===i.size&&"outlined"===i.variant&&{padding:"3px 9px",fontSize:a.typography.pxToRem(13)},"large"===i.size&&"outlined"===i.variant&&{padding:"7px 21px",fontSize:a.typography.pxToRem(15)},"small"===i.size&&"contained"===i.variant&&{padding:"4px 10px",fontSize:a.typography.pxToRem(13)},"large"===i.size&&"contained"===i.variant&&{padding:"8px 22px",fontSize:a.typography.pxToRem(15)},i.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,oi.Z)(t,"&.".concat(zs.focusVisible),{boxShadow:"none"}),(0,oi.Z)(t,"&:active",{boxShadow:"none"}),(0,oi.Z)(t,"&.".concat(zs.disabled),{boxShadow:"none"}),t)})),Ws=(0,ho.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var r=e.ownerState;return[t.startIcon,t["iconSize".concat((0,Co.Z)(r.size))]]}})((function(e){var t=e.ownerState;return(0,ai.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Ks(t))})),Gs=(0,ho.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var r=e.ownerState;return[t.endIcon,t["iconSize".concat((0,Co.Z)(r.size))]]}})((function(e){var t=e.ownerState;return(0,ai.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Ks(t))})),Ys=mn.forwardRef((function(e,t){var r=mn.useContext(Zs),n=mn.useContext(qs),a=(0,as.Z)(r,e),i=(0,wi.Z)({props:a,name:"MuiButton"}),o=i.children,s=i.color,u=void 0===s?"primary":s,c=i.component,l=void 0===c?"button":c,f=i.className,p=i.disabled,h=void 0!==p&&p,d=i.disableElevation,v=void 0!==d&&d,y=i.disableFocusRipple,b=void 0!==y&&y,g=i.endIcon,m=i.focusVisibleClassName,w=i.fullWidth,k=void 0!==w&&w,x=i.size,_=void 0===x?"medium":x,E=i.startIcon,S=i.type,A=i.variant,C=void 0===A?"text":A,T=(0,ii.Z)(i,Vs),R=(0,ai.Z)({},i,{color:u,component:l,disabled:h,disableElevation:v,disableFocusRipple:b,fullWidth:k,size:_,type:S,variant:C}),I=function(e){var t=e.color,r=e.disableElevation,n=e.fullWidth,a=e.size,i=e.variant,o=e.classes,s={root:["root",i,"".concat(i).concat((0,Co.Z)(t)),"size".concat((0,Co.Z)(a)),"".concat(i,"Size").concat((0,Co.Z)(a)),"inherit"===t&&"colorInherit",r&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,Co.Z)(a))],endIcon:["endIcon","iconSize".concat((0,Co.Z)(a))]},u=(0,Bi.Z)(s,Fs,o);return(0,ai.Z)({},o,u)}(R),P=E&&(0,li.jsx)(Ws,{className:I.startIcon,ownerState:R,children:E}),D=g&&(0,li.jsx)(Gs,{className:I.endIcon,ownerState:R,children:g}),N=n||"";return(0,li.jsxs)(Hs,(0,ai.Z)({ownerState:R,className:(0,Li.Z)(r.className,I.root,f,N),component:l,disabled:h,focusRipple:!b,focusVisibleClassName:(0,Li.Z)(I.focusVisible,m),ref:t,type:S},T,{classes:I,children:[P,o,D]}))})),Qs=(__webpack_require__(8243),__webpack_require__(8014)),Js=__webpack_require__(7541);function Xs(e){var t=e.children,r={padding:"0 4px",position:"absolute",top:"-7px",left:e.left,right:e.right,backgroundColor:"white",fontSize:"9px",margin:"0 0 0 6px",zIndex:"2",borderRadius:"4px"};return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)("h6",{style:r,children:t})})}function $s(e){var t=e.label,r=e.extraLabels,n=e.children,a=So({position:"relative",border:"solid black",borderWidth:"2px 1px 2px 1px",borderRadius:"4px",p:0,overflow:"hidden"},e.sx);return(0,li.jsxs)(_o,{sx:{position:"relative"},children:[(0,li.jsx)(Xs,{children:t}),r,(0,li.jsx)(_o,{sx:a,children:n})]})}var eu=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)};function tu(e){return(0,Mi.Z)("MuiPaper",e)}(0,To.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var ru=["className","component","elevation","square","variant"],nu=(0,ho.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],!r.square&&t.rounded,"elevation"===r.variant&&t["elevation".concat(r.elevation)]]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,ai.Z)({backgroundColor:(r.vars||r).palette.background.paper,color:(r.vars||r).palette.text.primary,transition:r.transitions.create("box-shadow")},!n.square&&{borderRadius:r.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((r.vars||r).palette.divider)},"elevation"===n.variant&&(0,ai.Z)({boxShadow:(r.vars||r).shadows[n.elevation]},!r.vars&&"dark"===r.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Fo.Fq)("#fff",eu(n.elevation)),", ").concat((0,Fo.Fq)("#fff",eu(n.elevation)),")")},r.vars&&{backgroundImage:null==(t=r.vars.overlays)?void 0:t[n.elevation]}))})),au=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiPaper"}),n=r.className,a=r.component,i=void 0===a?"div":a,o=r.elevation,s=void 0===o?1:o,u=r.square,c=void 0!==u&&u,l=r.variant,f=void 0===l?"elevation":l,p=(0,ii.Z)(r,ru),h=(0,ai.Z)({},r,{component:i,elevation:s,square:c,variant:f}),d=function(e){var t=e.square,r=e.elevation,n=e.variant,a=e.classes,i={root:["root",n,!t&&"rounded","elevation"===n&&"elevation".concat(r)]};return(0,Bi.Z)(i,tu,a)}(h);return(0,li.jsx)(nu,(0,ai.Z)({as:i,ownerState:h,className:(0,Li.Z)(d.root,n),ref:t},p))}));function iu(e){return(0,Mi.Z)("MuiCard",e)}(0,To.Z)("MuiCard",["root"]);var ou=["className","raised"],su=(0,ho.ZP)(au,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),uu=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiCard"}),n=r.className,a=r.raised,i=void 0!==a&&a,o=(0,ii.Z)(r,ou),s=(0,ai.Z)({},r,{raised:i}),u=function(e){var t=e.classes;return(0,Bi.Z)({root:["root"]},iu,t)}(s);return(0,li.jsx)(su,(0,ai.Z)({className:(0,Li.Z)(u.root,n),elevation:i?8:void 0,ref:t,ownerState:s},o))}));function cu(e){return(0,Mi.Z)("MuiCardActionArea",e)}var lu=(0,To.Z)("MuiCardActionArea",["root","focusVisible","focusHighlight"]),fu=["children","className","focusVisibleClassName"],pu=(0,ho.ZP)(js,{name:"MuiCardActionArea",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t,r=e.theme;return t={display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%"},(0,oi.Z)(t,"&:hover .".concat(lu.focusHighlight),{opacity:(r.vars||r).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}}),(0,oi.Z)(t,"&.".concat(lu.focusVisible," .").concat(lu.focusHighlight),{opacity:(r.vars||r).palette.action.focusOpacity}),t})),hu=(0,ho.ZP)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:function(e,t){return t.focusHighlight}})((function(e){var t=e.theme;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}})),du=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiCardActionArea"}),n=r.children,a=r.className,i=r.focusVisibleClassName,o=(0,ii.Z)(r,fu),s=r,u=function(e){var t=e.classes;return(0,Bi.Z)({root:["root"],focusHighlight:["focusHighlight"]},cu,t)}(s);return(0,li.jsxs)(pu,(0,ai.Z)({className:(0,Li.Z)(u.root,a),focusVisibleClassName:(0,Li.Z)(i,u.focusVisible),ref:t,ownerState:s},o,{children:[n,(0,li.jsx)(hu,{className:u.focusHighlight,ownerState:s})]}))}));function vu(e){var t=e.children,r=e.onClick,n=e.disabled,a=e.sx,i=e.square;return(0,li.jsx)(uu,{square:i,elevation:0,sx:{overflow:"visible",height:"100%"},children:(0,li.jsx)(du,{onClick:r,sx:So({height:"100%"},a),disabled:n,children:(0,li.jsx)("div",{style:{height:"100%",width:"100%"},children:t})})})}function yu(e){var t=e.label,r=e.value,n=e.orientation;function a(){return(0,li.jsx)(yo,{xs:"auto",children:(0,li.jsx)($s,{sx:{width:"36px",p:"2px"},children:(0,li.jsx)(_o,{sx:{p:.5,border:"1px dotted",borderRadius:"2px",height:"28px"},children:(0,li.jsx)(Oo,{sx:{fontSize:"14px",textAlign:"center"},children:r})})})})}function i(){return(0,li.jsx)(yo,{xs:!0,container:!0,alignItems:"center",children:(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)($s,{sx:{p:.75,borderTopLeftRadius:"left"===n&&"0px",borderTopRightRadius:"right"===n&&"0px",borderBottomLeftRadius:"left"===n&&"0px",borderBottomRightRadius:"right"===n&&"0px",borderLeft:"left"===n&&"0px",borderRight:"right"===n&&"0px"},children:(0,li.jsx)(Oo,{sx:{fontSize:"9px",textAlign:"center"},children:t})})})})}return n||(n="left"),(0,li.jsx)(yo,{container:!0,children:"right"===n?(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(i,{}),(0,li.jsx)(a,{})]}):(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(a,{}),(0,li.jsx)(i,{})]})})}function bu(e){var t=e.label,r=e.endLabel,n=e.bold;return(0,li.jsx)(li.Fragment,{children:(0,li.jsxs)(yo,{container:!0,xs:12,sx:{py:.62,fontWeight:n&&"bold",fontSize:"9px"},children:[(0,li.jsx)(yo,{xs:"auto",sx:{fontWeight:"bold"},children:t}),(0,li.jsx)(yo,{xs:!0,sx:{minWidth:"10px"}}),(0,li.jsx)(yo,{xs:"auto",container:!0,justifyContent:"center",sx:{display:void 0===r&&"none"},children:(0,li.jsx)(yo,{children:r})})]})})}function gu(e){var t=e.character;return(0,li.jsx)(li.Fragment,{children:Array(t.totalValues).fill(null).map((function(e,t){return t+1})).map((function(e){var r="value"+e,n=t[r],a=t[r+"Score"];return(0,li.jsx)(mn.Fragment,{children:(0,li.jsx)(bu,{label:n,endLabel:a})},r)}))})}function mu(e){var t=e.character;return(0,li.jsx)(yo,{children:Array(t.totalMiracles).fill(null).map((function(e,t){return t+1})).map((function(e){var r="Miracle"+e,n=t[r];return(0,li.jsx)(mn.Fragment,{children:(0,li.jsx)(bu,{label:n})},r)}))})}var wu=__webpack_require__(8252),ku=__webpack_require__(6189),xu=__webpack_require__(4164),_u=__webpack_require__(6117),Eu=__webpack_require__(5202),Su=__webpack_require__(2254),Au=__webpack_require__(2876),Cu=["onChange","maxRows","minRows","style","value"];function Tu(e){return parseInt(e,10)||0}var Ru={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function Iu(e){return void 0===e||null===e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflow}var Pu=mn.forwardRef((function(e,t){var r=e.onChange,n=e.maxRows,a=e.minRows,i=void 0===a?1:a,o=e.style,s=e.value,u=(0,ii.Z)(e,Cu),c=mn.useRef(null!=s).current,l=mn.useRef(null),f=(0,_u.Z)(t,l),p=mn.useRef(null),h=mn.useRef(0),d=mn.useState({outerHeightStyle:0}),v=(0,wn.Z)(d,2),y=v[0],b=v[1],g=mn.useCallback((function(){var t=l.current,r=(0,Eu.Z)(t).getComputedStyle(t);if("0px"===r.width)return{outerHeightStyle:0};var a=p.current;a.style.width=r.width,a.value=t.value||e.placeholder||"x","\n"===a.value.slice(-1)&&(a.value+=" ");var o=r.boxSizing,s=Tu(r.paddingBottom)+Tu(r.paddingTop),u=Tu(r.borderBottomWidth)+Tu(r.borderTopWidth),c=a.scrollHeight;a.value="x";var f=a.scrollHeight,h=c;return i&&(h=Math.max(Number(i)*f,h)),n&&(h=Math.min(Number(n)*f,h)),{outerHeightStyle:(h=Math.max(h,f))+("border-box"===o?s+u:0),overflow:Math.abs(h-c)<=1}}),[n,i,e.placeholder]),m=function(e,t){var r=t.outerHeightStyle,n=t.overflow;return h.current<20&&(r>0&&Math.abs((e.outerHeightStyle||0)-r)>1||e.overflow!==n)?(h.current+=1,{overflow:n,outerHeightStyle:r}):e},w=mn.useCallback((function(){var e=g();Iu(e)||b((function(t){return m(t,e)}))}),[g]),k=function(){var e=g();Iu(e)||xu.flushSync((function(){b((function(t){return m(t,e)}))}))};mn.useEffect((function(){var e,t=(0,Su.Z)((function(){h.current=0,l.current&&k()})),r=l.current,n=(0,Eu.Z)(r);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver((function(){h.current=0,l.current&&k()}))).observe(r),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}})),(0,Au.Z)((function(){w()})),mn.useEffect((function(){h.current=0}),[s]);return(0,li.jsxs)(mn.Fragment,{children:[(0,li.jsx)("textarea",(0,ai.Z)({value:s,onChange:function(e){h.current=0,c||w(),r&&r(e)},ref:f,rows:i,style:(0,ai.Z)({height:y.outerHeightStyle,overflow:y.overflow?"hidden":void 0},o)},u)),(0,li.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,ai.Z)({},Ru,o,{paddingTop:0,paddingBottom:0})})]})}));function Du(e){return"string"===typeof e}function Nu(e){var t=e.props,r=e.states,n=e.muiFormControl;return r.reduce((function(e,r){return e[r]=t[r],n&&"undefined"===typeof t[r]&&(e[r]=n[r]),e}),{})}var Ou=mn.createContext(void 0);function Lu(){return mn.useContext(Ou)}var Bu=__webpack_require__(162);function Mu(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Uu(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Mu(e.value)&&""!==e.value||t&&Mu(e.defaultValue)&&""!==e.defaultValue)}function ju(e){return(0,Mi.Z)("MuiInputBase",e)}var Fu=(0,To.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),zu=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Zu=function(e,t){var r=e.ownerState;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,"small"===r.size&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t["color".concat((0,Co.Z)(r.color))],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},qu=function(e,t){var r=e.ownerState;return[t.input,"small"===r.size&&t.inputSizeSmall,r.multiline&&t.inputMultiline,"search"===r.type&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},Vu=(0,ho.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Zu})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({},t.typography.body1,(0,oi.Z)({color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(Fu.disabled),{color:(t.vars||t).palette.text.disabled,cursor:"default"}),r.multiline&&(0,ai.Z)({padding:"4px 0 5px"},"small"===r.size&&{paddingTop:1}),r.fullWidth&&{width:"100%"})})),Ku=(0,ho.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:qu})((function(e){var t,r=e.theme,n=e.ownerState,a="light"===r.palette.mode,i=(0,ai.Z)({color:"currentColor"},r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:a?.42:.5},{transition:r.transitions.create("opacity",{duration:r.transitions.duration.shorter})}),o={opacity:"0 !important"},s=r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:a?.42:.5};return(0,ai.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,oi.Z)(t,"label[data-shrink=false] + .".concat(Fu.formControl," &"),{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s}),(0,oi.Z)(t,"&.".concat(Fu.disabled),{opacity:1,WebkitTextFillColor:(r.vars||r).palette.text.disabled}),(0,oi.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Hu=(0,li.jsx)(Pi,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Wu=mn.forwardRef((function(e,t){var r,n=(0,wi.Z)({props:e,name:"MuiInputBase"}),a=n["aria-describedby"],i=n.autoComplete,o=n.autoFocus,s=n.className,u=n.components,c=void 0===u?{}:u,l=n.componentsProps,f=void 0===l?{}:l,p=n.defaultValue,h=n.disabled,d=n.disableInjectingGlobalStyles,v=n.endAdornment,y=n.fullWidth,b=void 0!==y&&y,g=n.id,m=n.inputComponent,w=void 0===m?"input":m,k=n.inputProps,x=void 0===k?{}:k,_=n.inputRef,E=n.maxRows,S=n.minRows,A=n.multiline,C=void 0!==A&&A,T=n.name,R=n.onBlur,I=n.onChange,P=n.onClick,D=n.onFocus,N=n.onKeyDown,O=n.onKeyUp,L=n.placeholder,B=n.readOnly,M=n.renderSuffix,U=n.rows,j=n.slotProps,F=void 0===j?{}:j,z=n.slots,Z=void 0===z?{}:z,q=n.startAdornment,V=n.type,K=void 0===V?"text":V,H=n.value,W=(0,ii.Z)(n,zu),G=null!=x.value?x.value:H,Y=mn.useRef(null!=G).current,Q=mn.useRef(),J=mn.useCallback((function(e){0}),[]),X=(0,Bo.Z)(Q,_,x.ref,J),$=mn.useState(!1),ee=(0,wn.Z)($,2),te=ee[0],re=ee[1],ne=Lu();var ae=Nu({props:n,muiFormControl:ne,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ae.focused=ne?ne.focused:te,mn.useEffect((function(){!ne&&h&&te&&(re(!1),R&&R())}),[ne,h,te,R]);var ie=ne&&ne.onFilled,oe=ne&&ne.onEmpty,se=mn.useCallback((function(e){Uu(e)?ie&&ie():oe&&oe()}),[ie,oe]);(0,Bu.Z)((function(){Y&&se({value:G})}),[G,se,Y]);mn.useEffect((function(){se(Q.current)}),[]);var ue=w,ce=x;C&&"input"===ue&&(ce=U?(0,ai.Z)({type:void 0,minRows:U,maxRows:U},ce):(0,ai.Z)({type:void 0,maxRows:E,minRows:S},ce),ue=Pu);mn.useEffect((function(){ne&&ne.setAdornedStart(Boolean(q))}),[ne,q]);var le=(0,ai.Z)({},n,{color:ae.color||"primary",disabled:ae.disabled,endAdornment:v,error:ae.error,focused:ae.focused,formControl:ne,fullWidth:b,hiddenLabel:ae.hiddenLabel,multiline:C,size:ae.size,startAdornment:q,type:K}),fe=function(e){var t=e.classes,r=e.color,n=e.disabled,a=e.error,i=e.endAdornment,o=e.focused,s=e.formControl,u=e.fullWidth,c=e.hiddenLabel,l=e.multiline,f=e.readOnly,p=e.size,h=e.startAdornment,d=e.type,v={root:["root","color".concat((0,Co.Z)(r)),n&&"disabled",a&&"error",u&&"fullWidth",o&&"focused",s&&"formControl",p&&"medium"!==p&&"size".concat((0,Co.Z)(p)),l&&"multiline",h&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",f&&"readOnly"],input:["input",n&&"disabled","search"===d&&"inputTypeSearch",l&&"inputMultiline","small"===p&&"inputSizeSmall",c&&"inputHiddenLabel",h&&"inputAdornedStart",i&&"inputAdornedEnd",f&&"readOnly"]};return(0,Bi.Z)(v,ju,t)}(le),pe=Z.root||c.Root||Vu,he=F.root||f.root||{},de=Z.input||c.Input||Ku;return ce=(0,ai.Z)({},ce,null!=(r=F.input)?r:f.input),(0,li.jsxs)(mn.Fragment,{children:[!d&&Hu,(0,li.jsxs)(pe,(0,ai.Z)({},he,!Du(pe)&&{ownerState:(0,ai.Z)({},le,he.ownerState)},{ref:t,onClick:function(e){Q.current&&e.currentTarget===e.target&&Q.current.focus(),P&&P(e)}},W,{className:(0,Li.Z)(fe.root,he.className,s,B&&"MuiInputBase-readOnly"),children:[q,(0,li.jsx)(Ou.Provider,{value:null,children:(0,li.jsx)(de,(0,ai.Z)({ownerState:le,"aria-invalid":ae.error,"aria-describedby":a,autoComplete:i,autoFocus:o,defaultValue:p,disabled:ae.disabled,id:g,onAnimationStart:function(e){se("mui-auto-fill-cancel"===e.animationName?Q.current:{value:"x"})},name:T,placeholder:L,readOnly:B,required:ae.required,rows:U,value:G,onKeyDown:N,onKeyUp:O,type:K},ce,!Du(de)&&{as:ue,ownerState:(0,ai.Z)({},le,ce.ownerState)},{ref:X,className:(0,Li.Z)(fe.input,ce.className,B&&"MuiInputBase-readOnly"),onBlur:function(e){R&&R(e),x.onBlur&&x.onBlur(e),ne&&ne.onBlur?ne.onBlur(e):re(!1)},onChange:function(e){if(!Y){var t=e.target||Q.current;if(null==t)throw new Error((0,ku.Z)(1));se({value:t.value})}for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];x.onChange&&x.onChange.apply(x,[e].concat(n)),I&&I.apply(void 0,[e].concat(n))},onFocus:function(e){ae.disabled?e.stopPropagation():(D&&D(e),x.onFocus&&x.onFocus(e),ne&&ne.onFocus?ne.onFocus(e):re(!0))}}))}),v,M?M((0,ai.Z)({},ae,{startAdornment:q})):null]}))]})})),Gu=Wu;function Yu(e){return(0,Mi.Z)("MuiInput",e)}var Qu=(0,ai.Z)({},Fu,(0,To.Z)("MuiInput",["root","underline","input"])),Ju=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Xu=(0,ho.ZP)(Vu,{shouldForwardProp:function(e){return(0,ho.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[].concat((0,kn.Z)(Zu(e,t)),[!r.disableUnderline&&t.underline])}})((function(e){var t,r=e.theme,n=e.ownerState,a="light"===r.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return r.vars&&(a="rgba(".concat(r.vars.palette.common.onBackgroundChannel," / ").concat(r.vars.opacity.inputUnderline,")")),(0,ai.Z)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat((r.vars||r).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"}},(0,oi.Z)(t,"&.".concat(Qu.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,oi.Z)(t,"&.".concat(Qu.error),{"&:before, &:after":{borderBottomColor:(r.vars||r).palette.error.main}}),(0,oi.Z)(t,"&:before",{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"}),(0,oi.Z)(t,"&:hover:not(.".concat(Qu.disabled,", .").concat(Qu.error,"):before"),{borderBottom:"2px solid ".concat((r.vars||r).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(a)}}),(0,oi.Z)(t,"&.".concat(Qu.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),$u=(0,ho.ZP)(Ku,{name:"MuiInput",slot:"Input",overridesResolver:qu})({}),ec=mn.forwardRef((function(e,t){var r,n,a,i,o=(0,wi.Z)({props:e,name:"MuiInput"}),s=o.disableUnderline,u=o.components,c=void 0===u?{}:u,l=o.componentsProps,f=o.fullWidth,p=void 0!==f&&f,h=o.inputComponent,d=void 0===h?"input":h,v=o.multiline,y=void 0!==v&&v,b=o.slotProps,g=o.slots,m=void 0===g?{}:g,w=o.type,k=void 0===w?"text":w,x=(0,ii.Z)(o,Ju),_=function(e){var t=e.classes,r={root:["root",!e.disableUnderline&&"underline"],input:["input"]},n=(0,Bi.Z)(r,Yu,t);return(0,ai.Z)({},t,n)}(o),E={root:{ownerState:{disableUnderline:s}}},S=(null!=b?b:l)?(0,zi.Z)(null!=b?b:l,E):E,A=null!=(r=null!=(n=m.root)?n:c.Root)?r:Xu,C=null!=(a=null!=(i=m.input)?i:c.Input)?a:$u;return(0,li.jsx)(Gu,(0,ai.Z)({slots:{root:A,input:C},slotProps:S,fullWidth:p,inputComponent:d,multiline:y,ref:t,type:k},x,{classes:_}))}));ec.muiName="Input";var tc=ec;function rc(e){return(0,Mi.Z)("MuiFilledInput",e)}var nc=(0,ai.Z)({},Fu,(0,To.Z)("MuiFilledInput",["root","underline","input"])),ac=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],ic=(0,ho.ZP)(Vu,{shouldForwardProp:function(e){return(0,ho.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[].concat((0,kn.Z)(Zu(e,t)),[!r.disableUnderline&&t.underline])}})((function(e){var t,r,n,a=e.theme,i=e.ownerState,o="light"===a.palette.mode,s=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",c=o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,ai.Z)((t={position:"relative",backgroundColor:a.vars?a.vars.palette.FilledInput.bg:u,borderTopLeftRadius:(a.vars||a).shape.borderRadius,borderTopRightRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),"&:hover":{backgroundColor:a.vars?a.vars.palette.FilledInput.hoverBg:c,"@media (hover: none)":{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:u}}},(0,oi.Z)(t,"&.".concat(nc.focused),{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:u}),(0,oi.Z)(t,"&.".concat(nc.disabled),{backgroundColor:a.vars?a.vars.palette.FilledInput.disabledBg:l}),t),!i.disableUnderline&&(r={"&:after":{borderBottom:"2px solid ".concat(null==(n=(a.vars||a).palette[i.color||"primary"])?void 0:n.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"}},(0,oi.Z)(r,"&.".concat(nc.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,oi.Z)(r,"&.".concat(nc.error),{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main}}),(0,oi.Z)(r,"&:before",{borderBottom:"1px solid ".concat(a.vars?"rgba(".concat(a.vars.palette.common.onBackgroundChannel," / ").concat(a.vars.opacity.inputUnderline,")"):s),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"}),(0,oi.Z)(r,"&:hover:not(.".concat(nc.disabled,", .").concat(nc.error,"):before"),{borderBottom:"1px solid ".concat((a.vars||a).palette.text.primary)}),(0,oi.Z)(r,"&.".concat(nc.disabled,":before"),{borderBottomStyle:"dotted"}),r),i.startAdornment&&{paddingLeft:12},i.endAdornment&&{paddingRight:12},i.multiline&&(0,ai.Z)({padding:"25px 12px 8px"},"small"===i.size&&{paddingTop:21,paddingBottom:4},i.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),oc=(0,ho.ZP)(Ku,{name:"MuiFilledInput",slot:"Input",overridesResolver:qu})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&(0,oi.Z)({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===r.size&&{paddingTop:21,paddingBottom:4},r.hiddenLabel&&{paddingTop:16,paddingBottom:17},r.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},r.startAdornment&&{paddingLeft:0},r.endAdornment&&{paddingRight:0},r.hiddenLabel&&"small"===r.size&&{paddingTop:8,paddingBottom:9})})),sc=mn.forwardRef((function(e,t){var r,n,a,i,o=(0,wi.Z)({props:e,name:"MuiFilledInput"}),s=o.components,u=void 0===s?{}:s,c=o.componentsProps,l=o.fullWidth,f=void 0!==l&&l,p=o.inputComponent,h=void 0===p?"input":p,d=o.multiline,v=void 0!==d&&d,y=o.slotProps,b=o.slots,g=void 0===b?{}:b,m=o.type,w=void 0===m?"text":m,k=(0,ii.Z)(o,ac),x=(0,ai.Z)({},o,{fullWidth:f,inputComponent:h,multiline:v,type:w}),_=function(e){var t=e.classes,r={root:["root",!e.disableUnderline&&"underline"],input:["input"]},n=(0,Bi.Z)(r,rc,t);return(0,ai.Z)({},t,n)}(o),E={root:{ownerState:x},input:{ownerState:x}},S=(null!=y?y:c)?(0,zi.Z)(null!=y?y:c,E):E,A=null!=(r=null!=(n=g.root)?n:u.Root)?r:ic,C=null!=(a=null!=(i=g.input)?i:u.Input)?a:oc;return(0,li.jsx)(Gu,(0,ai.Z)({slots:{root:A,input:C},componentsProps:S,fullWidth:f,inputComponent:h,multiline:v,ref:t,type:w},k,{classes:_}))}));sc.muiName="Input";var uc,cc=sc,lc=["children","classes","className","label","notched"],fc=(0,ho.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),pc=(0,ho.ZP)("legend")((function(e){var t=e.ownerState,r=e.theme;return(0,ai.Z)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:r.transitions.create("width",{duration:150,easing:r.transitions.easing.easeOut})},t.withLabel&&(0,ai.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:r.transitions.create("max-width",{duration:50,easing:r.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:r.transitions.create("max-width",{duration:100,easing:r.transitions.easing.easeOut,delay:50})}))}));function hc(e){return(0,Mi.Z)("MuiOutlinedInput",e)}var dc=(0,ai.Z)({},Fu,(0,To.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),vc=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],yc=(0,ho.ZP)(Vu,{shouldForwardProp:function(e){return(0,ho.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Zu})((function(e){var t,r=e.theme,n=e.ownerState,a="light"===r.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,ai.Z)((t={position:"relative",borderRadius:(r.vars||r).shape.borderRadius},(0,oi.Z)(t,"&:hover .".concat(dc.notchedOutline),{borderColor:(r.vars||r).palette.text.primary}),(0,oi.Z)(t,"@media (hover: none)",(0,oi.Z)({},"&:hover .".concat(dc.notchedOutline),{borderColor:r.vars?"rgba(".concat(r.vars.palette.common.onBackgroundChannel," / 0.23)"):a})),(0,oi.Z)(t,"&.".concat(dc.focused," .").concat(dc.notchedOutline),{borderColor:(r.vars||r).palette[n.color].main,borderWidth:2}),(0,oi.Z)(t,"&.".concat(dc.error," .").concat(dc.notchedOutline),{borderColor:(r.vars||r).palette.error.main}),(0,oi.Z)(t,"&.".concat(dc.disabled," .").concat(dc.notchedOutline),{borderColor:(r.vars||r).palette.action.disabled}),t),n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,ai.Z)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),bc=(0,ho.ZP)((function(e){var t=e.className,r=e.label,n=e.notched,a=(0,ii.Z)(e,lc),i=null!=r&&""!==r,o=(0,ai.Z)({},e,{notched:n,withLabel:i});return(0,li.jsx)(fc,(0,ai.Z)({"aria-hidden":!0,className:t,ownerState:o},a,{children:(0,li.jsx)(pc,{ownerState:o,children:i?(0,li.jsx)("span",{children:r}):uc||(uc=(0,li.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){var t=e.theme,r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}})),gc=(0,ho.ZP)(Ku,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:qu})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&(0,oi.Z)({"&:-webkit-autofill":{borderRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===r.size&&{padding:"8.5px 14px"},r.multiline&&{padding:0},r.startAdornment&&{paddingLeft:0},r.endAdornment&&{paddingRight:0})})),mc=mn.forwardRef((function(e,t){var r,n,a,i,o,s=(0,wi.Z)({props:e,name:"MuiOutlinedInput"}),u=s.components,c=void 0===u?{}:u,l=s.fullWidth,f=void 0!==l&&l,p=s.inputComponent,h=void 0===p?"input":p,d=s.label,v=s.multiline,y=void 0!==v&&v,b=s.notched,g=s.slots,m=void 0===g?{}:g,w=s.type,k=void 0===w?"text":w,x=(0,ii.Z)(s,vc),_=function(e){var t=e.classes,r=(0,Bi.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},hc,t);return(0,ai.Z)({},t,r)}(s),E=Lu(),S=Nu({props:s,muiFormControl:E,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),A=(0,ai.Z)({},s,{color:S.color||"primary",disabled:S.disabled,error:S.error,focused:S.focused,formControl:E,fullWidth:f,hiddenLabel:S.hiddenLabel,multiline:y,size:S.size,type:k}),C=null!=(r=null!=(n=m.root)?n:c.Root)?r:yc,T=null!=(a=null!=(i=m.input)?i:c.Input)?a:gc;return(0,li.jsx)(Gu,(0,ai.Z)({slots:{root:C,input:T},renderSuffix:function(e){return(0,li.jsx)(bc,{ownerState:A,className:_.notchedOutline,label:null!=d&&""!==d&&S.required?o||(o=(0,li.jsxs)(mn.Fragment,{children:[d,"\u2009","*"]})):d,notched:"undefined"!==typeof b?b:Boolean(e.startAdornment||e.filled||e.focused)})},fullWidth:f,inputComponent:h,multiline:y,ref:t,type:k},x,{classes:(0,ai.Z)({},_,{notchedOutline:null})}))}));mc.muiName="Input";var wc=mc;function kc(e){return(0,Mi.Z)("MuiFormLabel",e)}var xc=(0,To.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),_c=["children","className","color","component","disabled","error","filled","focused","required"],Ec=(0,ho.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return(0,ai.Z)({},t.root,"secondary"===r.color&&t.colorSecondary,r.filled&&t.filled)}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,ai.Z)({color:(r.vars||r).palette.text.secondary},r.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},(0,oi.Z)(t,"&.".concat(xc.focused),{color:(r.vars||r).palette[n.color].main}),(0,oi.Z)(t,"&.".concat(xc.disabled),{color:(r.vars||r).palette.text.disabled}),(0,oi.Z)(t,"&.".concat(xc.error),{color:(r.vars||r).palette.error.main}),t))})),Sc=(0,ho.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,oi.Z)({},"&.".concat(xc.error),{color:(t.vars||t).palette.error.main})})),Ac=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiFormLabel"}),n=r.children,a=r.className,i=r.component,o=void 0===i?"label":i,s=(0,ii.Z)(r,_c),u=Nu({props:r,muiFormControl:Lu(),states:["color","required","focused","disabled","error","filled"]}),c=(0,ai.Z)({},r,{color:u.color||"primary",component:o,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),l=function(e){var t=e.classes,r=e.color,n=e.focused,a=e.disabled,i=e.error,o=e.filled,s=e.required,u={root:["root","color".concat((0,Co.Z)(r)),a&&"disabled",i&&"error",o&&"filled",n&&"focused",s&&"required"],asterisk:["asterisk",i&&"error"]};return(0,Bi.Z)(u,kc,t)}(c);return(0,li.jsxs)(Ec,(0,ai.Z)({as:o,ownerState:c,className:(0,Li.Z)(l.root,a),ref:t},s,{children:[n,u.required&&(0,li.jsxs)(Sc,{ownerState:c,"aria-hidden":!0,className:l.asterisk,children:["\u2009","*"]})]}))}));function Cc(e){return(0,Mi.Z)("MuiInputLabel",e)}(0,To.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var Tc=["disableAnimation","margin","shrink","variant","className"],Rc=(0,ho.ZP)(Ac,{shouldForwardProp:function(e){return(0,ho.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[(0,oi.Z)({},"& .".concat(xc.asterisk),t.asterisk),t.root,r.formControl&&t.formControl,"small"===r.size&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,t[r.variant]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},r.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===r.size&&{transform:"translate(0, 17px) scale(1)"},r.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!r.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===r.variant&&(0,ai.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===r.size&&{transform:"translate(12px, 13px) scale(1)"},r.shrink&&(0,ai.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===r.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===r.variant&&(0,ai.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===r.size&&{transform:"translate(14px, 9px) scale(1)"},r.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Ic=mn.forwardRef((function(e,t){var r=(0,wi.Z)({name:"MuiInputLabel",props:e}),n=r.disableAnimation,a=void 0!==n&&n,i=r.shrink,o=r.className,s=(0,ii.Z)(r,Tc),u=Lu(),c=i;"undefined"===typeof c&&u&&(c=u.filled||u.focused||u.adornedStart);var l=Nu({props:r,muiFormControl:u,states:["size","variant","required"]}),f=(0,ai.Z)({},r,{disableAnimation:a,formControl:u,shrink:c,size:l.size,variant:l.variant,required:l.required}),p=function(e){var t=e.classes,r=e.formControl,n=e.size,a=e.shrink,i=e.disableAnimation,o=e.variant,s=e.required,u={root:["root",r&&"formControl",!i&&"animated",a&&"shrink",n&&"normal"!==n&&"size".concat((0,Co.Z)(n)),o],asterisk:[s&&"asterisk"]},c=(0,Bi.Z)(u,Cc,t);return(0,ai.Z)({},t,c)}(f);return(0,li.jsx)(Rc,(0,ai.Z)({"data-shrink":c,ownerState:f,ref:t,className:(0,Li.Z)(p.root,o)},s,{classes:p}))})),Pc=__webpack_require__(3701);function Dc(e){return(0,Mi.Z)("MuiFormControl",e)}(0,To.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var Nc=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Oc=(0,ho.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return(0,ai.Z)({},t.root,t["margin".concat((0,Co.Z)(r.margin))],r.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return(0,ai.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Lc=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiFormControl"}),n=r.children,a=r.className,i=r.color,o=void 0===i?"primary":i,s=r.component,u=void 0===s?"div":s,c=r.disabled,l=void 0!==c&&c,f=r.error,p=void 0!==f&&f,h=r.focused,d=r.fullWidth,v=void 0!==d&&d,y=r.hiddenLabel,b=void 0!==y&&y,g=r.margin,m=void 0===g?"none":g,w=r.required,k=void 0!==w&&w,x=r.size,_=void 0===x?"medium":x,E=r.variant,S=void 0===E?"outlined":E,A=(0,ii.Z)(r,Nc),C=(0,ai.Z)({},r,{color:o,component:u,disabled:l,error:p,fullWidth:v,hiddenLabel:b,margin:m,required:k,size:_,variant:S}),T=function(e){var t=e.classes,r=e.margin,n=e.fullWidth,a={root:["root","none"!==r&&"margin".concat((0,Co.Z)(r)),n&&"fullWidth"]};return(0,Bi.Z)(a,Dc,t)}(C),R=mn.useState((function(){var e=!1;return n&&mn.Children.forEach(n,(function(t){if((0,Pc.Z)(t,["Input","Select"])){var r=(0,Pc.Z)(t,["Select"])?t.props.input:t;r&&r.props.startAdornment&&(e=!0)}})),e})),I=(0,wn.Z)(R,2),P=I[0],D=I[1],N=mn.useState((function(){var e=!1;return n&&mn.Children.forEach(n,(function(t){(0,Pc.Z)(t,["Input","Select"])&&(Uu(t.props,!0)||Uu(t.props.inputProps,!0))&&(e=!0)})),e})),O=(0,wn.Z)(N,2),L=O[0],B=O[1],M=mn.useState(!1),U=(0,wn.Z)(M,2),j=U[0],F=U[1];l&&j&&F(!1);var z,Z=void 0===h||l?j:h,q=mn.useMemo((function(){return{adornedStart:P,setAdornedStart:D,color:o,disabled:l,error:p,filled:L,focused:Z,fullWidth:v,hiddenLabel:b,size:_,onBlur:function(){F(!1)},onEmpty:function(){B(!1)},onFilled:function(){B(!0)},onFocus:function(){F(!0)},registerEffect:z,required:k,variant:S}}),[P,o,l,p,L,Z,v,b,z,k,_,S]);return(0,li.jsx)(Ou.Provider,{value:q,children:(0,li.jsx)(Oc,(0,ai.Z)({as:u,ownerState:C,className:(0,Li.Z)(T.root,a),ref:t},A,{children:n}))})}));function Bc(e){return(0,Mi.Z)("MuiFormHelperText",e)}var Mc,Uc=(0,To.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),jc=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Fc=(0,ho.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.size&&t["size".concat((0,Co.Z)(r.size))],r.contained&&t.contained,r.filled&&t.filled]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,ai.Z)({color:(r.vars||r).palette.text.secondary},r.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,oi.Z)(t,"&.".concat(Uc.disabled),{color:(r.vars||r).palette.text.disabled}),(0,oi.Z)(t,"&.".concat(Uc.error),{color:(r.vars||r).palette.error.main}),t),"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),zc=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiFormHelperText"}),n=r.children,a=r.className,i=r.component,o=void 0===i?"p":i,s=(0,ii.Z)(r,jc),u=Nu({props:r,muiFormControl:Lu(),states:["variant","size","disabled","error","filled","focused","required"]}),c=(0,ai.Z)({},r,{component:o,contained:"filled"===u.variant||"outlined"===u.variant,variant:u.variant,size:u.size,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),l=function(e){var t=e.classes,r=e.contained,n=e.size,a=e.disabled,i=e.error,o=e.filled,s=e.focused,u=e.required,c={root:["root",a&&"disabled",i&&"error",n&&"size".concat((0,Co.Z)(n)),r&&"contained",s&&"focused",o&&"filled",u&&"required"]};return(0,Bi.Z)(c,Bc,t)}(c);return(0,li.jsx)(Fc,(0,ai.Z)({as:o,ownerState:c,className:(0,Li.Z)(l.root,a),ref:t},s,{children:" "===n?Mc||(Mc=(0,li.jsx)("span",{className:"notranslate",children:"\u200b"})):n}))})),Zc=(__webpack_require__(7441),__webpack_require__(8301));function qc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var r={};return Object.keys(e).filter((function(r){return r.match(/^on[A-Z]/)&&"function"===typeof e[r]&&!t.includes(r)})).forEach((function(t){r[t]=e[t]})),r}function Vc(e){if(void 0===e)return{};var t={};return Object.keys(e).filter((function(t){return!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])})).forEach((function(r){t[r]=e[r]})),t}var Kc=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Hc(e){var t,r=e.elementType,n=e.externalSlotProps,a=e.ownerState,i=e.skipResolvingSlotProps,o=void 0!==i&&i,s=(0,ii.Z)(e,Kc),u=o?{}:function(e,t,r){return"function"===typeof e?e(t,r):e}(n,a),c=function(e){var t=e.getSlotProps,r=e.additionalProps,n=e.externalSlotProps,a=e.externalForwardedProps,i=e.className;if(!t){var o=(0,Li.Z)(null==a?void 0:a.className,null==n?void 0:n.className,i,null==r?void 0:r.className),s=(0,ai.Z)({},null==r?void 0:r.style,null==a?void 0:a.style,null==n?void 0:n.style),u=(0,ai.Z)({},r,a,n);return o.length>0&&(u.className=o),Object.keys(s).length>0&&(u.style=s),{props:u,internalRef:void 0}}var c=qc((0,ai.Z)({},a,n)),l=Vc(n),f=Vc(a),p=t(c),h=(0,Li.Z)(null==p?void 0:p.className,null==r?void 0:r.className,i,null==a?void 0:a.className,null==n?void 0:n.className),d=(0,ai.Z)({},null==p?void 0:p.style,null==r?void 0:r.style,null==a?void 0:a.style,null==n?void 0:n.style),v=(0,ai.Z)({},p,r,f,l);return h.length>0&&(v.className=h),Object.keys(d).length>0&&(v.style=d),{props:v,internalRef:p.ref}}((0,ai.Z)({},s,{externalSlotProps:u})),l=c.props,f=c.internalRef,p=(0,_u.Z)(f,null==u?void 0:u.ref,null==(t=e.additionalProps)?void 0:t.ref),h=function(e,t,r){return void 0===e||Du(e)?t:(0,ai.Z)({},t,{ownerState:(0,ai.Z)({},t.ownerState,r)})}(r,(0,ai.Z)({},l,{ref:p}),a);return h}var Wc=mn.createContext({});function Gc(e){return(0,Mi.Z)("MuiList",e)}(0,To.Z)("MuiList",["root","padding","dense","subheader"]);var Yc=["children","className","component","dense","disablePadding","subheader"],Qc=(0,ho.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return(0,ai.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),Jc=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiList"}),n=r.children,a=r.className,i=r.component,o=void 0===i?"ul":i,s=r.dense,u=void 0!==s&&s,c=r.disablePadding,l=void 0!==c&&c,f=r.subheader,p=(0,ii.Z)(r,Yc),h=mn.useMemo((function(){return{dense:u}}),[u]),d=(0,ai.Z)({},r,{component:o,dense:u,disablePadding:l}),v=function(e){var t=e.classes,r={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,Bi.Z)(r,Gc,t)}(d);return(0,li.jsx)(Wc.Provider,{value:h,children:(0,li.jsxs)(Qc,(0,ai.Z)({as:o,className:(0,Li.Z)(v.root,a),ref:t,ownerState:d},p,{children:[f,n]}))})}));function Xc(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var $c=Xc,el=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function tl(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function rl(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function nl(e,t){if(void 0===t)return!0;var r=e.innerText;return void 0===r&&(r=e.textContent),0!==(r=r.trim().toLowerCase()).length&&(t.repeating?r[0]===t.keys[0]:0===r.indexOf(t.keys.join("")))}function al(e,t,r,n,a,i){for(var o=!1,s=a(e,t,!!t&&r);s;){if(s===e.firstChild){if(o)return!1;o=!0}var u=!n&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&nl(s,i)&&!u)return s.focus(),!0;s=a(e,s,r)}return!1}var il=mn.forwardRef((function(e,t){var r=e.actions,n=e.autoFocus,a=void 0!==n&&n,i=e.autoFocusItem,o=void 0!==i&&i,s=e.children,u=e.className,c=e.disabledItemsFocusable,l=void 0!==c&&c,f=e.disableListWrap,p=void 0!==f&&f,h=e.onKeyDown,d=e.variant,v=void 0===d?"selectedMenu":d,y=(0,ii.Z)(e,el),b=mn.useRef(null),g=mn.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Bu.Z)((function(){a&&b.current.focus()}),[a]),mn.useImperativeHandle(r,(function(){return{adjustStyleForScrollbar:function(e,t){var r=!b.current.style.width;if(e.clientHeight<b.current.clientHeight&&r){var n="".concat($c((0,Zc.Z)(e)),"px");b.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,b.current.style.width="calc(100% + ".concat(n,")")}return b.current}}}),[]);var m=(0,Bo.Z)(b,t),w=-1;mn.Children.forEach(s,(function(e,t){mn.isValidElement(e)?(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===w)&&(w=t),w===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(w+=1)>=s.length&&(w=-1)):w===t&&(w+=1)>=s.length&&(w=-1)}));var k=mn.Children.map(s,(function(e,t){if(t===w){var r={};return o&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===v&&(r.tabIndex=0),mn.cloneElement(e,r)}return e}));return(0,li.jsx)(Jc,(0,ai.Z)({role:"menu",ref:m,className:u,onKeyDown:function(e){var t=b.current,r=e.key,n=(0,Zc.Z)(t).activeElement;if("ArrowDown"===r)e.preventDefault(),al(t,n,p,l,tl);else if("ArrowUp"===r)e.preventDefault(),al(t,n,p,l,rl);else if("Home"===r)e.preventDefault(),al(t,null,p,l,tl);else if("End"===r)e.preventDefault(),al(t,null,p,l,rl);else if(1===r.length){var a=g.current,i=r.toLowerCase(),o=performance.now();a.keys.length>0&&(o-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&i!==a.keys[0]&&(a.repeating=!1)),a.lastTime=o,a.keys.push(i);var s=n&&!a.repeating&&nl(n,a);a.previousKeyMatched&&(s||al(t,n,!1,l,tl,a))?e.preventDefault():a.previousKeyMatched=!1}h&&h(e)},tabIndex:a?0:-1},y,{children:k}))})),ol=__webpack_require__(3199),sl=__webpack_require__(7602),ul=!1,cl="unmounted",ll="exited",fl="entering",pl="entered",hl="exiting",dl=function(e){function t(t,r){var n;n=e.call(this,t,r)||this;var a,i=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?i?(a=ll,n.appearStatus=fl):a=pl:a=t.unmountOnExit||t.mountOnEnter?cl:ll,n.state={status:a},n.nextCallback=null,n}ss(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===cl?{status:ll}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==fl&&r!==pl&&(t=fl):r!==fl&&r!==pl||(t=hl)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!==typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===fl){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:xu.findDOMNode(this);r&&function(e){e.scrollTop}(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ll&&this.setState({status:cl})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,a=this.props.nodeRef?[n]:[xu.findDOMNode(this),n],i=a[0],o=a[1],s=this.getTimeouts(),u=n?s.appear:s.enter;!e&&!r||ul?this.safeSetState({status:pl},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:fl},(function(){t.props.onEntering(i,o),t.onTransitionEnd(u,(function(){t.safeSetState({status:pl},(function(){t.props.onEntered(i,o)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:xu.findDOMNode(this);t&&!ul?(this.props.onExit(n),this.safeSetState({status:hl},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:ll},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:ll},(function(){e.props.onExited(n)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:xu.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===cl)return null;var t=this.props,r=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,ii.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return mn.createElement(us.Provider,{value:null},"function"===typeof r?r(e,n):mn.cloneElement(mn.Children.only(r),n))},t}(mn.Component);function vl(){}dl.contextType=us,dl.propTypes={},dl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vl,onEntering:vl,onEntered:vl,onExit:vl,onExiting:vl,onExited:vl},dl.UNMOUNTED=cl,dl.EXITED=ll,dl.ENTERING=fl,dl.ENTERED=pl,dl.EXITING=hl;var yl=dl;function bl(){var e=(0,Ti.Z)(Ii.Z);return e[bi.Z]||e}var gl=function(e){return e.scrollTop};function ml(e,t){var r,n,a=e.timeout,i=e.easing,o=e.style,s=void 0===o?{}:o;return{duration:null!=(r=s.transitionDuration)?r:"number"===typeof a?a:a[t.mode]||0,easing:null!=(n=s.transitionTimingFunction)?n:"object"===typeof i?i[t.mode]:i,delay:s.transitionDelay}}var wl=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function kl(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var xl={entering:{opacity:1,transform:kl(1)},entered:{opacity:1,transform:"none"}},_l="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),El=mn.forwardRef((function(e,t){var r=e.addEndListener,n=e.appear,a=void 0===n||n,i=e.children,o=e.easing,s=e.in,u=e.onEnter,c=e.onEntered,l=e.onEntering,f=e.onExit,p=e.onExited,h=e.onExiting,d=e.style,v=e.timeout,y=void 0===v?"auto":v,b=e.TransitionComponent,g=void 0===b?yl:b,m=(0,ii.Z)(e,wl),w=mn.useRef(),k=mn.useRef(),x=bl(),_=mn.useRef(null),E=(0,Bo.Z)(_,i.ref,t),S=function(e){return function(t){if(e){var r=_.current;void 0===t?e(r):e(r,t)}}},A=S(l),C=S((function(e,t){gl(e);var r,n=ml({style:d,timeout:y,easing:o},{mode:"enter"}),a=n.duration,i=n.delay,s=n.easing;"auto"===y?(r=x.transitions.getAutoHeightDuration(e.clientHeight),k.current=r):r=a,e.style.transition=[x.transitions.create("opacity",{duration:r,delay:i}),x.transitions.create("transform",{duration:_l?r:.666*r,delay:i,easing:s})].join(","),u&&u(e,t)})),T=S(c),R=S(h),I=S((function(e){var t,r=ml({style:d,timeout:y,easing:o},{mode:"exit"}),n=r.duration,a=r.delay,i=r.easing;"auto"===y?(t=x.transitions.getAutoHeightDuration(e.clientHeight),k.current=t):t=n,e.style.transition=[x.transitions.create("opacity",{duration:t,delay:a}),x.transitions.create("transform",{duration:_l?t:.666*t,delay:_l?a:a||.333*t,easing:i})].join(","),e.style.opacity=0,e.style.transform=kl(.75),f&&f(e)})),P=S(p);return mn.useEffect((function(){return function(){clearTimeout(w.current)}}),[]),(0,li.jsx)(g,(0,ai.Z)({appear:a,in:s,nodeRef:_,onEnter:C,onEntered:T,onEntering:A,onExit:I,onExited:P,onExiting:R,addEndListener:function(e){"auto"===y&&(w.current=setTimeout(e,k.current||0)),r&&r(_.current,e)},timeout:"auto"===y?null:y},m,{children:function(e,t){return mn.cloneElement(i,(0,ai.Z)({style:(0,ai.Z)({opacity:0,transform:kl(.75),visibility:"exited"!==e||s?void 0:"hidden"},xl[e],d,i.props.style),ref:E},t))}}))}));El.muiSupportAuto=!0;var Sl=El,Al=__webpack_require__(4913),Cl=__webpack_require__(7054),Tl=__webpack_require__(8949);function Rl(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Il(e){return parseInt((0,Eu.Z)(e).getComputedStyle(e).paddingRight,10)||0}function Pl(e,t,r,n,a){var i=[t,r].concat((0,kn.Z)(n));[].forEach.call(e.children,(function(e){var t=-1===i.indexOf(e),r=!function(e){var t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),r="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||r}(e);t&&r&&Rl(e,a)}))}function Dl(e,t){var r=-1;return e.some((function(e,n){return!!t(e)&&(r=n,!0)})),r}function Nl(e,t){var r=[],n=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,Al.Z)(e);return t.body===e?(0,Eu.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(n)){var a=Xc((0,Al.Z)(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight="".concat(Il(n)+a,"px");var i=(0,Al.Z)(n).querySelectorAll(".mui-fixed");[].forEach.call(i,(function(e){r.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(Il(e)+a,"px")}))}var o;if(n.parentNode instanceof DocumentFragment)o=(0,Al.Z)(n).body;else{var s=n.parentElement,u=(0,Eu.Z)(n);o="HTML"===(null==s?void 0:s.nodeName)&&"scroll"===u.getComputedStyle(s).overflowY?s:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return function(){r.forEach((function(e){var t=e.value,r=e.el,n=e.property;t?r.style.setProperty(n,t):r.style.removeProperty(n)}))}}var Ol=function(){function e(){xn(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return Sn(e,[{key:"add",value:function(e,t){var r=this.modals.indexOf(e);if(-1!==r)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Rl(e.modalRef,!1);var n=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Pl(t,e.mount,e.modalRef,n,!0);var a=Dl(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:n}),r)}},{key:"mount",value:function(e,t){var r=Dl(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),n=this.containers[r];n.restore||(n.restore=Nl(n,t))}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.modals.indexOf(e);if(-1===r)return r;var n=Dl(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),a=this.containers[n];if(a.modals.splice(a.modals.indexOf(e),1),this.modals.splice(r,1),0===a.modals.length)a.restore&&a.restore(),e.modalRef&&Rl(e.modalRef,t),Pl(a.container,e.mount,e.modalRef,a.hiddenSiblings,!1),this.containers.splice(n,1);else{var i=a.modals[a.modals.length-1];i.modalRef&&Rl(i.modalRef,!1)}return r}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var Ll=new Ol;function Bl(e){var t=e.container,r=e.disableEscapeKeyDown,n=void 0!==r&&r,a=e.disableScrollLock,i=void 0!==a&&a,o=e.manager,s=void 0===o?Ll:o,u=e.closeAfterTransition,c=void 0!==u&&u,l=e.onTransitionEnter,f=e.onTransitionExited,p=e.children,h=e.onClose,d=e.open,v=e.rootRef,y=mn.useRef({}),b=mn.useRef(null),g=mn.useRef(null),m=(0,_u.Z)(g,v),w=mn.useState(!d),k=(0,wn.Z)(w,2),x=k[0],_=k[1],E=function(e){return!!e&&e.props.hasOwnProperty("in")}(p),S=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(S=!1);var A=function(){return y.current.modalRef=g.current,y.current.mount=b.current,y.current},C=function(){s.mount(A(),{disableScrollLock:i}),g.current&&(g.current.scrollTop=0)},T=(0,Cl.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(t)||(0,Al.Z)(b.current).body;s.add(A(),e),g.current&&C()})),R=mn.useCallback((function(){return s.isTopModal(A())}),[s]),I=(0,Cl.Z)((function(e){b.current=e,e&&(d&&R()?C():g.current&&Rl(g.current,S))})),P=mn.useCallback((function(){s.remove(A(),S)}),[S,s]);mn.useEffect((function(){return function(){P()}}),[P]),mn.useEffect((function(){d?T():E&&c||P()}),[d,P,E,c,T]);var D=function(e){return function(t){var r;null==(r=e.onKeyDown)||r.call(e,t),"Escape"===t.key&&R()&&(n||(t.stopPropagation(),h&&h(t,"escapeKeyDown")))}},N=function(e){return function(t){var r;null==(r=e.onClick)||r.call(e,t),t.target===t.currentTarget&&h&&h(t,"backdropClick")}};return{getRootProps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=qc(e);delete r.onTransitionEnter,delete r.onTransitionExited;var n=(0,ai.Z)({},r,t);return(0,ai.Z)({role:"presentation"},n,{onKeyDown:D(n),ref:m})},getBackdropProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ai.Z)({"aria-hidden":!0},e,{onClick:N(e),open:d})},getTransitionProps:function(){return{onEnter:(0,Tl.Z)((function(){_(!1),l&&l()}),null==p?void 0:p.props.onEnter),onExited:(0,Tl.Z)((function(){_(!0),f&&f(),c&&P()}),null==p?void 0:p.props.onExited)}},rootRef:m,portalRef:I,isTopModal:R,exited:x,hasTransition:E}}var Ml=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Ul(e){var t=[],r=[];return Array.from(e.querySelectorAll(Ml)).forEach((function(e,n){var a=function(e){var t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==a&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},r=t('[name="'.concat(e.name,'"]:checked'));return r||(r=t('[name="'.concat(e.name,'"]'))),r!==e}(e))}(e)&&(0===a?t.push(e):r.push({documentOrder:n,tabIndex:a,node:e}))})),r.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function jl(){return!0}function Fl(e){var t=e.children,r=e.disableAutoFocus,n=void 0!==r&&r,a=e.disableEnforceFocus,i=void 0!==a&&a,o=e.disableRestoreFocus,s=void 0!==o&&o,u=e.getTabbable,c=void 0===u?Ul:u,l=e.isEnabled,f=void 0===l?jl:l,p=e.open,h=mn.useRef(!1),d=mn.useRef(null),v=mn.useRef(null),y=mn.useRef(null),b=mn.useRef(null),g=mn.useRef(!1),m=mn.useRef(null),w=(0,_u.Z)(t.ref,m),k=mn.useRef(null);mn.useEffect((function(){p&&m.current&&(g.current=!n)}),[n,p]),mn.useEffect((function(){if(p&&m.current){var e=(0,Al.Z)(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),g.current&&m.current.focus()),function(){s||(y.current&&y.current.focus&&(h.current=!0,y.current.focus()),y.current=null)}}}),[p]),mn.useEffect((function(){if(p&&m.current){var e=(0,Al.Z)(m.current),t=function(t){k.current=t,!i&&f()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(h.current=!0,v.current&&v.current.focus())},r=function(){var t=m.current;if(null!==t)if(e.hasFocus()&&f()&&!h.current){if(!t.contains(e.activeElement)&&(!i||e.activeElement===d.current||e.activeElement===v.current)){if(e.activeElement!==b.current)b.current=null;else if(null!==b.current)return;if(g.current){var r=[];if(e.activeElement!==d.current&&e.activeElement!==v.current||(r=c(m.current)),r.length>0){var n,a,o=Boolean((null==(n=k.current)?void 0:n.shiftKey)&&"Tab"===(null==(a=k.current)?void 0:a.key)),s=r[0],u=r[r.length-1];"string"!==typeof s&&"string"!==typeof u&&(o?u.focus():s.focus())}else t.focus()}}}else h.current=!1};e.addEventListener("focusin",r),e.addEventListener("keydown",t,!0);var n=setInterval((function(){e.activeElement&&"BODY"===e.activeElement.tagName&&r()}),50);return function(){clearInterval(n),e.removeEventListener("focusin",r),e.removeEventListener("keydown",t,!0)}}}),[n,i,s,f,p,c]);var x=function(e){null===y.current&&(y.current=e.relatedTarget),g.current=!0};return(0,li.jsxs)(mn.Fragment,{children:[(0,li.jsx)("div",{tabIndex:p?0:-1,onFocus:x,ref:d,"data-testid":"sentinelStart"}),mn.cloneElement(t,{ref:w,onFocus:function(e){null===y.current&&(y.current=e.relatedTarget),g.current=!0,b.current=e.target;var r=t.props.onFocus;r&&r(e)}}),(0,li.jsx)("div",{tabIndex:p?0:-1,onFocus:x,ref:v,"data-testid":"sentinelEnd"})]})}var zl=__webpack_require__(2971);var Zl=mn.forwardRef((function(e,t){var r=e.children,n=e.container,a=e.disablePortal,i=void 0!==a&&a,o=mn.useState(null),s=(0,wn.Z)(o,2),u=s[0],c=s[1],l=(0,_u.Z)(mn.isValidElement(r)?r.ref:null,t);if((0,Au.Z)((function(){i||c(function(e){return"function"===typeof e?e():e}(n)||document.body)}),[n,i]),(0,Au.Z)((function(){if(u&&!i)return(0,zl.Z)(t,u),function(){(0,zl.Z)(t,null)}}),[t,u,i]),i){if(mn.isValidElement(r)){var f={ref:l};return mn.cloneElement(r,f)}return(0,li.jsx)(mn.Fragment,{children:r})}return(0,li.jsx)(mn.Fragment,{children:u?xu.createPortal(r,u):u})}));var ql=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Vl={entering:{opacity:1},entered:{opacity:1}},Kl=mn.forwardRef((function(e,t){var r=bl(),n={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},a=e.addEndListener,i=e.appear,o=void 0===i||i,s=e.children,u=e.easing,c=e.in,l=e.onEnter,f=e.onEntered,p=e.onEntering,h=e.onExit,d=e.onExited,v=e.onExiting,y=e.style,b=e.timeout,g=void 0===b?n:b,m=e.TransitionComponent,w=void 0===m?yl:m,k=(0,ii.Z)(e,ql),x=mn.useRef(null),_=(0,Bo.Z)(x,s.ref,t),E=function(e){return function(t){if(e){var r=x.current;void 0===t?e(r):e(r,t)}}},S=E(p),A=E((function(e,t){gl(e);var n=ml({style:y,timeout:g,easing:u},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),l&&l(e,t)})),C=E(f),T=E(v),R=E((function(e){var t=ml({style:y,timeout:g,easing:u},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),h&&h(e)})),I=E(d);return(0,li.jsx)(w,(0,ai.Z)({appear:o,in:c,nodeRef:x,onEnter:A,onEntered:C,onEntering:S,onExit:R,onExited:I,onExiting:T,addEndListener:function(e){a&&a(x.current,e)},timeout:g},k,{children:function(e,t){return mn.cloneElement(s,(0,ai.Z)({style:(0,ai.Z)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},Vl[e],y,s.props.style),ref:_},t))}}))})),Hl=Kl;function Wl(e){return(0,Mi.Z)("MuiBackdrop",e)}(0,To.Z)("MuiBackdrop",["root","invisible"]);var Gl=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Yl=(0,ho.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,ai.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),Ql=mn.forwardRef((function(e,t){var r,n,a,i=(0,wi.Z)({props:e,name:"MuiBackdrop"}),o=i.children,s=i.className,u=i.component,c=void 0===u?"div":u,l=i.components,f=void 0===l?{}:l,p=i.componentsProps,h=void 0===p?{}:p,d=i.invisible,v=void 0!==d&&d,y=i.open,b=i.slotProps,g=void 0===b?{}:b,m=i.slots,w=void 0===m?{}:m,k=i.TransitionComponent,x=void 0===k?Hl:k,_=i.transitionDuration,E=(0,ii.Z)(i,Gl),S=(0,ai.Z)({},i,{component:c,invisible:v}),A=function(e){var t=e.classes,r={root:["root",e.invisible&&"invisible"]};return(0,Bi.Z)(r,Wl,t)}(S),C=null!=(r=g.root)?r:h.root;return(0,li.jsx)(x,(0,ai.Z)({in:y,timeout:_},E,{children:(0,li.jsx)(Yl,(0,ai.Z)({"aria-hidden":!0},C,{as:null!=(n=null!=(a=w.root)?a:f.Root)?n:c,className:(0,Li.Z)(A.root,s,null==C?void 0:C.className),ownerState:(0,ai.Z)({},S,null==C?void 0:C.ownerState),classes:A,ref:t,children:o}))}))}));function Jl(e){return(0,Mi.Z)("MuiModal",e)}(0,To.Z)("MuiModal",["root","hidden","backdrop"]);var Xl=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],$l=(0,ho.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,!r.open&&r.exited&&t.hidden]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!r.open&&r.exited&&{visibility:"hidden"})})),ef=(0,ho.ZP)(Ql,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),tf=mn.forwardRef((function(e,t){var r,n,a,i,o,s,u=(0,wi.Z)({name:"MuiModal",props:e}),c=u.BackdropComponent,l=void 0===c?ef:c,f=u.BackdropProps,p=u.className,h=u.closeAfterTransition,d=void 0!==h&&h,v=u.children,y=u.container,b=u.component,g=u.components,m=void 0===g?{}:g,w=u.componentsProps,k=void 0===w?{}:w,x=u.disableAutoFocus,_=void 0!==x&&x,E=u.disableEnforceFocus,S=void 0!==E&&E,A=u.disableEscapeKeyDown,C=void 0!==A&&A,T=u.disablePortal,R=void 0!==T&&T,I=u.disableRestoreFocus,P=void 0!==I&&I,D=u.disableScrollLock,N=void 0!==D&&D,O=u.hideBackdrop,L=void 0!==O&&O,B=u.keepMounted,M=void 0!==B&&B,U=u.onBackdropClick,j=u.open,F=u.slotProps,z=u.slots,Z=(0,ii.Z)(u,Xl),q=(0,ai.Z)({},u,{closeAfterTransition:d,disableAutoFocus:_,disableEnforceFocus:S,disableEscapeKeyDown:C,disablePortal:R,disableRestoreFocus:P,disableScrollLock:N,hideBackdrop:L,keepMounted:M}),V=Bl((0,ai.Z)({},q,{rootRef:t})),K=V.getRootProps,H=V.getBackdropProps,W=V.getTransitionProps,G=V.portalRef,Y=V.isTopModal,Q=V.exited,J=V.hasTransition,X=(0,ai.Z)({},q,{exited:Q}),$=function(e){var t=e.open,r=e.exited,n=e.classes,a={root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]};return(0,Bi.Z)(a,Jl,n)}(X),ee={};if(void 0===v.props.tabIndex&&(ee.tabIndex="-1"),J){var te=W(),re=te.onEnter,ne=te.onExited;ee.onEnter=re,ee.onExited=ne}var ae=null!=(r=null!=(n=null==z?void 0:z.root)?n:m.Root)?r:$l,ie=null!=(a=null!=(i=null==z?void 0:z.backdrop)?i:m.Backdrop)?a:l,oe=null!=(o=null==F?void 0:F.root)?o:k.root,se=null!=(s=null==F?void 0:F.backdrop)?s:k.backdrop,ue=Hc({elementType:ae,externalSlotProps:oe,externalForwardedProps:Z,getSlotProps:K,additionalProps:{ref:t,as:b},ownerState:X,className:(0,Li.Z)(p,null==oe?void 0:oe.className,null==$?void 0:$.root,!X.open&&X.exited&&(null==$?void 0:$.hidden))}),ce=Hc({elementType:ie,externalSlotProps:se,additionalProps:f,getSlotProps:function(e){return H((0,ai.Z)({},e,{onClick:function(t){U&&U(t),null!=e&&e.onClick&&e.onClick(t)}}))},className:(0,Li.Z)(null==se?void 0:se.className,null==f?void 0:f.className,null==$?void 0:$.backdrop),ownerState:X});return M||j||J&&!Q?(0,li.jsx)(Zl,{ref:G,container:y,disablePortal:R,children:(0,li.jsxs)(ae,(0,ai.Z)({},ue,{children:[!L&&l?(0,li.jsx)(ie,(0,ai.Z)({},ce)):null,(0,li.jsx)(Fl,{disableEnforceFocus:S,disableAutoFocus:_,disableRestoreFocus:P,isEnabled:Y,open:j,children:mn.cloneElement(v,ee)})]}))}):null})),rf=tf;function nf(e){return(0,Mi.Z)("MuiPopover",e)}(0,To.Z)("MuiPopover",["root","paper"]);var af=["onEntering"],of=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],sf=["slotProps"];function uf(e,t){var r=0;return"number"===typeof t?r=t:"center"===t?r=e.height/2:"bottom"===t&&(r=e.height),r}function cf(e,t){var r=0;return"number"===typeof t?r=t:"center"===t?r=e.width/2:"right"===t&&(r=e.width),r}function lf(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function ff(e){return"function"===typeof e?e():e}var pf=(0,ho.ZP)(rf,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),hf=(0,ho.ZP)(au,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),df=mn.forwardRef((function(e,t){var r,n,a,i=(0,wi.Z)({props:e,name:"MuiPopover"}),o=i.action,s=i.anchorEl,u=i.anchorOrigin,c=void 0===u?{vertical:"top",horizontal:"left"}:u,l=i.anchorPosition,f=i.anchorReference,p=void 0===f?"anchorEl":f,h=i.children,d=i.className,v=i.container,y=i.elevation,b=void 0===y?8:y,g=i.marginThreshold,m=void 0===g?16:g,w=i.open,k=i.PaperProps,x=void 0===k?{}:k,_=i.slots,E=i.slotProps,S=i.transformOrigin,A=void 0===S?{vertical:"top",horizontal:"left"}:S,C=i.TransitionComponent,T=void 0===C?Sl:C,R=i.transitionDuration,I=void 0===R?"auto":R,P=i.TransitionProps,D=(void 0===P?{}:P).onEntering,N=i.disableScrollLock,O=void 0!==N&&N,L=(0,ii.Z)(i.TransitionProps,af),B=(0,ii.Z)(i,of),M=null!=(r=null==E?void 0:E.paper)?r:x,U=mn.useRef(),j=(0,Bo.Z)(U,M.ref),F=(0,ai.Z)({},i,{anchorOrigin:c,anchorReference:p,elevation:b,marginThreshold:m,externalPaperSlotProps:M,transformOrigin:A,TransitionComponent:T,transitionDuration:I,TransitionProps:L}),z=function(e){var t=e.classes;return(0,Bi.Z)({root:["root"],paper:["paper"]},nf,t)}(F),Z=mn.useCallback((function(){if("anchorPosition"===p)return l;var e=ff(s),t=(e&&1===e.nodeType?e:(0,Zc.Z)(U.current).body).getBoundingClientRect();return{top:t.top+uf(t,c.vertical),left:t.left+cf(t,c.horizontal)}}),[s,c.horizontal,c.vertical,l,p]),q=mn.useCallback((function(e){return{vertical:uf(e,A.vertical),horizontal:cf(e,A.horizontal)}}),[A.horizontal,A.vertical]),V=mn.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},r=q(t);if("none"===p)return{top:null,left:null,transformOrigin:lf(r)};var n=Z(),a=n.top-r.vertical,i=n.left-r.horizontal,o=a+t.height,u=i+t.width,c=(0,sl.Z)(ff(s)),l=c.innerHeight-m,f=c.innerWidth-m;if(null!==m&&a<m){var h=a-m;a-=h,r.vertical+=h}else if(null!==m&&o>l){var d=o-l;a-=d,r.vertical+=d}if(null!==m&&i<m){var v=i-m;i-=v,r.horizontal+=v}else if(u>f){var y=u-f;i-=y,r.horizontal+=y}return{top:"".concat(Math.round(a),"px"),left:"".concat(Math.round(i),"px"),transformOrigin:lf(r)}}),[s,p,Z,q,m]),K=mn.useState(w),H=(0,wn.Z)(K,2),W=H[0],G=H[1],Y=mn.useCallback((function(){var e=U.current;if(e){var t=V(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,G(!0)}}),[V]);mn.useEffect((function(){return O&&window.addEventListener("scroll",Y),function(){return window.removeEventListener("scroll",Y)}}),[s,O,Y]);mn.useEffect((function(){w&&Y()})),mn.useImperativeHandle(o,(function(){return w?{updatePosition:function(){Y()}}:null}),[w,Y]),mn.useEffect((function(){if(w){var e=(0,ol.Z)((function(){Y()})),t=(0,sl.Z)(s);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[s,w,Y]);var Q=I;"auto"!==I||T.muiSupportAuto||(Q=void 0);var J=v||(s?(0,Zc.Z)(ff(s)).body:void 0),X=null!=(n=null==_?void 0:_.root)?n:pf,$=null!=(a=null==_?void 0:_.paper)?a:hf,ee=Hc({elementType:$,externalSlotProps:(0,ai.Z)({},M,{style:W?M.style:(0,ai.Z)({},M.style,{opacity:0})}),additionalProps:{elevation:b,ref:j},ownerState:F,className:(0,Li.Z)(z.paper,null==M?void 0:M.className)}),te=Hc({elementType:X,externalSlotProps:(null==E?void 0:E.root)||{},externalForwardedProps:B,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:J,open:w},ownerState:F,className:(0,Li.Z)(z.root,d)}),re=te.slotProps,ne=(0,ii.Z)(te,sf);return(0,li.jsx)(X,(0,ai.Z)({},ne,!Du(X)&&{slotProps:re,disableScrollLock:O},{children:(0,li.jsx)(T,(0,ai.Z)({appear:!0,in:w,onEntering:function(e,t){D&&D(e,t),Y()},onExited:function(){G(!1)},timeout:Q},L,{children:(0,li.jsx)($,(0,ai.Z)({},ee,{children:h}))}))}))}));function vf(e){return(0,Mi.Z)("MuiMenu",e)}(0,To.Z)("MuiMenu",["root","paper","list"]);var yf=["onEntering"],bf=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],gf={vertical:"top",horizontal:"right"},mf={vertical:"top",horizontal:"left"},wf=(0,ho.ZP)(df,{shouldForwardProp:function(e){return(0,ho.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),kf=(0,ho.ZP)(hf,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),xf=(0,ho.ZP)(il,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),_f=mn.forwardRef((function(e,t){var r,n,a=(0,wi.Z)({props:e,name:"MuiMenu"}),i=a.autoFocus,o=void 0===i||i,s=a.children,u=a.className,c=a.disableAutoFocusItem,l=void 0!==c&&c,f=a.MenuListProps,p=void 0===f?{}:f,h=a.onClose,d=a.open,v=a.PaperProps,y=void 0===v?{}:v,b=a.PopoverClasses,g=a.transitionDuration,m=void 0===g?"auto":g,w=a.TransitionProps,k=(void 0===w?{}:w).onEntering,x=a.variant,_=void 0===x?"selectedMenu":x,E=a.slots,S=void 0===E?{}:E,A=a.slotProps,C=void 0===A?{}:A,T=(0,ii.Z)(a.TransitionProps,yf),R=(0,ii.Z)(a,bf),I=bl(),P="rtl"===I.direction,D=(0,ai.Z)({},a,{autoFocus:o,disableAutoFocusItem:l,MenuListProps:p,onEntering:k,PaperProps:y,transitionDuration:m,TransitionProps:T,variant:_}),N=function(e){var t=e.classes;return(0,Bi.Z)({root:["root"],paper:["paper"],list:["list"]},vf,t)}(D),O=o&&!l&&d,L=mn.useRef(null),B=-1;mn.Children.map(s,(function(e,t){mn.isValidElement(e)&&(e.props.disabled||("selectedMenu"===_&&e.props.selected||-1===B)&&(B=t))}));var M=null!=(r=S.paper)?r:kf,U=null!=(n=C.paper)?n:y,j=Hc({elementType:S.root,externalSlotProps:C.root,ownerState:D,className:[N.root,u]}),F=Hc({elementType:M,externalSlotProps:U,ownerState:D,className:N.paper});return(0,li.jsx)(wf,(0,ai.Z)({onClose:h,anchorOrigin:{vertical:"bottom",horizontal:P?"right":"left"},transformOrigin:P?gf:mf,slots:{paper:M,root:S.root},slotProps:{root:j,paper:F},open:d,ref:t,transitionDuration:m,TransitionProps:(0,ai.Z)({onEntering:function(e,t){L.current&&L.current.adjustStyleForScrollbar(e,I),k&&k(e,t)}},T),ownerState:D},R,{classes:b,children:(0,li.jsx)(xf,(0,ai.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),h&&h(e,"tabKeyDown"))},actions:L,autoFocus:o&&(-1===B||l),autoFocusItem:O,variant:_},p,{className:(0,Li.Z)(N.list,p.className),children:s}))}))}));function Ef(e){return(0,Mi.Z)("MuiNativeSelect",e)}var Sf=(0,To.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Af=["className","disabled","error","IconComponent","inputRef","variant"],Cf=function(e){var t,r=e.ownerState,n=e.theme;return(0,ai.Z)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,ai.Z)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"}},(0,oi.Z)(t,"&.".concat(Sf.disabled),{cursor:"default"}),(0,oi.Z)(t,"&[multiple]",{height:"auto"}),(0,oi.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:(n.vars||n).palette.background.paper}),(0,oi.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===r.variant&&{"&&&":{paddingRight:32}},"outlined"===r.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},Tf=(0,ho.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ho.FO,overridesResolver:function(e,t){var r=e.ownerState;return[t.select,t[r.variant],r.error&&t.error,(0,oi.Z)({},"&.".concat(Sf.multiple),t.multiple)]}})(Cf),Rf=function(e){var t=e.ownerState,r=e.theme;return(0,ai.Z)((0,oi.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(r.vars||r).palette.action.active},"&.".concat(Sf.disabled),{color:(r.vars||r).palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},If=(0,ho.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var r=e.ownerState;return[t.icon,r.variant&&t["icon".concat((0,Co.Z)(r.variant))],r.open&&t.iconOpen]}})(Rf),Pf=mn.forwardRef((function(e,t){var r=e.className,n=e.disabled,a=e.error,i=e.IconComponent,o=e.inputRef,s=e.variant,u=void 0===s?"standard":s,c=(0,ii.Z)(e,Af),l=(0,ai.Z)({},e,{disabled:n,variant:u,error:a}),f=function(e){var t=e.classes,r=e.variant,n=e.disabled,a=e.multiple,i=e.open,o={select:["select",r,n&&"disabled",a&&"multiple",e.error&&"error"],icon:["icon","icon".concat((0,Co.Z)(r)),i&&"iconOpen",n&&"disabled"]};return(0,Bi.Z)(o,Ef,t)}(l);return(0,li.jsxs)(mn.Fragment,{children:[(0,li.jsx)(Tf,(0,ai.Z)({ownerState:l,className:(0,Li.Z)(f.select,r),disabled:n,ref:o||t},c)),e.multiple?null:(0,li.jsx)(If,{as:i,ownerState:l,className:f.icon})]})})),Df=__webpack_require__(5158);function Nf(e){return(0,Mi.Z)("MuiSelect",e)}var Of,Lf=(0,To.Z)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Bf=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Mf=(0,ho.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var r=e.ownerState;return[(0,oi.Z)({},"&.".concat(Lf.select),t.select),(0,oi.Z)({},"&.".concat(Lf.select),t[r.variant]),(0,oi.Z)({},"&.".concat(Lf.error),t.error),(0,oi.Z)({},"&.".concat(Lf.multiple),t.multiple)]}})(Cf,(0,oi.Z)({},"&.".concat(Lf.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),Uf=(0,ho.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var r=e.ownerState;return[t.icon,r.variant&&t["icon".concat((0,Co.Z)(r.variant))],r.open&&t.iconOpen]}})(Rf),jf=(0,ho.ZP)("input",{shouldForwardProp:function(e){return(0,ho.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Ff(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function zf(e){return null==e||"string"===typeof e&&!e.trim()}var Zf=mn.forwardRef((function(e,t){var r,n=e["aria-describedby"],a=e["aria-label"],i=e.autoFocus,o=e.autoWidth,s=e.children,u=e.className,c=e.defaultOpen,l=e.defaultValue,f=e.disabled,p=e.displayEmpty,h=e.error,d=void 0!==h&&h,v=e.IconComponent,y=e.inputRef,b=e.labelId,g=e.MenuProps,m=void 0===g?{}:g,w=e.multiple,k=e.name,x=e.onBlur,_=e.onChange,E=e.onClose,S=e.onFocus,A=e.onOpen,C=e.open,T=e.readOnly,R=e.renderValue,I=e.SelectDisplayProps,P=void 0===I?{}:I,D=e.tabIndex,N=e.value,O=e.variant,L=void 0===O?"standard":O,B=(0,ii.Z)(e,Bf),M=(0,Df.Z)({controlled:N,default:l,name:"Select"}),U=(0,wn.Z)(M,2),j=U[0],F=U[1],z=(0,Df.Z)({controlled:C,default:c,name:"Select"}),Z=(0,wn.Z)(z,2),q=Z[0],V=Z[1],K=mn.useRef(null),H=mn.useRef(null),W=mn.useState(null),G=(0,wn.Z)(W,2),Y=G[0],Q=G[1],J=mn.useRef(null!=C).current,X=mn.useState(),$=(0,wn.Z)(X,2),ee=$[0],te=$[1],re=(0,Bo.Z)(t,y),ne=mn.useCallback((function(e){H.current=e,e&&Q(e)}),[]),ae=null==Y?void 0:Y.parentNode;mn.useImperativeHandle(re,(function(){return{focus:function(){H.current.focus()},node:K.current,value:j}}),[j]),mn.useEffect((function(){c&&q&&Y&&!J&&(te(o?null:ae.clientWidth),H.current.focus())}),[Y,o]),mn.useEffect((function(){i&&H.current.focus()}),[i]),mn.useEffect((function(){if(b){var e=(0,Zc.Z)(H.current).getElementById(b);if(e){var t=function(){getSelection().isCollapsed&&H.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[b]);var ie,oe,se=function(e,t){e?A&&A(t):E&&E(t),J||(te(o?null:ae.clientWidth),V(e))},ue=mn.Children.toArray(s),ce=function(e){return function(t){var r;if(t.currentTarget.hasAttribute("tabindex")){if(w){r=Array.isArray(j)?j.slice():[];var n=j.indexOf(e.props.value);-1===n?r.push(e.props.value):r.splice(n,1)}else r=e.props.value;if(e.props.onClick&&e.props.onClick(t),j!==r&&(F(r),_)){var a=t.nativeEvent||t,i=new a.constructor(a.type,a);Object.defineProperty(i,"target",{writable:!0,value:{value:r,name:k}}),_(i,e)}w||se(!1,t)}}},le=null!==Y&&q;delete B["aria-invalid"];var fe=[],pe=!1;(Uu({value:j})||p)&&(R?ie=R(j):pe=!0);var he=ue.map((function(e){if(!mn.isValidElement(e))return null;var t;if(w){if(!Array.isArray(j))throw new Error((0,ku.Z)(2));(t=j.some((function(t){return Ff(t,e.props.value)})))&&pe&&fe.push(e.props.children)}else(t=Ff(j,e.props.value))&&pe&&(oe=e.props.children);return t&&!0,mn.cloneElement(e,{"aria-selected":t?"true":"false",onClick:ce(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));pe&&(ie=w?0===fe.length?null:fe.reduce((function(e,t,r){return e.push(t),r<fe.length-1&&e.push(", "),e}),[]):oe);var de,ve=ee;!o&&J&&Y&&(ve=ae.clientWidth),de="undefined"!==typeof D?D:f?null:0;var ye=P.id||(k?"mui-component-select-".concat(k):void 0),be=(0,ai.Z)({},e,{variant:L,value:j,open:le,error:d}),ge=function(e){var t=e.classes,r=e.variant,n=e.disabled,a=e.multiple,i=e.open,o={select:["select",r,n&&"disabled",a&&"multiple",e.error&&"error"],icon:["icon","icon".concat((0,Co.Z)(r)),i&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return(0,Bi.Z)(o,Nf,t)}(be),me=(0,ai.Z)({},m.PaperProps,null==(r=m.slotProps)?void 0:r.paper);return(0,li.jsxs)(mn.Fragment,{children:[(0,li.jsx)(Mf,(0,ai.Z)({ref:ne,tabIndex:de,role:"button","aria-disabled":f?"true":void 0,"aria-expanded":le?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[b,ye].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:function(e){if(!T){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),se(!0,e))}},onMouseDown:f||T?null:function(e){0===e.button&&(e.preventDefault(),H.current.focus(),se(!0,e))},onBlur:function(e){!le&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:j,name:k}}),x(e))},onFocus:S},P,{ownerState:be,className:(0,Li.Z)(P.className,ge.select,u),id:ye,children:zf(ie)?Of||(Of=(0,li.jsx)("span",{className:"notranslate",children:"\u200b"})):ie})),(0,li.jsx)(jf,(0,ai.Z)({"aria-invalid":d,value:Array.isArray(j)?j.join(","):j,name:k,ref:K,"aria-hidden":!0,onChange:function(e){var t=ue.find((function(t){return t.props.value===e.target.value}));void 0!==t&&(F(t.props.value),_&&_(e,t))},tabIndex:-1,disabled:f,className:ge.nativeInput,autoFocus:i,ownerState:be},B)),(0,li.jsx)(Uf,{as:v,className:ge.icon,ownerState:be}),(0,li.jsx)(_f,(0,ai.Z)({id:"menu-".concat(k||""),anchorEl:ae,open:le,onClose:function(e){se(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},m,{MenuListProps:(0,ai.Z)({"aria-labelledby":b,role:"listbox",disableListWrap:!0},m.MenuListProps),slotProps:{paper:(0,ai.Z)({},me,{style:(0,ai.Z)({minWidth:ve},null!=me?me.style:null)})},children:he}))]})})),qf=Zf,Vf=__webpack_require__(9201),Kf=(0,Vf.Z)((0,li.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Hf=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Wf=["root"],Gf={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return(0,ho.FO)(e)&&"variant"!==e},slot:"Root"},Yf=(0,ho.ZP)(tc,Gf)(""),Qf=(0,ho.ZP)(wc,Gf)(""),Jf=(0,ho.ZP)(cc,Gf)(""),Xf=mn.forwardRef((function(e,t){var r=(0,wi.Z)({name:"MuiSelect",props:e}),n=r.autoWidth,a=void 0!==n&&n,i=r.children,o=r.classes,s=void 0===o?{}:o,u=r.className,c=r.defaultOpen,l=void 0!==c&&c,f=r.displayEmpty,p=void 0!==f&&f,h=r.IconComponent,d=void 0===h?Kf:h,v=r.id,y=r.input,b=r.inputProps,g=r.label,m=r.labelId,w=r.MenuProps,k=r.multiple,x=void 0!==k&&k,_=r.native,E=void 0!==_&&_,S=r.onClose,A=r.onOpen,C=r.open,T=r.renderValue,R=r.SelectDisplayProps,I=r.variant,P=void 0===I?"outlined":I,D=(0,ii.Z)(r,Hf),N=E?Pf:qf,O=Nu({props:r,muiFormControl:Lu(),states:["variant","error"]}),L=O.variant||P,B=(0,ai.Z)({},r,{variant:L,classes:s}),M=function(e){return e.classes}(B),U=(0,ii.Z)(M,Wf),j=y||{standard:(0,li.jsx)(Yf,{ownerState:B}),outlined:(0,li.jsx)(Qf,{label:g,ownerState:B}),filled:(0,li.jsx)(Jf,{ownerState:B})}[L],F=(0,Bo.Z)(t,j.ref);return(0,li.jsx)(mn.Fragment,{children:mn.cloneElement(j,(0,ai.Z)({inputComponent:N,inputProps:(0,ai.Z)({children:i,error:O.error,IconComponent:d,variant:L,type:void 0,multiple:x},E?{id:v}:{autoWidth:a,defaultOpen:l,displayEmpty:p,labelId:m,MenuProps:w,onClose:S,onOpen:A,open:C,renderValue:T,SelectDisplayProps:(0,ai.Z)({id:v},R)},b,{classes:b?(0,zi.Z)(U,b.classes):U},y?y.props.inputProps:{})},x&&E&&"outlined"===L?{notched:!0}:{},{ref:F,className:(0,Li.Z)(j.props.className,u,M.root)},!y&&{variant:L},D))})}));Xf.muiName="Select";var $f=Xf;function ep(e){return(0,Mi.Z)("MuiTextField",e)}(0,To.Z)("MuiTextField",["root"]);var tp=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],rp={standard:tc,filled:cc,outlined:wc},np=(0,ho.ZP)(Lc,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),ap=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiTextField"}),n=r.autoComplete,a=r.autoFocus,i=void 0!==a&&a,o=r.children,s=r.className,u=r.color,c=void 0===u?"primary":u,l=r.defaultValue,f=r.disabled,p=void 0!==f&&f,h=r.error,d=void 0!==h&&h,v=r.FormHelperTextProps,y=r.fullWidth,b=void 0!==y&&y,g=r.helperText,m=r.id,w=r.InputLabelProps,k=r.inputProps,x=r.InputProps,_=r.inputRef,E=r.label,S=r.maxRows,A=r.minRows,C=r.multiline,T=void 0!==C&&C,R=r.name,I=r.onBlur,P=r.onChange,D=r.onFocus,N=r.placeholder,O=r.required,L=void 0!==O&&O,B=r.rows,M=r.select,U=void 0!==M&&M,j=r.SelectProps,F=r.type,z=r.value,Z=r.variant,q=void 0===Z?"outlined":Z,V=(0,ii.Z)(r,tp),K=(0,ai.Z)({},r,{autoFocus:i,color:c,disabled:p,error:d,fullWidth:b,multiline:T,required:L,select:U,variant:q}),H=function(e){var t=e.classes;return(0,Bi.Z)({root:["root"]},ep,t)}(K);var W={};"outlined"===q&&(w&&"undefined"!==typeof w.shrink&&(W.notched=w.shrink),W.label=E),U&&(j&&j.native||(W.id=void 0),W["aria-describedby"]=void 0);var G=(0,wu.Z)(m),Y=g&&G?"".concat(G,"-helper-text"):void 0,Q=E&&G?"".concat(G,"-label"):void 0,J=rp[q],X=(0,li.jsx)(J,(0,ai.Z)({"aria-describedby":Y,autoComplete:n,autoFocus:i,defaultValue:l,fullWidth:b,multiline:T,name:R,rows:B,maxRows:S,minRows:A,type:F,value:z,id:G,inputRef:_,onBlur:I,onChange:P,onFocus:D,placeholder:N,inputProps:k},W,x));return(0,li.jsxs)(np,(0,ai.Z)({className:(0,Li.Z)(H.root,s),disabled:p,error:d,fullWidth:b,ref:t,required:L,color:c,variant:q,ownerState:K},V,{children:[null!=E&&""!==E&&(0,li.jsx)(Ic,(0,ai.Z)({htmlFor:G,id:Q},w,{children:E})),U?(0,li.jsx)($f,(0,ai.Z)({"aria-describedby":Y,id:G,labelId:Q,value:z,input:X},j,{children:o})):X,g&&(0,li.jsx)(zc,(0,ai.Z)({id:Y},v,{children:g}))]}))})),ip=ap;function op(e){return(0,Mi.Z)("MuiDialog",e)}var sp=(0,To.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var up=mn.createContext({}),cp=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],lp=(0,ho.ZP)(Ql,{name:"MuiDialog",slot:"Backdrop",overrides:function(e,t){return t.backdrop}})({zIndex:-1}),fp=(0,ho.ZP)(rf,{name:"MuiDialog",slot:"Root",overridesResolver:function(e,t){return t.root}})({"@media print":{position:"absolute !important"}}),pp=(0,ho.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:function(e,t){var r=e.ownerState;return[t.container,t["scroll".concat((0,Co.Z)(r.scroll))]]}})((function(e){var t=e.ownerState;return(0,ai.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),hp=(0,ho.ZP)(au,{name:"MuiDialog",slot:"Paper",overridesResolver:function(e,t){var r=e.ownerState;return[t.paper,t["scrollPaper".concat((0,Co.Z)(r.scroll))],t["paperWidth".concat((0,Co.Z)(String(r.maxWidth)))],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===r.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===r.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!r.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===r.maxWidth&&(0,oi.Z)({maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)")},"&.".concat(sp.paperScrollBody),(0,oi.Z)({},t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})),r.maxWidth&&"xs"!==r.maxWidth&&(0,oi.Z)({maxWidth:"".concat(t.breakpoints.values[r.maxWidth]).concat(t.breakpoints.unit)},"&.".concat(sp.paperScrollBody),(0,oi.Z)({},t.breakpoints.down(t.breakpoints.values[r.maxWidth]+64),{maxWidth:"calc(100% - 64px)"})),r.fullWidth&&{width:"calc(100% - 64px)"},r.fullScreen&&(0,oi.Z)({margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0},"&.".concat(sp.paperScrollBody),{margin:0,maxWidth:"100%"}))})),dp=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiDialog"}),n=bl(),a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},i=r["aria-describedby"],o=r["aria-labelledby"],s=r.BackdropComponent,u=r.BackdropProps,c=r.children,l=r.className,f=r.disableEscapeKeyDown,p=void 0!==f&&f,h=r.fullScreen,d=void 0!==h&&h,v=r.fullWidth,y=void 0!==v&&v,b=r.maxWidth,g=void 0===b?"sm":b,m=r.onBackdropClick,w=r.onClose,k=r.open,x=r.PaperComponent,_=void 0===x?au:x,E=r.PaperProps,S=void 0===E?{}:E,A=r.scroll,C=void 0===A?"paper":A,T=r.TransitionComponent,R=void 0===T?Hl:T,I=r.transitionDuration,P=void 0===I?a:I,D=r.TransitionProps,N=(0,ii.Z)(r,cp),O=(0,ai.Z)({},r,{disableEscapeKeyDown:p,fullScreen:d,fullWidth:y,maxWidth:g,scroll:C}),L=function(e){var t=e.classes,r=e.scroll,n=e.maxWidth,a=e.fullWidth,i=e.fullScreen,o={root:["root"],container:["container","scroll".concat((0,Co.Z)(r))],paper:["paper","paperScroll".concat((0,Co.Z)(r)),"paperWidth".concat((0,Co.Z)(String(n))),a&&"paperFullWidth",i&&"paperFullScreen"]};return(0,Bi.Z)(o,op,t)}(O),B=mn.useRef(),M=(0,wu.Z)(o),U=mn.useMemo((function(){return{titleId:M}}),[M]);return(0,li.jsx)(fp,(0,ai.Z)({className:(0,Li.Z)(L.root,l),closeAfterTransition:!0,components:{Backdrop:lp},componentsProps:{backdrop:(0,ai.Z)({transitionDuration:P,as:s},u)},disableEscapeKeyDown:p,onClose:w,open:k,ref:t,onClick:function(e){B.current&&(B.current=null,m&&m(e),w&&w(e,"backdropClick"))},ownerState:O},N,{children:(0,li.jsx)(R,(0,ai.Z)({appear:!0,in:k,timeout:P,role:"presentation"},D,{children:(0,li.jsx)(pp,{className:(0,Li.Z)(L.container),onMouseDown:function(e){B.current=e.target===e.currentTarget},ownerState:O,children:(0,li.jsx)(hp,(0,ai.Z)({as:_,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":M},S,{className:(0,Li.Z)(L.paper,S.className),ownerState:O,children:(0,li.jsx)(up.Provider,{value:U,children:c})}))})}))}))}));function vp(e){var t=e.character,r=e.submit,n=e.close,a=mn.useState(t.form.currentAge),i=(0,wn.Z)(a,2),o=i[0],s=i[1],u=mn.useState(t.form.maxAge),c=(0,wn.Z)(u,2),l=c[0],f=c[1];return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)(_o,{sx:{p:2,maxWidth:280},children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(ip,{fullWidth:!0,type:"Number",label:"Current Age",value:o,onChange:function(e){return s(e.target.value)}})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(ip,{fullWidth:!0,type:"Number",label:"Max Age",value:l,onChange:function(e){return f(e.target.value)}})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){r({currentAge:o,maxAge:l})},children:"Continue"})})]})})})}function yp(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=function(){i(!1)};return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:o,open:a,children:(0,li.jsx)(vp,{character:t,submit:function(e){o(),e&&t.update("form",So(So({},t.form),e))},close:o})}),(0,li.jsx)($s,{label:"Age",children:(0,li.jsxs)(vu,{onClick:function(){i(!0)},sx:{p:1},children:[(0,li.jsx)(bu,{label:"Current / Maximum",endLabel:t.form.currentAge+(t.form.maxAge&&" / "+t.form.maxAge+" years")}),(0,li.jsx)(bu,{label:"Category",endLabel:t.form.maxAge&&t.form.ageCategory}),(0,li.jsx)(bu,{label:"Penalty",endLabel:t.form.maxAge&&t.form.agePenalty})]})})]})}function bp(e){if(!e)return"";var t=null;return 0===(e=Number(e))?t="Common":1===e?t="Uncommon":e>=2&&e<=3?t="Rare":e>=4&&e<=7?t="Hero":e>=8&&e<=15?t="Legend":e>=16&&e<=31?t="God":e>=32&&(t="Primordial"),t}function gp(e){if(!e)return"";var t=null;return(e=Number(e))<=0||1===e?t=0:e>=2&&e<=3?t=1:e>=4&&e<=7?t=2:e>=8&&e<=15?t=3:e>=16&&e<=31?t=4:e>=32&&(t=5),t}function mp(e){return e>=Math.round(Math.pow(8,7.5))?8:e>=131073?9:e>=32769?8:e>=8193?7:e>=2049?6:e>=513?5:e>=129?4:e>=33?3:e>=9?2:e>=3?1:0}function wp(e){var t=mp(e);return 9===t?"Titan":8===t?"Gargantuan":7===t?"Giant":6===t?"Huge":5===t?"Large":4===t?"Medium":3===t?"Small":2===t?"Tiny":1===t?"Mini":0===t?"Toy":""}function kp(e){var t=xp(e),r=null;return 0===t?r=-2:1===t?r=0:2===t?r=-1:3===t?r=-2:4===t?r=-3:5===t&&(r=-4),(r+=gp(e.level))>0&&(r=0),r}function xp(e){var t=e.form,r=t.currentAge,n=t.maxAge;return r<=.15*n?0:r<=.35*n?1:r<=.55*n?2:r<=.7*n?3:r<=.85*n?4:r<=n?5:6}function _p(e){return e>=6?e-5+"d12":5===e?"1d10":4===e?"1d8":3===e?"1d6":2===e?"1d4":1===e?"1d2":""}function Ep(e,t){var r=t.proficiencies,n=t.abilityScoreChanges,a=0;r.forEach((function(t){""!==t.abilities[e]&&(a+=Math.floor(Number(t.score)/("half"===t.abilities[e]?2:1)))}));var i=8+a+Number(n[e])+("dexterity"===e?kp(t):0)+("strength"===e?kp(t):0)+("constitution"===e?kp(t):0),o=function(e){var t=e-10;return t>=0?Math.floor(t/2):Math.round(t/2)}(i);return{score:i,modifier:o,die:_p(o)}}function Sp(e){var t=gp(e.level);return{category:bp(e.level),score:t,proficiencyBonus:2+t}}function Ap(e){return So(So({},e.form),{},{size:wp(e.form.weight),damageReduction:mp(e.form.weight),sizeDie:_p(mp(e.form.weight)),agePenalty:kp(e),ageCategory:(t=xp(e),0===t?"Adolescant":1===t?"Young Adult":2===t?"Adult":3===t?"Aging Adult":4===t?"Elder":5===t?"Ancient":void 0)});var t}function Cp(e){return 0===e.proficiencies.length?0:Ep("dexterity",e).modifier+Number(e.initiativeBonus)}function Tp(e){var t=mn.useState(So({playerName:"",name:"",title:"",level:"",form:{name:"",weight:"",currentAge:"",maxAge:"",speed:""},proficiencies:Array(11).fill({name:"",score:"",expert:!1,abilities:{dexterity:"",strength:"",constitution:"",intelligence:"",wisdom:"",charisma:""}}),coreValues:[],feats:[],abilityScoreChanges:{dexterity:"",strength:"",constitution:"",intelligence:"",wisdom:"",charisma:""},inspiration:"",initiativeBonus:"",hitDice:"",version:1},e||{})),r=(0,wn.Z)(t,2),n=r[0],a=r[1];var i=function(e){return{constitution:Ep("constitution",e),dexterity:Ep("dexterity",e),strength:Ep("strength",e),intelligence:Ep("intelligence",e),wisdom:Ep("wisdom",e),charisma:Ep("charisma",e),wealth:Ep("wealth",e)}}(n),o=Math.round(Math.sqrt(n.form.weight)),s=Math.round(o/10+i.constitution.modifier);return s<1&&(s=1),So(So(So({raw:n},n),{},{update:function(e,t){a((function(r){return So(So({},r),{},(0,oi.Z)({},e,t))}))},updateMany:function(e){var t=So({},n);e.map((function(e){var r=(0,wn.Z)(e,2),n=r[0],a=r[1];t[n]=a})),a(t)},class:Sp(n)},i),{},{form:Ap(n),maxHitPoints:o,recovery:s,initiative:Cp(n)})}function Rp(e){var t=e.character,r=e.submit,n=e.close,a=mn.useState(t.form.weight||""),i=(0,wn.Z)(a,2),o=i[0],s=i[1];return(0,li.jsx)(_o,{p:2,children:(0,li.jsxs)(yo,{container:!0,spacing:2,sx:{maxWidth:"440px"},children:[(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(ip,{fullWidth:!0,label:"Weight ",value:o,onChange:function(e){return s(e.target.value)}})}),(0,li.jsx)(yo,{xs:6,container:!0,alignItems:"center",pl:2,children:(0,li.jsx)(yo,{children:(0,li.jsxs)(Oo,{children:["Size: ",o?wp(o):"Unknown"]})})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"Cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){r(o)},children:"Continue"})})]})})}function Ip(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=function(){i(!1)};return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:o,open:a,children:(0,li.jsx)(Rp,{character:t,submit:function(e){o(),e&&t.update("form",So(So({},t.form),{},{weight:e}))},close:o})}),(0,li.jsx)($s,{label:"Form"+(t.form.name&&": "+t.form.name),children:(0,li.jsxs)(vu,{sx:{p:1},onClick:function(){i(!0)},children:[(0,li.jsx)(bu,{label:"Weight",endLabel:t.form.weight+" lb"}),(0,li.jsx)(bu,{label:"Size",endLabel:t.form.weight&&t.form.size}),(0,li.jsx)(bu,{label:"Size Die",endLabel:t.form.sizeDie||""})]})})]})}function Pp(e){var t=e.character,r=e.submit,n=e.close,a=mn.useState(t.level||"0"),i=(0,wn.Z)(a,2),o=i[0],s=i[1],u=mn.useState(t.form.name||""),c=(0,wn.Z)(u,2),l=c[0],f=c[1],p=mn.useState(t.name||""),h=(0,wn.Z)(p,2),d=h[0],v=h[1],y=mn.useState(t.title||""),b=(0,wn.Z)(y,2),g=b[0],m=b[1],w=mn.useState(t.playerName||""),k=(0,wn.Z)(w,2),x=k[0],_=k[1];return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)(_o,{sx:{p:2},children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsxs)(yo,{xs:12,container:!0,children:[(0,li.jsx)(yo,{container:!0,alignContent:"center",sx:{width:"108px"},children:(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,inputProps:{style:{textAlign:"center"}},type:"number",label:"Level",value:o,onChange:function(e){return s(e.target.value)}})})}),(0,li.jsx)(yo,{xs:!0,children:(0,li.jsx)(ip,{fullWidth:!0,label:"Form (Human, Dwarf, Elf...)",value:l,onChange:function(e){return f(e.target.value)}})})]}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,label:"Character Name",value:d,onChange:function(e){return v(e.target.value)}})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,label:"Character Title",value:g,onChange:function(e){return m(e.target.value)}})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,label:"Player Name",value:x,onChange:function(e){return _(e.target.value)}})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){r({characterName:d,characterTitle:g,formName:l,playerName:x,level:o})},children:"Continue"})})]})})})}function Dp(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=function(){i(!1)};return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:o,open:a,children:(0,li.jsx)(Pp,{character:t,submit:function(e){o(),e&&t.updateMany([["level",e.level],["form",So(So({},t.form),{},{name:e.formName})],["name",e.characterName],["title",e.characterTitle],["playerName",e.playerName]])},close:o})}),(0,li.jsxs)(vu,{onClick:function(){i(!0)},children:[(0,li.jsxs)(yo,{container:!0,sx:{borderBottom:"1px solid black"},children:[(0,li.jsx)(yo,{xs:2.5,children:(0,li.jsx)("h1",{style:{margin:0,marginBottom:"-5px",fontSize:"24px"},children:"Hero Drop"})}),(0,li.jsx)(yo,{xs:1.5,sx:{pt:"5px"},children:(0,li.jsxs)(Oo,{noWrap:!0,sx:{fontSize:"12px"},children:[t.class.category," ",t.level]})}),(0,li.jsx)(yo,{xs:2,sx:{pt:"5px"},children:(0,li.jsx)(Oo,{noWrap:!0,sx:{fontSize:"12px"},children:t.form.name})}),(0,li.jsx)(yo,{xs:t.title?"auto":4,sx:{pt:"5px"},children:(0,li.jsx)(Oo,{noWrap:!0,sx:{fontSize:"12px"},children:t.name})}),(0,li.jsx)(yo,{xs:!0,sx:{pt:"5px",display:!t.title&&"none"},children:(0,li.jsxs)(Oo,{noWrap:!0,sx:{fontSize:"12px"},children:["\xa0",t.title]})}),(0,li.jsx)(yo,{xs:2,sx:{pt:"5px"},children:(0,li.jsx)(Oo,{noWrap:!0,sx:{fontSize:"12px"},children:t.playerName})})]}),(0,li.jsxs)(yo,{container:!0,children:[(0,li.jsx)(yo,{xs:2.5,sx:{fontSize:"9px"},children:(0,li.jsx)("div",{children:"Character Sheet"})}),(0,li.jsx)(yo,{xs:1.5,sx:{fontSize:"9px"},children:(0,li.jsx)("div",{children:"Class / Level"})}),(0,li.jsx)(yo,{xs:2,sx:{fontSize:"9px"},children:(0,li.jsx)("div",{children:"Form"})}),(0,li.jsx)(yo,{xs:t.title?"auto":4,sx:{fontSize:"9px"},children:(0,li.jsx)("div",{children:"Character Name"})}),(0,li.jsx)(yo,{xs:!0,sx:{fontSize:"9px"},children:(0,li.jsx)(_o,{sx:{display:!t.title&&"none"},children:"\xa0and Title"})}),(0,li.jsx)(yo,{xs:2,sx:{fontSize:"9px"},children:(0,li.jsx)("div",{children:"Player Name"})})]})]})]})}function Np(e){return(0,Mi.Z)("PrivateSwitchBase",e)}(0,To.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var Op=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Lp=(0,ho.ZP)(js)((function(e){var t=e.ownerState;return(0,ai.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),Bp=(0,ho.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Mp=mn.forwardRef((function(e,t){var r=e.autoFocus,n=e.checked,a=e.checkedIcon,i=e.className,o=e.defaultChecked,s=e.disabled,u=e.disableFocusRipple,c=void 0!==u&&u,l=e.edge,f=void 0!==l&&l,p=e.icon,h=e.id,d=e.inputProps,v=e.inputRef,y=e.name,b=e.onBlur,g=e.onChange,m=e.onFocus,w=e.readOnly,k=e.required,x=void 0!==k&&k,_=e.tabIndex,E=e.type,S=e.value,A=(0,ii.Z)(e,Op),C=(0,Df.Z)({controlled:n,default:Boolean(o),name:"SwitchBase",state:"checked"}),T=(0,wn.Z)(C,2),R=T[0],I=T[1],P=Lu(),D=s;P&&"undefined"===typeof D&&(D=P.disabled);var N="checkbox"===E||"radio"===E,O=(0,ai.Z)({},e,{checked:R,disabled:D,disableFocusRipple:c,edge:f}),L=function(e){var t=e.classes,r=e.checked,n=e.disabled,a=e.edge,i={root:["root",r&&"checked",n&&"disabled",a&&"edge".concat((0,Co.Z)(a))],input:["input"]};return(0,Bi.Z)(i,Np,t)}(O);return(0,li.jsxs)(Lp,(0,ai.Z)({component:"span",className:(0,Li.Z)(L.root,i),centerRipple:!0,focusRipple:!c,disabled:D,tabIndex:null,role:void 0,onFocus:function(e){m&&m(e),P&&P.onFocus&&P.onFocus(e)},onBlur:function(e){b&&b(e),P&&P.onBlur&&P.onBlur(e)},ownerState:O,ref:t},A,{children:[(0,li.jsx)(Bp,(0,ai.Z)({autoFocus:r,checked:n,defaultChecked:o,className:L.input,disabled:D,id:N?h:void 0,name:y,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;I(t),g&&g(e,t)}},readOnly:w,ref:v,required:x,ownerState:O,tabIndex:_,type:E},"checkbox"===E&&void 0===S?{}:{value:S},d)),R?a:p]}))})),Up=Mp,jp=(0,Vf.Z)((0,li.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Fp=(0,Vf.Z)((0,li.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),zp=(0,Vf.Z)((0,li.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Zp(e){return(0,Mi.Z)("MuiCheckbox",e)}var qp=(0,To.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Vp=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Kp=(0,ho.ZP)(Up,{shouldForwardProp:function(e){return(0,ho.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.indeterminate&&t.indeterminate,"default"!==r.color&&t["color".concat((0,Co.Z)(r.color))]]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,ai.Z)({color:(r.vars||r).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:r.vars?"rgba(".concat("default"===n.color?r.vars.palette.action.activeChannel:r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,Fo.Fq)("default"===n.color?r.palette.action.active:r.palette[n.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&(t={},(0,oi.Z)(t,"&.".concat(qp.checked,", &.").concat(qp.indeterminate),{color:(r.vars||r).palette[n.color].main}),(0,oi.Z)(t,"&.".concat(qp.disabled),{color:(r.vars||r).palette.action.disabled}),t))})),Hp=(0,li.jsx)(Fp,{}),Wp=(0,li.jsx)(jp,{}),Gp=(0,li.jsx)(zp,{}),Yp=mn.forwardRef((function(e,t){var r,n,a=(0,wi.Z)({props:e,name:"MuiCheckbox"}),i=a.checkedIcon,o=void 0===i?Hp:i,s=a.color,u=void 0===s?"primary":s,c=a.icon,l=void 0===c?Wp:c,f=a.indeterminate,p=void 0!==f&&f,h=a.indeterminateIcon,d=void 0===h?Gp:h,v=a.inputProps,y=a.size,b=void 0===y?"medium":y,g=a.className,m=(0,ii.Z)(a,Vp),w=p?d:l,k=p?d:o,x=(0,ai.Z)({},a,{color:u,indeterminate:p,size:b}),_=function(e){var t=e.classes,r=e.indeterminate,n=e.color,a=e.size,i={root:["root",r&&"indeterminate","color".concat((0,Co.Z)(n)),"size".concat((0,Co.Z)(a))]},o=(0,Bi.Z)(i,Zp,t);return(0,ai.Z)({},t,o)}(x);return(0,li.jsx)(Kp,(0,ai.Z)({type:"checkbox",inputProps:(0,ai.Z)({"data-indeterminate":p},v),icon:mn.cloneElement(w,{fontSize:null!=(r=w.props.fontSize)?r:b}),checkedIcon:mn.cloneElement(k,{fontSize:null!=(n=k.props.fontSize)?n:b}),ownerState:x,ref:t,className:(0,Li.Z)(_.root,g)},m,{classes:_}))}));function Qp(e){return(0,Mi.Z)("MuiIconButton",e)}var Jp=(0,To.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Xp=["edge","children","className","color","disabled","disableFocusRipple","size"],$p=(0,ho.ZP)(js,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,"default"!==r.color&&t["color".concat((0,Co.Z)(r.color))],r.edge&&t["edge".concat((0,Co.Z)(r.edge))],t["size".concat((0,Co.Z)(r.size))]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Fo.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===r.edge&&{marginLeft:"small"===r.size?-3:-12},"end"===r.edge&&{marginRight:"small"===r.size?-3:-12})}),(function(e){var t,r=e.theme,n=e.ownerState,a=null==(t=(r.vars||r).palette)?void 0:t[n.color];return(0,ai.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,ai.Z)({color:null==a?void 0:a.main},!n.disableRipple&&{"&:hover":(0,ai.Z)({},a&&{backgroundColor:r.vars?"rgba(".concat(a.mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,Fo.Fq)(a.main,r.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:r.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:r.typography.pxToRem(28)},(0,oi.Z)({},"&.".concat(Jp.disabled),{backgroundColor:"transparent",color:(r.vars||r).palette.action.disabled}))})),eh=mn.forwardRef((function(e,t){var r=(0,wi.Z)({props:e,name:"MuiIconButton"}),n=r.edge,a=void 0!==n&&n,i=r.children,o=r.className,s=r.color,u=void 0===s?"default":s,c=r.disabled,l=void 0!==c&&c,f=r.disableFocusRipple,p=void 0!==f&&f,h=r.size,d=void 0===h?"medium":h,v=(0,ii.Z)(r,Xp),y=(0,ai.Z)({},r,{edge:a,color:u,disabled:l,disableFocusRipple:p,size:d}),b=function(e){var t=e.classes,r=e.disabled,n=e.color,a=e.edge,i=e.size,o={root:["root",r&&"disabled","default"!==n&&"color".concat((0,Co.Z)(n)),a&&"edge".concat((0,Co.Z)(a)),"size".concat((0,Co.Z)(i))]};return(0,Bi.Z)(o,Qp,t)}(y);return(0,li.jsx)($p,(0,ai.Z)({className:(0,Li.Z)(b.root,o),centerRipple:!0,focusRipple:!p,disabled:l,ref:t,ownerState:y},v,{children:i}))})),th=__webpack_require__(260),rh=__webpack_require__(3385),nh=__webpack_require__(7227),ah=__webpack_require__(1130);function ih(e){var t=e.label,r=e.ability,n=r.score,a=r.modifier,i=r.die,o={height:"calc(.75in / 2 - 5px)",borderRadius:"4px",border:"1px dotted black",position:"relative"},s={fontSize:"8px",width:"36px",textAlign:"center",pb:"18px"};return(0,li.jsx)(_o,{sx:{width:".75in",height:".75in",borderRadius:"4px",border:"1px solid black",p:"2px"},children:(0,li.jsxs)(yo,{container:!0,spacing:.5,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsxs)(_o,{sx:o,children:[(0,li.jsx)(_o,{sx:{fontSize:"10px",width:"32px",position:"absolute",top:-10,right:15.5,border:"1px solid black",borderRadius:"4px",backgroundColor:"white",textAlign:"center"},children:t}),(0,li.jsxs)(yo,{container:!0,alignItems:"end",justifyContent:"center",sx:{pt:.6},children:[(0,li.jsx)(yo,{xs:6,sx:{textAlign:"center"},children:(0,li.jsx)(nh.Z,{sx:{fontSize:"20px"}})}),(0,li.jsx)(yo,{xs:6,sx:{fontSize:"18px",textAlign:"center"},children:n})]})]})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(_o,{sx:o,children:(0,li.jsxs)(yo,{container:!0,alignItems:"end",justifyContent:"center",sx:{height:".5in"},children:[(0,li.jsxs)(_o,{sx:{fontSize:"12px"},children:[n>11&&"+",n&&a]}),(0,li.jsx)(_o,{sx:s,children:"MOD"})]})})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(_o,{sx:o,children:(0,li.jsxs)(yo,{container:!0,alignItems:"end",justifyContent:"center",sx:{height:".5in"},children:[(0,li.jsx)(_o,{sx:{fontSize:"12px"},children:i}),(0,li.jsx)(_o,{sx:s,children:"DIE"})]})})})]})})}function oh(e){var t=e.label,r=e.ability,n=e.state,a=e.onClick,i=mn.useState(n),o=(0,wn.Z)(i,2),s=o[0],u=o[1];return(0,li.jsxs)(yo,{container:!0,justifyContent:"center",children:[(0,li.jsx)(yo,{xs:"auto",pr:2,children:(0,li.jsx)(eh,{onClick:function(){var e=Number(s)-1;u(e),a((0,oi.Z)({},r,e))},children:(0,li.jsx)(th.Z,{sx:{color:"#000"}})})}),(0,li.jsx)(_o,{sx:{height:"calc(.5in + 7px)"},children:(0,li.jsx)(_o,{sx:{width:"0.5in",height:".50in",borderRadius:"4px",border:"1px solid black",p:"2px"},children:(0,li.jsx)(_o,{sx:{width:"calc(.50in - 6px)",height:"calc(.50in - 6px)",borderRadius:"4px",border:"1px dotted black",pt:"3px"},children:(0,li.jsxs)(yo,{container:!0,alignItems:"end",justifyContent:"center",sx:{height:".5in"},children:[(0,li.jsxs)(_o,{sx:{fontSize:"18px"},children:[s>0&&"+",s||"0"]}),(0,li.jsx)(_o,{sx:{fontSize:"10px",px:"3px",width:"30px",textAlign:"center",border:"1px solid black",borderRadius:"4px",backgroundColor:"white"},children:t})]})})})}),(0,li.jsx)(yo,{xs:"auto",pl:2,children:(0,li.jsx)(eh,{onClick:function(){var e=Number(s)+1;u(e),a((0,oi.Z)({},r,e))},children:(0,li.jsx)(rh.Z,{sx:{color:"#000"}})})})]})}function sh(e){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),(0,li.jsx)(Yp,{icon:(0,li.jsx)(nh.Z,{}),checkedIcon:(0,li.jsx)(ah.Z,{})})}function uh(e){var t=e.character,r=e.submit,n=e.close,a=mn.useState(So({},t.abilityScoreChanges||{})),i=(0,wn.Z)(a,2),o=i[0],s=i[1],u=function(e){s(So(So({},o),e))};return(0,li.jsx)(_o,{p:2,sx:{maxWidth:560},children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Oo,{variant:"h5",sx:{textAlign:"center",pb:2},children:"Ability Scores"})}),(0,li.jsxs)(yo,{xs:4,container:!0,justifyContent:"center",alignItems:"center",children:[(0,li.jsxs)(Oo,{sx:{fontSize:"9px",textAlign:"center"},children:["Saving Throw ",(0,li.jsx)("br",{}),"Proficiency"]}),(0,li.jsx)(sh,{})]}),(0,li.jsxs)(yo,{xs:4,container:!0,justifyContent:"center",alignItems:"center",children:[(0,li.jsxs)(Oo,{sx:{fontSize:"9px",textAlign:"center"},children:["Saving Throw ",(0,li.jsx)("br",{}),"Proficiency"]}),(0,li.jsx)(sh,{})]}),(0,li.jsxs)(yo,{xs:4,container:!0,justifyContent:"center",alignItems:"center",children:[(0,li.jsxs)(Oo,{sx:{fontSize:"9px",textAlign:"center"},children:["Saving Throw ",(0,li.jsx)("br",{}),"Proficiency"]}),(0,li.jsx)(sh,{})]}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(oh,{label:"DEX",ability:"dexterity",state:o.dexterity,onClick:u})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(oh,{label:"STR",ability:"strength",state:o.strength,onClick:u})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(oh,{label:"CON",ability:"constitution",state:o.constitution,onClick:u})}),(0,li.jsx)(yo,{xs:12}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(oh,{label:"INT",ability:"intelligence",state:o.intelligence,onClick:u})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(oh,{label:"WIS",ability:"wisdom",state:o.wisdom,onClick:u})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(oh,{label:"CHA",ability:"charisma",state:o.charisma,onClick:u})}),(0,li.jsxs)(yo,{xs:4,container:!0,justifyContent:"center",alignItems:"center",children:[(0,li.jsxs)(Oo,{sx:{fontSize:"9px",textAlign:"center"},children:["Saving Throw ",(0,li.jsx)("br",{}),"Proficiency"]}),(0,li.jsx)(sh,{})]}),(0,li.jsxs)(yo,{xs:4,container:!0,justifyContent:"center",alignItems:"center",children:[(0,li.jsxs)(Oo,{sx:{fontSize:"9px",textAlign:"center"},children:["Saving Throw ",(0,li.jsx)("br",{}),"Proficiency"]}),(0,li.jsx)(sh,{})]}),(0,li.jsxs)(yo,{xs:4,container:!0,justifyContent:"center",alignItems:"center",children:[(0,li.jsxs)(Oo,{sx:{fontSize:"9px",textAlign:"center"},children:["Saving Throw ",(0,li.jsx)("br",{}),"Proficiency"]}),(0,li.jsx)(sh,{})]}),(0,li.jsx)(yo,{xs:12}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){r(So({},o))},children:"Continue"})})]})})}function ch(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=function(){i(!1)};return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:o,open:a,children:(0,li.jsx)(uh,{character:t,submit:function(e){o(),e&&t.updateMany([["abilityScoreChanges",e]])},close:o})}),(0,li.jsx)(vu,{onClick:function(){i(!0)},sx:{height:"162px"},children:(0,li.jsxs)(yo,{container:!0,children:[(0,li.jsx)(yo,{xs:4,container:!0,justifyContent:"start",children:(0,li.jsx)(ih,{label:"DEX",ability:t.level&&t.dexterity})}),(0,li.jsx)(yo,{xs:4,container:!0,justifyContent:"center",children:(0,li.jsx)(ih,{label:"STR",ability:t.level&&t.strength})}),(0,li.jsx)(yo,{xs:4,container:!0,justifyContent:"end",children:(0,li.jsx)(ih,{label:"CON",ability:t.level&&t.constitution})}),(0,li.jsx)(yo,{xs:12,pt:2}),(0,li.jsx)(yo,{xs:4,container:!0,justifyContent:"start",children:(0,li.jsx)(ih,{label:"INT",ability:t.level&&t.intelligence})}),(0,li.jsx)(yo,{xs:4,container:!0,justifyContent:"center",children:(0,li.jsx)(ih,{label:"WIS",ability:t.level&&t.wisdom})}),(0,li.jsx)(yo,{xs:4,container:!0,justifyContent:"end",children:(0,li.jsx)(ih,{label:"CHA",ability:t.level&&t.charisma})})]})})]})}var lh=__webpack_require__(1184),fh=__webpack_require__(5682),ph=["component","direction","spacing","divider","children","className","useFlexGap"],hh=(0,Hi.Z)(),dh=ji("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,t){return t.root}});function vh(e){return(0,Fi.Z)({props:e,name:"MuiStack",defaultTheme:hh})}function yh(e,t){var r=mn.Children.toArray(e).filter(Boolean);return r.reduce((function(e,n,a){return e.push(n),a<r.length-1&&e.push(mn.cloneElement(t,{key:"separator-".concat(a)})),e}),[])}var bh=function(e){var t=e.ownerState,r=e.theme,n=(0,ai.Z)({display:"flex",flexDirection:"column"},(0,lh.k9)({theme:r},(0,lh.P$)({values:t.direction,breakpoints:r.breakpoints.values}),(function(e){return{flexDirection:e}})));if(t.spacing){var a=(0,fh.hB)(r),i=Object.keys(r.breakpoints.values).reduce((function(e,r){return("object"===typeof t.spacing&&null!=t.spacing[r]||"object"===typeof t.direction&&null!=t.direction[r])&&(e[r]=!0),e}),{}),o=(0,lh.P$)({values:t.direction,base:i}),s=(0,lh.P$)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach((function(e,t,r){if(!o[e]){var n=t>0?o[r[t-1]]:"column";o[e]=n}}));n=(0,zi.Z)(n,(0,lh.k9)({theme:r},s,(function(e,r){return t.useFlexGap?{gap:(0,fh.NA)(a,e)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":(0,oi.Z)({},"margin".concat((n=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[n])),(0,fh.NA)(a,e))};var n})))}return n=(0,lh.dt)(r.breakpoints,n)};var gh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createStyledComponent,r=void 0===t?dh:t,n=e.useThemeProps,a=void 0===n?vh:n,i=e.componentName,o=void 0===i?"MuiStack":i,s=r(bh),u=mn.forwardRef((function(e,t){var r=Ki(a(e)),n=r.component,i=void 0===n?"div":n,u=r.direction,c=void 0===u?"column":u,l=r.spacing,f=void 0===l?0:l,p=r.divider,h=r.children,d=r.className,v=r.useFlexGap,y=void 0!==v&&v,b=(0,ii.Z)(r,ph),g={direction:c,spacing:f,useFlexGap:y},m=(0,Bi.Z)({root:["root"]},(function(e){return(0,Mi.Z)(o,e)}),{});return(0,li.jsx)(s,(0,ai.Z)({as:i,ownerState:g,ref:t,className:(0,Li.Z)(m.root,d)},b,{children:p?yh(h,p):h}))}));return u}({createStyledComponent:(0,ho.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,t){return t.root}}),useThemeProps:function(e){return(0,wi.Z)({props:e,name:"MuiStack"})}}),mh=gh;function wh(e){return(0,Mi.Z)("MuiFormControlLabel",e)}var kh=(0,To.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),xh=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],_h=(0,ho.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[(0,oi.Z)({},"& .".concat(kh.label),t.label),t.root,t["labelPlacement".concat((0,Co.Z)(r.labelPlacement))]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,ai.Z)((0,oi.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(kh.disabled),{cursor:"default"}),"start"===r.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===r.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===r.labelPlacement&&{flexDirection:"column",marginLeft:16},(0,oi.Z)({},"& .".concat(kh.label),(0,oi.Z)({},"&.".concat(kh.disabled),{color:(t.vars||t).palette.text.disabled})))})),Eh=(0,ho.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,oi.Z)({},"&.".concat(kh.error),{color:(t.vars||t).palette.error.main})})),Sh=mn.forwardRef((function(e,t){var r,n,a=(0,wi.Z)({props:e,name:"MuiFormControlLabel"}),i=a.className,o=a.componentsProps,s=void 0===o?{}:o,u=a.control,c=a.disabled,l=a.disableTypography,f=a.label,p=a.labelPlacement,h=void 0===p?"end":p,d=a.required,v=a.slotProps,y=void 0===v?{}:v,b=(0,ii.Z)(a,xh),g=Lu(),m=null!=(r=null!=c?c:u.props.disabled)?r:null==g?void 0:g.disabled,w=null!=d?d:u.props.required,k={disabled:m,required:w};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof u.props[e]&&"undefined"!==typeof a[e]&&(k[e]=a[e])}));var x=Nu({props:a,muiFormControl:g,states:["error"]}),_=(0,ai.Z)({},a,{disabled:m,labelPlacement:h,required:w,error:x.error}),E=function(e){var t=e.classes,r=e.disabled,n=e.labelPlacement,a=e.error,i=e.required,o={root:["root",r&&"disabled","labelPlacement".concat((0,Co.Z)(n)),a&&"error",i&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",a&&"error"]};return(0,Bi.Z)(o,wh,t)}(_),S=null!=(n=y.typography)?n:s.typography,A=f;return null==A||A.type===Oo||l||(A=(0,li.jsx)(Oo,(0,ai.Z)({component:"span"},S,{className:(0,Li.Z)(E.label,null==S?void 0:S.className),children:A}))),(0,li.jsxs)(_h,(0,ai.Z)({className:(0,Li.Z)(E.root,i),ownerState:_,ref:t},b,{children:[mn.cloneElement(u,k),w?(0,li.jsxs)(mh,{direction:"row",alignItems:"center",children:[A,(0,li.jsxs)(Eh,{ownerState:_,"aria-hidden":!0,className:E.asterisk,children:["\u2009","*"]})]}):A]}))}));function Ah(e){var t=e.label,r=e.state,n=e.onClick,a="half"===r,i="full"===r,o={backgroundColor:(a||i)&&"black",color:(a||i)&&"white",p:1},s={backgroundColor:i&&"black",color:i&&"white",p:1};return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)(js,{sx:{width:"100%",textAlign:"left",fontSize:"12px",border:"1px solid black",borderRadius:"4px",overflow:"hidden"},onClick:n,children:(0,li.jsxs)(yo,{container:!0,sx:{width:"100%"},justifyContent:"left",children:[(0,li.jsx)(yo,{xs:6,sx:o,children:t}),(0,li.jsx)(yo,{xs:6,container:!0,sx:s,justifyContent:"end",children:i?"Full":a?"Half":""})]})})})}function Ch(e){var t=e.character,r=e.index,n=e.close,a=function(e){var t=mn.useState(e),r=(0,wn.Z)(t,2),n=r[0],a=r[1];return{state:n,updateState:function(e,t){a(So(So({},n),{},(0,oi.Z)({},e,t)))},updateDeepState:function(e,t,r){a(So(So({},n),{},(0,oi.Z)({},e,So(So({},n[e]),{},(0,oi.Z)({},t,r)))))},setState:a}}(So({name:"",expert:!1,score:"",abilities:{dexterity:"",strength:"",constitution:"",intelligence:"",wisdom:"",charisma:""}},void 0!==r?t.proficiencies[r]:{})),i=a.state,o=a.updateState,s=a.updateDeepState;function u(e){console.log({state:i,ability:e});var t=i.abilities[e];""===t?t="half":"half"===t?t="full":"full"===t&&(t=""),s("abilities",e,t)}return(0,li.jsx)(li.Fragment,{children:(0,li.jsxs)(yo,{container:!0,spacing:2,sx:{maxWidth:"520px"},children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,label:"Proficiency Name",value:i.name,onChange:function(e){return o("name",e.target.value)}})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(ip,{fullWidth:!0,label:"Score",type:"number",value:i.score,onChange:function(e){return o("score",e.target.value)}})}),(0,li.jsx)(yo,{xs:4,container:!0,justifyContent:"center",alignItems:"center",children:(0,li.jsx)(Sh,{control:(0,li.jsx)(Yp,{checked:i.expert,onChange:function(e){return o("expert",e.target.checked)}}),label:"Expert (+"+(t.proficiencyBonus||"2")+")"})}),(0,li.jsx)(yo,{xs:4}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Jo,{textAlign:"left",children:"Abilities"})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(Ah,{label:"Constitution",state:i.abilities.constitution,onClick:function(){return u("constitution")}})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(Ah,{label:"Strength",state:i.abilities.strength,onClick:function(){return u("strength")}})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(Ah,{label:"Dexterity",state:i.abilities.dexterity,onClick:function(){return u("dexterity")}})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(Ah,{label:"Intelligence",state:i.abilities.intelligence,onClick:function(){return u("intelligence")}})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(Ah,{label:"Wisdom",state:i.abilities.wisdom,onClick:function(){return u("wisdom")}})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)(Ah,{label:"Charisma",state:i.abilities.charisma,onClick:function(){return u("charisma")}})}),(0,li.jsxs)(yo,{xs:12,container:!0,children:[(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){console.log(i),function(){if(n(),void 0===r)t.update("proficiencies",[].concat((0,kn.Z)(t.proficiencies),[i]));else{var e=(0,kn.Z)(t.proficiencies);e[r]=i,t.update("proficiencies",e)}}()},children:"Continue"})})]})]})})}function Th(e){var t=e.specialization,r=e.proficiencyBonus,n=t.name,a=t.score,i=t.expert,o=t.abilities,s=Object.keys(o),u=!0,c=!0;s.forEach((function(e){"full"===o[e]&&(u=!1),"half"===o[e]&&(c=!1)}));function l(){return(0,li.jsx)(_o,{sx:{position:"absolute",top:-2,left:-2,backgroundColor:i?"grey":"white",border:"1px solid black",borderRadius:12,width:12,height:12}})}var f=Number(a)+(i?Number(r):0);return(0,li.jsx)(li.Fragment,{children:(0,li.jsxs)(yo,{container:!0,xs:12,sx:{py:.115,fontSize:"9px",position:"relative"},children:[(0,li.jsx)(l,{}),(0,li.jsx)(yo,{xs:"auto",pr:.5,container:!0,justifyContent:"center",alignItems:"center",children:(0,li.jsxs)(_o,{sx:{width:"28px",fontSize:"12px",fontWeight:"bold",border:"1px solid black",borderRadius:"6px",textAlign:"center",py:.75},children:[f>0&&"+",f||(0,li.jsx)(li.Fragment,{children:"\xa0"})]})}),(0,li.jsxs)(yo,{xs:!0,container:!0,children:[(0,li.jsx)(yo,{xs:12,sx:{fontWeight:"bold"},children:n}),(0,li.jsxs)(yo,{xs:12,sx:{pt:.25,display:u&&c&&"none"},container:!0,children:[(0,li.jsxs)(yo,{xs:"auto",sx:{display:u&&"none"},children:[(0,li.jsx)(_o,{component:"span",children:"(Full)\xa0"}),Object.keys(o).map((function(e){return"full"===o[e]?(0,li.jsxs)("span",{children:[e.slice(0,3).toUpperCase(),"\xa0"]},e):null})),(0,li.jsx)(_o,{component:"span",sx:{display:c&&"none"},children:"\xa0\xa0\xa0"})]}),(0,li.jsxs)(yo,{xs:"auto",sx:{display:c&&"none"},children:[(0,li.jsx)(_o,{component:"span",children:"(Half)\xa0"}),Object.keys(o).map((function(e){return"half"===o[e]?(0,li.jsxs)("span",{children:[e.slice(0,3).toUpperCase(),"\xa0"]},e):null}))]})]})]})]})})}function Rh(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=mn.useState(),s=(0,wn.Z)(o,2),u=s[0],c=s[1],l=function(e){c(e),i(!0)},f=function(){i(!1)};return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:f,open:a,children:(0,li.jsx)(_o,{p:2,children:(0,li.jsx)(Ch,{character:t,index:u,close:f})})}),(0,li.jsxs)(_o,{sx:{width:"100%"},children:[t.proficiencies.map((function(e,r){return(0,li.jsx)(mn.Fragment,{children:(0,li.jsx)(vu,{square:!0,sx:{p:.57,display:"flex !important",alignItems:"flex-start !important",zIndex:2},onClick:function(){return l(r)},children:(0,li.jsx)(Th,{specialization:e,proficiencyBonus:t.proficiencyBonus})})},r)})),(0,li.jsx)(_o,{displayPrint:"none",sx:{display:11===t.proficiencies.length&&"none"},children:(0,li.jsx)(yo,{container:!0,children:(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(vu,{square:!0,sx:So(So({p:1},{display:"flex !important",alignItems:"flex-start !important"}),{},{textAlign:"center"}),onClick:function(){return l()},children:(0,li.jsx)(Oo,{sx:{fontSize:"11px"},children:"+ add proficiency"})})})})})]})]})}function Ih(e){var t=e.character,r=e.submit,n=e.close,a=mn.useState(t.inspiration||""),i=(0,wn.Z)(a,2),o=i[0],s=i[1];return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)(_o,{sx:{p:2,maxWidth:256},children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,type:"number",label:"Inspiration",value:o,onChange:function(e){return s(e.target.value)}})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){r(o)},children:"Continue"})})]})})})}function Ph(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=function(){i(!1)};return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:o,open:a,children:(0,li.jsx)(Ih,{character:t,submit:function(e){o(),e&&t.updateMany([["inspiration",e]])},close:o})}),(0,li.jsx)(vu,{onClick:function(){i(!0)},children:(0,li.jsx)(yu,{label:"Inspiration",value:t.inspiration})})]})}function Dh(e){var t=e.character,r=e.submit,n=e.close,a=mn.useState(t.speed||""),i=(0,wn.Z)(a,2),o=i[0],s=i[1];return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)(_o,{sx:{p:2,maxWidth:256},children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,type:"number",label:"Speed",value:o,onChange:function(e){return s(e.target.value)}})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){r(o)},children:"Continue"})})]})})})}function Nh(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=function(){i(!1)};return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:o,open:a,children:(0,li.jsx)(Dh,{character:t,submit:function(e){o(),e&&t.updateMany([["speed",e]])},close:o})}),(0,li.jsx)(vu,{onClick:function(){i(!0)},children:(0,li.jsx)(yu,{label:"Speed",value:t.speed,orientation:"right"})})]})}function Oh(e){var t=e.character,r=e.submit,n=e.close,a=mn.useState(t.dodgeClass||""),i=(0,wn.Z)(a,2),o=i[0],s=i[1];return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)(_o,{sx:{p:2,maxWidth:256},children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,type:"number",label:"Dodge Class",value:o,onChange:function(e){return s(e.target.value)}})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){r(o)},children:"Continue"})})]})})})}function Lh(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=function(){i(!1)};return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:o,open:a,children:(0,li.jsx)(Oh,{character:t,submit:function(e){o(),e&&t.updateMany([["dodgeClass",e]])},close:o})}),(0,li.jsx)(vu,{onClick:function(){i(!0)},children:(0,li.jsx)(yu,{label:"Dodge Class",value:t.dodgeClass,orientation:"right"})})]})}function Bh(e){var t=e.character,r=e.submit,n=e.close,a=mn.useState(t.initiativeBonus||""),i=(0,wn.Z)(a,2),o=i[0],s=i[1];return(0,li.jsx)(li.Fragment,{children:(0,li.jsx)(_o,{sx:{p:2,maxWidth:256},children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ip,{fullWidth:!0,type:"number",label:"Initiative Bonuses",value:o,onChange:function(e){return s(e.target.value)}})}),(0,li.jsx)(yo,{xs:12,p:0}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:n,children:"cancel"})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)(Ys,{fullWidth:!0,variant:"outlined",sx:{py:2},onClick:function(){r(o)},children:"Continue"})})]})})})}function Mh(e){var t=e.character,r=mn.useState(!1),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=function(){i(!1)},s=t.level&&(t.initiative>0&&"+")+t.initiative;return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(dp,{onClose:o,open:a,children:(0,li.jsx)(Bh,{character:t,submit:function(e){o(),e&&t.updateMany([["initiativeBonus",e]])},close:o})}),(0,li.jsx)(vu,{onClick:function(){i(!0)},children:(0,li.jsx)(yu,{label:"Initiative",value:s})})]})}function Uh(e){var t=e.character;return console.log(t),(0,li.jsx)(Ao,{size:"Letter",margin:"0.5in",children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Dp,{character:t})}),(0,li.jsxs)(yo,{xs:12,container:!0,children:[(0,li.jsx)(yo,{xs:!0,children:(0,li.jsx)("div",{children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsxs)(yo,{xs:12,container:!0,children:[(0,li.jsx)(yo,{xs:!0,children:(0,li.jsx)(Ph,{character:t})}),(0,li.jsx)(yo,{xs:6.8,children:(0,li.jsx)(yu,{label:"Proficiency Bonus",value:t.level&&"+"+t.class.proficiencyBonus,orientation:"right"})})]}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(ch,{character:t})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)($s,{label:"Skills ",sx:{height:431,overflow:"hidden"},children:(0,li.jsx)(Rh,{character:t})})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(vu,{children:(0,li.jsx)(yu,{label:"Passive Perception",orientation:"right"})})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)($s,{label:"Other Proficiencies & Languages",sx:{height:184},children:(0,li.jsx)(vu,{onClick:null})})})]})})}),(0,li.jsx)(yo,{xs:4,children:(0,li.jsx)("div",{children:(0,li.jsxs)(yo,{container:!0,spacing:2,children:[(0,li.jsxs)(yo,{container:!0,children:[(0,li.jsxs)(yo,{xs:!0,container:!0,spacing:1,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Mh,{character:t})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(yu,{label:"Death Saves"})})]}),(0,li.jsxs)(yo,{xs:!0,container:!0,spacing:1,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Nh,{character:t})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Lh,{character:t})})]})]}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)($s,{label:"Hit Points",sx:{height:80},children:(0,li.jsx)(vu,{children:(0,li.jsxs)(Oo,{sx:{pl:.5,pt:.9,fontSize:"9px",borderBottom:"1px solid black"},children:["Max: ",t.maxHitPoints||""]})})})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)($s,{label:"Temporary HP",sx:{height:80}})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)($s,{label:"Ego",sx:{height:80},children:(0,li.jsx)(vu,{children:(0,li.jsxs)(Oo,{sx:{pl:.5,pt:.9,fontSize:"9px",borderBottom:"1px solid black"},children:["Max: ",""]})})})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)($s,{label:"Temporary Ego",sx:{height:80}})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)($s,{label:"Hit Dice",sx:{height:80},children:(0,li.jsx)(vu,{children:(0,li.jsxs)(Oo,{sx:{pl:.5,pt:.9,fontSize:"9px",borderBottom:"1px solid black"},children:["Max: ",""]})})})}),(0,li.jsx)(yo,{xs:6,children:(0,li.jsx)($s,{label:"Damage Reduction",sx:{height:80},children:(0,li.jsx)(vu,{onClick:null})})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)($s,{label:"Attacks and Spellcasting",sx:{height:277},children:(0,li.jsx)(vu,{onClick:null})})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)($s,{label:"Equipment",sx:{height:236},children:(0,li.jsx)(vu,{onClick:null})})})]})})}),(0,li.jsxs)(yo,{xs:!0,container:!0,children:[(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(Ip,{character:t})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)(yp,{character:t})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)($s,{label:"Core Values",extraLabels:(0,li.jsx)(Xs,{left:"182px",children:"Cnv."}),sx:{height:284},children:(0,li.jsx)(vu,{onClick:null,children:(0,li.jsx)(gu,{character:t})})})}),(0,li.jsx)(yo,{xs:12,children:(0,li.jsx)($s,{label:"Feats",sx:{height:420},children:(0,li.jsx)(vu,{onClick:null,children:(0,li.jsx)(mu,{character:t})})})})]})]})]})})}function jh(e){e.roster;var t=La(),r=Tp();function n(){return(0,li.jsx)(Ys,{onClick:function(){return t("/home")},sx:{color:"white",borderRadius:0},size:"large",startIcon:(0,li.jsx)(Js.Z,{}),children:"Home"})}function a(){return(0,li.jsx)(Ys,{onClick:function(){window.print()},sx:{color:"white",borderRadius:0},size:"large",startIcon:(0,li.jsx)(Qs.Z,{}),children:"Print"})}return(0,li.jsxs)(li.Fragment,{children:[(0,li.jsx)(_o,{displayPrint:"none",sx:{zIndex:3,position:"absolute",top:"8px",left:"0.5in",width:"216mm",color:"white"},children:(0,li.jsxs)(yo,{container:!0,children:[(0,li.jsx)(yo,{xs:"auto",children:(0,li.jsx)(n,{})}),(0,li.jsx)(yo,{xs:"auto"}),(0,li.jsx)(yo,{xs:!0}),(0,li.jsx)(yo,{xs:"auto",children:(0,li.jsx)(a,{})})]})}),(0,li.jsx)(_o,{sx:{p:"0.5in",pt:"calc(.5in + 8px)","@media print":{minWidth:"100%",m:0,p:0}},children:(0,li.jsx)(Uh,{character:r})})]})}function Fh(){Fh=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,o=Object.create(i.prototype),s=new I(n||[]);return a(o,"_invoke",{value:A(e,r,s)}),o}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",v="completed",y={};function b(){}function g(){}function m(){}var w={};c(w,o,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(P([])));x&&x!==r&&n.call(x,o)&&(w=x);var _=m.prototype=b.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(a,i,o,s){var u=f(e[a],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==(0,In.Z)(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return i=i?i.then(a,a):a()}})}function A(t,r,n){var a=p;return function(i,o){if(a===d)throw new Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:e,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=d;var c=f(t,r,n);if("normal"===c.type){if(a=n.done?v:h,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=v,n.method="throw",n.arg=c.arg)}}}function C(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError((0,In.Z)(t)+" is not iterable")}return g.prototype=m,a(_,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:g,configurable:!0}),g.displayName=c(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},E(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new S(l(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(_),c(_,u,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function zh(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}function Zh(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){zh(i,n,a,o,s,"next",e)}function s(e){zh(i,n,a,o,s,"throw",e)}o(void 0)}))}}function qh(e,t){this.v=e,this.k=t}function Vh(e){var t,r;function n(t,r){try{var i=e[t](r),o=i.value,s=o instanceof qh;Promise.resolve(s?o.v:o).then((function(r){if(s){var u="return"===t?"return":"next";if(!o.k||r.done)return n(u,r);r=e[u](r).value}a(i.done?"return":"normal",r)}),(function(e){n("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise((function(i,o){var s={key:e,arg:a,resolve:i,reject:o,next:null};r?r=r.next=s:(t=r=s,n(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function Kh(e){return function(){return new Vh(e.apply(this,arguments))}}Vh.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Vh.prototype.next=function(e){return this._invoke("next",e)},Vh.prototype.throw=function(e){return this._invoke("throw",e)},Vh.prototype.return=function(e){return this._invoke("return",e)};var Hh=__webpack_require__(9842),Wh=__webpack_require__(6927),Gh=__webpack_require__(8392);var Yh=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Qh=Yh,Jh=(new Uint8Array(0),function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}()),Xh=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return ed(this,e)}}]),e}(),$h=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return ed(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),ed=function(e,t){return new $h(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},td=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Jh(t,r,n),this.decoder=new Xh(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),rd=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new td(t,r,n,a)},nd=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Qh(n,r),i=a.encode,o=a.decode;return rd({prefix:t,name:r,encode:i,decode:function(e){return function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}(o(e))}})},ad=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return rd({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},id=nd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),od=(nd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ad({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),sd=(ad({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ad({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ad({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ad({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ad({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ad({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ad({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ad({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ad({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}));ad({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ad({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ad({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function ud(e){var t=function(e){var t=function(){};return t.enabled=!1,t.color="",t.diff=0,t.log=function(){},t.namespace=e,t.destroy=function(){return!0},t.extend=function(){return t},t}("".concat(e,":trace"));return Gh.enabled("".concat(e,":trace"))&&null!=Gh.names.map((function(e){return e.toString()})).find((function(e){return e.includes(":trace")}))&&(t=Gh("".concat(e,":trace"))),Object.assign(Gh(e),{error:Gh("".concat(e,":error")),trace:t})}Gh.formatters.b=function(e){return null==e?"undefined":id.baseEncode(e)},Gh.formatters.t=function(e){return null==e?"undefined":od.baseEncode(e)},Gh.formatters.m=function(e){return null==e?"undefined":sd.baseEncode(e)},Gh.formatters.p=function(e){return null==e?"undefined":e.toString()},Gh.formatters.c=function(e){return null==e?"undefined":e.toString()},Gh.formatters.k=function(e){return null==e?"undefined":e.toString()};var cd=__webpack_require__(7963),ld=__webpack_require__(886),fd=ld.Reader,pd=ld.Writer,hd=ld.util,dd=ld.roots["ipfs-unixfs"]||(ld.roots["ipfs-unixfs"]={}),vd=dd.Data=function(){function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Type=0,e.prototype.Data=hd.newBuffer([]),e.prototype.filesize=hd.Long?hd.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=hd.emptyArray,e.prototype.hashType=hd.Long?hd.Long.fromBits(0,0,!0):0,e.prototype.fanout=hd.Long?hd.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=pd.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var r=0;r<e.blocksizes.length;++r)t.uint32(32).uint64(e.blocksizes[r]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&dd.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof fd||(e=fd.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new dd.Data;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),2===(7&a))for(var i=e.uint32()+e.pos;e.pos<i;)n.blocksizes.push(e.uint64());else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=dd.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&a)}}if(!n.hasOwnProperty("Type"))throw hd.ProtocolError("missing required 'Type'",{instance:n});return n},e.fromObject=function(e){if(e instanceof dd.Data)return e;var t=new dd.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"===typeof e.Data?hd.base64.decode(e.Data,t.Data=hd.newBuffer(hd.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(hd.Long?(t.filesize=hd.Long.fromValue(e.filesize)).unsigned=!0:"string"===typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"===typeof e.filesize?t.filesize=e.filesize:"object"===typeof e.filesize&&(t.filesize=new hd.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r)hd.Long?(t.blocksizes[r]=hd.Long.fromValue(e.blocksizes[r])).unsigned=!0:"string"===typeof e.blocksizes[r]?t.blocksizes[r]=parseInt(e.blocksizes[r],10):"number"===typeof e.blocksizes[r]?t.blocksizes[r]=e.blocksizes[r]:"object"===typeof e.blocksizes[r]&&(t.blocksizes[r]=new hd.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(!0))}if(null!=e.hashType&&(hd.Long?(t.hashType=hd.Long.fromValue(e.hashType)).unsigned=!0:"string"===typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"===typeof e.hashType?t.hashType=e.hashType:"object"===typeof e.hashType&&(t.hashType=new hd.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(hd.Long?(t.fanout=hd.Long.fromValue(e.fanout)).unsigned=!0:"string"===typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"===typeof e.fanout?t.fanout=e.fanout:"object"===typeof e.fanout&&(t.fanout=new hd.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!==typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=dd.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocksizes=[]),t.defaults){if(r.Type=t.enums===String?"Raw":0,t.bytes===String?r.Data="":(r.Data=[],t.bytes!==Array&&(r.Data=hd.newBuffer(r.Data))),hd.Long){var n=new hd.Long(0,0,!0);r.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.filesize=t.longs===String?"0":0;if(hd.Long){n=new hd.Long(0,0,!0);r.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.hashType=t.longs===String?"0":0;if(hd.Long){n=new hd.Long(0,0,!0);r.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.fanout=t.longs===String?"0":0;r.mode=0,r.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(r.Type=t.enums===String?dd.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(r.Data=t.bytes===String?hd.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"===typeof e.filesize?r.filesize=t.longs===String?String(e.filesize):e.filesize:r.filesize=t.longs===String?hd.Long.prototype.toString.call(e.filesize):t.longs===Number?new hd.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){r.blocksizes=[];for(var a=0;a<e.blocksizes.length;++a)"number"===typeof e.blocksizes[a]?r.blocksizes[a]=t.longs===String?String(e.blocksizes[a]):e.blocksizes[a]:r.blocksizes[a]=t.longs===String?hd.Long.prototype.toString.call(e.blocksizes[a]):t.longs===Number?new hd.LongBits(e.blocksizes[a].low>>>0,e.blocksizes[a].high>>>0).toNumber(!0):e.blocksizes[a]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"===typeof e.hashType?r.hashType=t.longs===String?String(e.hashType):e.hashType:r.hashType=t.longs===String?hd.Long.prototype.toString.call(e.hashType):t.longs===Number?new hd.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"===typeof e.fanout?r.fanout=t.longs===String?String(e.fanout):e.fanout:r.fanout=t.longs===String?hd.Long.prototype.toString.call(e.fanout):t.longs===Number?new hd.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(r.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(r.mtime=dd.UnixTime.toObject(e.mtime,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e}(),yd=(dd.UnixTime=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Seconds=hd.Long?hd.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=pd.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof fd||(e=fd.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new dd.UnixTime;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&a)}}if(!n.hasOwnProperty("Seconds"))throw hd.ProtocolError("missing required 'Seconds'",{instance:n});return n},e.fromObject=function(e){if(e instanceof dd.UnixTime)return e;var t=new dd.UnixTime;return null!=e.Seconds&&(hd.Long?(t.Seconds=hd.Long.fromValue(e.Seconds)).unsigned=!1:"string"===typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"===typeof e.Seconds?t.Seconds=e.Seconds:"object"===typeof e.Seconds&&(t.Seconds=new hd.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(hd.Long){var n=new hd.Long(0,0,!1);r.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Seconds=t.longs===String?"0":0;r.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"===typeof e.Seconds?r.Seconds=t.longs===String?String(e.Seconds):e.Seconds:r.Seconds=t.longs===String?hd.Long.prototype.toString.call(e.Seconds):t.longs===Number?new hd.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=e.FractionalNanoseconds),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),dd.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=pd.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof fd||(e=fd.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new dd.Metadata;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.MimeType=e.string();else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof dd.Metadata)return e;var t=new dd.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(r.MimeType=e.MimeType),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),vd),bd=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],gd=["directory","hamt-sharded-directory"],md=parseInt("0644",8),wd=parseInt("0755",8);function kd(e){if(null!=e)return"number"===typeof e?4095&e:"0"===(e=e.toString()).substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10)}function xd(e){if(null!=e){var t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){var r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw cd(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}var _d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"file"};xn(this,e);var r=t.type,n=t.data,a=t.blockSizes,i=t.hashType,o=t.fanout,s=t.mtime,u=t.mode;if(r&&!bd.includes(r))throw cd(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r||"file",this.data=n,this.hashType=i,this.fanout=o,this.blockSizes=a||[],this._originalMode=0,this.mode=kd(u),s&&(this.mtime=xd(s),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}return Sn(e,[{key:"mode",get:function(){return this._mode},set:function(e){this._mode=this.isDirectory()?wd:md;var t=kd(e);void 0!==t&&(this._mode=t)}},{key:"isDirectory",value:function(){return Boolean(this.type&&gd.includes(this.type))}},{key:"addBlockSize",value:function(e){this.blockSizes.push(e)}},{key:"removeBlockSize",value:function(e){this.blockSizes.splice(e,1)}},{key:"fileSize",value:function(){if(this.isDirectory())return 0;var e=0;return this.blockSizes.forEach((function(t){e+=t})),this.data&&(e+=this.data.length),e}},{key:"marshal",value:function(){var e;switch(this.type){case"raw":e=yd.DataType.Raw;break;case"directory":e=yd.DataType.Directory;break;case"file":e=yd.DataType.File;break;case"metadata":e=yd.DataType.Metadata;break;case"symlink":e=yd.DataType.Symlink;break;case"hamt-sharded-directory":e=yd.DataType.HAMTShard;break;default:throw cd(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}var t,r,n=this.data;if(this.data&&this.data.length||(n=void 0),null!=this.mode&&((t=4294963200&this._originalMode|(kd(this.mode)||0))!==md||this.isDirectory()||(t=void 0),t===wd&&this.isDirectory()&&(t=void 0)),null!=this.mtime){var a=xd(this.mtime);a&&0===(r={Seconds:a.secs,FractionalNanoseconds:a.nsecs}).FractionalNanoseconds&&delete r.FractionalNanoseconds}var i={Type:e,Data:n,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:r};return yd.encode(i).finish()}}],[{key:"unmarshal",value:function(t){var r=yd.decode(t),n=yd.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),a=new e({type:bd[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return a._originalMode=n.mode||0,a}}]),e}(),Ed=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Cd;)r[n++]=255&t|Sd,t/=128;for(;t&Ad;)r[n++]=255&t|Sd,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Sd=128,Ad=-128,Cd=Math.pow(2,31);var Td=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&Id)<<i:(n&Id)*Math.pow(2,i),i+=7}while(n>=Rd);return e.bytes=o-r,a},Rd=128,Id=127;var Pd=Math.pow(2,7),Dd=Math.pow(2,14),Nd=Math.pow(2,21),Od=Math.pow(2,28),Ld=Math.pow(2,35),Bd=Math.pow(2,42),Md=Math.pow(2,49),Ud=Math.pow(2,56),jd=Math.pow(2,63),Fd={encode:Ed,decode:Td,encodingLength:function(e){return e<Pd?1:e<Dd?2:e<Nd?3:e<Od?4:e<Ld?5:e<Bd?6:e<Md?7:e<Ud?8:e<jd?9:10}},zd=Fd,Zd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[zd.decode(e,t),zd.decode.bytes]},qd=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return zd.encode(e,t,r),t},Vd=function(e){return zd.encodingLength(e)},Kd=new Uint8Array(0),Hd=function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Wd=function(e,t){var r=t.byteLength,n=Vd(e),a=n+Vd(r),i=new Uint8Array(a+r);return qd(e,i,0),qd(r,i,n),i.set(t,a),new Yd(e,r,t,i)},Gd=function(e){var t=Hd(e),r=Zd(t),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=Zd(t.subarray(i)),s=(0,wn.Z)(o,2),u=s[0],c=s[1],l=t.subarray(i+c);if(l.byteLength!==u)throw new Error("Incorrect length");return new Yd(a,u,l,t)},Yd=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var Qd=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Jd=Qd,Xd=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),$d=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return tv(this,e)}}]),e}(),ev=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return tv(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),tv=function(e,t){return new ev(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},rv=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Xd(t,r,n),this.decoder=new $d(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),nv=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new rv(t,r,n,a)},av=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Jd(n,r),i=a.encode,o=a.decode;return nv({prefix:t,name:r,encode:i,decode:function(e){return Hd(o(e))}})},iv=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return nv({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},ov=av({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sv=av({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),uv=iv({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cv=iv({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lv=iv({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fv=iv({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pv=iv({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hv=iv({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dv=iv({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vv=iv({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yv=iv({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),bv=function(e,t){function r(e,t,n,a){xn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this.byteOffset=a.byteOffset,this.byteLength=a.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Av,byteLength:Av,code:Sv,version:Sv,multihash:Sv,bytes:Sv,_baseCache:Av,asCID:Av})}return Sn(r,[{key:"toV0",value:function(){if(0===this.version)return this;var e=this.code,t=this.multihash;if(e!==kv)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==xv)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=Wd(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"equals",value:function(e){return e&&this.code===e.code&&this.version===e.version&&(t=this.multihash,r=e.multihash,t===r||t.code===r.code&&t.size===r.size&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(t.bytes,r.bytes));var t,r}},{key:"toString",value:function(e){var t=this.bytes,r=this.version,n=this._baseCache;return 0===r?mv(t,n,e||ov.encoder):wv(t,n,e||uv.encoder)}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID("+this.toString()+")"}},{key:"toBaseEncodedString",get:function(){throw new Error("Deprecated, use .toString()")}},{key:"codec",get:function(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}},{key:"buffer",get:function(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}},{key:"multibaseName",get:function(){throw new Error('"multibaseName" property is deprecated')}},{key:"prefix",get:function(){throw new Error('"prefix" property is deprecated')}}],[{key:"isCID",value:function(e){return Cv(/^0\.0/,Tv),!(!e||!e[Ev]&&e.asCID!==e)}},{key:"asCID",value:function(e){if(e instanceof r)return e;if(null!=e&&e.asCID===e){var t=e.version,n=e.code,a=e.multihash;return new r(t,n,a,e.bytes||_v(t,n,a.bytes))}if(null!=e&&!0===e[Ev]){var i=e.version,o=e.multihash,s=e.code,u=Gd(o);return r.create(i,s,u)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==kv)throw new Error("Version 0 CID must use dag-pb (code: ".concat(kv,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,_v(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,kv,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=r.decodeFirst(e),n=(0,wn.Z)(t,2),a=n[0];if(n[1].length)throw new Error("Incorrect length");return a}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Hd(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new Yd(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=Zd(e.subarray(t)),n=(0,wn.Z)(r,2),a=n[0],i=n[1];return t+=i,a},n=r(),a=kv;if(18===n?(n=0,t=0):1===n&&(a=r()),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=gv(e,t),a=(0,wn.Z)(n,2),i=a[0],o=a[1],s=r.decode(o);return s._baseCache.set(i,e),s}}]),r}(),gv=function(e,t){switch(e[0]){case"Q":var r=t||ov;return[ov.prefix,r.decode("".concat(ov.prefix).concat(e))];case ov.prefix:var n=t||ov;return[ov.prefix,n.decode(e)];case uv.prefix:var a=t||uv;return[uv.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},mv=function(e,t,r){var n=r.prefix;if(n!==ov.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},wv=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},kv=112,xv=18,_v=function(e,t,r){var n=Vd(e),a=n+Vd(t),i=new Uint8Array(a+r.byteLength);return qd(e,i,0),qd(t,i,n),i.set(r,a),i},Ev=Symbol.for("@ipld/js-cid/CID"),Sv={writable:!1,configurable:!1,enumerable:!0},Av={writable:!1,enumerable:!1,configurable:!1},Cv=function(e,t){if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},Tv="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",Rv=new TextDecoder;function Iv(e,t){for(var r=0,n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");var a=e[t++];if(r+=n<28?(127&a)<<n:(127&a)*Math.pow(2,n),a<128)break}return[r,t]}function Pv(e,t){var r,n=Iv(e,t),a=(0,wn.Z)(n,2);r=a[0];var i=(t=a[1])+r;if(r<0||i<0)throw new Error("protobuf: invalid length");if(i>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,i),i]}function Dv(e,t){var r,n=Iv(e,t),a=(0,wn.Z)(n,2);return[7&(r=a[0]),r>>3,t=a[1]]}function Nv(e){for(var t={},r=e.length,n=0;n<r;){var a,i,o=Dv(e,n),s=(0,wn.Z)(o,3);if(a=s[0],i=s[1],n=s[2],1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Hash"));if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");var u=Pv(e,n),c=(0,wn.Z)(u,2);t.Hash=c[0],n=c[1]}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Name"));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");var l,f=Pv(e,n),p=(0,wn.Z)(f,2);l=p[0],n=p[1],t.Name=Rv.decode(l)}else{if(3!==i)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ".concat(i));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==a)throw new Error("protobuf: (PBLink) wrong wireType (".concat(a,") for Tsize"));var h=Iv(e,n),d=(0,wn.Z)(h,2);t.Tsize=d[0],n=d[1]}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}var Ov=new TextEncoder,Lv=Math.pow(2,32),Bv=Math.pow(2,31);function Mv(e,t){var r=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t[r=Fv(t,r,e.Tsize)-1]=24}if("string"===typeof e.Name){var n=Ov.encode(e.Name);r-=n.length,t.set(n,r),t[r=Fv(t,r,n.length)-1]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),t[r=Fv(t,r,e.Hash.length)-1]=10),t.length-r}function Uv(e){var t=function(e){var t=0;if(e.Data){var r=e.Data.length;t+=1+r+zv(r)}if(e.Links){var n,a=(0,zn.Z)(e.Links);try{for(a.s();!(n=a.n()).done;){var i=jv(n.value);t+=1+i+zv(i)}}catch(sY){a.e(sY)}finally{a.f()}}return t}(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),r[n=Fv(r,n,e.Data.length)-1]=10),e.Links)for(var a=e.Links.length-1;a>=0;a--){var i=Mv(e.Links[a],r.subarray(0,n));r[n=Fv(r,n-=i,i)-1]=18}return r}function jv(e){var t=0;if(e.Hash){var r=e.Hash.length;t+=1+r+zv(r)}if("string"===typeof e.Name){var n=Ov.encode(e.Name).length;t+=1+n+zv(n)}return"number"===typeof e.Tsize&&(t+=1+zv(e.Tsize)),t}function Fv(e,t,r){for(var n=t-=zv(r);r>=Bv;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function zv(e){return e%2===0&&e++,Math.floor((function(e){var t=0;e>=Lv&&(e=Math.floor(e/Lv),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+Zv[e]}(e)+6)/7)}var Zv=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],qv=["Data","Links"],Vv=["Hash","Name","Tsize"],Kv=new TextEncoder;function Hv(e,t){if(e===t)return 0;for(var r=e.Name?Kv.encode(e.Name):[],n=t.Name?Kv.encode(t.Name):[],a=r.length,i=n.length,o=0,s=Math.min(a,i);o<s;++o)if(r[o]!==n[o]){a=r[o],i=n[o];break}return a<i?-1:i<a?1:0}function Wv(e,t){return!Object.keys(e).some((function(e){return!t.includes(e)}))}function Gv(e){if("object"===typeof e.asCID){var t=bv.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var r={};if(e.Hash){var n=bv.asCID(e.Hash);try{n||("string"===typeof e.Hash?n=bv.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=bv.decode(e.Hash)))}catch(a){throw new TypeError("Invalid DAG-PB form: ".concat(a.message))}n&&(r.Hash=n)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(r.Name=e.Name),"number"===typeof e.Tsize&&(r.Tsize=e.Tsize),r}function Yv(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=Kv.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(Gv),t.Links.sort(Hv)}else t.Links=[];return t}function Qv(e){if(!e||"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Wv(e,qv))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(var t=0;t<e.Links.length;t++){var r=e.Links[t];if(!r||"object"!==typeof r||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Wv(r,Vv))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!==typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize&&("number"!==typeof r.Tsize||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===Hv(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Jv(e){return Yv({Data:e,Links:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]})}function Xv(e,t,r){return Gv({Hash:r,Name:e,Tsize:t})}var $v="dag-pb",ey=112;function ty(e){Qv(e);var t={};return e.Links&&(t.Links=e.Links.map((function(e){var t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),Uv(t)}function ry(e){var t=function(e){for(var t,r,n=e.length,a=0,i=!1;a<n;){var o,s,u=Dv(e,a),c=(0,wn.Z)(u,3);if(o=c[0],s=c[1],a=c[2],2!==o)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got ".concat(o));if(1===s){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");var l=Pv(e,a),f=(0,wn.Z)(l,2);r=f[0],a=f[1],t&&(i=!0)}else{if(2!==s)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ".concat(s));if(i)throw new Error("protobuf: (PBNode) duplicate Links section");t||(t=[]);var p,h=Pv(e,a),d=(0,wn.Z)(h,2);p=d[0],a=d[1],t.push(Nv(p))}}if(a>n)throw new Error("protobuf: (PBNode) unexpected end of data");var v={};return r&&(v.Data=r),v.Links=t||[],v}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((function(e){var t={};try{t.Hash=bv.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}var ny=["string","number","bigint","symbol"],ay=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function iy(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";var t=typeof e;if(ny.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";var r=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);if(ay.includes(t))return t;return}(e);return r||"Object"}var oy=function(){function e(t,r,n){xn(this,e),this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}return Sn(e,[{key:"toString",value:function(){return"Type[".concat(this.major,"].").concat(this.name)}},{key:"compare",value:function(e){return this.major<e.major?-1:this.major>e.major?1:0}}]),e}();oy.uint=new oy(0,"uint",!0),oy.negint=new oy(1,"negint",!0),oy.bytes=new oy(2,"bytes",!0),oy.string=new oy(3,"string",!0),oy.array=new oy(4,"array",!1),oy.map=new oy(5,"map",!1),oy.tag=new oy(6,"tag",!1),oy.float=new oy(7,"float",!0),oy.false=new oy(7,"false",!0),oy.true=new oy(7,"true",!0),oy.null=new oy(7,"null",!0),oy.undefined=new oy(7,"undefined",!0),oy.break=new oy(7,"break",!0);var sy=function(){function e(t,r,n){xn(this,e),this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}return Sn(e,[{key:"toString",value:function(){return"Token[".concat(this.type,"].").concat(this.value)}}]),e}(),uy=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,cy=new TextDecoder,ly=new TextEncoder;function fy(e){return uy&&globalThis.Buffer.isBuffer(e)}function py(e){return e instanceof Uint8Array?fy(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var hy=uy?function(e,t,r){return r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):wy(e,t,r)}:function(e,t,r){return r-t>64?cy.decode(e.subarray(t,r)):wy(e,t,r)},dy=uy?function(e){return e.length>64?globalThis.Buffer.from(e):my(e)}:function(e){return e.length>64?ly.encode(e):my(e)},vy=function(e){return Uint8Array.from(e)},yy=uy?function(e,t,r){return fy(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r)}:function(e,t,r){return e.slice(t,r)},by=uy?function(e,t){return e=e.map((function(e){return e instanceof Uint8Array?e:globalThis.Buffer.from(e)})),py(globalThis.Buffer.concat(e,t))}:function(e,t){var r,n=new Uint8Array(t),a=0,i=(0,zn.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;a+o.length>n.length&&(o=o.subarray(0,n.length-a)),n.set(o,a),a+=o.length}}catch(sY){i.e(sY)}finally{i.f()}return n},gy=uy?function(e){return globalThis.Buffer.allocUnsafe(e)}:function(e){return new Uint8Array(e)};function my(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=e.length,a=null,i=[],o=0;o<n;++o){if((t=e.charCodeAt(o))>55295&&t<57344){if(!a){if(t>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(r-=3)>-1&&i.push(239,191,189);continue}a=t;continue}if(t<56320){(r-=3)>-1&&i.push(239,191,189),a=t;continue}t=65536+(a-55296<<10|t-56320)}else a&&(r-=3)>-1&&i.push(239,191,189);if(a=null,t<128){if((r-=1)<0)break;i.push(t)}else if(t<2048){if((r-=2)<0)break;i.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;i.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return i}function wy(e,t,r){for(var n=[];t<r;){var a=e[t],i=null,o=a>239?4:a>223?3:a>191?2:1;if(t+o<=r){var s=void 0,u=void 0,c=void 0,l=void 0;switch(o){case 1:a<128&&(i=a);break;case 2:128===(192&(s=e[t+1]))&&(l=(31&a)<<6|63&s)>127&&(i=l);break;case 3:s=e[t+1],u=e[t+2],128===(192&s)&&128===(192&u)&&(l=(15&a)<<12|(63&s)<<6|63&u)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:s=e[t+1],u=e[t+2],c=e[t+3],128===(192&s)&&128===(192&u)&&128===(192&c)&&(l=(15&a)<<18|(63&s)<<12|(63&u)<<6|63&c)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,o=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),t+=o}return xy(n)}var ky=4096;function xy(e){var t=e.length;if(t<=ky)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ky));return r}var _y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;xn(this,e),this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}return Sn(e,[{key:"reset",value:function(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}},{key:"push",value:function(e){var t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){var r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){var n=t.length-(this.maxCursor-this.cursor)-1;n<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=gy(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}},{key:"toBytes",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){var r=this.chunks[0];t&&this.cursor>r.length/2?(e=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=yy(r,0,this.cursor)}else e=by(this.chunks,this.cursor);return t&&this.reset(),e}}]),e}(),Ey="CBOR decode error:",Sy="CBOR encode error:",Ay=[];function Cy(e,t,r){if(e.length-t<r)throw new Error("".concat(Ey," not enough data for type"))}Ay[23]=1,Ay[24]=2,Ay[25]=3,Ay[26]=5,Ay[27]=9;var Ty=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Ry(e,t,r){Cy(e,t,1);var n=e[t];if(!0===r.strict&&n<Ty[0])throw new Error("".concat(Ey," integer encoded in more bytes than necessary (strict decode)"));return n}function Iy(e,t,r){Cy(e,t,2);var n=e[t]<<8|e[t+1];if(!0===r.strict&&n<Ty[1])throw new Error("".concat(Ey," integer encoded in more bytes than necessary (strict decode)"));return n}function Py(e,t,r){Cy(e,t,4);var n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<Ty[2])throw new Error("".concat(Ey," integer encoded in more bytes than necessary (strict decode)"));return n}function Dy(e,t,r){Cy(e,t,8);var n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],a=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(n)<<BigInt(32))+BigInt(a);if(!0===r.strict&&i<Ty[3])throw new Error("".concat(Ey," integer encoded in more bytes than necessary (strict decode)"));if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===r.allowBigInt)return i;throw new Error("".concat(Ey," integers outside of the safe integer range are not supported"))}function Ny(e,t){return Oy(e,0,t.value)}function Oy(e,t,r){if(r<Ty[0]){var n=Number(r);e.push([t|n])}else if(r<Ty[1]){var a=Number(r);e.push([24|t,a])}else if(r<Ty[2]){var i=Number(r);e.push([25|t,i>>>8,255&i])}else if(r<Ty[3]){var o=Number(r);e.push([26|t,o>>>24&255,o>>>16&255,o>>>8&255,255&o])}else{var s=BigInt(r);if(!(s<Ty[4]))throw new Error("".concat(Ey," encountered BigInt larger than allowable range"));var u=[27|t,0,0,0,0,0,0,0],c=Number(s&BigInt(4294967295)),l=Number(s>>BigInt(32)&BigInt(4294967295));u[8]=255&c,c>>=8,u[7]=255&c,c>>=8,u[6]=255&c,c>>=8,u[5]=255&c,u[4]=255&l,l>>=8,u[3]=255&l,l>>=8,u[2]=255&l,l>>=8,u[1]=255&l,e.push(u)}}Ny.encodedSize=function(e){return Oy.encodedSize(e.value)},Oy.encodedSize=function(e){return e<Ty[0]?1:e<Ty[1]?2:e<Ty[2]?3:e<Ty[3]?5:9},Ny.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};var Ly=BigInt(-1),By=BigInt(1);function My(e,t){var r=t.value,n="bigint"===typeof r?r*Ly-By:-1*r-1;Oy(e,t.type.majorEncoded,n)}function Uy(e,t,r,n){Cy(e,t,r+n);var a=yy(e,t+r,t+r+n);return new sy(oy.bytes,a,r+n)}function jy(e,t,r,n){return Uy(e,t,1,r)}function Fy(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===oy.string?dy(e.value):e.value),e.encodedBytes}function zy(e,t){var r=Fy(t);Oy(e,t.type.majorEncoded,r.length),e.push(r)}function Zy(e,t,r,n,a){var i=r+n;Cy(e,t,i);var o=new sy(oy.string,hy(e,t+r,t+i),i);return!0===a.retainStringBytes&&(o.byteValue=yy(e,t+r,t+i)),o}function qy(e,t,r,n){return Zy(e,t,1,r,n)}My.encodedSize=function(e){var t=e.value,r="bigint"===typeof t?t*Ly-By:-1*t-1;return r<Ty[0]?1:r<Ty[1]?2:r<Ty[2]?3:r<Ty[3]?5:9},My.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},zy.encodedSize=function(e){var t=Fy(e);return Oy.encodedSize(t.length)+t.length},zy.compareTokens=function(e,t){return r=Fy(e),n=Fy(t),r.length<n.length?-1:r.length>n.length?1:function(e,t){if(fy(e)&&fy(t))return e.compare(t);for(var r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}(r,n);var r,n};var Vy=zy;function Ky(e,t,r,n){return new sy(oy.array,n,r)}function Hy(e,t,r,n){return Ky(0,0,1,r)}function Wy(e,t){Oy(e,oy.array.majorEncoded,t.value)}function Gy(e,t,r,n){return new sy(oy.map,n,r)}function Yy(e,t,r,n){return Gy(0,0,1,r)}function Qy(e,t){Oy(e,oy.map.majorEncoded,t.value)}function Jy(e,t,r,n){return new sy(oy.tag,r,1)}function Xy(e,t){Oy(e,oy.tag.majorEncoded,t.value)}Wy.compareTokens=Ny.compareTokens,Wy.encodedSize=function(e){return Oy.encodedSize(e.value)},Qy.compareTokens=Ny.compareTokens,Qy.encodedSize=function(e){return Oy.encodedSize(e.value)},Xy.compareTokens=Ny.compareTokens,Xy.encodedSize=function(e){return Oy.encodedSize(e.value)};var $y=20,eb=21,tb=22,rb=23;function nb(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error("".concat(Ey," NaN values are not supported"));if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error("".concat(Ey," Infinity values are not supported"))}return new sy(oy.float,e,t)}function ab(e,t,r){var n,a=t.value;if(!1===a)e.push([oy.float.majorEncoded|$y]);else if(!0===a)e.push([oy.float.majorEncoded|eb]);else if(null===a)e.push([oy.float.majorEncoded|tb]);else if(void 0===a)e.push([oy.float.majorEncoded|rb]);else{var i=!1;r&&!0===r.float64||(ub(a),a===cb(sb,1)||Number.isNaN(a)?(sb[0]=249,e.push(sb.slice(0,3)),i=!0):(lb(a),a===fb(sb,1)&&(sb[0]=250,e.push(sb.slice(0,5)),i=!0))),i||(n=a,ob.setFloat64(0,n,!1),pb(sb,1),sb[0]=251,e.push(sb.slice(0,9)))}}ab.encodedSize=function(e,t){var r=e.value;if(!1===r||!0===r||null===r||void 0===r)return 1;if(!t||!0!==t.float64){ub(r);var n=cb(sb,1);if(r===n||Number.isNaN(r))return 3;if(lb(r),r===(n=fb(sb,1)))return 5}return 9};var ib=new ArrayBuffer(9),ob=new DataView(ib,1),sb=new Uint8Array(ib,0);function ub(e){if(e===1/0)ob.setUint16(0,31744,!1);else if(e===-1/0)ob.setUint16(0,64512,!1);else if(Number.isNaN(e))ob.setUint16(0,32256,!1);else{ob.setFloat32(0,e);var t=ob.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)ob.setUint16(0,31744,!1);else if(0===r)ob.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{var a=r-127;a<-24?ob.setUint16(0,0):a<-14?ob.setUint16(0,(2147483648&t)>>16|1<<24+a,!1):ob.setUint16(0,(2147483648&t)>>16|a+15<<10|n>>13,!1)}}}function cb(e,t){if(e.length-t<2)throw new Error("".concat(Ey," not enough data for float16"));var r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;var n,a=r>>10&31,i=1023&r;return n=0===a?i*Math.pow(2,-24):31!==a?(i+1024)*Math.pow(2,a-25):0===i?1/0:NaN,32768&r?-n:n}function lb(e){ob.setFloat32(0,e,!1)}function fb(e,t){if(e.length-t<4)throw new Error("".concat(Ey," not enough data for float32"));var r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function pb(e,t){if(e.length-t<8)throw new Error("".concat(Ey," not enough data for float64"));var r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}function hb(e,t,r){throw new Error("".concat(Ey," encountered invalid minor (").concat(r,") for major ").concat(e[t]>>>5))}function db(e){return function(){throw new Error("".concat(Ey," ").concat(e))}}ab.compareTokens=Ny.compareTokens;for(var vb=[],yb=0;yb<=23;yb++)vb[yb]=hb;vb[24]=function(e,t,r,n){return new sy(oy.uint,Ry(e,t+1,n),2)},vb[25]=function(e,t,r,n){return new sy(oy.uint,Iy(e,t+1,n),3)},vb[26]=function(e,t,r,n){return new sy(oy.uint,Py(e,t+1,n),5)},vb[27]=function(e,t,r,n){return new sy(oy.uint,Dy(e,t+1,n),9)},vb[28]=hb,vb[29]=hb,vb[30]=hb,vb[31]=hb;for(var bb=32;bb<=55;bb++)vb[bb]=hb;vb[56]=function(e,t,r,n){return new sy(oy.negint,-1-Ry(e,t+1,n),2)},vb[57]=function(e,t,r,n){return new sy(oy.negint,-1-Iy(e,t+1,n),3)},vb[58]=function(e,t,r,n){return new sy(oy.negint,-1-Py(e,t+1,n),5)},vb[59]=function(e,t,r,n){var a=Dy(e,t+1,n);if("bigint"!==typeof a){var i=-1-a;if(i>=Number.MIN_SAFE_INTEGER)return new sy(oy.negint,i,9)}if(!0!==n.allowBigInt)throw new Error("".concat(Ey," integers outside of the safe integer range are not supported"));return new sy(oy.negint,Ly-BigInt(a),9)},vb[60]=hb,vb[61]=hb,vb[62]=hb,vb[63]=hb;for(var gb=64;gb<=87;gb++)vb[gb]=jy;vb[88]=function(e,t,r,n){return Uy(e,t,2,Ry(e,t+1,n))},vb[89]=function(e,t,r,n){return Uy(e,t,3,Iy(e,t+1,n))},vb[90]=function(e,t,r,n){return Uy(e,t,5,Py(e,t+1,n))},vb[91]=function(e,t,r,n){var a=Dy(e,t+1,n);if("bigint"===typeof a)throw new Error("".concat(Ey," 64-bit integer bytes lengths not supported"));return Uy(e,t,9,a)},vb[92]=hb,vb[93]=hb,vb[94]=hb,vb[95]=db("indefinite length bytes/strings are not supported");for(var mb=96;mb<=119;mb++)vb[mb]=qy;vb[120]=function(e,t,r,n){return Zy(e,t,2,Ry(e,t+1,n),n)},vb[121]=function(e,t,r,n){return Zy(e,t,3,Iy(e,t+1,n),n)},vb[122]=function(e,t,r,n){return Zy(e,t,5,Py(e,t+1,n),n)},vb[123]=function(e,t,r,n){var a=Dy(e,t+1,n);if("bigint"===typeof a)throw new Error("".concat(Ey," 64-bit integer string lengths not supported"));return Zy(e,t,9,a,n)},vb[124]=hb,vb[125]=hb,vb[126]=hb,vb[127]=db("indefinite length bytes/strings are not supported");for(var wb=128;wb<=151;wb++)vb[wb]=Hy;vb[152]=function(e,t,r,n){return Ky(0,0,2,Ry(e,t+1,n))},vb[153]=function(e,t,r,n){return Ky(0,0,3,Iy(e,t+1,n))},vb[154]=function(e,t,r,n){return Ky(0,0,5,Py(e,t+1,n))},vb[155]=function(e,t,r,n){var a=Dy(e,t+1,n);if("bigint"===typeof a)throw new Error("".concat(Ey," 64-bit integer array lengths not supported"));return Ky(0,0,9,a)},vb[156]=hb,vb[157]=hb,vb[158]=hb,vb[159]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("".concat(Ey," indefinite length items not allowed"));return Ky(0,0,1,1/0)};for(var kb=160;kb<=183;kb++)vb[kb]=Yy;vb[184]=function(e,t,r,n){return Gy(0,0,2,Ry(e,t+1,n))},vb[185]=function(e,t,r,n){return Gy(0,0,3,Iy(e,t+1,n))},vb[186]=function(e,t,r,n){return Gy(0,0,5,Py(e,t+1,n))},vb[187]=function(e,t,r,n){var a=Dy(e,t+1,n);if("bigint"===typeof a)throw new Error("".concat(Ey," 64-bit integer map lengths not supported"));return Gy(0,0,9,a)},vb[188]=hb,vb[189]=hb,vb[190]=hb,vb[191]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("".concat(Ey," indefinite length items not allowed"));return Gy(0,0,1,1/0)};for(var xb=192;xb<=215;xb++)vb[xb]=Jy;vb[216]=function(e,t,r,n){return new sy(oy.tag,Ry(e,t+1,n),2)},vb[217]=function(e,t,r,n){return new sy(oy.tag,Iy(e,t+1,n),3)},vb[218]=function(e,t,r,n){return new sy(oy.tag,Py(e,t+1,n),5)},vb[219]=function(e,t,r,n){return new sy(oy.tag,Dy(e,t+1,n),9)},vb[220]=hb,vb[221]=hb,vb[222]=hb,vb[223]=hb;for(var _b=224;_b<=243;_b++)vb[_b]=db("simple values are not supported");vb[244]=hb,vb[245]=hb,vb[246]=hb,vb[247]=function(e,t,r,n){if(!1===n.allowUndefined)throw new Error("".concat(Ey," undefined values are not supported"));return!0===n.coerceUndefinedToNull?new sy(oy.null,null,1):new sy(oy.undefined,void 0,1)},vb[248]=db("simple values are not supported"),vb[249]=function(e,t,r,n){return nb(cb(e,t+1),3,n)},vb[250]=function(e,t,r,n){return nb(fb(e,t+1),5,n)},vb[251]=function(e,t,r,n){return nb(pb(e,t+1),9,n)},vb[252]=hb,vb[253]=hb,vb[254]=hb,vb[255]=function(e,t,r,n){if(!1===n.allowIndefinite)throw new Error("".concat(Ey," indefinite length items not allowed"));return new sy(oy.break,void 0,1)};for(var Eb=[],Sb=0;Sb<24;Sb++)Eb[Sb]=new sy(oy.uint,Sb,1);for(var Ab=-1;Ab>=-24;Ab--)Eb[31-Ab]=new sy(oy.negint,Ab,1);Eb[64]=new sy(oy.bytes,new Uint8Array(0),1),Eb[96]=new sy(oy.string,"",1),Eb[128]=new sy(oy.array,0,1),Eb[160]=new sy(oy.map,0,1),Eb[244]=new sy(oy.false,!1,1),Eb[245]=new sy(oy.true,!0,1),Eb[246]=new sy(oy.null,null,1);var Cb={float64:!1,mapSorter:function(e,t){var r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);var a=r.type.major,i=Tb[a].compareTokens(r,n);0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return i},quickEncodeToken:function(e){switch(e.type){case oy.false:return vy([244]);case oy.true:return vy([245]);case oy.null:return vy([246]);case oy.bytes:return e.value.length?void 0:vy([64]);case oy.string:return""===e.value?vy([96]):void 0;case oy.array:return 0===e.value?vy([128]):void 0;case oy.map:return 0===e.value?vy([160]):void 0;case oy.uint:return e.value<24?vy([Number(e.value)]):void 0;case oy.negint:if(e.value>=-24)return vy([31-Number(e.value)])}}};var Tb=function(){var e=[];return e[oy.uint.major]=Ny,e[oy.negint.major]=My,e[oy.bytes.major]=zy,e[oy.string.major]=Vy,e[oy.array.major]=Wy,e[oy.map.major]=Qy,e[oy.tag.major]=Xy,e[oy.float.major]=ab,e}(),Rb=new _y,Ib=function(){function e(t,r){xn(this,e),this.obj=t,this.parent=r}return Sn(e,[{key:"includes",value:function(e){var t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}}],[{key:"createCheck",value:function(t,r){if(t&&t.includes(r))throw new Error("".concat(Sy," object contains circular references"));return new e(r,t)}}]),e}(),Pb={null:new sy(oy.null,null),undefined:new sy(oy.undefined,void 0),true:new sy(oy.true,!0),false:new sy(oy.false,!1),emptyArray:new sy(oy.array,0),emptyMap:new sy(oy.map,0)},Db={number:function(e,t,r,n){return Number.isInteger(e)&&Number.isSafeInteger(e)?new sy(e>=0?oy.uint:oy.negint,e):new sy(oy.float,e)},bigint:function(e,t,r,n){return e>=BigInt(0)?new sy(oy.uint,e):new sy(oy.negint,e)},Uint8Array:function(e,t,r,n){return new sy(oy.bytes,e)},string:function(e,t,r,n){return new sy(oy.string,e)},boolean:function(e,t,r,n){return e?Pb.true:Pb.false},null:function(e,t,r,n){return Pb.null},undefined:function(e,t,r,n){return Pb.undefined},ArrayBuffer:function(e,t,r,n){return new sy(oy.bytes,new Uint8Array(e))},DataView:function(e,t,r,n){return new sy(oy.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array:function(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[Pb.emptyArray,new sy(oy.break)]:Pb.emptyArray;n=Ib.createCheck(n,e);var a,i=[],o=0,s=(0,zn.Z)(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;i[o++]=Bb(u,r,n)}}catch(sY){s.e(sY)}finally{s.f()}return r.addBreakTokens?[new sy(oy.array,e.length),i,new sy(oy.break)]:[new sy(oy.array,e.length),i]},Object:function(e){function t(t,r,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,r,n){var a="Object"!==t,i=a?e.keys():Object.keys(e),o=a?e.size:i.length;if(!o)return!0===r.addBreakTokens?[Pb.emptyMap,new sy(oy.break)]:Pb.emptyMap;n=Ib.createCheck(n,e);var s,u=[],c=0,l=(0,zn.Z)(i);try{for(l.s();!(s=l.n()).done;){var f=s.value;u[c++]=[Bb(f,r,n),Bb(a?e.get(f):e[f],r,n)]}}catch(sY){l.e(sY)}finally{l.f()}return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(u,r),r.addBreakTokens?[new sy(oy.map,o),u,new sy(oy.break)]:[new sy(oy.map,o),u]}))};Db.Map=Db.Object,Db.Buffer=Db.Uint8Array;var Nb,Ob=(0,zn.Z)("Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "));try{for(Ob.s();!(Nb=Ob.n()).done;){var Lb=Nb.value;Db["".concat(Lb,"Array")]=Db.DataView}}catch(sY){Ob.e(sY)}finally{Ob.f()}function Bb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=iy(e),a=t&&t.typeEncoders&&t.typeEncoders[n]||Db[n];if("function"===typeof a){var i=a(e,n,t,r);if(null!=i)return i}var o=Db[n];if(!o)throw new Error("".concat(Sy," unsupported type: ").concat(n));return o(e,n,t,r)}function Mb(e,t,r,n){if(Array.isArray(t)){var a,i=(0,zn.Z)(t);try{for(i.s();!(a=i.n()).done;){Mb(e,a.value,r,n)}}catch(sY){i.e(sY)}finally{i.f()}}else r[t.type.major](e,t,n)}function Ub(e,t,r){var n=Bb(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){var a=r.quickEncodeToken(n);if(a)return a;var i=t[n.type.major];if(i.encodedSize){var o=i.encodedSize(n,r),s=new _y(o);if(i(s,n,r),1!==s.chunks.length)throw new Error("Unexpected error: pre-calculated length for ".concat(n," was wrong"));return py(s.chunks[0])}}return Rb.reset(),Mb(Rb,n,t,r),Rb.toBytes(!0)}function jb(e,t){return t=Object.assign({},Cb,t),Ub(e,Tb,t)}var Fb={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},zb=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xn(this,e),this.pos=0,this.data=t,this.options=r}return Sn(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"next",value:function(){var e=this.data[this.pos],t=Eb[e];if(void 0===t){var r=vb[e];if(!r)throw new Error("".concat(Ey," no decoder for major type ").concat(e>>>5," (byte 0x").concat(e.toString(16).padStart(2,"0"),")"));var n=31&e;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}}]),e}(),Zb=Symbol.for("DONE"),qb=Symbol.for("BREAK");function Vb(e,t){if(e.done())return Zb;var r=e.next();if(r.type===oy.break)return qb;if(r.type.terminal)return r.value;if(r.type===oy.array)return function(e,t,r){for(var n=[],a=0;a<e.value;a++){var i=Vb(t,r);if(i===qb){if(e.value===1/0)break;throw new Error("".concat(Ey," got unexpected break to lengthed array"))}if(i===Zb)throw new Error("".concat(Ey," found array but not enough entries (got ").concat(a,", expected ").concat(e.value,")"));n[a]=i}return n}(r,e,t);if(r.type===oy.map)return function(e,t,r){for(var n=!0===r.useMaps,a=n?void 0:{},i=n?new Map:void 0,o=0;o<e.value;o++){var s=Vb(t,r);if(s===qb){if(e.value===1/0)break;throw new Error("".concat(Ey," got unexpected break to lengthed map"))}if(s===Zb)throw new Error("".concat(Ey," found map but not enough entries (got ").concat(o," [no key], expected ").concat(e.value,")"));if(!0!==n&&"string"!==typeof s)throw new Error("".concat(Ey," non-string keys not supported (got ").concat(typeof s,")"));if(!0===r.rejectDuplicateMapKeys&&(n&&i.has(s)||!n&&s in a))throw new Error("".concat(Ey,' found repeat map key "').concat(s,'"'));var u=Vb(t,r);if(u===Zb)throw new Error("".concat(Ey," found map but not enough entries (got ").concat(o," [no value], expected ").concat(e.value,")"));n?i.set(s,u):a[s]=u}return n?i:a}(r,e,t);if(r.type===oy.tag){if(t.tags&&"function"===typeof t.tags[r.value]){var n=Vb(e,t);return t.tags[r.value](n)}throw new Error("".concat(Ey," tag not supported (").concat(r.value,")"))}throw new Error("unsupported")}function Kb(e,t){if(!(e instanceof Uint8Array))throw new Error("".concat(Ey," data to decode must be a Uint8Array"));var r=(t=Object.assign({},Fb,t)).tokenizer||new zb(e,t),n=Vb(r,t);if(n===Zb)throw new Error("".concat(Ey," did not find any content to decode"));if(n===qb)throw new Error("".concat(Ey," got unexpected break"));if(!r.done())throw new Error("".concat(Ey," too many terminals, data makes no sense"));return n}var Hb=42;var Wb={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;var t=bv.asCID(e);if(!t)return null;var r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new sy(oy.tag,Hb),new sy(oy.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};var Gb={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Gb.tags[Hb]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return bv.decode(e.subarray(1))};var Yb="dag-cbor",Qb=113,Jb=function(e){return jb(e,Wb)},Xb=function(e){return Kb(e,Gb)};function $b(){return $b="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tn(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},$b.apply(this,arguments)}var eg=function(e){var t=e.name,r=e.code,n=e.encode;return new tg(t,r,n)},tg=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?Wd(this.code,r):r.then((function(e){return Wd(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),rg=iv({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ng=iv({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ag=iv({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ig=iv({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),og=function(e,t,r,n,a,i,o,s,u){Cn(l,e);var c=Dn(l);function l(){var e;return xn(this,l),(e=c.call(this)).inRecursive=[],e}return Sn(l,[{key:"prefix",value:function(e){var t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===oy.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===oy.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}},{key:t,value:function(e,t){this.prefix(e);for(var r=String(t.value),n=[],a=0;a<r.length;a++)n[a]=r.charCodeAt(a);e.push(n)}},{key:r,value:function(e,t){this[oy.uint.major](e,t)}},{key:n,value:function(e,t){throw new Error("".concat(Sy," unsupported type: Uint8Array"))}},{key:a,value:function(e,t){this.prefix(e);var r=dy(JSON.stringify(t.value));e.push(r.length>32?py(r):r)}},{key:i,value:function(e,t){this.prefix(e),this.inRecursive.push({type:oy.array,elements:0}),e.push([91])}},{key:o,value:function(e,t){this.prefix(e),this.inRecursive.push({type:oy.map,elements:0}),e.push([123])}},{key:s,value:function(e,t){}},{key:u,value:function(e,t){if("break"===t.type.name){var r=this.inRecursive.pop();if(r){if(r.type===oy.array)e.push([93]);else{if(r.type!==oy.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error("".concat(Sy," unsupported type: undefined"));if(this.prefix(e),"true"!==t.type.name)if("false"!==t.type.name)if("null"!==t.type.name){for(var n=String(t.value),a=[],i=!1,o=0;o<n.length;o++)a[o]=n.charCodeAt(o),i||46!==a[o]&&101!==a[o]&&69!==a[o]||(i=!0);i||(a.push(46),a.push(48)),e.push(a)}else e.push([110,117,108,108]);else e.push([102,97,108,115,101]);else e.push([116,114,117,101])}}]),l}(On(Array),oy.uint.major,oy.negint.major,oy.bytes.major,oy.string.major,oy.array.major,oy.map.major,oy.tag.major,oy.float.major);var sg={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error("".concat(Sy," complex map keys are not supported"));var r=e[0],n=t[0];if(r.type!==oy.string||n.type!==oy.string)throw new Error("".concat(Sy," non-string map keys are not supported"));if(r<n)return-1;if(r>n)return 1;throw new Error("".concat(Sy," unexpected duplicate map keys, this is not supported"))}};var ug=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xn(this,e),this.pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}return Sn(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"ch",value:function(){return this.data[this.pos]}},{key:"currentMode",value:function(){return this.modeStack[this.modeStack.length-1]}},{key:"skipWhitespace",value:function(){for(var e=this.ch();32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}},{key:"expect",value:function(e){if(this.data.length-this.pos<e.length)throw new Error("".concat(Ey," unexpected end of input at position ").concat(this.pos));for(var t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error("".concat(Ey," unexpected token at position ").concat(this.pos,", expected to find '").concat(String.fromCharCode.apply(String,(0,kn.Z)(e)),"'"))}},{key:"parseNumber",value:function(){var e=this,t=this.pos,r=!1,n=!1,a=function(t){for(;!e.done();){var r=e.ch();if(!t.includes(r))break;e.pos++}};if(45===this.ch()&&(r=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new sy(oy.uint,0,this.pos-t);this.pos++,n=!0}if(a([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===t+1)throw new Error("".concat(Ey," unexpected token at position ").concat(this.pos));if(!this.done()&&46===this.ch()){if(n)throw new Error("".concat(Ey," unexpected token at position ").concat(this.pos));n=!0,this.pos++,a([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,a([48,49,50,51,52,53,54,55,56,57]));var i=String.fromCharCode.apply(null,this.data.subarray(t,this.pos)),o=parseFloat(i);return n?new sy(oy.float,o,this.pos-t):!0!==this.options.allowBigInt||Number.isSafeInteger(o)?new sy(o>=0?oy.uint:oy.negint,o,this.pos-t):new sy(o>=0?oy.uint:oy.negint,BigInt(i),this.pos-t)}},{key:"parseString",value:function(){var e=this;if(34!==this.ch())throw new Error("".concat(Ey," unexpected character at position ").concat(this.pos,"; this shouldn't happen"));this.pos++;for(var t=this.pos,r=0;t<this.data.length&&r<65536;t++,r++){var n=this.data[t];if(92===n||n<32||n>=128)break;if(34===n){var a=String.fromCharCode.apply(null,this.data.subarray(this.pos,t));return this.pos=t+1,new sy(oy.string,a,r)}}for(var i=this.pos,o=[],s=function(){if(e.pos+4>=e.data.length)throw new Error("".concat(Ey," unexpected end of unicode escape sequence at position ").concat(e.pos));for(var t=0,r=0;r<4;r++){var n=e.ch();if(n>=48&&n<=57)n-=48;else if(n>=97&&n<=102)n=n-97+10;else{if(!(n>=65&&n<=70))throw new Error("".concat(Ey," unexpected unicode escape character at position ").concat(e.pos));n=n-65+10}t=16*t+n,e.pos++}return t},u=function(){var t,r,n,a,i=e.ch(),s=null,u=i>239?4:i>223?3:i>191?2:1;if(e.pos+u>e.data.length)throw new Error("".concat(Ey," unexpected unicode sequence at position ").concat(e.pos));switch(u){case 1:i<128&&(s=i);break;case 2:128===(192&(t=e.data[e.pos+1]))&&(a=(31&i)<<6|63&t)>127&&(s=a);break;case 3:t=e.data[e.pos+1],r=e.data[e.pos+2],128===(192&t)&&128===(192&r)&&(a=(15&i)<<12|(63&t)<<6|63&r)>2047&&(a<55296||a>57343)&&(s=a);break;case 4:t=e.data[e.pos+1],r=e.data[e.pos+2],n=e.data[e.pos+3],128===(192&t)&&128===(192&r)&&128===(192&n)&&(a=(15&i)<<18|(63&t)<<12|(63&r)<<6|63&n)>65535&&a<1114112&&(s=a)}null===s?(s=65533,u=1):s>65535&&(s-=65536,o.push(s>>>10&1023|55296),s=56320|1023&s),o.push(s),e.pos+=u};!this.done();){var c=this.ch(),l=void 0;switch(c){case 92:if(this.pos++,this.done())throw new Error("".concat(Ey," unexpected string termination at position ").concat(this.pos));switch(l=this.ch(),this.pos++,l){case 34:case 39:case 92:case 47:o.push(l);break;case 98:o.push(8);break;case 116:o.push(9);break;case 110:o.push(10);break;case 102:o.push(12);break;case 114:o.push(13);break;case 117:o.push(s());break;default:throw new Error("".concat(Ey," unexpected string escape character at position ").concat(this.pos))}break;case 34:return this.pos++,new sy(oy.string,xy(o),this.pos-i);default:if(c<32)throw new Error("".concat(Ey," invalid control character at position ").concat(this.pos));c<128?(o.push(c),this.pos++):u()}}throw new Error("".concat(Ey," unexpected end of string at position ").concat(this.pos))}},{key:"parseValue",value:function(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new sy(oy.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new sy(oy.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new sy(oy.null,null,4);case 102:return this.expect([102,97,108,115,101]),new sy(oy.false,!1,5);case 116:return this.expect([116,114,117,101]),new sy(oy.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error("".concat(Ey," unexpected character at position ").concat(this.pos))}}},{key:"next",value:function(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new sy(oy.break,void 0,1);if(44!==this.ch())throw new Error("".concat(Ey," unexpected character at position ").concat(this.pos,", was expecting array delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new sy(oy.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new sy(oy.break,void 0,1);if(44!==this.ch())throw new Error("".concat(Ey," unexpected character at position ").concat(this.pos,", was expecting object delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));this.pos++,this.skipWhitespace();case"obj-start":if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new sy(oy.break,void 0,1);var e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error("".concat(Ey," unexpected character at position ").concat(this.pos,", was expecting key/value delimiter ':' but found '").concat(String.fromCharCode(this.ch()),"'"));return this.pos++,this.modeStack.push("obj-value"),e;case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error("".concat(Ey," unexpected parse state at position ").concat(this.pos,"; this shouldn't happen"))}}}]),e}();function cg(e){var t=rg.encode(e).slice(1);return[new sy(oy.map,1/0,1),new sy(oy.string,"/",1),new sy(oy.map,1/0,1),new sy(oy.string,"bytes",5),new sy(oy.string,t,t.length),new sy(oy.break,void 0,1),new sy(oy.break,void 0,1)]}var lg={typeEncoders:{Object:function(e){if(e.asCID!==e)return null;var t=bv.asCID(e);if(!t)return null;var r=t.toString();return[new sy(oy.map,1/0,1),new sy(oy.string,"/",1),new sy(oy.string,r,r.length),new sy(oy.break,void 0,1)]},Uint8Array:cg,Buffer:cg,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},fg=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this,e,n)).tokenBuffer=[],a}return Sn(r,[{key:"done",value:function(){return 0===this.tokenBuffer.length&&$b(Tn(r.prototype),"done",this).call(this)}},{key:"_next",value:function(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():$b(Tn(r.prototype),"next",this).call(this)}},{key:"next",value:function(){var e=this._next();if(e.type===oy.map){var t=this._next();if(t.type===oy.string&&"/"===t.value){var r=this._next();if(r.type===oy.string){if(this._next().type!==oy.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(r),new sy(oy.tag,42,0)}if(r.type===oy.map){var n=this._next();if(n.type===oy.string&&"bytes"===n.value){var a=this._next();if(a.type===oy.string){for(var i=0;i<2;i++){if(this._next().type!==oy.break)throw new Error("Invalid encoded Bytes form")}var o=rg.decode("m".concat(a.value));return new sy(oy.bytes,o,a.value.length)}this.tokenBuffer.push(a)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}this.tokenBuffer.push(t)}return e}}]),r}(ug),pg={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};pg.tags[42]=bv.parse;var hg="dag-json",dg=297,vg=function(e){return t=e,r=lg,r=Object.assign({},sg,r),Ub(t,new og,r);var t,r},yg=function(e){return function(e,t){return Kb(e,t=Object.assign({tokenizer:new ug(e,t)},t))}(e,Object.assign(pg,{tokenizer:new fg(e,pg)}))};function bg(e){return ag.encode(e).slice(1)}function gg(e){return ag.decode("u".concat(e))}function mg(e){var t={signature:gg(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=gg(e.protected)),t}function wg(e){var t={signature:bg(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=bg(e.protected)),t}function kg(e){var t={};return e.encrypted_key&&(t.encrypted_key=gg(e.encrypted_key)),e.header&&(t.header=e.header),t}function xg(e){var t={};return e.encrypted_key&&(t.encrypted_key=bg(e.encrypted_key)),e.header&&(t.header=e.header),t}var _g="dag-jose",Eg=133;function Sg(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function Ag(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function Cg(e){if("string"===typeof e){var t=e.split(".");if(3===t.length)return function(e){var t=(0,wn.Z)(e,3),r=t[0],n=t[1];return{payload:n,signatures:[{protected:r,signature:t[2]}],link:bv.decode(gg(n))}}(t);if(5===t.length)return function(e){var t=(0,wn.Z)(e,5),r=t[0],n=t[1],a=t[2],i={ciphertext:t[3],iv:a,protected:r,tag:t[4]};return n&&(i.recipients=[{encrypted_key:n}]),i}(t);throw new Error("Not a valid JOSE string")}if(Sg(e)||Ag(e))return e;throw new Error("Not a valid unencoded JOSE object")}function Tg(e){var t;if("string"===typeof e&&(e=Cg(e)),Sg(e))t=function(e){var t=gg(e.payload);try{bv.decode(t)}catch(r){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(mg)}}(e);else{if(!Ag(e))throw new Error("Not a valid JOSE object");t=function(e){var t={ciphertext:gg(e.ciphertext),protected:gg(e.protected),iv:gg(e.iv),tag:gg(e.tag)};return e.aad&&(t.aad=gg(e.aad)),e.recipients&&(t.recipients=e.recipients.map(kg)),e.unprotected&&(t.unprotected=e.unprotected),t}(e)}return new Uint8Array(Jb(t))}function Rg(e){var t,r;try{t=Xb(e)}catch(n){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(r=t)&&r.payload instanceof Uint8Array&&"signatures"in r&&Array.isArray(r.signatures))return function(e){var t={payload:bg(e.payload),signatures:e.signatures.map(wg)};return t.link=bv.decode(new Uint8Array(e.payload)),t}(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return function(e){var t={ciphertext:bg(e.ciphertext),protected:bg(e.protected),iv:bg(e.iv),tag:bg(e.tag)};return e.aad&&(t.aad=bg(e.aad)),e.recipients&&(t.recipients=e.recipients.map(xg)),e.unprotected&&(t.unprotected=e.unprotected),t}(t);throw new Error("Not a valid DAG-JOSE object")}var Ig=Hd,Pg={code:0,name:"identity",encode:Ig,digest:function(e){return Wd(0,Ig(e))}},Dg=nv({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Ng=iv({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Og=iv({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Lg=av({prefix:"9",name:"base10",alphabet:"0123456789"}),Bg=iv({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Mg=iv({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Ug=av({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jg=av({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Fg=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),zg=Fg.reduce((function(e,t,r){return e[r]=t,e}),[]),Zg=Fg.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var qg=nv({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=zg[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Zg[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),Vg=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Kg=eg({name:"sha2-256",code:18,encode:Vg("SHA-256")}),Hg=eg({name:"sha2-512",code:19,encode:Vg("SHA-512")}),Wg="raw",Gg=85,Yg=function(e){return Hd(e)},Qg=function(e){return Hd(e)},Jg=new TextEncoder,Xg=new TextDecoder,$g="json",em=512,tm=function(e){return Jg.encode(JSON.stringify(e))},rm=function(e){return JSON.parse(Xg.decode(e))},nm=So(So(So(So(So(So(So(So(So(So({},u),c),l),f),p),t),h),e),a),d),am=So(So({},v),s),im={raw:y,json:b};var om=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not initialized";return xn(this,r),(e=t.call(this,n)).name="NotInitializedError",e.code=r.code,e}return Sn(r)}(On(Error));om.code="ERR_NOT_INITIALIZED";var sm=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot initialize an initializing node";return xn(this,r),(e=t.call(this,n)).name="AlreadyInitializingError",e.code=um.code,e}return Sn(r)}(On(Error));sm.code="ERR_ALREADY_INITIALIZING";var um=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot re-initialize an initialized node";return xn(this,r),(e=t.call(this,n)).name="AlreadyInitializedError",e.code=r.code,e}return Sn(r)}(On(Error));um.code="ERR_ALREADY_INITIALIZED";var cm=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not started";return xn(this,r),(e=t.call(this,n)).name="NotStartedError",e.code=r.code,e}return Sn(r)}(On(Error));cm.code="ERR_NOT_STARTED";var lm=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot start, already startin";return xn(this,r),(e=t.call(this,n)).name="AlreadyStartingError",e.code=r.code,e}return Sn(r)}(On(Error));lm.code="ERR_ALREADY_STARTING";var fm=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot start, already started";return xn(this,r),(e=t.call(this,n)).name="AlreadyStartedError",e.code=r.code,e}return Sn(r)}(On(Error));fm.code="ERR_ALREADY_STARTED";var pm=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not enabled";return xn(this,r),(e=t.call(this,n)).name="NotEnabledError",e.code=r.code,e}return Sn(r)}(On(Error));pm.code="ERR_NOT_ENABLED";var hm=__webpack_require__(3089);function dm(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var vm=dm("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),ym=dm("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){e=e.substring(1);for(var t=(0,hm.E)(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),bm=So({utf8:vm,"utf-8":vm,hex:nm.base16,latin1:ym,ascii:ym,binary:ym},nm),gm=__webpack_require__(1799);function mm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=bm[t];if(!r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):(0,gm.P)(globalThis.Buffer.from(e,"utf-8"))}var wm=__webpack_require__(7683);function km(e){return new qh(e,0)}function xm(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new _m(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function _m(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return _m=function(e){this.s=e,this.n=e.next},_m.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new _m(e)}var Em=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Sm=Em,Am=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Cm=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Tm=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Im(this,e)}}]),e}(),Rm=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return Im(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Im=function(e,t){return new Rm(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},Pm=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Cm(t,r,n),this.decoder=new Tm(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Dm=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new Pm(t,r,n,a)},Nm=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Sm(n,r),i=a.encode,o=a.decode;return Dm({prefix:t,name:r,encode:i,decode:function(e){return Am(o(e))}})},Om=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Dm({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},Lm=Nm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bm=(Nm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Om({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),Mm=(Om({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Om({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Om({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Om({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Om({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Om({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Om({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Om({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Fm;)r[n++]=255&t|Um,t/=128;for(;t&jm;)r[n++]=255&t|Um,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r}),Um=128,jm=-128,Fm=Math.pow(2,31);var zm=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&qm)<<i:(n&qm)*Math.pow(2,i),i+=7}while(n>=Zm);return e.bytes=o-r,a},Zm=128,qm=127;var Vm=Math.pow(2,7),Km=Math.pow(2,14),Hm=Math.pow(2,21),Wm=Math.pow(2,28),Gm=Math.pow(2,35),Ym=Math.pow(2,42),Qm=Math.pow(2,49),Jm=Math.pow(2,56),Xm=Math.pow(2,63),$m={encode:Mm,decode:zm,encodingLength:function(e){return e<Vm?1:e<Km?2:e<Hm?3:e<Wm?4:e<Gm?5:e<Ym?6:e<Qm?7:e<Jm?8:e<Xm?9:10}},ew=$m,tw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[ew.decode(e,t),ew.decode.bytes]},rw=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ew.encode(e,t,r),t},nw=function(e){return ew.encodingLength(e)},aw=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),iw=function(){function e(){xn(this,e),(0,oi.Z)(this,"index",0),(0,oi.Z)(this,"input","")}return Sn(e,[{key:"new",value:function(e){return this.index=0,this.input=e,this}},{key:"readAtomically",value:function(e){var t=this.index,r=e();return void 0===r&&(this.index=t),r}},{key:"parseWith",value:function(e){var t=e();if(this.index===this.input.length)return t}},{key:"peekChar",value:function(){if(!(this.index>=this.input.length))return this.input[this.index]}},{key:"readChar",value:function(){if(!(this.index>=this.input.length))return this.input[this.index++]}},{key:"readGivenChar",value:function(e){var t=this;return this.readAtomically((function(){var r=t.readChar();if(r===e)return r}))}},{key:"readSeparator",value:function(e,t,r){var n=this;return this.readAtomically((function(){if(!(t>0&&void 0===n.readGivenChar(e)))return r()}))}},{key:"readNumber",value:function(e,t,r,n){var a=this;return this.readAtomically((function(){var i=0,o=0,s=a.peekChar();if(void 0!==s){for(var u="0"===s,c=Math.pow(2,8*n)-1;;){var l=a.readAtomically((function(){var t=a.readChar();if(void 0!==t){var r=Number.parseInt(t,e);if(!Number.isNaN(r))return r}}));if(void 0===l)break;if(i*=e,(i+=l)>c)return;if(o+=1,void 0!==t&&o>t)return}return 0===o||!r&&u&&o>1?void 0:i}}))}},{key:"readIPv4Addr",value:function(){var e=this;return this.readAtomically((function(){for(var t=new Uint8Array(4),r=0;r<t.length;r++){var n=e.readSeparator(".",r,(function(){return e.readNumber(10,3,!1,1)}));if(void 0===n)return;t[r]=n}return t}))}},{key:"readIPv6Addr",value:function(){var e=this,t=function(t){for(var r=0;r<t.length/2;r++){var n=2*r;if(r<t.length-3){var a=e.readSeparator(":",r,(function(){return e.readIPv4Addr()}));if(void 0!==a)return t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3],[n+4,!0]}var i=e.readSeparator(":",r,(function(){return e.readNumber(16,4,!0,2)}));if(void 0===i)return[n,!1];t[n]=i>>8,t[n+1]=255&i}return[t.length,!1]};return this.readAtomically((function(){var r=new Uint8Array(16),n=t(r),a=(0,wn.Z)(n,2),i=a[0],o=a[1];if(16===i)return r;if(!o&&void 0!==e.readGivenChar(":")&&void 0!==e.readGivenChar(":")){var s=new Uint8Array(14),u=16-(i+2),c=t(s.subarray(0,u)),l=(0,wn.Z)(c,1)[0];return r.set(s.subarray(0,l),16-l),r}}))}},{key:"readIPAddr",value:function(){var e;return null!==(e=this.readIPv4Addr())&&void 0!==e?e:this.readIPv6Addr()}}]),e}(),ow=45,sw=15,uw=new iw;function cw(e){return Boolean(function(e){if(!(e.length>sw))return uw.new(e).parseWith((function(){return uw.readIPv4Addr()}))}(e))}function lw(e){return Boolean(function(e){if(!(e.length>ow))return uw.new(e).parseWith((function(){return uw.readIPv6Addr()}))}(e))}function fw(e){return Boolean(function(e){if(!(e.length>ow))return uw.new(e).parseWith((function(){return uw.readIPAddr()}))}(e))}var pw=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},hw=pw,dw=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),vw=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),yw=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return gw(this,e)}}]),e}(),bw=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return gw(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),gw=function(e,t){return new bw(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},mw=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new vw(t,r,n),this.decoder=new yw(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),ww=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new mw(t,r,n,a)},kw=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=hw(n,r),i=a.encode,o=a.decode;return ww({prefix:t,name:r,encode:i,decode:function(e){return dw(o(e))}})},xw=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return ww({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},_w=ww({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Ew=xw({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Sw=xw({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Aw=kw({prefix:"9",name:"base10",alphabet:"0123456789"}),Cw=xw({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tw=xw({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Rw=xw({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Iw=xw({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pw=xw({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Dw=xw({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Nw=xw({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ow=xw({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Lw=xw({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bw=xw({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Mw=xw({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Uw=kw({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jw=kw({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Fw=kw({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zw=kw({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Zw=xw({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qw=xw({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Vw=xw({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Kw=xw({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Hw=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Ww=Hw.reduce((function(e,t,r){return e[r]=t,e}),[]),Gw=Hw.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Yw=ww({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Ww[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Gw[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),Qw=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=$w;)r[n++]=255&t|Jw,t/=128;for(;t&Xw;)r[n++]=255&t|Jw,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Jw=128,Xw=-128,$w=Math.pow(2,31);var ek=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&rk)<<i:(n&rk)*Math.pow(2,i),i+=7}while(n>=tk);return e.bytes=o-r,a},tk=128,rk=127;var nk=Math.pow(2,7),ak=Math.pow(2,14),ik=Math.pow(2,21),ok=Math.pow(2,28),sk=Math.pow(2,35),uk=Math.pow(2,42),ck=Math.pow(2,49),lk=Math.pow(2,56),fk=Math.pow(2,63),pk={encode:Qw,decode:ek,encodingLength:function(e){return e<nk?1:e<ak?2:e<ik?3:e<ok?4:e<sk?5:e<uk?6:e<ck?7:e<lk?8:e<fk?9:10}},hk=pk,dk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[hk.decode(e,t),hk.decode.bytes]},vk=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return hk.encode(e,t,r),t},yk=function(e){return hk.encodingLength(e)},bk=function(e,t){var r=t.byteLength,n=yk(e),a=n+yk(r),i=new Uint8Array(a+r);return vk(e,i,0),vk(r,i,n),i.set(t,a),new mk(e,r,t,i)},gk=function(e){var t=dw(e),r=dk(t),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=dk(t.subarray(i)),s=(0,wn.Z)(o,2),u=s[0],c=s[1],l=t.subarray(i+c);if(l.byteLength!==u)throw new Error("Incorrect length");return new mk(a,u,l,t)},mk=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),wk=function(e){var t=e.name,r=e.code,n=e.encode;return new kk(t,r,n)},kk=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?bk(this.code,r):r.then((function(e){return bk(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),xk=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_k=wk({name:"sha2-256",code:18,encode:xk("SHA-256")}),Ek=wk({name:"sha2-512",code:19,encode:xk("SHA-512")}),Sk=dw,Ak={code:0,name:"identity",encode:Sk,digest:function(e){return bk(0,Sk(e))}},Ck="raw",Tk=85,Rk=function(e){return dw(e)},Ik=function(e){return dw(e)},Pk=new TextEncoder,Dk=new TextDecoder,Nk="json",Ok=512,Lk=function(e){return Pk.encode(JSON.stringify(e))},Bk=function(e){return JSON.parse(Dk.decode(e))},Mk=function(e,t){var r=e.bytes;return 0===e.version?Zk(r,jk(e),t||Fw.encoder):qk(r,jk(e),t||Rw.encoder)},Uk=new WeakMap,jk=function(e){var t=Uk.get(e);if(null==t){var r=new Map;return Uk.set(e,r),r}return t},Fk=function(e,t){function r(e,t,n,a){xn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Sn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==Vk)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Kk)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=bk(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return Mk(this,e)}},{key:"toJSON",value:function(){return{"/":Mk(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||Hk(n,a,i.bytes))}if(!0===t[Wk]){var o=t.version,s=t.multihash,u=t.code,c=gk(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Vk)throw new Error("Version 0 CID must use dag-pb (code: ".concat(Vk,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,Hk(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,Vk,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=r.decodeFirst(e),n=(0,wn.Z)(t,2),a=n[0];if(n[1].length)throw new Error("Incorrect length");return a}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=dw(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new mk(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=dk(e.subarray(t)),n=(0,wn.Z)(r,2),a=n[0],i=n[1];return t+=i,a},n=r(),a=Vk;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=zk(e,t),a=(0,wn.Z)(n,2),i=a[0],o=a[1],s=r.decode(o);if(0===s.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return jk(s).set(i,e),s}}]),r}(),zk=function(e,t){switch(e[0]){case"Q":var r=t||Fw;return[Fw.prefix,r.decode("".concat(Fw.prefix).concat(e))];case Fw.prefix:var n=t||Fw;return[Fw.prefix,n.decode(e)];case Rw.prefix:var a=t||Rw;return[Rw.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Zk=function(e,t,r){var n=r.prefix;if(n!==Fw.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},qk=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},Vk=112,Kk=18,Hk=function(e,t,r){var n=yk(e),a=n+yk(t),i=new Uint8Array(a+r.byteLength);return vk(e,i,0),vk(t,i,n),i.set(r,a),i},Wk=Symbol.for("@ipld/js-cid/CID"),Gk=So(So(So(So(So(So(So(So(So(So({},g),m),w),k),x),_),E),S),A),C);So(So({},T),R);function Yk(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Qk(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Yk(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Jk(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Xk=Jk("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),$k=Jk("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=Qk((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),ex=So({utf8:Xk,"utf-8":Xk,hex:Gk.base16,latin1:$k,ascii:$k,binary:$k},Gk);function tx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=ex[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var rx=cw,nx=lw,ax=function e(t){var r=0;if(t=t.toString().trim(),rx(t)){var n=new Uint8Array(r+4);return t.split(/\./g).forEach((function(e){n[r++]=255&parseInt(e,10)})),n}if(nx(t)){var a,i=t.split(":",8);for(a=0;a<i.length;a++){var o=void 0;rx(i[a])&&(o=e(i[a]),i[a]=tx(o.slice(0,2),"base16")),null!=o&&++a<8&&i.splice(a,0,tx(o.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(a=0;a<i.length&&""!==i[a];a++);var s=[a,1];for(a=9-i.length;a>0;a--)s.push("0");i.splice.apply(i,s)}var u=new Uint8Array(r+16);for(a=0;a<i.length;a++){var c=parseInt(i[a],16);u[r++]=c>>8&255,u[r++]=255&c}return u}throw new Error("invalid ip address")},ix=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;r=~~r,n=null!==(t=n)&&void 0!==t?t:e.length-r;var a=new DataView(e.buffer);if(4===n){for(var i=[],o=0;o<n;o++)i.push(e[r+o]);return i.join(".")}if(16===n){for(var s=[],u=0;u<n;u+=2)s.push(a.getUint16(r+u).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},ox=-1,sx={},ux={};function cx(e,t,r,n,a){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(a)}}function lx(e){if("number"===typeof e){if(null!=ux[e])return ux[e];throw new Error("no protocol with code: ".concat(e))}if("string"===typeof e){if(null!=sx[e])return sx[e];throw new Error("no protocol with name: ".concat(e))}throw new Error("invalid protocol id type: ".concat(typeof e))}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,ox,"ip6zone"],[43,8,"ipcidr"],[53,ox,"dns",!0],[54,ox,"dns4",!0],[55,ox,"dns6",!0],[56,ox,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,ox,"unix",!1,!0],[421,ox,"ipfs"],[421,ox,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,ox,"garlic64"],[448,0,"tls"],[449,ox,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,ox,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,ox,"memory"]].forEach((function(e){var t=cx.apply(void 0,(0,kn.Z)(e));ux[t.code]=t,sx[t.name]=t}));var fx=__webpack_require__(4561);function px(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=ex[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):Yk(globalThis.Buffer.from(e,"utf-8"))}function hx(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var r,n=Qk(t),a=0,i=(0,zn.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set(o,a),a+=o.length}}catch(sY){i.e(sY)}finally{i.f()}return Yk(n)}function dx(e,t){switch(lx(e).code){case 4:case 41:return function(e){var t=ix(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!fw(t))throw new Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return xx(t);case 6:case 273:case 33:case 132:return wx(t).toString();case 421:return function(e){var t=fx.decode(e),r=e.slice(fx.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return tx(r,"base58btc")}(t);case 444:case 445:return _x(t);case 466:return function(e){var t=fx.decode(e),r=e.slice(fx.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+tx(r,"base64url")}(t);default:return tx(t,"base16")}}function vx(e,t){switch(lx(e).code){case 4:case 41:return gx(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return kx(t);case 6:case 273:case 33:case 132:return mx(parseInt(t,10));case 421:return function(e){var t;t="Q"===e[0]||"1"===e[0]?gk(Fw.decode("z".concat(e))).bytes:Fk.parse(e).multihash.bytes;var r=Uint8Array.from(fx.encode(t.length));return hx([r,t],r.length+t.length)}(t);case 444:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(16!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion address."));var r=Rw.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=mx(n);return hx([r,a],r.length+a.length)}(t);case 445:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(56!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion3 address."));var r=Rw.decode("b".concat(t[0])),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=mx(n);return hx([r,a],r.length+a.length)}(t);case 466:return function(e){var t=bx.decode(e),r=Uint8Array.from(fx.encode(t.length));return hx([r,t],r.length+t.length)}(t);default:return px(t,"base16")}}var yx=Object.values(Gk).map((function(e){return e.decoder})),bx=function(){var e=yx[0].or(yx[1]);return yx.slice(2).forEach((function(t){return e=e.or(t)})),e}();function gx(e){if(!fw(e))throw new Error("invalid ip address");return ax(e)}function mx(e){var t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function wx(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function kx(e){var t=px(e),r=Uint8Array.from(fx.encode(t.length));return hx([r,t],r.length+t.length)}function xx(e){var t=fx.decode(e);if((e=e.slice(fx.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return tx(e)}function _x(e){var t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=tx(t,"base32"),a=wx(r);return"".concat(n,":").concat(a)}function Ex(e){return e.map((function(e){var t=Ox(e);return null!=e[1]?[t.code,dx(t.code,e[1])]:[t.code]}))}function Sx(e){return Ix(hx(e.map((function(e){var t=Ox(e),r=Uint8Array.from(fx.encode(t.code));return e.length>1&&null!=e[1]&&(r=hx([r,e[1]])),r}))))}function Ax(e,t){return e.size>0?e.size/8:0===e.size?0:fx.decode(t)+(null!==(r=fx.decode.bytes)&&void 0!==r?r:0);var r}function Cx(e){for(var t=[],r=0;r<e.length;){var n,a=fx.decode(e,r),i=null!==(n=fx.decode.bytes)&&void 0!==n?n:0,o=Ax(lx(a),e.slice(r+i));if(0!==o){var s=e.slice(r+i,r+i+o);if((r+=o+i)>e.length)throw Nx("Invalid address Uint8Array: "+tx(e,"base16"));t.push([a,s])}else t.push([a]),r+=i}return t}function Tx(e){return function(e){var t=[];return e.map((function(e){var r=Ox(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),Dx(t.join("/"))}(Ex(Cx(e)))}function Rx(e){var t=function(e){var t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(var n=0;n<r.length;n++){var a=r[n],i=lx(a);if(0!==i.size){if(++n>=r.length)throw Nx("invalid address: "+e);if(!0===i.path){t.push([a,Dx(r.slice(n).join("/"))]);break}t.push([a,r[n]])}else t.push([a])}return t}(e=Dx(e));return Sx(t.map((function(e){Array.isArray(e)||(e=[e]);var t=Ox(e);return e.length>1?[t.code,vx(t.code,e[1])]:[t.code]})))}function Ix(e){var t=Px(e);if(null!=t)throw t;return Uint8Array.from(e)}function Px(e){try{Cx(e)}catch(sY){return sY}}function Dx(e){return"/"+e.trim().split("/").filter((function(e){return e})).join("/")}function Nx(e){return new Error("Error parsing address: "+e)}function Ox(e){return lx(e[0])}var Lx,Bx,Mx,Ux,jx=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},Fx=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},zx=Symbol.for("nodejs.util.inspect.custom"),Zx=[lx("dns").code,lx("dns4").code,lx("dns6").code,lx("dnsaddr").code],qx=new Map,Vx=Symbol.for("@multiformats/js-multiaddr/multiaddr");function Kx(e,t){if(null==e)throw new Error("requires node address object");if(null==t)throw new Error("requires transport protocol");var r,n=e.address;switch(e.family){case 4:r="ip4";break;case 6:if(r="ip6",n.includes("%")){var a=n.split("%");if(2!==a.length)throw Error("Multiple ip6 zones in multiaddr");n=a[0];var i=a[1];r="/ip6zone/".concat(i,"/ip6")}break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new Wx("/"+[r,n,t,e.port].join("/"))}function Hx(e){return Boolean(null===e||void 0===e?void 0:e[Vx])}var Wx=function(e){function t(e){if(xn(this,t),Lx.set(this,void 0),Bx.set(this,void 0),Mx.set(this,void 0),this[Ux]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=Ix(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error('multiaddr "'.concat(e,'" must start with a "/"'));this.bytes=Rx(e)}else{if(!Hx(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=Ix(e.bytes)}}return Sn(t,[{key:"toString",value:function(){return null==jx(this,Lx,"f")&&Fx(this,Lx,Tx(this.bytes),"f"),jx(this,Lx,"f")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toOptions",value:function(){var e,t,r,n,a,i="",o=lx("tcp"),s=lx("udp"),u=lx("ip4"),c=lx("ip6"),l=lx("dns6"),f=lx("ip6zone"),p=(0,zn.Z)(this.stringTuples());try{for(p.s();!(a=p.n()).done;){var h=(0,wn.Z)(a.value,2),d=h[0],v=h[1];d===f.code&&(i="%".concat(null!==v&&void 0!==v?v:"")),Zx.includes(d)&&(t=o.name,n=443,r="".concat(null!==v&&void 0!==v?v:"").concat(i),e=d===l.code?6:4),d!==o.code&&d!==s.code||(t=lx(d).name,n=parseInt(null!==v&&void 0!==v?v:"")),d!==u.code&&d!==c.code||(t=lx(d).name,r="".concat(null!==v&&void 0!==v?v:"").concat(i),e=d===c.code?6:4)}}catch(sY){p.e(sY)}finally{p.f()}if(null==e||null==t||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:r,transport:t,port:n}}},{key:"protos",value:function(){return this.protoCodes().map((function(e){return Object.assign({},lx(e))}))}},{key:"protoCodes",value:function(){for(var e=[],t=this.bytes,r=0;r<t.length;){var n,a=fx.decode(t,r),i=null!==(n=fx.decode.bytes)&&void 0!==n?n:0;r+=Ax(lx(a),t.slice(r+i))+i,e.push(a)}return e}},{key:"protoNames",value:function(){return this.protos().map((function(e){return e.name}))}},{key:"tuples",value:function(){return null==jx(this,Bx,"f")&&Fx(this,Bx,Cx(this.bytes),"f"),jx(this,Bx,"f")}},{key:"stringTuples",value:function(){return null==jx(this,Mx,"f")&&Fx(this,Mx,Ex(this.tuples()),"f"),jx(this,Mx,"f")}},{key:"encapsulate",value:function(e){return e=new t(e),new t(this.toString()+e.toString())}},{key:"decapsulate",value:function(e){var r=e.toString(),n=this.toString(),a=n.lastIndexOf(r);if(a<0)throw new Error("Address ".concat(this.toString()," does not contain subaddress: ").concat(e.toString()));return new t(n.slice(0,a))}},{key:"decapsulateCode",value:function(e){for(var r=this.tuples(),n=r.length-1;n>=0;n--)if(r[n][0]===e)return new t(Sx(r.slice(0,n)));return this}},{key:"getPeerId",value:function(){try{var e=this.stringTuples().filter((function(e){return e[0]===sx.ipfs.code})),t=e.pop();if(null!=(null===t||void 0===t?void 0:t[1])){var r=t[1];return"Q"===r[0]||"1"===r[0]?tx(Fw.decode("z".concat(r)),"base58btc"):tx(Fk.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}},{key:"getPath",value:function(){var e=null;try{null==(e=this.stringTuples().filter((function(e){return!0===lx(e[0]).path}))[0][1])&&(e=null)}catch(t){e=null}return e}},{key:"equals",value:function(e){return function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(this.bytes,e.bytes)}},{key:"resolve",value:function(){var e=Zh(Fh().mark((function e(r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.protos().find((function(e){return e.resolvable})))){e.next=3;break}return e.abrupt("return",[this]);case 3:if(null!=(a=qx.get(n.name))){e.next=6;break}throw cd(new Error("no available resolver for ".concat(n.name)),"ERR_NO_AVAILABLE_RESOLVER");case 6:return e.next=8,a(this,r);case 8:return i=e.sent,e.abrupt("return",i.map((function(e){return new t(e)})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nodeAddress",value:function(){var e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error('multiaddr must have a valid format - no protocol with name: "'.concat(e.transport,'". Must have a valid transport protocol: "{tcp, udp}"'));return{family:e.family,address:e.host,port:e.port}}},{key:"isThinWaistAddress",value:function(e){var t=(null!==e&&void 0!==e?e:this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}},{key:e,value:function(){return"Multiaddr(".concat(Tx(this.bytes),")")}}]),t}((Lx=new WeakMap,Bx=new WeakMap,Mx=new WeakMap,Ux=Vx,zx));function Gx(e){return new Wx(e)}var Yx=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Qx=Yx,Jx=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Xx=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),$x=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return t_(this,e)}}]),e}(),e_=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return t_(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),t_=function(e,t){return new e_(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},r_=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Xx(t,r,n),this.decoder=new $x(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),n_=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new r_(t,r,n,a)},a_=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Qx(n,r),i=a.encode,o=a.decode;return n_({prefix:t,name:r,encode:i,decode:function(e){return Jx(o(e))}})},i_=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return n_({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},o_=n_({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),s_=i_({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),u_=i_({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),c_=a_({prefix:"9",name:"base10",alphabet:"0123456789"}),l_=i_({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),f_=i_({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),p_=i_({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),h_=i_({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),d_=i_({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),v_=i_({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),y_=i_({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),b_=i_({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),g_=i_({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),m_=i_({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),w_=i_({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),k_=a_({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),x_=a_({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),__=a_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),E_=a_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),S_=i_({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),A_=i_({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),C_=i_({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),T_=i_({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),R_=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),I_=R_.reduce((function(e,t,r){return e[r]=t,e}),[]),P_=R_.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var D_=n_({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=I_[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=P_[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),N_=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=B_;)r[n++]=255&t|O_,t/=128;for(;t&L_;)r[n++]=255&t|O_,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},O_=128,L_=-128,B_=Math.pow(2,31);var M_=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&j_)<<i:(n&j_)*Math.pow(2,i),i+=7}while(n>=U_);return e.bytes=o-r,a},U_=128,j_=127;var F_=Math.pow(2,7),z_=Math.pow(2,14),Z_=Math.pow(2,21),q_=Math.pow(2,28),V_=Math.pow(2,35),K_=Math.pow(2,42),H_=Math.pow(2,49),W_=Math.pow(2,56),G_=Math.pow(2,63),Y_={encode:N_,decode:M_,encodingLength:function(e){return e<F_?1:e<z_?2:e<Z_?3:e<q_?4:e<V_?5:e<K_?6:e<H_?7:e<W_?8:e<G_?9:10}},Q_=Y_,J_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[Q_.decode(e,t),Q_.decode.bytes]},X_=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Q_.encode(e,t,r),t},$_=function(e){return Q_.encodingLength(e)},eE=function(e,t){var r=t.byteLength,n=$_(e),a=n+$_(r),i=new Uint8Array(a+r);return X_(e,i,0),X_(r,i,n),i.set(t,a),new rE(e,r,t,i)},tE=function(e){var t=Jx(e),r=J_(t),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=J_(t.subarray(i)),s=(0,wn.Z)(o,2),u=s[0],c=s[1],l=t.subarray(i+c);if(l.byteLength!==u)throw new Error("Incorrect length");return new rE(a,u,l,t)},rE=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),nE=function(e){var t=e.name,r=e.code,n=e.encode;return new aE(t,r,n)},aE=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?eE(this.code,r):r.then((function(e){return eE(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),iE=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},oE=nE({name:"sha2-256",code:18,encode:iE("SHA-256")}),sE=nE({name:"sha2-512",code:19,encode:iE("SHA-512")}),uE=Jx,cE={code:0,name:"identity",encode:uE,digest:function(e){return eE(0,uE(e))}},lE="raw",fE=85,pE=function(e){return Jx(e)},hE=function(e){return Jx(e)},dE=new TextEncoder,vE=new TextDecoder,yE="json",bE=512,gE=function(e){return dE.encode(JSON.stringify(e))},mE=function(e){return JSON.parse(vE.decode(e))},wE=function(e,t){var r=e.bytes;return 0===e.version?SE(r,xE(e),t||__.encoder):AE(r,xE(e),t||p_.encoder)},kE=new WeakMap,xE=function(e){var t=kE.get(e);if(null==t){var r=new Map;return kE.set(e,r),r}return t},_E=function(e,t){function r(e,t,n,a){xn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Sn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==CE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==TE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=eE(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return wE(this,e)}},{key:"toJSON",value:function(){return{"/":wE(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||RE(n,a,i.bytes))}if(!0===t[IE]){var o=t.version,s=t.multihash,u=t.code,c=tE(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==CE)throw new Error("Version 0 CID must use dag-pb (code: ".concat(CE,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,RE(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,CE,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=r.decodeFirst(e),n=(0,wn.Z)(t,2),a=n[0];if(n[1].length)throw new Error("Incorrect length");return a}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Jx(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new rE(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=J_(e.subarray(t)),n=(0,wn.Z)(r,2),a=n[0],i=n[1];return t+=i,a},n=r(),a=CE;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=EE(e,t),a=(0,wn.Z)(n,2),i=a[0],o=a[1],s=r.decode(o);if(0===s.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return xE(s).set(i,e),s}}]),r}(),EE=function(e,t){switch(e[0]){case"Q":var r=t||__;return[__.prefix,r.decode("".concat(__.prefix).concat(e))];case __.prefix:var n=t||__;return[__.prefix,n.decode(e)];case p_.prefix:var a=t||p_;return[p_.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},SE=function(e,t,r){var n=r.prefix;if(n!==__.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},AE=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},CE=112,TE=18,RE=function(e,t,r){var n=$_(e),a=n+$_(t),i=new Uint8Array(a+r.byteLength);return X_(e,i,0),X_(t,i,n),i.set(r,a),i},IE=Symbol.for("@ipld/js-cid/CID"),PE=So(So(So(So(So(So(So(So(So(So({},D),N),O),L),B),M),U),j),F),z);So(So({},Z),q);function DE(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function NE(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?DE(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function OE(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var LE=OE("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),BE=OE("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=NE((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),ME=So({utf8:LE,"utf-8":LE,hex:PE.base16,latin1:BE,ascii:BE,binary:BE},PE);function UE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=ME[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var jE=cw,FE=lw,zE=function e(t){var r=0;if(t=t.toString().trim(),jE(t)){var n=new Uint8Array(r+4);return t.split(/\./g).forEach((function(e){n[r++]=255&parseInt(e,10)})),n}if(FE(t)){var a,i=t.split(":",8);for(a=0;a<i.length;a++){var o=void 0;jE(i[a])&&(o=e(i[a]),i[a]=UE(o.slice(0,2),"base16")),null!=o&&++a<8&&i.splice(a,0,UE(o.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(a=0;a<i.length&&""!==i[a];a++);var s=[a,1];for(a=9-i.length;a>0;a--)s.push("0");i.splice.apply(i,s)}var u=new Uint8Array(r+16);for(a=0;a<i.length;a++){var c=parseInt(i[a],16);u[r++]=c>>8&255,u[r++]=255&c}return u}throw new Error("invalid ip address")},ZE=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;r=~~r,n=null!==(t=n)&&void 0!==t?t:e.length-r;var a=new DataView(e.buffer);if(4===n){for(var i=[],o=0;o<n;o++)i.push(e[r+o]);return i.join(".")}if(16===n){for(var s=[],u=0;u<n;u+=2)s.push(a.getUint16(r+u).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},qE=-1,VE={},KE={};function HE(e,t,r,n,a){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(a)}}function WE(e){if("number"===typeof e){if(null!=KE[e])return KE[e];throw new Error("no protocol with code: ".concat(e))}if("string"===typeof e){if(null!=VE[e])return VE[e];throw new Error("no protocol with name: ".concat(e))}throw new Error("invalid protocol id type: ".concat(typeof e))}function GE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=ME[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):DE(globalThis.Buffer.from(e,"utf-8"))}function YE(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var r,n=NE(t),a=0,i=(0,zn.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set(o,a),a+=o.length}}catch(sY){i.e(sY)}finally{i.f()}return DE(n)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,qE,"ip6zone"],[43,8,"ipcidr"],[53,qE,"dns",!0],[54,qE,"dns4",!0],[55,qE,"dns6",!0],[56,qE,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,qE,"unix",!1,!0],[421,qE,"ipfs"],[421,qE,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,qE,"garlic64"],[448,0,"tls"],[449,qE,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,qE,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,qE,"memory"]].forEach((function(e){var t=HE.apply(void 0,(0,kn.Z)(e));KE[t.code]=t,VE[t.name]=t}));parseInt("0xFFFF",16),new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);WE("ip4"),WE("ip6"),WE("ipcidr");function QE(e,t){switch(WE(e).code){case 4:case 41:return function(e){var t=ZE(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!fw(t))throw new Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return aS(t);case 6:case 273:case 33:case 132:return rS(t).toString();case 421:return function(e){var t=fx.decode(e),r=e.slice(fx.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return UE(r,"base58btc")}(t);case 444:case 445:return iS(t);case 466:return function(e){var t=fx.decode(e),r=e.slice(fx.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+UE(r,"base64url")}(t);default:return UE(t,"base16")}}function JE(e,t){switch(WE(e).code){case 4:case 41:return eS(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return nS(t);case 6:case 273:case 33:case 132:return tS(parseInt(t,10));case 421:return function(e){var t;t="Q"===e[0]||"1"===e[0]?tE(__.decode("z".concat(e))).bytes:_E.parse(e).multihash.bytes;var r=Uint8Array.from(fx.encode(t.length));return YE([r,t],r.length+t.length)}(t);case 444:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(16!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion address."));var r=p_.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=tS(n);return YE([r,a],r.length+a.length)}(t);case 445:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(56!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion3 address."));var r=p_.decode("b".concat(t[0])),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=tS(n);return YE([r,a],r.length+a.length)}(t);case 466:return function(e){var t=$E.decode(e),r=Uint8Array.from(fx.encode(t.length));return YE([r,t],r.length+t.length)}(t);default:return GE(t,"base16")}}var XE=Object.values(PE).map((function(e){return e.decoder})),$E=function(){var e=XE[0].or(XE[1]);return XE.slice(2).forEach((function(t){return e=e.or(t)})),e}();function eS(e){if(!fw(e))throw new Error("invalid ip address");return zE(e)}function tS(e){var t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function rS(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function nS(e){var t=GE(e),r=Uint8Array.from(fx.encode(t.length));return YE([r,t],r.length+t.length)}function aS(e){var t=fx.decode(e);if((e=e.slice(fx.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return UE(e)}function iS(e){var t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=UE(t,"base32"),a=rS(r);return"".concat(n,":").concat(a)}function oS(e){return e.map((function(e){var t=yS(e);return null!=e[1]?[t.code,QE(t.code,e[1])]:[t.code]}))}function sS(e){return pS(YE(e.map((function(e){var t=yS(e),r=Uint8Array.from(fx.encode(t.code));return e.length>1&&null!=e[1]&&(r=YE([r,e[1]])),r}))))}function uS(e,t){return e.size>0?e.size/8:0===e.size?0:fx.decode(t)+(null!==(r=fx.decode.bytes)&&void 0!==r?r:0);var r}function cS(e){for(var t=[],r=0;r<e.length;){var n,a=fx.decode(e,r),i=null!==(n=fx.decode.bytes)&&void 0!==n?n:0,o=uS(WE(a),e.slice(r+i));if(0!==o){var s=e.slice(r+i,r+i+o);if((r+=o+i)>e.length)throw vS("Invalid address Uint8Array: "+UE(e,"base16"));t.push([a,s])}else t.push([a]),r+=i}return t}function lS(e){return function(e){var t=[];return e.map((function(e){var r=yS(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),dS(t.join("/"))}(oS(cS(e)))}function fS(e){var t=function(e){var t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(var n=0;n<r.length;n++){var a=r[n],i=WE(a);if(0!==i.size){if(++n>=r.length)throw vS("invalid address: "+e);if(!0===i.path){t.push([a,dS(r.slice(n).join("/"))]);break}t.push([a,r[n]])}else t.push([a])}return t}(e=dS(e));return sS(t.map((function(e){Array.isArray(e)||(e=[e]);var t=yS(e);return e.length>1?[t.code,JE(t.code,e[1])]:[t.code]})))}function pS(e){var t=hS(e);if(null!=t)throw t;return Uint8Array.from(e)}function hS(e){try{cS(e)}catch(sY){return sY}}function dS(e){return"/"+e.trim().split("/").filter((function(e){return e})).join("/")}function vS(e){return new Error("Error parsing address: "+e)}function yS(e){return WE(e[0])}var bS=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted";return xn(this,r),e=t.call(this,n),(0,oi.Z)(Pn(e),"code",void 0),(0,oi.Z)(Pn(e),"type",void 0),e.code=r.code,e.type=r.type,e}return Sn(r)}(On(Error));(0,oi.Z)(bS,"code","ABORT_ERR"),(0,oi.Z)(bS,"type","aborted");var gS=function(e){Cn(r,e);var t=Dn(r);function r(e,n,a){var i,o;return xn(this,r),o=t.call(this,e),(0,oi.Z)(Pn(o),"code",void 0),(0,oi.Z)(Pn(o),"props",void 0),o.code=n,o.name=null!==(i=null===a||void 0===a?void 0:a.name)&&void 0!==i?i:"CodeError",o.props=null!==a&&void 0!==a?a:{},o}return Sn(r)}(On(Error));var mS,wS,kS,xS,_S,ES=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},SS=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},AS=Symbol.for("nodejs.util.inspect.custom"),CS=[WE("dns").code,WE("dns4").code,WE("dns6").code,WE("dnsaddr").code],TS=new Map,RS=Symbol.for("@multiformats/js-multiaddr/multiaddr");function IS(e){return Boolean(null===e||void 0===e?void 0:e[RS])}var PS=function(e){function t(e){if(xn(this,t),mS.set(this,void 0),wS.set(this,void 0),kS.set(this,void 0),xS.set(this,void 0),this[_S]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=pS(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error('multiaddr "'.concat(e,'" must start with a "/"'));this.bytes=fS(e)}else{if(!IS(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=pS(e.bytes)}}return Sn(t,[{key:"toString",value:function(){return null==ES(this,mS,"f")&&SS(this,mS,lS(this.bytes),"f"),ES(this,mS,"f")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toOptions",value:function(){var e,t,r,n,a,i="",o=WE("tcp"),s=WE("udp"),u=WE("ip4"),c=WE("ip6"),l=WE("dns6"),f=WE("ip6zone"),p=(0,zn.Z)(this.stringTuples());try{for(p.s();!(a=p.n()).done;){var h=(0,wn.Z)(a.value,2),d=h[0],v=h[1];d===f.code&&(i="%".concat(null!==v&&void 0!==v?v:"")),CS.includes(d)&&(t=o.name,n=443,r="".concat(null!==v&&void 0!==v?v:"").concat(i),e=d===l.code?6:4),d!==o.code&&d!==s.code||(t=WE(d).name,n=parseInt(null!==v&&void 0!==v?v:"")),d!==u.code&&d!==c.code||(t=WE(d).name,r="".concat(null!==v&&void 0!==v?v:"").concat(i),e=d===c.code?6:4)}}catch(sY){p.e(sY)}finally{p.f()}if(null==e||null==t||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:r,transport:t,port:n}}},{key:"protos",value:function(){return this.protoCodes().map((function(e){return Object.assign({},WE(e))}))}},{key:"protoCodes",value:function(){for(var e=[],t=this.bytes,r=0;r<t.length;){var n,a=fx.decode(t,r),i=null!==(n=fx.decode.bytes)&&void 0!==n?n:0;r+=uS(WE(a),t.slice(r+i))+i,e.push(a)}return e}},{key:"protoNames",value:function(){return this.protos().map((function(e){return e.name}))}},{key:"tuples",value:function(){return null==ES(this,wS,"f")&&SS(this,wS,cS(this.bytes),"f"),ES(this,wS,"f")}},{key:"stringTuples",value:function(){return null==ES(this,kS,"f")&&SS(this,kS,oS(this.tuples()),"f"),ES(this,kS,"f")}},{key:"encapsulate",value:function(e){return e=new t(e),new t(this.toString()+e.toString())}},{key:"decapsulate",value:function(e){var r=e.toString(),n=this.toString(),a=n.lastIndexOf(r);if(a<0)throw new Error("Address ".concat(this.toString()," does not contain subaddress: ").concat(e.toString()));return new t(n.slice(0,a))}},{key:"decapsulateCode",value:function(e){for(var r=this.tuples(),n=r.length-1;n>=0;n--)if(r[n][0]===e)return new t(sS(r.slice(0,n)));return this}},{key:"getPeerId",value:function(){try{var e=this.stringTuples().filter((function(e){return e[0]===VE.ipfs.code})),t=e.pop();if(null!=(null===t||void 0===t?void 0:t[1])){var r=t[1];return"Q"===r[0]||"1"===r[0]?UE(__.decode("z".concat(r)),"base58btc"):UE(_E.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}},{key:"getPath",value:function(){if(void 0===ES(this,xS,"f"))try{SS(this,xS,this.stringTuples().filter((function(e){return!0===WE(e[0]).path}))[0][1],"f"),null==ES(this,xS,"f")&&SS(this,xS,null,"f")}catch(e){SS(this,xS,null,"f")}return ES(this,xS,"f")}},{key:"equals",value:function(e){return function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(this.bytes,e.bytes)}},{key:"resolve",value:function(){var e=Zh(Fh().mark((function e(r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.protos().find((function(e){return e.resolvable})))){e.next=3;break}return e.abrupt("return",[this]);case 3:if(null!=(a=TS.get(n.name))){e.next=6;break}throw new gS("no available resolver for ".concat(n.name),"ERR_NO_AVAILABLE_RESOLVER");case 6:return e.next=8,a(this,r);case 8:return i=e.sent,e.abrupt("return",i.map((function(e){return new t(e)})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nodeAddress",value:function(){var e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error('multiaddr must have a valid format - no protocol with name: "'.concat(e.transport,'". Must have a valid transport protocol: "{tcp, udp}"'));return{family:e.family,address:e.host,port:e.port}}},{key:"isThinWaistAddress",value:function(e){var t=(null!==e&&void 0!==e?e:this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}},{key:e,value:function(){return"Multiaddr(".concat(lS(this.bytes),")")}}]),t}((mS=new WeakMap,wS=new WeakMap,kS=new WeakMap,xS=new WeakMap,_S=RS,AS));function DS(e){return new PS(e)}var NS=iA("dns4"),OS=iA("dns6"),LS=iA("dnsaddr"),BS=aA(iA("dns"),LS,NS,OS),MS=aA(iA("ip4"),iA("ip6")),US=aA(nA(MS,iA("tcp")),nA(BS,iA("tcp"))),jS=nA(MS,iA("udp")),FS=nA(jS,iA("utp")),zS=nA(jS,iA("quic")),ZS=aA(nA(US,iA("ws")),nA(BS,iA("ws"))),qS=aA(nA(US,iA("wss")),nA(BS,iA("wss")),nA(US,iA("tls"),iA("ws")),nA(BS,iA("tls"),iA("ws"))),VS=aA(nA(US,iA("http")),nA(MS,iA("http")),nA(BS,iA("http"))),KS=aA(nA(US,iA("https")),nA(MS,iA("https")),nA(BS,iA("https"))),HS=nA(jS,iA("webrtc"),iA("certhash")),WS=aA(nA(HS,iA("p2p")),HS),GS=aA(nA(ZS,iA("p2p-webrtc-star"),iA("p2p")),nA(qS,iA("p2p-webrtc-star"),iA("p2p")),nA(ZS,iA("p2p-webrtc-star")),nA(qS,iA("p2p-webrtc-star"))),YS=(aA(nA(ZS,iA("p2p-websocket-star"),iA("p2p")),nA(qS,iA("p2p-websocket-star"),iA("p2p")),nA(ZS,iA("p2p-websocket-star")),nA(qS,iA("p2p-websocket-star"))),aA(nA(VS,iA("p2p-webrtc-direct"),iA("p2p")),nA(KS,iA("p2p-webrtc-direct"),iA("p2p")),nA(VS,iA("p2p-webrtc-direct")),nA(KS,iA("p2p-webrtc-direct")))),QS=aA(ZS,qS,VS,KS,GS,YS,US,FS,zS,BS,WS),JS=(aA(nA(QS,iA("p2p-stardust"),iA("p2p")),nA(QS,iA("p2p-stardust"))),aA(nA(QS,iA("p2p")),GS,YS,WS,iA("p2p"))),XS=aA(nA(JS,iA("p2p-circuit"),JS),nA(JS,iA("p2p-circuit")),nA(iA("p2p-circuit"),JS),nA(QS,iA("p2p-circuit")),nA(iA("p2p-circuit"),QS),iA("p2p-circuit")),$S=function e(){return aA(nA(XS,e),XS)}(),eA=aA(nA($S,JS,$S),nA(JS,$S),nA($S,JS),$S,JS),tA=eA;function rA(e){return function(t){var r;try{r=DS(t)}catch(sY){return!1}var n=e(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function nA(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){if(e.length<t.length)return null;var r=e;return t.some((function(t){return r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:rA(n),partialMatch:n}}function aA(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){var r=null;return t.some((function(t){var n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:rA(n),partialMatch:n}}function iA(e){var t=e;return{toString:function(){return t},matches:function(e){var r;try{r=DS(e)}catch(sY){return!1}var n=r.protoNames();return 1===n.length&&n[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}var oA=new WeakMap,sA=function(e){var t=oA.get(e);if(null==t){var r=new Map;return oA.set(e,r),r}return t},uA=function(e,t){function r(e,t,n,a){xn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Sn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==pA)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==hA)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=function(e,t){var r=t.byteLength,n=nw(e),a=n+nw(r),i=new Uint8Array(a+r);return rw(e,i,0),rw(r,i,n),i.set(t,a),new aw(e,r,t,i)}(e.code,e.digest);return r.createV1(this.code,t);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return function(e,t){var r=e.bytes;return 0===e.version?lA(r,sA(e),t||Lm.encoder):fA(r,sA(e),t||Bm.encoder)}(this,e)}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||dA(n,a,i.bytes))}if(!0===t[vA]){var o=t.version,s=t.multihash,u=t.code,c=function(e){var t=Am(e),r=tw(t),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=tw(t.subarray(i)),s=(0,wn.Z)(o,2),u=s[0],c=s[1],l=t.subarray(i+c);if(l.byteLength!==u)throw new Error("Incorrect length");return new aw(a,u,l,t)}(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==pA)throw new Error("Version 0 CID must use dag-pb (code: ".concat(pA,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,dA(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,pA,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=r.decodeFirst(e),n=(0,wn.Z)(t,2),a=n[0];if(n[1].length)throw new Error("Incorrect length");return a}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=Am(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new aw(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=tw(e.subarray(t)),n=(0,wn.Z)(r,2),a=n[0],i=n[1];return t+=i,a},n=r(),a=pA;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=cA(e,t),a=(0,wn.Z)(n,2),i=a[0],o=a[1],s=r.decode(o);return sA(s).set(i,e),s}}]),r}(),cA=function(e,t){switch(e[0]){case"Q":var r=t||Lm;return[Lm.prefix,r.decode("".concat(Lm.prefix).concat(e))];case Lm.prefix:var n=t||Lm;return[Lm.prefix,n.decode(e)];case Bm.prefix:var a=t||Bm;return[Bm.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},lA=function(e,t,r){var n=r.prefix;if(n!==Lm.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},fA=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},pA=112,hA=18,dA=function(e,t,r){var n=nw(e),a=n+nw(t),i=new Uint8Array(a+r.byteLength);return rw(e,i,0),rw(t,i,n),i.set(r,a),i},vA=Symbol.for("@ipld/js-cid/CID"),yA=__webpack_require__(6791);var bA=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},gA=bA,mA=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),wA=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),kA=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return _A(this,e)}}]),e}(),xA=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return _A(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),_A=function(e,t){return new xA(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},EA=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new wA(t,r,n),this.decoder=new kA(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),SA=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new EA(t,r,n,a)},AA=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=gA(n,r),i=a.encode,o=a.decode;return SA({prefix:t,name:r,encode:i,decode:function(e){return mA(o(e))}})},CA=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return SA({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},TA=SA({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),RA=CA({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),IA=CA({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),PA=AA({prefix:"9",name:"base10",alphabet:"0123456789"}),DA=CA({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),NA=CA({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),OA=CA({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),LA=CA({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),BA=CA({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),MA=CA({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UA=CA({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),jA=CA({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),FA=CA({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zA=CA({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ZA=CA({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),qA=AA({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),VA=AA({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),KA=AA({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),HA=AA({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),WA=CA({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),GA=CA({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),YA=CA({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),QA=CA({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),JA=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),XA=JA.reduce((function(e,t,r){return e[r]=t,e}),[]),$A=JA.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var eC=SA({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=XA[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=$A[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),tC=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=aC;)r[n++]=255&t|rC,t/=128;for(;t&nC;)r[n++]=255&t|rC,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},rC=128,nC=-128,aC=Math.pow(2,31);var iC=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&sC)<<i:(n&sC)*Math.pow(2,i),i+=7}while(n>=oC);return e.bytes=o-r,a},oC=128,sC=127;var uC=Math.pow(2,7),cC=Math.pow(2,14),lC=Math.pow(2,21),fC=Math.pow(2,28),pC=Math.pow(2,35),hC=Math.pow(2,42),dC=Math.pow(2,49),vC=Math.pow(2,56),yC=Math.pow(2,63),bC={encode:tC,decode:iC,encodingLength:function(e){return e<uC?1:e<cC?2:e<lC?3:e<fC?4:e<pC?5:e<hC?6:e<dC?7:e<vC?8:e<yC?9:10}},gC=bC,mC=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gC.encode(e,t,r),t},wC=function(e){return gC.encodingLength(e)},kC=function(e,t){var r=t.byteLength,n=wC(e),a=n+wC(r),i=new Uint8Array(a+r);return mC(e,i,0),mC(r,i,n),i.set(t,a),new xC(e,r,t,i)},xC=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),_C=function(e){var t=e.name,r=e.code,n=e.encode;return new EC(t,r,n)},EC=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?kC(this.code,r):r.then((function(e){return kC(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),SC=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},AC=_C({name:"sha2-256",code:18,encode:SC("SHA-256")}),CC=_C({name:"sha2-512",code:19,encode:SC("SHA-512")}),TC=mA,RC={code:0,name:"identity",encode:TC,digest:function(e){return kC(0,TC(e))}},IC="raw",PC=85,DC=function(e){return mA(e)},NC=function(e){return mA(e)},OC=new TextEncoder,LC=new TextDecoder,BC="json",MC=512,UC=function(e){return OC.encode(JSON.stringify(e))},jC=function(e){return JSON.parse(LC.decode(e))},FC=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},H),W),G),Y),Q),J),X),$),ee),te));So(So({},re),ne);function zC(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?function(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ZC(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var qC=ZC("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),VC=ZC("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=zC((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),KC=So({utf8:qC,"utf-8":qC,hex:FC.base16,latin1:VC,ascii:VC,binary:VC},FC);var HC=/^\/(ip[fn]s)\/([^/?#]+)/,WC=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,GC=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function YC(e){try{return XC(e)?Boolean(uA.parse(e)):e instanceof Uint8Array?Boolean(uA.decode(e)):Boolean(uA.asCID(e))}catch(t){return!1}}function QC(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=$C(e);if(!1===a)return!1;var i=a.match(t);if(null==i)return!1;if("ipfs"!==i[r])return!1;var o=i[n];return null!=o&&t===WC&&(o=o.toLowerCase()),YC(o)}function JC(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=$C(e);if(!1===a)return!1;var i=a.match(t);if(null==i)return!1;if("ipns"!==i[r])return!1;var o=i[n];if(null!=o&&t===WC){if(YC(o=o.toLowerCase()))return!0;try{!o.includes(".")&&o.includes("-")&&(o=o.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));var s=new yA.URL("http://".concat(o)).hostname;return GC.test(s)}catch(u){return!1}}return!0}function XC(e){return"string"===typeof e}function $C(e){return e instanceof Uint8Array?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=KC[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}(e,"base58btc"):!!XC(e)&&e}var eT=function(e){return QC(e,HC)||JC(e,HC)},tT=function(e){return JC(e,HC)},rT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")};var nT=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},aT=nT,iT=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),oT=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),sT=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return cT(this,e)}}]),e}(),uT=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return cT(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),cT=function(e,t){return new uT(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},lT=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new oT(t,r,n),this.decoder=new sT(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),fT=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new lT(t,r,n,a)},pT=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=aT(n,r),i=a.encode,o=a.decode;return fT({prefix:t,name:r,encode:i,decode:function(e){return iT(o(e))}})},hT=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return fT({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},dT=fT({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),vT=hT({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),yT=hT({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),bT=pT({prefix:"9",name:"base10",alphabet:"0123456789"}),gT=hT({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mT=hT({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),wT=hT({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),kT=hT({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xT=hT({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_T=hT({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ET=hT({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ST=hT({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),AT=hT({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),CT=hT({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),TT=hT({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),RT=pT({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),IT=pT({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),PT=pT({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DT=pT({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),NT=hT({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),OT=hT({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),LT=hT({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),BT=hT({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),MT=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),UT=MT.reduce((function(e,t,r){return e[r]=t,e}),[]),jT=MT.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var FT=fT({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=UT[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=jT[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),zT=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=VT;)r[n++]=255&t|ZT,t/=128;for(;t&qT;)r[n++]=255&t|ZT,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},ZT=128,qT=-128,VT=Math.pow(2,31);var KT=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&WT)<<i:(n&WT)*Math.pow(2,i),i+=7}while(n>=HT);return e.bytes=o-r,a},HT=128,WT=127;var GT=Math.pow(2,7),YT=Math.pow(2,14),QT=Math.pow(2,21),JT=Math.pow(2,28),XT=Math.pow(2,35),$T=Math.pow(2,42),eR=Math.pow(2,49),tR=Math.pow(2,56),rR=Math.pow(2,63),nR={encode:zT,decode:KT,encodingLength:function(e){return e<GT?1:e<YT?2:e<QT?3:e<JT?4:e<XT?5:e<$T?6:e<eR?7:e<tR?8:e<rR?9:10}},aR=nR,iR=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return aR.encode(e,t,r),t},oR=function(e){return aR.encodingLength(e)},sR=function(e,t){var r=t.byteLength,n=oR(e),a=n+oR(r),i=new Uint8Array(a+r);return iR(e,i,0),iR(r,i,n),i.set(t,a),new uR(e,r,t,i)},uR=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),cR=function(e){var t=e.name,r=e.code,n=e.encode;return new lR(t,r,n)},lR=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?sR(this.code,r):r.then((function(e){return sR(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),fR=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},pR=cR({name:"sha2-256",code:18,encode:fR("SHA-256")}),hR=cR({name:"sha2-512",code:19,encode:fR("SHA-512")}),dR=iT,vR={code:0,name:"identity",encode:dR,digest:function(e){return sR(0,dR(e))}},yR="raw",bR=85,gR=function(e){return iT(e)},mR=function(e){return iT(e)},wR=new TextEncoder,kR=new TextDecoder,xR="json",_R=512,ER=function(e){return wR.encode(JSON.stringify(e))},SR=function(e){return JSON.parse(kR.decode(e))},AR=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},oe),se),ue),ce),le),fe),pe),he),de),ve));So(So({},ye),be);function CR(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function TR(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var RR=TR("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),IR=TR("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?CR(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),PR=So({utf8:RR,"utf-8":RR,hex:AR.base16,latin1:IR,ascii:IR,binary:IR},AR);var DR="/",NR=(new TextEncoder).encode(DR),OR=NR[0],LR=function(e){function t(e,r){if(xn(this,t),"string"===typeof e)this._buf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=PR[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):CR(globalThis.Buffer.from(e,"utf-8"))}(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==r&&(r=!0),r&&this.clean(),0===this._buf.byteLength||this._buf[0]!==OR)throw new Error("Invalid key")}return Sn(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=PR[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}(this._buf,e)}},{key:"uint8Array",value:function(){return this._buf}},{key:Symbol.toStringTag,get:function(){return"Key(".concat(this.toString(),")")}},{key:"clean",value:function(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=NR),this._buf[0]!==OR){var e=new Uint8Array(this._buf.byteLength+1);e.fill(OR,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===OR;)this._buf=this._buf.subarray(0,-1)}},{key:"less",value:function(e){for(var t=this.list(),r=e.list(),n=0;n<t.length;n++){if(r.length<n+1)return!1;var a=t[n],i=r[n];if(a<i)return!0;if(a>i)return!1}return t.length<r.length}},{key:"reverse",value:function(){return t.withNamespaces(this.list().slice().reverse())}},{key:"namespaces",value:function(){return this.list()}},{key:"baseNamespace",value:function(){var e=this.namespaces();return e[e.length-1]}},{key:"list",value:function(){return this.toString().split(DR).slice(1)}},{key:"type",value:function(){return function(e){var t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}},{key:"name",value:function(){return function(e){var t=e.split(":");return t[t.length-1]}(this.baseNamespace())}},{key:"instance",value:function(e){return new t(this.toString()+":"+e)}},{key:"path",value:function(){var e=this.parent().toString();return e.endsWith(DR)||(e+=DR),new t(e+=this.type())}},{key:"parent",value:function(){var e=this.list();return 1===e.length?new t(DR):new t(e.slice(0,-1).join(DR))}},{key:"child",value:function(e){return this.toString()===DR?e:e.toString()===DR?this:new t(this.toString()+e.toString(),!1)}},{key:"isAncestorOf",value:function(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}},{key:"isDecendantOf",value:function(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}},{key:"isTopLevel",value:function(){return 1===this.list().length}},{key:"concat",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.withNamespaces([].concat((0,kn.Z)(this.namespaces()),(0,kn.Z)(function(e){var t;return(t=[]).concat.apply(t,(0,kn.Z)(e))}(r.map((function(e){return e.namespaces()}))))))}}],[{key:"withNamespaces",value:function(e){return new t(e.join(DR))}},{key:"random",value:function(){return new t(rT().replace(/-/g,""))}},{key:"asKey",value:function(e){return e instanceof Uint8Array||"string"===typeof e?new t(e):"function"===typeof e.uint8Array?new t(e.uint8Array()):null}}]),t}();var BR=__webpack_require__(6622),MR=/(\x2D?(?:[0-9]+\.?[0-9]*|[0-9]*\.?[0-9]+)(?:e[\+\x2D]?[0-9]+)?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*)/gi;function UR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms",r=null;return(e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(MR,(function(e,t,n){(n=jR(n))&&(r=(r||0)+parseFloat(t,10)*n)})),r&&r/(jR(t)||1)}function jR(e){return UR[e]||UR[e.toLowerCase().replace(/s$/,"")]}UR.nanosecond=UR.ns=1e-6,UR["\xb5s"]=UR["\u03bcs"]=UR.us=UR.microsecond=.001,UR.millisecond=UR.ms=UR[""]=1,UR.second=UR.sec=UR.s=1e3*UR.ms,UR.minute=UR.min=UR.m=60*UR.s,UR.hour=UR.hr=UR.h=60*UR.m,UR.day=UR.d=24*UR.h,UR.week=UR.wk=UR.w=7*UR.d,UR.month=UR.b=30.4375*UR.d,UR.year=UR.yr=UR.y=365.25*UR.d;var FR=UR,zR=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request timed out";return xn(this,r),(e=t.call(this,n)).name="TimeoutError",e.code=r.code,e}return Sn(r)}(On(Error));function ZR(e,t){return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n[null==t?n.length-1:t];if(!i||!i.timeout)return e.apply(void 0,n);var o="string"===typeof i.timeout?FR(i.timeout):i.timeout,s=new wm.TimeoutController(o);i.signal=(0,BR.anySignal)([i.signal,s.signal]);var u=e.apply(void 0,n),c=new Promise((function(e,t){s.signal.addEventListener("abort",(function(){t(new zR)}))})),l=Date.now(),f=function(){if(s.signal.aborted)throw new zR;if(Date.now()-l>o)throw s.abort(),new zR};return u[Symbol.asyncIterator]?Kh(Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u[Symbol.asyncIterator](),e.prev=1;case 2:return e.next=5,km(Promise.race([t.next(),c]));case 5:if(r=e.sent,n=r.value,!r.done){e.next=10;break}return e.abrupt("break",15);case 10:return f(),e.next=13,n;case 13:e.next=2;break;case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(1),f(),e.t0;case 21:return e.prev=21,s.clear(),t.return&&t.return(),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[1,17,21,25]])})))():Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.race([u,c]);case 3:return t=e.sent,f(),e.abrupt("return",t);case 8:throw e.prev=8,e.t0=e.catch(0),f(),e.t0;case 12:return e.prev=12,s.clear(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})))()}}zR.code="ERR_TIMEOUT";var qR="/ipfs/";function VR(e){if(e instanceof Uint8Array)try{e=bv.decode(e)}catch(sY){throw cd(sY,"ERR_INVALID_CID")}var t=bv.asCID(e);if(t)return{cid:t,path:void 0};(e=e.toString()).startsWith(qR)&&(e=e.substring(qR.length));var r,n=e.split("/");try{t=bv.parse(n.shift()||"")}catch(sY){throw cd(sY,"ERR_INVALID_CID")}return n.length&&(r="/".concat(n.join("/"))),{cid:t,path:r}}var KR="This command must be run in online mode. Try running 'ipfs daemon' first.",HR=new LR("/local/filesroot"),WR=262144,GR=function(e){if(bv.asCID(e))return"/ipfs/".concat(e);var t=e.toString();try{return"/ipfs/".concat(bv.parse(t))}catch(r){}if(eT(t))return t;throw cd(new Error("invalid path: ".concat(e)),"ERR_BAD_PATH")},YR=function(e){return e instanceof Uint8Array?bv.decode(e).toString():(0===(e=e.toString()).indexOf("/ipfs/")&&(e=e.substring(6)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e)},QR=function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.length>3&&void 0!==g[3]?g[3]:{},i=VR(n),o=i.cid,(s=i.path)&&(a.path=s),u=o,(c=a.path||"").startsWith("/")&&(c=c.substring(1)),!a.path){e.next=45;break}e.prev=7,l=!1,f=!1,e.prev=10,h=xm($R(o,a.path,r,t,{signal:a.signal}));case 12:return e.next=14,h.next();case 14:if(!(l=!(d=e.sent).done)){e.next=23;break}if(v=d.value,y=v.value,b=v.remainderPath,bv.asCID(y)){e.next=18;break}return e.abrupt("break",23);case 18:c=b,u=y;case 20:l=!1,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),f=!0,p=e.t0;case 29:if(e.prev=29,e.prev=30,!l||null==h.return){e.next=34;break}return e.next=34,h.return();case 34:if(e.prev=34,!f){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(29);case 39:e.next=45;break;case 41:throw e.prev=41,e.t1=e.catch(7),e.t1.message.startsWith("Object has no property")&&(e.t1.message='no link named "'.concat(c.split("/")[0],'" under ').concat(u),e.t1.code="ERR_NO_LINK"),e.t1;case 45:return e.abrupt("return",{cid:u,remainderPath:c||""});case 46:case"end":return e.stop()}}),e,null,[[7,41],[10,25,29,39],[30,,34,38]])})));return function(t,r,n){return e.apply(this,arguments)}}(),JR=function(e){if("file"!==e.type&&"directory"!==e.type&&"raw"!==e.type)throw new Error("Unknown node type '".concat(e.type,"'"));var t={cid:e.cid,path:e.path,name:e.name,size:e.size,type:"file"};return"directory"===e.type&&(t.type="dir"),"file"===e.type&&(t.size=e.unixfs.fileSize()),"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,void 0!==e.unixfs.mtime&&(t.mtime=e.unixfs.mtime)),t},XR=ZR(function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),$R=function(){var e=Kh(Fh().mark((function e(t,r,n,a,i){var o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=Zh(Fh().mark((function e(t){var r,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCodec(t.code);case 2:return r=e.sent,e.next=5,a.blocks.get(t,i);case 5:return o=e.sent,e.abrupt("return",r.decode(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=r.split("/").filter(Boolean),e.next=4,km(o(t));case 4:u=e.sent,c=t,l=Fh().mark((function e(){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.shift()){e.next=3;break}throw cd(new Error('Could not resolve path "'.concat(r,'"')),"ERR_INVALID_PATH");case 3:if(t.code!==ey||!Array.isArray(u.Links)){e.next=13;break}if(!(a=u.Links.find((function(e){return e.Name===n})))){e.next=13;break}return e.next=8,{value:a.Hash,remainderPath:s.join("/")};case 8:return e.next=10,km(o(a.Hash));case 10:return u=e.sent,c=a.Hash,e.abrupt("return","continue");case 13:if(!Object.prototype.hasOwnProperty.call(u,n)){e.next=19;break}return u=u[n],e.next=17,{value:u,remainderPath:s.join("/")};case 17:e.next=20;break;case 19:throw cd(new Error('no link named "'.concat(n,'" under ').concat(c)),"ERR_NO_LINK");case 20:if(!bv.asCID(u)){e.next=25;break}return c=u,e.next=24,km(o(u));case 24:u=e.sent;case 25:case"end":return e.stop()}}),e)}));case 7:if(!s.length){e.next=14;break}return e.delegateYield(l(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",7);case 12:e.next=7;break;case 14:return e.next=16,{value:u,remainderPath:""};case 16:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),eI=function(){function e(t,r){xn(this,e),this.activate=t,this.deactivate=r,this.state={status:"stopped"}}return Sn(e,[{key:"use",value:function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.use(this,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"try",value:function(){return e.try(this)}}],[{key:"create",value:function(t){return new e(t.start,t.stop)}},{key:"start",value:function(){var t=Zh(Fh().mark((function t(r,n){var a,i,o,s;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.state,i=r.activate,t.t0=a.status,t.next="stopped"===t.t0?4:"starting"===t.t0?18:"started"===t.t0?19:"stopping"===t.t0?20:25;break;case 4:return t.prev=4,o=i(n),r.state={status:"starting",ready:o},t.next=9,o;case 9:return s=t.sent,r.state={status:"started",value:s},t.abrupt("return",s);case 14:throw t.prev=14,t.t1=t.catch(4),r.state={status:"stopped"},t.t1;case 18:throw new lm;case 19:throw new fm;case 20:return t.next=22,a.ready;case 22:return t.next=24,e.start(r,n);case 24:return t.abrupt("return",t.sent);case 25:return t.abrupt("return",e.panic(r));case 26:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var t=Zh(Fh().mark((function t(r){var n,a;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.state,a=r.deactivate,t.t0=n.status,t.next="stopped"===t.t0?4:"starting"===t.t0?5:"stopping"===t.t0?15:"started"===t.t0?18:23;break;case 4:return t.abrupt("break",24);case 5:return t.prev=5,t.next=8,n.ready;case 8:t.next=12;break;case 10:t.prev=10,t.t1=t.catch(5);case 12:return t.next=14,e.stop(r);case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,n.ready;case 17:return t.abrupt("return",t.sent);case 18:if(!a){t.next=21;break}return t.next=21,a(n.value);case 21:return r.state={status:"stopped"},t.abrupt("break",24);case 23:e.panic(n);case 24:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"try",value:function(e){var t=e.state;return"started"===t.status?t.value:null}},{key:"use",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state,e.t0=n.status,e.next="started"===e.t0?4:"starting"===e.t0?5:8;break;case 4:return e.abrupt("return",n.value);case 5:return e.next=7,XR(n.ready,r);case 7:return e.abrupt("return",e.sent);case 8:throw new cm;case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"panic",value:function(e){var t=e.state,r=JSON.stringify({status:t.status});throw RangeError("Service in invalid state ".concat(r,", should never happen if you see this please report a bug"))}}]),e}();var tI=__webpack_require__(4737),rI=function(){function e(t){xn(this,e),this.lru=tI(t)}return Sn(e,[{key:"get",value:function(e){var t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}},{key:"set",value:function(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}},{key:"has",value:function(e){return!!this.get(e)}},{key:"remove",value:function(e){this.lru.remove(e)}},{key:"clear",value:function(){this.lru.clear()}}]),e}(),nI=__webpack_require__(7143),aI=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="TimeoutError",n}return Sn(r)}(On(Error)),iI=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).name="AbortError",n.message=e,n}return Sn(r)}(On(Error)),oI=function(e){return void 0===globalThis.DOMException?new iI(e):new DOMException(e)},sI=function(e){var t=void 0===e.reason?oI("This operation was aborted."):e.reason;return t instanceof Error?t:oI(t)};function uI(e,t,r,n){var a,i=new Promise((function(i,o){if("number"!==typeof t||1!==Math.sign(t))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(t,"`"));if(t!==Number.POSITIVE_INFINITY){if((n=So({customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout}},n)).signal){var s=n.signal;s.aborted&&o(sI(s)),s.addEventListener("abort",(function(){o(sI(s))}))}a=n.customTimers.setTimeout.call(void 0,(function(){if("function"!==typeof r){var n="string"===typeof r?r:"Promise timed out after ".concat(t," milliseconds"),a=r instanceof Error?r:new aI(n);"function"===typeof e.cancel&&e.cancel(),o(a)}else try{i(r())}catch(s){o(s)}}),t),Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=i,t.next=4,e;case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),o(t.t2);case 11:return t.prev=11,n.customTimers.clearTimeout.call(void 0,a),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}else i(e)}));return i.clear=function(){clearTimeout(a),a=void 0},i}var cI,lI=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},fI=function(){function e(){xn(this,e),cI.set(this,[])}return Sn(e,[{key:"enqueue",value:function(e,t){var r={priority:(t=So({priority:0},t)).priority,run:e};if(this.size&&lI(this,cI,"f")[this.size-1].priority>=t.priority)lI(this,cI,"f").push(r);else{var n=function(e,t,r){for(var n=0,a=e.length;a>0;){var i=Math.trunc(a/2),o=n+i;r(e[o],t)<=0?(n=++o,a-=i+1):a=i}return n}(lI(this,cI,"f"),r,(function(e,t){return t.priority-e.priority}));lI(this,cI,"f").splice(n,0,r)}}},{key:"dequeue",value:function(){var e=lI(this,cI,"f").shift();return null===e||void 0===e?void 0:e.run}},{key:"filter",value:function(e){return lI(this,cI,"f").filter((function(t){return t.priority===e.priority})).map((function(e){return e.run}))}},{key:"size",get:function(){return lI(this,cI,"f").length}}]),e}();cI=new WeakMap;var pI,hI,dI,vI,yI,bI,gI,mI,wI,kI,xI,_I,EI,SI,AI,CI,TI,RI,II,PI,DI,NI,OI,LI,BI,MI,UI=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},jI=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},FI=function(e){Cn(r,e);var t=Dn(r);function r(){return xn(this,r),t.apply(this,arguments)}return Sn(r)}(On(Error)),zI=function(e){Cn(r,e);var t=Dn(r);function r(e){var n,a,i,o,s;if(xn(this,r),n=t.call(this),pI.add(Pn(n)),hI.set(Pn(n),void 0),dI.set(Pn(n),void 0),vI.set(Pn(n),0),yI.set(Pn(n),void 0),bI.set(Pn(n),void 0),gI.set(Pn(n),0),mI.set(Pn(n),void 0),wI.set(Pn(n),void 0),kI.set(Pn(n),void 0),xI.set(Pn(n),void 0),_I.set(Pn(n),0),EI.set(Pn(n),void 0),SI.set(Pn(n),void 0),AI.set(Pn(n),void 0),Object.defineProperty(Pn(n),"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e=So({carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:fI},e)).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(i=null===(a=e.intervalCap)||void 0===a?void 0:a.toString())&&void 0!==i?i:"","` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(s=null===(o=e.interval)||void 0===o?void 0:o.toString())&&void 0!==s?s:"","` (").concat(typeof e.interval,")"));return UI(Pn(n),hI,e.carryoverConcurrencyCount,"f"),UI(Pn(n),dI,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),UI(Pn(n),yI,e.intervalCap,"f"),UI(Pn(n),bI,e.interval,"f"),UI(Pn(n),kI,new e.queueClass,"f"),UI(Pn(n),xI,e.queueClass,"f"),n.concurrency=e.concurrency,n.timeout=e.timeout,UI(Pn(n),AI,!0===e.throwOnTimeout,"f"),UI(Pn(n),SI,!1===e.autoStart,"f"),n}return Sn(r,[{key:"concurrency",get:function(){return jI(this,EI,"f")},set:function(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));UI(this,EI,e,"f"),jI(this,pI,"m",LI).call(this)}},{key:"add",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=this,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},r=So({timeout:this.timeout,throwOnTimeout:jI(this,AI,"f")},r),e.abrupt("return",new Promise((function(e,a){jI(n,kI,"f").enqueue(Zh(Fh().mark((function i(){var o,s,u,c,l;return Fh().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(UI(n,_I,(s=jI(n,_I,"f"),++s),"f"),UI(n,vI,(u=jI(n,vI,"f"),++u),"f"),i.prev=2,!(null===(o=r.signal)||void 0===o?void 0:o.aborted)){i.next=5;break}throw new FI("The task was aborted.");case 5:return c=t({signal:r.signal}),r.timeout&&(c=uI(Promise.resolve(c),r.timeout)),r.signal&&(c=Promise.race([c,jI(n,pI,"m",BI).call(n,r.signal)])),i.next=10,c;case 10:l=i.sent,e(l),n.emit("completed",l),i.next=22;break;case 15:if(i.prev=15,i.t0=i.catch(2),!(i.t0 instanceof aI)||r.throwOnTimeout){i.next=20;break}return e(),i.abrupt("return");case 20:a(i.t0),n.emit("error",i.t0);case 22:return i.prev=22,jI(n,pI,"m",RI).call(n),i.finish(22);case 25:case"end":return i.stop()}}),i,null,[[2,15,22,25]])}))),r),n.emit("add"),jI(n,pI,"m",DI).call(n)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAll",value:function(){var e=Zh(Fh().mark((function e(t,r){var n=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.add(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"start",value:function(){return jI(this,SI,"f")?(UI(this,SI,!1,"f"),jI(this,pI,"m",LI).call(this),this):this}},{key:"pause",value:function(){UI(this,SI,!0,"f")}},{key:"clear",value:function(){UI(this,kI,new(jI(this,xI,"f")),"f")}},{key:"onEmpty",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==jI(this,kI,"f").size){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,jI(this,pI,"m",MI).call(this,"empty");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSizeLessThan",value:function(){var e=Zh(Fh().mark((function e(t){var r=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(jI(this,kI,"f").size<t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,jI(this,pI,"m",MI).call(this,"next",(function(){return jI(r,kI,"f").size<t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onIdle",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==jI(this,_I,"f")||0!==jI(this,kI,"f").size){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,jI(this,pI,"m",MI).call(this,"idle");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"size",get:function(){return jI(this,kI,"f").size}},{key:"sizeBy",value:function(e){return jI(this,kI,"f").filter(e).length}},{key:"pending",get:function(){return jI(this,_I,"f")}},{key:"isPaused",get:function(){return jI(this,SI,"f")}}]),r}(nI);hI=new WeakMap,dI=new WeakMap,vI=new WeakMap,yI=new WeakMap,bI=new WeakMap,gI=new WeakMap,mI=new WeakMap,wI=new WeakMap,kI=new WeakMap,xI=new WeakMap,_I=new WeakMap,EI=new WeakMap,SI=new WeakMap,AI=new WeakMap,pI=new WeakSet,CI=function(){return jI(this,dI,"f")||jI(this,vI,"f")<jI(this,yI,"f")},TI=function(){return jI(this,_I,"f")<jI(this,EI,"f")},RI=function(){var e;UI(this,_I,(e=jI(this,_I,"f"),--e),"f"),jI(this,pI,"m",DI).call(this),this.emit("next")},II=function(){jI(this,pI,"m",OI).call(this),jI(this,pI,"m",NI).call(this),UI(this,wI,void 0,"f")},PI=function(){var e=this,t=Date.now();if(void 0===jI(this,mI,"f")){var r=jI(this,gI,"f")-t;if(!(r<0))return void 0===jI(this,wI,"f")&&UI(this,wI,setTimeout((function(){jI(e,pI,"m",II).call(e)}),r),"f"),!0;UI(this,vI,jI(this,hI,"f")?jI(this,_I,"f"):0,"f")}return!1},DI=function(){if(0===jI(this,kI,"f").size)return jI(this,mI,"f")&&clearInterval(jI(this,mI,"f")),UI(this,mI,void 0,"f"),this.emit("empty"),0===jI(this,_I,"f")&&this.emit("idle"),!1;if(!jI(this,SI,"f")){var e=!jI(this,pI,"a",PI);if(jI(this,pI,"a",CI)&&jI(this,pI,"a",TI)){var t=jI(this,kI,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&jI(this,pI,"m",NI).call(this),!0)}}return!1},NI=function(){var e=this;jI(this,dI,"f")||void 0!==jI(this,mI,"f")||(UI(this,mI,setInterval((function(){jI(e,pI,"m",OI).call(e)}),jI(this,bI,"f")),"f"),UI(this,gI,Date.now()+jI(this,bI,"f"),"f"))},OI=function(){0===jI(this,vI,"f")&&0===jI(this,_I,"f")&&jI(this,mI,"f")&&(clearInterval(jI(this,mI,"f")),UI(this,mI,void 0,"f")),UI(this,vI,jI(this,hI,"f")?jI(this,_I,"f"):0,"f"),jI(this,pI,"m",LI).call(this)},LI=function(){for(;jI(this,pI,"m",DI).call(this););},BI=function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.addEventListener("abort",(function(){r(new FI("The task was aborted."))}),{once:!0})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),MI=function(){var e=Zh(Fh().mark((function e(t,r){var n=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n.on(t,(function a(){r&&!r()||(n.off(t,a),e())}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var ZI=__webpack_require__(8257),qI=new rI(1e3),VI=6e4,KI=new(zI.default?zI.default:zI)({concurrency:4}),HI=function(e){if(e.Path)return e.Path;throw new Error(e.Message)};function WI(e,t){return GI.apply(this,arguments)}function GI(){return GI=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},(n=new URLSearchParams(r)).set("arg",t),a=n.toString(),r.nocache||!qI.has(a)){e.next=7;break}return i=qI.get(a),e.abrupt("return",HI(i));case 7:return e.next=9,KI.add(Zh(Fh().mark((function e(){var t,r,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZI.get("https://ipfs.io/api/v0/dns",{searchParams:n});case 2:return t=e.sent,r=new URL(t.url).search.slice(1),e.next=6,t.json();case 6:return a=e.sent,qI.set(r,a,VI),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))));case 9:return o=e.sent,e.abrupt("return",HI(o));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",n(t,r));case 2:case"end":return e.stop()}}),e)}))),GI.apply(this,arguments)}function YI(e){return e.endsWith(".eth")&&(e=e.replace(/.eth$/,".eth.link")),e}var QI=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=$I;)r[n++]=255&t|JI,t/=128;for(;t&XI;)r[n++]=255&t|JI,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},JI=128,XI=-128,$I=Math.pow(2,31);var eP=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&rP)<<i:(n&rP)*Math.pow(2,i),i+=7}while(n>=tP);return e.bytes=o-r,a},tP=128,rP=127;var nP=Math.pow(2,7),aP=Math.pow(2,14),iP=Math.pow(2,21),oP=Math.pow(2,28),sP=Math.pow(2,35),uP=Math.pow(2,42),cP=Math.pow(2,49),lP=Math.pow(2,56),fP=Math.pow(2,63),pP={encode:QI,decode:eP,encodingLength:function(e){return e<nP?1:e<aP?2:e<iP?3:e<oP?4:e<sP?5:e<uP?6:e<cP?7:e<lP?8:e<fP?9:10}},hP=pP,dP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[hP.decode(e,t),hP.decode.bytes]},vP=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return hP.encode(e,t,r),t},yP=function(e){return hP.encodingLength(e)},bP=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),gP=function(e,t){var r=t.byteLength,n=yP(e),a=n+yP(r),i=new Uint8Array(a+r);return vP(e,i,0),vP(r,i,n),i.set(t,a),new wP(e,r,t,i)},mP=function(e){var t=bP(e),r=dP(t),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=dP(t.subarray(i)),s=(0,wn.Z)(o,2),u=s[0],c=s[1],l=t.subarray(i+c);if(l.byteLength!==u)throw new Error("Incorrect length");return new wP(a,u,l,t)},wP=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a}));var kP=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},xP=kP,_P=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),EP=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return AP(this,e)}}]),e}(),SP=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return AP(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),AP=function(e,t){return new SP(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},CP=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new _P(t,r,n),this.decoder=new EP(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),TP=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new CP(t,r,n,a)},RP=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=xP(n,r),i=a.encode,o=a.decode;return TP({prefix:t,name:r,encode:i,decode:function(e){return bP(o(e))}})},IP=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return TP({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},PP=RP({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DP=RP({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),NP=IP({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),OP=IP({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),LP=IP({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),BP=IP({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),MP=IP({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),UP=IP({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jP=IP({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),FP=IP({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zP=IP({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ZP=new WeakMap,qP=function(e){var t=ZP.get(e);if(null==t){var r=new Map;return ZP.set(e,r),r}return t},VP=function(e,t){function r(e,t,n,a){xn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Sn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==GP)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==YP)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=gP(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return function(e,t){var r=e.bytes;return 0===e.version?HP(r,qP(e),t||PP.encoder):WP(r,qP(e),t||NP.encoder)}(this,e)}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||QP(n,a,i.bytes))}if(!0===t[JP]){var o=t.version,s=t.multihash,u=t.code,c=mP(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==GP)throw new Error("Version 0 CID must use dag-pb (code: ".concat(GP,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,QP(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,GP,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=r.decodeFirst(e),n=(0,wn.Z)(t,2),a=n[0];if(n[1].length)throw new Error("Incorrect length");return a}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=bP(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new wP(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=dP(e.subarray(t)),n=(0,wn.Z)(r,2),a=n[0],i=n[1];return t+=i,a},n=r(),a=GP;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=KP(e,t),a=(0,wn.Z)(n,2),i=a[0],o=a[1],s=r.decode(o);return qP(s).set(i,e),s}}]),r}(),KP=function(e,t){switch(e[0]){case"Q":var r=t||PP;return[PP.prefix,r.decode("".concat(PP.prefix).concat(e))];case PP.prefix:var n=t||PP;return[PP.prefix,n.decode(e)];case NP.prefix:var a=t||NP;return[NP.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},HP=function(e,t,r){var n=r.prefix;if(n!==PP.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},WP=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},GP=112,YP=18,QP=function(e,t,r){var n=yP(e),a=n+yP(t),i=new Uint8Array(a+r.byteLength);return vP(e,i,0),vP(t,i,n),i.set(r,a),i},JP=Symbol.for("@ipld/js-cid/CID"),XP=TP({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),$P=IP({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),eD=IP({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),tD=RP({prefix:"9",name:"base10",alphabet:"0123456789"}),rD=IP({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nD=IP({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),aD=RP({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),iD=RP({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),oD=IP({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sD=IP({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uD=IP({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cD=IP({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),lD=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),fD=lD.reduce((function(e,t,r){return e[r]=t,e}),[]),pD=lD.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var hD=TP({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=fD[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=pD[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),dD=function(e){var t=e.name,r=e.code,n=e.encode;return new vD(t,r,n)},vD=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?gP(this.code,r):r.then((function(e){return gP(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),yD=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},bD=dD({name:"sha2-256",code:18,encode:yD("SHA-256")}),gD=dD({name:"sha2-512",code:19,encode:yD("SHA-512")}),mD=bP,wD={code:0,name:"identity",encode:mD,digest:function(e){return gP(0,mD(e))}},kD="raw",xD=85,_D=function(e){return bP(e)},ED=function(e){return bP(e)},SD=new TextEncoder,AD=new TextDecoder,CD="json",TD=512,RD=function(e){return SD.encode(JSON.stringify(e))},ID=function(e){return JSON.parse(AD.decode(e))},PD=So(So(So(So(So(So(So(So(So(So({},xe),_e),Ee),Se),Ae),ke),Ce),we),Te),Re);So(So({},Ie),Pe);function DD(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var ND=Symbol.for("@libp2p/peer-id");function OD(e){return null!=e&&Boolean(e[ND])}var LD=Symbol.for("nodejs.util.inspect.custom"),BD=Object.values(PD).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),PD.identity.decoder),MD=114,UD=36,jD=37,FD=function(e){function t(e){xn(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return Sn(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:ND,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=PP.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return VP.createV1(MD,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return DD(this.multihash.bytes,e);if("string"===typeof e)return KD(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return DD(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:LD,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),zD=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,So(So({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return Sn(r)}(FD),ZD=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,So(So({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return Sn(r)}(FD),qD=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,So(So({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return Sn(r)}(FD);function VD(e){if("RSA"===e.type)return new zD(e);if("Ed25519"===e.type)return new ZD(e);if("secp256k1"===e.type)return new qD(e);throw cd(new Error("Not a PeerId"),"ERR_INVALID_PARAMETERS")}function KD(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:BD,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=mP(PP.decode("z".concat(e)));return e.startsWith("12D")?new ZD({multihash:n}):e.startsWith("16U")?new qD({multihash:n}):new zD({multihash:n})}return HD(BD.decode(e))}function HD(e){try{var t=mP(e);if(t.code===wD.code){if(t.digest.length===UD)return new ZD({multihash:t});if(t.digest.length===jD)return new qD({multihash:t})}if(t.code===bD.code)return new zD({multihash:t})}catch(r){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&e.code!==MD)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===bD.code)return new zD({multihash:e.multihash});if(t.code===wD.code){if(t.digest.length===UD)return new ZD({multihash:e.multihash});if(t.digest.length===jD)return new qD({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(VP.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function WD(e,t){return GD.apply(this,arguments)}function GD(){return(GD=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==UD){e.next=2;break}return e.abrupt("return",new ZD({multihash:gP(wD.code,t),privateKey:r}));case 2:if(t.length!==jD){e.next=4;break}return e.abrupt("return",new qD({multihash:gP(wD.code,t),privateKey:r}));case 4:return e.t0=zD,e.next=7,bD.digest(t);case 7:return e.t1=e.sent,e.t2=t,e.t3=r,e.t4={multihash:e.t1,publicKey:e.t2,privateKey:e.t3},e.abrupt("return",new e.t0(e.t4));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YD(e){try{return KD(e).toBytes()}catch(t){return bv.parse(e).bytes}}var QD=__webpack_require__(6723);function JD(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise((function(r){r(e[t](n))})),{done:!1,value:new qh(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function XD(e){return $D.apply(this,arguments)}function $D(){return $D=Kh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t){e.next=2;break}throw cd(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 2:if(!(r=bv.asCID(t))){e.next=7;break}return e.next=6,eN({cid:r});case 6:return e.abrupt("return");case 7:if(!(t instanceof String||"string"===typeof t)){e.next=11;break}return e.next=10,eN({path:t});case 10:return e.abrupt("return");case 11:if(null==t.cid&&null==t.path){e.next=15;break}return e.next=14,eN(t);case 14:return e.abrupt("return",e.sent);case 15:if(!(Symbol.iterator in t)){e.next=63;break}if(n=t[Symbol.iterator](),!(a=n.next()).done){e.next=20;break}return e.abrupt("return",n);case 20:if(!(bv.asCID(a.value)||a.value instanceof String||"string"===typeof a.value)){e.next=41;break}return e.next=23,eN({cid:a.value});case 23:i=(0,zn.Z)(n),e.prev=24,i.s();case 26:if((o=i.n()).done){e.next=32;break}return s=o.value,e.next=30,eN({cid:s});case 30:e.next=26;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(24),i.e(e.t0);case 37:return e.prev=37,i.f(),e.finish(37);case 40:return e.abrupt("return");case 41:if(null==a.value.cid&&null==a.value.path){e.next=62;break}return e.next=44,eN(a.value);case 44:u=(0,zn.Z)(n),e.prev=45,u.s();case 47:if((c=u.n()).done){e.next=53;break}return l=c.value,e.next=51,eN(l);case 51:e.next=47;break;case 53:e.next=58;break;case 55:e.prev=55,e.t1=e.catch(45),u.e(e.t1);case 58:return e.prev=58,u.f(),e.finish(58);case 61:return e.abrupt("return");case 62:throw cd(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 63:if(!(Symbol.asyncIterator in t)){e.next=137;break}return f=t[Symbol.asyncIterator](),e.next=67,km(f.next());case 67:if(!(p=e.sent).done){e.next=70;break}return e.abrupt("return",f);case 70:if(!(bv.asCID(p.value)||p.value instanceof String||"string"===typeof p.value)){e.next=103;break}return e.next=73,eN({cid:p.value});case 73:h=!1,d=!1,e.prev=75,y=xm(f);case 77:return e.next=79,km(y.next());case 79:if(!(h=!(b=e.sent).done)){e.next=86;break}return g=b.value,e.next=83,eN({cid:g});case 83:h=!1,e.next=77;break;case 86:e.next=92;break;case 88:e.prev=88,e.t2=e.catch(75),d=!0,v=e.t2;case 92:if(e.prev=92,e.prev=93,!h||null==y.return){e.next=97;break}return e.next=97,km(y.return());case 97:if(e.prev=97,!d){e.next=100;break}throw v;case 100:return e.finish(97);case 101:return e.finish(92);case 102:return e.abrupt("return");case 103:if(null==p.value.cid&&null==p.value.path){e.next=136;break}return e.next=106,eN(p.value);case 106:m=!1,w=!1,e.prev=108,x=xm(f);case 110:return e.next=112,km(x.next());case 112:if(!(m=!(_=e.sent).done)){e.next=119;break}return E=_.value,e.next=116,eN(E);case 116:m=!1,e.next=110;break;case 119:e.next=125;break;case 121:e.prev=121,e.t3=e.catch(108),w=!0,k=e.t3;case 125:if(e.prev=125,e.prev=126,!m||null==x.return){e.next=130;break}return e.next=130,km(x.return());case 130:if(e.prev=130,!w){e.next=133;break}throw k;case 133:return e.finish(130);case 134:return e.finish(125);case 135:return e.abrupt("return");case 136:case 137:throw cd(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 138:case"end":return e.stop()}}),e,null,[[24,34,37,40],[45,55,58,61],[75,88,92,102],[93,,97,101],[108,121,125,135],[126,,130,134]])}))),$D.apply(this,arguments)}function eN(e){var t=e.cid||"".concat(e.path);if(!t)throw cd(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");var r={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(r.metadata=e.metadata),r}var tN={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function rN(e,t,r){var n={type:e,cid:t};return r&&(n.metadata=r),n}var nN=Sn((function e(t){var r=t.codecs,n=t.repo;xn(this,e);var a=function(e){var t=e.repo,r=e.codecs;function n(){return n=Kh((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function a(){var i,o;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=function(){var n=Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(XD(e));case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=30;break}return c=u.value,l=c.path,f=c.recursive,p=c.metadata,n.next=10,km(QR(t,r,l));case 10:return h=n.sent,d=h.cid,n.next=14,km(t.pins.isPinnedWithType(d,[tN.recursive,tN.direct]));case 14:if("recursive"!==n.sent.reason||f){n.next=18;break}throw new Error("".concat(d," already pinned recursively"));case 18:if(!f){n.next=23;break}return n.next=21,km(t.pins.pinRecursively(d,{metadata:p}));case 21:n.next=25;break;case 23:return n.next=25,km(t.pins.pinDirectly(d,{metadata:p}));case 25:return n.next=27,d;case 27:a=!1,n.next=4;break;case 30:n.next=36;break;case 32:n.prev=32,n.t0=n.catch(2),i=!0,o=n.t0;case 36:if(n.prev=36,n.prev=37,!a||null==s.return){n.next=41;break}return n.next=41,km(s.return());case 41:if(n.prev=41,!i){n.next=44;break}throw o;case 44:return n.finish(41);case 45:return n.finish(36);case 46:case"end":return n.stop()}}),n,null,[[2,32,36,46],[37,,41,45]])})));return function(){return n.apply(this,arguments)}}(),Boolean(n.lock)){a.next=5;break}return a.delegateYield(JD(xm(i())),"t0",4);case 4:return a.abrupt("return");case 5:return a.next=7,km(t.gcLock.readLock());case 7:return o=a.sent,a.prev=8,a.delegateYield(JD(xm(i())),"t1",10);case 10:return a.prev=10,o(),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[8,,10,13]])}))()})),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({codecs:r,repo:n});this.addAll=a,this.add=function(e){var t=e.addAll;return function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=bv.asCID(e);return r=t(a?[So({cid:a},n)]:[So({path:e.toString()},n)],n),QD(r)}}({addAll:a});var i=function(e){var t=e.repo,r=e.codecs;function n(){return n=Kh((function(e){return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(t.gcLock.readLock());case 2:a=n.sent,n.prev=3,i=!1,o=!1,n.prev=6,u=xm(XD(e));case 8:return n.next=10,km(u.next());case 10:if(!(i=!(c=n.sent).done)){n.next=42;break}return l=c.value,f=l.path,p=l.recursive,n.next=14,km(QR(t,r,f));case 14:return h=n.sent,d=h.cid,n.next=18,km(t.pins.isPinnedWithType(d,tN.all));case 18:if(v=n.sent,y=v.pinned,b=v.reason,y){n.next=23;break}throw new Error("".concat(d," is not pinned"));case 23:n.t0=b,n.next=n.t0===tN.recursive?26:n.t0===tN.direct?33:38;break;case 26:if(p){n.next=28;break}throw new Error("".concat(d," is pinned recursively"));case 28:return n.next=30,km(t.pins.unpin(d));case 30:return n.next=32,d;case 32:return n.abrupt("break",39);case 33:return n.next=35,km(t.pins.unpin(d));case 35:return n.next=37,d;case 37:return n.abrupt("break",39);case 38:throw new Error("".concat(d," is pinned indirectly under ").concat(b));case 39:i=!1,n.next=8;break;case 42:n.next=48;break;case 44:n.prev=44,n.t1=n.catch(6),o=!0,s=n.t1;case 48:if(n.prev=48,n.prev=49,!i||null==u.return){n.next=53;break}return n.next=53,km(u.return());case 53:if(n.prev=53,!o){n.next=56;break}throw s;case 56:return n.finish(53);case 57:return n.finish(48);case 58:return n.prev=58,a(),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[3,,58,61],[6,44,48,58],[49,,53,57]])}))()})),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({codecs:r,repo:n});this.rmAll=i,this.rm=function(e){var t=e.rmAll;function r(){return r=Zh(Fh().mark((function e(r){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,QD(t([So({path:r},n)],n));case 3:if(a=e.sent){e.next=6;break}throw new Error("CID expected");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}({rmAll:i}),this.ls=function(e){var t=e.repo,r=e.codecs;function n(){return n=Kh((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T,R,I,P,D,N,O,L,B,M,U,j,F;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=tN.all,!e.type){n.next=5;break}if(a=e.type,Object.keys(tN).includes(a)){n.next=5;break}throw cd(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");case 5:if(!e.paths){n.next=60;break}i=!1,o=!1,s=!1,n.prev=9,c=xm(XD(e.paths));case 11:return n.next=13,km(c.next());case 13:if(!(o=!(l=n.sent).done)){n.next=41;break}return f=l.value.path,n.next=17,km(QR(t,r,f));case 17:return p=n.sent,h=p.cid,n.next=21,km(t.pins.isPinnedWithType(h,a));case 21:if(d=n.sent,v=d.reason,y=d.pinned,b=d.parent,g=d.metadata,y){n.next=28;break}throw cd(new Error("path '".concat(f,"' is not pinned")),"ERR_NOT_PINNED");case 28:n.t0=v,n.next=n.t0===tN.direct||n.t0===tN.recursive?31:35;break;case 31:return i=!0,n.next=34,rN(v,h,g);case 34:return n.abrupt("break",38);case 35:return i=!0,n.next=38,rN("".concat(tN.indirect," through ").concat(b),h,g);case 38:o=!1,n.next=11;break;case 41:n.next=47;break;case 43:n.prev=43,n.t1=n.catch(9),s=!0,u=n.t1;case 47:if(n.prev=47,n.prev=48,!o||null==c.return){n.next=52;break}return n.next=52,km(c.return());case 52:if(n.prev=52,!s){n.next=55;break}throw u;case 55:return n.finish(52);case 56:return n.finish(47);case 57:if(i){n.next=59;break}throw new Error("No match found");case 59:return n.abrupt("return");case 60:if(a!==tN.recursive&&a!==tN.all){n.next=90;break}m=!1,w=!1,n.prev=63,x=xm(t.pins.recursiveKeys());case 65:return n.next=67,km(x.next());case 67:if(!(m=!(_=n.sent).done)){n.next=74;break}return E=_.value,S=E.cid,A=E.metadata,n.next=71,rN(tN.recursive,S,A);case 71:m=!1,n.next=65;break;case 74:n.next=80;break;case 76:n.prev=76,n.t2=n.catch(63),w=!0,k=n.t2;case 80:if(n.prev=80,n.prev=81,!m||null==x.return){n.next=85;break}return n.next=85,km(x.return());case 85:if(n.prev=85,!w){n.next=88;break}throw k;case 88:return n.finish(85);case 89:return n.finish(80);case 90:if(a!==tN.indirect&&a!==tN.all){n.next=120;break}C=!1,T=!1,n.prev=93,I=xm(t.pins.indirectKeys(e));case 95:return n.next=97,km(I.next());case 97:if(!(C=!(P=n.sent).done)){n.next=104;break}return D=P.value,n.next=101,rN(tN.indirect,D);case 101:C=!1,n.next=95;break;case 104:n.next=110;break;case 106:n.prev=106,n.t3=n.catch(93),T=!0,R=n.t3;case 110:if(n.prev=110,n.prev=111,!C||null==I.return){n.next=115;break}return n.next=115,km(I.return());case 115:if(n.prev=115,!T){n.next=118;break}throw R;case 118:return n.finish(115);case 119:return n.finish(110);case 120:if(a!==tN.direct&&a!==tN.all){n.next=150;break}N=!1,O=!1,n.prev=123,B=xm(t.pins.directKeys());case 125:return n.next=127,km(B.next());case 127:if(!(N=!(M=n.sent).done)){n.next=134;break}return U=M.value,j=U.cid,F=U.metadata,n.next=131,rN(tN.direct,j,F);case 131:N=!1,n.next=125;break;case 134:n.next=140;break;case 136:n.prev=136,n.t4=n.catch(123),O=!0,L=n.t4;case 140:if(n.prev=140,n.prev=141,!N||null==B.return){n.next=145;break}return n.next=145,km(B.return());case 145:if(n.prev=145,!O){n.next=148;break}throw L;case 148:return n.finish(145);case 149:return n.finish(140);case 150:case"end":return n.stop()}}),n,null,[[9,43,47,57],[48,,52,56],[63,76,80,90],[81,,85,89],[93,106,110,120],[111,,115,119],[123,136,140,150],[141,,145,149]])}))()})),n.apply(this,arguments)}return ZR((function(){return n.apply(this,arguments)}))}({codecs:r,repo:n}),this.remote={add:function(e){return Promise.reject(new Error("Not implemented"))},ls:function(){var e=Kh((function(e){return Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject(new Error("Not implemented")));case 1:case"end":return e.stop()}}),e)}))()}));return function(t){return e.apply(this,arguments)}}(),rm:function(e){return Promise.reject(new Error("Not implemented"))},rmAll:function(e){return Promise.reject(new Error("Not implemented"))},service:{add:function(e,t){return Promise.reject(new Error("Not implemented"))},rm:function(e){return Promise.reject(new Error("Not implemented"))},ls:function(){return Promise.reject(new Error("Not implemented"))}}}}));function aN(e){return e=e||new Error("Cannot open database"),cd(e,"ERR_DB_OPEN_FAILED")}function iN(e){return e=e||new Error("Delete failed"),cd(e,"ERR_DB_DELETE_FAILED")}function oN(e){return e=e||new Error("Write failed"),cd(e,"ERR_DB_WRITE_FAILED")}function sN(e){return e=e||new Error("Not Found"),cd(e,"ERR_NOT_FOUND")}function uN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=bm[t];if(!r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function cN(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var lN=__webpack_require__(8974),fN=(__webpack_require__(5049),__webpack_require__(9835),__webpack_require__(392));var pN=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},hN=pN,dN=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),vN=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),yN=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return gN(this,e)}}]),e}(),bN=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return gN(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),gN=function(e,t){return new bN(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},mN=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new vN(t,r,n),this.decoder=new yN(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),wN=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new mN(t,r,n,a)},kN=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=hN(n,r),i=a.encode,o=a.decode;return wN({prefix:t,name:r,encode:i,decode:function(e){return dN(o(e))}})},xN=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return wN({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},_N=wN({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),EN=xN({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),SN=xN({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),AN=kN({prefix:"9",name:"base10",alphabet:"0123456789"}),CN=xN({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),TN=xN({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),RN=xN({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IN=xN({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),PN=xN({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),DN=xN({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),NN=xN({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ON=xN({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),LN=xN({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BN=xN({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),MN=xN({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),UN=kN({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jN=kN({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),FN=kN({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zN=kN({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ZN=xN({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qN=xN({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),VN=xN({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),KN=xN({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),HN=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),WN=HN.reduce((function(e,t,r){return e[r]=t,e}),[]),GN=HN.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var YN=wN({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=WN[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=GN[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),QN=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=$N;)r[n++]=255&t|JN,t/=128;for(;t&XN;)r[n++]=255&t|JN,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},JN=128,XN=-128,$N=Math.pow(2,31);var eO=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&rO)<<i:(n&rO)*Math.pow(2,i),i+=7}while(n>=tO);return e.bytes=o-r,a},tO=128,rO=127;var nO=Math.pow(2,7),aO=Math.pow(2,14),iO=Math.pow(2,21),oO=Math.pow(2,28),sO=Math.pow(2,35),uO=Math.pow(2,42),cO=Math.pow(2,49),lO=Math.pow(2,56),fO=Math.pow(2,63),pO={encode:QN,decode:eO,encodingLength:function(e){return e<nO?1:e<aO?2:e<iO?3:e<oO?4:e<sO?5:e<uO?6:e<cO?7:e<lO?8:e<fO?9:10}},hO=pO,dO=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return hO.encode(e,t,r),t},vO=function(e){return hO.encodingLength(e)},yO=function(e,t){var r=t.byteLength,n=vO(e),a=n+vO(r),i=new Uint8Array(a+r);return dO(e,i,0),dO(r,i,n),i.set(t,a),new bO(e,r,t,i)},bO=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),gO=function(e){var t=e.name,r=e.code,n=e.encode;return new mO(t,r,n)},mO=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?yO(this.code,r):r.then((function(e){return yO(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),wO=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},kO=gO({name:"sha2-256",code:18,encode:wO("SHA-256")}),xO=gO({name:"sha2-512",code:19,encode:wO("SHA-512")}),_O=dN,EO={code:0,name:"identity",encode:_O,digest:function(e){return yO(0,_O(e))}},SO="raw",AO=85,CO=function(e){return dN(e)},TO=function(e){return dN(e)},RO=new TextEncoder,IO=new TextDecoder,PO="json",DO=512,NO=function(e){return RO.encode(JSON.stringify(e))},OO=function(e){return JSON.parse(IO.decode(e))},LO=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},Oe),Le),Be),Me),Ue),je),Fe),ze),Ze),qe));So(So({},Ve),Ke);function BO(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function MO(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?BO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function UO(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var jO=UO("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),FO=UO("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=MO((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),zO=So({utf8:jO,"utf-8":jO,hex:LO.base16,latin1:FO,ascii:FO,binary:FO},LO);function ZO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=zO[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):BO(globalThis.Buffer.from(e,"utf-8"))}function qO(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var VO=__webpack_require__(7420),KO=__webpack_require__.t(VO,2),HO=BigInt(0),WO=BigInt(1),GO=BigInt(2),YO=BigInt(8),QO=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),JO=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:QO,n:QO,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),XO=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),$O=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),eL=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),tL=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),rL=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),nL=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),aL=function(){function e(t,r,n,a){xn(this,e),this.x=t,this.y=r,this.z=n,this.t=a}return Sn(e,[{key:"equals",value:function(e){oL(e);var t=this.x,r=this.y,n=this.z,a=e.x,i=e.y,o=e.z,s=EL(t*o),u=EL(a*n),c=EL(r*o),l=EL(i*n);return s===u&&c===l}},{key:"negate",value:function(){return new e(EL(-this.x),this.y,this.z,EL(-this.t))}},{key:"double",value:function(){var t=this.x,r=this.y,n=this.z,a=JO.a,i=EL(t*t),o=EL(r*r),s=EL(GO*EL(n*n)),u=EL(a*i),c=t+r,l=EL(EL(c*c)-i-o),f=u+o,p=f-s,h=u-o,d=EL(l*p),v=EL(f*h),y=EL(l*h);return new e(d,v,EL(p*f),y)}},{key:"add",value:function(t){oL(t);var r=this.x,n=this.y,a=this.z,i=this.t,o=t.x,s=t.y,u=t.z,c=t.t,l=EL((n-r)*(s+o)),f=EL((n+r)*(s-o)),p=EL(f-l);if(p===HO)return this.double();var h=EL(a*GO*c),d=EL(i*GO*u),v=d+h,y=f+l,b=d-h,g=EL(v*p),m=EL(y*b),w=EL(v*b);return new e(g,m,EL(p*y),w)}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"precomputeWindow",value:function(e){for(var t=1+256/e,r=[],n=this,a=n,i=0;i<t;i++){a=n,r.push(a);for(var o=1;o<Math.pow(2,e-1);o++)a=a.add(n),r.push(a);n=a.double()}return r}},{key:"wNAF",value:function(t,r){!r&&this.equals(e.BASE)&&(r=fL.BASE);var n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var a=r&&lL.get(r);a||(a=this.precomputeWindow(n),r&&1!==n&&(a=e.normalizeZ(a),lL.set(r,a)));for(var i=e.ZERO,o=e.BASE,s=1+256/n,u=Math.pow(2,n-1),c=BigInt(Math.pow(2,n)-1),l=Math.pow(2,n),f=BigInt(n),p=0;p<s;p++){var h=p*u,d=Number(t&c);t>>=f,d>u&&(d-=l,t+=WO);var v=h,y=h+Math.abs(d)-1,b=p%2!==0,g=d<0;0===d?o=o.add(iL(b,a[v])):i=i.add(iL(g,a[y]))}return e.normalizeZ([i,o])[0]}},{key:"multiply",value:function(e,t){return this.wNAF(DL(e,JO.l),t)}},{key:"multiplyUnsafe",value:function(t){var r=DL(t,JO.l,!1),n=e.BASE,a=e.ZERO;if(r===HO)return a;if(this.equals(a)||r===WO)return this;if(this.equals(n))return this.wNAF(r);for(var i=a,o=this;r>HO;)r&WO&&(i=i.add(o)),o=o.double(),r>>=WO;return i}},{key:"isSmallOrder",value:function(){return this.multiplyUnsafe(JO.h).equals(e.ZERO)}},{key:"isTorsionFree",value:function(){var t=this.multiplyUnsafe(JO.l/GO).double();return JO.l%GO&&(t=t.add(this)),t.equals(e.ZERO)}},{key:"toAffine",value:function(t){var r=this.x,n=this.y,a=this.z,i=this.equals(e.ZERO);null==t&&(t=i?YO:SL(a));var o=EL(r*t),s=EL(n*t),u=EL(a*t);if(i)return fL.ZERO;if(u!==WO)throw new Error("invZ was invalid");return new fL(o,s)}},{key:"fromRistrettoBytes",value:function(){uL()}},{key:"toRistrettoBytes",value:function(){uL()}},{key:"fromRistrettoHash",value:function(){uL()}}],[{key:"fromAffine",value:function(t){if(!(t instanceof fL))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(fL.ZERO)?e.ZERO:new e(t.x,t.y,WO,EL(t.x*t.y))}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JO.P,r=new Array(e.length),n=e.reduce((function(e,n,a){return n===HO?e:(r[a]=e,EL(e*n,t))}),WO),a=SL(n,t);return e.reduceRight((function(e,n,a){return n===HO?e:(r[a]=EL(e*r[a],t),EL(e*n,t))}),a),r}(e.map((function(e){return e.z})));return e.map((function(e,r){return e.toAffine(t[r])}))}},{key:"normalizeZ",value:function(e){return this.toAffineBatch(e).map(this.fromAffine)}}]),e}();function iL(e,t){var r=t.negate();return e?r:t}function oL(e){if(!(e instanceof aL))throw new TypeError("ExtendedPoint expected")}function sL(e){if(!(e instanceof cL))throw new TypeError("RistrettoPoint expected")}function uL(){throw new Error("Legacy method: switch to RistrettoPoint")}aL.BASE=new aL(JO.Gx,JO.Gy,WO,EL(JO.Gx*JO.Gy)),aL.ZERO=new aL(HO,WO,WO,HO);var cL=function(){function e(t){xn(this,e),this.ep=t}return Sn(e,[{key:"toRawBytes",value:function(){var e,t=this.ep,r=t.x,n=t.y,a=t.z,i=t.t,o=EL(EL(a+n)*EL(a-n)),s=EL(r*n),u=EL(s*s),c=RL(EL(o*u)).value,l=EL(c*o),f=EL(c*s),p=EL(l*f*i);if(mL(i*p)){var h=EL(n*$O),d=EL(r*$O);r=h,n=d,e=EL(l*tL)}else e=f;mL(r*p)&&(n=EL(-n));var v=EL((a-n)*e);return mL(v)&&(v=EL(-v)),gL(v)}},{key:"toHex",value:function(){return vL(this.toRawBytes())}},{key:"toString",value:function(){return this.toHex()}},{key:"equals",value:function(e){sL(e);var t=this.ep,r=e.ep,n=EL(t.x*r.y)===EL(t.y*r.x),a=EL(t.y*r.y)===EL(t.x*r.x);return n||a}},{key:"add",value:function(t){return sL(t),new e(this.ep.add(t.ep))}},{key:"subtract",value:function(t){return sL(t),new e(this.ep.subtract(t.ep))}},{key:"multiply",value:function(t){return new e(this.ep.multiply(t))}},{key:"multiplyUnsafe",value:function(t){return new e(this.ep.multiplyUnsafe(t))}}],[{key:"calcElligatorRistrettoMap",value:function(e){var t=JO.d,r=EL($O*e*e),n=EL((r+WO)*rL),a=BigInt(-1),i=EL((a-t*r)*EL(r+t)),o=TL(n,i),s=o.isValid,u=o.value,c=EL(u*e);mL(c)||(c=EL(-c)),s||(u=c),s||(a=r);var l=EL(a*(r-WO)*nL-i),f=u*u,p=EL((u+u)*i),h=EL(l*eL),d=EL(WO-f),v=EL(WO+f);return new aL(EL(p*v),EL(d*h),EL(h*v),EL(p*d))}},{key:"hashToCurve",value:function(t){var r=_L((t=PL(t,64)).slice(0,32)),n=this.calcElligatorRistrettoMap(r),a=_L(t.slice(32,64)),i=this.calcElligatorRistrettoMap(a);return new e(n.add(i))}},{key:"fromHex",value:function(t){t=PL(t,32);var r=JO.a,n=JO.d,a="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=_L(t);if(!function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(gL(i),t)||mL(i))throw new Error(a);var o=EL(i*i),s=EL(WO+r*o),u=EL(WO-r*o),c=EL(s*s),l=EL(u*u),f=EL(r*n*c-l),p=RL(EL(f*l)),h=p.isValid,d=p.value,v=EL(d*u),y=EL(d*v*f),b=EL((i+i)*v);mL(b)&&(b=EL(-b));var g=EL(s*y),m=EL(b*g);if(!h||mL(m)||g===HO)throw new Error(a);return new e(new aL(b,g,WO,m))}}]),e}();cL.BASE=new cL(aL.BASE),cL.ZERO=new cL(aL.ZERO);var lL=new WeakMap,fL=function(){function e(t,r){xn(this,e),this.x=t,this.y=r}return Sn(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,lL.delete(this)}},{key:"toRawBytes",value:function(){var e=gL(this.y);return e[31]|=this.x&WO?128:0,e}},{key:"toHex",value:function(){return vL(this.toRawBytes())}},{key:"toX25519",value:function(){var e=this.y;return gL(EL((WO+e)*SL(WO-e)))}},{key:"isTorsionFree",value:function(){return aL.fromAffine(this).isTorsionFree()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(EL(-this.x),this.y)}},{key:"add",value:function(e){return aL.fromAffine(this).add(aL.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return aL.fromAffine(this).multiply(e,this).toAffine()}}],[{key:"fromHex",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JO.d,a=JO.P,i=(t=PL(t,32)).slice();i[31]=-129&t[31];var o=wL(i);if(r&&o>=a)throw new Error("Expected 0 < hex < P");if(!r&&o>=XO)throw new Error("Expected 0 < hex < 2**256");var s=EL(o*o),u=TL(EL(s-WO),EL(n*s+WO)),c=u.isValid,l=u.value;if(!c)throw new Error("Point.fromHex: invalid y coordinate");var f=(l&WO)===WO;return 0!==(128&t[31])!==f&&(l=EL(-l)),new e(l,o)}},{key:"fromPrivateKey",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BL(t);case 2:return e.abrupt("return",e.sent.point);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();fL.BASE=new fL(JO.Gx,JO.Gy),fL.ZERO=new fL(HO,WO);var pL=function(){function e(t,r){xn(this,e),this.r=t,this.s=r,this.assertValidity()}return Sn(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!(e instanceof fL))throw new Error("Expected Point instance");return DL(t,JO.l,!1),this}},{key:"toRawBytes",value:function(){var e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(gL(this.s),32),e}},{key:"toHex",value:function(){return vL(this.toRawBytes())}}],[{key:"fromHex",value:function(t){var r=PL(t,64);return new e(fL.fromHex(r.slice(0,32),!1),wL(r.slice(32,64)))}}]),e}();function hL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];for(var n=t.reduce((function(e,t){return e+t.length}),0),a=new Uint8Array(n),i=0,o=0;i<t.length;i++){var s=t[i];a.set(s,o),o+=s.length}return a}var dL=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function vL(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");for(var t="",r=0;r<e.length;r++)t+=dL[e[r]];return t}function yL(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");for(var t=new Uint8Array(e.length/2),r=0;r<t.length;r++){var n=2*r,a=e.slice(n,n+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function bL(e){return yL(e.toString(16).padStart(64,"0"))}function gL(e){return bL(e).reverse()}function mL(e){return(EL(e)&WO)===WO}function wL(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+vL(Uint8Array.from(e).reverse()))}var kL,xL=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function _L(e){return EL(wL(e)&xL)}function EL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JO.P,r=e%t;return r>=HO?r:t+r}function SL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JO.P;if(e===HO||t<=HO)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var r=EL(e,t),n=t,a=HO,i=WO,o=WO,s=HO;r!==HO;){var u=n/r,c=n%r,l=a-o*u,f=i-s*u;n=r,r=c,a=o,i=s,o=l,s=f}if(n!==WO)throw new Error("invert: does not exist");return EL(a,t)}function AL(e,t){for(var r=JO.P,n=e;t-- >HO;)n*=n,n%=r;return n}function CL(e){var t=JO.P,r=BigInt(5),n=BigInt(10),a=BigInt(20),i=BigInt(40),o=BigInt(80),s=e*e%t*e%t,u=AL(s,GO)*s%t,c=AL(u,WO)*e%t,l=AL(c,r)*c%t,f=AL(l,n)*l%t,p=AL(f,a)*f%t,h=AL(p,i)*p%t,d=AL(h,o)*h%t,v=AL(d,o)*h%t,y=AL(v,n)*l%t;return{pow_p_5_8:AL(y,GO)*e%t,b2:s}}function TL(e,t){var r=EL(t*t*t),n=EL(r*r*t),a=EL(e*r*CL(e*n).pow_p_5_8),i=EL(t*a*a),o=a,s=EL(a*$O),u=i===e,c=i===EL(-e),l=i===EL(-e*$O);return u&&(a=o),(c||l)&&(a=s),mL(a)&&(a=EL(-a)),{isValid:u||c,value:a}}function RL(e){return TL(WO,e)}function IL(e){return EL(wL(e),JO.l)}function PL(e,t){var r=e instanceof Uint8Array?Uint8Array.from(e):yL(e);if("number"===typeof t&&r.length!==t)throw new Error("Expected ".concat(t," bytes"));return r}function DL(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)throw new TypeError("Specify max value");if("number"===typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"===typeof e&&e<t)if(r){if(HO<e)return e}else if(HO<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function NL(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function OL(e){if(32!==(e="bigint"===typeof e||"number"===typeof e?bL(DL(e,XO)):PL(e)).length)throw new Error("Expected 32 bytes");return e}function LL(e){var t=NL(e.slice(0,32)),r=e.slice(32,64),n=IL(t),a=fL.BASE.multiply(n),i=a.toRawBytes();return{head:t,prefix:r,scalar:n,point:a,pointBytes:i}}function BL(e){return ML.apply(this,arguments)}function ML(){return(ML=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=LL,e.next=3,WL.sha512(OL(t));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UL(e){return jL.apply(this,arguments)}function jL(){return(jL=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BL(t);case 2:return e.abrupt("return",e.sent.pointBytes);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FL(e,t){return zL.apply(this,arguments)}function zL(){return zL=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=PL(t),e.next=3,BL(r);case 3:return n=e.sent,a=n.prefix,i=n.scalar,o=n.pointBytes,e.t0=IL,e.next=10,WL.sha512(a,t);case 10:return e.t1=e.sent,s=(0,e.t0)(e.t1),u=fL.BASE.multiply(s),e.t2=IL,e.next=16,WL.sha512(u.toRawBytes(),o,t);case 16:return e.t3=e.sent,c=(0,e.t2)(e.t3),l=EL(s+c*i,JO.l),e.abrupt("return",new pL(u,l).toRawBytes());case 20:case"end":return e.stop()}}),e)}))),zL.apply(this,arguments)}function ZL(e,t,r){t=PL(t),r instanceof fL||(r=fL.fromHex(r,!1));var n=e instanceof pL?e.assertValidity():pL.fromHex(e),a=n.r,i=n.s;return{r:a,s:i,SB:aL.BASE.multiplyUnsafe(i),pub:r,msg:t}}function qL(e,t,r,n){var a=IL(n),i=aL.fromAffine(e).multiplyUnsafe(a);return aL.fromAffine(t).add(i).subtract(r).multiplyUnsafe(JO.h).equals(aL.ZERO)}function VL(e,t,r){return KL.apply(this,arguments)}function KL(){return KL=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ZL(t,r,n),i=a.r,o=a.SB,s=a.msg,u=a.pub,e.next=3,WL.sha512(i.toRawBytes(),u.toRawBytes(),s);case 3:return c=e.sent,e.abrupt("return",qL(u,i,o,c));case 5:case"end":return e.stop()}}),e)}))),KL.apply(this,arguments)}fL.BASE._setWindowSize(8);var HL={node:KO,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},WL={bytesToHex:vL,hexToBytes:yL,concatBytes:hL,getExtendedPublicKey:BL,mod:EL,invert:SL,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:function(e){if((e=PL(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return EL(wL(e),JO.l-WO)+WO},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(HL.web)return HL.web.getRandomValues(new Uint8Array(e));if(HL.node){var t=HL.node.randomBytes;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return WL.randomBytes(32)},sha512:function(){var e=Zh(Fh().mark((function e(){var t,r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=hL.apply(void 0,n),!HL.web){e.next=8;break}return e.next=4,HL.web.subtle.digest("SHA-512",t.buffer);case 4:return r=e.sent,e.abrupt("return",new Uint8Array(r));case 8:if(!HL.node){e.next=12;break}return e.abrupt("return",Uint8Array.from(HL.node.createHash("sha512").update(t).digest()));case 12:throw new Error("The environment doesn't have sha512 function");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fL.BASE,r=t.equals(fL.BASE)?t:new fL(t.x,t.y);return r._setWindowSize(e),r.multiply(GO),r},sha512Sync:void 0};Object.defineProperties(WL,{sha512Sync:{configurable:!1,get:function(){return kL},set:function(e){kL||(kL=e)}}});var GL=32,YL=64,QL=32;function JL(){return XL.apply(this,arguments)}function XL(){return(XL=Zh(Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=WL.randomPrivateKey(),e.next=3,UL(t);case 3:return r=e.sent,n=iB(t,r),e.abrupt("return",{privateKey:n,publicKey:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $L(e){return eB.apply(this,arguments)}function eB(){return eB=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length===QL){e.next=4;break}throw new TypeError('"seed" must be 32 bytes in length.');case 4:if(t instanceof Uint8Array){e.next=6;break}throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');case 6:return r=t,e.next=9,UL(r);case 9:return n=e.sent,a=iB(r,n),e.abrupt("return",{privateKey:a,publicKey:n});case 12:case"end":return e.stop()}}),e)}))),eB.apply(this,arguments)}function tB(e,t){return rB.apply(this,arguments)}function rB(){return(rB=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.subarray(0,QL),e.abrupt("return",FL(r,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nB(e,t,r){return aB.apply(this,arguments)}function aB(){return(aB=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VL(r,n,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iB(e,t){for(var r=new Uint8Array(YL),n=0;n<QL;n++)r[n]=e[n],r[QL+n]=t[n];return r}function oB(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var r,n=MO(t),a=0,i=(0,zn.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set(o,a),a+=o.length}}catch(sY){i.e(sY)}finally{i.f()}return BO(n)}var sB={get:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis).crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}},uB={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function cB(e){var t,r,n,a,i,o,s=null!==(t=null===e||void 0===e?void 0:e.algorithm)&&void 0!==t?t:"AES-GCM",u=null!==(r=null===e||void 0===e?void 0:e.keyLength)&&void 0!==r?r:16,c=null!==(n=null===e||void 0===e?void 0:e.nonceLength)&&void 0!==n?n:12,l=null!==(a=null===e||void 0===e?void 0:e.digest)&&void 0!==a?a:"SHA-256",f=null!==(i=null===e||void 0===e?void 0:e.saltLength)&&void 0!==i?i:16,p=null!==(o=null===e||void 0===e?void 0:e.iterations)&&void 0!==o?o:32767,h=sB.get();function d(){return(d=Zh(Fh().mark((function e(t,r){var n,a,i,o,d,v,y,b,g;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.getRandomValues(new Uint8Array(f)),a=h.getRandomValues(new Uint8Array(c)),i={name:s,iv:a},"string"===typeof r&&(r=ZO(r)),0!==r.length){e.next=25;break}return e.next=7,h.subtle.importKey("jwk",uB,{name:"AES-GCM"},!0,["encrypt"]);case 7:return o=e.sent,e.prev=8,d={name:"PBKDF2",salt:n,iterations:p,hash:{name:l}},e.next=12,h.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);case 12:return v=e.sent,e.next=15,h.subtle.deriveKey(d,v,{name:s,length:u},!0,["encrypt"]);case 15:o=e.sent,e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(8),e.next=22,h.subtle.importKey("jwk",uB,{name:"AES-GCM"},!0,["encrypt"]);case 22:o=e.sent;case 23:e.next=32;break;case 25:return y={name:"PBKDF2",salt:n,iterations:p,hash:{name:l}},e.next=28,h.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);case 28:return b=e.sent,e.next=31,h.subtle.deriveKey(y,b,{name:s,length:u},!0,["encrypt"]);case 31:o=e.sent;case 32:return e.next=34,h.subtle.encrypt(i,o,t);case 34:return g=e.sent,e.abrupt("return",oB([n,i.iv,new Uint8Array(g)]));case 36:case"end":return e.stop()}}),e,null,[[8,18]])})))).apply(this,arguments)}function v(){return(v=Zh(Fh().mark((function e(t,r){var n,a,i,o,d,v,y,b,g,m;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.subarray(0,f),a=t.subarray(f,f+c),i=t.subarray(f+c),o={name:s,iv:a},"string"===typeof r&&(r=ZO(r)),0!==r.length){e.next=23;break}return e.prev=6,v={name:"PBKDF2",salt:n,iterations:p,hash:{name:l}},e.next=10,h.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);case 10:return y=e.sent,e.next=13,h.subtle.deriveKey(v,y,{name:s,length:u},!0,["decrypt"]);case 13:d=e.sent,e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(6),e.next=20,h.subtle.importKey("jwk",uB,{name:"AES-GCM"},!0,["decrypt"]);case 20:d=e.sent;case 21:e.next=30;break;case 23:return b={name:"PBKDF2",salt:n,iterations:p,hash:{name:l}},e.next=26,h.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);case 26:return g=e.sent,e.next=29,h.subtle.deriveKey(b,g,{name:s,length:u},!0,["decrypt"]);case 29:d=e.sent;case 30:return e.next=32,h.subtle.decrypt(o,d,i);case 32:return m=e.sent,e.abrupt("return",new Uint8Array(m));case 34:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}u*=8;var y={encrypt:function(e,t){return d.apply(this,arguments)},decrypt:function(e,t){return v.apply(this,arguments)}};return y}function lB(e,t){return fB.apply(this,arguments)}function fB(){return(fB=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cB(),e.next=3,n.encrypt(t,r);case 3:return a=e.sent,e.abrupt("return",ZN.encode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pB=__webpack_require__(6216),hB=__webpack_require__(3557),dB=__webpack_require__(3097),vB=__webpack_require__(7063),yB=__webpack_require__(2815);dB._configure(),pB._configure(hB),vB._configure(yB);var bB,gB,mB,wB,kB,xB=["uint64","int64","sint64","fixed64","sfixed64"];function _B(e){return function(e){var t,r=(0,zn.Z)(xB);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(){return BigInt(n.call(this).toString())}};for(r.s();!(t=r.n()).done;)n()}catch(sY){r.e(sY)}finally{r.f()}return e}(new pB(e))}function EB(){return function(e){var t,r=(0,zn.Z)(xB);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(e){return n.call(this,e.toString())}};for(r.s();!(t=r.n()).done;)n()}catch(sY){r.e(sY)}finally{r.f()}return e}(vB.create())}function SB(e,t){var r=_B(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function AB(e,t){var r=EB();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}function CB(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function TB(e,t){return CB("message",bB.LENGTH_DELIMITED,e,t)}!function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(bB||(bB={})),function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(gB||(gB={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(mB||(mB={})),function(e){e.codec=function(){return function(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}return CB("enum",bB.VARINT,(function(e,r){var n=t(e);r.int32(n)}),(function(e){return t(e.int32())}))}(mB)}}(gB||(gB={})),function(e){var t;e.codec=function(){return null==t&&(t=TB((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),gB.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.Type=gB.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return AB(t,e.codec())},e.decode=function(t){return SB(t,e.codec())}}(wB||(wB={})),function(e){var t;e.codec=function(){return null==t&&(t=TB((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),gB.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.Type=gB.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return AB(t,e.codec())},e.decode=function(t){return SB(t,e.codec())}}(kB||(kB={}));var RB=function(){function e(t){xn(this,e),(0,oi.Z)(this,"_key",void 0),this._key=MB(t,GL)}return Sn(e,[{key:"verify",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nB(this._key,r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return wB.encode({Type:gB.Ed25519,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return qO(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kO.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),IB=function(){function e(t,r){xn(this,e),(0,oi.Z)(this,"_key",void 0),(0,oi.Z)(this,"_publicKey",void 0),this._key=MB(t,YL),this._publicKey=MB(r,GL)}return Sn(e,[{key:"sign",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tB(this._key,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){return new RB(this._publicKey)}},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return kB.encode({Type:gB.Ed25519,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return qO(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kO.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=EO.digest(this.public.bytes),e.abrupt("return",FN.encode(t.bytes).substring(1));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("libp2p-key"!==(r=n.length>1&&void 0!==n[1]?n[1]:"libp2p-key")){e.next=5;break}return e.abrupt("return",lB(this.bytes,t));case 5:throw new gS("export format '".concat(r,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function PB(e){if(e.length>YL){var t=(e=MB(e,YL+GL)).subarray(0,YL),r=e.subarray(YL,e.length);return new IB(t,r)}var n=(e=MB(e,YL)).subarray(0,YL),a=e.subarray(GL);return new IB(n,a)}function DB(e){return e=MB(e,GL),new RB(e)}function NB(){return OB.apply(this,arguments)}function OB(){return(OB=Zh(Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JL();case 2:return t=e.sent,r=t.privateKey,n=t.publicKey,e.abrupt("return",new IB(r,n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LB(e){return BB.apply(this,arguments)}function BB(){return BB=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$L(t);case 2:return r=e.sent,n=r.privateKey,a=r.publicKey,e.abrupt("return",new IB(n,a));case 6:case"end":return e.stop()}}),e)}))),BB.apply(this,arguments)}function MB(e,t){var r;if((e=Uint8Array.from(null!==(r=e)&&void 0!==r?r:[])).length!==t)throw new gS("Key must be a Uint8Array of length ".concat(t,", got ").concat(e.length),"ERR_INVALID_KEY_TYPE");return e}function UB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=zO[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var jB=__webpack_require__(3877);__webpack_require__(3055);function FB(e,t){var r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.subarray(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=oB([new Uint8Array(t-r.length),r])}return UB(r,"base64url")}function zB(e){var t=ZB(e);return new fN.jsbn.BigInteger(UB(t,"base16"),16)}function ZB(e,t){var r=ZO(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=oB([new Uint8Array(t-r.length),r])}return r}var qB={"P-256":256,"P-384":384,"P-521":521};Object.keys(qB).join(" / ");function VB(e,t){return KB.apply(this,arguments)}function KB(){return(KB=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ZN.decode(t),a=cB(),e.abrupt("return",a.decrypt(n,r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}__webpack_require__(4770);var HB=__webpack_require__(5856),WB=__webpack_require__.t(HB,2),GB=BigInt(0),YB=BigInt(1),QB=BigInt(2),JB=BigInt(3),XB=BigInt(8),$B=Object.freeze({a:GB,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:YB,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),eM=function(e,t){return(e+t/QB)/t},tM=BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),rM=function(e){var t=$B.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-YB*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),s=eM(i*e,t),u=eM(-n*e,t),c=NM(e-s*r-u*a,t),l=NM(-s*n-u*i,t),f=c>o,p=l>o;if(f&&(c=t-c),p&&(l=t-l),c>o||l>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:f,k1:c,k2neg:p,k2:l}},nM=32,aM=32,iM=32,oM=nM+1,sM=2*nM+1;function uM(e){var t=$B.a,r=$B.b,n=NM(e*e),a=NM(n*e);return NM(a+t*e+r)}var cM=$B.a===GB,lM=function(e){Cn(r,e);var t=Dn(r);function r(e){return xn(this,r),t.call(this,e)}return Sn(r)}(On(Error));function fM(e){if(!(e instanceof pM))throw new TypeError("JacobianPoint expected")}var pM=function(){function e(t,r,n){xn(this,e),this.x=t,this.y=r,this.z=n}return Sn(e,[{key:"equals",value:function(e){fM(e);var t=this.x,r=this.y,n=this.z,a=e.x,i=e.y,o=e.z,s=NM(n*n),u=NM(o*o),c=NM(t*u),l=NM(a*s),f=NM(NM(r*o)*u),p=NM(NM(i*n)*s);return c===l&&f===p}},{key:"negate",value:function(){return new e(this.x,NM(-this.y),this.z)}},{key:"double",value:function(){var t=this.x,r=this.y,n=this.z,a=NM(t*t),i=NM(r*r),o=NM(i*i),s=t+i,u=NM(QB*(NM(s*s)-a-o)),c=NM(JB*a),l=NM(c*c),f=NM(l-QB*u);return new e(f,NM(c*(u-f)-XB*o),NM(QB*r*n))}},{key:"add",value:function(t){fM(t);var r=this.x,n=this.y,a=this.z,i=t.x,o=t.y,s=t.z;if(i===GB||o===GB)return this;if(r===GB||n===GB)return t;var u=NM(a*a),c=NM(s*s),l=NM(r*c),f=NM(i*u),p=NM(NM(n*s)*c),h=NM(NM(o*a)*u),d=NM(f-l),v=NM(h-p);if(d===GB)return v===GB?this.double():e.ZERO;var y=NM(d*d),b=NM(d*y),g=NM(l*y),m=NM(v*v-b-QB*g);return new e(m,NM(v*(g-m)-p*b),NM(a*s*d))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiplyUnsafe",value:function(t){var r=e.ZERO;if("bigint"===typeof t&&t===GB)return r;var n=DM(t);if(n===YB)return this;if(!cM){for(var a=r,i=this;n>GB;)n&YB&&(a=a.add(i)),i=i.double(),n>>=YB;return a}for(var o=rM(n),s=o.k1neg,u=o.k1,c=o.k2neg,l=o.k2,f=r,p=r,h=this;u>GB||l>GB;)u&YB&&(f=f.add(h)),l&YB&&(p=p.add(h)),h=h.double(),u>>=YB,l>>=YB;return s&&(f=f.negate()),c&&(p=p.negate()),p=new e(NM(p.x*tM),p.y,p.z),f.add(p)}},{key:"precomputeWindow",value:function(e){for(var t=cM?128/e+1:256/e+1,r=[],n=this,a=n,i=0;i<t;i++){a=n,r.push(a);for(var o=1;o<Math.pow(2,e-1);o++)a=a.add(n),r.push(a);n=a.double()}return r}},{key:"wNAF",value:function(t,r){!r&&this.equals(e.BASE)&&(r=vM.BASE);var n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var a=r&&dM.get(r);a||(a=this.precomputeWindow(n),r&&1!==n&&(a=e.normalizeZ(a),dM.set(r,a)));for(var i=e.ZERO,o=e.BASE,s=1+(cM?128/n:256/n),u=Math.pow(2,n-1),c=BigInt(Math.pow(2,n)-1),l=Math.pow(2,n),f=BigInt(n),p=0;p<s;p++){var h=p*u,d=Number(t&c);t>>=f,d>u&&(d-=l,t+=YB);var v=h,y=h+Math.abs(d)-1,b=p%2!==0,g=d<0;0===d?o=o.add(hM(b,a[v])):i=i.add(hM(g,a[y]))}return{p:i,f:o}}},{key:"multiply",value:function(t,r){var n,a,i=DM(t);if(cM){var o=rM(i),s=o.k1neg,u=o.k1,c=o.k2neg,l=o.k2,f=this.wNAF(u,r),p=f.p,h=f.f,d=this.wNAF(l,r),v=d.p,y=d.f;p=hM(s,p),v=new e(NM((v=hM(c,v)).x*tM),v.y,v.z),n=p.add(v),a=h.add(y)}else{var b=this.wNAF(i,r);n=b.p,a=b.f}return e.normalizeZ([n,a])[0]}},{key:"toAffine",value:function(t){var r=this.x,n=this.y,a=this.z,i=this.equals(e.ZERO);null==t&&(t=i?XB:LM(a));var o=t,s=NM(o*o),u=NM(s*o),c=NM(r*s),l=NM(n*u),f=NM(a*o);if(i)return vM.ZERO;if(f!==YB)throw new Error("invZ was invalid");return new vM(c,l)}}],[{key:"fromAffine",value:function(t){if(!(t instanceof vM))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(vM.ZERO)?e.ZERO:new e(t.x,t.y,YB)}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$B.P,r=new Array(e.length),n=e.reduce((function(e,n,a){return n===GB?e:(r[a]=e,NM(e*n,t))}),YB),a=LM(n,t);return e.reduceRight((function(e,n,a){return n===GB?e:(r[a]=NM(e*r[a],t),NM(e*n,t))}),a),r}(e.map((function(e){return e.z})));return e.map((function(e,r){return e.toAffine(t[r])}))}},{key:"normalizeZ",value:function(t){return e.toAffineBatch(t).map(e.fromAffine)}}]),e}();function hM(e,t){var r=t.negate();return e?r:t}pM.BASE=new pM($B.Gx,$B.Gy,YB),pM.ZERO=new pM(GB,YB,GB);var dM=new WeakMap,vM=function(){function e(t,r){xn(this,e),this.x=t,this.y=r}return Sn(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,dM.delete(this)}},{key:"hasEvenY",value:function(){return this.y%QB===GB}},{key:"toRawBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return RM(this.toHex(e))}},{key:"toHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=SM(this.x);if(e){var r=this.hasEvenY()?"02":"03";return"".concat(r).concat(t)}return"04".concat(t).concat(SM(this.y))}},{key:"toHexX",value:function(){return this.toHex(!0).slice(2)}},{key:"toRawX",value:function(){return this.toRawBytes(!0).slice(1)}},{key:"assertValidity",value:function(){var e="Point is not on elliptic curve",t=this.x,r=this.y;if(!jM(t)||!jM(r))throw new Error(e);var n=NM(r*r);if(NM(n-uM(t))!==GB)throw new Error(e)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(this.x,NM(-this.y))}},{key:"double",value:function(){return pM.fromAffine(this).double().toAffine()}},{key:"add",value:function(e){return pM.fromAffine(this).add(pM.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return pM.fromAffine(this).multiply(e,this).toAffine()}},{key:"multiplyAndAddUnsafe",value:function(t,r,n){var a=pM.fromAffine(this),i=r===GB||r===YB||this!==e.BASE?a.multiplyUnsafe(r):a.multiply(r),o=pM.fromAffine(t).multiplyUnsafe(n),s=i.add(o);return s.equals(pM.ZERO)?void 0:s.toAffine()}}],[{key:"fromCompressedHex",value:function(t){var r=32===t.length,n=IM(r?t:t.subarray(1));if(!jM(n))throw new Error("Point is not on curve");var a=function(e){var t=$B.P,r=BigInt(6),n=BigInt(11),a=BigInt(22),i=BigInt(23),o=BigInt(44),s=BigInt(88),u=e*e*e%t,c=u*u*e%t,l=OM(c,JB)*c%t,f=OM(l,JB)*c%t,p=OM(f,QB)*u%t,h=OM(p,n)*p%t,d=OM(h,a)*h%t,v=OM(d,o)*d%t,y=OM(v,s)*v%t,b=OM(y,o)*d%t,g=OM(b,JB)*c%t,m=OM(g,i)*h%t,w=OM(m,r)*u%t,k=OM(w,QB);if(k*k%t!==e)throw new Error("Cannot find square root");return k}(uM(n)),i=(a&YB)===YB;r?i&&(a=NM(-a)):1===(1&t[0])!==i&&(a=NM(-a));var o=new e(n,a);return o.assertValidity(),o}},{key:"fromUncompressedHex",value:function(t){var r=new e(IM(t.subarray(1,nM+1)),IM(t.subarray(nM+1,2*nM+1)));return r.assertValidity(),r}},{key:"fromHex",value:function(e){var t=PM(e),r=t.length,n=t[0];if(r===nM)return this.fromCompressedHex(t);if(r===oM&&(2===n||3===n))return this.fromCompressedHex(t);if(r===sM&&4===n)return this.fromUncompressedHex(t);throw new Error("Point.fromHex: received invalid point. Expected 32-".concat(oM," compressed bytes or ").concat(sM," uncompressed bytes, not ").concat(r))}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(zM(t))}},{key:"fromSignature",value:function(t,r,n){var a=qM(r),i=a.r,o=a.s;if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");var s=BM(PM(t)),u=$B.n,c=2===n||3===n?i+u:i,l=LM(c,u),f=NM(-s*l,u),p=NM(o*l,u),h=1&n?"03":"02",d=e.fromHex(h+SM(c)),v=e.BASE.multiplyAndAddUnsafe(d,f,p);if(!v)throw new Error("Cannot recover signature: point at infinify");return v.assertValidity(),v}}]),e}();function yM(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function bM(e){if(e.length<2||2!==e[0])throw new Error("Invalid signature integer tag: ".concat(kM(e)));var t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:IM(r),left:e.subarray(t+2)}}vM.BASE=new vM($B.Gx,$B.Gy),vM.ZERO=new vM(GB,GB);var gM=function(){function e(t,r){xn(this,e),this.r=t,this.s=r,this.assertValidity()}return Sn(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!UM(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!UM(t))throw new Error("Invalid Signature: s must be 0 < s < n")}},{key:"hasHighS",value:function(){var e=$B.n>>YB;return this.s>e}},{key:"normalizeS",value:function(){return this.hasHighS()?new e(this.r,NM(-this.s,$B.n)):this}},{key:"toDERRawBytes",value:function(){return RM(this.toDERHex())}},{key:"toDERHex",value:function(){var e=yM(CM(this.s)),t=yM(CM(this.r)),r=e.length/2,n=t.length/2,a=CM(r),i=CM(n),o=CM(n+r+4);return"30".concat(o,"02").concat(i).concat(t,"02").concat(a).concat(e)}},{key:"toRawBytes",value:function(){return this.toDERRawBytes()}},{key:"toHex",value:function(){return this.toDERHex()}},{key:"toCompactRawBytes",value:function(){return RM(this.toCompactHex())}},{key:"toCompactHex",value:function(){return SM(this.r)+SM(this.s)}}],[{key:"fromCompact",value:function(t){var r=t instanceof Uint8Array,n="Signature.fromCompact";if("string"!==typeof t&&!r)throw new TypeError("".concat(n,": Expected string or Uint8Array"));var a=r?kM(t):t;if(128!==a.length)throw new Error("".concat(n,": Expected 64-byte hex"));return new e(TM(a.slice(0,64)),TM(a.slice(64,128)))}},{key:"fromDER",value:function(t){var r=t instanceof Uint8Array;if("string"!==typeof t&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");var n=function(e){if(e.length<2||48!=e[0])throw new Error("Invalid signature tag: ".concat(kM(e)));if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");var t=bM(e.subarray(2)),r=t.data,n=bM(t.left),a=n.data,i=n.left;if(i.length)throw new Error("Invalid signature: left bytes after parsing: ".concat(kM(i)));return{r:r,s:a}}(r?t:RM(t));return new e(n.r,n.s)}},{key:"fromHex",value:function(e){return this.fromDER(e)}}]),e}();function mM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];for(var n=t.reduce((function(e,t){return e+t.length}),0),a=new Uint8Array(n),i=0,o=0;i<t.length;i++){var s=t[i];a.set(s,o),o+=s.length}return a}var wM=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function kM(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t="",r=0;r<e.length;r++)t+=wM[e[r]];return t}var xM,_M,EM=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function SM(e){if("bigint"!==typeof e)throw new Error("Expected bigint");if(!(GB<=e&&e<EM))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function AM(e){var t=RM(SM(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function CM(e){var t=e.toString(16);return 1&t.length?"0".concat(t):t}function TM(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt("0x".concat(e))}function RM(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);for(var t=new Uint8Array(e.length/2),r=0;r<t.length;r++){var n=2*r,a=e.slice(n,n+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function IM(e){return TM(kM(e))}function PM(e){return e instanceof Uint8Array?Uint8Array.from(e):RM(e)}function DM(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&UM(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function NM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$B.P,r=e%t;return r>=GB?r:t+r}function OM(e,t){for(var r=$B.P,n=e;t-- >GB;)n*=n,n%=r;return n}function LM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$B.P;if(e===GB||t<=GB)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var r=NM(e,t),n=t,a=GB,i=YB,o=YB,s=GB;r!==GB;){var u=n/r,c=n%r,l=a-o*u,f=i-s*u;n=r,r=c,a=o,i=s,o=l,s=f}if(n!==YB)throw new Error("invert: does not exist");return NM(a,t)}function BM(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e){var t=8*e.length-8*aM,r=IM(e);return t>0?r>>BigInt(t):r}(e);if(t)return r;var n=$B.n;return r>=n?r-n:r}var MM=function(){function e(t,r){if(xn(this,e),this.hashLen=t,this.qByteLen=r,"number"!==typeof t||t<2)throw new Error("hashLen must be a number");if("number"!==typeof r||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}return Sn(e,[{key:"hmac",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return rU.hmacSha256.apply(rU,[this.k].concat(t))}},{key:"hmacSync",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _M.apply(void 0,[this.k].concat(t))}},{key:"checkSync",value:function(){if("function"!==typeof _M)throw new lM("hmacSha256Sync needs to be set")}},{key:"incr",value:function(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}},{key:"reseed",value:function(){var e=Zh(Fh().mark((function e(){var t,r=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:new Uint8Array,e.next=3,this.hmac(this.v,Uint8Array.from([0]),t);case 3:return this.k=e.sent,e.next=6,this.hmac(this.v);case 6:if(this.v=e.sent,0!==t.length){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.hmac(this.v,Uint8Array.from([1]),t);case 11:return this.k=e.sent,e.next=14,this.hmac(this.v);case 14:this.v=e.sent;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reseedSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}},{key:"generate",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.incr(),t=0,r=[];case 3:if(!(t<this.qByteLen)){e.next=12;break}return e.next=6,this.hmac(this.v);case 6:this.v=e.sent,n=this.v.slice(),r.push(n),t+=this.v.length,e.next=3;break;case 12:return e.abrupt("return",mM.apply(void 0,r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateSync",value:function(){this.checkSync(),this.incr();for(var e=0,t=[];e<this.qByteLen;){this.v=this.hmacSync(this.v);var r=this.v.slice();t.push(r),e+=this.v.length}return mM.apply(void 0,t)}}]),e}();function UM(e){return GB<e&&e<$B.n}function jM(e){return GB<e&&e<$B.P}function FM(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=$B.n,i=BM(e,!0);if(UM(i)){var o=LM(i,a),s=vM.BASE.multiply(i),u=NM(s.x,a);if(u!==GB){var c=NM(o*NM(t+r*u,a),a);if(c!==GB){var l=new gM(u,c),f=(s.x===l.r?0:2)|Number(s.y&YB);return n&&l.hasHighS()&&(l=l.normalizeS(),f^=1),{sig:l,recovery:f}}}}}function zM(e){var t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(e.length!==2*aM)throw new Error("Expected 32 bytes of private key");t=TM(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==aM)throw new Error("Expected 32 bytes of private key");t=IM(e)}if(!UM(t))throw new Error("Expected private key: 0 < key < n");return t}function ZM(e){return e instanceof vM?(e.assertValidity(),e):vM.fromHex(e)}function qM(e){if(e instanceof gM)return e.assertValidity(),e;try{return gM.fromDER(e)}catch(t){return gM.fromCompact(e)}}function VM(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return vM.fromPrivateKey(e).toRawBytes(t)}function KM(e){return IM(e.length>nM?e.slice(0,nM):e)}function HM(e){var t=KM(e),r=NM(t,$B.n);return WM(r<GB?t:r)}function WM(e){return AM(e)}function GM(e,t,r){if(null==e)throw new Error('sign: expected valid message hash, not "'.concat(e,'"'));var n=PM(e),a=zM(t),i=[WM(a),HM(n)];if(null!=r){!0===r&&(r=rU.randomBytes(nM));var o=PM(r);if(o.length!==nM)throw new Error("sign: Expected ".concat(nM," bytes of extra data"));i.push(o)}return{seed:mM.apply(void 0,i),m:KM(n),d:a}}function YM(e,t){var r=e.sig,n=e.recovery,a=Object.assign({canonical:!0,der:!0},t),i=a.der,o=a.recovered,s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}function QM(e,t){return JM.apply(this,arguments)}function JM(){return JM=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=GM(t,r,(n=l.length>2&&void 0!==l[2]?l[2]:{}).extraEntropy),i=a.seed,o=a.m,s=a.d,u=new MM(iM,aM),e.next=5,u.reseed(i);case 5:return e.t0=FM,e.next=8,u.generate();case 8:if(e.t1=e.sent,e.t2=o,e.t3=s,e.t4=n.canonical,c=(0,e.t0)(e.t1,e.t2,e.t3,e.t4)){e.next=17;break}return e.next=15,u.reseed();case 15:e.next=5;break;case 17:return e.abrupt("return",YM(c,n));case 18:case"end":return e.stop()}}),e)}))),JM.apply(this,arguments)}var XM={strict:!0};function $M(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:XM;try{n=qM(e),t=PM(t)}catch(v){return!1}var i=n,o=i.r,s=i.s;if(a.strict&&n.hasHighS())return!1;var u,c=BM(t);try{u=ZM(r)}catch(v){return!1}var l=$B.n,f=LM(s,l),p=NM(c*f,l),h=NM(o*f,l),d=vM.BASE.multiplyAndAddUnsafe(u,p,h);return!!d&&NM(d.x,l)===o}vM.BASE._setWindowSize(8);var eU={node:WB,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},tU={},rU={bytesToHex:kM,hexToBytes:RM,concatBytes:mM,mod:NM,invert:LM,isValidPrivateKey:function(e){try{return zM(e),!0}catch(t){return!1}},_bigintTo32Bytes:AM,_normalizePrivateKey:zM,hashToPrivateKey:function(e){e=PM(e);var t=aM+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return AM(NM(IM(e),$B.n-YB)+YB)},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(eU.web)return eU.web.getRandomValues(new Uint8Array(e));if(eU.node){var t=eU.node.randomBytes;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return rU.hashToPrivateKey(rU.randomBytes(aM+8))},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vM.BASE,r=t===vM.BASE?t:new vM(t.x,t.y);return r._setWindowSize(e),r.multiply(JB),r},sha256:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,r=new Array(t),n=0;n<t;n++)r[n]=s[n];if(!eU.web){e.next=8;break}return e.next=4,eU.web.subtle.digest("SHA-256",mM.apply(void 0,r));case 4:return a=e.sent,e.abrupt("return",new Uint8Array(a));case 8:if(!eU.node){e.next=15;break}return i=eU.node.createHash,o=i("sha256"),r.forEach((function(e){return o.update(e)})),e.abrupt("return",Uint8Array.from(o.digest()));case 15:throw new Error("The environment doesn't have sha256 function");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hmacSha256:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=l[a];if(!eU.web){e.next=12;break}return e.next=4,eU.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);case 4:return i=e.sent,o=mM.apply(void 0,n),e.next=8,eU.web.subtle.sign("HMAC",i,o);case 8:return s=e.sent,e.abrupt("return",new Uint8Array(s));case 12:if(!eU.node){e.next=19;break}return u=eU.node.createHmac,c=u("sha256",t),n.forEach((function(e){return c.update(e)})),e.abrupt("return",Uint8Array.from(c.digest()));case 19:throw new Error("The environment doesn't have hmac-sha256 function");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=tU[t])){e.next=7;break}return e.next=4,rU.sha256(Uint8Array.from(t,(function(e){return e.charCodeAt(0)})));case 4:n=e.sent,r=mM(n,n),tU[t]=r;case 7:for(a=s.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=s[o];return e.abrupt("return",rU.sha256.apply(rU,[r].concat(i)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taggedHashSync:function(e){if("function"!==typeof xM)throw new lM("sha256Sync is undefined, you need to set it");var t=tU[e];if(void 0===t){var r=xM(Uint8Array.from(e,(function(e){return e.charCodeAt(0)})));t=mM(r,r),tU[e]=t}for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return xM.apply(void 0,[t].concat(a))},_JacobianPoint:pM};function nU(e){if(isNaN(e)||e<=0)throw new gS("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return rU.randomBytes(e)}Object.defineProperties(rU,{sha256Sync:{configurable:!1,get:function(){return xM},set:function(e){xM||(xM=e)}},hmacSha256Sync:{configurable:!1,get:function(){return _M},set:function(e){_M||(_M=e)}}});__webpack_require__(5493);function aU(e,t){return t.map((function(t){return zB(e[t])}))}function iU(e){var t=fN.asn1.fromDer(UB(e,"ascii")),r=fN.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:FB(r.n),e:FB(r.e),d:FB(r.d),p:FB(r.p),q:FB(r.q),dp:FB(r.dP),dq:FB(r.dQ),qi:FB(r.qInv),alg:"RS256"}}function oU(e){return sU.apply(this,arguments)}function sU(){return sU=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sB.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);case 2:return r=e.sent,e.next=5,dU(r);case 5:return n=e.sent,e.abrupt("return",{privateKey:n[0],publicKey:n[1]});case 7:case"end":return e.stop()}}),e)}))),sU.apply(this,arguments)}function uU(e){return cU.apply(this,arguments)}function cU(){return cU=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sB.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]);case 2:return r=e.sent,e.t0=r,e.next=6,yU(t);case 6:return e.t1=e.sent,n=[e.t0,e.t1],e.next=10,dU({privateKey:n[0],publicKey:n[1]});case 10:return a=e.sent,e.abrupt("return",{privateKey:a[0],publicKey:a[1]});case 12:case"end":return e.stop()}}),e)}))),cU.apply(this,arguments)}function lU(e,t){return fU.apply(this,arguments)}function fU(){return(fU=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sB.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);case 2:return n=e.sent,e.next=5,sB.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,Uint8Array.from(r));case 5:return a=e.sent,e.abrupt("return",new Uint8Array(a,0,a.byteLength));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pU(e,t,r){return hU.apply(this,arguments)}function hU(){return(hU=Zh(Fh().mark((function e(t,r,n){var a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sB.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);case 2:return a=e.sent,e.abrupt("return",sB.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},a,r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dU(e){return vU.apply(this,arguments)}function vU(){return vU=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.privateKey&&null!=t.publicKey){e.next=2;break}throw new gS("Private and public key are required","ERR_INVALID_PARAMETERS");case 2:return e.abrupt("return",Promise.all([sB.get().subtle.exportKey("jwk",t.privateKey),sB.get().subtle.exportKey("jwk",t.publicKey)]));case 3:case"end":return e.stop()}}),e)}))),vU.apply(this,arguments)}function yU(e){return bU.apply(this,arguments)}function bU(){return(bU=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sB.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gU(e,t,r,n){var a=t?function(e){var t;return(t=fN.pki).setRsaPublicKey.apply(t,(0,kn.Z)(aU(e,["n","e"])))}(e):function(e){var t;return(t=fN.pki).setRsaPrivateKey.apply(t,(0,kn.Z)(aU(e,["n","e","d","p","q","dp","dq","qi"])))}(e);return ZO(n(UB(Uint8Array.from(r),"ascii"),a),"ascii")}var mU=function(){function e(t){xn(this,e),(0,oi.Z)(this,"_key",void 0),this._key=t}return Sn(e,[{key:"verify",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pU(this._key,r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return function(e){if(null==e.n||null==e.e)throw new gS("JWK was missing components","ERR_INVALID_PARAMETERS");var t=fN.pki.publicKeyToAsn1({n:zB(e.n),e:zB(e.e)});return ZO(fN.asn1.toDer(t).getBytes(),"ascii")}(this._key)}},{key:"bytes",get:function(){return wB.encode({Type:gB.RSA,Data:this.marshal()}).subarray()}},{key:"encrypt",value:function(e){return gU(this._key,!0,e,(function(e,t){return t.encrypt(e)}))}},{key:"equals",value:function(e){return qO(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kO.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wU=function(){function e(t,r){xn(this,e),(0,oi.Z)(this,"_key",void 0),(0,oi.Z)(this,"_publicKey",void 0),this._key=t,this._publicKey=r}return Sn(e,[{key:"genSecret",value:function(){return nU(16)}},{key:"sign",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lU(this._key,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){if(null==this._publicKey)throw new gS("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new mU(this._publicKey)}},{key:"decrypt",value:function(e){return gU(this._key,!1,e,(function(e,t){return t.decrypt(e)}))}},{key:"marshal",value:function(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw new gS("JWK was missing components","ERR_INVALID_PARAMETERS");var t=fN.pki.privateKeyToAsn1({n:zB(e.n),e:zB(e.e),d:zB(e.d),p:zB(e.p),q:zB(e.q),dP:zB(e.dp),dQ:zB(e.dq),qInv:zB(e.qi)});return ZO(fN.asn1.toDer(t).getBytes(),"ascii")}(this._key)}},{key:"bytes",get:function(){return kB.encode({Type:gB.RSA,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return qO(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kO.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.hash();case 2:return t=e.sent,e.abrupt("return",UB(t,"base58btc"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pkcs-8"!==(r=s.length>1&&void 0!==s[1]?s[1]:"pkcs-8")){e.next=9;break}return n=new fN.util.ByteBuffer(this.marshal()),a=fN.asn1.fromDer(n),i=fN.pki.privateKeyFromAsn1(a),o={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"},e.abrupt("return",fN.pki.encryptRsaPrivateKey(i,t,o));case 9:if("libp2p-key"!==r){e.next=13;break}return e.abrupt("return",lB(this.bytes,t));case 13:throw new gS("export format '".concat(r,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function kU(e){return xU.apply(this,arguments)}function xU(){return xU=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=iU(t),e.next=3,uU(r);case 3:return n=e.sent,e.abrupt("return",new wU(n.privateKey,n.publicKey));case 5:case"end":return e.stop()}}),e)}))),xU.apply(this,arguments)}function _U(e){var t=function(e){var t=fN.asn1.fromDer(UB(e,"ascii")),r=fN.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:FB(r.n),e:FB(r.e)}}(e);return new mU(t)}function EU(e){return SU.apply(this,arguments)}function SU(){return(SU=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uU(t);case 2:return r=e.sent,e.abrupt("return",new wU(r.privateKey,r.publicKey));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AU(e){return CU.apply(this,arguments)}function CU(){return CU=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oU(t);case 2:return r=e.sent,e.abrupt("return",new wU(r.privateKey,r.publicKey));case 4:case"end":return e.stop()}}),e)}))),CU.apply(this,arguments)}function TU(e,t){return RU.apply(this,arguments)}function RU(){return RU=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kO.digest(r);case 2:return n=e.sent,a=n.digest,e.prev=4,e.next=7,QM(a,t);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),new gS(String(e.t0),"ERR_INVALID_INPUT");case 13:case"end":return e.stop()}}),e,null,[[4,10]])}))),RU.apply(this,arguments)}function IU(e,t,r){return PU.apply(this,arguments)}function PU(){return PU=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kO.digest(n);case 3:return a=e.sent,i=a.digest,e.abrupt("return",$M(r,i,t));case 8:throw e.prev=8,e.t0=e.catch(0),new gS(String(e.t0),"ERR_INVALID_INPUT");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),PU.apply(this,arguments)}function DU(e){try{vM.fromHex(e)}catch(sY){throw new gS(String(sY),"ERR_INVALID_PUBLIC_KEY")}}var NU=function(){function e(t){xn(this,e),(0,oi.Z)(this,"_key",void 0),DU(t),this._key=t}return Sn(e,[{key:"verify",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",IU(this._key,r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"marshal",value:function(){return e=this._key,vM.fromHex(e).toRawBytes(!0);var e}},{key:"bytes",get:function(){return wB.encode({Type:gB.Secp256k1,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return qO(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kO.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),OU=function(){function e(t,r){xn(this,e),(0,oi.Z)(this,"_key",void 0),(0,oi.Z)(this,"_publicKey",void 0),this._key=t,this._publicKey=null!==r&&void 0!==r?r:function(e){try{return VM(e,!0)}catch(sY){throw new gS(String(sY),"ERR_INVALID_PRIVATE_KEY")}}(t),function(e){try{VM(e,!0)}catch(sY){throw new gS(String(sY),"ERR_INVALID_PRIVATE_KEY")}}(this._key),DU(this._publicKey)}return Sn(e,[{key:"sign",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TU(this._key,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"public",get:function(){return new NU(this._publicKey)}},{key:"marshal",value:function(){return this._key}},{key:"bytes",get:function(){return kB.encode({Type:gB.Secp256k1,Data:this.marshal()}).subarray()}},{key:"equals",value:function(e){return qO(this.bytes,e.bytes)}},{key:"hash",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kO.digest(this.bytes);case 2:return t=e.sent,r=t.bytes,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"id",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.public.hash();case 2:return t=e.sent,e.abrupt("return",UB(t,"base58btc"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("libp2p-key"!==(r=n.length>1&&void 0!==n[1]?n[1]:"libp2p-key")){e.next=5;break}return e.abrupt("return",lB(this.bytes,t));case 5:throw new gS("export format '".concat(r,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function LU(e){return new OU(e)}function BU(e){return new NU(e)}function MU(){return UU.apply(this,arguments)}function UU(){return(UU=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=rU.randomPrivateKey(),e.abrupt("return",new OU(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jU={rsa:Ye,ed25519:Ge,secp256k1:Qe};function FU(e){var t=Object.keys(jU).join(" / ");return new gS("invalid or unsupported key type ".concat(e,". Must be ").concat(t),"ERR_UNSUPPORTED_KEY_TYPE")}function zU(e){if("rsa"===(e=e.toLowerCase())||"ed25519"===e||"secp256k1"===e)return jU[e];throw FU(e)}function ZU(e,t){return qU.apply(this,arguments)}function qU(){return qU=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zU(t).generateKeyPair(null!==r&&void 0!==r?r:2048));case 1:case"end":return e.stop()}}),e)}))),qU.apply(this,arguments)}function VU(e){var t,r,n=wB.decode(e),a=null!==(t=n.Data)&&void 0!==t?t:new Uint8Array;switch(n.Type){case gB.RSA:return jU.rsa.unmarshalRsaPublicKey(a);case gB.Ed25519:return jU.ed25519.unmarshalEd25519PublicKey(a);case gB.Secp256k1:return jU.secp256k1.unmarshalSecp256k1PublicKey(a);default:throw FU(null!==(r=n.Type)&&void 0!==r?r:"RSA")}}function KU(e,t){var r;return zU(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}function HU(e){return WU.apply(this,arguments)}function WU(){return WU=Zh(Fh().mark((function e(t){var r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=kB.decode(t),i=null!==(r=a.Data)&&void 0!==r?r:new Uint8Array,e.t0=a.Type,e.next=e.t0===gB.RSA?5:e.t0===gB.Ed25519?6:e.t0===gB.Secp256k1?7:8;break;case 5:return e.abrupt("return",jU.rsa.unmarshalRsaPrivateKey(i));case 6:return e.abrupt("return",jU.ed25519.unmarshalEd25519PrivateKey(i));case 7:return e.abrupt("return",jU.secp256k1.unmarshalSecp256k1PrivateKey(i));case 8:throw FU(null!==(n=a.Type)&&void 0!==n?n:"RSA");case 9:case"end":return e.stop()}}),e)}))),WU.apply(this,arguments)}function GU(e,t){var r;return zU(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}function YU(e,t){return QU.apply(this,arguments)}function QU(){return(QU=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,VB(t,r);case 3:return n=e.sent,e.next=6,HU(n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0);case 11:if(null!==(a=fN.pki.decryptRsaPrivateKey(t,r))){e.next=14;break}throw new gS("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");case 14:return i=ZO((i=fN.asn1.toDer(fN.pki.privateKeyToAsn1(a))).getBytes(),"ascii"),e.abrupt("return",jU.rsa.unmarshalRsaPrivateKey(i));case 17:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var JU="ERR_UNRECOGNIZED_VALIDITY",XU="ERR_SIGNATURE_VERIFICATION",$U="ERR_UNDEFINED_PARAMETER",ej=__webpack_require__(5368),tj=ej.Reader;function rj(e,t){var r=tj.create(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}["uint64","int64","sint64","fixed64","sfixed64"].forEach((function(e){var t=tj.prototype[e];tj.prototype[e]=function(){return BigInt(t.call(this).toString())}}));var nj,aj,ij=ej.Writer;function oj(e,t){var r=ij.create();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}function sj(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function uj(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}return sj("enum",nj.VARINT,(function(e,r){var n=t(e);r.int32(n)}),(function(e){return t(e.uint32())}))}function cj(e,t){return sj("message",nj.LENGTH_DELIMITED,e,t)}["uint64","int64","sint64","fixed64","sfixed64"].forEach((function(e){var t=ij.prototype[e];ij.prototype[e]=function(e){return t.call(this,e.toString())}})),function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(nj||(nj={})),function(e){var t,r;!function(e){e.EOL="EOL"}(e.ValidityType||(e.ValidityType={})),function(e){e[e.EOL=0]="EOL"}(t||(t={})),function(e){e.codec=function(){return uj(t)}}(e.ValidityType||(e.ValidityType={})),e.codec=function(){return null==r&&(r=cj((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&r.fork(),null!=t.value&&(r.uint32(10),r.bytes(t.value)),null!=t.signature&&(r.uint32(18),r.bytes(t.signature)),null!=t.validityType&&(r.uint32(24),e.ValidityType.codec().encode(t.validityType,r)),null!=t.validity&&(r.uint32(34),r.bytes(t.validity)),null!=t.sequence&&(r.uint32(40),r.uint64(t.sequence)),null!=t.ttl&&(r.uint32(48),r.uint64(t.ttl)),null!=t.pubKey&&(r.uint32(58),r.bytes(t.pubKey)),null!=t.signatureV2&&(r.uint32(66),r.bytes(t.signatureV2)),null!=t.data&&(r.uint32(74),r.bytes(t.data)),!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.value=t.bytes();break;case 2:n.signature=t.bytes();break;case 3:n.validityType=e.ValidityType.codec().decode(t);break;case 4:n.validity=t.bytes();break;case 5:n.sequence=t.uint64();break;case 6:n.ttl=t.uint64();break;case 7:n.pubKey=t.bytes();break;case 8:n.signatureV2=t.bytes();break;case 9:n.data=t.bytes();break;default:t.skipType(7&i)}}return n}))),r},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(aj||(aj={}));var lj=__webpack_require__(3466),fj=ud("ipns:utils"),pj=mm("/ipns/");function hj(e){var t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");var n=parseInt(r[1],10),a=parseInt(r[2],10)-1,i=parseInt(r[3],10),o=parseInt(r[4],10),s=parseInt(r[5],10),u=parseInt(r[6],10),c=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,a,i,o,s,u,c))}var dj=function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r&&null!=t){e.next=4;break}throw n=new Error("one or more of the provided parameters are not defined"),fj.error(n),cd(n,$U);case 4:if(null==r.pubKey){e.next=20;break}e.prev=5,a=VU(r.pubKey),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(5),fj.error(e.t0),e.t0;case 13:return e.next=15,WD(r.pubKey);case 15:if(e.sent.equals(t)){e.next=18;break}throw cd(new Error("Embedded public key did not match PeerID"),"ERR_INVALID_EMBEDDED_KEY");case 18:e.next=21;break;case 20:null!=t.publicKey&&(a=VU(t.publicKey));case 21:if(null==a){e.next=23;break}return e.abrupt("return",a);case 23:throw cd(new Error("no public key is available"),$U);case 24:case"end":return e.stop()}}),e,null,[[5,9]])})));return function(t,r){return e.apply(this,arguments)}}(),vj=function(e,t,r){var n=mm(t);return(0,lj.concat)([e,r,n])},yj=function(e){var t=mm("ipns-signature:");return(0,lj.concat)([t,e])},bj=function(e){var t,r,n,a,i,o,s=aj.decode(e);return null!=s.sequence&&(s.sequence=BigInt(s.sequence)),null!=s.ttl&&(s.ttl=BigInt(s.ttl)),{value:null!==(t=s.value)&&void 0!==t?t:new Uint8Array(0),signature:null!==(r=s.signature)&&void 0!==r?r:new Uint8Array(0),validityType:null!==(n=s.validityType)&&void 0!==n?n:aj.ValidityType.EOL,validity:null!==(a=s.validity)&&void 0!==a?a:new Uint8Array(0),sequence:null!==(i=s.sequence)&&void 0!==i?i:0n,pubKey:s.pubKey,ttl:null!==(o=s.ttl)&&void 0!==o?o:void 0,signatureV2:s.signatureV2,data:s.data}},gj=function(e){return(0,lj.concat)([pj,e.toBytes()])},mj=function(e){return HD(e.slice(pj.length))},wj=function(e,t,r,n,a){if(r!==aj.ValidityType.EOL)throw cd(new Error("Unknown validity type"),JU);return jb({Value:e,Validity:t,ValidityType:0,Sequence:n,TTL:a})},kj=ud("ipns"),xj=Pg.code,_j="/ipns/",Ej=function(){var e=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new lN(Date.now()+Number(a)),o=aj.ValidityType.EOL,s=a.toString().split("."),u=(0,wn.Z)(s,2),c=u[0],l=u[1],f=BigInt(c)*BigInt(1e5)+BigInt(null!==l&&void 0!==l?l:"0"),e.next=6,Sj(t,r,n,o,i,f);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Sj=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i,o){var s,u,c,l,f,p,h,d;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=BigInt(n),s=mm(i.toString()),null!=t.privateKey){e.next=4;break}throw cd(new Error("Missing private key"),"ERR_MISSING_PRIVATE_KEY");case 4:return e.next=6,HU(t.privateKey);case 6:return u=e.sent,e.next=9,Cj(u,r,a,s);case 9:return c=e.sent,l=wj(r,s,a,n,o),f=yj(l),e.next=14,u.sign(f);case 14:return p=e.sent,h={value:r,signature:c,validityType:a,validity:s,sequence:n,ttl:o,signatureV2:p,data:l},null!=t.publicKey&&((d=Gd(t.toBytes())).code===xj&&cN(t.publicKey,d.digest)||(h.pubKey=t.publicKey)),kj("ipns entry for %b created",r),e.abrupt("return",h);case 19:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o){return e.apply(this,arguments)}}(),Aj=function(e){return new LR("/ipns/".concat(function(e){return cv.encode(e).slice(1)}(e)))},Cj=function(){var e=Zh(Fh().mark((function e(t,r,n,a){var i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=vj(r,n,a),e.next=4,t.sign(i);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),kj.error("record signature creation failed",e.t0),cd(new Error("record signature creation failed"),"ERR_SIGNATURE_CREATION");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Tj=ud("ipfs:ipns:publisher"),Rj=sN().code,Ij=36e5,Pj=function(){function e(t,r){xn(this,e),this._routing=t,this._datastore=r}return Sn(e,[{key:"publishWithEOL",value:function(){var e=Zh(Fh().mark((function e(t,r,n,a){var i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateOrCreateRecord(t,r,n,a);case 2:return i=e.sent,e.abrupt("return",this._putRecordToRouting(i,t,a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"publish",value:function(e,t,r){return this.publishWithEOL(e,t,Ij,r)}},{key:"_putRecordToRouting",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(OD(r)){e.next=4;break}throw a="peerId received is not valid",Tj.error(a),cd(new Error(a),"ERR_INVALID_PEER_ID");case 4:if(null!=r.publicKey){e.next=6;break}throw cd(new Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");case 6:return i=gj(r),e.next=9,this._publishEntry(i,t,n);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_publishEntry",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._routing.put(t,r,n);case 3:return a=e.sent,Tj("ipns record for ".concat(uN(t,"base32")," was stored in the routing")),e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),i="ipns record for ".concat(uN(t,"base32")," could not be stored in the routing - ").concat(e.t0.stack),Tj.error(i),Tj.error(e.t0),cd(new Error(i),"ERR_PUTTING_TO_ROUTING");case 14:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_getPublished",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},OD(t)){e.next=5;break}throw n="peerId received is not valid",Tj.error(n),cd(new Error(n),"ERR_INVALID_PEER_ID");case 5:return a=!1!==r.checkRouting,e.prev=6,e.next=9,this._datastore.get(Aj(t.toBytes()));case 9:return i=e.sent,e.abrupt("return",this._unmarshalData(i));case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Rj){e.next=19;break}throw o="unexpected error getting the ipns record ".concat(t.toString()," from datastore"),Tj.error(o),cd(new Error(o),"ERR_UNEXPECTED_DATASTORE_RESPONSE");case 19:if(a){e.next=21;break}throw cd(e.t0,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");case 21:return e.prev=21,s=gj(t),e.next=25,this._routing.get(s);case 25:return u=e.sent,e.abrupt("return",this._unmarshalData(u));case 29:throw e.prev=29,e.t1=e.catch(21),Tj.error(e.t1),e.t1;case 33:case"end":return e.stop()}}),e,this,[[6,13],[21,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_unmarshalData",value:function(e){try{return bj(e)}catch(sY){throw cd(sY,"ERR_INVALID_RECORD_DATA")}}},{key:"_updateOrCreateRecord",value:function(){var e=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(OD(t)){e.next=4;break}throw i="peerId received is not valid",Tj.error(i),cd(new Error(i),"ERR_INVALID_PEER_ID");case 4:return o={checkRouting:!0},e.prev=5,e.next=8,this._getPublished(t,o);case 8:s=e.sent,e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(5),e.t0.code===Rj){e.next=17;break}throw u="unexpected error when determining the last published IPNS record for ".concat(t.toString()," ").concat(e.t0.stack),Tj.error(u),cd(new Error(u),"ERR_DETERMINING_PUBLISHED_RECORD");case 17:return c=0n,s&&void 0!==s.sequence&&(c=cN(s.value,r)?s.sequence:s.sequence+BigInt(1)),e.prev=19,e.next=22,Ej(t,r,c,n);case 22:l=e.sent,e.next=30;break;case 25:throw e.prev=25,e.t1=e.catch(19),f="ipns record for ".concat(r," could not be created"),Tj.error(e.t1),cd(new Error(f),"ERR_CREATING_IPNS_RECORD");case 30:return e.prev=30,d=l,p=aj.encode(d),e.next=34,this._datastore.put(Aj(t.toBytes()),p,a);case 34:return Tj("ipns record for ".concat(uN(r,"base32")," was stored in the datastore")),e.abrupt("return",p);case 38:throw e.prev=38,e.t2=e.catch(30),h="ipns record for ".concat(r," could not be stored in the datastore"),Tj.error(h),cd(new Error(h),"ERR_STORING_IN_DATASTORE");case 43:case"end":return e.stop()}var d}),e,this,[[5,11],[19,25],[30,38]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()}]),e}();Pj.defaultRecordLifetime=Ij;var Dj=ud("ipfs:ipns:republisher"),Nj=function(){function e(t,r,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{pass:""};xn(this,e),this._publisher=t,this._datastore=r,this._peerId=n,this._keychain=a,this._options=i,this._republishHandle=null}return Sn(e,[{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._republishHandle){e.next=2;break}throw cd(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");case 2:t={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:function(e){t._timeoutId=setTimeout(Zh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t._timeoutId=null,r.prev=1,t._inflightTask=t._task(),r.next=5,t._inflightTask;case 5:t._task&&t.runPeriodically(e),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),Dj.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])}))),e())},cancel:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t._timeoutId&&clearTimeout(t._timeoutId),t._task=null,e.next=4,t._inflightTask;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},r=this._options.pass,n=!0,t._task=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new wm.TimeoutController(3e4),e.prev=1,e.next=4,a._republishEntries(a._peerId,r,{signal:t.signal});case 4:return e.prev=4,t.clear(),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),t.runPeriodically((function(){return n?(n=!1,a._options.initialBroadcastInterval||6e4):a._options.broadcastInterval||144e5})),this._republishHandle=t;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._republishHandle){e.next=3;break}throw cd(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");case 3:return this._republishHandle=null,e.next=6,t.cancel();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_republishEntries",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._republishEntry(t,n);case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),"cannot republish entry for the node's private key",Dj.error("cannot republish entry for the node's private key"),e.abrupt("return");case 10:if(!r){e.next=48;break}return e.prev=11,e.next=14,this._keychain.listKeys();case 14:a=e.sent,i=(0,zn.Z)(a),e.prev=16,i.s();case 18:if((o=i.n()).done){e.next=35;break}if("self"!==(s=o.value).name){e.next=22;break}return e.abrupt("continue",33);case 22:return e.next=24,this._keychain.exportKey(s.name,r);case 24:return u=e.sent,e.next=27,YU(u,r);case 27:return c=e.sent,e.next=30,WD(c.public.bytes,c.bytes);case 30:return l=e.sent,e.next=33,this._republishEntry(l,n);case 33:e.next=18;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(16),i.e(e.t1);case 40:return e.prev=40,i.f(),e.finish(40);case 43:e.next=48;break;case 45:e.prev=45,e.t2=e.catch(11),Dj.error(e.t2);case 48:case"end":return e.stop()}}),e,this,[[0,5],[11,45],[16,37,40,43]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_republishEntry",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getPreviousValue(t);case 3:return n=e.sent,e.next=6,this._publisher.publishWithEOL(t,n,864e5,r);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),"ERR_NO_ENTRY_FOUND"!==e.t0.code){e.next=12;break}return e.abrupt("return");case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getPreviousValue",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(OD(t)){e.next=2;break}throw cd(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");case 2:return e.prev=2,e.next=5,this._datastore.get(Aj(t.toBytes()));case 5:if((r=e.sent)instanceof Uint8Array){e.next=8;break}throw cd(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");case 8:return e.prev=8,n=bj(r),e.abrupt("return",n.value);case 13:throw e.prev=13,e.t0=e.catch(8),Dj.error(e.t0),cd(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD");case 17:e.next=24;break;case 19:if(e.prev=19,e.t1=e.catch(2),!e.t1||!e.t1.notFound){e.next=23;break}throw cd(new Error("no previous entry for record with id: ".concat(t.toString())),"ERR_NO_ENTRY_FOUND");case 23:throw e.t1;case 24:case"end":return e.stop()}}),e,this,[[2,19],[8,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Oj=ud("ipns:validator"),Lj=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.value,a=r.validityType,i=r.validity,null!=r.signatureV2&&null!=r.data?(s=r.signatureV2,o=yj(r.data),Bj(r)):(s=null!==(u=r.signature)&&void 0!==u?u:new Uint8Array(0),o=vj(n,a,i)),e.prev=2,e.next=5,t.verify(o,s);case 5:c=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c=!1;case 11:if(c){e.next=14;break}throw Oj.error("record signature verification failed"),cd(new Error("record signature verification failed"),XU);case 14:if(null==i||a!==aj.ValidityType.EOL){e.next=28;break}e.prev=15,l=hj(uN(i)),e.next=23;break;case 19:throw e.prev=19,e.t1=e.catch(15),Oj.error("unrecognized validity format (not an rfc3339 format)"),cd(new Error("unrecognized validity format (not an rfc3339 format)"),"ERR_UNRECOGNIZED_FORMAT");case 23:if(!(l.getTime()<Date.now())){e.next=26;break}throw Oj.error("record has expired"),cd(new Error("record has expired"),"ERR_IPNS_EXPIRED_RECORD");case 26:e.next=31;break;case 28:if(null==a){e.next=31;break}throw Oj.error("unrecognized validity type"),cd(new Error("unrecognized validity type"),JU);case 31:Oj("ipns entry for %b is valid",n);case 32:case"end":return e.stop()}}),e,null,[[2,8],[15,19]])})));return function(t,r){return e.apply(this,arguments)}}(),Bj=function(e){if(null==e.data)throw cd(new Error("Record data is missing"),"ERR_INVALID_RECORD_DATA");var t=function(e){var t=Kb(e);if(0!==t.ValidityType)throw cd(new Error("Unknown validity type"),JU);return t.ValidityType=aj.ValidityType.EOL,Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t}(e.data);if(!cN(t.Value,e.value))throw cd(new Error('Field "value" did not match between protobuf and CBOR'),XU);if(!cN(t.Validity,e.validity))throw cd(new Error('Field "validity" did not match between protobuf and CBOR'),XU);if(t.ValidityType!==e.validityType)throw cd(new Error('Field "validityType" did not match between protobuf and CBOR'),XU);if(t.Sequence!==e.sequence)throw cd(new Error('Field "sequence" did not match between protobuf and CBOR'),XU);if(t.TTL!==e.ttl)throw cd(new Error('Field "ttl" did not match between protobuf and CBOR'),XU)},Mj=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mj(t),a=bj(r),e.next=4,dj(n,a);case 4:return i=e.sent,e.next=7,Lj(i,a);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Uj=ud("ipfs:ipns:resolver"),jj=sN().code,Fj=function(){function e(t){xn(this,e),this._routing=t}return Sn(e,[{key:"resolve",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},"string"===typeof t){e.next=3;break}throw cd(new Error("invalid name"),"ERR_INVALID_NAME");case 3:if(n=r.recursive&&"true"===r.recursive.toString(),3===(a=t.split("/")).length&&""===a[0]){e.next=7;break}throw cd(new Error("invalid name"),"ERR_INVALID_NAME");case 7:return i=a[2],o=1/0,n&&(o=32),e.next=12,this.resolver(i,o,r);case 12:return s=e.sent,Uj("".concat(t," was locally resolved correctly")),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resolver",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r){e.next=4;break}throw a="could not resolve name (recursion limit of ".concat(32," exceeded)"),Uj.error(a),cd(new Error(a),"ERR_RESOLVE_RECURSION_LIMIT");case 4:return e.next=6,this._resolveName(t,n);case 6:if(i=e.sent,"ipfs"!==(o=i.split("/"))[1]&&r){e.next=10;break}return e.abrupt("return",i);case 10:return e.abrupt("return",this.resolver(o[2],r-1,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_resolveName",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=KD(t),a=gj(n),e.prev=2,e.next=5,this._routing.get(a,r);case 5:i=e.sent,e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(2),Uj.error("could not get record from routing",e.t0),e.t0.code!==jj){e.next=13;break}throw cd(new Error("record requested for ".concat(t," was not found in the network")),"ERR_NO_RECORD_FOUND");case 13:throw cd(new Error("unexpected error getting the ipns record ".concat(n.toString())),"ERR_UNEXPECTED_ERROR_GETTING_RECORD");case 14:return e.abrupt("return",this._validateRecord(n,i));case 15:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_validateRecord",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mj((0,lj.concat)([mm("/ipns/"),t.toBytes()]),r);case 2:return n=bj(r),e.abrupt("return",uN(n.value));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),zj=function(){function e(t){xn(this,e),this.lru=tI(t)}return Sn(e,[{key:"get",value:function(e){var t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}},{key:"set",value:function(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}},{key:"has",value:function(e){return!!this.get(e)}},{key:"remove",value:function(e){this.lru.remove(e)}},{key:"clear",value:function(){this.lru.clear()}}]),e}(),Zj=ud("ipfs:ipns"),qj=function(){function e(t,r,n,a,i){xn(this,e),this.publisher=new Pj(t,r),this.republisher=new Nj(this.publisher,r,n,a,i),this.resolver=new Fj(t),this.cache=new zj(1e3),this.routing=t}return Sn(e,[{key:"publish",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:Pj.defaultRecordLifetime,a=u.length>3?u[3]:void 0,e.prev=2,e.next=5,this.publisher.publishWithEOL(t,r,n,a);case 5:return Zj("IPNS value ".concat(uN(r,"base32")," was published correctly")),i=t.toString(),o=parseFloat(n),s=o<6e4?o:6e4,this.cache.set(i,r,s),Zj("IPNS value ".concat(uN(r,"base32")," was cached correctly")),e.abrupt("return",{name:i,value:r});case 14:throw e.prev=14,e.t0=e.catch(2),Zj.error(e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"resolve",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},"string"===typeof t){e.next=3;break}throw cd(new Error("name received is not valid"),"ERR_INVALID_NAME");case 3:if(r.nocache||r.recursive){e.next=8;break}if(n=t.split("/")[2],!(a=this.cache.get(n))){e.next=8;break}return e.abrupt("return",a);case 8:return e.prev=8,e.next=11,this.resolver.resolve(t,r);case 11:return i=e.sent,Zj("IPNS record from ".concat(t," was resolved correctly")),e.abrupt("return",i);case 16:throw e.prev=16,e.t0=e.catch(8),Zj.error(e.t0),e.t0;case 20:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeKeyspace",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.publish(t,r,Pj.defaultRecordLifetime,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}();function Vj(e){return Kj.apply(this,arguments)}function Kj(){return Kj=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!1,a=!1,e.prev=3,o=xm(t);case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}u=s.value,r.push(u);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])}))),Kj.apply(this,arguments)}var Hj=function(e,t){return Kh(Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(Vj(e));case 2:return n=r.sent,r.delegateYield(JD(xm(n.sort(t))),"t0",4);case 4:case"end":return r.stop()}}),r)})))()};function Wj(e){return Gj.apply(this,arguments)}function Gj(){return Gj=Zh(Fh().mark((function e(t){var r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t);case 4:return e.next=6,i.next();case 6:if(!(r=!(o=e.sent).done)){e.next=11;break}o.value;case 8:r=!1,e.next=4;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),n=!0,a=e.t0;case 17:if(e.prev=17,e.prev=18,!r||null==i.return){e.next=22;break}return e.next=22,i.return();case 22:if(e.prev=22,!n){e.next=25;break}throw a;case 25:return e.finish(22);case 26:return e.finish(17);case 27:case"end":return e.stop()}}),e,null,[[2,13,17,27],[18,,22,26]])}))),Gj.apply(this,arguments)}function Yj(e,t){return Qj.apply(this,arguments)}function Qj(){return Qj=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=xm(t);case 4:return e.next=6,km(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=16;break}return u=s.value,e.next=10,km(r(u));case 10:if(!e.sent){e.next=13;break}return e.next=13,u;case 13:n=!1,e.next=4;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),a=!0,i=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==o.return){e.next=27;break}return e.next=27,km(o.return());case 27:if(e.prev=27,!a){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,null,[[2,18,22,32],[23,,27,31]])}))),Qj.apply(this,arguments)}function Jj(e,t){return Xj.apply(this,arguments)}function Xj(){return Xj=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!(r<1)){e.next=3;break}return e.abrupt("return");case 3:a=!1,i=!1,e.prev=5,s=xm(t);case 7:return e.next=9,km(s.next());case 9:if(!(a=!(u=e.sent).done)){e.next=19;break}return c=u.value,e.next=13,c;case 13:if(++n!==r){e.next=16;break}return e.abrupt("return");case 16:a=!1,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),i=!0,o=e.t0;case 25:if(e.prev=25,e.prev=26,!a||null==s.return){e.next=30;break}return e.next=30,km(s.return());case 30:if(e.prev=30,!i){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[5,21,25,35],[26,,30,34]])}))),Xj.apply(this,arguments)}var $j=function(){function e(){xn(this,e)}return Sn(e,[{key:"open",value:function(){return Promise.reject(new Error(".open is not implemented"))}},{key:"close",value:function(){return Promise.reject(new Error(".close is not implemented"))}},{key:"put",value:function(e,t,r){return Promise.reject(new Error(".put is not implemented"))}},{key:"get",value:function(e,t){return Promise.reject(new Error(".get is not implemented"))}},{key:"has",value:function(e,t){return Promise.reject(new Error(".has is not implemented"))}},{key:"delete",value:function(e,t){return Promise.reject(new Error(".delete is not implemented"))}},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,l=c.key,f=c.value,n.next=10,km(t.put(l,f,r));case 10:return n.next=12,{key:l,value:f};case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==s.return){n.next=26;break}return n.next=26,km(s.return());case 26:if(n.prev=26,!i){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,km(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,n.next=10,km(t.delete(c,r));case 10:return n.next=12,c;case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==s.return){n.next=26;break}return n.next=26,km(s.return());case 26:if(n.prev=26,!i){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"batch",value:function(){var e=this,t=[],r=[];return{put:function(e,r){t.push({key:e,value:r})},delete:function(e){r.push(e)},commit:function(){var n=Zh(Fh().mark((function n(a){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Wj(e.putMany(t,a));case 2:return t=[],n.next=5,Wj(e.deleteMany(r,a));case 5:r=[];case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}},{key:"_all",value:function(e,t){return Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._all is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"_allKeys",value:function(e,t){return Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._allKeys is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"query",value:function(e,t){var r=this._all(e,t);if(null!=e.prefix&&(r=Yj(r,(function(t){return t.key.toString().startsWith(e.prefix)}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return Yj(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return Hj(e,t)}),r)),null!=e.offset){var n=0;r=Yj(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=Jj(r,e.limit)),r}},{key:"queryKeys",value:function(e,t){var r=this._allKeys(e,t);if(null!=e.prefix&&(r=Yj(r,(function(t){return t.toString().startsWith(e.prefix)}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return Yj(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return Hj(e,t)}),r)),null!=e.offset){var n=0;r=Yj(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=Jj(r,e.limit)),r}}]),e}();function eF(e,t,r,n){var a={configurable:!0,enumerable:!0};return a[e]=n,Object.defineProperty(t,r,a)}var tF=function(){function e(t){if(xn(this,e),!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}return Sn(e,[{key:"push",value:function(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}},{key:"shift",value:function(){var e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}},{key:"isEmpty",value:function(){return void 0===this.buffer[this.btm]}}]),e}(),rF=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(this,e),this.hwm=null!==(t=r.splitLimit)&&void 0!==t?t:16,this.head=new tF(this.hwm),this.tail=this.head,this.size=0}return Sn(e,[{key:"calculateSize",value:function(e){return null!=(null===e||void 0===e?void 0:e.byteLength)?e.byteLength:1}},{key:"push",value:function(e){if(null!=(null===e||void 0===e?void 0:e.value)&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){var t=this.head;this.head=t.next=new tF(2*this.head.buffer.length),this.head.push(e)}}},{key:"shift",value:function(){var e,t=this.tail.shift();if(void 0===t&&null!=this.tail.next){var r=this.tail.next;this.tail.next=null,this.tail=r,t=this.tail.shift()}return null!=(null===(e=t)||void 0===e?void 0:e.value)&&(this.size-=this.calculateSize(t.value)),t}},{key:"isEmpty",value:function(){return this.head.isEmpty()}}]),e}();function nF(){return aF((function(e){var t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function aF(e,t){var r,n,a,i,o,s,u=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,c=new rF,l=function(){var t=Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.isEmpty()){t.next=2;break}return t.abrupt("return",e(c));case 2:if(!s){t.next=4;break}return t.abrupt("return",{done:!0});case 4:return t.next=6,new Promise((function(t,r){o=function(n){o=null,c.push(n);try{t(e(c))}catch(sY){r(sY)}return i}}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(e){return null!=o?o(e):(c.push(e),i)},p=function(e){var r;if(s)return i;if(!0!==(null===(r=t)||void 0===r?void 0:r.objectMode)&&null==(null===e||void 0===e?void 0:e.byteLength))throw new Error("objectMode was not true but tried to push non-Uint8Array value");return f({done:!1,value:e})},h=function(e){return s?i:(s=!0,null!=e?function(e){return c=new rF,null!=o?o({error:e}):(c.push({error:e}),i)}(e):f({done:!0}))};if(n={},(0,oi.Z)(n,Symbol.asyncIterator,(function(){return this})),(0,oi.Z)(n,"next",l),(0,oi.Z)(n,"return",(function(){return c=new rF,h(),{done:!0}})),(0,oi.Z)(n,"throw",(function(e){return h(e),{done:!0}})),(0,oi.Z)(n,"push",p),(0,oi.Z)(n,"end",h),eF("get",n,"readableLength",(function(){return c.size})),i=n,null==u)return i;var d=i;return a={},(0,oi.Z)(a,Symbol.asyncIterator,(function(){return this})),(0,oi.Z)(a,"next",(function(){return d.next()})),(0,oi.Z)(a,"throw",(function(e){return d.throw(e),null!=u&&(u(e),u=void 0),{done:!0}})),(0,oi.Z)(a,"return",(function(){return d.return(),null!=u&&(u(),u=void 0),{done:!0}})),(0,oi.Z)(a,"push",p),(0,oi.Z)(a,"end",(function(e){return d.end(e),null!=u&&(u(e),u=void 0),i})),eF("get",a,"readableLength",(function(){return d.readableLength})),i=a}var iF=ud("datastore:core:tiered"),oF=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).stores=e.slice(),n}return Sn(r,[{key:"open",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.open()})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),aN(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.put(t,r,n)})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),oN(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,zn.Z)(this.stores),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=18;break}return i=a.value,e.prev=5,e.next=8,i.get(t,r);case 8:if(!(o=e.sent)){e.next=11;break}return e.abrupt("return",o);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),iF.error(e.t0);case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),n.e(e.t1);case 23:return e.prev=23,n.f(),e.finish(23);case 26:throw sN();case 27:case"end":return e.stop()}}),e,this,[[1,20,23,26],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,zn.Z)(this.stores),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=11;break}return i=a.value,e.next=7,i.has(t,r);case 7:if(!e.sent){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.stores.map((function(e){return e.delete(t,r)})));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),iN(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.stores.map((function(e){var t=nF({objectMode:!0});return Wj(e.putMany(t,r)).catch((function(e){a=e})),t})),n.prev=1,o=!1,s=!1,n.prev=4,c=Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,!a){e.next=3;break}throw a;case 3:return i.forEach((function(e){return e.push(t)})),e.next=6,t;case 6:case"end":return e.stop()}}),e)})),l=xm(e);case 7:return n.next=9,km(l.next());case 9:if(!(o=!(f=n.sent).done)){n.next=14;break}return n.delegateYield(c(),"t0",11);case 11:o=!1,n.next=7;break;case 14:n.next=20;break;case 16:n.prev=16,n.t1=n.catch(4),s=!0,u=n.t1;case 20:if(n.prev=20,n.prev=21,!o||null==l.return){n.next=25;break}return n.next=25,km(l.return());case 25:if(n.prev=25,!s){n.next=28;break}throw u;case 28:return n.finish(25);case 29:return n.finish(20);case 30:return n.prev=30,i.forEach((function(e){return e.end()})),n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[1,,30,33],[4,16,20,30],[21,,25,29]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.stores.map((function(e){var t=nF({objectMode:!0});return Wj(e.deleteMany(t,r)).catch((function(e){a=e})),t})),n.prev=1,o=!1,s=!1,n.prev=4,c=Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,!a){e.next=3;break}throw a;case 3:return i.forEach((function(e){return e.push(t)})),e.next=6,t;case 6:case"end":return e.stop()}}),e)})),l=xm(e);case 7:return n.next=9,km(l.next());case 9:if(!(o=!(f=n.sent).done)){n.next=14;break}return n.delegateYield(c(),"t0",11);case 11:o=!1,n.next=7;break;case 14:n.next=20;break;case 16:n.prev=16,n.t1=n.catch(4),s=!0,u=n.t1;case 20:if(n.prev=20,n.prev=21,!o||null==l.return){n.next=25;break}return n.next=25,km(l.return());case 25:if(n.prev=25,!s){n.next=28;break}throw u;case 28:return n.finish(25);case 29:return n.finish(20);case 30:return n.prev=30,i.forEach((function(e){return e.end()})),n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[1,,30,33],[4,16,20,30],[21,,25,29]])})))()}},{key:"close",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.stores.map((function(e){return e.close()})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"batch",value:function(){var e=this.stores.map((function(e){return e.batch()}));return{put:function(t,r){e.forEach((function(e){return e.put(t,r)}))},delete:function(t){e.forEach((function(e){return e.delete(t)}))},commit:function(){var t=Zh(Fh().mark((function t(r){var n,a,i;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,zn.Z)(e),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=9;break}return i=a.value,t.next=7,i.commit(r);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()}}},{key:"query",value:function(e,t){return this.stores[this.stores.length-1].query(e,t)}},{key:"queryKeys",value:function(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}}]),r}($j),sF=__webpack_require__(5157),uF=function(e,t){var r=t.map((function(e,t){return{entry:aj.decode(e),index:t}}));return r.sort((function(e,t){var r,n,a,i;if(null!=e.entry.signatureV2&&null==t.entry.signatureV2)return-1;if(null==e.entry.signatureV2&&null!=t.entry.signatureV2)return 1;var o=null!==(r=e.entry.sequence)&&void 0!==r?r:0n,s=null!==(n=t.entry.sequence)&&void 0!==n?n:0n;if(o>s)return-1;if(o<s)return 1;var u=null!==(a=e.entry.validity)&&void 0!==a?a:new Uint8Array(0),c=null!==(i=t.entry.validity)&&void 0!==i?i:new Uint8Array(0),l=hj(uN(u)),f=hj(uN(c));return l.getTime()>f.getTime()?-1:l.getTime()<f.getTime()?1:0})),r[0].index},cF="SHARDING";var lF=function(e){Cn(r,e);var t=Dn(r);function r(){var e;return xn(this,r),(e=t.call(this)).data={},e}return Sn(r,[{key:"open",value:function(){return Promise.resolve()}},{key:"close",value:function(){return Promise.resolve()}},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.data[t.toString()]=r;case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.has(t);case 2:if(e.sent){e.next=5;break}throw sN();case 5:return e.abrupt("return",this.data[t.toString()]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0!==this.data[t.toString()]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.data[t.toString()];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_all",value:function(){var e=this;return Kh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(JD(xm(Object.entries(e.data).map((function(e){var t=(0,wn.Z)(e,2),r=t[0],n=t[1];return{key:new LR(r),value:n}})))),"t0",1);case 1:case"end":return t.stop()}}),t)})))()}},{key:"_allKeys",value:function(){var e=this;return Kh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(JD(xm(Object.entries(e.data).map((function(e){var t=(0,wn.Z)(e,1)[0];return new LR(t)})))),"t0",1);case 1:case"end":return t.stop()}}),t)})))()}}]),r}($j);function fF(){return fF=Kh(Fh().mark((function e(){var t,r,n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return a=nF({objectMode:!0}),Promise.resolve().then(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(r.map(function(){var e=Zh(Fh().mark((function e(t){var r,n,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,o=xm(t);case 4:return e.next=6,o.next();case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}u=s.value,a.push(u);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),n=!0,i=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!n){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()));case 3:a.end(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a.end(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),e.delegateYield(JD(xm(a)),"t0",4);case 4:case"end":return e.stop()}}),e)}))),fF.apply(this,arguments)}var pF=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length>0;)e=r.shift()(e);return e},hF=function(e){return null!=e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next)},dF=function(e){return null!=e&&"function"===typeof e.sink&&hF(e.source)},vF=function(e){return function(t){var r=e.sink(t);if(null!=r.then){var n=nF({objectMode:!0});r.then((function(){n.end()}),(function(e){n.end(e)}));var a=function(){var t=Kh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(JD(xm(e.source)),"t0",1);case 1:n.end();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(){return fF.apply(this,arguments)}(n,a())}return e.source}};function yF(e){if(dF(e)){var t=e;e=function(){return t.source}}else if(hF(e)){var r=e;e=function(){return r}}for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var o=[e].concat(a);if(o.length>1&&dF(o[o.length-1])&&(o[o.length-1]=o[o.length-1].sink),o.length>2)for(var s=1;s<o.length-1;s++)dF(o[s])&&(o[s]=vF(o[s]));return pF.apply(void 0,(0,kn.Z)(o))}new LR(cF),new LR("_README");var bF="/record/";function gF(e){return uN(e,"base32")}function mF(e){("string"===typeof e||e instanceof String)&&(e=mm(e.toString()));var t=uN(e,"base64url");return"".concat(bF).concat(t)}function wF(e){if(e.substring(0,8)!==bF)throw cd(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");return mm(e.substring(8),"base64url")}var kF=ud("datastore-pubsub:publisher"),xF=function(e){Cn(r,e);var t=Dn(r);function r(e,n,a,i,o,s){var u;if(xn(this,r),u=t.call(this),!i)throw cd(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if("function"!==typeof i)throw cd(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if("function"!==typeof o)throw cd(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(s&&"function"!==typeof s)throw cd(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");return u._pubsub=e,u._datastore=n,u._peerId=a,u._validator=i,u._selector=o,u._handleSubscriptionKeyFn=s,u._onMessage=u._onMessage.bind(Pn(u)),u._pubsub.addEventListener("message",u._onMessage),u}return Sn(r,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=4;break}throw a="datastore key does not have a valid format",kF.error(a),cd(new Error(a),"ERR_INVALID_DATASTORE_KEY");case 4:if(r instanceof Uint8Array){e.next=8;break}throw i="received value is not a Uint8Array",kF.error(i),cd(new Error(i),"ERR_INVALID_VALUE_RECEIVED");case 8:return o=mF(t),kF("publish value for topic ".concat(o)),e.next=12,this._pubsub.publish(o,r);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=4;break}throw n="datastore key does not have a valid format",kF.error(n),cd(new Error(n),"ERR_INVALID_DATASTORE_KEY");case 4:return a=mF(t),e.next=7,this._pubsub.getTopics();case 7:if(!((i=e.sent)&&Array.isArray(i)&&i.indexOf(a)>-1)){e.next=10;break}return e.abrupt("return",this._getLocal(t,r));case 10:return e.prev=10,e.next=13,this._pubsub.subscribe(a);case 13:e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(10),o="cannot subscribe topic ".concat(a),kF.error(o),cd(new Error(o),"ERR_SUBSCRIBING_TOPIC");case 20:return kF("subscribed values for key ".concat(a)),e.abrupt("return",this._getLocal(t));case 22:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(e){var t=mF(e);return this._pubsub.unsubscribe(t)}},{key:"_getLocal",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new LR("/"+gF(t),!1),e.prev=1,e.next=4,this._datastore.get(n,r);case 4:a=e.sent,e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(1),"ERR_NOT_FOUND"===e.t0.code){e.next=13;break}throw i="unexpected error getting the ipns record for ".concat(n.toString()),kF.error(i),cd(new Error(i),"ERR_UNEXPECTED_ERROR_GETTING_RECORD");case 13:throw o="local record requested was not found for ".concat(n.toString()),kF.error(o),cd(new Error(o),"ERR_NOT_FOUND");case 16:if(a instanceof Uint8Array){e.next=20;break}throw s="found record that we couldn't convert to a value",kF.error(s),cd(new Error(s),"ERR_INVALID_RECORD_RECEIVED");case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_onMessage",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signed"===(r=t.detail).type){e.next=4;break}return kF.error("unsigned message received, this module can only work with signed messages"),e.abrupt("return");case 4:n=r.data,a=r.from,i=r.topic,e.prev=5,o=wF(i),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(5),kF.error(e.t0),e.abrupt("return");case 13:if(kF("message received for topic ".concat(i)),!this._peerId.equals(a)){e.next=17;break}return kF("message discarded as it is from the same peer"),e.abrupt("return");case 17:if(!this._handleSubscriptionKeyFn){e.next=29;break}return e.prev=18,e.next=21,this._handleSubscriptionKeyFn(o);case 21:s=e.sent,e.next=28;break;case 24:return e.prev=24,e.t1=e.catch(18),kF.error("message discarded by the subscriptionKeyFn"),e.abrupt("return");case 28:o=s;case 29:return e.prev=29,e.next=32,this._storeIfSubscriptionIsBetter(o,n);case 32:e.next=37;break;case 34:e.prev=34,e.t2=e.catch(29),kF.error(e.t2);case 37:case"end":return e.stop()}}),e,this,[[5,9],[18,24],[29,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_storeIfSubscriptionIsBetter",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.prev=1,e.next=4,this._isBetter(t,r);case 4:a=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),"ERR_NOT_VALID_RECORD"===e.t0.code){e.next=11;break}throw e.t0;case 11:if(!a){e.next=14;break}return e.next=14,this._storeRecord(t,r,n);case 14:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_validateRecord",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._validator(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_selectRecord",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._selector(t,r);case 2:return n=e.sent,e.abrupt("return",0===n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_isBetter",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._validateRecord(t,r);case 3:e.next=10;break;case 5:throw e.prev=5,e.t0=e.catch(0),n="record received through pubsub is not valid",kF.error(n),cd(new Error(n),"ERR_NOT_VALID_RECORD");case 10:return a=new LR(t),e.prev=11,e.next=14,this._getLocal(a.uint8Array());case 14:i=e.sent,e.next=20;break;case 17:return e.prev=17,e.t1=e.catch(11),e.abrupt("return",!0);case 20:if(!cN(i,r)){e.next=22;break}return e.abrupt("return",!1);case 22:return e.abrupt("return",this._selectRecord(t,[i,r]));case 23:case"end":return e.stop()}}),e,this,[[0,5],[11,17]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_storeRecord",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new LR("/"+gF(t),!1),e.next=3,this._datastore.put(a,r,n);case 3:kF("record for ".concat(mF(t)," was stored in the datastore"));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}($j),_F=ud("ipfs:ipns:pubsub"),EF=function(){function e(t,r,n){xn(this,e),this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new xF(t,r,n,Mj,uF,this._handleSubscriptionKey)}return Sn(e,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._pubsubDs.put(t,r,n);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),_F.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._pubsubDs.get(t,r);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a=e.t0;case 9:if(uN(t.slice(0,6))===_j&&(i=ov.encode(t).substring(1),o=ov.encode(t.slice(6)).substring(1),this._subscriptions[i]=o,_F("subscribed to pubsub topic ".concat(i,", id ").concat(o))),!a){e.next=13;break}throw a;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_handleSubscriptionKey",value:function(e){e instanceof Uint8Array&&(e=uN(e,"base58btc"));var t=this._subscriptions[e];if(!t)throw cd(new Error("key ".concat(e," does not correspond to a subscription")),"ERR_INVALID_KEY");try{return gj(KD(t))}catch(sY){throw _F.error(sY),sY}}},{key:"getSubscriptions",value:function(){return Object.values(this._subscriptions).filter(Boolean).map((function(e){return"".concat(_j).concat(e)}))}},{key:"cancel",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t){e.next=2;break}throw cd(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");case 2:if(t.startsWith(_j)&&(t=t.substring(6)),r=Object.keys(this._subscriptions).find((function(e){return a._subscriptions[e]===t}))){e.next=6;break}return e.abrupt("return",{canceled:!1});case 6:return n=mm(r),this._pubsubDs.unsubscribe(n),delete this._subscriptions[r],_F("unsubscribed pubsub ".concat(r,": ").concat(t)),e.abrupt("return",{canceled:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();dB._configure(),pB._configure(hB),vB._configure(yB);var SF,AF,CF=["uint64","int64","sint64","fixed64","sfixed64"];function TF(e){return function(e){var t,r=(0,zn.Z)(CF);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(){return BigInt(n.call(this).toString())}};for(r.s();!(t=r.n()).done;)n()}catch(sY){r.e(sY)}finally{r.f()}return e}(new pB(e))}function RF(){return function(e){var t,r=(0,zn.Z)(CF);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(e){return n.call(this,e.toString())}};for(r.s();!(t=r.n()).done;)n()}catch(sY){r.e(sY)}finally{r.f()}return e}(vB.create())}function IF(e){var t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),n=String(e.getUTCDate()).padStart(2,"0"),a=String(e.getUTCHours()).padStart(2,"0"),i=String(e.getUTCMinutes()).padStart(2,"0"),o=String(e.getUTCSeconds()).padStart(2,"0"),s=e.getUTCMilliseconds(),u=String(1e3*s*1e3).padStart(9,"0");return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(i,":").concat(o,".").concat(u,"Z")}!function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(SF||(SF={})),function(e){var t;e.codec=function(){return null==t&&(t=function(e,t){return function(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}("message",SF.LENGTH_DELIMITED,e,t)}((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.key&&e.key.byteLength>0)&&(t.uint32(10),t.bytes(e.key)),(!0===r.writeDefaults||null!=e.value&&e.value.byteLength>0)&&(t.uint32(18),t.bytes(e.value)),!0!==r.writeDefaults&&""===e.timeReceived||(t.uint32(42),t.string(e.timeReceived)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={key:new Uint8Array(0),value:new Uint8Array(0),timeReceived:""},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.key=e.bytes();break;case 2:r.value=e.bytes();break;case 5:r.timeReceived=e.string();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return function(e,t){var r=RF();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}(t,e.codec())},e.decode=function(t){return function(e,t){var r=TF(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}(t,e.codec())}}(AF||(AF={}));var PF=function(){function e(t,r,n){if(xn(this,e),!(t instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=t,this.value=r,this.timeReceived=n}return Sn(e,[{key:"serialize",value:function(){return AF.encode(this.prepareSerialize())}},{key:"prepareSerialize",value:function(){return{key:this.key,value:this.value,timeReceived:IF(this.timeReceived)}}}],[{key:"deserialize",value:function(t){var r=AF.decode(t);return new e(r.key,r.value,new Date(r.timeReceived))}},{key:"fromDeserialized",value:function(t){var r=function(e){var t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");var n=parseInt(r[1],10),a=parseInt(r[2],10)-1,i=parseInt(r[3],10),o=parseInt(r[4],10),s=parseInt(r[5],10),u=parseInt(r[6],10),c=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,a,i,o,s,u,c))}(t.timeReceived);if(null==t.key)throw new Error("key missing from deserialized object");if(null==t.value)throw new Error("value missing from deserialized object");return new e(t.key,t.value,r)}}]),e}(),DF=ud("ipfs:ipns:offline-datastore"),NF=function(){function e(t){xn(this,e),this._datastore=t,this.stores=[]}return Sn(e,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw cd(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");case 2:if(r instanceof Uint8Array){e.next=4;break}throw cd(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");case 4:e.prev=4,a=this._routingKey(t),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(4),DF.error(e.t0),cd(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY");case 12:return i=new PF(t,r,new Date),e.next=15,this._datastore.put(a,i.serialize(),n);case 15:case"end":return e.stop()}}),e,this,[[4,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw cd(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");case 2:e.prev=2,n=this._routingKey(t),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(2),DF.error(e.t0),cd(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY");case 10:return e.next=12,this._datastore.get(n,r);case 12:a=e.sent,e.prev=13,i=PF.deserialize(a),e.next=21;break;case 17:throw e.prev=17,e.t1=e.catch(13),DF.error(e.t1),e.t1;case 21:return e.abrupt("return",i.value);case 22:case"end":return e.stop()}}),e,this,[[2,6],[13,17]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_routingKey",value:function(e){return new LR("/dht/record/"+uN(e,"base32"),!1)}}]),e}(),OF=__webpack_require__(9272),LF=ud("ipfs:ipns:dht-datastore"),BF=function(){function e(t){xn(this,e),this._dht=t}return Sn(e,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,OF(this._dht.put(t,r,n));case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),LF.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=xm(this._dht.get(t,r));case 4:return e.next=6,o.next();case 6:if(!(n=!(s=e.sent).done)){e.next=13;break}if("VALUE"!==(u=s.value).name){e.next=10;break}return e.abrupt("return",u.value);case 10:n=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:throw sN();case 30:case"end":return e.stop()}}),e,this,[[2,15,19,29],[20,,24,28]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function MF(e){var t,r=e.libp2p,n=e.repo,a=e.peerId,i=e.options,o=[];if(sF(i,"EXPERIMENTAL.ipnsPubsub",!1)&&(t=new EF(r.pubsub,n.datastore,a),o.push(t)),!0!==sF(i,"offline",!1)&&["dht","dhtclient","dhtserver"].includes(sF(i,"config.Routing.Type","none"))&&o.push(new BF(r.dht)),sF(i,"offline",!1)||0===o.length){var s=new NF(n.datastore);o.push(s)}return new oF(o)}var UF=ud("ipfs:components:ipns"),jF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pass:""};xn(this,e),this.options=t,this.offline=null,this.online=null}return Sn(e,[{key:"getIPNS",value:function(){var e=this.online||this.offline;if(e)return e;throw new om}},{key:"routing",get:function(){return this.getIPNS().routing}},{key:"startOffline",value:function(e){var t=e.repo,r=e.peerId,n=e.keychain;if(null!=this.offline)throw new um;UF("initializing IPNS keyspace (offline)");var a=new NF(t.datastore),i=new qj(a,t.datastore,r,n,this.options);this.offline=i}},{key:"startOnline",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.libp2p,n=t.repo,a=t.peerId,i=t.keychain,null==this.online){e.next=3;break}throw new um;case 3:return o=MF({libp2p:r,repo:n,peerId:a,options:this.options}),s=new qj(o,n.datastore,a,i,this.options),e.next=7,s.republisher.start();case 7:this.online=s;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.online)){e.next=5;break}return e.next=4,t.republisher.stop();case 4:this.online=null;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publish",value:function(e,t,r,n){return this.getIPNS().publish(e,t,r,n)}},{key:"resolve",value:function(e,t){return this.getIPNS().resolve(e,t)}},{key:"initializeKeyspace",value:function(e,t,r){return this.getIPNS().initializeKeyspace(e,t,r)}}]),e}();function FF(e,t,r){return zF.apply(this,arguments)}function zF(){return zF=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.ipns,i=t.repo,o=t.codecs,!tT(r)){e.next=3;break}return e.abrupt("return",a.resolve(r));case 3:return s=VR(r),u=s.cid,c=s.path,e.next=6,OF($R(u,c||"",o,i,n));case 6:case"end":return e.stop()}}),e)}))),zF.apply(this,arguments)}var ZF=ud("ipfs:name:publish");var qF=__webpack_require__(819),VF=Hh.bind({ignoreUndefined:!0}),KF=ud("ipfs:name:resolve"),HF=function(e,t){return t.length>0?e+"/"+t.join("/"):e};function WF(e,t){if(!e||!t||!t.ipnsPubsub)throw cd(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(e.routing instanceof EF)return e.routing;var r=(e.routing.stores||[]).find((function(e){return e instanceof EF}));if(!r)throw cd(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return r}var GF=Sn((function e(t){var r=t.ipns,n=t.options;xn(this,e),this.cancel=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=Zh(Fh().mark((function e(n){var a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},i=WF(t,r),e.abrupt("return",i.cancel(n,a));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({ipns:r,options:n}),this.state=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=Zh(Fh().mark((function e(){var n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.prev=1,e.abrupt("return",{enabled:Boolean(WF(t,r))});case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",{enabled:!1});case 8:case"end":return e.stop()}}),e,null,[[1,5]])}))),n.apply(this,arguments)}return ZR((function(){return n.apply(this,arguments)}))}({ipns:r,options:n}),this.subs=function(e){var t=e.ipns,r=e.options.EXPERIMENTAL;function n(){return n=Zh(Fh().mark((function e(){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},a=WF(t,r),e.abrupt("return",a.getSubscriptions(n));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return ZR((function(){return n.apply(this,arguments)}))}({ipns:r,options:n})})),YF=Sn((function e(t){var r=t.dns,n=t.ipns,a=t.repo,i=t.codecs,o=t.peerId,s=t.isOnline,u=t.keychain,c=t.options;xn(this,e),this.publish=function(e){var t=e.ipns,r=e.repo,n=e.codecs,a=e.peerId,i=e.isOnline,o=e.keychain,s=function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("self"!==t||null==a.privateKey){e.next=6;break}return e.next=3,HU(a.privateKey);case 3:case 12:r=e.sent,e.next=19;break;case 6:return e.prev=6,e.next=9,o.exportKey(t,"temp");case 9:return n=e.sent,e.next=12,YU(n,"temp");case 15:throw e.prev=15,e.t0=e.catch(6),ZF.error(e.t0),cd(e.t0,"ERR_CANNOT_GET_KEY");case 19:return e.abrupt("return",WD(r.public.bytes,r.bytes));case 20:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();function u(){return u=Zh(Fh().mark((function e(a){var o,u,c,l,f,p,h,d,v=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=!(!1===(o=v.length>1&&void 0!==v[1]?v[1]:{}).resolve),c=o.lifetime||"24h",l=o.key||"self",i()){e.next=6;break}throw cd(new Error(KR),"OFFLINE_ERROR");case 6:e.prev=6,a=GR(a),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(6),ZF.error(e.t0),e.t0;case 14:f=0,e.prev=15,f=FR(c)||0,f=parseFloat(f.toFixed(6)),e.next=24;break;case 20:throw e.prev=20,e.t1=e.catch(15),ZF.error(e.t1),e.t1;case 24:return e.next=26,Promise.all([s(l),u?FF({ipns:t,repo:r,codecs:n},a):Promise.resolve()]);case 26:return p=e.sent,h=mm(a),e.next=30,t.publish(p[0],h,f,o);case 30:return d=e.sent,e.abrupt("return",{name:d.name,value:uN(d.value)});case 32:case"end":return e.stop()}}),e,null,[[6,10],[15,20]])}))),u.apply(this,arguments)}return ZR((function(e){return u.apply(this,arguments)}))}({ipns:n,repo:a,codecs:i,peerId:o,isOnline:s,keychain:u}),this.resolve=function(e){var t=e.dns,r=e.ipns,n=e.isOnline,a=e.options.offline;function i(){return i=Kh((function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function o(){var s,u,c,l,f,p,h,d,v,y,b;return Fh().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=VF({nocache:!1,recursive:!0},i),!(a&&i&&i.nocache)){o.next=3;break}throw cd(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");case 3:if(n()||a){o.next=5;break}throw cd(new Error(KR),"OFFLINE_ERROR");case 5:(s=e.toString()).startsWith("/ipns/")||(s="/ipns/".concat(s)),u=s.slice(1).split("/"),c=jn(u),l=c[0],f=c[1],p=c.slice(2),o.prev=8,"1"===f.substring(0,1)?(h=KD(f),d=Gd(h.toBytes()),v=bv.createV1(114,d),f=v.toString(Ug)):1===(y=bv.parse(f)).version&&(f=y.toString(Ug)),o.next=25;break;case 12:if(o.prev=12,o.t0=o.catch(8),!qF(f)){o.next=23;break}return o.t1=HF,o.next=18,km(t(f,i));case 18:return o.t2=o.sent,o.t3=p,o.next=22,(0,o.t1)(o.t2,o.t3);case 22:return o.abrupt("return");case 23:throw KF.error(o.t0),cd(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME");case 25:return o.next=27,km(r.resolve("/".concat(l,"/").concat(f),i));case 27:return b=o.sent,o.next=30,HF(b instanceof Uint8Array?uN(b):b,p);case 30:case"end":return o.stop()}}),o,null,[[8,12]])}))()})),i.apply(this,arguments)}return ZR((function(e){return i.apply(this,arguments)}))}({dns:r,ipns:n,isOnline:s,options:c}),this.pubsub=new GF({ipns:n,options:c})})),QF=sN().code,JF={default:"<dst>",edges:"<src> -> <dst>"};function XF(e,t,r){var n=VR(t),a=n.cid,i=n.path;return!1!==r.preload&&e(a),"/ipfs/".concat(a).concat(i||"")}function $F(e,t,r,n,a){return ez.apply(this,arguments)}function ez(){return ez=Kh(Fh().mark((function e(t,r,n,a,i){var o,s,u,c,l,f,p,h,d,v,y;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,km(t(a,i));case 2:o=e.sent,s=VR(o),u=s.cid,c=null!=i.maxDepth?i.maxDepth:1/0,l=i.unique||!1,f=!1,p=!1,e.prev=8,d=xm(rz(r,n,u,c,l,i));case 10:return e.next=12,km(d.next());case 12:if(!(f=!(v=e.sent).done)){e.next=23;break}if((y=v.value).parent){e.next=16;break}return e.abrupt("continue",20);case 16:if(!y.isDuplicate){e.next=18;break}return e.abrupt("continue",20);case 18:return e.next=20,{ref:tz(y.parent.cid,y.node.cid,y.node.name,i.format)};case 20:f=!1,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),p=!0,h=e.t0;case 29:if(e.prev=29,e.prev=30,!f||null==d.return){e.next=34;break}return e.next=34,km(d.return());case 34:if(e.prev=34,!p){e.next=37;break}throw h;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[8,25,29,39],[30,,34,38]])}))),ez.apply(this,arguments)}function tz(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:JF.default).replace(/<src>/g,e.toString());return n=(n=n.replace(/<dst>/g,t.toString())).replace(/<linkname>/g,r)}function rz(e,t,r,n,a,i){return nz.apply(this,arguments)}function nz(){return nz=Kh(Fh().mark((function e(t,r,n,a,i,o){var s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return(c=Kh(Fh().mark((function e(n,c){var l,f,p,h,d,v,y;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((l=c+1)>a)){e.next=3;break}return e.abrupt("return");case 3:e.prev=3,f=!1,p=!1,e.prev=6,d=xm(az(t,r,n.cid,o));case 8:return e.next=10,km(d.next());case 10:if(!(f=!(v=e.sent).done)){e.next=19;break}return y=v.value,e.next=14,{parent:n,node:y,isDuplicate:i&&s.has(y.cid.toString())};case 14:return i&&s.add(y.cid.toString()),e.delegateYield(JD(xm(u(y,l))),"t0",16);case 16:f=!1,e.next=8;break;case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(6),p=!0,h=e.t1;case 25:if(e.prev=25,e.prev=26,!f||null==d.return){e.next=30;break}return e.next=30,km(d.return());case 30:if(e.prev=30,!p){e.next=33;break}throw h;case 33:return e.finish(30);case 34:return e.finish(25);case 35:e.next=41;break;case 37:throw e.prev=37,e.t2=e.catch(3),e.t2.code===QF&&(e.t2.message="Could not find object with CID: ".concat(n.cid)),e.t2;case 41:case"end":return e.stop()}}),e,null,[[3,37],[6,21,25,35],[26,,30,34]])})))).apply(this,arguments)},u=function(e,t){return c.apply(this,arguments)},s=new Set,e.delegateYield(JD(xm(u({cid:n},0))),"t0",4);case 4:case"end":return e.stop()}}),e)}))),nz.apply(this,arguments)}function az(e,t,r,n){return iz.apply(this,arguments)}function iz(){return iz=Kh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h,d,v,y;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,km(t.blocks.get(n,a));case 2:return i=e.sent,e.next=5,km(r.getCodec(n.code));case 5:o=e.sent,s=o.decode(i),u=n.code===ey,c=[],l=(0,zn.Z)(oz(s,c)),e.prev=10,l.s();case 12:if((f=l.n()).done){e.next=26;break}if(p=(0,wn.Z)(f.value,2),h=p[0],d=p[1],!u){e.next=22;break}if(!(v=h.match(/^Links\/(\d+)\/Hash$/))){e.next=22;break}if(!((y=Number(v[1]))<s.Links.length)){e.next=22;break}return e.next=21,{name:s.Links[y].Name,cid:d};case 21:return e.abrupt("continue",24);case 22:return e.next=24,{name:h,cid:d};case 24:e.next=12;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),l.e(e.t0);case 31:return e.prev=31,l.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[10,28,31,34]])}))),iz.apply(this,arguments)}var oz=Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h,d,v,y;return Fh().wrap((function(b){for(;;)switch(b.prev=b.next){case 0:if(null!=t){b.next=2;break}return b.abrupt("return");case 2:if(!(t instanceof Uint8Array)){b.next=4;break}return b.abrupt("return");case 4:n=0,a=Object.entries(t);case 5:if(!(n<a.length)){b.next=46;break}if(i=(0,wn.Z)(a[n],2),o=i[0],s=i[1],u=[].concat((0,kn.Z)(r),[o]),null==s||"object"!==typeof s){b.next=43;break}if(!Array.isArray(s)){b.next=36;break}c=(0,zn.Z)(s.entries()),b.prev=11,c.s();case 13:if((l=c.n()).done){b.next=26;break}if(f=(0,wn.Z)(l.value,2),p=f[0],h=f[1],d=[].concat((0,kn.Z)(u),[p]),!(v=bv.asCID(h))){b.next=22;break}return b.next=20,[d.join("/"),v];case 20:b.next=24;break;case 22:if("object"!==typeof h){b.next=24;break}return b.delegateYield(e(h,d),"t0",24);case 24:b.next=13;break;case 26:b.next=31;break;case 28:b.prev=28,b.t1=b.catch(11),c.e(b.t1);case 31:return b.prev=31,c.f(),b.finish(31);case 34:b.next=43;break;case 36:if(!(y=bv.asCID(s))){b.next=42;break}return b.next=40,[u.join("/"),y];case 40:b.next=43;break;case 42:return b.delegateYield(e(s,u),"t2",43);case 43:n++,b.next=5;break;case 46:return b.abrupt("return",[]);case 47:case"end":return b.stop()}}),e,null,[[11,28,31,34]])}));function sz(e){var t=e.repo;function r(){return r=Kh((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n,a,i,o,s,u;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,o=xm(t.blocks.queryKeys({},{signal:e.signal}));case 4:return r.next=6,km(o.next());case 6:if(!(n=!(s=r.sent).done)){r.next=13;break}return u=s.value,r.next=10,{ref:u.toString()};case 10:n=!1,r.next=4;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(2),a=!0,i=r.t0;case 19:if(r.prev=19,r.prev=20,!n||null==o.return){r.next=24;break}return r.next=24,km(o.return());case 24:if(r.prev=24,!a){r.next=27;break}throw i;case 27:return r.finish(24);case 28:return r.finish(19);case 29:case"end":return r.stop()}}),r,null,[[2,15,19,29],[20,,24,28]])}))()})),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}function uz(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(){var r,n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.use(r);case 3:return n=e.sent.bitswap,a=n.stat().snapshot,e.abrupt("return",{provideBufLen:parseInt(a.providesBufferLength.toString()),blocksReceived:BigInt(a.blocksReceived.toString()),wantlist:Array.from(n.getWantlist()).map((function(e){return e[1].cid})),peers:n.peers(),dupBlksReceived:BigInt(a.dupBlksReceived.toString()),dupDataReceived:BigInt(a.dupDataReceived.toString()),dataReceived:BigInt(a.dataReceived.toString()),blocksSent:BigInt(a.blocksSent.toString()),dataSent:BigInt(a.dataSent.toString())});case 6:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}var cz=Sn((function e(t){var r=t.network;xn(this,e),this.wantlist=function(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(){var r,n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,t.use(r);case 3:return n=e.sent,a=n.bitswap,i=a.getWantlist(),e.abrupt("return",Array.from(i).map((function(e){return e[1].cid})));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({network:r}),this.wantlistForPeer=function(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(r){var n,a,i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.bitswap,o=i.wantlistForPeer(r),e.abrupt("return",Array.from(o).map((function(e){return e[1].cid})));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({network:r}),this.unwant=function(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(r){var n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.bitswap,Array.isArray(r)||(r=[r]),e.abrupt("return",i.unwant(r));case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({network:r}),this.stat=uz({network:r})}));function lz(e){try{return tA.matches(e)}catch(sY){return!1}}var fz=function(){return{Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}}};var pz=Sn((function e(t){var r=t.repo;xn(this,e),this.add=function(e){var t=e.repo;function r(){return r=Zh(Fh().mark((function e(r){var n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},lz(r)){e.next=3;break}throw new Error("".concat(r," is not a valid Multiaddr"));case 3:return e.next=5,t.config.getAll(n);case 5:return a=e.sent,(i=a.Bootstrap||[]).push(r.toString()),a.Bootstrap=Array.from(new Set(i)).sort((function(e,t){return e.localeCompare(t)})),e.next=11,t.config.replace(a);case 11:return e.abrupt("return",{Peers:[r]});case 12:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({repo:r}),this.list=function(e){var t=e.repo;function r(){return r=Zh(Fh().mark((function e(){var r,n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t.config.get("Bootstrap",r);case 3:return n=e.sent,e.abrupt("return",{Peers:(n||[]).map((function(e){return Gx(e)}))});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({repo:r}),this.rm=function(e){var t=e.repo;function r(){return r=Zh(Fh().mark((function e(r){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},lz(r)){e.next=3;break}throw new Error("".concat(r," is not a valid Multiaddr"));case 3:return e.next=5,t.config.getAll(n);case 5:return(a=e.sent).Bootstrap=(a.Bootstrap||[]).filter((function(e){return e.toString()!==r.toString()})),e.next=9,t.config.replace(a);case 9:return e.abrupt("return",{Peers:[r]});case 10:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({repo:r}),this.clear=function(e){var t=e.repo;function r(){return r=Zh(Fh().mark((function e(){var r,n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.config.getAll(r);case 3:return n=e.sent,a=n.Bootstrap||[],n.Bootstrap=[],e.next=8,t.config.replace(n);case 8:return e.abrupt("return",{Peers:a.map((function(e){return Gx(e)}))});case 9:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({repo:r}),this.reset=function(e){var t=e.repo;function r(){return r=Zh(Fh().mark((function e(){var r,n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t.config.getAll(r);case 3:return(n=e.sent).Bootstrap=fz().Bootstrap,e.next=7,t.config.replace(n);case 7:return e.abrupt("return",{Peers:fz().Bootstrap.map((function(e){return Gx(e)}))});case 8:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({repo:r})}));var hz=__webpack_require__(1254),dz=__webpack_require__(7889),vz=__webpack_require__(2393);function yz(e){return e instanceof Uint8Array?bv.decode(e):bv.parse(e.toString())}var bz=Sn((function e(t){var r=t.codecs,n=t.hashers,a=t.preload,i=t.repo;xn(this,e),this.get=function(e){var t=e.preload,r=e.repo;function n(){return n=Zh(Fh().mark((function e(n){var a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1!==(a=i.length>1&&void 0!==i[1]?i[1]:{}).preload&&t(n),e.abrupt("return",r.blocks.get(n,a));case 3:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({preload:a,repo:i}),this.put=function(e){var t=e.codecs,r=e.hashers,n=e.repo,a=e.preload;function i(){return i=Zh(Fh().mark((function e(i){var o,s,u,c,l,f,p,h,d=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=d.length>1&&void 0!==d[1]?d[1]:{}).pin){e.next=7;break}return e.next=4,n.gcLock.readLock();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return s=e.t0,e.prev=9,u=null!=o.version?o.version:0,c=o.format||(0===u?"dag-pb":"raw"),e.next=14,r.getHasher(o.mhtype||"sha2-256");case 14:return l=e.sent,e.next=17,l.digest(i);case 17:return f=e.sent,e.next=20,t.getCodec(c);case 20:return p=e.sent,h=bv.create(u,p.code,f),e.next=24,n.blocks.put(h,i,{signal:o.signal});case 24:if(!1!==o.preload&&a(h),!0!==o.pin){e.next=28;break}return e.next=28,n.pins.pinRecursively(h,{signal:o.signal});case 28:return e.abrupt("return",h);case 29:return e.prev=29,s&&s(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[9,,29,32]])}))),i.apply(this,arguments)}return ZR((function(e){return i.apply(this,arguments)}))}({codecs:r,hashers:n,preload:a,repo:i}),this.rm=function(e){var t=e.repo;function r(){return r=Kh((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Array.isArray(e)||(e=[e]),n.next=3,km(t.gcLock.writeLock());case 3:return a=n.sent,n.prev=4,n.delegateYield(JD(xm(yF(e,(function(e){return dz(e,(function(e){return Zh(Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=yz(e),a={cid:e},n.prev=2,n.next=5,t.blocks.has(e);case 5:if(n.sent){n.next=8;break}throw cd(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");case 8:return n.next=10,t.blocks.delete(e);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),r.force||(n.t0.message="cannot remove ".concat(e,": ").concat(n.t0.message),a.error=n.t0);case 15:return n.abrupt("return",a);case 16:case"end":return n.stop()}}),n,null,[[2,12]])})))}))}),(function(e){return hz(e,{concurrency:8})}),(function(e){return vz(e,(function(){return!r.quiet}))})))),"t0",6);case 6:return n.prev=6,a(),n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[4,,6,9]])}))()})),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({repo:i}),this.stat=function(e){var t=e.repo,r=e.preload;function n(){return n=Zh(Fh().mark((function e(n){var a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},n=yz(n),!1!==a.preload&&r(n),e.next=5,t.blocks.get(n);case 5:return i=e.sent,e.abrupt("return",{cid:n,size:i.length});case 7:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({preload:a,repo:i})})),gz=__webpack_require__(6314),mz=__webpack_require__(6759),wz=__webpack_require__(8217),kz=__webpack_require__(464),xz=__webpack_require__.n(kz);function _z(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Ez(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function Sz(e){return"object"===typeof e&&(e.path||e.content)}var Az=function(e){return e&&"function"===typeof e.getReader};function Cz(e){return Tz.apply(this,arguments)}function Tz(){return(Tz=Kh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rz(e){return Iz.apply(this,arguments)}function Iz(){return Iz=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_z(t)){e.next=2;break}return e.abrupt("return",Cz(Pz(t)));case 2:if(!("string"===typeof t||t instanceof String)){e.next=4;break}return e.abrupt("return",Cz(Pz(t.toString())));case 4:if(!Ez(t)){e.next=6;break}return e.abrupt("return",mz(t));case 6:if(Az(t)&&(t=gz(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=27;break}return r=wz(t),e.next=11,r.peek();case 11:if(n=e.sent,a=n.value,!n.done){e.next=16;break}return e.abrupt("return",Cz(new Uint8Array(0)));case 16:if(r.push(a),!Number.isInteger(a)){e.next=25;break}return e.t0=Cz,e.t1=Uint8Array,e.next=22,kz(r);case 22:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 25:if(!(_z(a)||"string"===typeof a||a instanceof String)){e.next=27;break}return e.abrupt("return",dz(r,Pz));case 27:throw cd(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 28:case"end":return e.stop()}}),e)}))),Iz.apply(this,arguments)}function Pz(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):mm(e.toString())}function Dz(){return Dz=Kh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t){e.next=2;break}throw cd(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 2:if(!("string"===typeof t||t instanceof String)){e.next=6;break}return e.next=5,Nz(t.toString(),r);case 5:case 9:case 21:case 26:case 31:return e.abrupt("return");case 6:if(!_z(t)&&!Ez(t)){e.next=10;break}return e.next=9,Nz(t,r);case 10:if(Az(t)&&(t=gz(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=28;break}return n=wz(t),e.next=15,km(n.peek());case 15:if(a=e.sent,i=a.value,!a.done){e.next=22;break}return e.next=21,{content:[]};case 22:if(n.push(i),!(Number.isInteger(i)||_z(i)||"string"===typeof i||i instanceof String)){e.next=27;break}return e.next=26,Nz(n,r);case 27:throw cd(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT");case 28:if(!Sz(t)){e.next=32;break}return e.next=31,Nz(t,r);case 32:throw cd(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");case 33:case"end":return e.stop()}}),e)}))),Dz.apply(this,arguments)}function Nz(e,t){return Oz.apply(this,arguments)}function Oz(){return Oz=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,a=t.mode,i=t.mtime,o=t.content,s={path:n||"",mode:kd(a),mtime:xd(i)},!o){e.next=8;break}return e.next=5,r(o);case 5:s.content=e.sent,e.next=12;break;case 8:if(n){e.next=12;break}return e.next=11,r(t);case 11:s.content=e.sent;case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)}))),Oz.apply(this,arguments)}function Lz(e){return function(e,t){return Dz.apply(this,arguments)}(e,Rz)}var Bz=__webpack_require__(857),Mz=__webpack_require__(2165);eg({name:"murmur3-32",code:35,encode:function(e){return function(e){for(var t=new Array(4),r=0;r<4;r++)t[r]=255&e,e>>=8;return new Uint8Array(t)}(Mz.x86.hash32(e))}});var Uz=eg({name:"murmur3-128",code:34,encode:function(e){return function(e){var t=e.match(/../g);return t?new Uint8Array(t.map((function(e){return parseInt(e,16)}))):Kd}(Mz.x64.hash128(e))}});function jz(){return jz=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uz.encode(t);case 2:return e.abrupt("return",e.sent.slice(0,8).reverse());case 3:case"end":return e.stop()}}),e)}))),jz.apply(this,arguments)}var Fz={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:Kg,leafType:"file",cidVersion:0,progress:function(){return function(){}},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:function(e){return jz.apply(this,arguments)},hamtHashCode:34,hamtBucketBits:8},zz=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Hh.bind({ignoreUndefined:!0})(Fz,e)},Zz=function(){var e=Zh(Fh().mark((function e(t,n,a){var i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.codec||(a.codec=r),a.hasher||(a.hasher=Kg),void 0===a.cidVersion&&(a.cidVersion=1),a.codec===r&&a.hasher!==Kg&&(a.cidVersion=1),e.next=6,a.hasher.digest(t);case 6:if(i=e.sent,o=bv.create(a.cidVersion,a.codec.code,i),a.onlyHash){e.next=11;break}return e.next=11,n.put(o,t,{signal:a.signal});case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),qz=Zz,Vz=function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new _d({type:"directory",mtime:t.mtime,mode:t.mode}),i=ty(Yv({Data:a.marshal()})),e.next=4,qz(i,r,n);case 4:return o=e.sent,s=t.path,e.abrupt("return",{cid:o,path:s,unixfs:a,size:i.length});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Kz=Vz;function Hz(){return Hz=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,kz(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),Hz.apply(this,arguments)}var Wz=function(e,t){return Hz.apply(this,arguments)},Gz=__webpack_require__(817);function Yz(e,t,r){return Qz.apply(this,arguments)}function Qz(){return Qz=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=!1,o=!1,e.prev=3,u=xm(Gz(t,n.maxChildrenPerNode));case 5:return e.next=7,u.next();case 7:if(!(i=!(c=e.sent).done)){e.next=17;break}return l=c.value,e.t0=a,e.next=12,r(l);case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 14:i=!1,e.next=5;break;case 17:e.next=23;break;case 19:e.prev=19,e.t2=e.catch(3),o=!0,s=e.t2;case 23:if(e.prev=23,e.prev=24,!i||null==u.return){e.next=28;break}return e.next=28,u.return();case 28:if(e.prev=28,!o){e.next=31;break}throw s;case 31:return e.finish(28);case 32:return e.finish(23);case 33:if(!(a.length>1)){e.next=35;break}return e.abrupt("return",Yz(a,r,n));case 35:return e.abrupt("return",a[0]);case 36:case"end":return e.stop()}}),e,null,[[3,19,23,33],[24,,28,32]])}))),Qz.apply(this,arguments)}var Jz=function(e,t,r){return Yz(e,t,r)};function Xz(){return Xz=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new tZ(n.layerRepeat),i=0,o=1,s=a,u=!1,c=!1,e.prev=6,f=xm(Gz(t,n.maxChildrenPerNode));case 8:return e.next=10,f.next();case 10:if(!(u=!(p=e.sent).done)){e.next=26;break}if(h=p.value,!s.isFull()){e.next=22;break}if(s===a){e.next=19;break}return e.t0=a,e.next=17,s.reduce(r);case 17:e.t1=e.sent,e.t0.addChild.call(e.t0,e.t1);case 19:i&&i%n.layerRepeat===0&&o++,s=new eZ(o,n.layerRepeat,i),i++;case 22:s.append(h);case 23:u=!1,e.next=8;break;case 26:e.next=32;break;case 28:e.prev=28,e.t2=e.catch(6),c=!0,l=e.t2;case 32:if(e.prev=32,e.prev=33,!u||null==f.return){e.next=37;break}return e.next=37,f.return();case 37:if(e.prev=37,!c){e.next=40;break}throw l;case 40:return e.finish(37);case 41:return e.finish(32);case 42:if(!s||s===a){e.next=48;break}return e.t3=a,e.next=46,s.reduce(r);case 46:e.t4=e.sent,e.t3.addChild.call(e.t3,e.t4);case 48:return e.abrupt("return",a.reduce(r));case 49:case"end":return e.stop()}}),e,null,[[6,28,32,42],[33,,37,41]])}))),Xz.apply(this,arguments)}var $z=function(e,t,r){return Xz.apply(this,arguments)},eZ=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;xn(this,e),this.maxDepth=t,this.layerRepeat=r,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:t,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}return Sn(e,[{key:"isFull",value:function(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;var e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}},{key:"_addNextNodeToParent",value:function(e){this.parent=e;var t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}},{key:"append",value:function(e){this.node.data=e}},{key:"reduce",value:function(e){return this._reduce(this.root,e)}},{key:"_reduce",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!t.children.length){e.next=5;break}return e.next=4,Promise.all(t.children.filter((function(e){return e.data})).map((function(e){return a._reduce(e,r)})));case 4:n=e.sent;case 5:return e.abrupt("return",r((t.data||[]).concat(n)));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_findParent",value:function(e,t){var r=e.parent;if(r&&0!==r.depth)return r.children.length!==r.maxChildren&&r.maxChildren?r:this._findParent(r,t)}}]),e}(),tZ=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,0,e)).root.depth=0,n.currentDepth=1,n}return Sn(r,[{key:"addChild",value:function(e){this.root.children.push(e)}},{key:"reduce",value:function(e){return e((this.root.data||[]).concat(this.root.children))}}]),r}(eZ);function rZ(){return rZ=Kh(Fh().mark((function e(t,n,a){var i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,o=!1,e.prev=2,u=Fh().mark((function e(){var i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.value,e.next=3,Zh(Fh().mark((function e(){var o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.progress(i.length,t.path),s={codec:r,cidVersion:a.cidVersion,hasher:a.hasher,onlyHash:a.onlyHash},a.rawLeaves?(s.codec=y,s.cidVersion=1):(o=new _d({type:a.leafType,data:i}),i=ty({Data:o.marshal(),Links:[]})),e.next=5,qz(i,n,s);case 5:return e.t0=e.sent,e.t1=o,e.t2=i.length,e.abrupt("return",{cid:e.t0,unixfs:e.t1,size:e.t2});case 9:case"end":return e.stop()}}),e)})));case 3:case"end":return e.stop()}}),e)})),c=xm(t.content);case 5:return e.next=7,km(c.next());case 7:if(!(i=!(l=e.sent).done)){e.next=12;break}return e.delegateYield(u(),"t0",9);case 9:i=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),o=!0,s=e.t1;case 18:if(e.prev=18,e.prev=19,!i||null==c.return){e.next=23;break}return e.next=23,km(c.return());case 23:if(e.prev=23,!o){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])}))),rZ.apply(this,arguments)}var nZ=function(e,t,r){return rZ.apply(this,arguments)},aZ={flat:Wz,balanced:Jz,trickle:$z};function iZ(){return iZ=Kh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=-1,o="function"===typeof n.bufferImporter?n.bufferImporter:nZ,s=!1,u=!1,e.prev=4,l=xm(Bz(o(t,r,n),n.blockWriteConcurrency));case 6:return e.next=8,km(l.next());case 8:if(!(s=!(f=e.sent).done)){e.next=25;break}if(p=f.value,0!==++a){e.next=16;break}return i=p,e.abrupt("continue",22);case 16:if(1!==a||!i){e.next=20;break}return e.next=19,i;case 19:i=null;case 20:return e.next=22,p;case 22:s=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),u=!0,c=e.t0;case 31:if(e.prev=31,e.prev=32,!s||null==l.return){e.next=36;break}return e.next=36,km(l.return());case 36:if(e.prev=36,!u){e.next=39;break}throw c;case 39:return e.finish(36);case 40:return e.finish(31);case 41:if(!i){e.next=45;break}return i.single=!0,e.next=45,i;case 45:case"end":return e.stop()}}),e,null,[[4,27,31,41],[32,,36,40]])}))),iZ.apply(this,arguments)}var oZ=function(e,t,n){var a=aZ[n.strategy];if(!a)throw cd(new Error("Unknown importer build strategy name: ".concat(n.strategy)),"ERR_BAD_STRATEGY");return a(function(e,t,r){return iZ.apply(this,arguments)}(e,t,n),function(e,t,n){function a(){return a=Zh(Fh().mark((function a(i){var o,s,u,c,l,f,p;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(1!==i.length||!i[0].single||!n.reduceSingleLeafToSelf){a.next=13;break}if(o=i[0],void 0===e.mtime&&void 0===e.mode){a.next=12;break}return a.next=5,t.get(o.cid);case 5:return s=a.sent,o.unixfs=new _d({type:"file",mtime:e.mtime,mode:e.mode,data:s}),s=ty(Yv({Data:o.unixfs.marshal()})),a.next=10,qz(s,t,So(So({},n),{},{codec:r,hasher:n.hasher,cidVersion:n.cidVersion}));case 10:o.cid=a.sent,o.size=s.length;case 12:return a.abrupt("return",{cid:o.cid,path:e.path,unixfs:o.unixfs,size:o.size});case 13:return u=new _d({type:"file",mtime:e.mtime,mode:e.mode}),c=i.filter((function(e){return!(e.cid.code!==Gg||!e.size)||!(!e.unixfs||e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)})).map((function(e){return e.cid.code===Gg?(u.addBlockSize(e.size),{Name:"",Tsize:e.size,Hash:e.cid}):(e.unixfs&&e.unixfs.data?u.addBlockSize(e.unixfs.data.length):u.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0),{Name:"",Tsize:e.size,Hash:e.cid})})),l={Data:u.marshal(),Links:c},f=ty(Yv(l)),a.next=19,qz(f,t,n);case 19:return p=a.sent,a.abrupt("return",{cid:p,path:e.path,unixfs:u,size:f.length+l.Links.reduce((function(e,t){return e+t.Tsize}),0)});case 21:case"end":return a.stop()}}),a)}))),a.apply(this,arguments)}return function(e){return a.apply(this,arguments)}}(e,t,n),n)},sZ=__webpack_require__(1976),uZ=__webpack_require__(8729);function cZ(){return cZ=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.minChunkSize&&r.maxChunkSize&&r.avgChunkSize)){e.next=6;break}i=r.avgChunkSize,n=r.minChunkSize,a=r.maxChunkSize,e.next=13;break;case 6:if(r.avgChunkSize){e.next=10;break}throw cd(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");case 10:i=r.avgChunkSize,n=i/3,a=i+i/2;case 13:if(!(n<16)){e.next=15;break}throw cd(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");case 15:a<n&&(a=n),i<n&&(i=n),o=Math.floor(Math.log2(i)),s=!1,u=!1,e.prev=20,l=xm(fZ(t,{min:n,max:a,bits:o,window:r.window,polynomial:r.polynomial}));case 22:return e.next=24,km(l.next());case 24:if(!(s=!(f=e.sent).done)){e.next=31;break}return p=f.value,e.next=28,p;case 28:s=!1,e.next=22;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(20),u=!0,c=e.t0;case 37:if(e.prev=37,e.prev=38,!s||null==l.return){e.next=42;break}return e.next=42,km(l.return());case 42:if(e.prev=42,!u){e.next=45;break}throw c;case 45:return e.finish(42);case 46:return e.finish(37);case 47:case"end":return e.stop()}}),e,null,[[20,33,37,47],[38,,42,46]])}))),cZ.apply(this,arguments)}var lZ=function(e,t){return cZ.apply(this,arguments)};function fZ(e,t){return pZ.apply(this,arguments)}function pZ(){return pZ=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h,d;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,km((0,uZ.create)(r.bits,r.min,r.max,r.window));case 2:n=e.sent,a=new sZ,i=!1,o=!1,e.prev=6,u=xm(t);case 8:return e.next=10,km(u.next());case 10:if(!(i=!(c=e.sent).done)){e.next=27;break}l=c.value,a.append(l),f=n.fingerprint(l),p=0;case 15:if(!(p<f.length)){e.next=24;break}return h=f[p],d=a.slice(0,h),a.consume(h),e.next=21,d;case 21:p++,e.next=15;break;case 24:i=!1,e.next=8;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(6),o=!0,s=e.t0;case 33:if(e.prev=33,e.prev=34,!i||null==u.return){e.next=38;break}return e.next=38,km(u.return());case 38:if(e.prev=38,!o){e.next=41;break}throw s;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(!a.length){e.next=46;break}return e.next=46,a.slice(0);case 46:case"end":return e.stop()}}),e,null,[[6,29,33,43],[34,,38,42]])}))),pZ.apply(this,arguments)}function hZ(){return hZ=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new sZ,a=0,i=!1,o=r.maxChunkSize,s=!1,u=!1,e.prev=6,l=xm(t);case 8:return e.next=10,km(l.next());case 10:if(!(s=!(f=e.sent).done)){e.next=24;break}p=f.value,n.append(p),a+=p.length;case 14:if(!(a>=o)){e.next=21;break}return e.next=17,n.slice(0,o);case 17:i=!0,o===n.length?(n=new sZ,a=0):((h=new sZ).append(n.shallowSlice(o)),n=h,a-=o),e.next=14;break;case 21:s=!1,e.next=8;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(6),u=!0,c=e.t0;case 30:if(e.prev=30,e.prev=31,!s||null==l.return){e.next=35;break}return e.next=35,km(l.return());case 35:if(e.prev=35,!u){e.next=38;break}throw c;case 38:return e.finish(35);case 39:return e.finish(30);case 40:if(i&&!a){e.next=43;break}return e.next=43,n.slice(0,a);case 43:case"end":return e.stop()}}),e,null,[[6,26,30,40],[31,,35,39]])}))),hZ.apply(this,arguments)}var dZ=function(e,t){return hZ.apply(this,arguments)};function vZ(){return vZ=Kh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t);case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=29;break}if(void 0!==(s=o.value).length){e.next=10;break}throw cd(new Error("Content was invalid"),"ERR_INVALID_CONTENT");case 10:if(!("string"===typeof s||s instanceof String)){e.next=15;break}return e.next=13,mm(s.toString());case 13:e.next=26;break;case 15:if(!Array.isArray(s)){e.next=20;break}return e.next=18,Uint8Array.from(s);case 18:e.next=26;break;case 20:if(!(s instanceof Uint8Array)){e.next=25;break}return e.next=23,s;case 23:e.next=26;break;case 25:throw cd(new Error("Content was invalid"),"ERR_INVALID_CONTENT");case 26:r=!1,e.next=4;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(2),n=!0,a=e.t0;case 35:if(e.prev=35,e.prev=36,!r||null==i.return){e.next=40;break}return e.next=40,km(i.return());case 40:if(e.prev=40,!n){e.next=43;break}throw a;case 43:return e.finish(40);case 44:return e.finish(35);case 45:case"end":return e.stop()}}),e,null,[[2,31,35,45],[36,,40,44]])}))),vZ.apply(this,arguments)}var yZ=function(e){return vZ.apply(this,arguments)};function bZ(e){try{if(e instanceof Uint8Array)return Kh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t)})))();if(t=e,Symbol.iterator in t)return Kh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(JD(xm(e)),"t0",1);case 1:case"end":return t.stop()}}),t)})))();if(function(e){return Symbol.asyncIterator in e}(e))return e}catch(r){throw cd(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}var t;throw cd(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function gZ(){return gZ=Kh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,s=Fh().mark((function e(){var t,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=c.value).path&&("./"===t.path.substring(0,2)&&(n.wrapWithDirectory=!0),t.path=t.path.split("/").filter((function(e){return e&&"."!==e})).join("/")),!t.content){e.next=10;break}return a="function"===typeof n.chunker?n.chunker:"rabin"===n.chunker?lZ:dZ,i="function"===typeof n.chunkValidator?n.chunkValidator:yZ,o={path:t.path,mtime:t.mtime,mode:t.mode,content:a(i(bZ(t.content),n),n)},e.next=8,function(){return oZ(o,r,n)};case 8:case 14:e.next=17;break;case 10:if(!t.path){e.next=16;break}return s={path:t.path,mtime:t.mtime,mode:t.mode},e.next=14,function(){return Kz(s,r,n)};case 16:throw new Error("Import candidate must have content or path or both");case 17:case"end":return e.stop()}}),e)})),u=xm(t);case 5:return e.next=7,km(u.next());case 7:if(!(a=!(c=e.sent).done)){e.next=12;break}return e.delegateYield(s(),"t0",9);case 9:a=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),i=!0,o=e.t1;case 18:if(e.prev=18,e.prev=19,!a||null==u.return){e.next=23;break}return e.next=23,km(u.return());case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])}))),gZ.apply(this,arguments)}var mZ=function(e,t,r){return gZ.apply(this,arguments)},wZ=function(){function e(t,r){xn(this,e),this.options=r||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}return Sn(e,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this)}},{key:"eachChildSeries",value:function(){return Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},{key:"flush",value:function(e){return Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}]),e}(),kZ=wZ,xZ=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this,e,n))._children={},a}return Sn(r,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cid=void 0,this.size=void 0,this._children[t]=r;case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this._children[e])}},{key:"childCount",value:function(){return Object.keys(this._children).length}},{key:"directChildrenCount",value:function(){return this.childCount()}},{key:"onlyChild",value:function(){return this._children[Object.keys(this._children)[0]]}},{key:"eachChildSeries",value:function(){var e=this;return Kh(Fh().mark((function t(){var r,n,a;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object.keys(e._children),n=0;case 2:if(!(n<r.length)){t.next=9;break}return a=r[n],t.next=6,{key:a,child:e._children[a]};case 6:n++,t.next=2;break;case 9:case"end":return t.stop()}}),t)})))()}},{key:"flush",value:function(e){var t=this;return Kh(Fh().mark((function r(){var n,a,i,o,s,u,c,l,f,p,h,d,v,y,b;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=Object.keys(t._children),a=[],i=0;case 3:if(!(i<n.length)){r.next=40;break}if(!((o=t._children[n[i]])instanceof kZ)){r.next=36;break}s=!1,u=!1,r.prev=8,l=xm(o.flush(e));case 10:return r.next=12,km(l.next());case 12:if(!(s=!(f=r.sent).done)){r.next=20;break}return p=f.value,o=p,r.next=17,o;case 17:s=!1,r.next=10;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(8),u=!0,c=r.t0;case 26:if(r.prev=26,r.prev=27,!s||null==l.return){r.next=31;break}return r.next=31,km(l.return());case 31:if(r.prev=31,!u){r.next=34;break}throw c;case 34:return r.finish(31);case 35:return r.finish(26);case 36:null!=o.size&&o.cid&&a.push({Name:n[i],Tsize:o.size,Hash:o.cid});case 37:i++,r.next=3;break;case 40:return h=new _d({type:"directory",mtime:t.mtime,mode:t.mode}),d={Data:h.marshal(),Links:a},v=ty(Yv(d)),r.next=45,km(qz(v,e,t.options));case 45:return y=r.sent,b=v.length+d.Links.reduce((function(e,t){return e+(null==t.Tsize?0:t.Tsize)}),0),t.cid=y,t.size=b,r.next=51,{cid:y,unixfs:h,path:t.path,size:b};case 51:case"end":return r.stop()}}),r,null,[[8,22,26,36],[27,,31,35]])})))()}}]),r}(kZ),_Z=xZ,EZ=__webpack_require__(1620);var SZ=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},AZ=SZ,CZ=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),TZ=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),RZ=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return PZ(this,e)}}]),e}(),IZ=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return PZ(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),PZ=function(e,t){return new IZ(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},DZ=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new TZ(t,r,n),this.decoder=new RZ(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),NZ=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new DZ(t,r,n,a)},OZ=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=AZ(n,r),i=a.encode,o=a.decode;return NZ({prefix:t,name:r,encode:i,decode:function(e){return CZ(o(e))}})},LZ=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return NZ({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},BZ=NZ({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),MZ=LZ({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),UZ=LZ({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),jZ=OZ({prefix:"9",name:"base10",alphabet:"0123456789"}),FZ=LZ({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zZ=LZ({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ZZ=LZ({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qZ=LZ({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),VZ=LZ({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),KZ=LZ({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),HZ=LZ({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),WZ=LZ({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),GZ=LZ({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),YZ=LZ({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),QZ=LZ({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),JZ=OZ({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),XZ=OZ({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),$Z=OZ({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eq=OZ({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),tq=LZ({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rq=LZ({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nq=LZ({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),aq=LZ({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),iq=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),oq=iq.reduce((function(e,t,r){return e[r]=t,e}),[]),sq=iq.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var uq=NZ({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=oq[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=sq[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),cq=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=pq;)r[n++]=255&t|lq,t/=128;for(;t&fq;)r[n++]=255&t|lq,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},lq=128,fq=-128,pq=Math.pow(2,31);var hq=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&vq)<<i:(n&vq)*Math.pow(2,i),i+=7}while(n>=dq);return e.bytes=o-r,a},dq=128,vq=127;var yq=Math.pow(2,7),bq=Math.pow(2,14),gq=Math.pow(2,21),mq=Math.pow(2,28),wq=Math.pow(2,35),kq=Math.pow(2,42),xq=Math.pow(2,49),_q=Math.pow(2,56),Eq=Math.pow(2,63),Sq={encode:cq,decode:hq,encodingLength:function(e){return e<yq?1:e<bq?2:e<gq?3:e<mq?4:e<wq?5:e<kq?6:e<xq?7:e<_q?8:e<Eq?9:10}},Aq=Sq,Cq=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Aq.encode(e,t,r),t},Tq=function(e){return Aq.encodingLength(e)},Rq=function(e,t){var r=t.byteLength,n=Tq(e),a=n+Tq(r),i=new Uint8Array(a+r);return Cq(e,i,0),Cq(r,i,n),i.set(t,a),new Iq(e,r,t,i)},Iq=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),Pq=function(e){var t=e.name,r=e.code,n=e.encode;return new Dq(t,r,n)},Dq=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?Rq(this.code,r):r.then((function(e){return Rq(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Nq=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Oq=Pq({name:"sha2-256",code:18,encode:Nq("SHA-256")}),Lq=Pq({name:"sha2-512",code:19,encode:Nq("SHA-512")}),Bq=CZ,Mq={code:0,name:"identity",encode:Bq,digest:function(e){return Rq(0,Bq(e))}},Uq="raw",jq=85,Fq=function(e){return CZ(e)},zq=function(e){return CZ(e)},Zq=new TextEncoder,qq=new TextDecoder,Vq="json",Kq=512,Hq=function(e){return Zq.encode(JSON.stringify(e))},Wq=function(e){return JSON.parse(qq.decode(e))},Gq=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},Je),Xe),$e),et),tt),rt),nt),at),it),ot));So(So({},st),ut);function Yq(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Qq(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Yq(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Jq(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Xq=Jq("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),$q=Jq("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=Qq((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),eV=So({utf8:Xq,"utf-8":Xq,hex:Gq.base16,latin1:$q,ascii:$q,binary:$q},Gq);function tV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=eV[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):Yq(globalThis.Buffer.from(e,"utf-8"))}var rV=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;xn(this,e),this._options=t,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new EZ,this.key=null}return Sn(e,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findNewBucketAndPos(t);case 2:return n=e.sent,e.next=5,n.bucket._putAt(n,t,r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findChild(t);case 2:if(null==(r=e.sent)){e.next=5;break}return e.abrupt("return",r.value);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"del",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findPlace(t);case 2:r=e.sent,null!=(n=r.bucket._at(r.pos))&&n.key===t&&r.bucket._delAt(r.pos);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"leafCount",value:function(){return this._children.compactArray().reduce((function(t,r){return r instanceof e?t+r.leafCount():t+1}),0)}},{key:"childrenCount",value:function(){return this._children.length}},{key:"onlyChild",value:function(){return this._children.get(0)}},{key:"eachLeafSeries",value:Fh().mark((function t(){var r,n,a,i;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this._children.compactArray(),n=(0,zn.Z)(r),t.prev=2,n.s();case 4:if((a=n.n()).done){t.next=14;break}if(!((i=a.value)instanceof e)){t.next=10;break}return t.delegateYield(i.eachLeafSeries(),"t0",8);case 8:t.next=12;break;case 10:return t.next=12,i;case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(2),n.e(t.t1);case 19:return t.prev=19,n.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[2,16,19,22]])}))},{key:"serialize",value:function(t,r){return r(this._children.reduce((function(n,a,i){return null!=a&&(a instanceof e?n.push(a.serialize(t,r)):n.push(t(a,i))),n}),[]))}},{key:"asyncTransform",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oV(this,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return this.serialize(aV,iV)}},{key:"prettyPrint",value:function(){return JSON.stringify(this.toJSON(),null,"  ")}},{key:"tableSize",value:function(){return Math.pow(2,this._options.bits)}},{key:"_findChild",value:function(){var t=Zh(Fh().mark((function t(r){var n,a;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._findPlace(r);case 2:if(n=t.sent,!((a=n.bucket._at(n.pos))instanceof e)){t.next=6;break}return t.abrupt("return",void 0);case 6:if(null==a||a.key!==r){t.next=8;break}return t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_findPlace",value:function(){var t=Zh(Fh().mark((function t(r){var n,a,i;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._options.hash("string"===typeof r?tV(r):r),t.next=3,n.take(this._options.bits);case 3:if(a=t.sent,!((i=this._children.get(a))instanceof e)){t.next=9;break}return t.next=8,i._findPlace(n);case 8:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",{bucket:this,pos:a,hash:n,existingChild:i});case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_findNewBucketAndPos",value:function(){var t=Zh(Fh().mark((function t(r){var n,a,i;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._findPlace(r);case 2:if(null==(n=t.sent).existingChild||n.existingChild.key===r){t.next=13;break}return a=new e(this._options,n.bucket,n.pos),n.bucket._putObjectAt(n.pos,a),t.next=8,a._findPlace(n.existingChild.hash);case 8:return(i=t.sent).bucket._putAt(i,n.existingChild.key,n.existingChild.value),t.next=12,a._findNewBucketAndPos(n.hash);case 12:return t.abrupt("return",t.sent);case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_putAt",value:function(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}},{key:"_putObjectAt",value:function(e,t){null==this._children.get(e)&&this._popCount++,this._children.set(e,t)}},{key:"_delAt",value:function(e){if(-1===e)throw new Error("Invalid position");null!=this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}},{key:"_level",value:function(){if(null!=this._parent&&this._popCount<=1)if(1===this._popCount){var t=this._children.find(nV);if(null!=t&&!(t instanceof e)){var r=t.hash;r.untake(this._options.bits);var n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,t.key,t.value)}}else this._parent._delAt(this._posAtParent)}},{key:"_at",value:function(e){return this._children.get(e)}}]),e}();function nV(e){return Boolean(e)}function aV(e,t){return e.key}function iV(e){return e}function oV(e,t,r){return sV.apply(this,arguments)}function sV(){return(sV=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=(0,zn.Z)(t._children.compactArray()),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=17;break}if(!((s=o.value)instanceof rV)){e.next=11;break}return e.next=9,oV(s,r,n);case 9:e.next=15;break;case 11:return e.next=13,r(s);case 13:u=e.sent,a.push({bitField:t._children.bitField(),children:u});case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return e.next=27,n(a);case 27:return e.abrupt("return",e.sent);case 28:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})))).apply(this,arguments)}var uV=[255,254,252,248,240,224,192,128],cV=[1,3,7,15,31,63,127,255],lV=function(){function e(t){xn(this,e),this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}return Sn(e,[{key:"availableBits",value:function(){return this._currentBitPos+1+8*this._currentBytePos}},{key:"totalBits",value:function(){return 8*this._value.length}},{key:"take",value:function(e){for(var t=e,r=0;t>0&&this._haveBits();){var n=this._value[this._currentBytePos],a=this._currentBitPos+1,i=Math.min(a,t);r=(r<<i)+fV(n,a-i,i),t-=i,this._currentBitPos-=i,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}},{key:"untake",value:function(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}},{key:"_haveBits",value:function(){return this._currentBytePos>=0}}]),e}();function fV(e,t,r){var n=function(e,t){return uV[e]&cV[Math.min(t+e-1,7)]}(t,r);return(e&n)>>>t}function pV(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var r,n=Qq(t),a=0,i=(0,zn.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set(o,a),a+=o.length}}catch(sY){i.e(sY)}finally{i.f()}return Yq(n)}function hV(e){return function(t){return t instanceof dV?t:new dV(t,e)}}var dV=function(){function e(t,r){if(xn(this,e),!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}return Sn(e,[{key:"take",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t;case 1:if(!(this._availableBits<r)){e.next=6;break}return e.next=4,this._produceMoreBits();case 4:e.next=1;break;case 6:for(n=0;r>0;)a=this._buffers[this._currentBufferIndex],i=Math.min(a.availableBits(),r),o=a.take(i),n=(n<<i)+o,r-=i,this._availableBits-=i,0===a.availableBits()&&this._currentBufferIndex++;return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"untake",value:function(e){for(var t=e;t>0;){var r=this._buffers[this._currentBufferIndex],n=Math.min(r.totalBits()-r.availableBits(),t);r.untake(n),t-=n,this._availableBits+=n,this._currentBufferIndex>0&&r.totalBits()===r.availableBits()&&(this._depth--,this._currentBufferIndex--)}}},{key:"_produceMoreBits",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._depth++,t=this._depth>0?pV([this._value,Uint8Array.from([this._depth])]):this._value,e.next=4,this._hashFn(t);case 4:r=e.sent,n=new lV(r),this._buffers.push(n),this._availableBits+=n.availableBits();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vV(e){var t;if(null==e||null==e.hashFn)throw new Error("please define an options.hashFn");var r={bits:null!==(t=e.bits)&&void 0!==t?t:8,hash:hV(e.hashFn)};return new rV(r)}var yV=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this,e,n))._bucket=vV({hashFn:n.hamtHashFn,bits:n.hamtBucketBits}),a}return Sn(r,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bucket.put(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return this._bucket.get(e)}},{key:"childCount",value:function(){return this._bucket.leafCount()}},{key:"directChildrenCount",value:function(){return this._bucket.childrenCount()}},{key:"onlyChild",value:function(){return this._bucket.onlyChild()}},{key:"eachChildSeries",value:function(){var e=this;return Kh(Fh().mark((function t(){var r,n,a,i,o,s,u,c;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=xm(e._bucket.eachLeafSeries());case 4:return t.next=6,km(i.next());case 6:if(!(r=!(o=t.sent).done)){t.next=13;break}return s=o.value,u=s.key,c=s.value,t.next=10,{key:u,child:c};case 10:r=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),n=!0,a=t.t0;case 19:if(t.prev=19,t.prev=20,!r||null==i.return){t.next=24;break}return t.next=24,km(i.return());case 24:if(t.prev=24,!n){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"flush",value:function(e){var t=this;return Kh(Fh().mark((function r(){var n,a,i,o,s,u;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,o=xm(gV(t._bucket,e,t,t.options));case 4:return r.next=6,km(o.next());case 6:if(!(n=!(s=r.sent).done)){r.next=13;break}return u=s.value,r.next=10,So(So({},u),{},{path:t.path});case 10:n=!1,r.next=4;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(2),a=!0,i=r.t0;case 19:if(r.prev=19,r.prev=20,!n||null==o.return){r.next=24;break}return r.next=24,km(o.return());case 24:if(r.prev=24,!a){r.next=27;break}throw i;case 27:return r.finish(24);case 28:return r.finish(19);case 29:case"end":return r.stop()}}),r,null,[[2,15,19,29],[20,,24,28]])})))()}}]),r}(kZ),bV=yV;function gV(e,t,r,n){return mV.apply(this,arguments)}function mV(){return mV=Kh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T,R,I,P,D,N,O,L;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t._children,o=[],s=0,u=0;case 4:if(!(u<i.length)){e.next=97;break}if(c=i.get(u)){e.next=8;break}return e.abrupt("continue",94);case 8:if(l=u.toString(16).toUpperCase().padStart(2,"0"),!(c instanceof rV)){e.next=49;break}return f=void 0,p=!1,h=!1,e.prev=13,e.t0=xm,e.next=17,km(gV(c,r,null,a));case 17:e.t1=e.sent,v=(0,e.t0)(e.t1);case 19:return e.next=21,km(v.next());case 21:if(!(p=!(y=e.sent).done)){e.next=27;break}b=y.value,f=b;case 24:p=!1,e.next=19;break;case 27:e.next=33;break;case 29:e.prev=29,e.t2=e.catch(13),h=!0,d=e.t2;case 33:if(e.prev=33,e.prev=34,!p||null==v.return){e.next=38;break}return e.next=38,km(v.return());case 38:if(e.prev=38,!h){e.next=41;break}throw d;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(f){e.next=45;break}throw new Error("Could not flush sharded directory, no subshard found");case 45:o.push({Name:l,Tsize:f.size,Hash:f.cid}),s+=f.size,e.next=94;break;case 49:if("function"!==typeof c.value.flush){e.next=87;break}g=c.value,m=void 0,w=!1,k=!1,e.prev=54,_=xm(g.flush(r));case 56:return e.next=58,km(_.next());case 58:if(!(w=!(E=e.sent).done)){e.next=66;break}return S=E.value,m=S,e.next=63,m;case 63:w=!1,e.next=56;break;case 66:e.next=72;break;case 68:e.prev=68,e.t3=e.catch(54),k=!0,x=e.t3;case 72:if(e.prev=72,e.prev=73,!w||null==_.return){e.next=77;break}return e.next=77,km(_.return());case 77:if(e.prev=77,!k){e.next=80;break}throw x;case 80:return e.finish(77);case 81:return e.finish(72);case 82:A=l+c.key,o.push({Name:A,Tsize:m.size,Hash:m.cid}),s+=m.size,e.next=94;break;case 87:if((C=c.value).cid){e.next=90;break}return e.abrupt("continue",94);case 90:T=l+c.key,R=C.size,o.push({Name:T,Tsize:R,Hash:C.cid}),s+=R;case 94:u++,e.next=4;break;case 97:return I=Uint8Array.from(i.bitField().reverse()),P=new _d({type:"hamt-sharded-directory",data:I,fanout:t.tableSize(),hashType:a.hamtHashCode,mtime:n&&n.mtime,mode:n&&n.mode}),D={Data:P.marshal(),Links:o},N=ty(Yv(D)),e.next=103,km(qz(N,r,a));case 103:return O=e.sent,L=N.length+s,e.next=107,{cid:O,unixfs:P,size:L};case 107:case"end":return e.stop()}}),e,null,[[13,29,33,43],[34,,38,42],[54,68,72,82],[73,,77,81]])}))),mV.apply(this,arguments)}function wV(e,t,r,n){return kV.apply(this,arguments)}function kV(){return(kV=Zh(Fh().mark((function e(t,r,n,a){var i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r,!(r instanceof _Z&&r.directChildrenCount()>=n)){e.next=5;break}return e.next=4,xV(r,a);case 4:i=e.sent;case 5:if(!(o=i.parent)){e.next=14;break}if(i===r){e.next=13;break}if(t&&(t.parent=i),i.parentKey){e.next=11;break}throw new Error("No parent key found");case 11:return e.next=13,o.put(i.parentKey,i);case 13:return e.abrupt("return",wV(i,o,n,a));case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xV(e,t){return _V.apply(this,arguments)}function _V(){return(_V=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new bV({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},r),a=!1,i=!1,e.prev=3,s=xm(t.eachChildSeries());case 5:return e.next=7,s.next();case 7:if(!(a=!(u=e.sent).done)){e.next=14;break}return c=u.value,l=c.key,f=c.child,e.next=11,n.put(l,f);case 11:a=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),i=!0,o=e.t0;case 20:if(e.prev=20,e.prev=21,!a||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}var EV=wV,SV=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean)};function AV(e,t,r){return CV.apply(this,arguments)}function CV(){return CV=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=SV(t.path||""),i=a.length-1,o=r,s="",u=0;case 5:if(!(u<a.length)){e.next=30;break}if(c=a[u],s+="".concat(s?"/":"").concat(c),l=u===i,o.dirty=!0,o.cid=void 0,o.size=void 0,!l){e.next=20;break}return e.next=15,o.put(c,t);case 15:return e.next=17,EV(null,o,n.shardSplitThreshold,n);case 17:r=e.sent,e.next=27;break;case 20:return e.next=22,o.get(c);case 22:return(f=e.sent)&&f instanceof kZ||(f=new _Z({root:!1,dir:!0,parent:o,parentKey:c,path:s,dirty:!0,flat:!0,mtime:f&&f.unixfs&&f.unixfs.mtime,mode:f&&f.unixfs&&f.unixfs.mode},n)),e.next=26,o.put(c,f);case 26:o=f;case 27:u++,e.next=5;break;case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e)}))),CV.apply(this,arguments)}function TV(e,t){return RV.apply(this,arguments)}function RV(){return(RV=Kh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof kZ){e.next=5;break}if(!(t&&t.unixfs&&t.unixfs.isDirectory())){e.next=4;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:return e.delegateYield(JD(xm(t.flush(r))),"t0",6);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IV(){return IV=Kh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p,h,d,v,y;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new _Z({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n),i=!1,o=!1,e.prev=3,u=xm(t);case 5:return e.next=7,km(u.next());case 7:if(!(i=!(c=e.sent).done)){e.next=20;break}if(l=c.value){e.next=11;break}return e.abrupt("continue",17);case 11:return e.next=13,km(AV(l,a,n));case 13:if(a=e.sent,l.unixfs&&l.unixfs.isDirectory()){e.next=17;break}return e.next=17,l;case 17:i=!1,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),o=!0,s=e.t0;case 26:if(e.prev=26,e.prev=27,!i||null==u.return){e.next=31;break}return e.next=31,km(u.return());case 31:if(e.prev=31,!o){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(26);case 36:if(!n.wrapWithDirectory){e.next=40;break}return e.delegateYield(JD(xm(TV(a,r))),"t1",38);case 38:e.next=70;break;case 40:f=!1,p=!1,e.prev=42,d=xm(a.eachChildSeries());case 44:return e.next=46,km(d.next());case 46:if(!(f=!(v=e.sent).done)){e.next=54;break}if(y=v.value){e.next=50;break}return e.abrupt("continue",51);case 50:return e.delegateYield(JD(xm(TV(y.child,r))),"t2",51);case 51:f=!1,e.next=44;break;case 54:e.next=60;break;case 56:e.prev=56,e.t3=e.catch(42),p=!0,h=e.t3;case 60:if(e.prev=60,e.prev=61,!f||null==d.return){e.next=65;break}return e.next=65,km(d.return());case 65:if(e.prev=65,!p){e.next=68;break}throw h;case 68:return e.finish(65);case 69:return e.finish(60);case 70:case"end":return e.stop()}}),e,null,[[3,22,26,36],[27,,31,35],[42,56,60,70],[61,,65,69]])}))),IV.apply(this,arguments)}var PV=function(e,t,r){return IV.apply(this,arguments)};function DV(e,t){return NV.apply(this,arguments)}function NV(){return NV=Kh((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=zz(r),i="function"===typeof r.dagBuilder?r.dagBuilder:mZ,o="function"===typeof r.treeBuilder?r.treeBuilder:PV,s=Symbol.asyncIterator in e||Symbol.iterator in e?e:[e],u=!1,c=!1,n.prev=6,f=xm(o(Bz(i(s,t,a),a.fileImportConcurrency),t,a));case 8:return n.next=10,km(f.next());case 10:if(!(u=!(p=n.sent).done)){n.next=17;break}return h=p.value,n.next=14,{cid:h.cid,path:h.path,unixfs:h.unixfs,size:h.size};case 14:u=!1,n.next=8;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(6),c=!0,l=n.t0;case 23:if(n.prev=23,n.prev=24,!u||null==f.return){n.next=28;break}return n.next=28,km(f.return());case 28:if(n.prev=28,!c){n.next=31;break}throw l;case 31:return n.finish(28);case 32:return n.finish(23);case 33:case"end":return n.stop()}}),n,null,[[6,19,23,33],[24,,28,32]])}))()})),NV.apply(this,arguments)}function OV(e,t){return LV.apply(this,arguments)}function LV(){return LV=Kh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"===typeof t||t instanceof String||_z(t)||Ez(t)||t._readableState)){e.next=2;break}throw cd(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 2:if(Az(t)&&(t=gz(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=26;break}return n=wz(t),e.next=7,km(n.peek());case 7:if(a=e.sent,i=a.value,!a.done){e.next=13;break}return e.delegateYield(JD(xm([])),"t0",12);case 12:case 18:case 22:case 25:return e.abrupt("return");case 13:if(n.push(i),!Number.isInteger(i)){e.next=16;break}throw cd(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 16:if(!i._readableState){e.next=19;break}return e.delegateYield(JD(xm(dz(n,(function(e){return BV({content:e},r)})))),"t1",18);case 19:if(!_z(i)){e.next=23;break}return e.next=22,BV({content:n},r);case 23:if(!(Sz(i)||i[Symbol.iterator]||i[Symbol.asyncIterator]||Az(i)||Ez(i))){e.next=26;break}return e.delegateYield(JD(xm(dz(n,(function(e){return BV(e,r)})))),"t2",25);case 26:if(!Sz(t)){e.next=28;break}throw cd(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 28:throw cd(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 29:case"end":return e.stop()}}),e)}))),LV.apply(this,arguments)}function BV(e,t){return MV.apply(this,arguments)}function MV(){return MV=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,a=t.mode,i=t.mtime,o=t.content,s={path:n||"",mode:kd(a),mtime:xd(i)},!o){e.next=8;break}return e.next=5,r(o);case 5:s.content=e.sent,e.next=12;break;case 8:if(n){e.next=12;break}return e.next=11,r(t);case 11:s.content=e.sent;case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)}))),MV.apply(this,arguments)}var UV=function(e){if(e){if(e.startsWith("size-")){var t=e.split("-")[1],r=parseInt(t);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:r}}if(e.startsWith("rabin"))return So({chunker:"rabin"},jV(e));throw new Error("Unrecognized chunker option: ".concat(e))}return{chunker:"fixed"}},jV=function(e){var t={},r=e.split("-");switch(r.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=FV(r[1],"avg");break;case 4:t.minChunkSize=FV(r[1],"min"),t.avgChunkSize=FV(r[2],"avg"),t.maxChunkSize=FV(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},FV=function(e,t){var r=parseInt(e);if(isNaN(r))throw new Error("Chunker parameter ".concat(t," must be an integer"));return r},zV=Hh.bind({ignoreUndefined:!0});function ZV(e){function t(){return t=Kh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,o=xm(r);case 4:return t.next=6,km(o.next());case 6:if(!(n=!(s=t.sent).done)){t.next=17;break}return u=s.value,c=u.cid,1===e.cidVersion&&(c=c.toV1()),l=u.path?u.path:c.toString(),e.wrapWithDirectory&&!u.path&&(l=""),t.next=14,{path:l,cid:c,size:u.size,mode:u.unixfs&&u.unixfs.mode,mtime:u.unixfs&&u.unixfs.mtime};case 14:n=!1,t.next=4;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),a=!0,i=t.t0;case 23:if(t.prev=23,t.prev=24,!n||null==o.return){t.next=28;break}return t.next=28,km(o.return());case 28:if(t.prev=28,!a){t.next=31;break}throw i;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[2,19,23,33],[24,,28,32]])}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function qV(e,t){function r(){return r=Kh(Fh().mark((function r(n){var a,i,o,s,u,c,l;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,s=xm(n);case 4:return r.next=6,km(s.next());case 6:if(!(a=!(u=r.sent).done)){r.next=16;break}return c=u.value,l=!c.path||t.wrapWithDirectory?""===c.path:!c.path.includes("/"),l&&!t.onlyHash&&!1!==t.preload&&e(c.cid),r.next=13,c;case 13:a=!1,r.next=4;break;case 16:r.next=22;break;case 18:r.prev=18,r.t0=r.catch(2),i=!0,o=r.t0;case 22:if(r.prev=22,r.prev=23,!a||null==s.return){r.next=27;break}return r.next=27,km(s.return());case 27:if(r.prev=27,!i){r.next=30;break}throw o;case 30:return r.finish(27);case 31:return r.finish(22);case 32:case"end":return r.stop()}}),r,null,[[2,18,22,32],[23,,27,31]])}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}function VV(e,t){function r(){return r=Kh(Fh().mark((function r(n){var a,i,o,s,u,c,l;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,s=xm(n);case 4:return r.next=6,km(s.next());case 6:if(!(a=!(u=r.sent).done)){r.next=18;break}if(c=u.value,l=!(c.path&&c.path.includes("/")),!((null==t.pin||t.pin)&&l&&!t.onlyHash)){r.next=13;break}return r.next=13,km(e.pins.pinRecursively(c.cid));case 13:return r.next=15,c;case 15:a=!1,r.next=4;break;case 18:r.next=24;break;case 20:r.prev=20,r.t0=r.catch(2),i=!0,o=r.t0;case 24:if(r.prev=24,r.prev=25,!a||null==s.return){r.next=29;break}return r.next=29,km(s.return());case 29:if(r.prev=29,!i){r.next=32;break}throw o;case 32:return r.finish(29);case 33:return r.finish(24);case 34:case"end":return r.stop()}}),r,null,[[2,20,24,34],[25,,29,33]])}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}var KV=function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uz.encode(t);case 2:return e.abrupt("return",e.sent.slice(0,8).reverse());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),HV=function(e,t,r){return Promise.all(e.map((function(e){if(null==e.Name)throw new Error("Unexpected Link without a Name");if(2===e.Name.length){var n=parseInt(e.Name,16);return t._putObjectAt(n,new rV({hash:r._options.hash,bits:r._options.bits},t,n))}return r.put(e.Name.substring(2),!0)})))},WV=function(e){return e.toString(16).toUpperCase().padStart(2,"0").substring(0,2)},GV=function(e){for(var t=e.bucket,r=[];t._parent;)r.push(t),t=t._parent;return r.push(t),r.reverse()},YV=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i){var o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(o=vV({hashFn:KV}),a={rootBucket:o,hamtDepth:1,lastBucket:o}),e.next=3,HV(t.Links,a.lastBucket,a.rootBucket);case 3:return e.next=5,a.rootBucket._findNewBucketAndPos(r);case 5:if(s=e.sent,u=WV(s.pos),(c=GV(s)).length>a.hamtDepth&&(a.lastBucket=c[a.hamtDepth],u=WV(a.lastBucket._posAtParent)),l=t.Links.find((function(e){if(null==e.Name)return!1;var t=e.Name.substring(0,2),n=e.Name.substring(2);return t===u&&(!n||n===r)}))){e.next=12;break}return e.abrupt("return",null);case 12:if(null==l.Name||l.Name.substring(2)!==r){e.next=14;break}return e.abrupt("return",l.Hash);case 14:return a.hamtDepth++,e.next=17,n.get(l.Hash,i);case 17:return f=e.sent,t=ry(f),e.abrupt("return",YV(t,r,n,a,i));case 20:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),QV=YV;var JV=function(e,t,r,n){var a=t+e.length;return r>=a||n<t?new Uint8Array(0):(n>=t&&n<a&&(e=e.subarray(0,n-t)),r>=t&&r<a&&(e=e.subarray(r-t)),e)},XV=function(e,t,r){if(t||(t=0),t<0)throw cd(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw cd(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(r||0===r||(r=e-t),r<0)throw cd(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+r>e&&(r=e-t),{offset:t,length:r}};function $V(e,t,r,n,a,i,o,s){return eK.apply(this,arguments)}function eK(){return eK=Zh(Fh().mark((function e(t,r,n,a,i,o,s,u){var c,l,f,p,h,d,v,y;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r instanceof Uint8Array)){e.next=3;break}return n.push(JV(r,a,i,o)),e.abrupt("return");case 3:if(null!=r.Data){e.next=5;break}throw cd(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");case 5:e.prev=5,c=_d.unmarshal(r.Data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(5),cd(e.t0,"ERR_NOT_UNIXFS");case 12:null!=c.data&&(l=c.data,f=JV(l,a,i,o),n.push(f),a+=f.byteLength),p=[],h=0;case 15:if(!(h<r.Links.length)){e.next=26;break}if(d=r.Links[h],y=(v=a)+c.blockSizes[h],(i>=v&&i<y||o>=v&&o<=y||i<v&&o>y)&&p.push({link:d,blockStart:a}),!((a=y)>o)){e.next=23;break}return e.abrupt("break",26);case 23:h++,e.next=15;break;case 26:return e.next=28,yF(p,(function(e){return dz(e,(function(e){return Zh(Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get(e.link.Hash,{signal:u.signal});case 2:return n=r.sent,r.abrupt("return",So(So({},e),{},{block:n}));case 4:case"end":return r.stop()}}),r)})))}))}),(function(e){return hz(e,{ordered:!0})}),function(){var e=Zh(Fh().mark((function e(r){var a,c,l,f,p,h,d;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,c=!1,e.prev=2,f=Fh().mark((function e(){var r,a,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.value,a=r.link,c=r.block,l=r.blockStart,e.t0=a.Hash.code,e.next=e.t0===ey?4:e.t0===Gg?6:8;break;case 4:return f=ry(c),e.abrupt("break",10);case 6:return f=c,e.abrupt("break",10);case 8:return n.end(cd(new Error("Unsupported codec: ".concat(a.Hash.code)),"ERR_NOT_UNIXFS")),e.abrupt("return",{v:void 0});case 10:s.add(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$V(t,f,n,l,i,o,s,u);case 2:case"end":return e.stop()}}),e)}))));case 11:case"end":return e.stop()}}),e)})),p=xm(r);case 5:return e.next=7,p.next();case 7:if(!(a=!(h=e.sent).done)){e.next=15;break}return e.delegateYield(f(),"t0",9);case 9:if("object"!==typeof(d=e.t0)){e.next=12;break}return e.abrupt("return",d.v);case 12:a=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(2),c=!0,l=e.t1;case 21:if(e.prev=21,e.prev=22,!a||null==p.return){e.next=26;break}return e.next=26,p.return();case 26:if(e.prev=26,!c){e.next=29;break}throw l;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])})));return function(t){return e.apply(this,arguments)}}());case 28:case"end":return e.stop()}}),e,null,[[5,9]])}))),eK.apply(this,arguments)}var tK=function(e,t,r,n,a,i,o){function s(){return s=Kh((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function n(){var a,i,s,u,c,l,f,p,h,d,v,y,b;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==(a=r.fileSize())){n.next=3;break}throw new Error("File was a directory");case 3:if(i=XV(a,e.offset,e.length),s=i.offset,0!==(u=i.length)){n.next=6;break}return n.abrupt("return");case 6:c=new zI({concurrency:1}),l=nF(),c.add(Zh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$V(o,t,l,0,s,s+u,c,e);case 2:case"end":return r.stop()}}),r)})))),c.on("error",(function(e){l.end(e)})),f=0,p=!1,h=!1,n.prev=13,v=xm(l);case 15:return n.next=17,km(v.next());case 17:if(!(p=!(y=n.sent).done)){n.next=28;break}if(null!=(b=y.value)){n.next=21;break}return n.abrupt("continue",25);case 21:return(f+=b.byteLength)===u&&l.end(),n.next=25,b;case 25:p=!1,n.next=15;break;case 28:n.next=34;break;case 30:n.prev=30,n.t0=n.catch(13),h=!0,d=n.t0;case 34:if(n.prev=34,n.prev=35,!p||null==v.return){n.next=39;break}return n.next=39,km(v.return());case 39:if(n.prev=39,!h){n.next=42;break}throw d;case 42:return n.finish(39);case 43:return n.finish(34);case 44:case"end":return n.stop()}}),n,null,[[13,30,34,44],[35,,39,43]])}))()})),s.apply(this,arguments)}return function(){return s.apply(this,arguments)}},rK=function(e,t,r,n,a,i,o){function s(){return s=Kh((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var s,u,c,l,f,p,h;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=e.offset||0,u=e.length||t.Links.length,c=t.Links.slice(s,u),l=(0,zn.Z)(c),r.prev=4,l.s();case 6:if((f=l.n()).done){r.next=16;break}return p=f.value,r.next=10,km(a(p.Hash,p.Name||"","".concat(n,"/").concat(p.Name||""),[],i+1,o,e));case 10:if(!(h=r.sent).entry){r.next=14;break}return r.next=14,h.entry;case 14:r.next=6;break;case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(4),l.e(r.t0);case 21:return r.prev=21,l.f(),r.finish(21);case 24:case"end":return r.stop()}}),r,null,[[4,18,21,24]])}))()})),s.apply(this,arguments)}return function(){return s.apply(this,arguments)}};function nK(e,t,r,n,a,i){return aK.apply(this,arguments)}function aK(){return aK=Kh(Fh().mark((function e(t,r,n,a,i,o){var s,u,c,l,f,p,h,d,v,y,b,g,m;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.Links,u=(0,zn.Z)(s),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=50;break}if(l=c.value,!(f=null!=l.Name?l.Name.substring(2):null)){e.next=15;break}return e.next=10,km(n(l.Hash,f,"".concat(r,"/").concat(f),[],a+1,i,o));case 10:return p=e.sent,e.next=13,p.entry;case 13:e.next=48;break;case 15:return e.next=17,km(i.get(l.Hash));case 17:h=e.sent,t=ry(h),d=!1,v=!1,e.prev=21,b=xm(nK(t,r,n,a,i,o));case 23:return e.next=25,km(b.next());case 25:if(!(d=!(g=e.sent).done)){e.next=32;break}return m=g.value,e.next=29,m;case 29:d=!1,e.next=23;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(21),v=!0,y=e.t0;case 38:if(e.prev=38,e.prev=39,!d||null==b.return){e.next=43;break}return e.next=43,km(b.return());case 43:if(e.prev=43,!v){e.next=46;break}throw y;case 46:return e.finish(43);case 47:return e.finish(38);case 48:e.next=4;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(2),u.e(e.t1);case 55:return e.prev=55,u.f(),e.finish(55);case 58:case"end":return e.stop()}}),e,null,[[2,52,55,58],[21,34,38,48],[39,,43,47]])}))),aK.apply(this,arguments)}var iK,oK=function(e,t,r,n,a,i,o){return function(){return nK(t,n,a,i,o,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},sK=function(e,t){var r=e.Links.find((function(e){return e.Name===t}));return r&&r.Hash},uK={raw:tK,file:tK,directory:rK,"hamt-sharded-directory":oK,metadata:function(e,t,r,n,a,i,o){return function(){return[]}},symlink:function(e,t,r,n,a,i,o){return function(){return[]}}},cK=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i,o,s,u){var c,l,f,p,h,d,v;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get(t,u);case 2:if(c=e.sent,l=ry(c),r||(r=t.toString()),null!=l.Data){e.next=7;break}throw cd(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");case 7:e.prev=7,f=_d.unmarshal(l.Data),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(7),cd(e.t0,"ERR_NOT_UNIXFS");case 14:if(n||(n=r),!a.length){e.next=28;break}if(!f||"hamt-sharded-directory"!==f.type){e.next=22;break}return e.next=19,QV(l,a[0],s);case 19:h=e.sent,e.next=23;break;case 22:h=sK(l,a[0]);case 23:if(h){e.next=25;break}throw cd(new Error("file does not exist"),"ERR_NOT_FOUND");case 25:d=a.shift(),v="".concat(n,"/").concat(d),p={cid:h,toResolve:a,name:d||"",path:v};case 28:return e.abrupt("return",{entry:{type:f.isDirectory()?"directory":"file",name:r,path:n,cid:t,content:uK[f.type](t,l,f,n,i,o,s),unixfs:f,depth:o,node:l,size:f.fileSize()},next:p});case 29:case"end":return e.stop()}}),e,null,[[7,11]])})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}(),lK=cK,fK=function(e){function t(){return t=Kh((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n,a,i;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=XV(e.length,t.offset,t.length),a=n.offset,i=n.length,r.next=3,JV(e,0,a,a+i);case 3:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}},pK=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i,o,s,u){var c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=2;break}throw cd(new Error("No link named ".concat(n," found in raw node ").concat(t)),"ERR_NOT_FOUND");case 2:return e.next=4,s.get(t,u);case 4:return c=e.sent,e.abrupt("return",{entry:{type:"raw",name:r,path:n,cid:t,content:fK(c),depth:o,size:c.length,node:c}});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}(),hK=pK,dK=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i,o,s,u){var c,l,f,p,h,d;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get(t);case 2:c=e.sent,l=Xb(c),f=l,p=n;case 6:if(!a.length){e.next=20;break}if(!((h=a[0])in f)){e.next=17;break}if(a.shift(),p="".concat(p,"/").concat(h),!(d=bv.asCID(f[h]))){e.next=14;break}return e.abrupt("return",{entry:{type:"object",name:r,path:n,cid:t,node:c,depth:o,size:c.length,content:function(){var e=Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},next:{cid:d,name:h,path:p,toResolve:a}});case 14:f=f[h],e.next=18;break;case 17:throw cd(new Error("No property named ".concat(h," found in cbor node ").concat(t)),"ERR_NO_PROP");case 18:e.next=6;break;case 20:return e.abrupt("return",{entry:{type:"object",name:r,path:n,cid:t,node:c,depth:o,size:c.length,content:function(){var e=Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}});case 21:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}(),vK=dK,yK=function(e){function t(){return t=Kh((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n,a,i;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=XV(e.length,t.offset,t.length),a=n.offset,i=n.length,r.next=3,JV(e,0,a,a+i);case 3:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}},bK=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i,o,s,u){var c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.length){e.next=2;break}throw cd(new Error("No link named ".concat(n," found in raw node ").concat(t)),"ERR_NOT_FOUND");case 2:return e.next=4,Gd(t.multihash.bytes);case 4:return c=e.sent,e.abrupt("return",{entry:{type:"identity",name:r,path:n,cid:t,content:yK(c.digest),depth:o,size:c.digest.length,node:c.digest}});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}(),gK=bK,mK=(iK={},(0,oi.Z)(iK,ey,lK),(0,oi.Z)(iK,Gg,hK),(0,oi.Z)(iK,Qb,vK),(0,oi.Z)(iK,Pg.code,gK),iK);var wK=function e(t,r,n,a,i,o,s){var u=mK[t.code];if(!u)throw cd(new Error("No resolver for code ".concat(t.code)),"ERR_NO_RESOLVER");return u(t,r,n,a,e,i,o,s)},kK=function(e){if(e instanceof Uint8Array)return{cid:bv.decode(e),toResolve:[]};var t=bv.asCID(e);if(t)return{cid:t,toResolve:[]};if("string"===typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));var r=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}(e);return{cid:bv.parse(r[0]),toResolve:r.slice(1)}}throw cd(new Error("Unknown path type ".concat(e)),"ERR_BAD_PATH")};function xK(e,t){return _K.apply(this,arguments)}function _K(){return _K=Kh((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=kK(e),i=a.cid,o=a.toResolve,s=i.toString(),u=s,c=o.length;case 4:return n.next=7,km(wK(i,s,u,o,c,t,r));case 7:if((l=n.sent).entry||l.next){n.next=10;break}throw cd(new Error("Could not resolve ".concat(e)),"ERR_NOT_FOUND");case 10:if(!l.entry){n.next=13;break}return n.next=13,l.entry;case 13:if(l.next){n.next=15;break}return n.abrupt("return");case 15:o=l.next.toResolve,i=l.next.cid,s=l.next.name,u=l.next.path,n.next=4;break;case 21:case"end":return n.stop()}}),n)}))()})),_K.apply(this,arguments)}function EK(e,t){return SK.apply(this,arguments)}function SK(){return SK=Zh(Fh().mark((function e(t,r){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,QD(xK(t,r,n));case 3:if(a=e.sent){e.next=6;break}throw cd(new Error("Could not resolve ".concat(t)),"ERR_NOT_FOUND");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),SK.apply(this,arguments)}function AK(e,t){return CK.apply(this,arguments)}function CK(){return CK=Kh((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p=function(){return p=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=xm(t.content(r));case 4:return e.next=6,km(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=17;break}return u=s.value,e.next=10,u;case 10:if(!(u instanceof Uint8Array)){e.next=12;break}return e.abrupt("continue",14);case 12:if("directory"!==u.type){e.next=14;break}return e.delegateYield(JD(xm(f(u,r))),"t0",14);case 14:n=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(2),a=!0,i=e.t1;case 23:if(e.prev=23,e.prev=24,!n||null==o.return){e.next=28;break}return e.next=28,km(o.return());case 28:if(e.prev=28,!a){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])}))),p.apply(this,arguments)},f=function(e,t){return p.apply(this,arguments)},n.next=4,km(EK(e,t,r));case 4:if(a=n.sent){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,a;case 9:if("directory"!==a.type){n.next=39;break}i=!1,o=!1,n.prev=12,u=xm(f(a,r));case 14:return n.next=16,km(u.next());case 16:if(!(i=!(c=n.sent).done)){n.next=23;break}return l=c.value,n.next=20,l;case 20:i=!1,n.next=14;break;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n.catch(12),o=!0,s=n.t0;case 29:if(n.prev=29,n.prev=30,!i||null==u.return){n.next=34;break}return n.next=34,km(u.return());case 34:if(n.prev=34,!o){n.next=37;break}throw s;case 37:return n.finish(34);case 38:return n.finish(29);case 39:case"end":return n.stop()}}),n,null,[[12,25,29,39],[30,,34,38]])}))()})),CK.apply(this,arguments)}function TK(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function RK(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.alloc)?TK(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function IK(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?TK(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function PK(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var r,n=IK(t),a=0,i=(0,zn.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set(o,a),a+=o.length}}catch(sY){i.e(sY)}finally{i.f()}return TK(n)}function DK(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var NK=Symbol.for("@achingbrain/uint8arraylist");function OK(e,t){if(null==t||t<0)throw new RangeError("index is out of bounds");var r,n=0,a=(0,zn.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=n+i.byteLength;if(t<o)return{buf:i,index:t-n};n=o}}catch(sY){a.e(sY)}finally{a.f()}throw new RangeError("index is out of bounds")}function LK(e){return Boolean(null===e||void 0===e?void 0:e[NK])}var BK=function(e){function t(){xn(this,t),Object.defineProperty(this,NK,{value:!0}),this.bufs=[],this.length=0;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.length>0&&this.appendAll(r)}return Sn(t,[{key:Symbol.iterator,value:Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.bufs,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"byteLength",get:function(){return this.length}},{key:"append",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.appendAll(t)}},{key:"appendAll",value:function(e){var t,r=0,n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a instanceof Uint8Array)r+=a.byteLength,this.bufs.push(a);else{if(!LK(a))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");var i;r+=a.byteLength,(i=this.bufs).push.apply(i,(0,kn.Z)(a.bufs))}}}catch(sY){n.e(sY)}finally{n.f()}this.length+=r}},{key:"prepend",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.prependAll(t)}},{key:"prependAll",value:function(e){var t,r=0,n=(0,zn.Z)(e.reverse());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a instanceof Uint8Array)r+=a.byteLength,this.bufs.unshift(a);else{if(!LK(a))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");var i;r+=a.byteLength,(i=this.bufs).unshift.apply(i,(0,kn.Z)(a.bufs))}}}catch(sY){n.e(sY)}finally{n.f()}this.length+=r}},{key:"get",value:function(e){var t=OK(this.bufs,e);return t.buf[t.index]}},{key:"set",value:function(e,t){var r=OK(this.bufs,e);r.buf[r.index]=t}},{key:"write",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof Uint8Array)for(var r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(!LK(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(var n=0;n<e.length;n++)this.set(t+n,e.get(n))}}},{key:"consume",value:function(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength)return this.bufs=[],void(this.length=0);for(;this.bufs.length>0;){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}},{key:"slice",value:function(e,t){var r=this._subList(e,t);return PK(r.bufs,r.length)}},{key:"subarray",value:function(e,t){var r=this._subList(e,t),n=r.bufs,a=r.length;return 1===n.length?n[0]:PK(n,a)}},{key:"sublist",value:function(e,r){var n=this._subList(e,r),a=n.bufs,i=n.length,o=new t;return o.length=i,o.bufs=a,o}},{key:"_subList",value:function(e,t){var r,n;if(e=null!==(r=e)&&void 0!==r?r:0,t=null!==(n=t)&&void 0!==n?n:this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:(0,kn.Z)(this.bufs),length:this.length};for(var a=[],i=0,o=0;o<this.bufs.length;o++){var s=this.bufs[o],u=i,c=u+s.byteLength;if(i=c,!(e>=c)){var l=e>=u&&e<c,f=t>u&&t<=c;if(l&&f){if(e===u&&t===c){a.push(s);break}var p=e-u;a.push(s.subarray(p,p+(t-e)));break}if(l){if(0===e){a.push(s);continue}a.push(s.subarray(e-u))}else{if(f){if(t===c){a.push(s);break}a.push(s.subarray(0,t-u));break}a.push(s)}}}return{bufs:a,length:t-e}}},{key:"indexOf",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!LK(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');var n=e instanceof Uint8Array?e:e.subarray();if(r=Number(null!==(t=r)&&void 0!==t?t:0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),0===e.length)return r>this.length?this.length:r;var a=n.byteLength;if(0===a)throw new TypeError("search must be at least 1 byte long");for(var i=new Int32Array(256),o=0;o<256;o++)i[o]=-1;for(var s=0;s<a;s++)i[n[s]]=s;for(var u,c=i,l=this.byteLength-n.byteLength,f=n.byteLength-1,p=r;p<=l;p+=u){u=0;for(var h=f;h>=0;h--){var d=this.get(p+h);if(n[h]!==d){u=Math.max(1,h-c[d]);break}}if(0===u)return p}return-1}},{key:"getInt8",value:function(e){var t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}},{key:"setInt8",value:function(e,t){var r=IK(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,t),this.write(r,e)}},{key:"getInt16",value:function(e,t){var r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,t)}},{key:"setInt16",value:function(e,t,r){var n=RK(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt16(0,t,r),this.write(n,e)}},{key:"getInt32",value:function(e,t){var r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,t)}},{key:"setInt32",value:function(e,t,r){var n=RK(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(0,t,r),this.write(n,e)}},{key:"getBigInt64",value:function(e,t){var r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,t)}},{key:"setBigInt64",value:function(e,t,r){var n=RK(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(0,t,r),this.write(n,e)}},{key:"getUint8",value:function(e){var t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}},{key:"setUint8",value:function(e,t){var r=IK(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,t),this.write(r,e)}},{key:"getUint16",value:function(e,t){var r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,t)}},{key:"setUint16",value:function(e,t,r){var n=RK(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint16(0,t,r),this.write(n,e)}},{key:"getUint32",value:function(e,t){var r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,t)}},{key:"setUint32",value:function(e,t,r){var n=RK(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,t,r),this.write(n,e)}},{key:"getBigUint64",value:function(e,t){var r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,t)}},{key:"setBigUint64",value:function(e,t,r){var n=RK(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigUint64(0,t,r),this.write(n,e)}},{key:"getFloat32",value:function(e,t){var r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,t)}},{key:"setFloat32",value:function(e,t,r){var n=RK(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat32(0,t,r),this.write(n,e)}},{key:"getFloat64",value:function(e,t){var r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,t)}},{key:"setFloat64",value:function(e,t,r){var n=RK(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat64(0,t,r),this.write(n,e)}},{key:"equals",value:function(e){if(null==e)return!1;if(!(e instanceof t))return!1;if(e.bufs.length!==this.bufs.length)return!1;for(var r=0;r<this.bufs.length;r++)if(!DK(this.bufs[r],e.bufs[r]))return!1;return!0}}],[{key:"fromUint8Arrays",value:function(e,r){var n=new t;return n.bufs=e,null==r&&(r=e.reduce((function(e,t){return e+t.byteLength}),0)),n.length=r,n}}]),t}();var MK=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},UK=MK,jK=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),FK=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),zK=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return qK(this,e)}}]),e}(),ZK=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return qK(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),qK=function(e,t){return new ZK(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},VK=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new FK(t,r,n),this.decoder=new zK(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),KK=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new VK(t,r,n,a)},HK=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=UK(n,r),i=a.encode,o=a.decode;return KK({prefix:t,name:r,encode:i,decode:function(e){return jK(o(e))}})},WK=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return KK({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},GK=KK({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),YK=WK({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),QK=WK({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),JK=HK({prefix:"9",name:"base10",alphabet:"0123456789"}),XK=WK({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$K=WK({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),eH=WK({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),tH=WK({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rH=WK({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nH=WK({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aH=WK({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),iH=WK({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),oH=WK({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sH=WK({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uH=WK({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),cH=HK({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lH=HK({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),fH=HK({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pH=HK({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),hH=WK({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dH=WK({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vH=WK({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yH=WK({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),bH=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),gH=bH.reduce((function(e,t,r){return e[r]=t,e}),[]),mH=bH.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var wH=KK({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=gH[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=mH[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),kH=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=EH;)r[n++]=255&t|xH,t/=128;for(;t&_H;)r[n++]=255&t|xH,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},xH=128,_H=-128,EH=Math.pow(2,31);var SH=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&CH)<<i:(n&CH)*Math.pow(2,i),i+=7}while(n>=AH);return e.bytes=o-r,a},AH=128,CH=127;var TH=Math.pow(2,7),RH=Math.pow(2,14),IH=Math.pow(2,21),PH=Math.pow(2,28),DH=Math.pow(2,35),NH=Math.pow(2,42),OH=Math.pow(2,49),LH=Math.pow(2,56),BH=Math.pow(2,63),MH={encode:kH,decode:SH,encodingLength:function(e){return e<TH?1:e<RH?2:e<IH?3:e<PH?4:e<DH?5:e<NH?6:e<OH?7:e<LH?8:e<BH?9:10}},UH=MH,jH=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return UH.encode(e,t,r),t},FH=function(e){return UH.encodingLength(e)},zH=function(e,t){var r=t.byteLength,n=FH(e),a=n+FH(r),i=new Uint8Array(a+r);return jH(e,i,0),jH(r,i,n),i.set(t,a),new ZH(e,r,t,i)},ZH=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),qH=function(e){var t=e.name,r=e.code,n=e.encode;return new VH(t,r,n)},VH=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?zH(this.code,r):r.then((function(e){return zH(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),KH=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},HH=qH({name:"sha2-256",code:18,encode:KH("SHA-256")}),WH=qH({name:"sha2-512",code:19,encode:KH("SHA-512")}),GH=jK,YH={code:0,name:"identity",encode:GH,digest:function(e){return zH(0,GH(e))}},QH="raw",JH=85,XH=function(e){return jK(e)},$H=function(e){return jK(e)},eW=new TextEncoder,tW=new TextDecoder,rW="json",nW=512,aW=function(e){return eW.encode(JSON.stringify(e))},iW=function(e){return JSON.parse(tW.decode(e))},oW=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},ft),pt),ht),dt),vt),yt),bt),gt),mt),wt));So(So({},kt),xt);function sW(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function uW(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?sW(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function cW(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var lW=cW("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),fW=cW("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=uW((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),pW=So({utf8:lW,"utf-8":lW,hex:oW.base16,latin1:fW,ascii:fW,binary:fW},oW);function hW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=pW[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function dW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=pW[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):sW(globalThis.Buffer.from(e,"utf-8"))}"0".charCodeAt(0),dW("ustar\0","binary"),dW("ustar ","binary"),dW(" \0","binary");var vW=__webpack_require__(1926);function yW(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var r,n=uW(t),a=0,i=(0,zn.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set(o,a),a+=o.length}}catch(sY){i.e(sY)}finally{i.f()}return sW(n)}function bW(e){return gW.apply(this,arguments)}function gW(){return gW=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Uint8Array(0),n=!1,a=!1,e.prev=3,o=xm(t);case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}u=s.value,r=yW([r,u],r.length+u.length);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])}))),gW.apply(this,arguments)}var mW="0".charCodeAt(0),wW=dW("ustar\0","binary"),kW=dW("00","binary"),xW=parseInt("7777",8),_W=257,EW=263,SW=function(e){switch(e){case"file":default:return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}},AW=function(e){for(var t=256,r=0;r<148;r++)t+=e[r];for(var n=156;n<512;n++)t+=e[n];return t},CW=function(e,t){var r=e.toString(8);return r.length>t?dW("7777777777777777777".slice(0,t)+" "):dW("0000000000000000000".slice(0,t-r.length)+r+" ")},TW=function(e){var t=dW(e).byteLength,r=Math.floor(Math.log(t)/Math.log(10))+1;return t+r>=Math.pow(10,r)&&r++,"".concat(t+r).concat(e)};function RW(e){var t,r,n=new Uint8Array(512),a=e.name,i="";if(5===e.typeflag&&"/"!==a[a.length-1]&&(a+="/"),dW(a).byteLength!==a.length)return null;for(;dW(a).byteLength>100;){var o=a.indexOf("/");if(-1===o)return null;i+=""!==i?"/"+a.slice(0,o):a.slice(0,o),a=a.slice(o+1)}return dW(a).byteLength>100||dW(i).byteLength>155||null!=e.linkname&&dW(e.linkname).byteLength>100?null:(n.set(dW(a),0),n.set(CW(e.mode&xW,6),100),n.set(CW(e.uid,6),108),n.set(CW(e.gid,6),116),n.set(CW(e.size,11),124),n.set(CW(e.mtime.getTime()/1e3|0,11),136),n[156]=mW+SW(e.type),null!=e.linkname&&n.set(dW(e.linkname),157),n.set(wW,_W),n.set(kW,EW),null!=e.uname&&n.set(dW(e.uname),265),null!=e.gname&&n.set(dW(e.gname),297),n.set(CW(null!==(t=e.devmajor)&&void 0!==t?t:0,6),329),n.set(CW(null!==(r=e.devminor)&&void 0!==r?r:0,6),337),null!=i&&n.set(dW(i),345),n.set(CW(AW(n),6),148),n)}var IW=vW.S_IFMT,PW=vW.S_IFBLK,DW=vW.S_IFCHR,NW=vW.S_IFDIR,OW=vW.S_IFIFO,LW=vW.S_IFLNK,BW=parseInt("755",8),MW=parseInt("644",8),UW=new Uint8Array(1024);function jW(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)&IW){case PW:return"block-device";case DW:return"character-device";case NW:return"directory";case OW:return"fifo";case LW:return"symlink";default:return"file"}}function FW(e){return 0!==(e&=511)?UW.subarray(0,512-e):new Uint8Array(0)}function zW(e){if(null==e.pax){var t=RW(e);if(null!=t)return t}return function(e){var t,r,n=function(e){var t="";null!=e.name&&(t+=TW(" path="+e.name+"\n")),null!=e.linkname&&(t+=TW(" linkpath="+e.linkname+"\n"));var r=e.pax;if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t+=TW(" "+n+"="+r[n]+"\n"));return dW(t)}(e),a={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname,uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};return new BK(null!==(t=RW(a))&&void 0!==t?t:new Uint8Array(0),n,FW(n.length),null!==(r=RW(So(So({},a),{},{size:e.size,type:e.type})))&&void 0!==r?r:new Uint8Array(0)).subarray()}(e)}function ZW(){return function(){var e=Kh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t);case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=72;break}if(s=o.value,u=s.header,c=s.body,y=So(So({},u),{},{size:"symlink"===u.type?0:null!==(l=u.size)&&void 0!==l?l:0,type:null!==(f=u.type)&&void 0!==f?f:jW(u.mode),mode:null!==(p=u.mode)&&void 0!==p?p:"directory"===u.type?BW:MW,uid:null!==(h=u.uid)&&void 0!==h?h:0,gid:null!==(d=u.gid)&&void 0!==d?d:0,mtime:null!==(v=u.mtime)&&void 0!==v?v:new Date}),"string"===typeof c&&(c=dW(c)),!(c instanceof Uint8Array||LK(c))){e.next=19;break}return y.size=c.length,e.next=14,zW(y);case 14:return e.next=16,LK(c)?c.subarray():c;case 16:return e.next=18,FW(y.size);case 18:return e.abrupt("continue",69);case 19:if("symlink"!==y.type||null!=y.linkname){e.next=30;break}if(null!=c){e.next=22;break}throw new Error("type was symlink but no linkname or body specified");case 22:return e.t0=hW,e.next=25,km(bW(c));case 25:return e.t1=e.sent,y.linkname=(0,e.t0)(e.t1),e.next=29,zW(y);case 29:return e.abrupt("continue",69);case 30:return e.next=32,zW(y);case 32:if("file"===y.type||"contiguous-file"===y.type){e.next=34;break}return e.abrupt("continue",69);case 34:b=0,g=!1,m=!1,e.prev=37,k=xm(null!==(_=c)&&void 0!==_?_:[]);case 39:return e.next=41,km(k.next());case 41:if(!(g=!(x=e.sent).done)){e.next=49;break}return E=x.value,b+=E.length,e.next=46,LK(E)?E.subarray():E;case 46:g=!1,e.next=39;break;case 49:e.next=55;break;case 51:e.prev=51,e.t2=e.catch(37),m=!0,w=e.t2;case 55:if(e.prev=55,e.prev=56,!g||null==k.return){e.next=60;break}return e.next=60,km(k.return());case 60:if(e.prev=60,!m){e.next=63;break}throw w;case 63:return e.finish(60);case 64:return e.finish(55);case 65:if(b===y.size){e.next=67;break}throw new Error("size mismatch, wrote ".concat(b," of ").concat(y.size," bytes"));case 67:return e.next=69,FW(y.size);case 69:r=!1,e.next=4;break;case 72:e.next=78;break;case 74:e.prev=74,e.t3=e.catch(2),n=!0,a=e.t3;case 78:if(e.prev=78,e.prev=79,!r||null==i.return){e.next=83;break}return e.next=83,km(i.return());case 83:if(e.prev=83,!n){e.next=86;break}throw a;case 86:return e.finish(83);case 87:return e.finish(78);case 88:return e.next=90,UW;case 90:case"end":return e.stop()}}),e,null,[[2,74,78,88],[37,51,55,65],[56,,60,64],[79,,83,87]])})));return function(t){return e.apply(this,arguments)}}()}function qW(e){for(var t=e.length;--t>=0;)e[t]=0}var VW=256,KW=286,HW=30,WW=15,GW=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),YW=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),QW=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),JW=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XW=new Array(576);qW(XW);var $W=new Array(60);qW($W);var eG=new Array(512);qW(eG);var tG=new Array(256);qW(tG);var rG=new Array(29);qW(rG);var nG,aG,iG,oG=new Array(HW);function sG(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function uG(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}qW(oG);var cG=function(e){return e<256?eG[e]:eG[256+(e>>>7)]},lG=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},fG=function(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,lG(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},pG=function(e,t,r){fG(e,r[2*t],r[2*t+1])},hG=function(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},dG=function(e,t,r){var n,a,i=new Array(16),o=0;for(n=1;n<=WW;n++)o=o+r[n-1]<<1,i[n]=o;for(a=0;a<=t;a++){var s=e[2*a+1];0!==s&&(e[2*a]=hG(i[s]++,s))}},vG=function(e){var t;for(t=0;t<KW;t++)e.dyn_ltree[2*t]=0;for(t=0;t<HW;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},yG=function(e){e.bi_valid>8?lG(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},bG=function(e,t,r,n){var a=2*t,i=2*r;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},gG=function(e,t,r){for(var n=e.heap[r],a=r<<1;a<=e.heap_len&&(a<e.heap_len&&bG(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!bG(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},mG=function(e,t,r){var n,a,i,o,s=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,a=e.pending_buf[e.sym_buf+s++],0===n?pG(e,a,t):(i=tG[a],pG(e,i+VW+1,t),0!==(o=GW[i])&&(a-=rG[i],fG(e,a,o)),n--,i=cG(n),pG(e,i,r),0!==(o=YW[i])&&(n-=oG[i],fG(e,n,o)))}while(s<e.sym_next);pG(e,256,t)},wG=function(e,t){var r,n,a,i=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,s&&(e.static_len-=o[2*a+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)gG(e,i,r);a=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],gG(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*a]=i[2*r]+i[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=a,e.heap[1]=a++,gG(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,a,i,o,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,d=t.stat_desc.max_length,v=0;for(i=0;i<=WW;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(i=u[2*u[2*(n=e.heap[r])+1]+1]+1)>d&&(i=d,v++),u[2*n+1]=i,n>c||(e.bl_count[i]++,o=0,n>=h&&(o=p[n-h]),s=u[2*n],e.opt_len+=s*(i+o),f&&(e.static_len+=s*(l[2*n+1]+o)));if(0!==v){do{for(i=d-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[d]--,v-=2}while(v>0);for(i=d;0!==i;i--)for(n=e.bl_count[i];0!==n;)(a=e.heap[--r])>c||(u[2*a+1]!==i&&(e.opt_len+=(i-u[2*a+1])*u[2*a],u[2*a+1]=i),n--)}}(e,t),dG(i,c,e.bl_count)},kG=function(e,t,r){var n,a,i=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)a=o,o=t[2*(n+1)+1],++s<u&&a===o||(s<c?e.bl_tree[2*a]+=s:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=a,0===o?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4))},xG=function(e,t,r){var n,a,i=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),n=0;n<=r;n++)if(a=o,o=t[2*(n+1)+1],!(++s<u&&a===o)){if(s<c)do{pG(e,a,e.bl_tree)}while(0!==--s);else 0!==a?(a!==i&&(pG(e,a,e.bl_tree),s--),pG(e,16,e.bl_tree),fG(e,s-3,2)):s<=10?(pG(e,17,e.bl_tree),fG(e,s-3,3)):(pG(e,18,e.bl_tree),fG(e,s-11,7));s=0,i=a,0===o?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4)}},_G=!1,EG=function(e,t,r,n){fG(e,0+(n?1:0),3),yG(e),lG(e,r),lG(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},SG=function(e){_G||(!function(){var e,t,r,n,a,i=new Array(16);for(r=0,n=0;n<28;n++)for(rG[n]=r,e=0;e<1<<GW[n];e++)tG[r++]=n;for(tG[r-1]=n,a=0,n=0;n<16;n++)for(oG[n]=a,e=0;e<1<<YW[n];e++)eG[a++]=n;for(a>>=7;n<HW;n++)for(oG[n]=a<<7,e=0;e<1<<YW[n]-7;e++)eG[256+a++]=n;for(t=0;t<=WW;t++)i[t]=0;for(e=0;e<=143;)XW[2*e+1]=8,e++,i[8]++;for(;e<=255;)XW[2*e+1]=9,e++,i[9]++;for(;e<=279;)XW[2*e+1]=7,e++,i[7]++;for(;e<=287;)XW[2*e+1]=8,e++,i[8]++;for(dG(XW,287,i),e=0;e<HW;e++)$W[2*e+1]=5,$W[2*e]=hG(e,5);nG=new sG(XW,GW,257,KW,WW),aG=new sG($W,YW,0,HW,WW),iG=new sG(new Array(0),QW,0,19,7)}(),_G=!0),e.l_desc=new uG(e.dyn_ltree,nG),e.d_desc=new uG(e.dyn_dtree,aG),e.bl_desc=new uG(e.bl_tree,iG),e.bi_buf=0,e.bi_valid=0,vG(e)},AG=function(e,t,r,n){var a,i,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<VW;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),wG(e,e.l_desc),wG(e,e.d_desc),o=function(e){var t;for(kG(e,e.dyn_ltree,e.l_desc.max_code),kG(e,e.dyn_dtree,e.d_desc.max_code),wG(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*JW[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=r+5,r+4<=a&&-1!==t?EG(e,t,r,n):4===e.strategy||i===a?(fG(e,2+(n?1:0),3),mG(e,XW,$W)):(fG(e,4+(n?1:0),3),function(e,t,r,n){var a;for(fG(e,t-257,5),fG(e,r-1,5),fG(e,n-4,4),a=0;a<n;a++)fG(e,e.bl_tree[2*JW[a]+1],3);xG(e,e.dyn_ltree,t-1),xG(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),mG(e,e.dyn_ltree,e.dyn_dtree)),vG(e),n&&yG(e)},CG={_tr_init:SG,_tr_stored_block:EG,_tr_flush_block:AG,_tr_tally:function(e,t,r){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(tG[r]+VW+1)]++,e.dyn_dtree[2*cG(t)]++),e.sym_next===e.sym_end},_tr_align:function(e){fG(e,2,3),pG(e,256,XW),function(e){16===e.bi_valid?(lG(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},TG=function(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{i=i+(a=a+t[n++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},RG=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}()),IG=function(e,t,r,n){var a=RG,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},PG={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},DG={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},NG=CG._tr_init,OG=CG._tr_stored_block,LG=CG._tr_flush_block,BG=CG._tr_tally,MG=CG._tr_align,UG=DG.Z_NO_FLUSH,jG=DG.Z_PARTIAL_FLUSH,FG=DG.Z_FULL_FLUSH,zG=DG.Z_FINISH,ZG=DG.Z_BLOCK,qG=DG.Z_OK,VG=DG.Z_STREAM_END,KG=DG.Z_STREAM_ERROR,HG=DG.Z_DATA_ERROR,WG=DG.Z_BUF_ERROR,GG=DG.Z_DEFAULT_COMPRESSION,YG=DG.Z_FILTERED,QG=DG.Z_HUFFMAN_ONLY,JG=DG.Z_RLE,XG=DG.Z_FIXED,$G=DG.Z_DEFAULT_STRATEGY,eY=DG.Z_UNKNOWN,tY=DG.Z_DEFLATED,rY=258,nY=262,aY=42,iY=113,oY=666,sY=function(e,t){return e.msg=PG[t],t},uY=function(e){return 2*e-(e>4?9:0)},cY=function(e){for(var t=e.length;--t>=0;)e[t]=0},lY=function(e){var t,r,n,a=e.w_size;n=t=e.hash_size;do{r=e.head[--n],e.head[n]=r>=a?r-a:0}while(--t);n=t=a;do{r=e.prev[--n],e.prev[n]=r>=a?r-a:0}while(--t)},fY=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},pY=function(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},hY=function(e,t){LG(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,pY(e.strm)},dY=function(e,t){e.pending_buf[e.pending++]=t},vY=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},yY=function(e,t,r,n){var a=e.avail_in;return a>n&&(a=n),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=TG(e.adler,t,a,r):2===e.state.wrap&&(e.adler=IG(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},bY=function(e,t){var r,n,a=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-nY?e.strstart-(e.w_size-nY):0,c=e.window,l=e.w_mask,f=e.prev,p=e.strstart+rY,h=c[i+o-1],d=c[i+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(r=t)+o]===d&&c[r+o-1]===h&&c[r]===c[i]&&c[++r]===c[i+1]){i+=2,r++;do{}while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<p);if(n=rY-(p-i),i=p-rY,n>o){if(e.match_start=t,o=n,n>=s)break;h=c[i+o-1],d=c[i+o]}}}while((t=f[t&l])>u&&0!==--a);return o<=e.lookahead?o:e.lookahead},gY=function(e){var t,r,n,a=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-nY)&&(e.window.set(e.window.subarray(a,a+a-r),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),lY(e),r+=a),0===e.strm.avail_in)break;if(t=yY(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=fY(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=fY(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<nY&&0!==e.strm.avail_in)},mY=function(e,t){var r,n,a,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a)break;if(a=e.strm.avail_out-a,r>(n=e.strstart-e.block_start)+e.strm.avail_in&&(r=n+e.strm.avail_in),r>a&&(r=a),r<i&&(0===r&&t!==zG||t===UG||r!==n+e.strm.avail_in))break;o=t===zG&&r===n+e.strm.avail_in?1:0,OG(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,pY(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(yY(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return(s-=e.strm.avail_in)&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==UG&&t!==zG&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(yY(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,i=(a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a)>e.w_size?e.w_size:a,((n=e.strstart-e.block_start)>=i||(n||t===zG)&&t!==UG&&0===e.strm.avail_in&&n<=a)&&(r=n>a?a:n,o=t===zG&&0===e.strm.avail_in&&r===n?1:0,OG(e,e.block_start,r,o),e.block_start+=r,pY(e.strm)),o?3:1)},wY=function(e,t){for(var r,n;;){if(e.lookahead<nY){if(gY(e),e.lookahead<nY&&t===UG)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=fY(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-nY&&(e.match_length=bY(e,r)),e.match_length>=3)if(n=BG(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=fY(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=fY(e,e.ins_h,e.window[e.strstart+1]);else n=BG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(hY(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===zG?(hY(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(hY(e,!1),0===e.strm.avail_out)?1:2},kY=function(e,t){for(var r,n,a;;){if(e.lookahead<nY){if(gY(e),e.lookahead<nY&&t===UG)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=fY(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-nY&&(e.match_length=bY(e,r),e.match_length<=5&&(e.strategy===YG||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=BG(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=fY(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(hY(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=BG(e,0,e.window[e.strstart-1]))&&hY(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=BG(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===zG?(hY(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(hY(e,!1),0===e.strm.avail_out)?1:2};function xY(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}var _Y=[new xY(0,0,0,0,mY),new xY(4,4,8,4,wY),new xY(4,5,16,8,wY),new xY(4,6,32,32,wY),new xY(4,4,16,16,kY),new xY(8,16,32,32,kY),new xY(8,16,128,128,kY),new xY(8,32,128,256,kY),new xY(32,128,258,1024,kY),new xY(32,258,258,4096,kY)];function EY(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tY,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),cY(this.dyn_ltree),cY(this.dyn_dtree),cY(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),cY(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),cY(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var SY=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==aY&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==iY&&t.status!==oY?1:0},AY=function(e){if(SY(e))return sY(e,KG);e.total_in=e.total_out=0,e.data_type=eY;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?aY:iY,e.adler=2===t.wrap?0:1,t.last_flush=-2,NG(t),qG},CY=function(e){var t,r=AY(e);return r===qG&&((t=e.state).window_size=2*t.w_size,cY(t.head),t.max_lazy_match=_Y[t.level].max_lazy,t.good_match=_Y[t.level].good_length,t.nice_match=_Y[t.level].nice_length,t.max_chain_length=_Y[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r},TY=function(e,t,r,n,a,i){if(!e)return KG;var o=1;if(t===GG&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>9||r!==tY||n<8||n>15||t<0||t>9||i<0||i>XG||8===n&&1!==o)return sY(e,KG);8===n&&(n=9);var s=new EY;return e.state=s,s.strm=e,s.status=aY,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=i,s.method=r,CY(e)},RY=function(e,t){if(SY(e)||t>ZG||t<0)return e?sY(e,KG):KG;var r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===oY&&t!==zG)return sY(e,0===e.avail_out?WG:KG);var n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(pY(e),0===e.avail_out)return r.last_flush=-1,qG}else if(0===e.avail_in&&uY(t)<=uY(n)&&t!==zG)return sY(e,WG);if(r.status===oY&&0!==e.avail_in)return sY(e,WG);if(r.status===aY&&0===r.wrap&&(r.status=iY),r.status===aY){var a=tY+(r.w_bits-8<<4)<<8;if(a|=(r.strategy>=QG||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),vY(r,a+=31-a%31),0!==r.strstart&&(vY(r,e.adler>>>16),vY(r,65535&e.adler)),e.adler=1,r.status=iY,pY(e),0!==r.pending)return r.last_flush=-1,qG}if(57===r.status)if(e.adler=0,dY(r,31),dY(r,139),dY(r,8),r.gzhead)dY(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),dY(r,255&r.gzhead.time),dY(r,r.gzhead.time>>8&255),dY(r,r.gzhead.time>>16&255),dY(r,r.gzhead.time>>24&255),dY(r,9===r.level?2:r.strategy>=QG||r.level<2?4:0),dY(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(dY(r,255&r.gzhead.extra.length),dY(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=IG(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(dY(r,0),dY(r,0),dY(r,0),dY(r,0),dY(r,0),dY(r,9===r.level?2:r.strategy>=QG||r.level<2?4:0),dY(r,3),r.status=iY,pY(e),0!==r.pending)return r.last_flush=-1,qG;if(69===r.status){if(r.gzhead.extra){for(var i=r.pending,o=(65535&r.gzhead.extra.length)-r.gzindex;r.pending+o>r.pending_buf_size;){var s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=IG(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=s,pY(e),0!==r.pending)return r.last_flush=-1,qG;i=0,o-=s}var u=new Uint8Array(r.gzhead.extra);r.pending_buf.set(u.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>i&&(e.adler=IG(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){var c,l=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>l&&(e.adler=IG(e.adler,r.pending_buf,r.pending-l,l)),pY(e),0!==r.pending)return r.last_flush=-1,qG;l=0}c=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,dY(r,c)}while(0!==c);r.gzhead.hcrc&&r.pending>l&&(e.adler=IG(e.adler,r.pending_buf,r.pending-l,l)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){var f,p=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>p&&(e.adler=IG(e.adler,r.pending_buf,r.pending-p,p)),pY(e),0!==r.pending)return r.last_flush=-1,qG;p=0}f=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,dY(r,f)}while(0!==f);r.gzhead.hcrc&&r.pending>p&&(e.adler=IG(e.adler,r.pending_buf,r.pending-p,p))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(pY(e),0!==r.pending))return r.last_flush=-1,qG;dY(r,255&e.adler),dY(r,e.adler>>8&255),e.adler=0}if(r.status=iY,pY(e),0!==r.pending)return r.last_flush=-1,qG}if(0!==e.avail_in||0!==r.lookahead||t!==UG&&r.status!==oY){var h=0===r.level?mY(r,t):r.strategy===QG?function(e,t){for(var r;;){if(0===e.lookahead&&(gY(e),0===e.lookahead)){if(t===UG)return 1;break}if(e.match_length=0,r=BG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(hY(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===zG?(hY(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(hY(e,!1),0===e.strm.avail_out)?1:2}(r,t):r.strategy===JG?function(e,t){for(var r,n,a,i,o=e.window;;){if(e.lookahead<=rY){if(gY(e),e.lookahead<=rY&&t===UG)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=o[a=e.strstart-1])===o[++a]&&n===o[++a]&&n===o[++a]){i=e.strstart+rY;do{}while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<i);e.match_length=rY-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=BG(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=BG(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(hY(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===zG?(hY(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(hY(e,!1),0===e.strm.avail_out)?1:2}(r,t):_Y[r.level].func(r,t);if(3!==h&&4!==h||(r.status=oY),1===h||3===h)return 0===e.avail_out&&(r.last_flush=-1),qG;if(2===h&&(t===jG?MG(r):t!==ZG&&(OG(r,0,0,!1),t===FG&&(cY(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),pY(e),0===e.avail_out))return r.last_flush=-1,qG}return t!==zG?qG:r.wrap<=0?VG:(2===r.wrap?(dY(r,255&e.adler),dY(r,e.adler>>8&255),dY(r,e.adler>>16&255),dY(r,e.adler>>24&255),dY(r,255&e.total_in),dY(r,e.total_in>>8&255),dY(r,e.total_in>>16&255),dY(r,e.total_in>>24&255)):(vY(r,e.adler>>>16),vY(r,65535&e.adler)),pY(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?qG:VG)},IY=function(e,t){var r=t.length;if(SY(e))return KG;var n=e.state,a=n.wrap;if(2===a||1===a&&n.status!==aY||n.lookahead)return KG;if(1===a&&(e.adler=TG(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(cY(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(t.subarray(r-n.w_size,r),0),t=i,r=n.w_size}var o=e.avail_in,s=e.next_in,u=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,gY(n);n.lookahead>=3;){var c=n.strstart,l=n.lookahead-2;do{n.ins_h=fY(n,n.ins_h,n.window[c+3-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++}while(--l);n.strstart=c,n.lookahead=2,gY(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=u,e.avail_in=o,n.wrap=a,qG},PY={deflateInit:function(e,t){return TY(e,t,tY,15,8,$G)},deflateInit2:TY,deflateReset:CY,deflateResetKeep:AY,deflateSetHeader:function(e,t){return SY(e)||2!==e.state.wrap?KG:(e.state.gzhead=t,qG)},deflate:RY,deflateEnd:function(e){if(SY(e))return KG;var t=e.state.status;return e.state=null,t===iY?sY(e,HG):qG},deflateSetDictionary:IY,deflateInfo:"pako deflate (from Nodeca project)"},DY=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},NY={assign:function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var n in r)DY(r,n)&&(e[n]=r[n])}}return e},flattenChunks:function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var a=new Uint8Array(t),i=0,o=0,s=e.length;i<s;i++){var u=e[i];a.set(u,o),o+=u.length}return a}},OY=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(GEe){OY=!1}for(var LY=new Uint8Array(256),BY=0;BY<256;BY++)LY[BY]=BY>=252?6:BY>=248?5:BY>=240?4:BY>=224?3:BY>=192?2:1;LY[254]=LY[254]=1;var MY={string2buf:function(e){if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,a,i,o=e.length,s=0;for(a=0;a<o;a++)55296===(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320===(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),i=0,a=0;i<s;a++)55296===(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320===(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},buf2string:function(e,t){var r,n,a=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(n=0,r=0;r<a;){var o=e[r++];if(o<128)i[n++]=o;else{var s=LY[o];if(s>4)i[n++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<a;)o=o<<6|63&e[r++],s--;s>1?i[n++]=65533:o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&OY)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}(i,n)},utf8border:function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128===(192&e[r]);)r--;return r<0||0===r?t:r+LY[e[r]]>t?r:t}};var UY=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},jY=Object.prototype.toString,FY=DG.Z_NO_FLUSH,zY=DG.Z_SYNC_FLUSH,ZY=DG.Z_FULL_FLUSH,qY=DG.Z_FINISH,VY=DG.Z_OK,KY=DG.Z_STREAM_END,HY=DG.Z_DEFAULT_COMPRESSION,WY=DG.Z_DEFAULT_STRATEGY,GY=DG.Z_DEFLATED;function YY(e){this.options=NY.assign({level:HY,method:GY,chunkSize:16384,windowBits:15,memLevel:8,strategy:WY},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new UY,this.strm.avail_out=0;var r=PY.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==VY)throw new Error(PG[r]);if(t.header&&PY.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"===typeof t.dictionary?MY.string2buf(t.dictionary):"[object ArrayBuffer]"===jY.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=PY.deflateSetDictionary(this.strm,n))!==VY)throw new Error(PG[r]);this._dict_set=!0}}function QY(e,t){var r=new YY(t);if(r.push(e,!0),r.err)throw r.msg||PG[r.err];return r.result}YY.prototype.push=function(e,t){var r,n,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?qY:FY,"string"===typeof e?a.input=MY.string2buf(e):"[object ArrayBuffer]"===jY.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(n===zY||n===ZY)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((r=PY.deflate(a,n))===KY)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),r=PY.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===VY;if(0!==a.avail_out){if(n>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},YY.prototype.onData=function(e){this.chunks.push(e)},YY.prototype.onEnd=function(e){e===VY&&(this.result=NY.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var JY={Deflate:YY,deflate:QY,deflateRaw:function(e,t){return(t=t||{}).raw=!0,QY(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,QY(e,t)},constants:DG},XY=16209,$Y=function(e,t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A=e.state;r=e.next_in,E=e.input,n=r+(e.avail_in-5),a=e.next_out,S=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),s=A.dmax,u=A.wsize,c=A.whave,l=A.wnext,f=A.window,p=A.hold,h=A.bits,d=A.lencode,v=A.distcode,y=(1<<A.lenbits)-1,b=(1<<A.distbits)-1;e:do{h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),g=d[p&y];t:for(;;){if(p>>>=m=g>>>24,h-=m,0===(m=g>>>16&255))S[a++]=65535&g;else{if(!(16&m)){if(0===(64&m)){g=d[(65535&g)+(p&(1<<m)-1)];continue t}if(32&m){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=XY;break e}w=65535&g,(m&=15)&&(h<m&&(p+=E[r++]<<h,h+=8),w+=p&(1<<m)-1,p>>>=m,h-=m),h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),g=v[p&b];r:for(;;){if(p>>>=m=g>>>24,h-=m,!(16&(m=g>>>16&255))){if(0===(64&m)){g=v[(65535&g)+(p&(1<<m)-1)];continue r}e.msg="invalid distance code",A.mode=XY;break e}if(k=65535&g,h<(m&=15)&&(p+=E[r++]<<h,(h+=8)<m&&(p+=E[r++]<<h,h+=8)),(k+=p&(1<<m)-1)>s){e.msg="invalid distance too far back",A.mode=XY;break e}if(p>>>=m,h-=m,k>(m=a-i)){if((m=k-m)>c&&A.sane){e.msg="invalid distance too far back",A.mode=XY;break e}if(x=0,_=f,0===l){if(x+=u-m,m<w){w-=m;do{S[a++]=f[x++]}while(--m);x=a-k,_=S}}else if(l<m){if(x+=u+l-m,(m-=l)<w){w-=m;do{S[a++]=f[x++]}while(--m);if(x=0,l<w){w-=m=l;do{S[a++]=f[x++]}while(--m);x=a-k,_=S}}}else if(x+=l-m,m<w){w-=m;do{S[a++]=f[x++]}while(--m);x=a-k,_=S}for(;w>2;)S[a++]=_[x++],S[a++]=_[x++],S[a++]=_[x++],w-=3;w&&(S[a++]=_[x++],w>1&&(S[a++]=_[x++]))}else{x=a-k;do{S[a++]=S[x++],S[a++]=S[x++],S[a++]=S[x++],w-=3}while(w>2);w&&(S[a++]=S[x++],w>1&&(S[a++]=S[x++]))}break}}break}}while(r<n&&a<o);r-=w=h>>3,p&=(1<<(h-=w<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<o?o-a+257:257-(a-o),A.hold=p,A.bits=h},eQ=15,tQ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),rQ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nQ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),aQ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),iQ=function(e,t,r,n,a,i,o,s){var u,c,l,f,p,h,d,v,y,b=s.bits,g=0,m=0,w=0,k=0,x=0,_=0,E=0,S=0,A=0,C=0,T=null,R=new Uint16Array(16),I=new Uint16Array(16),P=null;for(g=0;g<=eQ;g++)R[g]=0;for(m=0;m<n;m++)R[t[r+m]]++;for(x=b,k=eQ;k>=1&&0===R[k];k--);if(x>k&&(x=k),0===k)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(w=1;w<k&&0===R[w];w++);for(x<w&&(x=w),S=1,g=1;g<=eQ;g++)if(S<<=1,(S-=R[g])<0)return-1;if(S>0&&(0===e||1!==k))return-1;for(I[1]=0,g=1;g<eQ;g++)I[g+1]=I[g]+R[g];for(m=0;m<n;m++)0!==t[r+m]&&(o[I[t[r+m]]++]=m);if(0===e?(T=P=o,h=20):1===e?(T=tQ,P=rQ,h=257):(T=nQ,P=aQ,h=0),C=0,m=0,g=w,p=i,_=x,E=0,l=-1,f=(A=1<<x)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){d=g-E,o[m]+1<h?(v=0,y=o[m]):o[m]>=h?(v=P[o[m]-h],y=T[o[m]-h]):(v=96,y=0),u=1<<g-E,w=c=1<<_;do{a[p+(C>>E)+(c-=u)]=d<<24|v<<16|y|0}while(0!==c);for(u=1<<g-1;C&u;)u>>=1;if(0!==u?(C&=u-1,C+=u):C=0,m++,0===--R[g]){if(g===k)break;g=t[r+o[m]]}if(g>x&&(C&f)!==l){for(0===E&&(E=x),p+=w,S=1<<(_=g-E);_+E<k&&!((S-=R[_+E])<=0);)_++,S<<=1;if(A+=1<<_,1===e&&A>852||2===e&&A>592)return 1;a[l=C&f]=x<<24|_<<16|p-i|0}}return 0!==C&&(a[p+C]=g-E<<24|64<<16|0),s.bits=x,0},oQ=DG.Z_FINISH,sQ=DG.Z_BLOCK,uQ=DG.Z_TREES,cQ=DG.Z_OK,lQ=DG.Z_STREAM_END,fQ=DG.Z_NEED_DICT,pQ=DG.Z_STREAM_ERROR,hQ=DG.Z_DATA_ERROR,dQ=DG.Z_MEM_ERROR,vQ=DG.Z_BUF_ERROR,yQ=DG.Z_DEFLATED,bQ=16180,gQ=16190,mQ=16191,wQ=16192,kQ=16194,xQ=16199,_Q=16200,EQ=16206,SQ=16209,AQ=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function CQ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var TQ,RQ,IQ=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<bQ||t.mode>16211?1:0},PQ=function(e){if(IQ(e))return pQ;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=bQ,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,cQ},DQ=function(e){if(IQ(e))return pQ;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,PQ(e)},NQ=function(e,t){var r;if(IQ(e))return pQ;var n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?pQ:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,DQ(e))},OQ=function(e,t){if(!e)return pQ;var r=new CQ;e.state=r,r.strm=e,r.window=null,r.mode=bQ;var n=NQ(e,t);return n!==cQ&&(e.state=null),n},LQ=!0,BQ=function(e){if(LQ){TQ=new Int32Array(512),RQ=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(iQ(1,e.lens,0,288,TQ,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;iQ(2,e.lens,0,32,RQ,0,e.work,{bits:5}),LQ=!1}e.lencode=TQ,e.lenbits=9,e.distcode=RQ,e.distbits=5},MQ=function(e,t,r,n){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},UQ=function(e,t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A=0,C=new Uint8Array(4),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(IQ(e)||!e.output||!e.input&&0!==e.avail_in)return pQ;(r=e.state).mode===mQ&&(r.mode=wQ),o=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,f=s,p=u,_=cQ;e:for(;;)switch(r.mode){case bQ:if(0===r.wrap){r.mode=wQ;break}for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(2&r.wrap&&35615===c){0===r.wbits&&(r.wbits=15),r.check=0,C[0]=255&c,C[1]=c>>>8&255,r.check=IG(r.check,C,2,0),c=0,l=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=SQ;break}if((15&c)!==yQ){e.msg="unknown compression method",r.mode=SQ;break}if(l-=4,x=8+(15&(c>>>=4)),0===r.wbits&&(r.wbits=x),x>15||x>r.wbits){e.msg="invalid window size",r.mode=SQ;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?16189:mQ,c=0,l=0;break;case 16181:for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==yQ){e.msg="unknown compression method",r.mode=SQ;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=SQ;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&4&r.wrap&&(C[0]=255&c,C[1]=c>>>8&255,r.check=IG(r.check,C,2,0)),c=0,l=0,r.mode=16182;case 16182:for(;l<32;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&4&r.wrap&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,r.check=IG(r.check,C,4,0)),c=0,l=0,r.mode=16183;case 16183:for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&4&r.wrap&&(C[0]=255&c,C[1]=c>>>8&255,r.check=IG(r.check,C,2,0)),c=0,l=0,r.mode=16184;case 16184:if(1024&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&4&r.wrap&&(C[0]=255&c,C[1]=c>>>8&255,r.check=IG(r.check,C,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((h=r.length)>s&&(h=s),h&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),x)),512&r.flags&&4&r.wrap&&(r.check=IG(r.check,n,h,i)),s-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break e;h=0;do{x=n[i+h++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&h<s);if(512&r.flags&&4&r.wrap&&(r.check=IG(r.check,n,h,i)),s-=h,i+=h,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break e;h=0;do{x=n[i+h++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&h<s);if(512&r.flags&&4&r.wrap&&(r.check=IG(r.check,n,h,i)),s-=h,i+=h,x)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=SQ;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=mQ;break;case 16189:for(;l<32;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}e.adler=r.check=AQ(c),c=0,l=0,r.mode=gQ;case gQ:if(0===r.havedict)return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,r.hold=c,r.bits=l,fQ;e.adler=r.check=1,r.mode=mQ;case mQ:if(t===sQ||t===uQ)break e;case wQ:if(r.last){c>>>=7&l,l-=7&l,r.mode=EQ;break}for(;l<3;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=16193;break;case 1:if(BQ(r),r.mode=xQ,t===uQ){c>>>=2,l-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=SQ}c>>>=2,l-=2;break;case 16193:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=SQ;break}if(r.length=65535&c,c=0,l=0,r.mode=kQ,t===uQ)break e;case kQ:r.mode=16195;case 16195:if(h=r.length){if(h>s&&(h=s),h>u&&(h=u),0===h)break e;a.set(n.subarray(i,i+h),o),s-=h,i+=h,u-=h,o+=h,r.length-=h;break}r.mode=mQ;break;case 16196:for(;l<14;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=SQ;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.lens[T[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},_=iQ(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,_){e.msg="invalid code lengths set",r.mode=SQ;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;b=(A=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,g=65535&A,!((y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(g<16)c>>>=y,l-=y,r.lens[r.have++]=g;else{if(16===g){for(S=y+2;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(c>>>=y,l-=y,0===r.have){e.msg="invalid bit length repeat",r.mode=SQ;break}x=r.lens[r.have-1],h=3+(3&c),c>>>=2,l-=2}else if(17===g){for(S=y+3;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}l-=y,x=0,h=3+(7&(c>>>=y)),c>>>=3,l-=3}else{for(S=y+7;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}l-=y,x=0,h=11+(127&(c>>>=y)),c>>>=7,l-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=SQ;break}for(;h--;)r.lens[r.have++]=x}}if(r.mode===SQ)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=SQ;break}if(r.lenbits=9,E={bits:r.lenbits},_=iQ(1,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,_){e.msg="invalid literal/lengths set",r.mode=SQ;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},_=iQ(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,_){e.msg="invalid distances set",r.mode=SQ;break}if(r.mode=xQ,t===uQ)break e;case xQ:r.mode=_Q;case _Q:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,r.hold=c,r.bits=l,$Y(e,p),o=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,r.mode===mQ&&(r.back=-1);break}for(r.back=0;b=(A=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,g=65535&A,!((y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(b&&0===(240&b)){for(m=y,w=b,k=g;b=(A=r.lencode[k+((c&(1<<m+w)-1)>>m)])>>>16&255,g=65535&A,!(m+(y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=y,l-=y,r.back+=y,r.length=g,0===b){r.mode=16205;break}if(32&b){r.back=-1,r.mode=mQ;break}if(64&b){e.msg="invalid literal/length code",r.mode=SQ;break}r.extra=15&b,r.mode=16201;case 16201:if(r.extra){for(S=r.extra;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;b=(A=r.distcode[c&(1<<r.distbits)-1])>>>16&255,g=65535&A,!((y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(0===(240&b)){for(m=y,w=b,k=g;b=(A=r.distcode[k+((c&(1<<m+w)-1)>>m)])>>>16&255,g=65535&A,!(m+(y=A>>>24)<=l);){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=y,l-=y,r.back+=y,64&b){e.msg="invalid distance code",r.mode=SQ;break}r.offset=g,r.extra=15&b,r.mode=16203;case 16203:if(r.extra){for(S=r.extra;l<S;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=SQ;break}r.mode=16204;case 16204:if(0===u)break e;if(h=p-u,r.offset>h){if((h=r.offset-h)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=SQ;break}h>r.wnext?(h-=r.wnext,d=r.wsize-h):d=r.wnext-h,h>r.length&&(h=r.length),v=r.window}else v=a,d=o-r.offset,h=r.length;h>u&&(h=u),u-=h,r.length-=h;do{a[o++]=v[d++]}while(--h);0===r.length&&(r.mode=_Q);break;case 16205:if(0===u)break e;a[o++]=r.length,u--,r.mode=_Q;break;case EQ:if(r.wrap){for(;l<32;){if(0===s)break e;s--,c|=n[i++]<<l,l+=8}if(p-=u,e.total_out+=p,r.total+=p,4&r.wrap&&p&&(e.adler=r.check=r.flags?IG(r.check,a,p,o-p):TG(r.check,a,p,o-p)),p=u,4&r.wrap&&(r.flags?c:AQ(c))!==r.check){e.msg="incorrect data check",r.mode=SQ;break}c=0,l=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break e;s--,c+=n[i++]<<l,l+=8}if(4&r.wrap&&c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=SQ;break}c=0,l=0}r.mode=16208;case 16208:_=lQ;break e;case SQ:_=hQ;break e;case 16210:return dQ;default:return pQ}return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,r.hold=c,r.bits=l,(r.wsize||p!==e.avail_out&&r.mode<SQ&&(r.mode<EQ||t!==oQ))&&MQ(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,4&r.wrap&&p&&(e.adler=r.check=r.flags?IG(r.check,a,p,e.next_out-p):TG(r.check,a,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===mQ?128:0)+(r.mode===xQ||r.mode===kQ?256:0),(0===f&&0===p||t===oQ)&&_===cQ&&(_=vQ),_},jQ={inflateReset:DQ,inflateReset2:NQ,inflateResetKeep:PQ,inflateInit:function(e){return OQ(e,15)},inflateInit2:OQ,inflate:UQ,inflateEnd:function(e){if(IQ(e))return pQ;var t=e.state;return t.window&&(t.window=null),e.state=null,cQ},inflateGetHeader:function(e,t){if(IQ(e))return pQ;var r=e.state;return 0===(2&r.wrap)?pQ:(r.head=t,t.done=!1,cQ)},inflateSetDictionary:function(e,t){var r,n=t.length;return IQ(e)||0!==(r=e.state).wrap&&r.mode!==gQ?pQ:r.mode===gQ&&TG(1,t,n,0)!==r.check?hQ:MQ(e,t,n,n)?(r.mode=16210,dQ):(r.havedict=1,cQ)},inflateInfo:"pako inflate (from Nodeca project)"};var FQ=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},zQ=Object.prototype.toString,ZQ=DG.Z_NO_FLUSH,qQ=DG.Z_FINISH,VQ=DG.Z_OK,KQ=DG.Z_STREAM_END,HQ=DG.Z_NEED_DICT,WQ=DG.Z_STREAM_ERROR,GQ=DG.Z_DATA_ERROR,YQ=DG.Z_MEM_ERROR;function QQ(e){this.options=NY.assign({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new UY,this.strm.avail_out=0;var r=jQ.inflateInit2(this.strm,t.windowBits);if(r!==VQ)throw new Error(PG[r]);if(this.header=new FQ,jQ.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=MY.string2buf(t.dictionary):"[object ArrayBuffer]"===zQ.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=jQ.inflateSetDictionary(this.strm,t.dictionary))!==VQ))throw new Error(PG[r])}function JQ(e,t){var r=new QQ(t);if(r.push(e),r.err)throw r.msg||PG[r.err];return r.result}QQ.prototype.push=function(e,t){var r,n,a,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?qQ:ZQ,"[object ArrayBuffer]"===zQ.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r=jQ.inflate(i,n))===HQ&&s&&((r=jQ.inflateSetDictionary(i,s))===VQ?r=jQ.inflate(i,n):r===GQ&&(r=HQ));i.avail_in>0&&r===KQ&&i.state.wrap>0&&0!==e[i.next_in];)jQ.inflateReset(i),r=jQ.inflate(i,n);switch(r){case WQ:case GQ:case HQ:case YQ:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===KQ))if("string"===this.options.to){var u=MY.utf8border(i.output,i.next_out),c=i.next_out-u,l=MY.buf2string(i.output,u);i.next_out=c,i.avail_out=o-c,c&&i.output.set(i.output.subarray(u,u+c),0),this.onData(l)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==VQ||0!==a){if(r===KQ)return r=jQ.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},QQ.prototype.onData=function(e){this.chunks.push(e)},QQ.prototype.onEnd=function(e){e===VQ&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=NY.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var XQ={Inflate:QQ,inflate:JQ,inflateRaw:function(e,t){return(t=t||{}).raw=!0,JQ(e,t)},ungzip:JQ,constants:DG},$Q={Deflate:JY.Deflate,deflate:JY.deflate,deflateRaw:JY.deflateRaw,gzip:JY.gzip,Inflate:XQ.Inflate,inflate:XQ.inflate,inflateRaw:XQ.inflateRaw,ungzip:XQ.ungzip,constants:DG},eJ=__webpack_require__(9765);var tJ=Sn((function e(t){var r=t.preload,n=t.repo,a=t.hashers,i=t.options;xn(this,e);var o=function(e){var t=e.repo,r=e.preload,n=e.hashers,a=e.options,i=a&&a.sharding;function o(){return o=Kh((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function o(){var s,u,c,l,f,p,h,d,v,y,b,g,m,w;return Fh().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if((s=zV({shardSplitThreshold:i?1e3:1/0,strategy:"balanced"},a,So({},UV(a.chunker)))).hashAlg&&"sha2-256"!==s.hashAlg&&1!==s.cidVersion&&(s.cidVersion=1),s.trickle&&(s.strategy="trickle"),"trickle"===s.strategy&&(s.leafType="raw",s.reduceSingleLeafToSelf=!1),s.cidVersion>0&&void 0===s.rawLeaves&&(s.rawLeaves=!0),void 0!==s.hashAlg&&void 0===s.rawLeaves&&(s.rawLeaves=!0),delete s.trickle,u={},s.progress&&(c=s.progress,s.progress=function(e,t){u[t]||(u[t]=0),u[t]+=e,c(u[t],t)}),null==s.hashAlg){o.next=13;break}return o.next=12,km(n.getHasher(s.hashAlg));case 12:l=o.sent;case 13:return f=yF(OV(e,Rz),(function(e){return DV(e,t.blocks,So(So({},s),{},{hasher:l,pin:!1}))}),ZV(s),qV(r,s),VV(t,s)),o.next=16,km(t.gcLock.readLock());case 16:p=o.sent,o.prev=17,h=!1,d=!1,o.prev=20,y=xm(f);case 22:return o.next=24,km(y.next());case 24:if(!(h=!(b=o.sent).done)){o.next=33;break}return g=b.value,w=null!==(m=g.path)&&void 0!==m?m:g.cid.toString(),delete u[w],o.next=30,So(So({},g),{},{path:w});case 30:h=!1,o.next=22;break;case 33:o.next=39;break;case 35:o.prev=35,o.t0=o.catch(20),d=!0,v=o.t0;case 39:if(o.prev=39,o.prev=40,!h||null==y.return){o.next=44;break}return o.next=44,km(y.return());case 44:if(o.prev=44,!d){o.next=47;break}throw v;case 47:return o.finish(44);case 48:return o.finish(39);case 49:return o.prev=49,p(),o.finish(49);case 52:case"end":return o.stop()}}),o,null,[[17,,49,52],[20,35,39,49],[40,,44,48]])}))()})),o.apply(this,arguments)}return ZR((function(e){return o.apply(this,arguments)}))}({preload:r,repo:n,options:i,hashers:a});this.addAll=o,this.add=function(e){var t=e.addAll;function r(){return r=Zh(Fh().mark((function e(r){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,QD(t(Lz(r),n));case 3:if(null!=(a=e.sent)){e.next=6;break}throw Error("Failed to add a file, if you see this please report a bug");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}({addAll:o}),this.cat=function(e){var t=e.repo,r=e.preload;function n(){return n=Kh((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function a(){var i,o;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=YR(e),!1!==n.preload&&(i=e.split("/"),r(bv.parse(i[0]))),a.next=4,km(EK(e,t.blocks,n));case 4:if("directory"!==(o=a.sent).type){a.next=7;break}throw new Error("this dag node is a directory");case 7:if(o.content){a.next=9;break}throw new Error("this dag node has no content");case 9:return a.delegateYield(JD(xm(o.content(n))),"t0",10);case 10:case"end":return a.stop()}}),a)}))()})),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r}),this.get=function(e){var t=e.repo,r=e.preload;function n(){return n=Kh((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function a(){var i,o,s,u,c;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null==n.compressionLevel||!(n.compressionLevel<-1||n.compressionLevel>9)){a.next=2;break}throw cd(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");case 2:if(!1===n.preload){a.next=11;break}a.prev=3,i=YR(e).split("/"),a.next=10;break;case 7:throw a.prev=7,a.t0=a.catch(3),cd(a.t0,"ERR_INVALID_PATH");case 10:r(bv.parse(i[0]));case 11:return o=bv.asCID(e)||e,a.next=14,km(EK(o,t.blocks,n));case 14:if("file"!==(s=a.sent).type&&"raw"!==s.type){a.next=21;break}return u=[],n.compress&&!0!==n.archive?u.push(s.content):u.push([{header:{name:s.path,mode:"file"===s.type&&s.unixfs.mode,mtime:"file"===s.type&&s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,size:s.size,type:"file"},body:s.content()}],ZW(),(function(e){return dz(e,(function(e){return e.slice()}))})),n.compress&&u.push(function(){var e=Kh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,km(eJ(t));case 2:return r=e.sent,e.next=5,$Q.gzip(r,{level:n.compressionLevel||6});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.delegateYield(JD(xm(yF.apply(void 0,u))),"t1",20);case 20:return a.abrupt("return");case 21:if("directory"!==s.type){a.next=29;break}if(c=[AK(o,t.blocks,n),function(){var e=Kh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t);case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=33;break}if(s=o.value,u={header:{name:s.path,size:s.size}},"file"!==s.type){e.next=16;break}u.header.type="file",u.header.mode=null!=s.unixfs.mode?s.unixfs.mode:void 0,u.header.mtime=s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,u.body=s.content(),e.next=28;break;case 16:if("raw"!==s.type){e.next=21;break}u.header.type="file",u.body=s.content(),e.next=28;break;case 21:if("directory"!==s.type){e.next=27;break}u.header.type="directory",u.header.mode=null!=s.unixfs.mode?s.unixfs.mode:void 0,u.header.mtime=s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,e.next=28;break;case 27:throw cd(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");case 28:return e.next=30,u;case 30:r=!1,e.next=4;break;case 33:e.next=39;break;case 35:e.prev=35,e.t0=e.catch(2),n=!0,a=e.t0;case 39:if(e.prev=39,e.prev=40,!r||null==i.return){e.next=44;break}return e.next=44,km(i.return());case 44:if(e.prev=44,!n){e.next=47;break}throw a;case 47:return e.finish(44);case 48:return e.finish(39);case 49:case"end":return e.stop()}}),e,null,[[2,35,39,49],[40,,44,48]])})));return function(t){return e.apply(this,arguments)}}(),ZW(),function(e){return dz(e,(function(e){return e.slice()}))}],!n.compress){a.next=27;break}if(n.archive){a.next=26;break}throw cd(new Error("file is not regular"),"ERR_INVALID_PATH");case 26:n.compress&&c.push(function(){var e=Kh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,km(eJ(t));case 2:return r=e.sent,e.next=5,$Q.gzip(r,{level:n.compressionLevel||6});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 27:return a.delegateYield(JD(xm(yF.apply(void 0,c))),"t2",28);case 28:return a.abrupt("return");case 29:throw cd(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");case 30:case"end":return a.stop()}}),a,null,[[3,7]])}))()})),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r}),this.ls=function(e){var t=e.repo,r=e.preload;function n(){return n=Kh((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function a(){var i,o,s,u,c,l,f,p,h,d;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=YR(e),o=i.split("/"),!1!==n.preload&&r(bv.parse(o[0])),s=bv.asCID(i)||i,a.next=6,km(EK(s,t.blocks,n));case 6:if("file"!==(u=a.sent).type){a.next=11;break}return a.next=10,JR(u);case 10:return a.abrupt("return");case 11:if("directory"!==u.type){a.next=42;break}c=!1,l=!1,a.prev=14,p=xm(u.content());case 16:return a.next=18,km(p.next());case 18:if(!(c=!(h=a.sent).done)){a.next=25;break}return d=h.value,a.next=22,JR(d);case 22:c=!1,a.next=16;break;case 25:a.next=31;break;case 27:a.prev=27,a.t0=a.catch(14),l=!0,f=a.t0;case 31:if(a.prev=31,a.prev=32,!c||null==p.return){a.next=36;break}return a.next=36,km(p.return());case 36:if(a.prev=36,!l){a.next=39;break}throw f;case 39:return a.finish(36);case 40:return a.finish(31);case 41:return a.abrupt("return");case 42:throw cd(new Error("Unknown UnixFS type ".concat(u.type)),"ERR_UNKNOWN_UNIXFS_TYPE");case 43:case"end":return a.stop()}}),a,null,[[14,27,31,41],[32,,36,40]])}))()})),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({repo:n,preload:r})})),rJ="0.16.1";var nJ=ud("ipfs:components:id");function aJ(e,t,r){return iJ.apply(this,arguments)}function iJ(){return(iJ=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.peerStore.get(t);case 2:if(a=e.sent){e.next=7;break}return e.next=6,oJ(t,r,n);case 6:a=e.sent;case 7:if(!t.publicKey){e.next=11;break}e.t0=t.publicKey,e.next=14;break;case 11:return e.next=13,r.peerStore.keyBook.get(t);case 13:e.t0=e.sent;case 14:if(null!=(i=e.t0)){e.next=25;break}return e.prev=16,e.next=19,r.getPublicKey(t,n);case 19:i=e.sent,e.next=25;break;case 22:e.prev=22,e.t1=e.catch(16),nJ.error("Could not load public key for",t.toString(),e.t1);case 25:return e.abrupt("return",So(So({},a),{},{publicKey:i,metadata:a.metadata||new Map,addresses:a.addresses.map((function(e){return e.multiaddr}))}));case 26:case"end":return e.stop()}}),e,null,[[16,22]])})))).apply(this,arguments)}function oJ(e,t,r){return sJ.apply(this,arguments)}function sJ(){return(sJ=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.dht){e.next=2;break}throw cd(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 2:a=!1,i=!1,e.prev=4,s=xm(r.dht.findPeer(t,n));case 6:return e.next=8,s.next();case 8:if(!(a=!(u=e.sent).done)){e.next=15;break}if("FINAL_PEER"!==u.value.name){e.next=12;break}return e.abrupt("break",15);case 12:a=!1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),i=!0,o=e.t0;case 21:if(e.prev=21,e.prev=22,!a||null==s.return){e.next=26;break}return e.next=26,s.return();case 26:if(e.prev=26,!i){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.next=33,r.peerStore.get(t);case 33:if(c=e.sent){e.next=36;break}throw cd(new Error("Could not find peer"),"ERR_NOT_FOUND");case 36:return e.abrupt("return",c);case 37:case"end":return e.stop()}}),e,null,[[4,17,21,31],[22,,26,30]])})))).apply(this,arguments)}var uJ=function(e,t,r){var n,a,i;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(!(a=n.pop()))return!1;cJ(a);for(;i=n.shift();)if(cJ(i),"undefined"==typeof e[i]&&(e[i]={}),!(e=e[i])||"object"!=typeof e)return!1;return e[a]=r,!0};function cJ(e){if("__proto__"==e||"constructor"==e||"prototype"==e)throw new Error("setting of prototype values not supported")}var lJ={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:function(e){return uJ(e,"Discovery.MDNS.Enabled",!1),uJ(e,"Discovery.webRTCStar.Enabled",!1),e.Swarm=So(So({},e.Swarm||{}),{},{DisableNatPortMap:!0}),e}},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:function(e){return uJ(e,"Discovery.MDNS.Enabled",!0),uJ(e,"Discovery.webRTCStar.Enabled",!0),uJ(e,"Swarm",So(So({},e.Swarm||{}),{},{DisableNatPortMap:!1})),e}},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:function(e){var t=fz();return uJ(e,"Addresses.API",t.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),uJ(e,"Addresses.Gateway",t.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),uJ(e,"Addresses.Swarm",t.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),uJ(e,"Addresses.Delegates",[]),uJ(e,"Bootstrap",[]),uJ(e,"Discovery.MDNS.Enabled",!1),uJ(e,"Discovery.webRTCStar.Enabled",!1),uJ(e,"Swarm",So(So({},e.Swarm||{}),{},{DisableNatPortMap:!0})),e}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:function(e){var t=fz();return uJ(e,"Addresses.API",t.Addresses.API),uJ(e,"Addresses.Gateway",t.Addresses.Gateway),uJ(e,"Addresses.Swarm",t.Addresses.Swarm),uJ(e,"Addresses.Delegates",t.Addresses.Delegates),uJ(e,"Bootstrap",t.Bootstrap),uJ(e,"Discovery.MDNS.Enabled",t.Discovery.MDNS.Enabled),uJ(e,"Discovery.webRTCStar.Enabled",t.Discovery.webRTCStar.Enabled),uJ(e,"Swarm",So(So({},e.Swarm||{}),{},{DisableNatPortMap:!1})),e}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:function(e){var t=e.Swarm||{},r=t.ConnMgr||{};return r.LowWater=20,r.HighWater=40,t.ConnMgr=r,e.Swarm=t,e}},"default-power":{description:'Inverse of "lowpower" profile.',transform:function(e){var t=fz();return e.Swarm=t.Swarm,e}}},fJ=ud("ipfs:core:config");function pJ(e){return hJ.apply(this,arguments)}function hJ(){return(hJ=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.keys(lJ).map((function(e){return{name:e,description:lJ[e].description}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dJ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enumerable,r=void 0===t||t,n=e.configurable;return{enumerable:r,configurable:void 0!==n&&n,writable:!1}},vJ=Fh().mark((function(e,t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v;return Fh().wrap((function(y){for(;;)switch(y.prev=y.next){case 0:if(null!=e){y.next=2;break}return y.abrupt("return");case 2:if(!(e instanceof Uint8Array)){y.next=4;break}return y.abrupt("return");case 4:r=0,n=Object.entries(e);case 5:if(!(r<n.length)){y.next=46;break}if(a=(0,wn.Z)(n[r],2),i=a[0],o=a[1],s=[].concat((0,kn.Z)(t),[i]),null==o||"object"!==typeof o){y.next=43;break}if(!Array.isArray(o)){y.next=36;break}u=(0,zn.Z)(o.entries()),y.prev=11,u.s();case 13:if((c=u.n()).done){y.next=26;break}if(l=(0,wn.Z)(c.value,2),f=l[0],p=l[1],h=[].concat((0,kn.Z)(s),[f]),!(d=bv.asCID(p))){y.next=22;break}return y.next=20,[h.join("/"),d];case 20:y.next=24;break;case 22:if("object"!==typeof p){y.next=24;break}return y.delegateYield(vJ(p,h),"t0",24);case 24:y.next=13;break;case 26:y.next=31;break;case 28:y.prev=28,y.t1=y.catch(11),u.e(y.t1);case 31:return y.prev=31,u.f(),y.finish(31);case 34:y.next=43;break;case 36:if(!(v=bv.asCID(o))){y.next=42;break}return y.next=40,[s.join("/"),v];case 40:y.next=43;break;case 42:return y.delegateYield(vJ(o,s),"t2",43);case 43:r++,y.next=5;break;case 46:case"end":return y.stop()}}),vJ,null,[[11,28,31,34]])})),yJ=Fh().mark((function(e,t){var r,n,a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(null!=e){d.next=2;break}return d.abrupt("return");case 2:r=0,n=Object.entries(e);case 3:if(!(r<n.length)){d.next=36;break}return a=(0,wn.Z)(n[r],2),i=a[0],o=a[1],s=[].concat((0,kn.Z)(t),[i]),d.next=8,s.join("/");case 8:if(null==o||o instanceof Uint8Array||"object"!==typeof o||bv.asCID(o)){d.next=33;break}if(!Array.isArray(o)){d.next=32;break}u=(0,zn.Z)(o.entries()),d.prev=11,u.s();case 13:if((c=u.n()).done){d.next=22;break}return l=(0,wn.Z)(c.value,2),f=l[0],p=l[1],h=[].concat((0,kn.Z)(s),[f]),d.next=18,h.join("/");case 18:if("object"!==typeof p||bv.asCID(p)){d.next=20;break}return d.delegateYield(yJ(p,h),"t0",20);case 20:d.next=13;break;case 22:d.next=27;break;case 24:d.prev=24,d.t1=d.catch(11),u.e(d.t1);case 27:return d.prev=27,u.f(),d.finish(27);case 30:d.next=33;break;case 32:return d.delegateYield(yJ(o,s),"t2",33);case 33:r++,d.next=3;break;case 36:case"end":return d.stop()}}),yJ,null,[[11,24,27,30]])})),bJ=function(){function e(t){var r=t.cid,n=t.bytes,a=t.value;if(xn(this,e),!r||!n||"undefined"===typeof a)throw new Error("Missing required argument");this.cid=r,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:dJ(),bytes:dJ(),value:dJ(),asBlock:dJ()})}return Sn(e,[{key:"links",value:function(){return vJ(this.value,[])}},{key:"tree",value:function(){return yJ(this.value,[])}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return function(e,t){var r,n=e,a=(0,zn.Z)(t.entries());try{for(a.s();!(r=a.n()).done;){var i=(0,wn.Z)(r.value,2),o=i[0];if(null==(n=n[i[1]]))throw new Error("Object has no property at ".concat(t.slice(0,o+1).map((function(e){return"[".concat(JSON.stringify(e),"]")})).join("")));var s=bv.asCID(n);if(s)return{value:s,remaining:t.slice(o+1).join("/")}}}catch(sY){a.e(sY)}finally{a.f()}return{value:n}}(this.value,e.split("/").filter(Boolean))}}]),e}(),gJ=function(e){var t=e.bytes,r=e.cid,n=e.value,a=e.codec,i=void 0!==n?n:a&&a.decode(t);if(void 0===i)throw new Error('Missing required argument, must either provide "value" or "codec"');return new bJ({cid:r,bytes:t,value:i})};function mJ(e){var t=Jb({version:1,roots:e}),r=fx.encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n}function wJ(){}var kJ={Null:function(e){return null===e},Int:function(e){return Number.isInteger(e)},Float:function(e){return"number"===typeof e&&Number.isFinite(e)},String:function(e){return"string"===typeof e},Bool:function(e){return"boolean"===typeof e},Bytes:function(e){return e instanceof Uint8Array},Link:function(e){return!kJ.Null(e)&&"object"===typeof e&&e.asCID===e},List:function(e){return Array.isArray(e)},Map:function(e){return!kJ.Null(e)&&"object"===typeof e&&e.asCID!==e&&!kJ.List(e)&&!kJ.Bytes(e)}},xJ={Int:kJ.Int,"CarHeader > version":function(e){return xJ.Int(e)},"CarHeader > roots (anon) > valueType (anon)":kJ.Link,"CarHeader > roots (anon)":function(e){return kJ.List(e)&&Array.prototype.every.call(e,xJ["CarHeader > roots (anon) > valueType (anon)"])},"CarHeader > roots":function(e){return xJ["CarHeader > roots (anon)"](e)},CarHeader:function(e){var t=e&&Object.keys(e);return kJ.Map(e)&&["version"].every((function(e){return t.includes(e)}))&&Object.entries(e).every((function(e){var t=(0,wn.Z)(e,2),r=t[0],n=t[1];return xJ["CarHeader > "+r]&&xJ["CarHeader > "+r](n)}))}},_J=xJ.CarHeader,EJ={SHA2_256:18,LENGTH:32,DAG_PB:112},SJ=40;function AJ(e){return CJ.apply(this,arguments)}function CJ(){return CJ=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.upTo(8);case 2:if((r=e.sent).length){e.next=5;break}throw new Error("Unexpected end of data");case 5:return n=fx.decode(r),t.seek(fx.decode.bytes),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),CJ.apply(this,arguments)}function TJ(e){return RJ.apply(this,arguments)}function RJ(){return RJ=Zh(Fh().mark((function e(t){var r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exactly(SJ);case 2:return r=e.sent,n=new DataView(r.buffer,r.byteOffset,r.byteLength),a=0,i={version:2,characteristics:[n.getBigUint64(a,!0),n.getBigUint64(a+=8,!0)],dataOffset:Number(n.getBigUint64(a+=8,!0)),dataSize:Number(n.getBigUint64(a+=8,!0)),indexOffset:Number(n.getBigUint64(a+=8,!0))},t.seek(SJ),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),RJ.apply(this,arguments)}function IJ(e,t){return PJ.apply(this,arguments)}function PJ(){return(PJ=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AJ(t);case 2:if(0!==(n=e.sent)){e.next=5;break}throw new Error("Invalid CAR header (zero length)");case 5:return e.next=7,t.exactly(n);case 7:if(a=e.sent,t.seek(n),i=Xb(a),_J(i)){e.next=12;break}throw new Error("Invalid CAR header format");case 12:if(!(1!==i.version&&2!==i.version||void 0!==r&&i.version!==r)){e.next=14;break}throw new Error("Invalid CAR version: ".concat(i.version).concat(void 0!==r?" (expected ".concat(r,")"):""));case 14:if(o=Array.isArray(i.roots),!(1===i.version&&!o||2===i.version&&o)){e.next=17;break}throw new Error("Invalid CAR header format");case 17:if(1!==i.version){e.next=19;break}return e.abrupt("return",i);case 19:return e.next=21,TJ(t);case 21:return s=e.sent,t.seek(s.dataOffset-t.pos),e.next=25,IJ(t,1);case 25:return u=e.sent,e.abrupt("return",Object.assign(u,s));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DJ(e){return NJ.apply(this,arguments)}function NJ(){return NJ=Zh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.upTo(8);case 2:return r=e.sent,fx.decode(r),n=fx.decode.bytes,a=fx.decode(r.subarray(fx.decode.bytes)),i=fx.decode.bytes,o=n+i+a,e.next=10,t.exactly(o);case 10:return s=e.sent,t.seek(o),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)}))),NJ.apply(this,arguments)}function OJ(e){return LJ.apply(this,arguments)}function LJ(){return LJ=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exactly(2);case 2:if((r=e.sent)[0]!==EJ.SHA2_256||r[1]!==EJ.LENGTH){e.next=10;break}return e.next=6,t.exactly(34);case 6:return n=e.sent,t.seek(34),a=Gd(n),e.abrupt("return",bv.create(0,EJ.DAG_PB,a));case 10:return e.next=12,AJ(t);case 12:if(1===(i=e.sent)){e.next=15;break}throw new Error("Unexpected CID version (".concat(i,")"));case 15:return e.next=17,AJ(t);case 17:return o=e.sent,e.next=20,DJ(t);case 20:return s=e.sent,u=Gd(s),e.abrupt("return",bv.create(i,o,u));case 23:case"end":return e.stop()}}),e)}))),LJ.apply(this,arguments)}function BJ(e){return MJ.apply(this,arguments)}function MJ(){return MJ=Zh(Fh().mark((function e(t){var r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pos,e.next=3,AJ(t);case 3:if(0!==(n=e.sent)){e.next=6;break}throw new Error("Invalid CAR section (zero length)");case 6:return n+=t.pos-r,e.next=9,OJ(t);case 9:return a=e.sent,i=n-Number(t.pos-r),e.abrupt("return",{cid:a,length:n,blockLength:i});case 12:case"end":return e.stop()}}),e)}))),MJ.apply(this,arguments)}function UJ(e){return jJ.apply(this,arguments)}function jJ(){return jJ=Zh(Fh().mark((function e(t){var r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BJ(t);case 2:return r=e.sent,n=r.cid,a=r.blockLength,e.next=7,t.exactly(a);case 7:return i=e.sent,t.seek(a),e.abrupt("return",{bytes:i,cid:n});case 10:case"end":return e.stop()}}),e)}))),jJ.apply(this,arguments)}function FJ(e){return zJ.apply(this,arguments)}function zJ(){return(zJ=Zh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pos,e.next=3,BJ(t);case 3:return n=e.sent,a=n.cid,i=n.length,o=n.blockLength,s={cid:a,length:i,blockLength:o,offset:r,blockOffset:t.pos},t.seek(s.blockLength),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZJ(e){var t=Zh(Fh().mark((function t(){var r,n;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,IJ(e);case 2:return 2===(r=t.sent).version&&(n=e.pos-r.dataOffset,e=KJ(e,r.dataSize-n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))();return{header:function(){return t},blocks:function(){return Kh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(t);case 2:return r.next=4,km(e.upTo(8));case 4:if(r.t0=r.sent.length,!(r.t0>0)){r.next=12;break}return r.next=8,km(UJ(e));case 8:return r.next=10,r.sent;case 10:r.next=2;break;case 12:case"end":return r.stop()}}),r)})))()},blocksIndex:function(){return Kh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(t);case 2:return r.next=4,km(e.upTo(8));case 4:if(r.t0=r.sent.length,!(r.t0>0)){r.next=12;break}return r.next=8,km(FJ(e));case 8:return r.next=10,r.sent;case 10:r.next=2;break;case 12:case"end":return r.stop()}}),r)})))()}}}function qJ(e){var t=0;return{upTo:function(r){return Zh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.subarray(t,t+Math.min(r,e.length-t)));case 1:case"end":return n.stop()}}),n)})))()},exactly:function(r){return Zh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r>e.length-t)){n.next=2;break}throw new Error("Unexpected end of data");case 2:return n.abrupt("return",e.subarray(t,t+r));case 3:case"end":return n.stop()}}),n)})))()},seek:function(e){t+=e},get pos(){return t}}}function VJ(e){var t=e[Symbol.asyncIterator]();function r(){return(r=Zh(Fh().mark((function e(){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.next();case 2:if(!(r=e.sent).done){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e){var t=0,r=0,n=0,a=new Uint8Array(0),i=function(){var t=Zh(Fh().mark((function t(i){var o,s,u,c,l,f;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.length-n,o=[a.subarray(n)];case 2:if(!(r<i)){t.next=12;break}return t.next=5,e();case 5:if(null!=(s=t.sent)){t.next=8;break}return t.abrupt("break",12);case 8:r<0?s.length>r&&o.push(s.subarray(-r)):o.push(s),r+=s.length,t.next=2;break;case 12:for(a=new Uint8Array(o.reduce((function(e,t){return e+t.length}),0)),u=0,c=0,l=o;c<l.length;c++)f=l[c],a.set(f,u),u+=f.length;n=0;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{upTo:function(e){return Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length-n<e)){t.next=3;break}return t.next=3,i(e);case 3:return t.abrupt("return",a.subarray(n,n+Math.min(a.length-n,e)));case 4:case"end":return t.stop()}}),t)})))()},exactly:function(e){return Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length-n<e)){t.next=3;break}return t.next=3,i(e);case 3:if(!(a.length-n<e)){t.next=5;break}throw new Error("Unexpected end of data");case 5:return t.abrupt("return",a.subarray(n,n+e));case 6:case"end":return t.stop()}}),t)})))()},seek:function(e){t+=e,n+=e},get pos(){return t}}}((function(){return r.apply(this,arguments)}))}function KJ(e,t){var r=0;return{upTo:function(n){return Zh(Fh().mark((function a(){var i;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.upTo(n);case 2:return(i=a.sent).length+r>t&&(i=i.subarray(0,t-r)),a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},exactly:function(n){return Zh(Fh().mark((function a(){var i;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.exactly(n);case 2:if(!((i=a.sent).length+r>t)){a.next=5;break}throw new Error("Unexpected end of data");case 5:return a.abrupt("return",i);case 6:case"end":return a.stop()}}),a)})))()},seek:function(t){r+=t,e.seek(t)},get pos(){return e.pos}}}var HJ=function(){function e(t,r){xn(this,e),this._encoder=r,this._mutex=r.setRoots(t),this._ended=!1}return Sn(e,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bytes instanceof Uint8Array&&t.cid){e.next=2;break}throw new TypeError("Can only write {cid, bytes} objects");case 2:if(!this._ended){e.next=4;break}throw new Error("Already closed");case 4:if(r=bv.asCID(t.cid)){e.next=7;break}throw new TypeError("Can only write {cid, bytes} objects");case 7:return this._mutex=this._mutex.then((function(){return n._encoder.writeBlock({cid:r,bytes:t.bytes})})),e.abrupt("return",this._mutex);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ended){e.next=2;break}throw new Error("Already closed");case 2:return e.next=4,this._mutex;case 4:return this._ended=!0,e.abrupt("return",this._encoder.close());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"create",value:function(t){t=function(e){if(void 0===e)return[];if(!Array.isArray(e)){var t=bv.asCID(e);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}var r,n=[],a=(0,zn.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=bv.asCID(i);if(!o)throw new TypeError("roots must be a single CID or an array of CIDs");n.push(o)}}catch(sY){a.e(sY)}finally{a.f()}return n}(t);var r=GJ(),n=r.encoder,a=r.iterator;return{writer:new e(t,n),out:new WJ(a)}}},{key:"createAppender",value:function(){var t=GJ(),r=t.encoder,n=t.iterator;return r.setRoots=function(){return Promise.resolve()},{writer:new e([],r),out:new WJ(n)}}},{key:"updateRootsInBytes",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qJ(t),e.next=3,IJ(n);case 3:if(a=mJ(r),Number(n.pos)===a.length){e.next=6;break}throw new Error("updateRoots() can only overwrite a header of the same length (old header is ".concat(n.pos," bytes, new header is ").concat(a.length," bytes)"));case 6:return t.set(a,0),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),WJ=function(e){function t(e){xn(this,t),this._iterator=e}return Sn(t,[{key:Symbol.asyncIterator,value:function(){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}]),t}();function GJ(){var e=function(){var e=[],t=null,r=wJ,n=!1,a=null,i=wJ,o=function(){return t||(t=new Promise((function(e){r=function(){t=null,r=wJ,e()}}))),t},s={write:function(t){e.push(t);var r=o();return i(),r},end:function(){return Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,t=o(),i(),e.next=5,t;case 5:case"end":return e.stop()}}),e)})))()}},u={next:function(){return Zh(Fh().mark((function t(){var o;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=e.shift())){t.next=4;break}return 0===e.length&&r(),t.abrupt("return",{done:!1,value:o});case 4:if(!n){t.next=7;break}return r(),t.abrupt("return",{done:!0,value:void 0});case 7:return a||(a=new Promise((function(e){i=function(){return a=null,i=wJ,e(u.next())}}))),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))()}};return{writer:s,iterator:u}}(),t=e.writer,r=e.iterator,n=function(e){return{setRoots:function(t){return Zh(Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=mJ(t),r.next=3,e.write(n);case 3:case"end":return r.stop()}}),r)})))()},writeBlock:function(t){return Zh(Fh().mark((function r(){var n,a;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.cid,a=t.bytes,r.next=3,e.write(new Uint8Array(fx.encode(n.bytes.length+a.length)));case 3:return r.next=5,e.write(n.bytes);case 5:if(!a.length){r.next=8;break}return r.next=8,e.write(a);case 8:case"end":return r.stop()}}),r)})))()},close:function(){return Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.end();case 2:case"end":return t.stop()}}),t)})))()}}}(t);return{encoder:n,iterator:r}}var YJ=function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.cid,n=t.load,a=(a=t.seen)||new Set,i=r.toString(ov),!a.has(i)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n(r);case 7:if(o=e.sent,a.add(i),null!==o){e.next=11;break}return e.abrupt("return");case 11:s=(0,zn.Z)(o.links()),e.prev=12,s.s();case 14:if((u=s.n()).done){e.next=20;break}return c=(0,wn.Z)(u.value,2),l=c[1],e.next=18,YJ({cid:l,load:n,seen:a});case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),QJ=ud("ipfs:components:dag:import"),JJ=[Gg,em];function XJ(e,t,r,n){return function(){var a=Zh(Fh().mark((function a(i){var o,s;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.getCodec(i.code);case 2:if(o=a.sent){a.next=5;break}throw new Error("Can't decode links in block with codec 0x".concat(i.code.toString(16)," to form complete DAG"));case 5:return a.next=7,e.blocks.get(i,r);case 7:return s=a.sent,QJ("Adding block ".concat(i," to car")),a.next=11,t.put({cid:i,bytes:s});case 11:if(!JJ.includes(i.code)){a.next=13;break}return a.abrupt("return",null);case 13:return a.abrupt("return",gJ({bytes:s,cid:i,codec:o}));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}var $J=__webpack_require__(4744);var eX=function(){function e(t,r,n){xn(this,e),this._version=t,this._roots=r,this._iterable=n,this._decoded=!1}return Sn(e,[{key:"version",get:function(){return this._version}},{key:"getRoots",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._roots);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),tX=function(e,t){Cn(n,e);var r=Dn(n);function n(){return xn(this,n),r.apply(this,arguments)}return Sn(n,[{key:t,value:function(){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}}],[{key:"fromBytes",value:function(){var e=Zh(Fh().mark((function e(t){var r,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rX(t);case 2:return r=e.sent,a=r.version,i=r.roots,o=r.iterator,e.abrupt("return",new n(a,i,o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromIterable",value:function(){var e=Zh(Fh().mark((function e(t){var r,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aX(t);case 2:return r=e.sent,a=r.version,i=r.roots,o=r.iterator,e.abrupt("return",new n(a,i,o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(eX,Symbol.asyncIterator);Symbol.asyncIterator;function rX(e){return nX.apply(this,arguments)}function nX(){return nX=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw new TypeError("fromBytes() requires a Uint8Array");case 2:return e.abrupt("return",oX(qJ(t)));case 3:case"end":return e.stop()}}),e)}))),nX.apply(this,arguments)}function aX(e){return iX.apply(this,arguments)}function iX(){return(iX=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"function"===typeof t[Symbol.asyncIterator]){e.next=2;break}throw new TypeError("fromIterable() requires an async iterable");case 2:return e.abrupt("return",oX(VJ(t)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oX(e){return sX.apply(this,arguments)}function sX(){return sX=Zh(Fh().mark((function e(t){var r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ZJ(t),e.next=3,r.header();case 3:return n=e.sent,a=n.version,i=n.roots,e.abrupt("return",{version:a,roots:i,iterator:r.blocks()});case 7:case"end":return e.stop()}}),e)}))),sX.apply(this,arguments)}var uX=ud("ipfs:components:dag:import");function cX(e,t,r){return lX.apply(this,arguments)}function lX(){return lX=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tX.fromIterable(n);case 2:return a=e.sent,e.next=5,a.getRoots();case 5:return i=e.sent,e.next=8,OF(t.blocks.putMany(dz(a,(function(e){var t=e.cid,r=e.bytes;return uX("Import block ".concat(t)),{key:t,value:r}})),{signal:r.signal}));case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)}))),lX.apply(this,arguments)}var fX=Sn((function e(t){var r=t.repo,n=t.codecs,a=t.hashers,i=t.preload;xn(this,e),this.export=function(e){var t=e.repo,r=e.preload,n=e.codecs;function a(){return a=Kh((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function i(){var o,s,u,c,l,f,p,h,d,v,y;return Fh().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!1!==a.preload&&r(e),o=bv.asCID(e)){i.next=4;break}throw new Error("Unexpected error converting CID type: ".concat(e));case 4:return QJ("Exporting ".concat(o," as car")),i.next=7,km(HJ.create([o]));case 7:s=i.sent,u=s.writer,c=s.out,l=null,Zh(Fh().mark((function e(){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=XJ(t,u,{signal:a.signal,timeout:a.timeout},n),e.next=4,YJ({cid:o,load:r});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l=e.t0;case 9:return e.prev=9,u.close(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))(),f=!1,p=!1,i.prev=14,d=xm(c);case 16:return i.next=18,km(d.next());case 18:if(!(f=!(v=i.sent).done)){i.next=27;break}if(y=v.value,!l){i.next=22;break}return i.abrupt("break",27);case 22:return i.next=24,y;case 24:f=!1,i.next=16;break;case 27:i.next=33;break;case 29:i.prev=29,i.t0=i.catch(14),p=!0,h=i.t0;case 33:if(i.prev=33,i.prev=34,!f||null==d.return){i.next=38;break}return i.next=38,km(d.return());case 38:if(i.prev=38,!p){i.next=41;break}throw h;case 41:return i.finish(38);case 42:return i.finish(33);case 43:if(!l){i.next=45;break}throw l;case 45:case"end":return i.stop()}}),i,null,[[14,29,33,43],[34,,38,42]])}))()})),a.apply(this,arguments)}return ZR((function(e){return a.apply(this,arguments)}))}({repo:r,preload:i,codecs:n}),this.get=function(e){var t=e.codecs,r=e.repo,n=e.preload,a=function(){var e=Zh(Fh().mark((function e(a){var i,o,s,u,c,l,f=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(i=f.length>1&&void 0!==f[1]?f[1]:{}).preload&&n(a),!i.path){e.next=17;break}if(!i.localResolve){e.next=9;break}return e.next=6,$J($R(a,i.path,t,r,i));case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,QD($R(a,i.path,t,r,i));case 11:e.t0=e.sent;case 12:if(o=e.t0,s=o){e.next=16;break}throw cd(new Error("Not found"),"ERR_NOT_FOUND");case 16:return e.abrupt("return",s);case 17:return e.next=19,t.getCodec(a.code);case 19:return u=e.sent,e.next=22,r.blocks.get(a,i);case 22:return c=e.sent,l=u.decode(c),e.abrupt("return",{value:l,remainderPath:""});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return ZR(a)}({codecs:n,repo:r,preload:i}),this.import=function(e){var t=e.repo;function r(){return r=Kh((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(t.gcLock.readLock());case 2:return a=n.sent,n.prev=3,i={signal:r.signal,timeout:r.timeout},o=wz(e),n.next=8,km(o.peek());case 8:if(s=n.sent,u=s.value,!s.done){n.next=13;break}return n.abrupt("return");case 13:u&&o.push(u),c=u instanceof Uint8Array?[o]:o,l=!1,f=!1,n.prev=17,h=xm(c);case 19:return n.next=21,km(h.next());case 21:if(!(l=!(d=n.sent).done)){n.next=63;break}return v=d.value,n.next=25,km(cX(t,i,v));case 25:if(y=n.sent,!1===r.pinRoots){n.next=60;break}b=(0,zn.Z)(y),n.prev=28,b.s();case 30:if((g=b.n()).done){n.next=52;break}return m=g.value,w="",n.prev=33,n.next=36,km(t.blocks.has(m));case 36:if(!n.sent){n.next=42;break}return uX("Pinning root ".concat(m)),n.next=40,km(t.pins.pinRecursively(m));case 40:n.next=43;break;case 42:w="blockstore: block not found";case 43:n.next=48;break;case 45:n.prev=45,n.t0=n.catch(33),w=n.t0.message;case 48:return n.next=50,{root:{cid:m,pinErrorMsg:w}};case 50:n.next=30;break;case 52:n.next=57;break;case 54:n.prev=54,n.t1=n.catch(28),b.e(n.t1);case 57:return n.prev=57,b.f(),n.finish(57);case 60:l=!1,n.next=19;break;case 63:n.next=69;break;case 65:n.prev=65,n.t2=n.catch(17),f=!0,p=n.t2;case 69:if(n.prev=69,n.prev=70,!l||null==h.return){n.next=74;break}return n.next=74,km(h.return());case 74:if(n.prev=74,!f){n.next=77;break}throw p;case 77:return n.finish(74);case 78:return n.finish(69);case 79:return n.prev=79,a(),n.finish(79);case 82:case"end":return n.stop()}}),n,null,[[3,,79,82],[17,65,69,79],[28,54,57,60],[33,45],[70,,74,78]])}))()})),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({repo:r}),this.resolve=function(e){var t=e.repo,r=e.codecs,n=e.preload;function a(){return a=Zh(Fh().mark((function e(a){var i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>1&&void 0!==u[1]?u[1]:{},o=VR(a),s=o.cid,!1!==i.preload&&n(s),e.abrupt("return",QR(t,r,a,i));case 4:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return ZR((function(e){return a.apply(this,arguments)}))}({repo:r,codecs:n,preload:i}),this.put=function(e){var t=e.repo,r=e.codecs,n=e.hashers,a=e.preload;function i(){return i=Zh(Fh().mark((function e(i){var o,s,u,c,l,f,p,h,d,v=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=v.length>1&&void 0!==v[1]?v[1]:{}).pin){e.next=7;break}return e.next=4,t.gcLock.readLock();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return s=e.t0,e.prev=9,e.next=12,r.getCodec(o.storeCodec||"dag-cbor");case 12:if(u=e.sent){e.next=15;break}throw new Error("Unknown storeCodec ".concat(o.storeCodec,", please configure additional BlockCodecs for this IPFS instance"));case 15:if(!o.inputCodec){e.next=24;break}if(i instanceof Uint8Array){e.next=18;break}throw new Error("Can only inputCodec on raw bytes that can be decoded");case 18:return e.next=20,r.getCodec(o.inputCodec);case 20:if(c=e.sent){e.next=23;break}throw new Error("Unknown inputCodec ".concat(o.inputCodec,", please configure additional BlockCodecs for this IPFS instance"));case 23:i=c.decode(i);case 24:return l=null!=o.version?o.version:1,e.next=27,n.getHasher(o.hashAlg||"sha2-256");case 27:if(f=e.sent){e.next=30;break}throw new Error("Unknown hash algorithm ".concat(o.hashAlg,", please configure additional MultihashHashers for this IPFS instance"));case 30:return p=u.encode(i),e.next=33,f.digest(p);case 33:return h=e.sent,d=bv.create(l,u.code,h),e.next=37,t.blocks.put(d,p,{signal:o.signal});case 37:if(!o.pin){e.next=40;break}return e.next=40,t.pins.pinRecursively(d);case 40:return!1!==o.preload&&a(d),e.abrupt("return",d);case 42:return e.prev=42,s&&s(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[9,,42,45]])}))),i.apply(this,arguments)}return ZR((function(e){return i.apply(this,arguments)}))}({repo:r,codecs:n,hashers:a,preload:i})}));var pX=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},hX=pX,dX=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),vX=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),yX=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return gX(this,e)}}]),e}(),bX=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return gX(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),gX=function(e,t){return new bX(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},mX=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new vX(t,r,n),this.decoder=new yX(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),wX=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new mX(t,r,n,a)},kX=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=hX(n,r),i=a.encode,o=a.decode;return wX({prefix:t,name:r,encode:i,decode:function(e){return dX(o(e))}})},xX=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return wX({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},_X=wX({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),EX=xX({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),SX=xX({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),AX=kX({prefix:"9",name:"base10",alphabet:"0123456789"}),CX=xX({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),TX=xX({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),RX=xX({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IX=xX({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),PX=xX({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),DX=xX({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),NX=xX({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),OX=xX({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),LX=xX({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BX=xX({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),MX=xX({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),UX=kX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jX=kX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),FX=kX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zX=kX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ZX=xX({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qX=xX({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),VX=xX({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),KX=xX({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),HX=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),WX=HX.reduce((function(e,t,r){return e[r]=t,e}),[]),GX=HX.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var YX=wX({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=WX[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=GX[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),QX=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=$X;)r[n++]=255&t|JX,t/=128;for(;t&XX;)r[n++]=255&t|JX,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},JX=128,XX=-128,$X=Math.pow(2,31);var e$=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&r$)<<i:(n&r$)*Math.pow(2,i),i+=7}while(n>=t$);return e.bytes=o-r,a},t$=128,r$=127;var n$=Math.pow(2,7),a$=Math.pow(2,14),i$=Math.pow(2,21),o$=Math.pow(2,28),s$=Math.pow(2,35),u$=Math.pow(2,42),c$=Math.pow(2,49),l$=Math.pow(2,56),f$=Math.pow(2,63),p$={encode:QX,decode:e$,encodingLength:function(e){return e<n$?1:e<a$?2:e<i$?3:e<o$?4:e<s$?5:e<u$?6:e<c$?7:e<l$?8:e<f$?9:10}},h$=p$,d$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[h$.decode(e,t),h$.decode.bytes]},v$=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return h$.encode(e,t,r),t},y$=function(e){return h$.encodingLength(e)},b$=function(e,t){var r=t.byteLength,n=y$(e),a=n+y$(r),i=new Uint8Array(a+r);return v$(e,i,0),v$(r,i,n),i.set(t,a),new m$(e,r,t,i)},g$=function(e){var t=dX(e),r=d$(t),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=d$(t.subarray(i)),s=(0,wn.Z)(o,2),u=s[0],c=s[1],l=t.subarray(i+c);if(l.byteLength!==u)throw new Error("Incorrect length");return new m$(a,u,l,t)},m$=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),w$=function(e){var t=e.name,r=e.code,n=e.encode;return new k$(t,r,n)},k$=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?b$(this.code,r):r.then((function(e){return b$(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),x$=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_$=w$({name:"sha2-256",code:18,encode:x$("SHA-256")}),E$=w$({name:"sha2-512",code:19,encode:x$("SHA-512")}),S$=dX,A$={code:0,name:"identity",encode:S$,digest:function(e){return b$(0,S$(e))}},C$="raw",T$=85,R$=function(e){return dX(e)},I$=function(e){return dX(e)},P$=new TextEncoder,D$=new TextDecoder,N$="json",O$=512,L$=function(e){return P$.encode(JSON.stringify(e))},B$=function(e){return JSON.parse(D$.decode(e))},M$=function(e,t){var r=e.bytes;return 0===e.version?Z$(r,j$(e),t||FX.encoder):q$(r,j$(e),t||RX.encoder)},U$=new WeakMap,j$=function(e){var t=U$.get(e);if(null==t){var r=new Map;return U$.set(e,r),r}return t},F$=function(e,t){function r(e,t,n,a){xn(this,r),this.code=t,this.version=e,this.multihash=n,this.bytes=a,this["/"]=a}return Sn(r,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==V$)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==K$)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,a=b$(t,n);return r.createV1(this.code,a);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return r.equals(this,e)}},{key:"toString",value:function(e){return M$(this,e)}},{key:"toJSON",value:function(){return{"/":M$(this)}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var r=t;return r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;var r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}(e.multihash,r.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof r)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,a=t.code,i=t.multihash;return new r(n,a,i,t.bytes||H$(n,a,i.bytes))}if(!0===t[W$]){var o=t.version,s=t.multihash,u=t.code,c=g$(s);return r.create(o,u,c)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==V$)throw new Error("Version 0 CID must use dag-pb (code: ".concat(V$,") block encoding"));return new r(e,t,n,n.bytes);case 1:return new r(e,t,n,H$(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return r.create(0,V$,e)}},{key:"createV1",value:function(e,t){return r.create(1,e,t)}},{key:"decode",value:function(e){var t=r.decodeFirst(e),n=(0,wn.Z)(t,2),a=n[0];if(n[1].length)throw new Error("Incorrect length");return a}},{key:"decodeFirst",value:function(e){var t=r.inspectBytes(e),n=t.size-t.multihashSize,a=dX(e.subarray(n,n+t.multihashSize));if(a.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=a.subarray(t.multihashSize-t.digestSize),o=new m$(t.multihashCode,t.digestSize,i,a);return[0===t.version?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,r=function(){var r=d$(e.subarray(t)),n=(0,wn.Z)(r,2),a=n[0],i=n[1];return t+=i,a},n=r(),a=V$;if(18===n?(n=0,t=0):a=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var i=t,o=r(),s=r(),u=t+s;return{version:n,codec:a,multihashCode:o,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(e,t){var n=z$(e,t),a=(0,wn.Z)(n,2),i=a[0],o=a[1],s=r.decode(o);if(0===s.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return j$(s).set(i,e),s}}]),r}(),z$=function(e,t){switch(e[0]){case"Q":var r=t||FX;return[FX.prefix,r.decode("".concat(FX.prefix).concat(e))];case FX.prefix:var n=t||FX;return[FX.prefix,n.decode(e)];case RX.prefix:var a=t||RX;return[RX.prefix,a.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Z$=function(e,t,r){var n=r.prefix;if(n!==FX.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));var a=t.get(n);if(null==a){var i=r.encode(e).slice(1);return t.set(n,i),i}return a},q$=function(e,t,r){var n=r.prefix,a=t.get(n);if(null==a){var i=r.encode(e);return t.set(n,i),i}return a},V$=112,K$=18,H$=function(e,t,r){var n=y$(e),a=n+y$(t),i=new Uint8Array(a+r.byteLength);return v$(e,i,0),v$(t,i,n),i.set(r,a),i},W$=Symbol.for("@ipld/js-cid/CID"),G$=So(So(So(So(So(So(So(So(So(So({},St),At),Ct),Tt),Rt),It),Pt),Dt),Nt),Ot);So(So({},Lt),Bt);function Y$(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Q$(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Y$(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function J$(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var X$=J$("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),$$=J$("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=Q$((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),e1=So({utf8:X$,"utf-8":X$,hex:G$.base16,latin1:$$,ascii:$$,binary:$$},G$);function t1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=e1[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var r1=cw,n1=lw,a1=function e(t){var r=0;if(t=t.toString().trim(),r1(t)){var n=new Uint8Array(r+4);return t.split(/\./g).forEach((function(e){n[r++]=255&parseInt(e,10)})),n}if(n1(t)){var a,i=t.split(":",8);for(a=0;a<i.length;a++){var o=void 0;r1(i[a])&&(o=e(i[a]),i[a]=t1(o.slice(0,2),"base16")),null!=o&&++a<8&&i.splice(a,0,t1(o.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(a=0;a<i.length&&""!==i[a];a++);var s=[a,1];for(a=9-i.length;a>0;a--)s.push("0");i.splice.apply(i,s)}var u=new Uint8Array(r+16);for(a=0;a<i.length;a++){var c=parseInt(i[a],16);u[r++]=c>>8&255,u[r++]=255&c}return u}throw new Error("invalid ip address")},i1=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;r=~~r,n=null!==(t=n)&&void 0!==t?t:e.length-r;var a=new DataView(e.buffer);if(4===n){for(var i=[],o=0;o<n;o++)i.push(e[r+o]);return i.join(".")}if(16===n){for(var s=[],u=0;u<n;u+=2)s.push(a.getUint16(r+u).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},o1=-1,s1={},u1={};function c1(e,t,r,n,a){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(a)}}function l1(e){if("number"===typeof e){if(null!=u1[e])return u1[e];throw new Error("no protocol with code: ".concat(e))}if("string"===typeof e){if(null!=s1[e])return s1[e];throw new Error("no protocol with name: ".concat(e))}throw new Error("invalid protocol id type: ".concat(typeof e))}function f1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=e1[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):Y$(globalThis.Buffer.from(e,"utf-8"))}function p1(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var r,n=Q$(t),a=0,i=(0,zn.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set(o,a),a+=o.length}}catch(sY){i.e(sY)}finally{i.f()}return Y$(n)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,o1,"ip6zone"],[43,8,"ipcidr"],[53,o1,"dns",!0],[54,o1,"dns4",!0],[55,o1,"dns6",!0],[56,o1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,o1,"unix",!1,!0],[421,o1,"ipfs"],[421,o1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,o1,"garlic64"],[448,0,"tls"],[449,o1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,o1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,o1,"memory"]].forEach((function(e){var t=c1.apply(void 0,(0,kn.Z)(e));u1[t.code]=t,s1[t.name]=t}));l1("ip4"),l1("ip6"),l1("ipcidr");function h1(e,t){switch(l1(e).code){case 4:case 41:return function(e){var t=i1(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!fw(t))throw new Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return k1(t);case 6:case 273:case 33:case 132:return m1(t).toString();case 421:return function(e){var t=fx.decode(e),r=e.slice(fx.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return t1(r,"base58btc")}(t);case 444:case 445:return x1(t);case 466:return function(e){var t=fx.decode(e),r=e.slice(fx.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+t1(r,"base64url")}(t);default:return t1(t,"base16")}}function d1(e,t){switch(l1(e).code){case 4:case 41:return b1(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return w1(t);case 6:case 273:case 33:case 132:return g1(parseInt(t,10));case 421:return function(e){var t;t="Q"===e[0]||"1"===e[0]?g$(FX.decode("z".concat(e))).bytes:F$.parse(e).multihash.bytes;var r=Uint8Array.from(fx.encode(t.length));return p1([r,t],r.length+t.length)}(t);case 444:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(16!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion address."));var r=RX.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=g1(n);return p1([r,a],r.length+a.length)}(t);case 445:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(56!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion3 address."));var r=RX.decode("b".concat(t[0])),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var a=g1(n);return p1([r,a],r.length+a.length)}(t);case 466:return function(e){var t=y1.decode(e),r=Uint8Array.from(fx.encode(t.length));return p1([r,t],r.length+t.length)}(t);default:return f1(t,"base16")}}var v1=Object.values(G$).map((function(e){return e.decoder})),y1=function(){var e=v1[0].or(v1[1]);return v1.slice(2).forEach((function(t){return e=e.or(t)})),e}();function b1(e){if(!fw(e))throw new Error("invalid ip address");return a1(e)}function g1(e){var t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function m1(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function w1(e){var t=f1(e),r=Uint8Array.from(fx.encode(t.length));return p1([r,t],r.length+t.length)}function k1(e){var t=fx.decode(e);if((e=e.slice(fx.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return t1(e)}function x1(e){var t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=t1(t,"base32"),a=m1(r);return"".concat(n,":").concat(a)}function _1(e){return e.map((function(e){var t=N1(e);return null!=e[1]?[t.code,h1(t.code,e[1])]:[t.code]}))}function E1(e){return R1(p1(e.map((function(e){var t=N1(e),r=Uint8Array.from(fx.encode(t.code));return e.length>1&&null!=e[1]&&(r=p1([r,e[1]])),r}))))}function S1(e,t){return e.size>0?e.size/8:0===e.size?0:fx.decode(t)+(null!==(r=fx.decode.bytes)&&void 0!==r?r:0);var r}function A1(e){for(var t=[],r=0;r<e.length;){var n,a=fx.decode(e,r),i=null!==(n=fx.decode.bytes)&&void 0!==n?n:0,o=S1(l1(a),e.slice(r+i));if(0!==o){var s=e.slice(r+i,r+i+o);if((r+=o+i)>e.length)throw D1("Invalid address Uint8Array: "+t1(e,"base16"));t.push([a,s])}else t.push([a]),r+=i}return t}function C1(e){return function(e){var t=[];return e.map((function(e){var r=N1(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),P1(t.join("/"))}(_1(A1(e)))}function T1(e){var t=function(e){var t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(var n=0;n<r.length;n++){var a=r[n],i=l1(a);if(0!==i.size){if(++n>=r.length)throw D1("invalid address: "+e);if(!0===i.path){t.push([a,P1(r.slice(n).join("/"))]);break}t.push([a,r[n]])}else t.push([a])}return t}(e=P1(e));return E1(t.map((function(e){Array.isArray(e)||(e=[e]);var t=N1(e);return e.length>1?[t.code,d1(t.code,e[1])]:[t.code]})))}function R1(e){var t=I1(e);if(null!=t)throw t;return Uint8Array.from(e)}function I1(e){try{A1(e)}catch(sY){return sY}}function P1(e){return"/"+e.trim().split("/").filter((function(e){return e})).join("/")}function D1(e){return new Error("Error parsing address: "+e)}function N1(e){return l1(e[0])}var O1,L1,B1,M1,U1,j1=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},F1=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},z1=Symbol.for("nodejs.util.inspect.custom"),Z1=[l1("dns").code,l1("dns4").code,l1("dns6").code,l1("dnsaddr").code],q1=new Map,V1=Symbol.for("@multiformats/js-multiaddr/multiaddr");function K1(e){return Boolean(null===e||void 0===e?void 0:e[V1])}var H1=function(e){function t(e){if(xn(this,t),O1.set(this,void 0),L1.set(this,void 0),B1.set(this,void 0),M1.set(this,void 0),this[U1]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=R1(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error('multiaddr "'.concat(e,'" must start with a "/"'));this.bytes=T1(e)}else{if(!K1(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=R1(e.bytes)}}return Sn(t,[{key:"toString",value:function(){return null==j1(this,O1,"f")&&F1(this,O1,C1(this.bytes),"f"),j1(this,O1,"f")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toOptions",value:function(){var e,t,r,n,a,i="",o=l1("tcp"),s=l1("udp"),u=l1("ip4"),c=l1("ip6"),l=l1("dns6"),f=l1("ip6zone"),p=(0,zn.Z)(this.stringTuples());try{for(p.s();!(a=p.n()).done;){var h=(0,wn.Z)(a.value,2),d=h[0],v=h[1];d===f.code&&(i="%".concat(null!==v&&void 0!==v?v:"")),Z1.includes(d)&&(t=o.name,n=443,r="".concat(null!==v&&void 0!==v?v:"").concat(i),e=d===l.code?6:4),d!==o.code&&d!==s.code||(t=l1(d).name,n=parseInt(null!==v&&void 0!==v?v:"")),d!==u.code&&d!==c.code||(t=l1(d).name,r="".concat(null!==v&&void 0!==v?v:"").concat(i),e=d===c.code?6:4)}}catch(sY){p.e(sY)}finally{p.f()}if(null==e||null==t||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:r,transport:t,port:n}}},{key:"protos",value:function(){return this.protoCodes().map((function(e){return Object.assign({},l1(e))}))}},{key:"protoCodes",value:function(){for(var e=[],t=this.bytes,r=0;r<t.length;){var n,a=fx.decode(t,r),i=null!==(n=fx.decode.bytes)&&void 0!==n?n:0;r+=S1(l1(a),t.slice(r+i))+i,e.push(a)}return e}},{key:"protoNames",value:function(){return this.protos().map((function(e){return e.name}))}},{key:"tuples",value:function(){return null==j1(this,L1,"f")&&F1(this,L1,A1(this.bytes),"f"),j1(this,L1,"f")}},{key:"stringTuples",value:function(){return null==j1(this,B1,"f")&&F1(this,B1,_1(this.tuples()),"f"),j1(this,B1,"f")}},{key:"encapsulate",value:function(e){return e=new t(e),new t(this.toString()+e.toString())}},{key:"decapsulate",value:function(e){var r=e.toString(),n=this.toString(),a=n.lastIndexOf(r);if(a<0)throw new Error("Address ".concat(this.toString()," does not contain subaddress: ").concat(e.toString()));return new t(n.slice(0,a))}},{key:"decapsulateCode",value:function(e){for(var r=this.tuples(),n=r.length-1;n>=0;n--)if(r[n][0]===e)return new t(E1(r.slice(0,n)));return this}},{key:"getPeerId",value:function(){try{var e=this.stringTuples().filter((function(e){return e[0]===s1.ipfs.code})),t=e.pop();if(null!=(null===t||void 0===t?void 0:t[1])){var r=t[1];return"Q"===r[0]||"1"===r[0]?t1(FX.decode("z".concat(r)),"base58btc"):t1(F$.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}},{key:"getPath",value:function(){if(void 0===j1(this,M1,"f"))try{F1(this,M1,this.stringTuples().filter((function(e){return!0===l1(e[0]).path}))[0][1],"f"),null==j1(this,M1,"f")&&F1(this,M1,null,"f")}catch(e){F1(this,M1,null,"f")}return j1(this,M1,"f")}},{key:"equals",value:function(e){return function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(this.bytes,e.bytes)}},{key:"resolve",value:function(){var e=Zh(Fh().mark((function e(r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.protos().find((function(e){return e.resolvable})))){e.next=3;break}return e.abrupt("return",[this]);case 3:if(null!=(a=q1.get(n.name))){e.next=6;break}throw new gS("no available resolver for ".concat(n.name),"ERR_NO_AVAILABLE_RESOLVER");case 6:return e.next=8,a(this,r);case 8:return i=e.sent,e.abrupt("return",i.map((function(e){return new t(e)})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nodeAddress",value:function(){var e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error('multiaddr must have a valid format - no protocol with name: "'.concat(e.transport,'". Must have a valid transport protocol: "{tcp, udp}"'));return{family:e.family,address:e.host,port:e.port}}},{key:"isThinWaistAddress",value:function(e){var t=(null!==e&&void 0!==e?e:this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}},{key:e,value:function(){return"Multiaddr(".concat(C1(this.bytes),")")}}]),t}((O1=new WeakMap,L1=new WeakMap,B1=new WeakMap,M1=new WeakMap,U1=V1,z1));var W1=function(e,t){return t},G1={ip4:W1,ip6:function(e,t,r,n){return 1===n.length&&"ip6"===n[0].protocol?t:"[".concat(t,"]")},tcp:function(e,t,r,n,a){return n.some((function(e){return["http","https","ws","wss"].includes(e.protocol)}))?"".concat(e,":").concat(t):function(e,t,r,n){if(null!=n&&!1===n.assumeHttp)return"tcp://".concat(e,":").concat(t);var a="tcp",i=":".concat(t);return"tcp"===r[r.length-1].protocol&&(a="443"===t?"https":"http",i="443"===t||"80"===t?"":i),"".concat(a,"://").concat(e).concat(i)}(e,t,n,a)},udp:function(e,t){return"udp://".concat(e,":").concat(t)},dnsaddr:W1,dns4:W1,dns6:W1,ipfs:function(e,t){return"".concat(e,"/ipfs/").concat(t)},p2p:function(e,t){return"".concat(e,"/p2p/").concat(t)},http:function(e){return"http://".concat(e)},https:function(e){return"https://".concat(e)},ws:function(e){return"ws://".concat(e)},wss:function(e){return"wss://".concat(e)},"p2p-websocket-star":function(e){return"".concat(e,"/p2p-websocket-star")},"p2p-webrtc-star":function(e){return"".concat(e,"/p2p-webrtc-star")},"p2p-webrtc-direct":function(e){return"".concat(e,"/p2p-webrtc-direct")}};function Y1(e,t){var r=new H1(e),n=r.toString().split("/").slice(1);return r.tuples().map((function(e){var t,r;return{protocol:null!==(t=n.shift())&&void 0!==t?t:"",content:null!=e[1]&&null!==(r=n.shift())&&void 0!==r?r:""}})).reduce((function(e,r,n,a){var i=G1[r.protocol];if(null==i)throw new Error("Unsupported protocol ".concat(r.protocol));return i(e,r.content,n,a,t)}),"")}function Q1(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got ".concat(typeof e));for(var t=(e=(0,kn.Z)(e)).length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=[e[r],e[t]];e[t]=n[0],e[r]=n[1]}return e}var J1=ud("ipfs:preload"),X1=new(zI.default?zI.default:zI)({concurrency:4});function $1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return J1(e),X1.add(Zh(Fh().mark((function r(){var n,a,i;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ZI.post(e,{signal:t.signal});case 2:n=r.sent,a=n.body.getReader(),r.prev=4;case 5:return r.next=8,a.read();case 8:if(i=r.sent,!i.done){r.next=12;break}return r.abrupt("return");case 12:r.next=5;break;case 14:return r.prev=14,a.releaseLock(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[4,,14,17]])}))))}var e0=ud("ipfs:preload");function t0(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.enabled=Boolean(e.enabled),e.addresses=e.addresses||[],e.cache=e.cache||1e3,!e.enabled||!e.addresses.length){e0("preload disabled");return Object.assign((function(){}),{start:function(){},stop:function(){}})}var t=!0,r=[],n=e.addresses.map((function(e){return Y1(e)})),a=tI(e.cache),i=function(){var e=Zh(Fh().mark((function e(i){var o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=3;break}throw new Error("preload ".concat(i," but preloader is not started"));case 3:if(o=i.toString(),!a.has(o)){e.next=6;break}return e.abrupt("return");case 6:a.set(o,!0),s=Q1(n),u=!1,c=Date.now(),l=(0,zn.Z)(s),e.prev=11,p=Fh().mark((function e(){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.value,!t){e.next=3;break}throw new Error("preload aborted for ".concat(o));case 3:return e.prev=3,a=new AbortController,r=r.concat(a),e.next=8,$1("".concat(n,"/api/v0/refs?r=true&arg=").concat(encodeURIComponent(o)),{signal:a.signal});case 8:u=!0,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),"aborted"!==e.t0.type&&e0.error(e.t0);case 14:return e.prev=14,r=r.filter((function(e){return e!==a})),e.finish(14);case 17:if(!u){e.next=19;break}return e.abrupt("return","break");case 19:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})),l.s();case 14:if((f=l.n()).done){e.next=21;break}return e.delegateYield(p(),"t0",16);case 16:if("break"!==e.t0){e.next=19;break}return e.abrupt("break",21);case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(11),l.e(e.t1);case 26:return e.prev=26,l.f(),e.finish(26);case 29:e0("".concat(u?"":"un","successfully preloaded ").concat(o," in ").concat(Date.now()-c,"ms")),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),e0.error(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,32],[11,23,26,29]])})));return function(t){return e.apply(this,arguments)}}();return i.start=function(){t=!1},i.stop=function(){t=!0,e0("aborting ".concat(r.length," pending preload request(s)")),r.forEach((function(e){return e.abort()})),r=[]},i}var r0=ud("ipfs:mfs-preload");var n0=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="TimeoutError",n}return Sn(r)}(On(Error)),a0=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).name="AbortError",n.message=e,n}return Sn(r)}(On(Error)),i0=function(e){return void 0===globalThis.DOMException?new a0(e):new DOMException(e)},o0=function(e){var t=void 0===e.reason?i0("This operation was aborted."):e.reason;return t instanceof Error?t:i0(t)};function s0(e,t){var r,n=t.milliseconds,a=t.fallback,i=t.message,o=t.customTimers,s=void 0===o?{setTimeout:setTimeout,clearTimeout:clearTimeout}:o,u=new Promise((function(o,u){if("number"!==typeof n||1!==Math.sign(n))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(n,"`"));if(n!==Number.POSITIVE_INFINITY){if(t.signal){var c=t.signal;c.aborted&&u(o0(c)),c.addEventListener("abort",(function(){u(o0(c))}))}var l=new n0;r=s.setTimeout.call(void 0,(function(){if(a)try{o(a())}catch(t){u(t)}else"function"===typeof e.cancel&&e.cancel(),!1===i?o():i instanceof Error?u(i):(l.message=null!==i&&void 0!==i?i:"Promise timed out after ".concat(n," milliseconds"),u(l))}),n),Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=o,t.next=4,e;case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),u(t.t2);case 11:return t.prev=11,s.clearTimeout.call(void 0,r),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}else o(e)}));return u.clear=function(){s.clearTimeout.call(void 0,r),r=void 0},u}var u0="lock:worker:request-read",c0="lock:worker:release-read",l0="lock:master:grant-read",f0="lock:worker:request-write",p0="lock:worker:release-write",h0="lock:master:grant-write",d0={},v0=function e(t){t.addEventListener("message",(function(r){e.dispatchEvent("message",t,r)})),null!=t.port&&t.port.addEventListener("message",(function(r){e.dispatchEvent("message",t,r)}))};v0.addEventListener=function(e,t){null==d0[e]&&(d0[e]=[]),d0[e].push(t)},v0.removeEventListener=function(e,t){null!=d0[e]&&(d0[e]=d0[e].filter((function(e){return e===t})))},v0.dispatchEvent=function(e,t,r){null!=d0[e]&&d0[e].forEach((function(e){return e(t,r)}))};var y0,b0=v0,g0=function(e,t,r,n,a){return function(i,o){if(o.data.type===r){var s={type:o.data.type,name:o.data.name,identifier:o.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:s.name,handler:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.postMessage({type:a,name:s.name,identifier:s.identifier}),e.next=3,new Promise((function(e){i.addEventListener("message",(function t(r){if(null!=r&&null!=r.data){var a=r.data.type,o=(r.data.name,r.data.identifier);a===n&&o===s.identifier&&(i.removeEventListener("message",t),e())}}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))}}},m0=function(e,t,r,n){return Zh(Fh().mark((function a(){var i;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=rT(),globalThis.postMessage({type:t,identifier:i,name:e}),a.next=4,new Promise((function(t){globalThis.addEventListener("message",(function a(o){if(null!=o&&null!=o.data){var s=o.data.type,u=o.data.identifier;s===r&&u===i&&(globalThis.removeEventListener("message",a),t((function(){globalThis.postMessage({type:n,identifier:i,name:e})})))}}))}));case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}}),a)})))},w0={singleProcess:!1},k0=function(e){if(e=Object.assign({},w0,e),Boolean(globalThis.document)||e.singleProcess){var t=new EventTarget;return b0.addEventListener("message",g0(t,"requestReadLock",u0,c0,l0)),b0.addEventListener("message",g0(t,"requestWriteLock",f0,p0,h0)),t}return{isWorker:!0,readLock:function(e){return m0(e,u0,l0,c0)},writeLock:function(e){return m0(e,f0,h0,p0)}}},x0={};function _0(e,t){return E0.apply(this,arguments)}function E0(){return E0=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(e){n=e})),t.add(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s0(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){n((function(){e()}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))(),{milliseconds:r.timeout});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),E0.apply(this,arguments)}var S0,A0=function(e,t){if(!0===y0.isWorker)return{readLock:y0.readLock(e,t),writeLock:y0.writeLock(e,t)};var r,n=new zI({concurrency:1});return{readLock:function(){return Zh(Fh().mark((function e(){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r){e.next=4;break}return e.next=3,_0(r,t);case 3:case 10:return e.abrupt("return",e.sent);case 4:return r=new zI({concurrency:t.concurrency,autoStart:!1}),a=r,i=_0(r,t),n.add(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.start(),e.next=3,a.onIdle().then((function(){r===a&&(r=null)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),e.next=10,i;case 11:case"end":return e.stop()}}),e)})))()},writeLock:function(){return Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,_0(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()}}},C0={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function T0(e){var t=Object.assign({},C0,e);return null==y0&&!0!==(y0=k0(t)).isWorker&&(y0.addEventListener("requestReadLock",(function(e){null!=x0[e.data.name]&&x0[e.data.name].readLock().then(function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.data.handler().finally((function(){return r()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),y0.addEventListener("requestWriteLock",function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=x0[t.data.name]){e.next=2;break}return e.abrupt("return");case 2:x0[t.data.name].writeLock().then(function(){var e=Zh(Fh().mark((function e(r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data.handler().finally((function(){return r()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),null==x0[t.name]&&(x0[t.name]=A0(t.name,t)),x0[t.name]}function R0(){if(S0)return S0;var e=T0({singleProcess:arguments.length>0&&void 0!==arguments[0]&&arguments[0]});return S0={readLock:function(t){return Zh(Fh().mark((function r(){var n,a,i,o,s=arguments;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.readLock();case 2:for(n=r.sent,r.prev=3,a=s.length,i=new Array(a),o=0;o<a;o++)i[o]=s[o];return r.next=7,t.apply(null,i);case 7:return r.abrupt("return",r.sent);case 8:return r.prev=8,n(),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[3,,8,11]])})))},writeLock:function(t){return Zh(Fh().mark((function r(){var n,a,i,o,s=arguments;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.writeLock();case 2:for(n=r.sent,r.prev=3,a=s.length,i=new Array(a),o=0;o<a;o++)i[o]=s[o];return r.next=7,t.apply(null,i);case 7:return r.abrupt("return",r.sent);case 8:return r.prev=8,n(),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[3,,8,11]])})))}},S0}var I0=ud("ipfs:mfs:utils:with-mfs-root");function P0(e,t){return D0.apply(this,arguments)}function D0(){return D0=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&r.signal&&r.signal.aborted)){e.next=2;break}throw cd(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 2:return e.next=4,t.repo.datastore.open();case 4:return e.prev=4,e.next=7,t.repo.datastore.get(HR);case 7:a=e.sent,n=bv.decode(a),e.next=27;break;case 11:if(e.prev=11,e.t0=e.catch(4),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:return I0("Creating new MFS root"),i=ty({Data:new _d({type:"directory"}).marshal(),Links:[]}),e.next=19,Kg.digest(i);case 19:return o=e.sent,n=bv.createV0(o),e.next=23,t.repo.blocks.put(n,i);case 23:if(!(r&&r.signal&&r.signal.aborted)){e.next=25;break}throw cd(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 25:return e.next=27,t.repo.datastore.put(HR,n.bytes);case 27:return I0("Loaded MFS root /ipfs/".concat(n)),e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,null,[[4,11]])}))),D0.apply(this,arguments)}function N0(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}var O0="ipfs",L0=function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P0(t,n);case 2:if(a=e.sent,i={entryType:"file"},o="",(o=(o=(o=bv.asCID(r)?"/ipfs/".concat(r):r.toString()).trim()).replace(/(\/\/+)/g,"/")).endsWith("/")&&o.length>1&&(o=o.substring(0,o.length-1)),o){e.next=11;break}throw cd(new Error("paths must not be empty"),"ERR_NO_PATH");case 11:if("/"===o.substring(0,1)){e.next=13;break}throw cd(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");case 13:return"/"===o.substring(o.length-1)&&(o=o.substring(0,o.length-1)),(s=N0(o))[0]===O0?(u=2===s.length?"/".concat(s.join("/")):"/".concat(s.slice(0,s.length-1).join("/")),i={type:"ipfs",depth:s.length-2,entryType:"file",mfsPath:"/".concat(s.join("/")),mfsDirectory:u,parts:s,path:"/".concat(s.join("/")),name:s[s.length-1]}):(c="/".concat(O0,"/").concat(a).concat(s.length?"/"+s.join("/"):""),l="/".concat(O0,"/").concat(a,"/").concat(s.slice(0,s.length-1).join("/")),i={type:"mfs",depth:s.length,entryType:"file",mfsDirectory:l,mfsPath:c,parts:s,path:"/".concat(s.join("/")),name:s[s.length-1]}),f="mfs"===i.type?i.mfsPath:i.path,e.prev=17,e.next=20,EK(f,t.repo.blocks,n);case 20:p=e.sent,i.cid=p.cid,i.mfsPath="/ipfs/".concat(p.path),i.entryType=p.type,i.content=p.content,"file"!==i.entryType&&"directory"!==i.entryType||"file"!==p.type&&"directory"!==p.type||(i.unixfs=p.unixfs),e.next=32;break;case 28:if(e.prev=28,e.t0=e.catch(17),"ERR_NOT_FOUND"===e.t0.code){e.next=32;break}throw e.t0;case 32:return i.exists=Boolean(i.cid),e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,null,[[17,28]])})));return function(t,r,n){return e.apply(this,arguments)}}(),B0=Hh.bind({ignoreUndefined:!0}),M0=ud("ipfs:mfs:stat"),U0={withLocal:!1};function j0(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=B0(U0,n=l.length>1&&void 0!==l[1]?l[1]:{}),M0("Fetching stats for ".concat(r)),t.next=5,L0(e,r,n);case 5:return a=t.sent,i=a.type,o=a.cid,s=a.mfsPath,u="ipfs"===i&&o?o:s,t.prev=10,t.next=13,EK(u,e.repo.blocks);case 13:c=t.sent,t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(10),"ERR_NOT_FOUND"!==t.t0.code){t.next=20;break}throw cd(new Error("".concat(r," does not exist")),"ERR_NOT_FOUND");case 20:throw t.t0;case 21:if(F0[c.type]){t.next=23;break}throw new Error("Cannot stat codec ".concat(c.cid.code));case 23:return t.abrupt("return",F0[c.type](c));case 24:case"end":return t.stop()}}),t,null,[[10,16]])}))),t.apply(this,arguments)}return ZR((function(e){return t.apply(this,arguments)}))}var F0={raw:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}},file:function(e){var t={cid:e.cid,type:"file",size:e.unixfs.fileSize(),cumulativeSize:ty(e.node).length+(e.node.Links||[]).reduce((function(e,t){return e+(t.Tsize||0)}),0),blocks:e.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},directory:function(e){var t={cid:e.cid,type:"directory",size:0,cumulativeSize:ty(e.node).length+(e.node.Links||[]).reduce((function(e,t){return e+(t.Tsize||0)}),0),blocks:e.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},object:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}},identity:function(e){return{cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}}},z0=ud("ipfs:mfs:utils:to-trail");function Z0(e,t){return q0.apply(this,arguments)}function q0(){return(q0=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z0("Creating trail for path ".concat(r)),n=[],a=!1,i=!1,e.prev=4,s=xm(xK(r,t.repo.blocks));case 6:return e.next=8,s.next();case 8:if(!(a=!(u=e.sent).done)){e.next=14;break}c=u.value,n.push({name:c.name,cid:c.cid,size:c.size,type:c.type});case 11:a=!1,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),i=!0,o=e.t0;case 20:if(e.prev=20,e.prev=21,!a||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[4,16,20,30],[21,,25,29]])})))).apply(this,arguments)}var V0=function(){var e=Zh(Fh().mark((function e(t,n,a){var i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.codec||(a.codec=r),a.hasher||(a.hasher=Kg),void 0===a.cidVersion&&(a.cidVersion=1),a.codec===r&&a.hasher!==Kg&&(a.cidVersion=1),e.next=6,a.hasher.digest(t);case 6:if(i=e.sent,o=bv.create(a.cidVersion,a.codec.code,i),a.onlyHash){e.next=11;break}return e.next=11,n.put(o,t,{signal:a.signal});case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),K0=Uz.code;function H0(e){return W0.apply(this,arguments)}function W0(){return W0=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uz.encode(t);case 2:return e.abrupt("return",e.sent.slice(0,8).reverse());case 3:case"end":return e.stop()}}),e)}))),W0.apply(this,arguments)}var G0=function(){function e(t,r){xn(this,e),this.options=r||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}return Sn(e,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return Promise.resolve(this)}},{key:"eachChildSeries",value:function(){return Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},{key:"flush",value:function(e){return Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}]),e}(),Y0=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this,e,n))._bucket=vV({hashFn:H0,bits:8}),a}return Sn(r,[{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._bucket.put(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(e){return this._bucket.get(e)}},{key:"childCount",value:function(){return this._bucket.leafCount()}},{key:"directChildrenCount",value:function(){return this._bucket.childrenCount()}},{key:"onlyChild",value:function(){return this._bucket.onlyChild()}},{key:"eachChildSeries",value:function(){var e=this;return Kh(Fh().mark((function t(){var r,n,a,i,o,s,u,c;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=xm(e._bucket.eachLeafSeries());case 4:return t.next=6,km(i.next());case 6:if(!(r=!(o=t.sent).done)){t.next=13;break}return s=o.value,u=s.key,c=s.value,t.next=10,{key:u,child:c};case 10:r=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),n=!0,a=t.t0;case 19:if(t.prev=19,t.prev=20,!r||null==i.return){t.next=24;break}return t.next=24,km(i.return());case 24:if(t.prev=24,!n){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"flush",value:function(e){var t=this;return Kh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(JD(xm(Q0(t._bucket,e,t,t.options))),"t0",1);case 1:case"end":return r.stop()}}),r)})))()}}]),r}(G0);function Q0(e,t,r,n){return J0.apply(this,arguments)}function J0(){return J0=Kh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T,R,I,P,D,N,O,L;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t._children,o=[],s=0,u=0;case 4:if(!(u<i.length)){e.next=97;break}if(c=i.get(u)){e.next=8;break}return e.abrupt("continue",94);case 8:if(l=u.toString(16).toUpperCase().padStart(2,"0"),!(c instanceof rV)){e.next=49;break}return f=void 0,p=!1,h=!1,e.prev=13,e.t0=xm,e.next=17,km(Q0(c,r,null,a));case 17:e.t1=e.sent,v=(0,e.t0)(e.t1);case 19:return e.next=21,km(v.next());case 21:if(!(p=!(y=e.sent).done)){e.next=27;break}b=y.value,f=b;case 24:p=!1,e.next=19;break;case 27:e.next=33;break;case 29:e.prev=29,e.t2=e.catch(13),h=!0,d=e.t2;case 33:if(e.prev=33,e.prev=34,!p||null==v.return){e.next=38;break}return e.next=38,km(v.return());case 38:if(e.prev=38,!h){e.next=41;break}throw d;case 41:return e.finish(38);case 42:return e.finish(33);case 43:if(f){e.next=45;break}throw new Error("Could not flush sharded directory, no subshard found");case 45:o.push({Name:l,Tsize:f.size,Hash:f.cid}),s+=f.size,e.next=94;break;case 49:if("function"!==typeof c.value.flush){e.next=87;break}g=c.value,m=void 0,w=!1,k=!1,e.prev=54,_=xm(g.flush(r));case 56:return e.next=58,km(_.next());case 58:if(!(w=!(E=e.sent).done)){e.next=66;break}return S=E.value,m=S,e.next=63,m;case 63:w=!1,e.next=56;break;case 66:e.next=72;break;case 68:e.prev=68,e.t3=e.catch(54),k=!0,x=e.t3;case 72:if(e.prev=72,e.prev=73,!w||null==_.return){e.next=77;break}return e.next=77,km(_.return());case 77:if(e.prev=77,!k){e.next=80;break}throw x;case 80:return e.finish(77);case 81:return e.finish(72);case 82:A=l+c.key,o.push({Name:A,Tsize:m.size,Hash:m.cid}),s+=m.size,e.next=94;break;case 87:if((C=c.value).cid){e.next=90;break}return e.abrupt("continue",94);case 90:T=l+c.key,R=C.size,o.push({Name:T,Tsize:R,Hash:C.cid}),s+=R;case 94:u++,e.next=4;break;case 97:return I=Uint8Array.from(i.bitField().reverse()),P=new _d({type:"hamt-sharded-directory",data:I,fanout:t.tableSize(),hashType:K0,mtime:n&&n.mtime,mode:n&&n.mode}),D={Data:P.marshal(),Links:o},N=ty(Yv(D)),e.next=103,km(V0(N,r,a));case 103:return O=e.sent,L=N.length+s,e.next=107,{cid:O,node:D,size:L};case 107:case"end":return e.stop()}}),e,null,[[13,29,33,43],[34,,38,42],[54,68,72,82],[73,,77,81]])}))),J0.apply(this,arguments)}var X0=ud("ipfs:mfs:core:utils:hamt-utils"),$0=function(){var e=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.parent.Data){e.next=2;break}throw new Error("Could not update HAMT directory because parent had no data");case 2:return i=Uint8Array.from(n._children.bitField().reverse()),o=_d.unmarshal(a.parent.Data),s=new _d({type:"hamt-sharded-directory",data:i,fanout:n.tableSize(),hashType:K0,mode:o.mode,mtime:o.mtime}),e.next=7,t.hashers.getHasher(a.hashAlg);case 7:return u=e.sent,c={Data:s.marshal(),Links:r.sort((function(e,t){return(e.Name||"").localeCompare(t.Name||"")}))},l=ty(c),e.next=12,u.digest(l);case 12:if(f=e.sent,p=bv.create(a.cidVersion,ey,f),!a.flush){e.next=17;break}return e.next=17,t.repo.blocks.put(p,l);case 17:return e.abrupt("return",{node:c,cid:p,size:r.reduce((function(e,t){return e+(t.Tsize||0)}),l.length)});case 18:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),e2=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i){var o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new rV({hash:n._options.hash,bits:n._options.bits},a,i),a._putObjectAt(i,o),e.next=4,r2(t,r,o,n);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),t2=function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vV({hashFn:H0,bits:8}),e.next=3,Promise.all(t.map(function(){var e=Zh(Fh().mark((function e(t){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(n=t.Name||"").length){e.next=6;break}return a=parseInt(n,16),i=new rV({hash:r._options.hash,bits:r._options.bits},r,a),r._putObjectAt(a,i),e.abrupt("return",Promise.resolve());case 6:return e.abrupt("return",r.put(n.substring(2),{size:t.Tsize,cid:t.Hash}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r2=function(){var e=Zh(Fh().mark((function e(t,r,n,a){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map(function(){var e=Zh(Fh().mark((function e(r){var i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(i=r.Name||"").length){e.next=13;break}return X0("Populating sub bucket",i),o=parseInt(i,16),e.next=6,t.repo.blocks.get(r.Hash);case 6:return s=e.sent,u=ry(s),c=new rV({hash:a._options.hash,bits:a._options.bits},n,o),n._putObjectAt(o,c),e.next=12,r2(t,u.Links,c,a);case 12:return e.abrupt("return",Promise.resolve());case 13:return e.abrupt("return",a.put(i.substring(2),{size:r.Tsize,cid:r.Hash}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),n2=function(e){return e.toString(16).toUpperCase().padStart(2,"0").substring(0,2)},a2=function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t2(n.Links);case 2:return a=e.sent,e.next=5,a._findNewBucketAndPos(r);case 5:for(i=e.sent,o=[{bucket:i.bucket,prefix:n2(i.pos)}],s=i.bucket;s!==a;)o.push({bucket:s,prefix:n2(s._posAtParent)}),s=s._parent;o.reverse(),o[0].node=n,u=Fh().mark((function e(){var n,i,s,u,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=o[c]).node){e.next=3;break}throw new Error("Could not generate HAMT path");case 3:if(i=n.node.Links.filter((function(e){return(e.Name||"").substring(0,2)===n.prefix})).pop()){e.next=7;break}return X0("Link ".concat(n.prefix).concat(r," will be added")),e.abrupt("return","continue");case 7:if(i.Name!=="".concat(n.prefix).concat(r)){e.next=10;break}return X0("Link ".concat(n.prefix).concat(r," will be replaced")),e.abrupt("return","continue");case 10:return X0("Found subshard ".concat(n.prefix)),e.next=13,t.repo.blocks.get(i.Hash);case 13:if(s=e.sent,u=ry(s),o[c+1]){e.next=24;break}return X0("Loaded new subshard ".concat(n.prefix)),e.next=19,e2(t,u.Links,a,n.bucket,parseInt(n.prefix,16));case 19:return e.next=21,a._findNewBucketAndPos(r);case 21:return l=e.sent,o.push({bucket:l.bucket,prefix:n2(l.pos),node:u}),e.abrupt("return","continue");case 24:return f=o[c+1],e.next=27,r2(t,u.Links,f.bucket,a);case 27:f.node=u;case 28:case"end":return e.stop()}}),e)})),c=0;case 13:if(!(c<o.length)){e.next=21;break}return e.delegateYield(u(),"t0",15);case 15:if("continue"!==e.t0){e.next=18;break}return e.abrupt("continue",18);case 18:c++,e.next=13;break;case 21:return e.next=23,a.put(r,!0);case 23:return o.reverse(),e.abrupt("return",{rootBucket:a,path:o});case 25:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),i2=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Y0({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:(n=s.length>2&&void 0!==s[2]?s[2]:{}).mtime,mode:n.mode},n),i=0;case 3:if(!(i<r.length)){e.next=9;break}return e.next=6,a._bucket.put(r[i].name,{size:r[i].size,cid:r[i].cid});case 6:i++,e.next=3;break;case 9:return e.next=11,QD(a.flush(t.repo.blocks));case 11:if(o=e.sent){e.next=14;break}throw new Error("Flushing shard yielded no result");case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),o2=ud("ipfs:mfs:core:utils:add-link");function s2(e,t){return u2.apply(this,arguments)}function u2(){return(u2=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.parent,!r.parentCid){e.next=12;break}if(null!==(a=bv.asCID(r.parentCid))){e.next=5;break}throw cd(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");case 5:if(a.code===ey){e.next=7;break}throw cd(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");case 7:return o2("Loading parent node ".concat(a)),e.next=10,t.repo.blocks.get(a);case 10:i=e.sent,n=ry(i);case 12:if(n){e.next=14;break}throw cd(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");case 14:if(r.cid){e.next=16;break}throw cd(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");case 16:if(r.name){e.next=18;break}throw cd(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");case 18:if(r.size||0===r.size){e.next=20;break}throw cd(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");case 20:if(n.Data){e.next=22;break}throw cd(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");case 22:if("hamt-sharded-directory"!==(o=_d.unmarshal(n.Data)).type){e.next=26;break}return o2("Adding link to sharded directory"),e.abrupt("return",f2(t,So(So({},r),{},{parent:n})));case 26:if(!(n.Links.length>=r.shardSplitThreshold)){e.next=29;break}return o2("Converting directory to sharded directory"),e.abrupt("return",c2(t,So(So({},r),{},{parent:n,mtime:o.mtime,mode:o.mode})));case 29:return o2("Adding ".concat(r.name," (").concat(r.cid,") to regular directory")),e.abrupt("return",l2(t,So(So({},r),{},{parent:n})));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c2=function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i2(t,r.parent.Links.map((function(e){return{name:e.Name||"",size:e.Tsize||0,cid:e.Hash}})).concat({name:r.name,size:r.size,cid:r.cid}),r);case 2:return n=e.sent,o2("Converted directory to sharded directory ".concat(n.cid)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l2=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=r.parent.Links.filter((function(e){return e.Name!==r.name}))).push({Name:r.name,Tsize:r.size,Hash:r.cid}),r.parent.Data){e.next=4;break}throw cd(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");case 4:return(a=_d.unmarshal(r.parent.Data)).mtime?(o=Date.now(),s=Math.floor(o/1e3),a.mtime={secs:s,nsecs:1e3*(o-1e3*s)},i=a.marshal()):i=r.parent.Data,r.parent=Yv({Data:i,Links:n}),e.next=9,t.hashers.getHasher(r.hashAlg);case 9:return u=e.sent,c=ty(r.parent),e.next=13,u.digest(c);case 13:if(l=e.sent,f=bv.create(r.cidVersion,ey,l),!r.flush){e.next=18;break}return e.next=18,t.repo.blocks.put(f,c);case 18:return e.abrupt("return",{node:r.parent,cid:f,size:c.length});case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),f2=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p2(t,r);case 2:return n=e.sent,a=n.shard,i=n.path,e.next=7,QD(a.flush(t.repo.blocks));case 7:if(o=e.sent){e.next=10;break}throw new Error("No result from flushing shard");case 10:return e.next=12,t.repo.blocks.get(o.cid);case 12:if(s=e.sent,u=ry(s),c=r.parent.Links.filter((function(e){return(e.Name||"").substring(0,2)!==i[0].prefix})),l=u.Links.find((function(e){return(e.Name||"").substring(0,2)===i[0].prefix}))){e.next=18;break}throw new Error("No link found with prefix ".concat(i[0].prefix));case 18:return c.push(l),e.abrupt("return",$0(t,c,i[0].bucket,r));case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),p2=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:r.name,cid:r.cid,size:r.size},r.parent.Data){e.next=3;break}throw cd(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");case 3:return e.next=5,t2(r.parent.Links);case 5:return a=e.sent,i=_d.unmarshal(r.parent.Data),(o=new Y0({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:i.mode},r))._bucket=a,i.mtime&&(o.mtime={secs:Math.round(Date.now()/1e3)}),e.next=12,a._findNewBucketAndPos(n.name);case 12:s=e.sent,(u=h2(s))[0].node=r.parent,c=0,l=Fh().mark((function e(){var r,i,o,s,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u[c],c++,i=r.node){e.next=5;break}throw new Error("Segment had no node");case 5:if(o=i.Links.find((function(e){return(e.Name||"").substring(0,2)===r.prefix}))){e.next=10;break}return o2("Link ".concat(r.prefix).concat(n.name," will be added")),c=u.length,e.abrupt("return","break");case 10:if(o.Name!=="".concat(r.prefix).concat(n.name)){e.next=14;break}return o2("Link ".concat(r.prefix).concat(n.name," will be replaced")),c=u.length,e.abrupt("return","break");case 14:if(!((o.Name||"").length>2)){e.next=18;break}return o2("Link ".concat(o.Name," ").concat(o.Hash," will be replaced with a subshard")),c=u.length,e.abrupt("return","break");case 18:return o2("Found subshard ".concat(r.prefix)),e.next=21,t.repo.blocks.get(o.Hash);case 21:if(s=e.sent,l=ry(s),u[c]){e.next=32;break}return o2("Loaded new subshard ".concat(r.prefix)),e.next=27,e2(t,l.Links,a,r.bucket,parseInt(r.prefix,16));case 27:return e.next=29,a._findNewBucketAndPos(n.name);case 29:return f=e.sent,u.push({bucket:f.bucket,prefix:n2(f.pos),node:l}),e.abrupt("return","break");case 32:return p=u[c],e.next=35,r2(t,l.Links,p.bucket,a);case 35:p.node=l;case 36:case"end":return e.stop()}}),e)}));case 17:if(!(c<u.length)){e.next=24;break}return e.delegateYield(l(),"t0",19);case 19:if("break"!==e.t0){e.next=22;break}return e.abrupt("break",24);case 22:e.next=17;break;case 24:return e.next=26,o._bucket.put(n.name,{size:n.size,cid:n.cid});case 26:return e.abrupt("return",{shard:o,path:u});case 27:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h2=function(e){for(var t=[{bucket:e.bucket,prefix:n2(e.pos)}],r=e.bucket._parent,n=e.bucket._posAtParent;r;)t.push({bucket:r,prefix:n2(n)}),n=r._posAtParent,r=r._parent;return t.reverse(),t},d2=ud("ipfs:mfs:utils:update-tree"),v2={shardSplitThreshold:1e3};function y2(e,t,r){return b2.apply(this,arguments)}function b2(){return(b2=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p,h,d,v,y;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.assign({},v2,n),d2("Trail",r),r=r.slice().reverse(),a=0,o=!1,s=!1,e.prev=6,c=xm(t.repo.blocks.getMany(r.map((function(e){return e.cid}))));case 8:return e.next=10,c.next();case 10:if(!(o=!(l=e.sent).done)){e.next=26;break}if(f=l.value,p=ry(f),h=r[a].cid,d=r[a].name,a++,i){e.next=19;break}return i={cid:h,name:d,size:f.length},e.abrupt("continue",23);case 19:return e.next=21,s2(t,{parent:p,name:i.name,cid:i.cid,size:i.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});case 21:v=e.sent,i={cid:v.cid,name:d,size:v.size};case 23:o=!1,e.next=8;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(6),s=!0,u=e.t0;case 32:if(e.prev=32,e.prev=33,!o||null==c.return){e.next=37;break}return e.next=37,c.return();case 37:if(e.prev=37,!s){e.next=40;break}throw u;case 40:return e.finish(37);case 41:return e.finish(32);case 42:return y=i.cid,d2("Final CID ".concat(y)),e.abrupt("return",y);case 45:case"end":return e.stop()}}),e,null,[[6,28,32,42],[33,,37,41]])})))).apply(this,arguments)}var g2=ud("ipfs:mfs:utils:update-mfs-root");function m2(e,t,r){return w2.apply(this,arguments)}function w2(){return(w2=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.signal&&n.signal.aborted)){e.next=2;break}throw cd(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});case 2:return g2("New MFS root will be ".concat(r)),e.next=5,t.repo.datastore.put(HR,r.bytes);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k2(e,t,r){return x2.apply(this,arguments)}function x2(){return x2=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new _d({type:r,mode:n.mode,mtime:n.mtime}),e.next=3,t.hashers.getHasher(n.hashAlg);case 3:return i=e.sent,o={Data:a.marshal(),Links:[]},s=ty(o),e.next=8,i.digest(s);case 8:if(u=e.sent,c=bv.create(n.cidVersion,ey,u),!n.flush){e.next=13;break}return e.next=13,t.repo.blocks.put(c,s);case 13:return e.abrupt("return",{cid:c,node:o});case 14:case"end":return e.stop()}}),e)}))),x2.apply(this,arguments)}var _2=Hh.bind({ignoreUndefined:!0}),E2=ud("ipfs:mfs:mkdir"),S2={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function A2(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l,f,p,h=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_2(S2,h.length>1&&void 0!==h[1]?h[1]:{}),r){t.next=4;break}throw new Error("no path given to Mkdir");case 4:if("/"!==(r=r.trim())){t.next=9;break}if(!n.parents){t.next=8;break}return t.abrupt("return");case 8:throw cd(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH");case 9:if("/"===r.substring(0,1)){t.next=11;break}throw cd(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");case 11:if(E2("Creating ".concat(r)),"ipfs"!==(a=N0(r))[0]){t.next=15;break}throw cd(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");case 15:return t.next=17,P0(e,n);case 17:return i=t.sent,s=[],t.next=21,k2(e,"directory",n);case 21:u=t.sent,c=0;case 23:if(!(c<=a.length)){t.next=52;break}return l=a.slice(0,c),f="/ipfs/".concat(i,"/").concat(l.join("/")),t.prev=26,t.next=29,EK(f,e.repo.blocks);case 29:if("file"===(o=t.sent).type||"directory"===o.type){t.next=32;break}throw cd(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 32:if(c!==a.length){t.next=36;break}if(!n.parents){t.next=35;break}return t.abrupt("return");case 35:throw cd(new Error("file already exists"),"ERR_ALREADY_EXISTS");case 36:s.push({name:o.name,cid:o.cid}),t.next=49;break;case 39:if(t.prev=39,t.t0=t.catch(26),"ERR_NOT_FOUND"!==t.t0.code){t.next=48;break}if(!(c<a.length)||n.parents){t.next=44;break}throw cd(new Error("Intermediate directory path ".concat(f," does not exist, use the -p flag to create it")),"ERR_NOT_FOUND");case 44:return t.next=46,C2(e,l[l.length-1],u,s[s.length-1],s,n);case 46:t.next=49;break;case 48:throw t.t0;case 49:c++,t.next=23;break;case 52:return t.next=54,y2(e,s,n);case 54:return p=t.sent,t.next=57,m2(e,p,n);case 57:case"end":return t.stop()}}),t,null,[[26,39]])}))),t.apply(this,arguments)}return ZR((function(e){return t.apply(this,arguments)}))}var C2=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i,o){var s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E2("Adding empty dir called ".concat(r," to ").concat(a.cid)),e.next=3,s2(t,{parent:a.node,parentCid:a.cid,size:0,cid:n.cid,name:r,hashAlg:o.hashAlg,cidVersion:o.cidVersion,flush:o.flush,shardSplitThreshold:o.shardSplitThreshold});case 3:s=e.sent,i[i.length-1].cid=s.cid,i.push({name:r,cid:n.cid});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o){return e.apply(this,arguments)}}(),T2=Hh.bind({ignoreUndefined:!0}),R2=ud("ipfs:mfs:cp"),I2={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function P2(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u,c,l,f,p,h,d=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=T2(I2,d.length>2&&void 0!==d[2]?d[2]:{}),Array.isArray(r)||(r=[r]),t.next=5,Promise.all(r.map((function(t){return L0(e,t,a)})));case 5:return i=t.sent,t.next=8,L0(e,n,a);case 8:if(o=t.sent,i.length&&o){t.next=11;break}throw cd(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");case 11:if(s=i.find((function(e){return!e.exists})),!s){t.next=14;break}throw cd(new Error("".concat(s.path," does not exist")),"ERR_INVALID_PARAMS");case 14:if(u=D2(o),!o.exists){t.next=21;break}if(R2("Destination exists"),1!==i.length||u){t.next=19;break}throw cd(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS");case 19:t.next=50;break;case 21:if(R2("Destination does not exist"),!(i.length>1)){t.next=32;break}if(a.parents){t.next=25;break}throw cd(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");case 25:return t.next=27,A2(e)(o.path,a);case 27:return t.next=29,L0(e,o.path,a);case 29:o=t.sent,t.next=50;break;case 32:if(!(o.parts.length>1)){t.next=50;break}return c="/".concat(o.parts.slice(0,-1).join("/")),t.prev=34,t.next=37,j0(e)(c,a);case 37:t.next=50;break;case 39:if(t.prev=39,t.t0=t.catch(34),"ERR_NOT_FOUND"===t.t0.code){t.next=43;break}throw t.t0;case 43:if(a.parents){t.next=45;break}throw cd(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");case 45:return t.next=47,A2(e)(c,a);case 47:return t.next=49,L0(e,o.path,a);case 49:o=t.sent;case 50:return l=D2(o)?o.mfsPath:o.mfsDirectory,t.next=53,Z0(e,l);case 53:if(f=t.sent,1!==i.length){t.next=61;break}if(p=i.pop()){t.next=58;break}throw cd(new Error("could not find source"),"ERR_INVALID_PARAMS");case 58:return h=u?p.name:o.name,R2("Only one source, copying to destination ".concat(u?"directory":"file"," ").concat(h)),t.abrupt("return",N2(e,p,h,f,a));case 61:return R2("Multiple sources, wrapping in a directory"),t.abrupt("return",O2(e,i,o,f,a));case 63:case"end":return t.stop()}}),t,null,[[34,39]])}))),t.apply(this,arguments)}return ZR((function(e,r){return t.apply(this,arguments)}))}var D2=function(e){return e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory")},N2=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i){var o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.pop()){e.next=3;break}throw cd(new Error("destination had no parent"),"ERR_INVALID_PARAMS");case 3:return e.next=5,L2(t,r,n,o,i);case 5:return o=e.sent,a.push(o),e.next=9,y2(t,a,i);case 9:return s=e.sent,e.next=12,m2(t,s,i);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),O2=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i){var o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<r.length)){e.next=9;break}return s=r[o],e.next=5,L2(t,s,s.name,n,i);case 5:n=e.sent;case 6:o++,e.next=1;break;case 9:return a[a.length-1]=n,e.next=12,y2(t,a,i);case 12:return u=e.sent,e.next=15,m2(t,u,i);case 15:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),L2=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i){var o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.repo.blocks.get(r.cid);case 2:return o=e.sent,e.next=5,s2(t,{parentCid:a.cid,size:o.length,cid:r.cid,name:n,hashAlg:i.hashAlg,cidVersion:i.cidVersion,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold});case 5:return s=e.sent,u=s.node,c=s.cid,l=s.size,a.node=u,a.cid=c,a.size=l,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),B2=ud("ipfs:mfs:core:utils:remove-link");function M2(e,t){return U2.apply(this,arguments)}function U2(){return(U2=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.parent,!r.parentCid){e.next=10;break}if(null!==(a=bv.asCID(r.parentCid))){e.next=5;break}throw cd(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");case 5:return B2("Loading parent node ".concat(a)),e.next=8,t.repo.blocks.get(a);case 8:i=e.sent,n=ry(i);case 10:if(n){e.next=12;break}throw cd(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");case 12:if(r.name){e.next=14;break}throw cd(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");case 14:if(n.Data){e.next=16;break}throw cd(new Error("Parent node had no data"),"ERR_INVALID_NODE");case 16:if("hamt-sharded-directory"!==_d.unmarshal(n.Data).type){e.next=20;break}return B2("Removing ".concat(r.name," from sharded directory")),e.abrupt("return",F2(t,So(So({},r),{},{parent:n})));case 20:return B2("Removing link ".concat(r.name," regular directory")),e.abrupt("return",j2(t,So(So({},r),{},{parent:n})));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j2=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.parent.Links=r.parent.Links.filter((function(e){return e.Name!==r.name})),e.next=3,ty(r.parent);case 3:return n=e.sent,e.next=6,t.hashers.getHasher(r.hashAlg);case 6:return a=e.sent,e.next=9,a.digest(n);case 9:return i=e.sent,o=bv.create(r.cidVersion,ey,i),e.next=13,t.repo.blocks.put(o,n);case 13:return B2("Updated regular directory ".concat(o)),e.abrupt("return",{node:r.parent,cid:o});case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),F2=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a2(t,r.name,r.parent);case 2:return n=e.sent,a=n.rootBucket,i=n.path,e.next=7,a.del(r.name);case 7:return e.next=9,z2(t,i,r.name,r);case 9:return o=e.sent,s=o.node,e.abrupt("return",$0(t,s.Links,a,r));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),z2=function(){var e=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h,d,v;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.pop()){e.next=3;break}throw cd(new Error("Could not find parent"),"EINVALIDPARENT");case 3:if(o=i.bucket,s=i.prefix,u=i.node){e.next=6;break}throw cd(new Error("Could not find parent"),"EINVALIDPARENT");case 6:if(c=u.Links.find((function(e){return(e.Name||"").substring(0,2)===s}))){e.next=9;break}throw cd(new Error("No link found with prefix ".concat(s," for file ").concat(n)),"ERR_NOT_FOUND");case 9:if(c.Name!=="".concat(s).concat(n)){e.next=15;break}return B2("Removing existing link ".concat(c.Name)),l=u.Links.filter((function(e){return e.Name!==c.Name})),e.next=14,o.del(n);case 14:return e.abrupt("return",$0(t,l,o,a));case 15:return B2("Descending into sub-shard ".concat(c.Name," for ").concat(s).concat(n)),e.next=18,z2(t,r,n,a);case 18:return f=e.sent,p=f.cid,h=f.size,d=s,1===f.node.Links.length&&(B2("Removing subshard for ".concat(s)),v=f.node.Links[0],d="".concat(s).concat((v.Name||"").substring(2)),p=v.Hash,h=v.Tsize||0),B2("Updating shard ".concat(s," with name ").concat(d)),e.abrupt("return",Z2(t,o,u,s,d,h,p,a));case 25:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Z2=function(e,t,r,n,a,i,o,s){var u=r.Links.filter((function(e){return e.Name!==n}));return u.push({Name:a,Tsize:i,Hash:o}),$0(e,u,t,s)},q2=Hh.bind({ignoreUndefined:!0}),V2={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function K2(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s,u=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=q2(V2,u.length>1&&void 0!==u[1]?u[1]:{}),Array.isArray(r)||(r=[r]),t.next=5,Promise.all(r.map((function(t){return L0(e,t,n)})));case 5:if((a=t.sent).length){t.next=8;break}throw cd(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");case 8:a.forEach((function(e){if("/"===e.path)throw cd(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")})),i=(0,zn.Z)(a),t.prev=10,i.s();case 12:if((o=i.n()).done){t.next=18;break}return s=o.value,t.next=16,H2(e,s.path,n);case 16:t.next=12;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),i.e(t.t0);case 23:return t.prev=23,i.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[10,20,23,26]])}))),t.apply(this,arguments)}return ZR((function(e){return t.apply(this,arguments)}))}var H2=function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L0(t,r,n);case 2:return a=e.sent,e.next=5,Z0(t,a.mfsPath);case 5:if(i=e.sent,o=i[i.length-1],i.pop(),s=i[i.length-1]){e.next=11;break}throw cd(new Error("".concat(r," does not exist")),"ERR_NOT_FOUND");case 11:if("directory"!==o.type||n.recursive){e.next=13;break}throw cd(new Error("".concat(r," is a directory, use -r to remove directories")),"ERR_WAS_DIR");case 13:return e.next=15,M2(t,{parentCid:s.cid,name:o.name,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});case 15:return u=e.sent,c=u.cid,s.cid=c,e.next=20,y2(t,i,n);case 20:return l=e.sent,e.next=23,m2(t,l,n);case 23:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),W2=Hh.bind({ignoreUndefined:!0}),G2=ud("ipfs:mfs:touch"),Y2={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function Q2(e,t,r){t||(t=0);var n=e.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!n)throw new Error("Invalid file mode: ".concat(e));var a=(0,wn.Z)(n,4),i=a[1],o=a[2],s=a[3];"a"!==i&&i||(i="ugo");var u=function(e,t,r){var n=0;return(e.includes("x")||e.includes("X")&&(r||1&t||8&t||64&t))&&(n+=1),e.includes("w")&&(n+=2),e.includes("r")&&(n+=4),n}(s,t,r);return u=function(e,t){var r=0;return e.includes("u")&&(r+=t<<6),e.includes("g")&&(r+=t<<3),e.includes("o")&&(r+=t),r}(i,u),u=function(e,t,r){return t.includes("t")&&(r+=parseInt("1000",8)),t.includes("s")&&(e.includes("u")&&(r+=parseInt("4000",8)),e.includes("g")&&(r+=parseInt("2000",8))),r}(i,s,u),"="===o?(i.includes("u")&&(t&=parseInt("7077",8),t|=u),i.includes("g")&&(t&=parseInt("7707",8),t|=u),i.includes("o")&&(t&=parseInt("7770",8),t|=u),t):"+"===o?u|t:"-"===o?u^t:t}function J2(e,t){if(e instanceof String||"string"===typeof e){var r="".concat(e);e=r.match(/^\d+$/g)?parseInt(r,8):0+r.split(",").reduce((function(e,r){return Q2(r,e,t.isDirectory())}),t.mode||0)}return e}var X2=Hh.bind({ignoreUndefined:!0}),$2={};var e3=Hh.bind({ignoreUndefined:!0}),t3={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};var r3=Hh.bind({ignoreUndefined:!0}),n3=ud("ipfs:mfs:touch"),a3={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};var i3=Hh.bind({ignoreUndefined:!0}),o3={offset:0,length:1/0};var s3=ud("ipfs:mfs:utils:to-async-iterator");function u3(e){if(!e)throw cd(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if(("string"===typeof e||e instanceof String)&&(s3("Content was a string"),e=mm(e.toString())),e.length)return s3("Content was array-like"),(0,oi.Z)({},Symbol.asyncIterator,Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t)})));if(e[Symbol.asyncIterator])return s3("Content was an async iterator"),e;if(e[Symbol.iterator])return s3("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob){s3("Content was an HTML5 Blob");var t=0,r={next:function(){return t>e.size?{done:!0}:new Promise((function(r,n){var a=e.slice(t,WR);t+=WR;var i=new global.FileReader;i.addEventListener("loadend",(function e(t){if(i.removeEventListener("loadend",e,!1),t.error)return n(t.error);r({done:!1,value:new Uint8Array(i.result)})})),i.readAsArrayBuffer(a)}))}};return(0,oi.Z)({},Symbol.asyncIterator,(function(){return r}))}throw cd(new Error("Don't know how to convert ".concat(e," into an async iterator")),"ERR_INVALID_PARAMS")}var c3=Hh.bind({ignoreUndefined:!0}),l3=ud("ipfs:mfs:write"),f3={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:function(e,t){},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};var p3=function(){var e=Zh(Fh().mark((function e(t,r,n,a,i){var o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h3(t,n,a,i);case 2:return o=e.sent,e.next=5,R0().writeLock(Zh(Fh().mark((function e(){var n,a,s,u,c,l,f,p,h,d;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N0(r),null!=(a=n.pop())){e.next=4;break}throw cd(new Error("source does not exist"),"ERR_NO_EXIST");case 4:return s=!1,e.prev=5,e.next=8,j0(t)("/".concat(n.join("/")),i);case 8:s=!0,e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(5),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:if(s){e.next=18;break}return e.next=18,A2(t)("/".concat(n.join("/")),i);case 18:return e.next=20,L0(t,r,i);case 20:return u=e.sent,e.next=23,Z0(t,u.mfsDirectory);case 23:if(c=e.sent,l=c[c.length-1]){e.next=27;break}throw cd(new Error("directory does not exist"),"ERR_NO_EXIST");case 27:if(l.type&&l.type.includes("directory")){e.next=29;break}throw cd(new Error("cannot write to ".concat(l.name,": Not a directory")),"ERR_NOT_A_DIRECTORY");case 29:return e.next=31,t.repo.blocks.get(l.cid);case 31:return f=e.sent,p=ry(f),e.next=35,s2(t,{parent:p,name:a,cid:o.cid,size:o.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,hashAlg:i.hashAlg,cidVersion:i.cidVersion});case 35:return h=e.sent,l.cid=h.cid,e.next=39,y2(t,c,i);case 39:return d=e.sent,e.next=42,m2(t,d,i);case 42:case"end":return e.stop()}}),e,null,[[5,11]])}))))();case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}(),h3=function(){var e=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.exists?l3("Overwriting file ".concat(n.cid," offset ").concat(a.offset," length ").concat(a.length)):l3("Writing file offset ".concat(a.offset," length ").concat(a.length)),i=[],a.offset>0&&(n.unixfs?(l3("Writing first ".concat(a.offset," bytes of original file")),i.push((function(){return n.content({offset:0,length:a.offset})})),n.unixfs.fileSize()<a.offset&&(o=a.offset-n.unixfs.fileSize(),l3("Writing zeros for extra ".concat(o," bytes")),i.push(v3(o)))):(l3("Writing zeros for first ".concat(a.offset," bytes")),i.push(v3(a.offset)))),i.push(d3(r,a.length)),s=b3(y3(i),(function(e){if(n.unixfs&&!a.truncate){var t=n.unixfs.fileSize();if(t>e)return l3("Writing last ".concat(t-e," of ").concat(t," bytes from original file starting at offset ").concat(e)),n.content({offset:e});l3("Not writing last bytes from original file")}return(0,oi.Z)({},Symbol.asyncIterator,Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))})),void 0!==a.mode&&null!==a.mode?u=kd(a.mode):n&&n.unixfs&&(u=n.unixfs.mode),null!=a.mtime?c=xd(a.mtime):n&&n.unixfs&&(c=n.unixfs.mtime),e.next=9,t.hashers.getHasher(a.hashAlg);case 9:return l=e.sent,e.next=12,QD(DV([{content:s,mode:u,mtime:c}],t.repo.blocks,{progress:a.progress,hasher:l,cidVersion:a.cidVersion,strategy:a.strategy,rawLeaves:a.rawLeaves,reduceSingleLeafToSelf:a.reduceSingleLeafToSelf,leafType:a.leafType}));case 12:if(f=e.sent){e.next=15;break}throw cd(new Error("cannot write to ".concat(parent.name)),"ERR_COULD_NOT_WRITE");case 15:return l3("Wrote ".concat(f.cid)),e.abrupt("return",{cid:f.cid,size:f.size});case 17:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),d3=function(e,t){return function(){var r=Kh(Fh().mark((function r(){var n,a,i,o,s,u,c;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0,a=!1,i=!1,r.prev=3,s=xm(e);case 5:return r.next=7,km(s.next());case 7:if(!(a=!(u=r.sent).done)){r.next=19;break}if(c=u.value,!((n+=c.length)>t)){r.next=14;break}return r.next=13,c.slice(0,t-n);case 13:return r.abrupt("return");case 14:return r.next=16,c;case 16:a=!1,r.next=5;break;case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(3),i=!0,o=r.t0;case 25:if(r.prev=25,r.prev=26,!a||null==s.return){r.next=30;break}return r.next=30,km(s.return());case 30:if(r.prev=30,!i){r.next=33;break}throw o;case 33:return r.finish(30);case 34:return r.finish(25);case 35:case"end":return r.stop()}}),r,null,[[3,21,25,35],[26,,30,34]])})));return function(){return r.apply(this,arguments)}}()},v3=function(e){var t=new Uint8Array(arguments.length>1&&void 0!==arguments[1]?arguments[1]:WR);function r(){return(r=Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.slice();case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return d3(function(){return r.apply(this,arguments)}(),e)},y3=function(){var e=Kh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=6;break}return e.delegateYield(JD(xm(t[r]())),"t0",3);case 3:r++,e.next=1;break;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b3=function(){var e=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h,d,v;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=!1,i=!1,e.prev=3,s=xm(t);case 5:return e.next=7,km(s.next());case 7:if(!(a=!(u=e.sent).done)){e.next=15;break}return c=u.value,n+=c.length,e.next=12,c;case 12:a=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),i=!0,o=e.t0;case 21:if(e.prev=21,e.prev=22,!a||null==s.return){e.next=26;break}return e.next=26,km(s.return());case 26:if(e.prev=26,!i){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(21);case 31:l=!1,f=!1,e.prev=33,h=xm(r(n));case 35:return e.next=37,km(h.next());case 37:if(!(l=!(d=e.sent).done)){e.next=45;break}return v=d.value,n+=v.length,e.next=42,v;case 42:l=!1,e.next=35;break;case 45:e.next=51;break;case 47:e.prev=47,e.t1=e.catch(33),f=!0,p=e.t1;case 51:if(e.prev=51,e.prev=52,!l||null==h.return){e.next=56;break}return e.next=56,km(h.return());case 56:if(e.prev=56,!f){e.next=59;break}throw p;case 59:return e.finish(56);case 60:return e.finish(51);case 61:case"end":return e.stop()}}),e,null,[[3,17,21,31],[22,,26,30],[33,47,51,61],[52,,56,60]])})));return function(t,r){return e.apply(this,arguments)}}(),g3=function(e){var t={cid:e.cid,name:e.name,type:"directory"===e.type?"directory":"file",size:e.size};return"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,t.mtime=e.unixfs.mtime),t};var m3={stat:j0},w3={chmod:function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W2(Y2,S.length>2&&void 0!==S[2]?S[2]:{}),G2("Fetching stats for ".concat(r)),t.next=5,L0(e,r,a);case 5:if(i=t.sent,o=i.cid,s=i.mfsDirectory,u=i.name,o.code===ey){t.next=11;break}throw cd(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 11:if(!a.recursive){t.next=22;break}return t.next=14,yF(Kh(Fh().mark((function t(){var a,i,s,u,c,l,f;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=!1,i=!1,t.prev=2,u=xm(AK(o,e.repo.blocks));case 4:return t.next=6,km(u.next());case 6:if(!(a=!(c=t.sent).done)){t.next=17;break}if("file"===(l=c.value).type||"directory"===l.type){t.next=10;break}throw cd(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 10:return l.unixfs.mode=J2(n,l.unixfs),f=Yv({Data:l.unixfs.marshal(),Links:l.node.Links}),t.next=14,{path:l.path,content:f};case 14:a=!1,t.next=4;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),i=!0,s=t.t0;case 23:if(t.prev=23,t.prev=24,!a||null==u.return){t.next=28;break}return t.next=28,km(u.return());case 28:if(t.prev=28,!i){t.next=31;break}throw s;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[2,19,23,33],[24,,28,32]])}))),(function(t){return DV(t,e.repo.blocks,So(So({},a),{},{pin:!1,dagBuilder:function(){var e=Kh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,s=Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,e.next=3,Zh(Fh().mark((function e(){var a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.content,i=ty(a),e.next=4,V0(i,r,n);case 4:if(o=e.sent,a.Data){e.next=7;break}throw cd(new Error("".concat(o," had no data")),"ERR_INVALID_NODE");case 7:return s=_d.unmarshal(a.Data),e.abrupt("return",{cid:o,size:i.length,path:t.path,unixfs:s});case 9:case"end":return e.stop()}}),e)})));case 3:case"end":return e.stop()}}),e)})),u=xm(t);case 5:return e.next=7,km(u.next());case 7:if(!(a=!(c=e.sent).done)){e.next=12;break}return e.delegateYield(s(),"t0",9);case 9:a=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),i=!0,o=e.t1;case 18:if(e.prev=18,e.prev=19,!a||null==u.return){e.next=23;break}return e.next=23,km(u.return());case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t,r,n){return e.apply(this,arguments)}}()}))}),(function(e){return QD(e)}));case 14:if(c=t.sent){t.next=17;break}throw cd(new Error("Could not chmod ".concat(r)),"ERR_COULD_NOT_CHMOD");case 17:return t.next=19,K2(e)(r,a);case 19:return t.next=21,P2(e)("/ipfs/".concat(c.cid),r,a);case 21:return t.abrupt("return");case 22:return t.next=24,e.repo.blocks.get(o);case 24:if(l=t.sent,(f=ry(l)).Data){t.next=28;break}throw cd(new Error("".concat(o," had no data")),"ERR_INVALID_NODE");case 28:return(p=_d.unmarshal(f.Data)).mode=J2(n,p),h=ty({Data:p.marshal(),Links:f.Links}),d=a.hashAlg||Y2.hashAlg,t.next=34,e.hashers.getHasher(d);case 34:return v=t.sent,t.next=37,v.digest(h);case 37:if(y=t.sent,b=bv.create(a.cidVersion,ey,y),!a.flush){t.next=42;break}return t.next=42,e.repo.blocks.put(b,h);case 42:return t.next=44,Z0(e,s);case 44:return g=t.sent,m=g[g.length-1],w=bv.decode(m.cid.bytes),t.next=49,e.repo.blocks.get(w);case 49:return k=t.sent,x=ry(k),t.next=53,s2(e,{parent:x,name:u,cid:b,size:h.length,flush:a.flush,hashAlg:d,cidVersion:o.version,shardSplitThreshold:1/0});case 53:return _=t.sent,m.cid=_.cid,t.next=57,y2(e,g,a);case 57:return E=t.sent,t.next=60,m2(e,E,a);case 60:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return ZR((function(e,r){return t.apply(this,arguments)}))},cp:P2,flush:function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=X2($2,n=o.length>1&&void 0!==o[1]?o[1]:{}),t.next=4,j0(e)(r,n);case 4:return a=t.sent,i=a.cid,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return ZR((function(e){return t.apply(this,arguments)}))},mkdir:A2,mv:function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e3(t3,i.length>2&&void 0!==i[2]?i[2]:{}),t.next=4,P2(e)(r,n,a);case 4:return t.next=6,K2(e)(r,So(So({},a),{},{recursive:!0}));case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return ZR((function(e,r){return t.apply(this,arguments)}))},rm:K2,touch:function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=r3(a3,n=T.length>1&&void 0!==T[1]?T[1]:{})).mtime=a.mtime||new Date,n3("Touching ".concat(r," mtime: ").concat(a.mtime)),t.next=6,L0(e,r,a);case 6:return i=t.sent,o=i.cid,s=i.mfsDirectory,u=i.name,c=i.exists,l=n.hashAlg||a3.hashAlg,t.next=14,e.hashers.getHasher(l);case 14:if(f=t.sent,d=a.cidVersion,c){t.next=28;break}return v=new _d({type:"file",mtime:a.mtime}),p=ty({Data:v.marshal(),Links:[]}),t.next=21,f.digest(p);case 21:if(y=t.sent,h=bv.create(a.cidVersion,ey,y),!a.flush){t.next=26;break}return t.next=26,e.repo.blocks.put(h,p);case 26:t.next=47;break;case 28:if(o.code===ey){t.next=30;break}throw cd(new Error("".concat(r," was not a UnixFS node")),"ERR_NOT_UNIXFS");case 30:return d=o.version,t.next=33,e.repo.blocks.get(o);case 33:if(b=t.sent,(g=ry(b)).Data){t.next=37;break}throw cd(new Error("".concat(r," had no data")),"ERR_INVALID_NODE");case 37:return(m=_d.unmarshal(g.Data)).mtime=a.mtime,p=ty({Data:m.marshal(),Links:g.Links}),t.next=42,f.digest(p);case 42:if(w=t.sent,h=bv.create(a.cidVersion,ey,w),!a.flush){t.next=47;break}return t.next=47,e.repo.blocks.put(h,p);case 47:return t.next=49,Z0(e,s);case 49:return k=t.sent,x=k[k.length-1],_=x.cid,t.next=54,e.repo.blocks.get(_);case 54:return E=t.sent,S=ry(E),t.next=58,s2(e,{parent:S,name:u,cid:h,size:p.length,flush:a.flush,shardSplitThreshold:a.shardSplitThreshold,hashAlg:a.hashAlg,cidVersion:d});case 58:return A=t.sent,x.cid=A.cid,t.next=62,y2(e,k,a);case 62:return C=t.sent,t.next=65,m2(e,C,a);case 65:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return ZR((function(e){return t.apply(this,arguments)}))}},k3={write:function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c3(f3,u.length>2&&void 0!==u[2]?u[2]:{}),l3("Reading source, destination and parent"),t.next=5,R0().readLock(Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u3(n);case 2:return i=t.sent,t.next=5,L0(e,r,a);case 5:return o=t.sent,t.next=8,L0(e,o.mfsDirectory,a);case 8:s=t.sent;case 9:case"end":return t.stop()}}),t)}))))();case 5:if(l3("Read source, destination and parent"),a.parents||s.exists){t.next=8;break}throw cd(new Error("directory does not exist"),"ERR_NO_EXIST");case 8:if(null!=i){t.next=10;break}throw cd(new Error("could not create source"),"ERR_NO_SOURCE");case 10:if(null!=o){t.next=12;break}throw cd(new Error("could not create destination"),"ERR_NO_DESTINATION");case 12:if(a.create||o.exists){t.next=14;break}throw cd(new Error("file does not exist"),"ERR_NO_EXIST");case 14:if("file"===o.entryType){t.next=16;break}throw cd(new Error("not a file"),"ERR_NOT_A_FILE");case 16:return t.abrupt("return",p3(e,r,i,o,a));case 17:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return ZR((function(e,r){return t.apply(this,arguments)}))},read:function(e){return ZR((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=i3(o3,r),(0,oi.Z)({},Symbol.asyncIterator,function(){var n=Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(L0(e,t,r));case 2:return a=n.sent,n.next=5,km(EK(a.mfsPath,e.repo.blocks));case 5:if("file"===(i=n.sent).type){n.next=8;break}throw cd(new Error("".concat(t," was not a file")),"ERR_NOT_FILE");case 8:if(i.content){n.next=10;break}throw cd(new Error("Could not load content stream from ".concat(t)),"ERR_NO_CONTENT");case 10:o=!1,s=!1,n.prev=12,c=xm(i.content({offset:r.offset,length:r.length}));case 14:return n.next=16,km(c.next());case 16:if(!(o=!(l=n.sent).done)){n.next=23;break}return f=l.value,n.next=20,f;case 20:o=!1,n.next=14;break;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n.catch(12),s=!0,u=n.t0;case 29:if(n.prev=29,n.prev=30,!o||null==c.return){n.next=34;break}return n.next=34,km(c.return());case 34:if(n.prev=34,!s){n.next=37;break}throw u;case 37:return n.finish(34);case 38:return n.finish(29);case 39:case"end":return n.stop()}}),n,null,[[12,25,29,39],[30,,34,38]])})));return function(){return n.apply(this,arguments)}}())}))},ls:function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(L0(e,t,r));case 2:return a=n.sent,n.next=5,km(EK(a.mfsPath,e.repo.blocks));case 5:if("directory"!==(i=n.sent).type){n.next=9;break}return n.delegateYield(JD(xm(dz(i.content(r),g3))),"t0",8);case 8:return n.abrupt("return");case 9:return n.next=11,g3(i);case 11:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return ZR((function(e){return t.apply(this,arguments)}))}},x3=function(e){var t=e.options,r=e.mfs,n=e.operations,a=e.lock;Object.keys(n).forEach((function(e){r[e]=a(n[e](t))}))},_3={repoOwner:!0,repo:null};function E3(e){var t=e.repo,r=e.preload,n=e.hashers,a=function(e){var t=R0(Object.assign({},_3||{},e).repoOwner),r={};return x3({options:e,mfs:r,operations:m3,lock:function(e){return t.readLock(e)}}),x3({options:e,mfs:r,operations:w3,lock:function(e){return t.writeLock(e)}}),Object.keys(k3).forEach((function(t){r[t]=k3[t](e)})),r}({repo:t,repoOwner:!1!==e.options.repoOwner,hashers:n}),i=function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=n.filter((function(e){return QC(e,HC)||YC(e)}));if(i.length){var o=n[n.length-1];o&&!1!==o.preload&&i.forEach((function(e){return r(e)}))}return e.apply(void 0,n)}};return So(So({},a),{},{chmod:a.chmod,cp:i(a.cp),mkdir:a.mkdir,stat:i(a.stat),rm:a.rm,read:i(a.read),touch:a.touch,write:a.write,mv:i(a.mv),flush:a.flush,ls:i(Kh(Fh().mark((function e(){var t,r,n,i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,r=!1,e.prev=2,i=xm(a.ls.apply(a,u));case 4:return e.next=6,km(i.next());case 6:if(!(t=!(o=e.sent).done)){e.next=13;break}return s=o.value,e.next=10,So(So({},s),{},{size:s.size||0});case 10:t=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),r=!0,n=e.t0;case 19:if(e.prev=19,e.prev=20,!t||null==i.return){e.next=24;break}return e.next=24,km(i.return());case 24:if(e.prev=24,!r){e.next=27;break}throw n;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))))})}var S3="Ed25519";var A3=Sn((function e(t){var r=t.keychain;xn(this,e),this.gen=function(e){var t=e.keychain;return ZR((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:S3,size:2048};return t.createKey(e,r.type||S3,r.size||2048)}))}({keychain:r}),this.list=function(e){var t=e.keychain;return ZR((function(){return t.listKeys()}))}({keychain:r}),this.rm=function(e){var t=e.keychain;return ZR((function(e){return t.removeKey(e)}))}({keychain:r}),this.rename=function(e){var t=e.keychain,r=function(){var e=Zh(Fh().mark((function e(r,n){var a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.renameKey(r,n);case 2:return a=e.sent,e.abrupt("return",{was:r,now:a.name,id:a.id,overwrite:!1});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return ZR(r)}({keychain:r}),this.export=function(e){var t=e.keychain;return ZR((function(e,r){return t.exportKey(e,r)}))}({keychain:r}),this.import=function(e){var t=e.keychain;return ZR((function(e,r,n){return t.importKey(e,r,n)}))}({keychain:r}),this.info=function(e){var t=e.keychain;return ZR((function(e){return t.findKeyByName(e)}))}({keychain:r})}));function C3(e){var t=e.repo,r=e.preload;function n(){return n=Zh(Fh().mark((function e(n){var a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1!==(a=o.length>1&&void 0!==o[1]?o[1]:{}).preload&&r(n),e.next=4,t.blocks.get(n,a);case 4:return i=e.sent,e.abrupt("return",ry(i));case 6:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}function T3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(var r in e){var n=e[r];if("/"===r&&1===Object.keys(e).length)try{t.push({Name:"",Tsize:0,Hash:bv.parse(n)});continue}catch(i){}var a=bv.asCID(n);a?t.push({Name:"",Tsize:0,Hash:a}):(Array.isArray(n)&&T3(n,t),n&&"object"===typeof n&&T3(n,t))}return t}function R3(e){var t=e.repo,r=e.preload;function n(){return n=Zh(Fh().mark((function e(n){var a,i,o,s,u,c=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,t.gcLock.readLock();case 3:return i=e.sent,e.prev=4,o=ty(n),e.next=8,Kg.digest(o);case 8:return s=e.sent,u=bv.createV1(ey,s),e.next=12,t.blocks.put(u,o,{signal:a.signal});case 12:if(!1!==a.preload&&r(u),!a.pin){e.next=16;break}return e.next=16,t.pins.pinRecursively(u,{signal:a.signal});case 16:return e.abrupt("return",u);case 17:return e.prev=17,i(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,,17,20]])}))),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}var I3=Sn((function e(t){var r=t.repo,n=t.preload;xn(this,e),this.addLink=function(e){var t=e.repo,r=e.preload,n=C3({repo:t,preload:r}),a=R3({repo:t,preload:r});function i(){return i=Zh(Fh().mark((function e(t,r){var i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,n(t,i);case 3:return o=e.sent,e.abrupt("return",a(So(So({},o),{},{Links:o.Links.concat([r])}),i));case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return ZR((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.appendData=function(e){var t=e.repo,r=e.preload,n=C3({repo:t,preload:r}),a=R3({repo:t,preload:r});function i(){return i=Zh(Fh().mark((function e(t,r){var i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,n(t,i);case 3:return o=e.sent,s=(0,lj.concat)([o.Data||[],r]),e.abrupt("return",a(So(So({},o),{},{Data:s}),i));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return ZR((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.rmLink=function(e){var t=e.repo,r=e.preload,n=C3({repo:t,preload:r}),a=R3({repo:t,preload:r});function i(){return i=Zh(Fh().mark((function e(t,r){var i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,n(t,i);case 3:return o=e.sent,s=("string"===typeof r?r:r.Name)||"",o.Links=o.Links.filter((function(e){return e.Name!==s})),e.abrupt("return",a(o,i));case 7:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return ZR((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n}),this.setData=function(e){var t=e.repo,r=e.preload,n=C3({repo:t,preload:r}),a=R3({repo:t,preload:r});function i(){return i=Zh(Fh().mark((function e(t,r){var i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,n(t,i);case 3:return o=e.sent,e.abrupt("return",a(So(So({},o),{},{Data:r}),i));case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return ZR((function(e,t){return i.apply(this,arguments)}))}({repo:r,preload:n})})),P3=Sn((function e(t){var r=t.repo,n=t.codecs,a=t.preload;xn(this,e),this.data=function(e){var t=C3({repo:e.repo,preload:e.preload});function r(){return r=Zh(Fh().mark((function e(r){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,t(r,n);case 3:return a=e.sent,e.abrupt("return",a.Data||new Uint8Array(0));case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({repo:r,preload:a}),this.get=C3({repo:r,preload:a}),this.links=function(e){var t=e.repo,r=e.codecs;function n(){return n=Zh(Fh().mark((function e(n){var a,i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,r.getCodec(n.code);case 3:return i=e.sent,e.next=6,t.blocks.get(n,a);case 6:o=e.sent,s=i.decode(o),e.t0=n.code,e.next=e.t0===Gg?11:e.t0===ey?12:e.t0===Qb||e.t0===dg?13:14;break;case 11:return e.abrupt("return",[]);case 12:return e.abrupt("return",s.Links);case 13:return e.abrupt("return",T3(s));case 14:throw new Error("Cannot resolve links from codec ".concat(n.code));case 15:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return ZR((function(e){return n.apply(this,arguments)}))}({repo:r,codecs:n}),this.new=function(e){var t=e.repo,r=e.preload;function n(){return n=Zh(Fh().mark((function e(){var n,a,i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=u.length>0&&void 0!==u[0]?u[0]:{}).template){e.next=7;break}if("unixfs-dir"!==n.template){e.next=6;break}a=new _d({type:"directory"}).marshal(),e.next=7;break;case 6:throw new Error("unknown template");case 7:return i=ty({Data:a,Links:[]}),e.next=10,Kg.digest(i);case 10:return o=e.sent,s=bv.createV0(o),e.next=14,t.blocks.put(s,i,{signal:n.signal});case 14:return!1!==n.preload&&r(s),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return ZR((function(){return n.apply(this,arguments)}))}({repo:r,preload:a}),this.put=R3({repo:r,preload:a}),this.stat=function(e){var t=C3({repo:e.repo,preload:e.preload});function r(){return r=Zh(Fh().mark((function e(r){var n,a,i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,t(r,n);case 3:return a=e.sent,i=ty(a),o=i.length,s=a.Links.reduce((function(e,t){return e+(t.Tsize||0)}),0),e.abrupt("return",{Hash:r,NumLinks:a.Links.length,BlockSize:o,LinksSize:o-(a.Data||[]).length,DataSize:(a.Data||[]).length,CumulativeSize:o+s});case 8:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({repo:r,preload:a}),this.patch=new I3({repo:r,preload:a})})),D3=ud("ipfs:repo:gc");function N3(e){var t=e.repo;function r(){return r=Zh(Fh().mark((function e(){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,t.stat();case 3:return r=e.sent,e.abrupt("return",{numObjects:BigInt(r.numObjects.toString()),repoSize:BigInt(r.repoSize.toString()),repoPath:r.repoPath,version:"".concat(r.version),storageMax:BigInt(r.storageMax.toString())});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}var O3=12;var L3=Sn((function e(t){var r=t.repo,n=t.hashers;xn(this,e),this.gc=function(e){var t=e.repo,r=e.hashers;function n(){return n=Kh((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function n(){var a,i;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Date.now(),n.prev=1,n.next=4,km(P0({repo:t,hashers:r},e));case 4:return i=n.sent,n.next=7,km(t.pins.pinRecursively(i));case 7:return n.delegateYield(JD(xm(t.gc())),"t0",8);case 8:if(n.prev=8,!i){n.next=12;break}return n.next=12,km(t.pins.unpin(i));case 12:return n.finish(8);case 13:D3("Complete (".concat(Date.now()-a,"ms)"));case 14:case"end":return n.stop()}}),n,null,[[1,,8,13]])}))()})),n.apply(this,arguments)}return ZR((function(){return n.apply(this,arguments)}))}({repo:r,hashers:n}),this.stat=N3({repo:r}),this.version=function(e){var t=e.repo;function r(){return r=Zh(Fh().mark((function e(){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,t._checkInitialized(r);case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),![/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((function(t){return t.test(e.t0.message)}))){e.next=11;break}return e.abrupt("return",O3);case 11:throw e.t0;case 12:return e.abrupt("return",t.version.get());case 13:case"end":return e.stop()}}),e,null,[[1,6]])}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({repo:r}),this.setApiAddr=function(e){return r.apiAddr.set(e)}}));function B3(e,t){var r;if(!(r=e.metrics?t.peer?e.metrics.forPeer(t.peer):t.proto?e.metrics.forProtocol(t.proto):e.metrics.getGlobal():void 0))return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};var n=r.getMovingAverages(),a=r.getSnapshot();return{totalIn:a.dataReceived,totalOut:a.dataSent,rateIn:n.dataReceived[6e4].movingAverage/60,rateOut:n.dataSent[6e4].movingAverage/60}}var M3=Sn((function e(t){var r=t.repo,n=t.network;xn(this,e),this.repo=N3({repo:r}),this.bw=function(e){var t=e.network,r=function(){var e=Kh((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n,a,i,o,s;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(t.use(e));case 2:if(n=r.sent,a=n.libp2p,e.poll){r.next=8;break}return r.next=7,B3(a,e);case 7:return r.abrupt("return");case 8:if(i=e.interval||1e3,o=-1,r.prev=10,(o="string"===typeof i?FR(i)||-1:i)&&!(o<0)){r.next=14;break}throw new Error("invalid duration");case 14:r.next=19;break;case 16:throw r.prev=16,r.t0=r.catch(10),cd(r.t0,"ERR_INVALID_POLL_INTERVAL");case 19:r.prev=19;case 20:return r.next=23,B3(a,e);case 23:return r.next=25,km(new Promise((function(e){s=setTimeout(e,o)})));case 25:r.next=20;break;case 27:return r.prev=27,clearTimeout(s),r.finish(27);case 30:case"end":return r.stop()}}),r,null,[[10,16],[19,,27,30]])}))()}));return function(){return e.apply(this,arguments)}}();return ZR(r)}({network:n}),this.bitswap=uz({network:n})})),U3=function(e,t,r){if(!e)return r;var n,a;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;){if(a=n.shift(),!e)return r;if(void 0===(e=e[a]))return r}return e};var j3=__webpack_require__(3144),F3=Gh("ipfs:repo:migrator:migration-8");function z3(e){return e.child?z3(e.child):e}function Z3(e){try{var t=uv.decode("b".concat(e.toString().toLowerCase().slice(1))),r=bv.decode(t).multihash.bytes,n=uv.encode(r).slice(1).toUpperCase();return new LR("/".concat(n),!1)}catch(sY){return e}}function q3(e){try{var t=uv.decode("b".concat(e.toString().toLowerCase().slice(1))),r=Gd(t),n=uv.encode(bv.createV1(Gg,r).bytes).slice(1);return new LR("/".concat(n.toUpperCase()),!1)}catch(a){return e}}function V3(e,t,r){return K3.apply(this,arguments)}function K3(){return(K3=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p,h,d;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.blocks,e.next=3,a.open();case 3:return i=z3(a),e.next=6,j3(i.queryKeys({filters:[function(e){return n(e).toString()!==e.toString()}]}));case 6:o=e.sent,e.prev=7,s=0,u=!1,c=!1,e.prev=11,f=xm(i.query({}));case 13:return e.next=15,f.next();case 15:if(!(u=!(p=e.sent).done)){e.next=34;break}if(h=p.value,(d=n(h.key)).toString()===h.key.toString()){e.next=31;break}return s+=1,e.t0=F3,e.t1="Migrating Block from ".concat(h.key," to ").concat(d),e.next=24,i.has(h.key);case 24:return e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=28,i.delete(h.key);case 28:return e.next=30,i.put(d,h.value);case 30:r(s/o*100,"Migrated Block from ".concat(h.key," to ").concat(d));case 31:u=!1,e.next=13;break;case 34:e.next=40;break;case 36:e.prev=36,e.t3=e.catch(11),c=!0,l=e.t3;case 40:if(e.prev=40,e.prev=41,!u||null==f.return){e.next=45;break}return e.next=45,f.return();case 45:if(e.prev=45,!c){e.next=48;break}throw l;case 48:return e.finish(45);case 49:return e.finish(40);case 50:return e.prev=50,e.next=53,a.close();case 53:return e.finish(50);case 54:case"end":return e.stop()}}),e,null,[[7,,50,54],[11,36,40,50],[41,,45,49]])})))).apply(this,arguments)}var H3={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:function(e){return V3(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},Z3)},revert:function(e){return V3(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},q3)}},W3=ld.Reader,G3=ld.Writer,Y3=(ld.util,ld.roots.default||(ld.roots.default={})),Q3=Y3.ipfs=function(){var e={};return e.pin=function(){var e={};return e.Set=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.version=0,e.prototype.fanout=0,e.prototype.seed=0,e.encode=function(e,t){return t||(t=G3.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(16).uint32(e.fanout),null!=e.seed&&Object.hasOwnProperty.call(e,"seed")&&t.uint32(29).fixed32(e.seed),t},e.decode=function(e,t){e instanceof W3||(e=W3.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Y3.ipfs.pin.Set;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.version=e.uint32();break;case 2:n.fanout=e.uint32();break;case 3:n.seed=e.fixed32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Y3.ipfs.pin.Set)return e;var t=new Y3.ipfs.pin.Set;return null!=e.version&&(t.version=e.version>>>0),null!=e.fanout&&(t.fanout=e.fanout>>>0),null!=e.seed&&(t.seed=e.seed>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.version=0,r.fanout=0,r.seed=0),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),null!=e.fanout&&e.hasOwnProperty("fanout")&&(r.fanout=e.fanout),null!=e.seed&&e.hasOwnProperty("seed")&&(r.seed=e.seed),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),e}(),e}(),J3=__webpack_require__(5187),X3=new LR("/local/pins"),$3=256,e4=8192,t4=bv.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),r4={direct:"direct",recursive:"recursive"};function n4(e){return new LR("/".concat(uv.encode(e.multihash.bytes).toUpperCase().substring(1)))}function a4(e,t){for(var r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}var i4=Q3.pin.Set;function o4(e){var t=e.Data;if(!t)throw new Error("No data present");var r=fx.decode(t),n=fx.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");var a=t.slice(n,r+n),i=i4.toObject(i4.decode(a),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==i.version)throw new Error("Unsupported Set version: ".concat(i.version));if(i.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:i,data:t.slice(r+n)}}function s4(e,t){var r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e,!0);var n=mm(t.toString()),a=(0,lj.concat)([r,n],r.byteLength+n.byteLength);return J3(uN(a))}function u4(e,t){return c4.apply(this,arguments)}function c4(){return c4=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o4(r),a=0,i=(0,zn.Z)(r.Links),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=22;break}if(s=o.value,!(a<n.header.fanout)){e.next=17;break}if(u=s.Hash,t4.equals(u)){e.next=15;break}return e.next=12,km(t.get(u));case 12:return c=e.sent,l=ry(c),e.delegateYield(JD(xm(u4(t,l))),"t0",15);case 15:e.next=19;break;case 17:return e.next=19,s.Hash;case 19:a++;case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(3),i.e(e.t1);case 27:return e.prev=27,i.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[3,24,27,30]])}))),c4.apply(this,arguments)}function l4(e,t,r){return f4.apply(this,arguments)}function f4(){return f4=Kh(Fh().mark((function e(t,r,n){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.Links.find((function(e){return e.Name===n}))){e.next=3;break}throw new Error("No link found with name "+n);case 3:return e.next=5,km(t.get(a.Hash));case 5:return i=e.sent,o=ry(i),e.delegateYield(JD(xm(u4(t,o))),"t0",8);case 8:case"end":return e.stop()}}),e)}))),f4.apply(this,arguments)}function p4(e,t){return r(t,0);function r(e,t){return n.apply(this,arguments)}function n(){return n=Zh(Fh().mark((function t(n,a){var i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(w=function(){return w=Zh(Fh().mark((function t(r,n){var a,i,o,s;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=ty(r),t.next=3,Kg.digest(a);case 3:return i=t.sent,o=bv.createV0(i),t.next=7,e.put(o,a);case 7:s=r.Links.reduce((function(e,t){return e+(t.Tsize||0)}),0)+a.length,u[n]={Name:"",Tsize:s,Hash:o};case 9:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)},m=function(e,t){return w.apply(this,arguments)},i=i4.encode({version:1,fanout:$3,seed:a}).finish(),o=fx.encode(i.length),s=(0,lj.concat)([o,i]),u=[],c=0;c<$3;c++)u.push({Name:"",Tsize:1,Hash:t4});if(!(n.length<=e4)){t.next=14;break}return l=n.map((function(e){return{link:{Name:"",Tsize:1,Hash:e.key},data:e.data||new Uint8Array}})).sort((function(e,t){return a4(e.link.Hash.bytes,t.link.Hash.bytes)})),f=u.concat(l.map((function(e){return e.link}))),p=(0,lj.concat)([s].concat((0,kn.Z)(l.map((function(e){return e.data}))))),t.abrupt("return",{Data:p,Links:f});case 14:h=n.reduce((function(e,t){var r=s4(a,t.key)%$3;return e[r]=r in e?e[r].concat([t]):[t],e}),[]),d=0,v=(0,zn.Z)(h),t.prev=17,v.s();case 19:if((y=v.n()).done){t.next=29;break}return b=y.value,t.next=23,r(b,a+1);case 23:return g=t.sent,t.next=26,m(g,d);case 26:d++;case 27:t.next=19;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t.catch(17),v.e(t.t0);case 34:return t.prev=34,v.f(),t.finish(34);case 37:return t.abrupt("return",{Data:s,Links:u});case 38:case"end":return t.stop()}}),t,null,[[17,31,34,37]])}))),n.apply(this,arguments)}}function h4(e,t,r){return d4.apply(this,arguments)}function d4(){return d4=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p4(t,n.map((function(e){return{key:e}})));case 2:return a=e.sent,i=ty(a),e.next=6,Kg.digest(i);case 6:return o=e.sent,s=bv.createV0(o),e.next=10,t.put(s,i);case 10:return u=a.Links.reduce((function(e,t){return e+t.Tsize}),0)+i.length,e.abrupt("return",{Name:r,Tsize:u,Hash:s});case 12:case"end":return e.stop()}}),e)}))),d4.apply(this,arguments)}function v4(e,t,r,n){return y4.apply(this,arguments)}function y4(){return(y4=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.has(X3);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.get(X3);case 6:return i=e.sent,o=bv.decode(i),e.next=10,t.get(o);case 10:return s=e.sent,u=ry(s),c=0,e.next=15,j3(l4(t,u,r4.recursive));case 15:return e.t0=e.sent,e.next=18,j3(l4(t,u,r4.direct));case 18:e.t1=e.sent,l=e.t0+e.t1,f=!1,p=!1,e.prev=22,d=xm(l4(t,u,r4.recursive));case 24:return e.next=26,d.next();case 26:if(!(f=!(v=e.sent).done)){e.next=38;break}return y=v.value,c++,b={depth:1/0},0!==y.version&&(b.version=y.version),y.code!==ey&&(b.codec=y.code),e.next=34,n.put(n4(y),jb(b));case 34:a(c/l*100,"Migrated recursive pin ".concat(y));case 35:f=!1,e.next=24;break;case 38:e.next=44;break;case 40:e.prev=40,e.t2=e.catch(22),p=!0,h=e.t2;case 44:if(e.prev=44,e.prev=45,!f||null==d.return){e.next=49;break}return e.next=49,d.return();case 49:if(e.prev=49,!p){e.next=52;break}throw h;case 52:return e.finish(49);case 53:return e.finish(44);case 54:g=!1,m=!1,e.prev=56,k=xm(l4(t,u,r4.direct));case 58:return e.next=60,k.next();case 60:if(!(g=!(x=e.sent).done)){e.next=72;break}return _=x.value,c++,E={depth:0},0!==_.version&&(E.version=_.version),_.code!==ey&&(E.codec=_.code),e.next=68,n.put(n4(_),jb(E));case 68:a(c/l*100,"Migrated direct pin ".concat(_));case 69:g=!1,e.next=58;break;case 72:e.next=78;break;case 74:e.prev=74,e.t3=e.catch(56),m=!0,w=e.t3;case 78:if(e.prev=78,e.prev=79,!g||null==k.return){e.next=83;break}return e.next=83,k.return();case 83:if(e.prev=83,!m){e.next=86;break}throw w;case 86:return e.finish(83);case 87:return e.finish(78);case 88:return e.next=90,t.delete(o);case 90:return e.next=92,r.delete(X3);case 92:case"end":return e.stop()}}),e,null,[[22,40,44,54],[45,,49,53],[56,74,78,88],[79,,83,87]])})))).apply(this,arguments)}function b4(e,t,r,n){return g4.apply(this,arguments)}function g4(){return g4=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],o=[],s=0,e.next=5,j3(n.queryKeys({}));case 5:u=e.sent,c=!1,l=!1,e.prev=8,p=xm(n.query({}));case 10:return e.next=12,p.next();case 12:if(!(c=!(h=e.sent).done)){e.next=21;break}d=h.value,v=d.key,y=d.value,s++,b=Kb(y),g=bv.create(b.version||0,b.codec||ey,Gd(uv.decode("b"+v.toString().toLowerCase().split("/").pop()))),0===b.depth?(a(s/u*100,"Reverted direct pin ".concat(g)),o.push(g)):(a(s/u*100,"Reverted recursive pin ".concat(g)),i.push(g));case 18:c=!1,e.next=10;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(8),l=!0,f=e.t0;case 27:if(e.prev=27,e.prev=28,!c||null==p.return){e.next=32;break}return e.next=32,p.return();case 32:if(e.prev=32,!l){e.next=35;break}throw f;case 35:return e.finish(32);case 36:return e.finish(27);case 37:return a(100,"Updating pin root"),e.next=40,h4(t,r4.direct,o);case 40:return e.t1=e.sent,e.next=43,h4(t,r4.recursive,i);case 43:return e.t2=e.sent,e.t3=[e.t1,e.t2],m={Links:e.t3},w=ty(m),e.next=49,Kg.digest(w);case 49:return k=e.sent,x=bv.createV0(k),e.next=53,t.put(x,w);case 53:return e.next=55,r.put(X3,x.bytes);case 55:case"end":return e.stop()}}),e,null,[[8,23,27,37],[28,,32,36]])}))),g4.apply(this,arguments)}function m4(e,t,r){return w4.apply(this,arguments)}function w4(){return(w4=Zh(Fh().mark((function e(t,r,n){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.blocks,i=t.datastore,o=t.pins,e.next=5,a.open();case 5:return e.next=7,i.open();case 7:return e.next=9,o.open();case 9:return e.prev=9,e.next=12,n(a,i,o,r);case 12:return e.prev=12,e.next=15,o.close();case 15:return e.next=17,i.close();case 17:return e.next=19,a.close();case 19:return e.finish(12);case 20:case"end":return e.stop()}}),e,null,[[9,,12,20]])})))).apply(this,arguments)}var k4={version:9,description:"Migrates pins to datastore",migrate:function(e){return m4(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},v4)},revert:function(e){return m4(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},b4)}},x4=new LR("/config"),_4=new LR("/version");function E4(e){for(var t=e;t.db||t.child;)if("level-js"===(t=t.db||t.child).type||"Level"===t.constructor.name)return t}function S4(){return S4=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:if(i=E4(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){e(Boolean(n.result))}})));case 9:case"end":return e.stop()}}),e)}))),S4.apply(this,arguments)}function A4(){return A4=Zh(Fh().mark((function e(t,r,n,a){var i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",r(t));case 4:if(i=E4(a)){e.next=7;break}throw sN();case 7:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){if(n.result)return e(n.result);r(sN())}})));case 8:case"end":return e.stop()}}),e)}))),A4.apply(this,arguments)}function C4(e){var t=e.get.bind(e),r=e.has.bind(e);return e.get=function(n){return function(e,t,r,n){return A4.apply(this,arguments)}(n,t,r,e)},e.has=function(t){return function(e,t,r){return S4.apply(this,arguments)}(t,r,e)},e}function T4(e){return So(So({},e),{},{root:C4(e.root),datastore:C4(e.datastore),pins:C4(e.pins),keys:C4(e.keys)})}function R4(e,t){return I4.apply(this,arguments)}function I4(){return I4=Zh(Fh().mark((function e(t,r){var n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>2&&void 0!==o[2]?o[2]:function(){},a=E4(r)){e.next=5;break}return n("".concat(t," did not need an upgrade")),e.abrupt("return");case 5:return n("Upgrading ".concat(t)),i=function(e,t){return[{type:"del",key:e},{type:"put",key:mm(e),value:t}]},e.next=9,M4(a,i);case 9:case"end":return e.stop()}}),e)}))),I4.apply(this,arguments)}function P4(e,t){return D4.apply(this,arguments)}function D4(){return D4=Zh(Fh().mark((function e(t,r){var n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>2&&void 0!==o[2]?o[2]:function(){},a=E4(r)){e.next=5;break}return n("".concat(t," did not need a downgrade")),e.abrupt("return");case 5:return n("Downgrading ".concat(t)),i=function(e,t){return[{type:"del",key:e},{type:"put",key:uN(e),value:t}]},e.next=9,M4(a,i);case 9:case"end":return e.stop()}}),e)}))),D4.apply(this,arguments)}function N4(e){return e.child?N4(e.child):e}function O4(e,t,r){return L4.apply(this,arguments)}function L4(){return L4=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object.entries(t).map((function(e){var t=(0,wn.Z)(e,2);return{key:t[0],backend:N4(t[1])}})).filter((function(e){e.key;return"LevelDatastore"===e.backend.constructor.name})).map((function(e){return{name:e.key,store:e.backend}})),r(0,"Migrating ".concat(a.length," dbs")),i=0,o=function(e){r(Math.round(i/a.length*100),e)},s=(0,zn.Z)(a),e.prev=5,s.s();case 7:if((u=s.n()).done){e.next=21;break}return c=u.value,l=c.name,f=c.store,e.next=11,f.open();case 11:return e.prev=11,e.next=14,n(l,f,o);case 14:return e.prev=14,i++,e.next=18,f.close();case 18:return e.finish(14);case 19:e.next=7;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),s.e(e.t0);case 26:return e.prev=26,s.f(),e.finish(26);case 29:r(100,"Migrated ".concat(a.length," dbs"));case 30:case"end":return e.stop()}}),e,null,[[5,23,26,29],[11,,14,19]])}))),L4.apply(this,arguments)}var B4={version:10,description:"Migrates datastore-level keys to binary",migrate:function(e){return O4(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},R4)},revert:function(e){return O4(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},P4)}};function M4(e,t){return new Promise((function(r,n){var a=e.iterator();a._deserializeKey=a._deserializeValue=function(e){return e},function i(){var o=function(o,s,u){if(o||void 0===s){a.end((function(e){e?n(e):r()}))}else!function(t,r){var n,a=e.store("readwrite"),i=a.transaction,s=0;i.onabort=function(){return r(n||i.error||new Error("aborted by user"))},i.oncomplete=function(){return r()},function e(){var r,u=t[s++],c=u.key;try{r="del"===u.type?a.delete(c):a.put(u.value,c)}catch(o){return n=o,void i.abort()}s<t.length&&(r.onsuccess=e)}()}(t(s,u),i)};a.next(o)}()}))}var U4=new LR("/local/filesroot");function j4(){return j4=Zh(Fh().mark((function e(t){var r,n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.length>1&&void 0!==a[1]?a[1]:function(){})(100,"Migrating MFS root to repo datastore"),e.next=4,t.root.open();case 4:return e.next=6,t.datastore.open();case 6:return e.next=8,t.root.has(U4);case 8:if(!e.sent){e.next=16;break}return e.next=11,t.root.get(U4);case 11:return n=e.sent,e.next=14,t.datastore.put(U4,n);case 14:return e.next=16,t.root.delete(U4);case 16:return e.next=18,t.datastore.close();case 18:return e.next=20,t.root.close();case 20:r(100,"Stored MFS root in repo datastore");case 21:case"end":return e.stop()}}),e)}))),j4.apply(this,arguments)}function F4(){return F4=Zh(Fh().mark((function e(t){var r,n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.length>1&&void 0!==a[1]?a[1]:function(){})(100,"Migrating MFS root to repo root datastore"),e.next=4,t.root.open();case 4:return e.next=6,t.datastore.open();case 6:return e.next=8,t.datastore.has(U4);case 8:if(!e.sent){e.next=16;break}return e.next=11,t.datastore.get(U4);case 11:return n=e.sent,e.next=14,t.root.put(U4,n);case 14:return e.next=16,t.datastore.delete(U4);case 16:return e.next=18,t.datastore.close();case 18:return e.next=20,t.root.close();case 20:r(100,"Stored MFS root in repo root datastore");case 21:case"end":return e.stop()}}),e)}))),F4.apply(this,arguments)}var z4={version:11,description:"Store mfs root in the datastore",migrate:function(e){return j4.apply(this,arguments)},revert:function(e){return F4.apply(this,arguments)}},Z4=ld.Reader,q4=ld.Writer,V4=ld.util,K4=ld.roots.default||(ld.roots.default={}),H4=K4.Protocols=function(){function e(e){if(this.protocols=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.protocols=V4.emptyArray,e.encode=function(e,t){if(t||(t=q4.create()),null!=e.protocols&&e.protocols.length)for(var r=0;r<e.protocols.length;++r)t.uint32(10).string(e.protocols[r]);return t},e.decode=function(e,t){e instanceof Z4||(e=Z4.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new K4.Protocols;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof K4.Protocols)return e;var t=new K4.Protocols;if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.protocols=[]),e.protocols&&e.protocols.length){r.protocols=[];for(var n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),W4=ld.Reader,G4=ld.Writer,Y4=ld.util,Q4=ld.roots.default||(ld.roots.default={}),J4=Q4.Addresses=function(){function e(e){if(this.addrs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.addrs=Y4.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(e,t){if(t||(t=G4.create()),null!=e.addrs&&e.addrs.length)for(var r=0;r<e.addrs.length;++r)Q4.Addresses.Address.encode(e.addrs[r],t.uint32(10).fork()).ldelim();return null!=e.certifiedRecord&&Object.hasOwnProperty.call(e,"certifiedRecord")&&Q4.Addresses.CertifiedRecord.encode(e.certifiedRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof W4||(e=W4.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Q4.Addresses;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.addrs&&n.addrs.length||(n.addrs=[]),n.addrs.push(Q4.Addresses.Address.decode(e,e.uint32()));break;case 2:n.certifiedRecord=Q4.Addresses.CertifiedRecord.decode(e,e.uint32());break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Q4.Addresses)return e;var t=new Q4.Addresses;if(e.addrs){if(!Array.isArray(e.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var r=0;r<e.addrs.length;++r){if("object"!==typeof e.addrs[r])throw TypeError(".Addresses.addrs: object expected");t.addrs[r]=Q4.Addresses.Address.fromObject(e.addrs[r])}}if(null!=e.certifiedRecord){if("object"!==typeof e.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=Q4.Addresses.CertifiedRecord.fromObject(e.certifiedRecord)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addrs=[]),t.defaults&&(r.certifiedRecord=null),e.addrs&&e.addrs.length){r.addrs=[];for(var n=0;n<e.addrs.length;++n)r.addrs[n]=Q4.Addresses.Address.toObject(e.addrs[n],t)}return null!=e.certifiedRecord&&e.hasOwnProperty("certifiedRecord")&&(r.certifiedRecord=Q4.Addresses.CertifiedRecord.toObject(e.certifiedRecord,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e.Address=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.multiaddr=Y4.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:Y4.oneOfGetter(t=["isCertified"]),set:Y4.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=G4.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof W4||(e=W4.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Q4.Addresses.Address;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Q4.Addresses.Address)return e;var t=new Q4.Addresses.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?Y4.base64.decode(e.multiaddr,t.multiaddr=Y4.newBuffer(Y4.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=Y4.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?Y4.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),e.CertifiedRecord=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=Y4.Long?Y4.Long.fromBits(0,0,!0):0,e.prototype.raw=Y4.newBuffer([]),e.encode=function(e,t){return t||(t=G4.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.raw&&Object.hasOwnProperty.call(e,"raw")&&t.uint32(18).bytes(e.raw),t},e.decode=function(e,t){e instanceof W4||(e=W4.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Q4.Addresses.CertifiedRecord;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.seq=e.uint64();break;case 2:n.raw=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof Q4.Addresses.CertifiedRecord)return e;var t=new Q4.Addresses.CertifiedRecord;return null!=e.seq&&(Y4.Long?(t.seq=Y4.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new Y4.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.raw&&("string"===typeof e.raw?Y4.base64.decode(e.raw,t.raw=Y4.newBuffer(Y4.base64.length(e.raw)),0):e.raw.length&&(t.raw=e.raw)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(Y4.Long){var n=new Y4.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;t.bytes===String?r.raw="":(r.raw=[],t.bytes!==Array&&(r.raw=Y4.newBuffer(r.raw)))}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?Y4.Long.prototype.toString.call(e.seq):t.longs===Number?new Y4.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.raw&&e.hasOwnProperty("raw")&&(r.raw=t.bytes===String?Y4.base64.encode(e.raw,0,e.raw.length):t.bytes===Array?Array.prototype.slice.call(e.raw):e.raw),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),e}(),X4=ld.Reader,$4=ld.Writer,e5=ld.util,t5=ld.roots.default||(ld.roots.default={}),r5=t5.Peer=function(){function e(e){if(this.addresses=[],this.protocols=[],this.metadata=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.addresses=e5.emptyArray,e.prototype.protocols=e5.emptyArray,e.prototype.metadata=e5.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null,Object.defineProperty(e.prototype,"_pubKey",{get:e5.oneOfGetter(t=["pubKey"]),set:e5.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:e5.oneOfGetter(t=["peerRecordEnvelope"]),set:e5.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=$4.create()),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)t5.Address.encode(e.addresses[r],t.uint32(10).fork()).ldelim();if(null!=e.protocols&&e.protocols.length)for(r=0;r<e.protocols.length;++r)t.uint32(18).string(e.protocols[r]);if(null!=e.metadata&&e.metadata.length)for(r=0;r<e.metadata.length;++r)t5.Metadata.encode(e.metadata[r],t.uint32(26).fork()).ldelim();return null!=e.pubKey&&Object.hasOwnProperty.call(e,"pubKey")&&t.uint32(34).bytes(e.pubKey),null!=e.peerRecordEnvelope&&Object.hasOwnProperty.call(e,"peerRecordEnvelope")&&t.uint32(42).bytes(e.peerRecordEnvelope),t},e.decode=function(e,t){e instanceof X4||(e=X4.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new t5.Peer;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(t5.Address.decode(e,e.uint32()));break;case 2:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());break;case 3:n.metadata&&n.metadata.length||(n.metadata=[]),n.metadata.push(t5.Metadata.decode(e,e.uint32()));break;case 4:n.pubKey=e.bytes();break;case 5:n.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof t5.Peer)return e;var t=new t5.Peer;if(e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".Peer.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".Peer.addresses: object expected");t.addresses[r]=t5.Address.fromObject(e.addresses[r])}}if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Peer.protocols: array expected");t.protocols=[];for(r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}if(e.metadata){if(!Array.isArray(e.metadata))throw TypeError(".Peer.metadata: array expected");t.metadata=[];for(r=0;r<e.metadata.length;++r){if("object"!==typeof e.metadata[r])throw TypeError(".Peer.metadata: object expected");t.metadata[r]=t5.Metadata.fromObject(e.metadata[r])}}return null!=e.pubKey&&("string"===typeof e.pubKey?e5.base64.decode(e.pubKey,t.pubKey=e5.newBuffer(e5.base64.length(e.pubKey)),0):e.pubKey.length&&(t.pubKey=e.pubKey)),null!=e.peerRecordEnvelope&&("string"===typeof e.peerRecordEnvelope?e5.base64.decode(e.peerRecordEnvelope,t.peerRecordEnvelope=e5.newBuffer(e5.base64.length(e.peerRecordEnvelope)),0):e.peerRecordEnvelope.length&&(t.peerRecordEnvelope=e.peerRecordEnvelope)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[],r.protocols=[],r.metadata=[]),e.addresses&&e.addresses.length){r.addresses=[];for(var n=0;n<e.addresses.length;++n)r.addresses[n]=t5.Address.toObject(e.addresses[n],t)}if(e.protocols&&e.protocols.length){r.protocols=[];for(n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}if(e.metadata&&e.metadata.length){r.metadata=[];for(n=0;n<e.metadata.length;++n)r.metadata[n]=t5.Metadata.toObject(e.metadata[n],t)}return null!=e.pubKey&&e.hasOwnProperty("pubKey")&&(r.pubKey=t.bytes===String?e5.base64.encode(e.pubKey,0,e.pubKey.length):t.bytes===Array?Array.prototype.slice.call(e.pubKey):e.pubKey,t.oneofs&&(r._pubKey="pubKey")),null!=e.peerRecordEnvelope&&e.hasOwnProperty("peerRecordEnvelope")&&(r.peerRecordEnvelope=t.bytes===String?e5.base64.encode(e.peerRecordEnvelope,0,e.peerRecordEnvelope.length):t.bytes===Array?Array.prototype.slice.call(e.peerRecordEnvelope):e.peerRecordEnvelope,t.oneofs&&(r._peerRecordEnvelope="peerRecordEnvelope")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),n5=(t5.Address=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.multiaddr=e5.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:e5.oneOfGetter(t=["isCertified"]),set:e5.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=$4.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof X4||(e=X4.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new t5.Address;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof t5.Address)return e;var t=new t5.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?e5.base64.decode(e.multiaddr,t.multiaddr=e5.newBuffer(e5.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=e5.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?e5.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),t5.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value=e5.newBuffer([]),e.encode=function(e,t){return t||(t=$4.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},e.decode=function(e,t){e instanceof X4||(e=X4.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new t5.Metadata;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.key=e.string();break;case 2:n.value=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof t5.Metadata)return e;var t=new t5.Metadata;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&("string"===typeof e.value?e5.base64.decode(e.value,t.value=e5.newBuffer(e5.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",t.bytes===String?r.value="":(r.value=[],t.bytes!==Array&&(r.value=e5.newBuffer(r.value)))),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=t.bytes===String?e5.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),ld.Reader),a5=ld.Writer,i5=ld.util,o5=ld.roots.default||(ld.roots.default={}),s5=o5.Envelope=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.publicKey=i5.newBuffer([]),e.prototype.payloadType=i5.newBuffer([]),e.prototype.payload=i5.newBuffer([]),e.prototype.signature=i5.newBuffer([]),e.encode=function(e,t){return t||(t=a5.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.payloadType&&Object.hasOwnProperty.call(e,"payloadType")&&t.uint32(18).bytes(e.payloadType),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),t},e.decode=function(e,t){e instanceof n5||(e=n5.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new o5.Envelope;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.publicKey=e.bytes();break;case 2:n.payloadType=e.bytes();break;case 3:n.payload=e.bytes();break;case 5:n.signature=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof o5.Envelope)return e;var t=new o5.Envelope;return null!=e.publicKey&&("string"===typeof e.publicKey?i5.base64.decode(e.publicKey,t.publicKey=i5.newBuffer(i5.base64.length(e.publicKey)),0):e.publicKey.length&&(t.publicKey=e.publicKey)),null!=e.payloadType&&("string"===typeof e.payloadType?i5.base64.decode(e.payloadType,t.payloadType=i5.newBuffer(i5.base64.length(e.payloadType)),0):e.payloadType.length&&(t.payloadType=e.payloadType)),null!=e.payload&&("string"===typeof e.payload?i5.base64.decode(e.payload,t.payload=i5.newBuffer(i5.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),null!=e.signature&&("string"===typeof e.signature?i5.base64.decode(e.signature,t.signature=i5.newBuffer(i5.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.publicKey="":(r.publicKey=[],t.bytes!==Array&&(r.publicKey=i5.newBuffer(r.publicKey))),t.bytes===String?r.payloadType="":(r.payloadType=[],t.bytes!==Array&&(r.payloadType=i5.newBuffer(r.payloadType))),t.bytes===String?r.payload="":(r.payload=[],t.bytes!==Array&&(r.payload=i5.newBuffer(r.payload))),t.bytes===String?r.signature="":(r.signature=[],t.bytes!==Array&&(r.signature=i5.newBuffer(r.signature)))),null!=e.publicKey&&e.hasOwnProperty("publicKey")&&(r.publicKey=t.bytes===String?i5.base64.encode(e.publicKey,0,e.publicKey.length):t.bytes===Array?Array.prototype.slice.call(e.publicKey):e.publicKey),null!=e.payloadType&&e.hasOwnProperty("payloadType")&&(r.payloadType=t.bytes===String?i5.base64.encode(e.payloadType,0,e.payloadType.length):t.bytes===Array?Array.prototype.slice.call(e.payloadType):e.payloadType),null!=e.payload&&e.hasOwnProperty("payload")&&(r.payload=t.bytes===String?i5.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),null!=e.signature&&e.hasOwnProperty("signature")&&(r.signature=t.bytes===String?i5.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),u5=ld.Reader,c5=ld.Writer,l5=ld.util,f5=ld.roots.default||(ld.roots.default={}),p5=f5.PeerRecord=function(){function e(e){if(this.addresses=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.peerId=l5.newBuffer([]),e.prototype.seq=l5.Long?l5.Long.fromBits(0,0,!0):0,e.prototype.addresses=l5.emptyArray,e.encode=function(e,t){if(t||(t=c5.create()),null!=e.peerId&&Object.hasOwnProperty.call(e,"peerId")&&t.uint32(10).bytes(e.peerId),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)f5.PeerRecord.AddressInfo.encode(e.addresses[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof u5||(e=u5.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new f5.PeerRecord;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.peerId=e.bytes();break;case 2:n.seq=e.uint64();break;case 3:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(f5.PeerRecord.AddressInfo.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof f5.PeerRecord)return e;var t=new f5.PeerRecord;if(null!=e.peerId&&("string"===typeof e.peerId?l5.base64.decode(e.peerId,t.peerId=l5.newBuffer(l5.base64.length(e.peerId)),0):e.peerId.length&&(t.peerId=e.peerId)),null!=e.seq&&(l5.Long?(t.seq=l5.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new l5.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".PeerRecord.addresses: object expected");t.addresses[r]=f5.PeerRecord.AddressInfo.fromObject(e.addresses[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[]),t.defaults)if(t.bytes===String?r.peerId="":(r.peerId=[],t.bytes!==Array&&(r.peerId=l5.newBuffer(r.peerId))),l5.Long){var n=new l5.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if(null!=e.peerId&&e.hasOwnProperty("peerId")&&(r.peerId=t.bytes===String?l5.base64.encode(e.peerId,0,e.peerId.length):t.bytes===Array?Array.prototype.slice.call(e.peerId):e.peerId),null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?l5.Long.prototype.toString.call(e.seq):t.longs===Number?new l5.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),e.addresses&&e.addresses.length){r.addresses=[];for(var a=0;a<e.addresses.length;++a)r.addresses[a]=f5.PeerRecord.AddressInfo.toObject(e.addresses[a],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e.AddressInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.multiaddr=l5.newBuffer([]),e.encode=function(e,t){return t||(t=c5.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),t},e.decode=function(e,t){e instanceof u5||(e=u5.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new f5.PeerRecord.AddressInfo;e.pos<r;){var a=e.uint32();if(a>>>3===1)n.multiaddr=e.bytes();else e.skipType(7&a)}return n},e.fromObject=function(e){if(e instanceof f5.PeerRecord.AddressInfo)return e;var t=new f5.PeerRecord.AddressInfo;return null!=e.multiaddr&&("string"===typeof e.multiaddr?l5.base64.decode(e.multiaddr,t.multiaddr=l5.newBuffer(l5.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=l5.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?l5.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e}(),e}();function h5(){return h5=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T,R,I=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=I.length>1&&void 0!==I[1]?I[1]:function(){})(0,"Storing each peerstore key under a single datastore key"),e.next=4,t.datastore.open();case 4:n={},a=[],i=!1,o=!1,e.prev=8,u=xm(t.datastore.query({prefix:"/peers"}));case 10:return e.next=12,u.next();case 12:if(!(i=!(c=e.sent).done)){e.next=28;break}if(l=c.value,f=l.key,p=l.value,a.push(f),h=f.toString(),d=h.split("/"),v=(0,wn.Z)(d,5),v[0],y=v[1],b=v[2],g=v[3],m=v[4],"peers"===y){e.next=19;break}return e.abrupt("continue",25);case 19:if(["protos","addrs","metadata","keys"].includes(b)){e.next=21;break}return e.abrupt("continue",25);case 21:if(g){e.next=23;break}return e.abrupt("continue",25);case 23:n[g]=n[g]||{addresses:[],protocols:[],metadata:[]},"protos"===b?(w=H4.decode(p),n[g].protocols=w.protocols.sort()):"addrs"===b?(k=J4.decode(p),n[g].addresses=k.addrs.sort((function(e,t){return Gx(e.multiaddr).toString().localeCompare(Gx(t.multiaddr).toString())})),k.certifiedRecord&&k.certifiedRecord.raw&&(n[g].peerRecordEnvelope=k.certifiedRecord.raw)):"metadata"===b?n[g].metadata.push({key:m,value:p}):"keys"===b&&(n[g].pubKey=p);case 25:i=!1,e.next=10;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(8),o=!0,s=e.t0;case 34:if(e.prev=34,e.prev=35,!i||null==u.return){e.next=39;break}return e.next=39,u.return();case 39:if(e.prev=39,!o){e.next=42;break}throw s;case 42:return e.finish(39);case 43:return e.finish(34);case 44:r(33,"Read peer data from store"),x=0,_=a;case 46:if(!(x<_.length)){e.next=53;break}return E=_[x],e.next=50,t.datastore.delete(E);case 50:x++,e.next=46;break;case 53:r(66,"Removed existing peer data from store"),S=0,A=Object.keys(n);case 55:if(!(S<A.length)){e.next=65;break}return C=A[S],(T=n[C]).metadata=T.metadata.sort((function(e,t){return e.key.localeCompare(t.key)})),R=r5.encode(T).finish(),e.next=62,t.datastore.put(new LR("/peers/".concat(C)),R);case 62:S++,e.next=55;break;case 65:return e.next=67,t.datastore.close();case 67:r(100,"Stored each peerstore key under a single datastore key");case 68:case"end":return e.stop()}}),e,null,[[8,30,34,44],[35,,39,43]])}))),h5.apply(this,arguments)}function d5(){return d5=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T,R,I,P,D,N,O=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=O.length>1&&void 0!==O[1]?O[1]:function(){})(0,"Storing each peerstore key under a multiple datastore keys"),e.next=4,t.datastore.open();case 4:n={},a=[],i=!1,o=!1,e.prev=8,u=xm(t.datastore.query({prefix:"/peers"}));case 10:return e.next=12,u.next();case 12:if(!(i=!(c=e.sent).done)){e.next=21;break}l=c.value,f=l.key,p=l.value,a.push(f),h=f.toString(),d=h.split("/"),v=(0,wn.Z)(d,3),v[0],v[1],y=v[2],n[y]=r5.decode(p);case 18:i=!1,e.next=10;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(8),o=!0,s=e.t0;case 27:if(e.prev=27,e.prev=28,!i||null==u.return){e.next=32;break}return e.next=32,u.return();case 32:if(e.prev=32,!o){e.next=35;break}throw s;case 35:return e.finish(32);case 36:return e.finish(27);case 37:r(33,"Read peer data from store"),b=0,g=a;case 39:if(!(b<g.length)){e.next=46;break}return m=g[b],e.next=43,t.datastore.delete(m);case 43:b++,e.next=39;break;case 46:r(66,"Removed existing peer data from store"),w=0,k=Object.entries(n);case 48:if(!(w<k.length)){e.next=83;break}if(x=(0,wn.Z)(k[w],2),_=x[0],!((E=x[1]).protocols&&E.protocols.length>0)){e.next=53;break}return e.next=53,t.datastore.put(new LR("/peers/protos/".concat(_)),H4.encode({protocols:E.protocols}).finish());case 53:if(!(E.addresses&&E.addresses.length>0)){e.next=59;break}return S=E.peerRecordEnvelope,A=void 0,S&&(C=s5.decode(S),T=p5.decode(C.payload),A={raw:S,seq:T.seq}),e.next=59,t.datastore.put(new LR("/peers/addrs/".concat(_)),J4.encode({addrs:E.addresses,certifiedRecord:A}).finish());case 59:if(!(E.metadata&&E.metadata.length>0)){e.next=77;break}R=(0,zn.Z)(E.metadata),e.prev=61,R.s();case 63:if((I=R.n()).done){e.next=69;break}return P=I.value,D=P.key,N=P.value,e.next=67,t.datastore.put(new LR("/peers/metadata/".concat(_,"/").concat(D)),N);case 67:e.next=63;break;case 69:e.next=74;break;case 71:e.prev=71,e.t1=e.catch(61),R.e(e.t1);case 74:return e.prev=74,R.f(),e.finish(74);case 77:if(!E.pubKey){e.next=80;break}return e.next=80,t.datastore.put(new LR("/peers/keys/".concat(_)),E.pubKey);case 80:w++,e.next=48;break;case 83:return e.next=85,t.datastore.close();case 85:r(100,"Stored each peerstore key under multiple datastore keys");case 86:case"end":return e.stop()}}),e,null,[[8,23,27,37],[28,,32,36],[61,71,74,77]])}))),d5.apply(this,arguments)}ld.util.Long=void 0,ld.configure();var v5={version:12,description:"Store each peerstore peer under a single datastore key",migrate:function(e){return h5.apply(this,arguments)},revert:function(e){return d5.apply(this,arguments)}},y5={description:"Empty migration.",migrate:function(){},revert:function(){},empty:!0},b5=[Object.assign({version:1},y5),Object.assign({version:2},y5),Object.assign({version:3},y5),Object.assign({version:4},y5),Object.assign({version:5},y5),Object.assign({version:6},y5),Object.assign({version:7},y5),H3,k4,B4,z4,v5],g5=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="NonReversibleMigrationError",n.code=r.code,n.message=e,n}return Sn(r)}(On(Error));g5.code="ERR_NON_REVERSIBLE_MIGRATION";var m5=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="NotInitializedRepoError",n.code=r.code,n.message=e,n}return Sn(r)}(On(Error));m5.code="ERR_NOT_INITIALIZED_REPO";var w5=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="RequiredParameterError",n.code=r.code,n.message=e,n}return Sn(r)}(On(Error));w5.code="ERR_REQUIRED_PARAMETER";var k5=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="InvalidValueError",n.code=r.code,n.message=e,n}return Sn(r)}(On(Error));k5.code="ERR_INVALID_VALUE";var x5=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="MissingRepoOptionsError",n.code=r.code,n.message=e,n}return Sn(r)}(On(Error));x5.code="ERR_MISSING_REPO_OPTIONS";var _5=Gh("ipfs:repo:migrator:repo:init");function E5(e){return S5.apply(this,arguments)}function S5(){return S5=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new x5("Please pass repo options when trying to open a repo");case 2:return r=t.root,e.prev=3,e.next=6,r.open();case 6:return e.next=8,r.has(_4);case 8:return n=e.sent,e.next=11,r.has(x4);case 11:if(a=e.sent,n&&a){e.next=16;break}return _5("Version entry present: ".concat(n)),_5("Config entry present: ".concat(a)),e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(3),_5("While checking if repo is initialized error was thrown: "+e.t0.message),e.abrupt("return",!1);case 23:if(e.prev=23,void 0===r){e.next=32;break}return e.prev=25,e.next=28,r.close();case 28:e.next=32;break;case 30:e.prev=30,e.t1=e.catch(25);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[3,19,23,33],[25,30]])}))),S5.apply(this,arguments)}function A5(e){return C5.apply(this,arguments)}function C5(){return(C5=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E5(t);case 2:if(e.sent){e.next=4;break}throw new m5("Repo is not initialized!");case 4:return r=t.root,e.next=7,r.open();case 7:return e.prev=7,e.t0=parseInt,e.t1=uN,e.next=12,r.get(_4);case 12:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 15:return e.prev=15,e.next=18,r.close();case 18:return e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[7,,15,19]])})))).apply(this,arguments)}function T5(e,t){return R5.apply(this,arguments)}function R5(){return R5=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new x5("Please pass repo options when trying to open a repo");case 2:return n=r.root,e.next=5,n.open();case 5:return e.next=7,n.put(_4,mm(String(t)));case 7:return e.next=9,n.close();case 9:case"end":return e.stop()}}),e)}))),R5.apply(this,arguments)}var I5=Gh("ipfs:repo:migrator");function P5(e){return e=e||b5,Array.isArray(e)&&0!==e.length?e[e.length-1].version:0}function D5(e,t,r,n){return N5.apply(this,arguments)}function N5(){return N5=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h,d,v,y,b,g,m=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null!==(i=(u=m.length>4&&void 0!==m[4]?m[4]:{}).ignoreLock)&&void 0!==i&&i,l=u.onProgress,f=null!==(o=u.isDryRun)&&void 0!==o&&o,p=null!==(s=u.migrations)&&void 0!==s?s:b5,t){e.next=7;break}throw new M5.RequiredParameterError("Path argument is required!");case 7:if(n){e.next=9;break}throw new M5.RequiredParameterError("repoOptions argument is required!");case 9:if(a){e.next=11;break}throw new M5.RequiredParameterError("toVersion argument is required!");case 11:if(Number.isInteger(a)&&!(a<=0)){e.next=13;break}throw new M5.InvalidValueError("Version has to be positive integer!");case 13:return r=T4(r),e.next=16,A5(r);case 16:if((h=e.sent)!==a){e.next=20;break}return I5("Nothing to migrate."),e.abrupt("return");case 20:if(!(h>a)){e.next=22;break}throw new M5.InvalidValueError("Current repo's version (".concat(h,") is higher then toVersion (").concat(a,"), you probably wanted to revert it?"));case 22:if(B5(p,h,a),f||c){e.next=27;break}return e.next=26,n.repoLock.lock(t);case 26:d=e.sent;case 27:e.prev=27,v=(0,zn.Z)(p),e.prev=29,b=Fh().mark((function e(){var t,n,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.value,!(void 0!==a&&t.version>a)){e.next=3;break}return e.abrupt("return","break");case 3:if(!(t.version<=h)){e.next=5;break}return e.abrupt("return","continue");case 5:if(I5("Migrating version ".concat(t.version)),e.prev=6,f){e.next=12;break}return n=function(){},l&&(n=function(e,r){return l(t.version,e.toFixed(2),r)}),e.next=12,t.migrate(r,n);case 12:e.next=21;break;case 14:return e.prev=14,e.t0=e.catch(6),i=t.version-1,I5("An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ".concat(i)),e.next=20,T5(i,r);case 20:throw new Error("During migration to version ".concat(t.version," exception was raised: ").concat(e.t0.stack||e.t0.message||e.t0));case 21:I5("Migrating to version ".concat(t.version," finished"));case 22:case"end":return e.stop()}}),e,null,[[6,14]])})),v.s();case 32:if((y=v.n()).done){e.next=41;break}return e.delegateYield(b(),"t0",34);case 34:if("break"!==(g=e.t0)){e.next=37;break}return e.abrupt("break",41);case 37:if("continue"!==g){e.next=39;break}return e.abrupt("continue",39);case 39:e.next=32;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(29),v.e(e.t1);case 46:return e.prev=46,v.f(),e.finish(46);case 49:if(f){e.next=52;break}return e.next=52,T5(a||P5(p),r);case 52:I5("Repo successfully migrated",void 0!==a?"to version ".concat(a,"!"):"to latest version!");case 53:if(e.prev=53,f||c||!d){e.next=57;break}return e.next=57,d.close();case 57:return e.finish(53);case 58:case"end":return e.stop()}}),e,null,[[27,,53,58],[29,43,46,49]])}))),N5.apply(this,arguments)}function O5(e,t,r,n){return L5.apply(this,arguments)}function L5(){return L5=Zh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null!==(i=(u=w.length>4&&void 0!==w[4]?w[4]:{}).ignoreLock)&&void 0!==i&&i,l=u.onProgress,f=null!==(o=u.isDryRun)&&void 0!==o&&o,p=null!==(s=u.migrations)&&void 0!==s?s:b5,t){e.next=7;break}throw new M5.RequiredParameterError("Path argument is required!");case 7:if(n){e.next=9;break}throw new M5.RequiredParameterError("repoOptions argument is required!");case 9:if(a){e.next=11;break}throw new M5.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");case 11:if(Number.isInteger(a)&&!(a<=0)){e.next=13;break}throw new M5.InvalidValueError("Version has to be positive integer!");case 13:return r=T4(r),e.next=16,A5(r);case 16:if((h=e.sent)!==a){e.next=20;break}return I5("Nothing to revert."),e.abrupt("return");case 20:if(!(h<a)){e.next=22;break}throw new M5.InvalidValueError("Current repo's version (".concat(h,") is lower then toVersion (").concat(a,"), you probably wanted to migrate it?"));case 22:if(B5(p,a,h,!0),f||c){e.next=27;break}return e.next=26,n.repoLock.lock(t);case 26:d=e.sent;case 27:I5("Reverting from version ".concat(h," to ").concat(a)),e.prev=28,v=p.slice().reverse(),y=(0,zn.Z)(v),e.prev=31,g=Fh().mark((function e(){var t,n,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=b.value).version<=a)){e.next=3;break}return e.abrupt("return","break");case 3:if(!(t.version>h)){e.next=5;break}return e.abrupt("return","continue");case 5:if(I5("Reverting migration version ".concat(t.version)),e.prev=6,f){e.next=12;break}return n=function(){},l&&(n=function(e,r){return l(t.version,e.toFixed(2),r)}),e.next=12,t.revert(r,n);case 12:e.next=22;break;case 14:return e.prev=14,e.t0=e.catch(6),i=t.version,I5("An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ".concat(i)),e.next=20,T5(i,r);case 20:throw e.t0.message="During reversion to version ".concat(t.version," exception was raised: ").concat(e.t0.message),e.t0;case 22:I5("Reverting to version ".concat(t.version," finished"));case 23:case"end":return e.stop()}}),e,null,[[6,14]])})),y.s();case 34:if((b=y.n()).done){e.next=43;break}return e.delegateYield(g(),"t0",36);case 36:if("break"!==(m=e.t0)){e.next=39;break}return e.abrupt("break",43);case 39:if("continue"!==m){e.next=41;break}return e.abrupt("continue",41);case 41:e.next=34;break;case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(31),y.e(e.t1);case 48:return e.prev=48,y.f(),e.finish(48);case 51:if(f){e.next=54;break}return e.next=54,T5(a,r);case 54:I5("All migrations successfully reverted to version ".concat(a,"!"));case 55:if(e.prev=55,f||c||!d){e.next=59;break}return e.next=59,d.close();case 59:return e.finish(55);case 60:case"end":return e.stop()}}),e,null,[[28,,55,60],[31,45,48,51]])}))),L5.apply(this,arguments)}function B5(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0,o=(0,zn.Z)(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s.version>r)break;if(s.version>t){if(a&&!s.revert)throw new M5.NonReversibleMigrationError("It is not possible to revert to version ".concat(t," because migration version ").concat(s.version," is not reversible. Cancelling reversion."));i++}}}catch(sY){o.e(sY)}finally{o.f()}if(i!==r-t)throw new M5.InvalidValueError("The ipfs-repo-migrations package does not have all migration to migrate from version ".concat(t," to ").concat(r))}var M5=jt,U5=__webpack_require__(1438),j5=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="LockExistsError",n.code=r.code,n}return Sn(r)}(On(Error));j5.code="ERR_LOCK_EXISTS";var F5=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="NotFoundError",n.code=r.code,n}return Sn(r)}(On(Error));F5.code="ERR_NOT_FOUND";var z5=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="InvalidRepoVersionError",n.code=r.code,n}return Sn(r)}(On(Error));z5.code="ERR_INVALID_REPO_VERSION";var Z5="ERR_REPO_NOT_INITIALIZED";function q5(e,t,r){return V5.apply(this,arguments)}function V5(){return V5=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:if(i=W5(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){e(Boolean(n.result))}})));case 9:case"end":return e.stop()}}),e)}))),V5.apply(this,arguments)}function K5(e,t,r,n){return H5.apply(this,arguments)}function H5(){return H5=Zh(Fh().mark((function e(t,r,n,a){var i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",r(t));case 4:if(i=W5(a)){e.next=7;break}throw new F5;case 7:return e.abrupt("return",new Promise((function(e,r){var n=i.store("readonly").get(t.toString());n.transaction.onabort=function(){r(n.transaction.error)},n.transaction.oncomplete=function(){if(n.result)return e(n.result);r(new F5)}})));case 8:case"end":return e.stop()}}),e)}))),H5.apply(this,arguments)}function W5(e){for(var t=e;t.db||t.child;)if("level-js"===(t=t.db||t.child).type||"Level"===t.constructor.name)return t}var G5=Gh("ipfs:repo:version"),Y5=new LR("version");var Q5=zI.default?zI.default:zI,J5=new LR("config");function X5(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function $5(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X5(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");var r=t.deep,n=t.compare,a=[],i=[],o=function e(t){var r=a.indexOf(t);if(-1!==r)return i[r];var n=[];return a.push(t),i.push(n),n.push.apply(n,(0,kn.Z)(t.map((function(t){return Array.isArray(t)?e(t):X5(t)?s(t):t})))),n},s=function e(t){var s=a.indexOf(t);if(-1!==s)return i[s];var u={},c=Object.keys(t).sort(n);a.push(t),i.push(u);var l,f=(0,zn.Z)(c);try{for(f.s();!(l=f.n()).done;){var p=l.value,h=t[p],d=void 0;d=r&&Array.isArray(h)?o(h):r&&X5(h)?e(h):h,Object.defineProperty(u,p,So(So({},Object.getOwnPropertyDescriptor(t,p)),{},{value:d}))}}catch(sY){f.e(sY)}finally{f.f()}return u};return Array.isArray(e)?r?o(e):e.slice():s(e)}var e6=new LR("datastore_spec");var t6=new LR("api");function r6(e){var t=bv.asCID(e);if(null==t)throw cd(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==Pg.code?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}var n6=Gh("ipfs:repo:lock:memory"),a6="repo.lock",i6={};function o6(){return o6=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n6("locking %s",r=t+"/"+a6),!0!==i6[r]){e.next=4;break}throw new j5("Lock already being held for file: ".concat(r));case 4:return i6[r]=!0,n={close:function(){return Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i6[r]&&delete i6[r];case 1:case"end":return e.stop()}}),e)})))()}},e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),o6.apply(this,arguments)}function s6(){return s6=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n6("checking lock: ".concat(r=t+"/"+a6)),e.abrupt("return",Boolean(i6[r]));case 3:case"end":return e.stop()}}),e)}))),s6.apply(this,arguments)}var u6={lock:function(e){return o6.apply(this,arguments)},locked:function(e){return s6.apply(this,arguments)}},c6={autoMigrate:!0,onMigrationProgress:function(){},repoOwner:!0,repoLock:u6},l6={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};function f6(e){var t=bv.asCID(e);if(null==t)throw cd(new Error("Not a valid cid"),"ERR_INVALID_CID");var r=uv.encode(t.multihash.bytes);return new LR("/"+r.slice(1).toUpperCase(),!1)}function p6(e){return Gd(uv.decode("b".concat(e.toString().toLowerCase().substring(1))))}var h6=Gh("ipfs:repo:utils:walk-dag");function d6(e,t,r,n){return v6.apply(this,arguments)}function v6(){return v6=Kh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,km(r.get(t,a));case 3:return i=e.sent,e.next=6,km(n(t.code));case 6:o=e.sent,s=gJ({bytes:i,cid:t,codec:o}),u=(0,zn.Z)(s.links()),e.prev=9,u.s();case 11:if((c=u.n()).done){e.next=18;break}return l=(0,wn.Z)(c.value,2),f=l[1],e.next=15,f;case 15:return e.delegateYield(JD(xm(d6(f,r,n,a))),"t0",16);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(9),u.e(e.t1);case 23:return e.prev=23,u.f(),e.finish(23);case 26:e.next=32;break;case 28:throw e.prev=28,e.t2=e.catch(0),h6("Could not walk DAG for CID",t.toString(),e.t2),e.t2;case 32:case"end":return e.stop()}}),e,null,[[0,28],[9,20,23,26]])}))),v6.apply(this,arguments)}var y6=function(e,t,r){Cn(a,e);var n=Dn(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(xn(this,a),e=n.call(this),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"===typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");return e.maxSize=t.maxSize,e.maxAge=t.maxAge||Number.POSITIVE_INFINITY,e.onEviction=t.onEviction,e.cache=new Map,e.oldCache=new Map,e._size=0,e}return Sn(a,[{key:"_emitEvictions",value:function(e){if("function"===typeof this.onEviction){var t,r=(0,zn.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=(0,wn.Z)(t.value,2),a=n[0],i=n[1];this.onEviction(a,i.value)}}catch(sY){r.e(sY)}finally{r.f()}}}},{key:"_deleteIfExpired",value:function(e,t){return"number"===typeof t.expiry&&t.expiry<=Date.now()&&("function"===typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}},{key:"_getOrDeleteIfExpired",value:function(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}},{key:"_getItemValue",value:function(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}},{key:"_peek",value:function(e,t){var r=t.get(e);return this._getItemValue(e,r)}},{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}},{key:"_moveToRecent",value:function(e,t){this.oldCache.delete(e),this._set(e,t)}},{key:"_entriesAscending",value:Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,zn.Z)(this.oldCache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=13;break}if(n=r.value,a=(0,wn.Z)(n,2),i=a[0],o=a[1],this.cache.has(i)){e.next=11;break}if(!1!==this._deleteIfExpired(i,o)){e.next=11;break}return e.next=11,n;case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:s=(0,zn.Z)(this.cache),e.prev=22,s.s();case 24:if((u=s.n()).done){e.next=33;break}if(c=u.value,l=(0,wn.Z)(c,2),f=l[0],p=l[1],!1!==this._deleteIfExpired(f,p)){e.next=31;break}return e.next=31,c;case 31:e.next=24;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(22),s.e(e.t1);case 38:return e.prev=38,s.f(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[1,15,18,21],[22,35,38,41]])}))},{key:"get",value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){var r=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,r))return this._moveToRecent(e,r),r.value}}},{key:"set",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).maxAge,n=void 0===r?this.maxAge:r,a="number"===typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:a}):this._set(e,{value:t,expiry:a})}},{key:"has",value:function(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}},{key:"peek",value:function(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"resize",value:function(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");var t=(0,kn.Z)(this._entriesAscending()),r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}},{key:"keys",value:Fh().mark((function e(){var t,r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,zn.Z)(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=(0,wn.Z)(r.value,1),a=n[0],e.next=7,a;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:Fh().mark((function e(){var t,r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,zn.Z)(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=(0,wn.Z)(r.value,2),a=n[1],e.next=7,a;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:t,value:Fh().mark((function(){var e,t,r,n,a,i,o,s,u,c,l,f;return Fh().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:e=(0,zn.Z)(this.cache),p.prev=1,e.s();case 3:if((t=e.n()).done){p.next=12;break}if(r=t.value,n=(0,wn.Z)(r,2),a=n[0],i=n[1],!1!==this._deleteIfExpired(a,i)){p.next=10;break}return p.next=10,[a,i.value];case 10:p.next=3;break;case 12:p.next=17;break;case 14:p.prev=14,p.t0=p.catch(1),e.e(p.t0);case 17:return p.prev=17,e.f(),p.finish(17);case 20:o=(0,zn.Z)(this.oldCache),p.prev=21,o.s();case 23:if((s=o.n()).done){p.next=33;break}if(u=s.value,c=(0,wn.Z)(u,2),l=c[0],f=c[1],this.cache.has(l)){p.next=31;break}if(!1!==this._deleteIfExpired(l,f)){p.next=31;break}return p.next=31,[l,f.value];case 31:p.next=23;break;case 33:p.next=38;break;case 35:p.prev=35,p.t1=p.catch(21),o.e(p.t1);case 38:return p.prev=38,o.f(),p.finish(38);case 41:case"end":return p.stop()}}),i,this,[[1,14,17,20],[21,35,38,41]])}))},{key:"entriesDescending",value:Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,kn.Z)(this.cache),r=t.length-1;case 2:if(!(r>=0)){e.next=12;break}if(n=t[r],a=(0,wn.Z)(n,2),i=a[0],o=a[1],!1!==this._deleteIfExpired(i,o)){e.next=9;break}return e.next=9,[i,o.value];case 9:--r,e.next=2;break;case 12:t=(0,kn.Z)(this.oldCache),s=t.length-1;case 14:if(!(s>=0)){e.next=25;break}if(u=t[s],c=(0,wn.Z)(u,2),l=c[0],f=c[1],this.cache.has(l)){e.next=22;break}if(!1!==this._deleteIfExpired(l,f)){e.next=22;break}return e.next=22,[l,f.value];case 22:--s,e.next=14;break;case 25:case"end":return e.stop()}}),e,this)}))},{key:"entriesAscending",value:Fh().mark((function e(){var t,r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,zn.Z)(this._entriesAscending()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=(0,wn.Z)(r.value,2),a=n[0],i=n[1],e.next=7,[a,i.value];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"size",get:function(){if(!this._size)return this.oldCache.size;var e,t=0,r=(0,zn.Z)(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(sY){r.e(sY)}finally{r.f()}return Math.min(this._size+t,this.maxSize)}},{key:"entries",value:function(){return this.entriesAscending()}},{key:"forEach",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=(0,zn.Z)(this.entriesAscending());try{for(n.s();!(t=n.n()).done;){var a=(0,wn.Z)(t.value,2),i=a[0],o=a[1];e.call(r,o,i,this)}}catch(sY){n.e(sY)}finally{n.f()}}},{key:r,get:function(){return JSON.stringify((0,kn.Z)(this.entriesAscending()))}}]),a}(On(Map),Symbol.iterator,Symbol.toStringTag);var b6=function(){function e(t){var r=t.pinstore,n=t.blockstore,a=t.loadCodec;xn(this,e),this.pinstore=r,this.blockstore=n,this.loadCodec=a,this.log=Gh("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}return Sn(e,[{key:"pinDirectly",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.blockstore.get(t,r);case 3:return n={depth:0},0!==t.version&&(n.version=t.version),t.code!==ey&&(n.codec=t.code),r.metadata&&(n.metadata=r.metadata),e.abrupt("return",this.pinstore.put(f6(t),jb(n)));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unpin",value:function(e,t){return this.pinstore.delete(f6(e),t)}},{key:"pinRecursively",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchCompleteDag(t,r);case 3:return n={depth:1/0},0!==t.version&&(n.version=t.version),t.code!==ey&&(n.codec=t.code),r.metadata&&(n.metadata=r.metadata),e.next=9,this.pinstore.put(f6(t),jb(n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"directKeys",value:function(e){var t=this;return Kh(Fh().mark((function e(){var r,n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t.pinstore.query({filters:[function(e){return 0===Kb(e.value).depth}]}));case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=17;break}return s=o.value,u=Kb(s.value),c=u.version||0,l=null!=u.codec?u.codec:ey,f=p6(s.key),e.next=14,{cid:bv.create(c,l,f),metadata:u.metadata};case 14:r=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==i.return){e.next=28;break}return e.next=28,km(i.return());case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})))()}},{key:"recursiveKeys",value:function(e){var t=this;return Kh(Fh().mark((function e(){var r,n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t.pinstore.query({filters:[function(e){return Kb(e.value).depth===1/0}]}));case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=17;break}return s=o.value,u=Kb(s.value),c=u.version||0,l=null!=u.codec?u.codec:ey,f=p6(s.key),e.next=14,{cid:bv.create(c,l,f),metadata:u.metadata};case 14:r=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==i.return){e.next=28;break}return e.next=28,km(i.return());case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})))()}},{key:"indirectKeys",value:function(e){var t=this;return Kh(Fh().mark((function r(){var n,a,i,o,s,u,c,l,f,p,h,d,v;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,a=!1,r.prev=2,o=xm(t.recursiveKeys());case 4:return r.next=6,km(o.next());case 6:if(!(n=!(s=r.sent).done)){r.next=46;break}u=s.value.cid,c=!1,l=!1,r.prev=10,p=xm(d6(u,t.blockstore,t.loadCodec,e));case 12:return r.next=14,km(p.next());case 14:if(!(c=!(h=r.sent).done)){r.next=27;break}return d=h.value,v=[tN.recursive],r.next=19,km(t.isPinnedWithType(d,v));case 19:if(!r.sent.pinned){r.next=22;break}return r.abrupt("continue",24);case 22:return r.next=24,d;case 24:c=!1,r.next=12;break;case 27:r.next=33;break;case 29:r.prev=29,r.t0=r.catch(10),l=!0,f=r.t0;case 33:if(r.prev=33,r.prev=34,!c||null==p.return){r.next=38;break}return r.next=38,km(p.return());case 38:if(r.prev=38,!l){r.next=41;break}throw f;case 41:return r.finish(38);case 42:return r.finish(33);case 43:n=!1,r.next=4;break;case 46:r.next=52;break;case 48:r.prev=48,r.t1=r.catch(2),a=!0,i=r.t1;case 52:if(r.prev=52,r.prev=53,!n||null==o.return){r.next=57;break}return r.next=57,km(o.return());case 57:if(r.prev=57,!a){r.next=60;break}throw i;case 60:return r.finish(57);case 61:return r.finish(52);case 62:case"end":return r.stop()}}),r,null,[[2,48,52,62],[10,29,33,43],[34,,38,42],[53,,57,61]])})))()}},{key:"isPinnedWithType",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function(){return p=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,f,p,h,d;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=xm(r);case 4:return e.next=6,km(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=42;break}u=s.value.cid,c=!1,f=!1,e.prev=10,h=xm(d6(u,l.blockstore,l.loadCodec));case 12:return e.next=14,km(h.next());case 14:if(!(c=!(d=e.sent).done)){e.next=23;break}if(!d.value.equals(t)){e.next=20;break}return e.next=19,u;case 19:return e.abrupt("return");case 20:c=!1,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(10),f=!0,p=e.t0;case 29:if(e.prev=29,e.prev=30,!c||null==h.return){e.next=34;break}return e.next=34,km(h.return());case 34:if(e.prev=34,!f){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(29);case 39:n=!1,e.next=4;break;case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(2),a=!0,i=e.t1;case 48:if(e.prev=48,e.prev=49,!n||null==o.return){e.next=53;break}return e.next=53,km(o.return());case 53:if(e.prev=53,!a){e.next=56;break}throw i;case 56:return e.finish(53);case 57:return e.finish(48);case 58:case"end":return e.stop()}}),e,null,[[2,44,48,58],[10,25,29,39],[30,,34,38],[49,,53,57]])}))),p.apply(this,arguments)},f=function(e,t){return p.apply(this,arguments)},Array.isArray(r)||(r=[r]),a=r.includes(tN.all),i=r.includes(tN.direct),o=r.includes(tN.recursive),s=r.includes(tN.indirect),!(o||i||a)){e.next=14;break}return e.next=10,$J(this.pinstore.query({prefix:f6(t).toString(),filters:[function(e){if(a)return!0;var t=Kb(e.value);return r.includes(0===t.depth?tN.direct:tN.recursive)}],limit:1}));case 10:if(!(u=e.sent)){e.next=14;break}return c=Kb(u.value),e.abrupt("return",{cid:t,pinned:!0,reason:0===c.depth?tN.direct:tN.recursive,metadata:c.metadata});case 14:if(l=this,!a&&!s){e.next=21;break}return e.next=18,$J(f(t,this.recursiveKeys()));case 18:if(!(h=e.sent)){e.next=21;break}return e.abrupt("return",{cid:t,pinned:!0,reason:tN.indirect,parent:h});case 21:return e.abrupt("return",{cid:t,pinned:!1});case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"fetchCompleteDag",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o=this,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new y6({maxSize:null!==(r=(n=s.length>1&&void 0!==s[1]?s[1]:{}).cidCacheMaxSize)&&void 0!==r?r:2048}),i=function(){var e=Zh(Fh().mark((function e(t,r){var n,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.has(t.toString())){e.next=2;break}return e.abrupt("return");case 2:return a.set(t.toString(),!0),e.next=5,o.blockstore.get(t,r);case 5:return n=e.sent,e.next=8,o.loadCodec(t.code);case 8:return s=e.sent,u=gJ({bytes:n,cid:t,codec:s}),e.next=12,Promise.all((0,kn.Z)(u.links()).map((function(e){var t=(0,wn.Z)(e,2)[1];return i(t,r)})));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.next=5,i(t,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"checkPinType",value:function(e){if("string"!==typeof e||!Object.keys(tN).includes(e))throw function(e){var t="Invalid type '".concat(e,"', must be one of {direct, indirect, recursive, all}");return cd(new Error(t),"ERR_INVALID_PIN_TYPE")}(e);return!0}}]),e}();function g6(e,t){return m6.apply(this,arguments)}function m6(){return(m6=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.isPinnedWithType(t,tN.all);case 2:if(n=e.sent,a=n.pinned,i=n.reason,!a){e.next=7;break}throw cd(new Error("pinned: ".concat(i)),"ERR_BLOCK_PINNED");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w6=__webpack_require__(6155),k6=Gh("ipfs:repo:gc"),x6=sN().code,_6=256,E6=new LR("/local/filesroot");function S6(e){return A6.apply(this,arguments)}function A6(){return A6=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.pins,n=t.blockstore,a=t.loadCodec,i=t.root,o=Kh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,km(i.get(E6));case 3:t=e.sent,e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code!==x6){e.next=11;break}return k6("No blocks in MFS"),e.abrupt("return");case 11:throw e.t0;case 12:return r=bv.decode(t),e.next=15,r;case 15:return e.delegateYield(JD(xm(d6(r,n,a))),"t1",16);case 16:case"end":return e.stop()}}),e,null,[[0,6]])})))(),s=w6(dz(r.recursiveKeys(),(function(e){return e.cid})),r.indirectKeys(),dz(r.directKeys(),(function(e){return e.cid})),o),u=new Set,c=!1,l=!1,e.prev=6,p=xm(w6(s,o));case 8:return e.next=10,p.next();case 10:if(!(c=!(h=e.sent).done)){e.next=16;break}d=h.value,u.add(uv.encode(d.multihash.bytes));case 13:c=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),l=!0,f=e.t0;case 22:if(e.prev=22,e.prev=23,!c||null==p.return){e.next=27;break}return e.next=27,p.return();case 27:if(e.prev=27,!l){e.next=30;break}throw f;case 30:return e.finish(27);case 31:return e.finish(22);case 32:return e.abrupt("return",u);case 33:case"end":return e.stop()}}),e,null,[[6,18,22,32],[23,,27,31]])}))),A6.apply(this,arguments)}function C6(e,t,r){return T6.apply(this,arguments)}function T6(){return T6=Kh((function(e,t,r){var n=e.blockstore;return Fh().mark((function e(){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,i=0,o=function(){var e=Zh(Fh().mark((function e(r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Zh(Fh().mark((function e(){var o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a++,e.prev=1,o=uv.encode(r.multihash.bytes),!t.has(o)){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,e.next=8,n.delete(r);case 8:i++,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",{err:new Error("Could not delete block with CID ".concat(r,": ").concat(e.t0.message))});case 14:return e.abrupt("return",{cid:r});case 17:return e.prev=17,e.t1=e.catch(1),s="Could delete block with CID ".concat(r),k6(s,e.t1),e.abrupt("return",{err:new Error(s+": ".concat(e.t1.message))});case 22:case"end":return e.stop()}}),e,null,[[1,17],[5,11]])})));return function(){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.delegateYield(JD(xm(yF(Bz(dz(r,o),_6),(function(e){return vz(e,Boolean)})))),"t0",4);case 4:k6("Marked set has ".concat(t.size," unique blocks. Blockstore has ").concat(a," blocks. ")+"Deleted ".concat(i," blocks."));case 5:case"end":return e.stop()}}),e)}))()})),T6.apply(this,arguments)}var R6=Gh("ipfs:repo"),I6=Number.MAX_SAFE_INTEGER,P6=function(){function e(t,r,n,a){if(xn(this,e),"string"!==typeof t)throw new Error("missing repo path");if("function"!==typeof r)throw new Error("missing codec loader");this.options=Hh(c6,a),this.closed=!0,this.path=t,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;var i=n.blocks,o=n.pins;this.pins=new b6({pinstore:o,blockstore:i,loadCodec:r});var s,u,c=(s=this.pins,u=i,{open:function(){return u.open()},close:function(){return u.close()},query:function(e,t){return u.query(e,t)},queryKeys:function(e,t){return u.queryKeys(e,t)},get:function(e,t){return Zh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",u.get(e,t));case 1:case"end":return r.stop()}}),r)})))()},getMany:function(e,t){return Kh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(JD(xm(u.getMany(e,t))),"t0",1);case 1:case"end":return r.stop()}}),r)})))()},put:function(e,t,r){return Zh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.put(e,t,r);case 2:case"end":return n.stop()}}),n)})))()},putMany:function(e,t){return Kh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(JD(xm(u.putMany(e,t))),"t0",1);case 1:case"end":return r.stop()}}),r)})))()},has:function(e,t){return u.has(e,t)},delete:function(e,t){return Zh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g6(e,s);case 2:return r.abrupt("return",u.delete(e,t));case 3:case"end":return r.stop()}}),r)})))()},deleteMany:function(e,t){return u.deleteMany(dz(e,function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g6(t,s);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t)},batch:function(){return u.batch()}});this.blocks=function(e){return{open:function(){return e.open()},close:function(){return e.close()},query:function(t,r){return e.query(t,r)},queryKeys:function(t,r){return e.queryKeys(t,r)},get:function(t,r){return Zh(Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=r6(t)).isIdentity){n.next=3;break}return n.abrupt("return",Promise.resolve(a.digest));case 3:return n.abrupt("return",e.get(t,r));case 4:case"end":return n.stop()}}),n)})))()},getMany:function(e,t){var r=this;return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,r.get(c,t);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,km(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()},put:function(t,r,n){return Zh(Fh().mark((function a(){return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!r6(t).isIdentity){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,e.put(t,r,n);case 5:case"end":return a.stop()}}),a)})))()},putMany:function(t,r){return Kh(Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=nF({objectMode:!0}),(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(Zh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,OF(e.putMany(Kh(Fh().mark((function e(){var r,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,o=xm(t);case 4:return e.next=6,km(o.next());case 6:if(!(r=!(s=e.sent).done)){e.next=15;break}if(u=s.value,c=u.key,l=u.value,r6(c).isIdentity){e.next=11;break}return e.next=11,{key:c,value:l};case 11:n.push({key:c,value:l});case 12:r=!1,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),a=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!r||null==o.return){e.next=26;break}return e.next=26,km(o.return());case 26:if(e.prev=26,!a){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[2,17,21,31],[22,,26,30]])})))()));case 3:n.end(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),n.end(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))),r.delegateYield(JD(xm(n)),"t0",4);case 4:case"end":return r.stop()}}),r)})))()},has:function(t,r){return r6(t).isIdentity?Promise.resolve(!0):e.has(t,r)},delete:function(t,r){return r6(t).isIdentity?Promise.resolve():e.delete(t,r)},deleteMany:function(t,r){return e.deleteMany(vz(t,(function(e){return!r6(e).isIdentity})),r)},batch:function(){var t=e.batch();return{put:function(e,r){r6(e).isIdentity||t.put(e,r)},delete:function(e){r6(e).isIdentity||t.delete(e)},commit:function(e){return t.commit(e)}}}}}(c),this.version=function(e){return{exists:function(){return Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",q5(Y5,e.has.bind(e),e));case 1:case"end":return t.stop()}}),t)})))()},get:function(){return Zh(Fh().mark((function t(){var r;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K5(Y5,e.get.bind(e),e.has.bind(e),e);case 2:return r=t.sent,t.abrupt("return",parseInt(uN(r),10));case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return e.put(Y5,mm(String(t)))},check:function(e){var t=this;return Zh(Fh().mark((function r(){var n,a;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get();case 2:return n=r.sent,G5("comparing version: %s and %s",n,e),a=6===n&&7===e||6===e&&7===n,r.abrupt("return",n===e||a);case 6:case"end":return r.stop()}}),r)})))()}}}(this.root),this.config=function(e){var t=new Q5({concurrency:1}),r={getAll:function(){var t=arguments;return Zh(Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],r.next=3,K5(J5,e.get.bind(e),e.has.bind(e),e);case 3:return n=r.sent,r.abrupt("return",JSON.parse(uN(n)));case 5:case"end":return r.stop()}}),r)})))()},get:function(e){var t=arguments,r=this;return Zh(Fh().mark((function n(){var a,i,o;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:{},null!=e){n.next=3;break}throw new F5("Key ".concat(e," does not exist in config"));case 3:return n.next=5,r.getAll(a);case 5:if(i=n.sent,void 0!==(o=U3(i,e))){n.next=9;break}throw new F5("Key ".concat(e," does not exist in config"));case 9:return n.abrupt("return",o);case 10:case"end":return n.stop()}}),n)})))()},set:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof e&&!(e instanceof String))throw cd(new Error("Invalid key type: "+typeof e),"ERR_INVALID_KEY");if(void 0===r||r instanceof Uint8Array)throw cd(new Error("Invalid value type: "+typeof r),"ERR_INVALID_VALUE");return t.add((function(){return n({key:e,value:r},a.signal)}))},replace:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e instanceof Uint8Array)throw cd(new Error("Invalid value type: "+typeof e),"ERR_INVALID_VALUE");return t.add((function(){return n({key:void 0,value:e},r.signal)}))},exists:function(){return Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",q5(J5,e.has.bind(e),e));case 1:case"end":return t.stop()}}),t)})))()}};return r;function n(e,t){return a.apply(this,arguments)}function a(){return a=Zh(Fh().mark((function e(t,n){var a,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.aborted){e.next=2;break}return e.abrupt("return");case 2:if(a=t.key,o=t.value,!a){e.next=10;break}return e.next=7,r.getAll();case 7:return"object"===typeof(s=e.sent)&&null!==s&&uJ(s,a,o),e.abrupt("return",i(s));case 10:return e.abrupt("return",i(o));case 11:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function i(t){var r=mm(JSON.stringify(t,null,2));return e.put(J5,r)}}(this.root),this.spec=function(e){return{exists:function(){return e.has(e6)},get:function(){return Zh(Fh().mark((function t(){var r;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(e6);case 2:return r=t.sent,t.abrupt("return",JSON.parse(uN(r)));case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return Zh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.put(e6,mm(JSON.stringify($5(t,{deep:!0})))));case 1:case"end":return r.stop()}}),r)})))()}}}(this.root),this.apiAddr=function(e){return{get:function(){return Zh(Fh().mark((function t(){var r;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(t6);case 2:return r=t.sent,t.abrupt("return",r&&r.toString());case 4:case"end":return t.stop()}}),t)})))()},set:function(t){return e.put(t6,mm(t.toString()))},delete:function(){return e.delete(t6)}}}(this.root),this.gcLock=T0({name:t,singleProcess:!1!==this.options.repoOwner}),this.gc=function(e){var t=e.gcLock,r=e.pins,n=e.blockstore,a=e.root,i=e.loadCodec;function o(){return o=Kh(Fh().mark((function e(){var o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Date.now(),k6("Creating set of marked blocks"),e.next=4,km(t.writeLock());case 4:return s=e.sent,e.prev=5,e.next=8,km(S6({pins:r,blockstore:n,root:a,loadCodec:i}));case 8:return u=e.sent,c=n.queryKeys({}),e.delegateYield(JD(xm(C6({blockstore:n},u,c))),"t0",11);case 11:k6("Complete (".concat(Date.now()-o,"ms)"));case 12:return e.prev=12,s(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[5,,12,15]])}))),o.apply(this,arguments)}return function(){return o.apply(this,arguments)}}({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:r})}return Sn(e,[{key:"init",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R6("initializing at: %s",this.path),e.next=3,this._openRoot();case 3:return e.next=5,this.config.replace(O6(t));case 5:return e.next=7,this.spec.set(L6(t));case 7:return e.next=9,this.version.set(O3);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isInitialized",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,e.next=5,this._openRoot();case 5:return e.next=7,this._checkInitialized();case 7:return e.next=9,this.root.close();case 9:return e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"open",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed){e.next=2;break}throw cd(new Error("repo is already open"),"ERR_REPO_ALREADY_OPEN");case 2:return R6("opening at: %s",this.path),e.prev=3,e.next=6,this._openRoot();case 6:return e.next=8,this._checkInitialized();case 8:return e.next=10,this._openLock();case 10:return this._lockfile=e.sent,R6("acquired repo.lock"),e.next=14,this.version.check(O3);case 14:if(e.sent){e.next=24;break}return e.next=18,this._isAutoMigrationEnabled();case 18:if(!e.sent){e.next=23;break}return e.next=21,this._migrate(O3,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});case 21:e.next=24;break;case 23:throw new z5("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");case 24:return R6("creating datastore"),e.next=27,this.datastore.open();case 27:return R6("creating blocks"),e.next=30,this.blocks.open();case 30:return R6("creating keystore"),e.next=33,this.keys.open();case 33:return R6("creating pins"),e.next=36,this.pins.pinstore.open();case 36:this.closed=!1,R6("all opened"),e.next=53;break;case 40:if(e.prev=40,e.t0=e.catch(3),!this._lockfile){e.next=52;break}return e.prev=43,e.next=46,this._closeLock();case 46:this._lockfile=null,e.next=52;break;case 49:e.prev=49,e.t1=e.catch(43),R6("error removing lock",e.t1);case 52:throw e.t0;case 53:case"end":return e.stop()}}),e,this,[[3,40],[43,49]])})));return function(){return e.apply(this,arguments)}}()},{key:"_openRoot",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.root.open();case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"Already open"===e.t0.message){e.next=9;break}throw e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"_openLock",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.options.repoLock.lock(this.path);case 2:if("function"===typeof(t=e.sent).close){e.next=5;break}throw cd(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_closeLock",value:function(){return this._lockfile&&this._lockfile.close()}},{key:"_checkInitialized",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R6("init check"),e.prev=1,e.next=4,Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()]);case 4:r=e.sent,n=(0,wn.Z)(r,1),t=n[0],e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(1),"ERR_NOT_FOUND"!==e.t0.code){e.next=13;break}throw cd(new Error("repo is not initialized yet"),Z5,{path:this.path});case 13:throw e.t0;case 14:if(t){e.next=16;break}throw cd(new Error("repo is not initialized yet"),Z5,{path:this.path});case 16:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.closed){e.next=2;break}throw cd(new Error("repo is already closed"),"ERR_REPO_ALREADY_CLOSED");case 2:return R6("closing at: %s",this.path),e.prev=3,e.next=6,this.apiAddr.delete();case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),e.t0.code===Z5||e.t0.message.startsWith("ENOENT")){e.next=12;break}throw e.t0;case 12:return e.next=14,Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map((function(e){return e&&e.close()})));case 14:return R6("unlocking"),this.closed=!0,e.next=18,this._closeLock();case 18:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"exists",value:function(){return this.version.exists()}},{key:"stat",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.datastore||!this.keys){e.next=12;break}return e.next=3,Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),D6(this.datastore),D6(this.keys)]);case 3:return t=e.sent,r=(0,wn.Z)(t,5),n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=a.size+o+s,e.abrupt("return",{repoPath:this.path,storageMax:n,version:i,numObjects:a.count,repoSize:u});case 12:throw cd(new Error("repo is not initialized yet"),Z5,{path:this.path});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_isAutoMigrationEnabled",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.options.autoMigrate){e.next=2;break}return e.abrupt("return",this.options.autoMigrate);case 2:return e.prev=2,e.next=5,this.config.get("repoAutoMigrate");case 5:t=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(2),e.t0.code!==F5.code){e.next=14;break}t=!0,e.next=15;break;case 14:throw e.t0;case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"_migrate",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.version.get();case 2:if(!(e.sent>t)){e.next=8;break}return R6("reverting to version ".concat(t)),e.abrupt("return",O5(this.path,r,this.options,t,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}));case 8:return R6("migrating to version ".concat(t)),e.abrupt("return",D5(this.path,r,this.options,t,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_storageMaxStat",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.config.get("Datastore.StorageMax");case 3:return t=e.sent,e.abrupt("return",BigInt(U5(t)));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",BigInt(I6));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"_blockStat",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=BigInt(0),r=BigInt(0),!this.blocks){e.next=33;break}n=!1,a=!1,e.prev=5,o=xm(this.blocks.query({}));case 7:return e.next=9,o.next();case 9:if(!(n=!(s=e.sent).done)){e.next=17;break}u=s.value,c=u.key,l=u.value,t+=BigInt(1),r+=BigInt(l.byteLength),r+=BigInt(c.bytes.byteLength);case 14:n=!1,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),a=!0,i=e.t0;case 23:if(e.prev=23,e.prev=24,!n||null==o.return){e.next=28;break}return e.next=28,o.return();case 28:if(e.prev=28,!a){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(23);case 33:return e.abrupt("return",{count:t,size:r});case 34:case"end":return e.stop()}}),e,this,[[5,19,23,33],[24,,28,32]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function D6(e){return N6.apply(this,arguments)}function N6(){return(N6=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=BigInt(0),n=!1,a=!1,e.prev=3,o=xm(t.query({}));case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=14;break}u=s.value,r+=BigInt(u.value.byteLength),r+=BigInt(u.key.uint8Array().byteLength);case 11:n=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}function O6(e){return e.Datastore=Object.assign({},l6,U3(e,"datastore")),e}function L6(e){var t=So(So({},l6.Spec),U3(e,"Datastore.Spec"));return{type:t.type,mounts:t.mounts.map((function(e){return{mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc}}))}}function B6(e,t){return M6.apply(this,arguments)}function M6(){return M6=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=xm(t);case 4:return e.next=6,km(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=16;break}return u=s.value,e.next=10,km(r(u));case 10:if(!e.sent){e.next=13;break}return e.next=13,u;case 13:n=!1,e.next=4;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),a=!0,i=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==o.return){e.next=27;break}return e.next=27,km(o.return());case 27:if(e.prev=27,!a){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,null,[[2,18,22,32],[23,,27,31]])}))),M6.apply(this,arguments)}function U6(){return U6=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=xm(t);case 4:return e.next=6,km(o.next());case 6:if(!(n=!(s=e.sent).done)){e.next=13;break}return u=s.value,e.next=10,r(u);case 10:n=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,km(o.return());case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))),U6.apply(this,arguments)}function j6(e,t){return F6.apply(this,arguments)}function F6(){return F6=Kh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!(r<1)){e.next=3;break}return e.abrupt("return");case 3:a=!1,i=!1,e.prev=5,s=xm(t);case 7:return e.next=9,km(s.next());case 9:if(!(a=!(u=e.sent).done)){e.next=19;break}return c=u.value,e.next=13,c;case 13:if(++n!==r){e.next=16;break}return e.abrupt("return");case 16:a=!1,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),i=!0,o=e.t0;case 25:if(e.prev=25,e.prev=26,!a||null==s.return){e.next=30;break}return e.next=30,km(s.return());case 30:if(e.prev=30,!i){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[5,21,25,35],[26,,30,34]])}))),F6.apply(this,arguments)}function z6(e){return Z6.apply(this,arguments)}function Z6(){return Z6=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!1,a=!1,e.prev=3,o=xm(t);case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}u=s.value,r.push(u);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])}))),Z6.apply(this,arguments)}function q6(e,t){return V6.apply(this,arguments)}function V6(){return V6=Kh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,km(z6(t));case 2:return n=e.sent,e.delegateYield(JD(xm(n.sort(r))),"t0",4);case 4:case"end":return e.stop()}}),e)}))),V6.apply(this,arguments)}var K6=__webpack_require__(2164),H6=function(e){Cn(r,e);var t=Dn(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xn(this,r),(n=t.call(this)).db="string"===typeof e?new K6.Level(e,So(So({},a),{},{keyEncoding:"utf8",valueEncoding:"view"})):e,n.opts=So({createIfMissing:!0,compression:!1},a),n}return Sn(r,[{key:"open",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.open(this.opts);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),aN(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.put(t.toString(),r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),oN(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.get(t.toString());case 3:r=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0.notFound){e.next=10;break}throw sN(e.t0);case 10:throw oN(e.t0);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.get(t.toString());case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0.notFound){e.next=9;break}return e.abrupt("return",!1);case 9:throw e.t0;case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.del(t.toString());case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),iN(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){return this.db&&this.db.close()}},{key:"batch",value:function(){var e=this,t=[];return{put:function(e,r){t.push({type:"put",key:e.toString(),value:r})},delete:function(e){t.push({type:"del",key:e.toString()})},commit:function(){return e.db.batch(t)}}}},{key:"query",value:function(e){var t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((function(e,t){return B6(e,t)}),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((function(e,t){return q6(e,t)}),t));var r=e.offset,n=e.limit;if(r){var a=0;t=B6(t,(function(){return a++>=r}))}return n&&(t=j6(t,n)),t}},{key:"queryKeys",value:function(e){var t=function(e,t){return U6.apply(this,arguments)}(this._query({values:!1,prefix:e.prefix}),(function(e){return e.key}));Array.isArray(e.filters)&&(t=e.filters.reduce((function(e,t){return B6(e,t)}),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((function(e,t){return q6(e,t)}),t));var r=e.offset,n=e.limit;if(r){var a=0;t=B6(t,(function(){return a++>=r}))}return n&&(t=j6(t,n)),t}},{key:"_query",value:function(e){var t={keys:!0,keyEncoding:"buffer",values:e.values};if(null!=e.prefix){var r=e.prefix.toString();t.gte=r,t.lt=r+"\xff"}var n,a=this.db.iterator(t);if(a[Symbol.asyncIterator])return function(e){return W6.apply(this,arguments)}(a);if(null!=a.next&&null!=a.end)return n=a,(0,oi.Z)({},Symbol.asyncIterator,(function(){return{next:function(){return new Promise((function(e,t){n.next((function(r,a,i){return r?t(r):null==a?n.end((function(r){if(r)return t(r);e({done:!0,value:void 0})})):void e({done:!1,value:{key:new LR(a,!1),value:i}})}))}))},return:function(){return new Promise((function(e,t){n.end((function(r){if(r)return t(r);e({done:!0,value:void 0})}))}))}}}));throw new Error("Level returned incompatible iterator")}}]),r}($j);function W6(){return W6=Kh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t);case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=13;break}return s=(0,wn.Z)(o.value,2),u=s[0],c=s[1],e.next=10,{key:new LR(u,!1),value:c};case 10:r=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),n=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==i.return){e.next=24;break}return e.next=24,km(i.return());case 24:if(e.prev=24,!n){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.next=31,km(t.close());case 31:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))),W6.apply(this,arguments)}var G6=__webpack_require__(5959),Y6=function(e,t){return Kh(Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(kz(e));case 2:return n=r.sent,r.delegateYield(JD(xm(n.sort(t))),"t0",4);case 4:case"end":return r.stop()}}),r)})))()},Q6=function(){function e(){xn(this,e)}return Sn(e,[{key:"open",value:function(){return Promise.reject(new Error(".open is not implemented"))}},{key:"close",value:function(){return Promise.reject(new Error(".close is not implemented"))}},{key:"put",value:function(e,t,r){return Promise.reject(new Error(".put is not implemented"))}},{key:"get",value:function(e,t){return Promise.reject(new Error(".get is not implemented"))}},{key:"has",value:function(e,t){return Promise.reject(new Error(".has is not implemented"))}},{key:"delete",value:function(e,t){return Promise.reject(new Error(".delete is not implemented"))}},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,l=c.key,f=c.value,n.next=10,km(t.put(l,f,r));case 10:return n.next=12,{key:l,value:f};case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==s.return){n.next=26;break}return n.next=26,km(s.return());case 26:if(n.prev=26,!i){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,km(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"deleteMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=15;break}return c=u.value,n.next=10,km(t.delete(c,r));case 10:return n.next=12,c;case 12:a=!1,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),i=!0,o=n.t0;case 21:if(n.prev=21,n.prev=22,!a||null==s.return){n.next=26;break}return n.next=26,km(s.return());case 26:if(n.prev=26,!i){n.next=29;break}throw o;case 29:return n.finish(26);case 30:return n.finish(21);case 31:case"end":return n.stop()}}),n,null,[[2,17,21,31],[22,,26,30]])})))()}},{key:"batch",value:function(){var e=this,t=[],r=[];return{put:function(e,r){t.push({key:e,value:r})},delete:function(e){r.push(e)},commit:function(){var n=Zh(Fh().mark((function n(a){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,OF(e.putMany(t,a));case 2:return t=[],n.next=5,OF(e.deleteMany(r,a));case 5:r=[];case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}},{key:"_all",value:function(e,t){return Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._all is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"_allKeys",value:function(e,t){return Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("._allKeys is not implemented");case 1:case"end":return e.stop()}}),e)})))()}},{key:"query",value:function(e,t){var r=this._all(e,t);if(null!=e.prefix&&(r=vz(r,(function(t){return t.key.toString().startsWith(e.prefix||"")}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return vz(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return Y6(e,t)}),r)),null!=e.offset){var n=0;r=vz(r,(function(){return n++>=(e.offset||0)}))}return null!=e.limit&&(r=G6(r,e.limit)),r}},{key:"queryKeys",value:function(e,t){var r=this._allKeys(e,t);if(null!=e.prefix&&(r=vz(r,(function(t){return t.toString().startsWith(e.prefix||"")}))),Array.isArray(e.filters)&&(r=e.filters.reduce((function(e,t){return vz(e,t)}),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((function(e,t){return Y6(e,t)}),r)),null!=e.offset){var n=0;r=vz(r,(function(){return n++>=e.offset}))}return null!=e.limit&&(r=G6(r,e.limit)),r}}]),e}();function J6(e){var t=bv.asCID(e);if(!t)throw cd(new Error("Not a valid cid"),"ERR_INVALID_CID");return new LR("/"+uv.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function X6(e){return bv.createV1(Gg,Gd(uv.decode("b"+e.toString().slice(1).toLowerCase())))}function $6(e){var t,r,n=e.substring(0,1);if("/"===n)return $6(e.substring(1));t="b"===n.toLowerCase()?function(e){return uv.decode(e.toLowerCase()).subarray(2)}:"c"===n.toLowerCase()?function(e){return lv.decode(e.toLowerCase()).subarray(2)}:"z"===n?function(e){return ov.decode(e).subarray(2)}:"Q"===n?function(e){return ov.decode("z"+e)}:function(e){return uv.decode("b"+e.toLowerCase()).subarray(2)};for(var a=1;a<e.length;a++)try{r=t(e.substring(0,a))}catch(sY){if("Unexpected end of data"!==sY.message)throw sY}var i="/C";return r&&(i="/".concat(uv.encode(r).slice(1,-1).toUpperCase()||"C")),i}function e8(e){return So(So({},e),{},{prefix:e.prefix?$6(e.prefix):void 0,filters:e.filters?e.filters.map((function(e){return function(t){return e({key:X6(t.key),value:t.value})}})):void 0,orders:e.orders?e.orders.map((function(e){return function(t,r){return e({key:X6(t.key),value:t.value},{key:X6(r.key),value:r.value})}})):void 0})}function t8(e){return So(So({},e),{},{prefix:e.prefix?$6(e.prefix):void 0,filters:e.filters?e.filters.map((function(e){return function(t){return e(X6(t))}})):void 0,orders:e.orders?e.orders.map((function(e){return function(t,r){return e(X6(t),X6(r))}})):void 0})}var r8=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).child=e,n}return Sn(r,[{key:"open",value:function(){return this.child.open()}},{key:"close",value:function(){return this.child.close()}},{key:"query",value:function(e,t){var r=this;return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(r.child.query(e8(e),t));case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,l=c.key,f=c.value,n.next=10,{key:X6(l),value:f};case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,km(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"queryKeys",value:function(e,t){var r=this;return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(r.child.queryKeys(t8(e),t));case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,X6(c);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,km(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.child.get(J6(t),r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e,t){var r=this;return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,r.get(c,t);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,km(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.child.put(J6(t),r,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e,t){var r=this;return Kh(Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=nF({objectMode:!0}),(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(Zh(Fh().mark((function n(){var i;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=r.child,n.next=4,OF(r.child.putMany(Kh(Fh().mark((function r(){var n,o,s,u,c,l,f;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,o=!1,r.prev=2,u=xm(e);case 4:return r.next=6,km(u.next());case 6:if(!(n=!(c=r.sent).done)){r.next=19;break}return l=c.value,f=J6(l.key),r.next=11,km(i.has(f,t));case 11:if(r.sent){r.next=15;break}return r.next=15,{key:f,value:l.value};case 15:a.push(l);case 16:n=!1,r.next=4;break;case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(2),o=!0,s=r.t0;case 25:if(r.prev=25,r.prev=26,!n||null==u.return){r.next=30;break}return r.next=30,km(u.return());case 30:if(r.prev=30,!o){r.next=33;break}throw s;case 33:return r.finish(30);case 34:return r.finish(25);case 35:case"end":return r.stop()}}),r,null,[[2,21,25,35],[26,,30,34]])})))()));case 4:a.end(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a.end(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))),n.delegateYield(JD(xm(a)),"t0",4);case 4:case"end":return n.stop()}}),n)})))()}},{key:"has",value:function(e,t){return this.child.has(J6(e),t)}},{key:"delete",value:function(e,t){return this.child.delete(J6(e),t)}},{key:"deleteMany",value:function(e,t){var r=nF({objectMode:!0});return OF(this.child.deleteMany(Kh(Fh().mark((function t(){var n,a,i,o,s,u;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,o=xm(e);case 4:return t.next=6,km(o.next());case 6:if(!(n=!(s=t.sent).done)){t.next=14;break}return u=s.value,t.next=10,J6(u);case 10:r.push(u);case 11:n=!1,t.next=4;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(2),a=!0,i=t.t0;case 20:if(t.prev=20,t.prev=21,!n||null==o.return){t.next=25;break}return t.next=25,km(o.return());case 25:if(t.prev=25,!a){t.next=28;break}throw i;case 28:return t.finish(25);case 29:return t.finish(20);case 30:r.end();case 31:case"end":return t.stop()}}),t,null,[[2,16,20,30],[21,,25,29]])})))(),t)).catch((function(e){r.end(e)})),r}}]),r}(Q6);function n8(e,t,r){var n=r.path||"ipfs";return function(e,t,r,n){return new P6(e,t,r,n)}(n,(function(e){return t.getCodec(e)}),{root:new H6(n,{prefix:"",version:2}),blocks:new r8(new H6("".concat(n,"/blocks"),{prefix:"",version:2})),datastore:new H6("".concat(n,"/datastore"),{prefix:"",version:2}),keys:new H6("".concat(n,"/keys"),{prefix:"",version:2}),pins:new H6("".concat(n,"/pins"),{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||e,repoLock:u6})}var a8=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},i8=a8,o8=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),s8=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),u8=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return l8(this,e)}}]),e}(),c8=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return l8(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),l8=function(e,t){return new c8(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},f8=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new s8(t,r,n),this.decoder=new u8(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),p8=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new f8(t,r,n,a)},h8=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=i8(n,r),i=a.encode,o=a.decode;return p8({prefix:t,name:r,encode:i,decode:function(e){return o8(o(e))}})},d8=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return p8({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},v8=p8({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),y8=d8({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),b8=d8({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),g8=h8({prefix:"9",name:"base10",alphabet:"0123456789"}),m8=d8({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),w8=d8({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),k8=d8({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),x8=d8({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_8=d8({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),E8=d8({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),S8=d8({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),A8=d8({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),C8=d8({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),T8=d8({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),R8=d8({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),I8=h8({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),P8=h8({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),D8=h8({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),N8=h8({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),O8=d8({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),L8=d8({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),B8=d8({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),M8=d8({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),U8=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),j8=U8.reduce((function(e,t,r){return e[r]=t,e}),[]),F8=U8.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var z8=p8({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=j8[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=F8[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),Z8=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=K8;)r[n++]=255&t|q8,t/=128;for(;t&V8;)r[n++]=255&t|q8,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},q8=128,V8=-128,K8=Math.pow(2,31);var H8=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&G8)<<i:(n&G8)*Math.pow(2,i),i+=7}while(n>=W8);return e.bytes=o-r,a},W8=128,G8=127;var Y8=Math.pow(2,7),Q8=Math.pow(2,14),J8=Math.pow(2,21),X8=Math.pow(2,28),$8=Math.pow(2,35),e7=Math.pow(2,42),t7=Math.pow(2,49),r7=Math.pow(2,56),n7=Math.pow(2,63),a7={encode:Z8,decode:H8,encodingLength:function(e){return e<Y8?1:e<Q8?2:e<J8?3:e<X8?4:e<$8?5:e<e7?6:e<t7?7:e<r7?8:e<n7?9:10}},i7=a7,o7=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i7.encode(e,t,r),t},s7=function(e){return i7.encodingLength(e)},u7=function(e,t){var r=t.byteLength,n=s7(e),a=n+s7(r),i=new Uint8Array(a+r);return o7(e,i,0),o7(r,i,n),i.set(t,a),new c7(e,r,t,i)},c7=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),l7=function(e){var t=e.name,r=e.code,n=e.encode;return new f7(t,r,n)},f7=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?u7(this.code,r):r.then((function(e){return u7(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),p7=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h7=l7({name:"sha2-256",code:18,encode:p7("SHA-256")}),d7=l7({name:"sha2-512",code:19,encode:p7("SHA-512")}),v7=o8,y7={code:0,name:"identity",encode:v7,digest:function(e){return u7(0,v7(e))}},b7="raw",g7=85,m7=function(e){return o8(e)},w7=function(e){return o8(e)},k7=new TextEncoder,x7=new TextDecoder,_7="json",E7=512,S7=function(e){return k7.encode(JSON.stringify(e))},A7=function(e){return JSON.parse(x7.decode(e))},C7=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},Ft),zt),Zt),qt),Vt),Kt),Ht),Wt),Gt),Yt));So(So({},Qt),Jt);function T7(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function R7(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var I7=R7("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),P7=R7("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?T7(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),D7=So({utf8:I7,"utf-8":I7,hex:C7.base16,latin1:P7,ascii:P7,binary:P7},C7);var N7="ERR_SIGNATURE_NOT_VALID";dB._configure(),pB._configure(hB),vB._configure(yB);var O7,L7,B7=["uint64","int64","sint64","fixed64","sfixed64"];function M7(e){return function(e){var t,r=(0,zn.Z)(B7);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(){return BigInt(n.call(this).toString())}};for(r.s();!(t=r.n()).done;)n()}catch(sY){r.e(sY)}finally{r.f()}return e}(new pB(e))}function U7(){return function(e){var t,r=(0,zn.Z)(B7);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(e){return n.call(this,e.toString())}};for(r.s();!(t=r.n()).done;)n()}catch(sY){r.e(sY)}finally{r.f()}return e}(vB.create())}function j7(e,t){var r=M7(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function F7(e,t){var r=U7();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}function z7(e,t){return function(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}("message",O7.LENGTH_DELIMITED,e,t)}function Z7(e){return e instanceof Uint8Array?{get:function(t){return e[t]},set:function(t,r){e[t]=r}}:{get:function(t){return e.get(t)},set:function(t,r){e.set(t,r)}}}!function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(O7||(O7={})),function(e){var t;e.codec=function(){return null==t&&(t=z7((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.publicKey&&e.publicKey.byteLength>0)&&(t.uint32(10),t.bytes(e.publicKey)),(!0===r.writeDefaults||null!=e.payloadType&&e.payloadType.byteLength>0)&&(t.uint32(18),t.bytes(e.payloadType)),(!0===r.writeDefaults||null!=e.payload&&e.payload.byteLength>0)&&(t.uint32(26),t.bytes(e.payload)),(!0===r.writeDefaults||null!=e.signature&&e.signature.byteLength>0)&&(t.uint32(42),t.bytes(e.signature)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.payloadType=e.bytes();break;case 3:r.payload=e.bytes();break;case 5:r.signature=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return F7(t,e.codec())},e.decode=function(t){return j7(t,e.codec())}}(L7||(L7={}));var q7=4294967296,V7=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;xn(this,e),this.hi=t,this.lo=r}return Sn(e,[{key:"toBigInt",value:function(e){if(!0===e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){var t=1+~this.lo>>>0,r=~this.hi>>>0;return 0===t&&(r=r+1>>>0),-(BigInt(t)+(BigInt(r)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}},{key:"toNumber",value:function(e){return Number(this.toBigInt(e))}},{key:"zzDecode",value:function(){var t=-(1&this.lo),r=((this.lo>>>1|this.hi<<31)^t)>>>0;return new e((this.hi>>>1^t)>>>0,r)}},{key:"zzEncode",value:function(){var t=this.hi>>31;return new e(((this.hi<<1|this.lo>>>31)^t)>>>0,(this.lo<<1^t)>>>0)}},{key:"toBytes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Z7(e);this.hi>0;)r.set(t++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)r.set(t++,127&this.lo|128),this.lo=this.lo>>>7;r.set(t++,this.lo)}}],[{key:"fromBigInt",value:function(t){if(0n===t)return new e;var r=t<0;r&&(t=-t);var n=0|Number(t>>32n),a=0|Number(t-(BigInt(n)<<32n));return r&&(n=~n>>>0,a=~a>>>0,++a>q7&&(a=0,++n>q7&&(n=0))),new e(n,a)}},{key:"fromNumber",value:function(t){if(0===t)return new e;var r=t<0;r&&(t=-t);var n=t>>>0,a=(t-n)/4294967296>>>0;return r&&(a=~a>>>0,n=~n>>>0,++n>4294967295&&(n=0,++a>4294967295&&(a=0))),new e(a,n)}},{key:"fromBytes",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Z7(t),a=new e,i=0;if(t.length-r>4){for(;i<4;++i)if(a.lo=(a.lo|(127&n.get(r))<<7*i)>>>0,n.get(r++)<128)return a;if(a.lo=(a.lo|(127&n.get(r))<<28)>>>0,a.hi=(a.hi|(127&n.get(r))>>4)>>>0,n.get(r++)<128)return a;i=0}else for(;i<4;++i){if(r>=t.length)throw RangeError("index out of range: ".concat(r," > ").concat(t.length));if(a.lo=(a.lo|(127&n.get(r))<<7*i)>>>0,n.get(r++)<128)return a}if(t.length-r>4){for(;i<5;++i)if(a.hi=(a.hi|(127&n.get(r))<<7*i+3)>>>0,n.get(r++)<128)return a}else if(r<t.byteLength)for(;i<5;++i){if(r>=t.length)throw RangeError("index out of range: ".concat(r," > ").concat(t.length));if(a.hi=(a.hi|(127&n.get(r))<<7*i+3)>>>0,n.get(r++)<128)return a}throw RangeError("invalid varint encoding")}}]),e}();function K7(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?function(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var H7=Math.pow(2,7),W7=Math.pow(2,14),G7=Math.pow(2,21),Y7=Math.pow(2,28),Q7=Math.pow(2,35),J7=Math.pow(2,42),X7=Math.pow(2,49),$7=Math.pow(2,56),e9=Math.pow(2,63),t9={encodingLength:function(e){return e<H7?1:e<W7?2:e<G7?3:e<Y7?4:e<Q7?5:e<J7?6:e<X7?7:e<$7?8:e<e9?9:10},encode:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!=Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return null==t&&(t=K7(t9.encodingLength(e))),V7.fromNumber(e).toBytes(t,r),t},decode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return V7.fromBytes(e,t).toNumber(!0)}},r9=function(){function e(t){xn(this,e);var r=t.peerId,n=t.payloadType,a=t.payload,i=t.signature;this.peerId=r,this.payloadType=n,this.payload=a,this.signature=i}return Sn(e,[{key:"marshal",value:function(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=L7.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}},{key:"equals",value:function(e){return function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(this.marshal(),e.marshal())}},{key:"validate",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a9(t,this.payloadType,this.payload),null!=this.peerId.publicKey){e.next=3;break}throw new Error("Missing public key");case 3:return n=VU(this.peerId.publicKey),e.next=6,n.verify(r.subarray(),this.signature);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();r9.createFromProtobuf=function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=L7.decode(t),e.next=3,WD(r.publicKey);case 3:return n=e.sent,e.abrupt("return",new r9({peerId:n,payloadType:r.payloadType,payload:r.payload,signature:r.signature}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r9.seal=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.privateKey){e.next=2;break}throw new Error("Missing private key");case 2:return n=t.domain,a=t.codec,i=t.marshal(),o=a9(n,a,i),e.next=8,HU(r.privateKey);case 8:return s=e.sent,e.next=11,s.sign(o.subarray());case 11:return u=e.sent,e.abrupt("return",new r9({peerId:r,payloadType:a,payload:i,signature:u}));case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),r9.openAndCertify=function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r9.createFromProtobuf(t);case 2:return n=e.sent,e.next=5,n.validate(r);case 5:if(e.sent){e.next=8;break}throw cd(new Error("envelope signature is not valid for the given domain"),N7);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var n9,a9=function(e,t,r){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=D7[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):T7(globalThis.Buffer.from(e,"utf-8"))}(e),a=t9.encode(n.byteLength),i=t9.encode(t.length),o=t9.encode(r.length);return new BK(a,n,i,t,o,r)};!function(e){var t;!function(e){var t;e.codec=function(){return null==t&&(t=z7((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.multiaddr&&e.multiaddr.byteLength>0)&&(t.uint32(10),t.bytes(e.multiaddr)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={multiaddr:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.multiaddr=e.bytes();else e.skipType(7&a)}return r}))),t},e.encode=function(t){return F7(t,e.codec())},e.decode=function(t){return j7(t,e.codec())}}(e.AddressInfo||(e.AddressInfo={})),e.codec=function(){return null==t&&(t=z7((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),(!0===n.writeDefaults||null!=t.peerId&&t.peerId.byteLength>0)&&(r.uint32(10),r.bytes(t.peerId)),!0!==n.writeDefaults&&0n===t.seq||(r.uint32(16),r.uint64(t.seq)),null!=t.addresses){var a,i=(0,zn.Z)(t.addresses);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.uint32(26),e.AddressInfo.codec().encode(o,r,{writeDefaults:!0})}}catch(sY){i.e(sY)}finally{i.f()}}!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={peerId:new Uint8Array(0),seq:0n,addresses:[]},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.peerId=t.bytes();break;case 2:n.seq=t.uint64();break;case 3:n.addresses.push(e.AddressInfo.codec().decode(t,t.uint32()));break;default:t.skipType(7&i)}}return n}))),t},e.encode=function(t){return F7(t,e.codec())},e.decode=function(t){return j7(t,e.codec())}}(n9||(n9={}));var i9=Uint8Array.from([3,1]),o9=function(){function e(t){xn(this,e),this.domain=e.DOMAIN,this.codec=e.CODEC;var r=t.peerId,n=t.multiaddrs,a=t.seqNumber;this.peerId=r,this.multiaddrs=null!==n&&void 0!==n?n:[],this.seqNumber=null!==a&&void 0!==a?a:BigInt(Date.now())}return Sn(e,[{key:"marshal",value:function(){return null==this.marshaled&&(this.marshaled=n9.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((function(e){return{multiaddr:e.bytes}}))})),this.marshaled}},{key:"equals",value:function(t){return t instanceof e&&(!!this.peerId.equals(t.peerId)&&(this.seqNumber===t.seqNumber&&!!function(e,t){var r=function(e,t){return e.toString().localeCompare(t.toString())};return e.length===t.length&&(t.sort(r),e.sort(r).every((function(e,r){return t[r].equals(e)})))}(this.multiaddrs,t.multiaddrs)))}}]),e}();o9.createFromProtobuf=function(e){var t,r=n9.decode(e),n=HD(r.peerId),a=(null!==(t=r.addresses)&&void 0!==t?t:[]).map((function(e){return Gx(e.multiaddr)})),i=r.seq;return new o9({peerId:n,multiaddrs:a,seqNumber:i})},o9.DOMAIN="libp2p-peer-record",o9.CODEC=i9;var s9=Symbol.for("@libp2p/topology");var u9,c9=function(){},l9=function(e){function t(e){var r,n,a,i;xn(this,t),this.min=null!==(r=e.min)&&void 0!==r?r:0,this.max=null!==(n=e.max)&&void 0!==n?n:1/0,this.peers=new Set,this.onConnect=null!==(a=e.onConnect)&&void 0!==a?a:c9,this.onDisconnect=null!==(i=e.onDisconnect)&&void 0!==i?i:c9}return Sn(t,[{key:Symbol.toStringTag,get:function(){return s9.toString()}},{key:s9,get:function(){return!0}},{key:"setRegistrar",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.registrar=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(e){this.onDisconnect(e)}}]),t}();function f9(e){return new l9(e)}function p9(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function h9(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function d9(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,h9(e,t,"get"))}var v9=new WeakMap,y9=function(e){Cn(r,e);var t=Dn(r);function r(){var e;xn(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return p9(Pn(e=t.call.apply(t,[this].concat(a))),v9,{writable:!0,value:new Map}),e}return Sn(r,[{key:"listenerCount",value:function(e){var t=d9(this,v9).get(e);return null==t?0:t.length}},{key:"addEventListener",value:function(e,t,n){var a;$b(Tn(r.prototype),"addEventListener",this).call(this,e,t,n);var i=d9(this,v9).get(e);null==i&&(i=[],d9(this,v9).set(e,i)),i.push({callback:t,once:null!==(a=!0!==n&&!1!==n&&(null===n||void 0===n?void 0:n.once))&&void 0!==a&&a})}},{key:"removeEventListener",value:function(e,t,n){$b(Tn(r.prototype),"removeEventListener",this).call(this,e.toString(),null!==t&&void 0!==t?t:null,n);var a=d9(this,v9).get(e);null!=a&&(a=a.filter((function(e){return e.callback!==t})),d9(this,v9).set(e,a))}},{key:"dispatchEvent",value:function(e){var t=$b(Tn(r.prototype),"dispatchEvent",this).call(this,e),n=d9(this,v9).get(e.type);return null==n||(n=n.filter((function(e){return!e.once})),d9(this,v9).set(e.type,n)),t}},{key:"safeDispatchEvent",value:function(e,t){return this.dispatchEvent(new g9(e,t))}}]),r}(On(EventTarget)),b9=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),a=t.call(this,e,n),(0,oi.Z)(Pn(a),"detail",void 0),a.detail=null===n||void 0===n?void 0:n.detail,a}return Sn(r)}(On(Event)),g9=null!==(u9=globalThis.CustomEvent)&&void 0!==u9?u9:b9,m9=function(){function e(t,r,n){xn(this,e),this.gossip=t,this.msgs=new Map,this.history=[],this.msgIdToStrFn=n;for(var a=0;a<r;a++)this.history[a]=[]}return Sn(e,[{key:"size",get:function(){return this.msgs.size}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.msgIdStr;return!this.msgs.has(n)&&(this.msgs.set(n,{message:t,validated:r,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push(So(So({},e),{},{topic:t.topic})),!0)}},{key:"observeDuplicate",value:function(e,t){var r=this.msgs.get(e);r&&!r.validated&&r.originatingPeers.add(t)}},{key:"get",value:function(e){var t;return null===(t=this.msgs.get(this.msgIdToStrFn(e)))||void 0===t?void 0:t.message}},{key:"getWithIWantCount",value:function(e,t){var r,n=this.msgs.get(e);if(!n)return null;var a=(null!==(r=n.iwantCounts.get(t))&&void 0!==r?r:0)+1;return n.iwantCounts.set(t,a),{msg:n.message,count:a}}},{key:"getGossipIDs",value:function(e){for(var t=this,r=new Map,n=0;n<this.gossip;n++)this.history[n].forEach((function(n){var a=t.msgs.get(n.msgIdStr);if(a&&a.validated&&e.has(n.topic)){var i=r.get(n.topic);i||(i=[],r.set(n.topic,i)),i.push(n.msgId)}}));return r}},{key:"validate",value:function(e){var t=this.msgs.get(e);if(!t)return null;var r=t.message,n=t.originatingPeers;return t.validated=!0,t.originatingPeers=new Set,{message:r,originatingPeers:n}}},{key:"shift",value:function(){var e=this;this.history[this.history.length-1].forEach((function(t){e.msgs.delete(t.msgIdStr)})),this.history.pop(),this.history.unshift([])}},{key:"remove",value:function(e){var t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}}]),e}(),w9=(__webpack_require__.p+"static/media/rpc.93e8f6196bd2c425bf03.cjs").RPC,k9="/floodsub/1.0.0",x9="/meshsub/1.0.0",_9="/meshsub/1.1.0",E9=5e3;function S9(){var e=arguments.length>1?arguments[1]:void 0;return{subscriptions:[],messages:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],control:e?{graft:e.graft||[],prune:e.prune||[],ihave:e.ihave||[],iwant:e.iwant||[]}:void 0}}function A9(e){if(e.length<=1)return e;for(var t=0;t<e.length;t++){var r=Math.floor(Math.random()*Math.floor(e.length)),n=e[t];e[t]=e[r],e[r]=n}return e}function C9(e){return uN(e,"base64")}var T9,R9,I9,P9,D9,N9,O9="StrictSign",L9="StrictNoSign";function B9(e){switch(e){case I9.Ignore:return P9.Ignore;case I9.Reject:return P9.Reject}}function M9(e,t){return U9.apply(this,arguments)}function U9(){return(U9=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===O9?3:e.t0===L9?13:14;break;case 3:if(r){e.next=5;break}throw Error("Must provide PeerId");case 5:if(null!=r.privateKey){e.next=7;break}throw Error("Cannot sign message, no private key present");case 7:if(null!=r.publicKey){e.next=9;break}throw Error("Cannot sign message, no public key present");case 9:return e.next=11,HU(r.privateKey);case 11:return n=e.sent,e.abrupt("return",{type:R9.Signing,author:r,key:r.publicKey,privateKey:n});case 13:return e.abrupt("return",{type:R9.Anonymous});case 14:throw new Error('Unknown signature policy "'.concat(t,'"'));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.StrictSign="StrictSign",e.StrictNoSign="StrictNoSign"}(T9||(T9={})),function(e){e[e.Signing=0]="Signing",e[e.Anonymous=1]="Anonymous"}(R9||(R9={})),function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"}(I9||(I9={})),function(e){e.Error="error",e.Ignore="ignore",e.Reject="reject",e.Blacklisted="blacklisted"}(P9||(P9={})),function(e){e.InvalidSignature="invalid_signature",e.InvalidSeqno="invalid_seqno",e.InvalidPeerId="invalid_peerid",e.SignaturePresent="signature_present",e.SeqnoPresent="seqno_present",e.FromPresent="from_present",e.TransformFailed="transform_failed"}(D9||(D9={})),function(e){e.duplicate="duplicate",e.invalid="invalid",e.valid="valid"}(N9||(N9={}));var j9="ERR_INVALID_PEER_SCORE_PARAMS",F9={topics:{},topicScoreCap:10,appSpecificScore:function(){return 0},appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},z9={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function Z9(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return So(So(So({},F9),e),{},{topics:e.topics?Object.entries(e.topics).reduce((function(e,t){var r=(0,wn.Z)(t,2),n=r[0],a=r[1];return e[n]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return So(So({},z9),e)}(a),e}),{}):{}})}function q9(e){if(e.topicWeight<0)throw cd(new Error("invalid topic weight; must be >= 0"),j9);if(0===e.timeInMeshQuantum)throw cd(new Error("invalid TimeInMeshQuantum; must be non zero"),j9);if(e.timeInMeshWeight<0)throw cd(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),j9);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw cd(new Error("invalid TimeInMeshQuantum; must be positive"),j9);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw cd(new Error("invalid TimeInMeshCap; must be positive"),j9);if(e.firstMessageDeliveriesWeight<0)throw cd(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),j9);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw cd(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),j9);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw cd(new Error("invalid FirstMessageDeliveriesCap; must be positive"),j9);if(e.meshMessageDeliveriesWeight>0)throw cd(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),j9);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw cd(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),j9);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw cd(new Error("invalid MeshMessageDeliveriesCap; must be positive"),j9);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw cd(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),j9);if(e.meshMessageDeliveriesWindow<0)throw cd(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),j9);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw cd(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),j9);if(e.meshFailurePenaltyWeight>0)throw cd(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),j9);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw cd(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),j9);if(e.invalidMessageDeliveriesWeight>0)throw cd(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),j9);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw cd(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),j9)}var V9={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function K9(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return So(So({},V9),e)}function H9(e,t,r,n){var a=0;Object.entries(t.topics).forEach((function(e){var t=(0,wn.Z)(e,2),n=t[0],i=t[1],o=r.topics[n];if(void 0!==o){var s=0;if(i.inMesh){var u=i.meshTime/o.timeInMeshQuantum;u>o.timeInMeshCap&&(u=o.timeInMeshCap),s+=u*o.timeInMeshWeight}var c=i.firstMessageDeliveries;if(c>o.firstMessageDeliveriesCap&&(c=o.firstMessageDeliveriesCap),s+=c*o.firstMessageDeliveriesWeight,i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<o.meshMessageDeliveriesThreshold){var l=o.meshMessageDeliveriesThreshold-i.meshMessageDeliveries;s+=l*l*o.meshMessageDeliveriesWeight}s+=i.meshFailurePenalty*o.meshFailurePenaltyWeight,s+=i.invalidMessageDeliveries*i.invalidMessageDeliveries*o.invalidMessageDeliveriesWeight,a+=s*o.topicWeight}})),r.topicScoreCap>0&&a>r.topicScoreCap&&(a=r.topicScoreCap);var i=r.appSpecificScore(e);if(a+=i*r.appSpecificWeight,t.ips.forEach((function(e){if(!r.IPColocationFactorWhitelist.has(e)){var t=n.get(e),i=t?t.size:0;if(i>r.IPColocationFactorThreshold){var o=i-r.IPColocationFactorThreshold;a+=o*o*r.IPColocationFactorWeight}}})),t.behaviourPenalty>r.behaviourPenaltyThreshold){var o=t.behaviourPenalty-r.behaviourPenaltyThreshold;a+=o*o*r.behaviourPenaltyWeight}return a}var W9,G9=__webpack_require__(8718);!function(e){e[e.unknown=0]="unknown",e[e.valid=1]="valid",e[e.invalid=2]="invalid",e[e.ignored=3]="ignored"}(W9||(W9={}));var Y9=function(){function e(){xn(this,e),this.records=new Map,this.queue=new G9}return Sn(e,[{key:"ensureRecord",value:function(e){var t=this.records.get(e);if(t)return t;t={status:W9.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,t);var r={msgId:e,expire:Date.now()+12e4};return this.queue.push(r),t}},{key:"gc",value:function(){for(var e=Date.now(),t=this.queue.peekFront();t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}},{key:"clear",value:function(){this.records.clear(),this.queue.clear()}}]),e}();function Q9(e){return null!=e&&"function"===typeof e.start&&"function"===typeof e.stop}function J9(e){return null!=e&&"function"===typeof e.init}var X9,$9,eee,tee,ree,nee,aee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(this,e),this.started=!1,null!=t.peerId&&this.setPeerId(t.peerId),null!=t.addressManager&&this.setAddressManager(t.addressManager),null!=t.peerStore&&this.setPeerStore(t.peerStore),null!=t.upgrader&&this.setUpgrader(t.upgrader),null!=t.metrics&&this.setMetrics(t.metrics),null!=t.registrar&&this.setRegistrar(t.registrar),null!=t.connectionManager&&this.setConnectionManager(t.connectionManager),null!=t.transportManager&&this.setTransportManager(t.transportManager),null!=t.connectionGater&&this.setConnectionGater(t.connectionGater),null!=t.contentRouting&&this.setContentRouting(t.contentRouting),null!=t.peerRouting&&this.setPeerRouting(t.peerRouting),null!=t.datastore&&this.setDatastore(t.datastore),null!=t.connectionProtector&&this.setConnectionProtector(t.connectionProtector),null!=t.dht&&this.setDHT(t.dht),null!=t.pubsub&&this.setPubSub(t.pubsub),null!=t.dialer&&this.setDialer(t.dialer)}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"beforeStart",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return Q9(e)})).map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStart){e.next=3;break}return e.next=3,t.beforeStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return Q9(e)})).map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.start();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:this.started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return Q9(e)})).map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStart){e.next=3;break}return e.next=3,t.afterStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeStop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return Q9(e)})).map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStop){e.next=3;break}return e.next=3,t.beforeStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return Q9(e)})).map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stop();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this).filter((function(e){return Q9(e)})).map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStop){e.next=3;break}return e.next=3,t.afterStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPeerId",value:function(e){return this.peerId=e,e}},{key:"getPeerId",value:function(){if(null==this.peerId)throw cd(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}},{key:"setMetrics",value:function(e){return this.metrics=e,J9(e)&&e.init(this),e}},{key:"getMetrics",value:function(){return this.metrics}},{key:"setAddressManager",value:function(e){return this.addressManager=e,J9(e)&&e.init(this),e}},{key:"getAddressManager",value:function(){if(null==this.addressManager)throw cd(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}},{key:"setPeerStore",value:function(e){return this.peerStore=e,J9(e)&&e.init(this),e}},{key:"getPeerStore",value:function(){if(null==this.peerStore)throw cd(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}},{key:"setUpgrader",value:function(e){return this.upgrader=e,J9(e)&&e.init(this),e}},{key:"getUpgrader",value:function(){if(null==this.upgrader)throw cd(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}},{key:"setRegistrar",value:function(e){return this.registrar=e,J9(e)&&e.init(this),e}},{key:"getRegistrar",value:function(){if(null==this.registrar)throw cd(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}},{key:"setConnectionManager",value:function(e){return this.connectionManager=e,J9(e)&&e.init(this),e}},{key:"getConnectionManager",value:function(){if(null==this.connectionManager)throw cd(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}},{key:"setTransportManager",value:function(e){return this.transportManager=e,J9(e)&&e.init(this),e}},{key:"getTransportManager",value:function(){if(null==this.transportManager)throw cd(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}},{key:"setConnectionGater",value:function(e){return this.connectionGater=e,J9(e)&&e.init(this),e}},{key:"getConnectionGater",value:function(){if(null==this.connectionGater)throw cd(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}},{key:"setContentRouting",value:function(e){return this.contentRouting=e,J9(e)&&e.init(this),e}},{key:"getContentRouting",value:function(){if(null==this.contentRouting)throw cd(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}},{key:"setPeerRouting",value:function(e){return this.peerRouting=e,J9(e)&&e.init(this),e}},{key:"getPeerRouting",value:function(){if(null==this.peerRouting)throw cd(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}},{key:"setDatastore",value:function(e){return this.datastore=e,J9(e)&&e.init(this),e}},{key:"getDatastore",value:function(){if(null==this.datastore)throw cd(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}},{key:"setConnectionProtector",value:function(e){return this.connectionProtector=e,J9(e)&&e.init(this),e}},{key:"getConnectionProtector",value:function(){return this.connectionProtector}},{key:"setDHT",value:function(e){return this.dht=e,J9(e)&&e.init(this),e}},{key:"getDHT",value:function(){if(null==this.dht)throw cd(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}},{key:"setPubSub",value:function(e){return this.pubsub=e,J9(e)&&e.init(this),e}},{key:"getPubSub",value:function(){if(null==this.pubsub)throw cd(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}},{key:"setDialer",value:function(e){return this.dialer=e,J9(e)&&e.init(this),e}},{key:"getDialer",value:function(){if(null==this.dialer)throw cd(new Error("dialer not set"),"ERR_SERVICE_MISSING");return this.dialer}}]),e}(),iee=ud("libp2p:gossipsub:score"),oee=function(){function e(t,r,n){var a;xn(this,e),this.params=t,this.metrics=r,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new Y9,this.components=new aee,function(e){for(var t=0,r=Object.entries(e.topics);t<r.length;t++){var n=(0,wn.Z)(r[t],2),a=n[0],i=n[1];try{q9(i)}catch(o){throw cd(new Error("invalid score parameters for topic ".concat(a,": ").concat(o.message)),j9)}}if(e.topicScoreCap<0)throw cd(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),j9);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw cd(new Error("missing application specific score function"),j9);if(e.IPColocationFactorWeight>0)throw cd(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),j9);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw cd(new Error("invalid IPColocationFactorThreshold; must be at least 1"),j9);if(e.behaviourPenaltyWeight>0)throw cd(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),j9);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw cd(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),j9);if(e.decayInterval<1e3)throw cd(new Error("invalid DecayInterval; must be at least 1s"),j9);if(e.decayToZero<=0||e.decayToZero>=1)throw cd(new Error("invalid DecayToZero; must be between 0 and 1"),j9)}(t),this.scoreCacheValidityMs=n.scoreCacheValidityMs,this.computeScore=null!==(a=n.computeScore)&&void 0!==a?a:H9}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"size",get:function(){return this.peerStats.size}},{key:"start",value:function(){var e=this;this._backgroundInterval?iee("Peer score already running"):(this._backgroundInterval=setInterval((function(){return e.background()}),this.params.decayInterval),iee("started"))}},{key:"stop",value:function(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),iee("stopped")):iee("Peer score already stopped")}},{key:"background",value:function(){this.refreshScores(),this.updateIPs(),this.deliveryRecords.gc()}},{key:"dumpPeerScoreStats",value:function(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((function(e){var t=(0,wn.Z)(e,2);return[t[0],t[1]]})))}},{key:"refreshScores",value:function(){var e=this,t=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((function(n,a){n.connected?(Object.entries(n.topics).forEach((function(n){var a=(0,wn.Z)(n,2),i=a[0],o=a[1],s=e.params.topics[i];void 0!==s&&(o.firstMessageDeliveries*=s.firstMessageDeliveriesDecay,o.firstMessageDeliveries<r&&(o.firstMessageDeliveries=0),o.meshMessageDeliveries*=s.meshMessageDeliveriesDecay,o.meshMessageDeliveries<r&&(o.meshMessageDeliveries=0),o.meshFailurePenalty*=s.meshFailurePenaltyDecay,o.meshFailurePenalty<r&&(o.meshFailurePenalty=0),o.invalidMessageDeliveries*=s.invalidMessageDeliveriesDecay,o.invalidMessageDeliveries<r&&(o.invalidMessageDeliveries=0),o.inMesh&&(o.meshTime=t-o.graftTime,o.meshTime>s.meshMessageDeliveriesActivation&&(o.meshMessageDeliveriesActive=!0)))})),n.behaviourPenalty*=e.params.behaviourPenaltyDecay,n.behaviourPenalty<r&&(n.behaviourPenalty=0)):t>n.expire&&(e.removeIPs(a,n.ips),e.peerStats.delete(a),e.scoreCache.delete(a))}))}},{key:"score",value:function(e){var t,r;null===(t=this.metrics)||void 0===t||t.scoreFnCalls.inc();var n=this.peerStats.get(e);if(!n)return 0;var a=Date.now(),i=this.scoreCache.get(e);if(i&&i.cacheUntil>a)return i.score;null===(r=this.metrics)||void 0===r||r.scoreFnRuns.inc();var o,s=this.computeScore(e,n,this.params,this.peerIPs),u=a+this.scoreCacheValidityMs;i?(null===(o=this.metrics)||void 0===o||o.scoreCachedDelta.observe(Math.abs(s-i.score)),i.score=s,i.cacheUntil=u):this.scoreCache.set(e,{score:s,cacheUntil:u});return s}},{key:"addPenalty",value:function(e,t,r){var n,a=this.peerStats.get(e);a&&(a.behaviourPenalty+=t,null===(n=this.metrics)||void 0===n||n.onScorePenalty(r))}},{key:"addPeer",value:function(e){var t={connected:!0,expire:0,topics:{},ips:[],behaviourPenalty:0};this.peerStats.set(e,t);var r=this.getIPs(e);this.setIPs(e,r,t.ips),t.ips=r}},{key:"removePeer",value:function(e){var t=this,r=this.peerStats.get(e);if(r){if(this.score(e)>0)return this.removeIPs(e,r.ips),void this.peerStats.delete(e);Object.entries(r.topics).forEach((function(e){var r=(0,wn.Z)(e,2),n=r[0],a=r[1];a.firstMessageDeliveries=0;var i=t.params.topics[n].meshMessageDeliveriesThreshold;if(a.inMesh&&a.meshMessageDeliveriesActive&&a.meshMessageDeliveries<i){var o=i-a.meshMessageDeliveries;a.meshFailurePenalty+=o*o}a.inMesh=!1,a.meshMessageDeliveriesActive=!1})),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}},{key:"graft",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);n&&(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1)}}},{key:"prune",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);if(n){var a=this.params.topics[t].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<a){var i=a-n.meshMessageDeliveries;n.meshFailurePenalty+=i*i}n.meshMessageDeliveriesActive=!1,n.inMesh=!1}}}},{key:"validateMessage",value:function(e){this.deliveryRecords.ensureRecord(e)}},{key:"deliverMessage",value:function(e,t,r){var n=this;this.markFirstMessageDelivery(e,r);var a=this.deliveryRecords.ensureRecord(t),i=Date.now();a.status===W9.unknown?(a.status=W9.valid,a.validated=i,a.peers.forEach((function(t){t!==e.toString()&&n.markDuplicateMessageDelivery(t,r)}))):iee("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,i-a.firstSeen,W9[a.status])}},{key:"rejectInvalidMessage",value:function(e,t){this.markInvalidMessageDelivery(e,t)}},{key:"rejectMessage",value:function(e,t,r,n){var a=this;switch(n){case P9.Error:return void this.markInvalidMessageDelivery(e,r);case P9.Blacklisted:return}var i=this.deliveryRecords.ensureRecord(t);if(i.status===W9.unknown){if(n===P9.Ignore)return i.status=W9.ignored,void i.peers.clear();i.status=W9.invalid,this.markInvalidMessageDelivery(e,r),i.peers.forEach((function(e){a.markInvalidMessageDelivery(e,r)})),i.peers.clear()}else iee("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-i.firstSeen,W9[i.status])}},{key:"duplicateMessage",value:function(e,t,r){var n=this.deliveryRecords.ensureRecord(t);if(!n.peers.has(e))switch(n.status){case W9.unknown:n.peers.add(e);break;case W9.valid:n.peers.add(e),this.markDuplicateMessageDelivery(e,r,n.validated);break;case W9.invalid:this.markInvalidMessageDelivery(e,r);case W9.ignored:}}},{key:"markInvalidMessageDelivery",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);n&&(n.invalidMessageDeliveries+=1)}}},{key:"markFirstMessageDelivery",value:function(e,t){var r=this.peerStats.get(e);if(r){var n=this.getPtopicStats(r,t);if(n){var a=this.params.topics[t].firstMessageDeliveriesCap;n.firstMessageDeliveries=Math.min(a,n.firstMessageDeliveries+1),n.inMesh&&(a=this.params.topics[t].meshMessageDeliveriesCap,n.meshMessageDeliveries=Math.min(a,n.meshMessageDeliveries+1))}}}},{key:"markDuplicateMessageDelivery",value:function(e,t,r){var n=this.peerStats.get(e);if(n){var a=void 0!==r?Date.now():0,i=this.getPtopicStats(n,t);if(i&&i.inMesh){var o=this.params.topics[t];if(void 0!==r){var s,u=a-r,c=u>o.meshMessageDeliveriesWindow;if(null===(s=this.metrics)||void 0===s||s.onDuplicateMsgDelivery(t,u,c),c)return}var l=o.meshMessageDeliveriesCap;i.meshMessageDeliveries=Math.min(l,i.meshMessageDeliveries+1)}}}},{key:"getIPs",value:function(e){return this.components.getConnectionManager().getConnections(KD(e)).map((function(e){return e.remoteAddr.toOptions().host}))}},{key:"setIPs",value:function(e,t,r){var n,a=(0,zn.Z)(t);try{e:for(a.s();!(n=a.n()).done;){var i,o=n.value,s=(0,zn.Z)(r);try{for(s.s();!(i=s.n()).done;){if(o===i.value)continue e}}catch(sY){s.e(sY)}finally{s.f()}var u=this.peerIPs.get(o);u||(u=new Set,this.peerIPs.set(o,u)),u.add(e)}}catch(sY){a.e(sY)}finally{a.f()}var c,l=(0,zn.Z)(r);try{e:for(l.s();!(c=l.n()).done;){var f,p=c.value,h=(0,zn.Z)(t);try{for(h.s();!(f=h.n()).done;){if(p===f.value)continue e}}catch(sY){h.e(sY)}finally{h.f()}var d=this.peerIPs.get(p);d&&(d.delete(e),d.size||this.peerIPs.delete(p))}}catch(sY){l.e(sY)}finally{l.f()}}},{key:"removeIPs",value:function(e,t){var r=this;t.forEach((function(t){var n=r.peerIPs.get(t);n&&(n.delete(e),n.size||r.peerIPs.delete(t))}))}},{key:"updateIPs",value:function(){var e=this;this.peerStats.forEach((function(t,r){var n=e.getIPs(r);e.setIPs(r,n,t.ips),t.ips=n}))}},{key:"getPtopicStats",value:function(e,t){var r=e.topics[t];return void 0!==r?r:void 0!==this.params.topics[t]?(r={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=r,r):null}}]),e}(),see=function(){function e(t,r,n){xn(this,e),this.gossipsubIWantFollowupMs=t,this.msgIdToStrFn=r,this.metrics=n,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*t}return Sn(e,[{key:"size",get:function(){return this.promises.size}},{key:"requestMsByMsgSize",get:function(){return this.requestMsByMsg.size}},{key:"addPromise",value:function(e,t){var r=t[Math.floor(Math.random()*t.length)],n=this.msgIdToStrFn(r),a=this.promises.get(n);a||(a=new Map,this.promises.set(n,a));var i=Date.now();a.has(e)||(a.set(e,i+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(n)||this.requestMsByMsg.set(n,i)))}},{key:"getBrokenPromises",value:function(){var e,t=this,r=Date.now(),n=new Map,a=0;return this.promises.forEach((function(e,i){e.forEach((function(t,i){var o;t<r&&(n.set(i,(null!==(o=n.get(i))&&void 0!==o?o:0)+1),e.delete(i),a++)})),e.size||t.promises.delete(i)})),null===(e=this.metrics)||void 0===e||e.iwantPromiseBroken.inc(a),n}},{key:"deliverMessage",value:function(e){this.trackMessage(e);var t=this.promises.get(e);t&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(t.size)))}},{key:"rejectMessage",value:function(e,t){this.trackMessage(e),t!==P9.Error&&this.promises.delete(e)}},{key:"clear",value:function(){this.promises.clear()}},{key:"prune",value:function(){var e,t=Date.now()-this.requestMsByMsgExpire,r=(0,zn.Z)(this.requestMsByMsg.entries());try{for(r.s();!(e=r.n()).done;){var n=(0,wn.Z)(e.value,2),a=n[0];if(!(n[1]<t))break;this.requestMsByMsg.delete(a)}}catch(sY){r.e(sY)}finally{r.f()}}},{key:"trackMessage",value:function(e){if(this.metrics){var t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}]),e}(),uee=function(){function e(t){xn(this,e),this.entries=new Map,this.validityMs=t.validityMs}return Sn(e,[{key:"size",get:function(){return this.entries.size}},{key:"put",value:function(e,t){this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs})}},{key:"prune",value:function(){var e,t=Date.now(),r=(0,zn.Z)(this.entries.entries());try{for(r.s();!(e=r.n()).done;){var n=(0,wn.Z)(e.value,2),a=n[0];if(!(n[1].validUntilMs<t))break;this.entries.delete(a)}}catch(sY){r.e(sY)}finally{r.f()}}},{key:"has",value:function(e){return this.entries.has(e)}},{key:"get",value:function(e){var t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}},{key:"clear",value:function(){this.entries.clear()}}]),e}();!function(e){e.forward="forward",e.publish="publish"}(X9||(X9={})),function(e){e.Fanout="fanout",e.Random="random",e.Subscribed="subscribed",e.Outbound="outbound",e.NotEnough="not_enough",e.Opportunistic="opportunistic"}($9||($9={})),function(e){e.Dc="disconnected",e.BadScore="bad_score",e.Prune="prune",e.Unsub="unsubscribed",e.Excess="excess"}(eee||(eee={})),function(e){e.GraftBackoff="graft_backoff",e.BrokenPromise="broken_promise",e.MessageDeficit="message_deficit",e.IPColocation="IP_colocation"}(tee||(tee={})),function(e){e.LowScore="low_score",e.MaxIhave="max_ihave",e.MaxIasked="max_iasked"}(ree||(ree={})),function(e){e.graylist="graylist",e.publish="publish",e.gossip="gossip",e.mesh="mesh"}(nee||(nee={}));__webpack_require__(8605);var cee=__webpack_require__(6019),lee={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function fee(e,t,r,n,a){if("sha1"!==a&&"sha2-256"!==a&&"sha2-512"!==a){var i=Object.keys(lee).join(" / ");throw new gS("Hash '".concat(a,"' is unknown or not supported. Must be ").concat(i),"ERR_UNSUPPORTED_HASH_TYPE")}var o=cee(e,t,r,n,lee[a]);return jB.encode64(o,null)}var pee=mm("libp2p-pubsub:");function hee(e,t,r,n){return dee.apply(this,arguments)}function dee(){return dee=Zh(Fh().mark((function e(t,r,n,a){var i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===R9.Signing?3:e.t0===R9.Anonymous?11:12;break;case 3:return i={from:t.author.toBytes(),data:a,seqno:nU(8),topic:r,signature:void 0,key:void 0},o=(0,lj.concat)([pee,w9.Message.encode(i).finish()]),e.next=7,t.privateKey.sign(o);case 7:return i.signature=e.sent,i.key=t.key,s={type:"signed",from:t.author,data:n,sequenceNumber:BigInt("0x".concat(uN(i.seqno,"base16"))),topic:r,signature:i.signature,key:i.key},e.abrupt("return",{raw:i,msg:s});case 11:return e.abrupt("return",{raw:{from:void 0,data:a,seqno:void 0,topic:r,signature:void 0,key:void 0},msg:{type:"unsigned",data:n,topic:r}});case 12:case"end":return e.stop()}}),e)}))),dee.apply(this,arguments)}function vee(e,t){return yee.apply(this,arguments)}function yee(){return yee=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===L9?3:e.t0===O9?10:41;break;case 3:if(null==r.signature){e.next=5;break}return e.abrupt("return",{valid:!1,error:D9.SignaturePresent});case 5:if(null==r.seqno){e.next=7;break}return e.abrupt("return",{valid:!1,error:D9.SeqnoPresent});case 7:if(null==r.key){e.next=9;break}return e.abrupt("return",{valid:!1,error:D9.FromPresent});case 9:return e.abrupt("return",{valid:!0,message:{type:"unsigned",topic:r.topic,data:null!==(n=r.data)&&void 0!==n?n:new Uint8Array(0)}});case 10:if(null!=r.seqno){e.next=12;break}return e.abrupt("return",{valid:!1,error:D9.InvalidSeqno});case 12:if(8===r.seqno.length){e.next=14;break}return e.abrupt("return",{valid:!1,error:D9.InvalidSeqno});case 14:if(null!=r.signature){e.next=16;break}return e.abrupt("return",{valid:!1,error:D9.InvalidSignature});case 16:if(null!=r.from){e.next=18;break}return e.abrupt("return",{valid:!1,error:D9.InvalidPeerId});case 18:e.prev=18,o=HD(r.from),e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(18),e.abrupt("return",{valid:!1,error:D9.InvalidPeerId});case 25:if(!r.key){e.next=31;break}if(s=VU(r.key),void 0===o.publicKey||cN(s.bytes,o.publicKey)){e.next=29;break}return e.abrupt("return",{valid:!1,error:D9.InvalidPeerId});case 29:e.next=34;break;case 31:if(null!=o.publicKey){e.next=33;break}return e.abrupt("return",{valid:!1,error:D9.InvalidPeerId});case 33:s=VU(o.publicKey);case 34:return u={from:r.from,data:r.data,seqno:r.seqno,topic:r.topic,signature:void 0,key:void 0},c=(0,lj.concat)([pee,w9.Message.encode(u).finish()]),e.next=38,s.verify(c,r.signature);case 38:if(e.sent){e.next=40;break}return e.abrupt("return",{valid:!1,error:D9.InvalidSignature});case 40:return e.abrupt("return",{valid:!0,message:{type:"signed",from:o,data:null!==(a=r.data)&&void 0!==a?a:new Uint8Array(0),sequenceNumber:BigInt("0x".concat(uN(r.seqno,"base16"))),topic:r.topic,signature:r.signature,key:null!==(i=r.key)&&void 0!==i?i:KU(s)}});case 41:case"end":return e.stop()}}),e,null,[[18,22]])}))),yee.apply(this,arguments)}function bee(e){if("signed"!==e.type)throw new Error("expected signed message type");if(null==e.sequenceNumber)throw Error("missing seqno field");return function(e,t){var r=mm(t.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(e.length+r.length);return n.set(e,0),n.set(r,e.length),n}(e.from.toBytes(),e.sequenceNumber)}function gee(e){return mee.apply(this,arguments)}function mee(){return(mee=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kg.encode(t.data);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wee(e,t,r,n,a){var i=0,o=new Map;if(Object.entries(t.topics).forEach((function(e){var t,n=(0,wn.Z)(e,2),s=n[0],u=n[1],c=null!==(t=a.get(s))&&void 0!==t?t:"unknown",l=r.topics[s];if(void 0!==l){var f=o.get(c);f||(f={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},o.set(c,f));var p=0,h=0,d=0,v=0,y=0;if(u.inMesh)p+=Math.max(u.meshTime/l.timeInMeshQuantum,l.timeInMeshCap)*l.timeInMeshWeight;var b=u.firstMessageDeliveries;if(b>l.firstMessageDeliveriesCap&&(b=l.firstMessageDeliveriesCap),h+=b*l.firstMessageDeliveriesWeight,u.meshMessageDeliveriesActive&&u.meshMessageDeliveries<l.meshMessageDeliveriesThreshold){var g=l.meshMessageDeliveriesThreshold-u.meshMessageDeliveries;d+=g*g*l.meshMessageDeliveriesWeight}v+=u.meshFailurePenalty*l.meshFailurePenaltyWeight,y+=u.invalidMessageDeliveries*u.invalidMessageDeliveries*l.invalidMessageDeliveriesWeight,i+=(p+h+d+v+y)*l.topicWeight,f.p1w+=p,f.p2w+=h,f.p3w+=d,f.p3bw+=v,f.p4w+=y}})),r.topicScoreCap>0&&i>r.topicScoreCap){i=r.topicScoreCap;var s,u=r.topicScoreCap/i,c=(0,zn.Z)(o.values());try{for(c.s();!(s=c.n()).done;){var l=s.value;l.p1w*=u,l.p2w*=u,l.p3w*=u,l.p3bw*=u,l.p4w*=u}}catch(sY){c.e(sY)}finally{c.f()}}var f=0,p=0,h=0;return f+=r.appSpecificScore(e)*r.appSpecificWeight,t.ips.forEach((function(e){if(!r.IPColocationFactorWhitelist.has(e)){var t=n.get(e),a=t?t.size:0;if(a>r.IPColocationFactorThreshold){var i=a-r.IPColocationFactorThreshold;p+=i*i*r.IPColocationFactorWeight}}})),h+=t.behaviourPenalty*t.behaviourPenalty*r.behaviourPenaltyWeight,{byTopic:o,p5w:f,p6w:p,p7w:h,score:i+=f+p+h}}function kee(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},n=new Set;if(t<=0)return n;var a,i=(0,zn.Z)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(n.size>=t)break;r(o)&&(n.add(o),e.delete(o))}}catch(sY){i.e(sY)}finally{i.f()}return n}function xee(e,t){return kee(e,t,(function(){return!0}))}var _ee=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this,null!==e&&void 0!==e?e:"The operation was aborted")).type="aborted",a.code=null!==n&&void 0!==n?n:"ABORT_ERR",a}return Sn(r)}(On(Error));function Eee(e){if(null!=e){if("function"===typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"===typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"===typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}function See(e,t,r){var n=null!==r&&void 0!==r?r:{},a=Eee(e);function i(){return i=Kh(Fh().mark((function r(){var i,o,s,u,c,l,f,p;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=function(){null!=i&&i()},t.addEventListener("abort",o);case 2:if(s=void 0,r.prev=4,!t.aborted){r.next=8;break}throw u=n.abortMessage,c=n.abortCode,new _ee(u,c);case 8:return l=new Promise((function(e,t){i=function(){var e=n.abortMessage,r=n.abortCode;t(new _ee(e,r))}})),r.next=11,km(Promise.race([l,a.next()]));case 11:s=r.sent,i=null,r.next=26;break;case 15:if(r.prev=15,r.t0=r.catch(4),t.removeEventListener("abort",o),!(f="aborted"===r.t0.type&&t.aborted)||null==n.onAbort){r.next=22;break}return r.next=22,km(n.onAbort(e));case 22:if("function"===typeof a.return)try{(p=a.return())instanceof Promise&&p.catch((function(e){null!=n.onReturnError&&n.onReturnError(e)}))}catch(sY){null!=n.onReturnError&&n.onReturnError(sY)}if(!f||!0!==n.returnOnAbort){r.next=25;break}return r.abrupt("return");case 25:throw r.t0;case 26:if(!0!==s.done){r.next=28;break}return r.abrupt("break",32);case 28:return r.next=30,s.value;case 30:r.next=2;break;case 32:t.removeEventListener("abort",o);case 33:case"end":return r.stop()}}),r,null,[[4,15]])}))),i.apply(this,arguments)}return function(){return i.apply(this,arguments)}()}function Aee(e,t,r){return function(n){return e(See(n,t,r))}}function Cee(e,t,r){return{sink:Aee(e.sink,t,So(So({},r),{},{onAbort:void 0})),source:See(e.source,t,r)}}var Tee=function e(t){var r=t9.encodingLength(t),n=function(e){var t;return null!=(null===globalThis||void 0===globalThis||null===(t=globalThis.Buffer)||void 0===t?void 0:t.allocUnsafe)?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}(r);return t9.encode(t,n),e.bytes=r,n};function Ree(e){var t,r,n=null!==(r=(e=null!==(t=e)&&void 0!==t?t:{}).lengthEncoder)&&void 0!==r?r:Tee,a=function(){var e=Kh(Fh().mark((function e(t){var r,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,o=xm(t);case 4:return e.next=6,km(o.next());case 6:if(!(r=!(s=e.sent).done)){e.next=24;break}if(u=s.value,!((c=n(u.byteLength))instanceof Uint8Array)){e.next=14;break}return e.next=12,c;case 12:e.next=15;break;case 14:return e.delegateYield(JD(xm(c)),"t0",15);case 15:if(!(u instanceof Uint8Array)){e.next=20;break}return e.next=18,u;case 18:e.next=21;break;case 20:return e.delegateYield(JD(xm(u)),"t1",21);case 21:r=!1,e.next=4;break;case 24:e.next=30;break;case 26:e.prev=26,e.t2=e.catch(2),a=!0,i=e.t2;case 30:if(e.prev=30,e.prev=31,!r||null==o.return){e.next=35;break}return e.next=35,km(o.return());case 35:if(e.prev=35,!a){e.next=38;break}throw i;case 38:return e.finish(35);case 39:return e.finish(30);case 40:case"end":return e.stop()}}),e,null,[[2,26,30,40],[31,,35,39]])})));return function(t){return e.apply(this,arguments)}}();return a}Tee.bytes=0,Ree.single=function(e,t){var r,n,a=null!==(n=(t=null!==(r=t)&&void 0!==r?r:{}).lengthEncoder)&&void 0!==n?n:Tee;return new BK(a(e.byteLength),e)};var Iee,Pee=8,Dee=4194304;!function(e){e[e.LENGTH=0]="LENGTH",e[e.DATA=1]="DATA"}(Iee||(Iee={}));var Nee=function e(t){var r=t9.decode(t);return e.bytes=t9.encodingLength(r),r};function Oee(e){var t=function(){var t=Kh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=new BK,s=Iee.LENGTH,u=-1,c=null!==(n=null===e||void 0===e?void 0:e.lengthDecoder)&&void 0!==n?n:Nee,l=null!==(a=null===e||void 0===e?void 0:e.maxLengthLength)&&void 0!==a?a:Pee,f=null!==(i=null===e||void 0===e?void 0:e.maxDataLength)&&void 0!==i?i:Dee,p=!1,h=!1,t.prev=8,v=xm(r);case 10:return t.next=12,km(v.next());case 12:if(!(p=!(y=t.sent).done)){t.next=50;break}b=y.value,o.append(b);case 15:if(!(o.byteLength>0)){t.next=47;break}if(s!==Iee.LENGTH){t.next=36;break}if(t.prev=17,!((u=c(o))<0)){t.next=21;break}throw cd(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");case 21:if(!(u>f)){t.next=23;break}throw cd(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");case 23:g=c.bytes,o.consume(g),null!=(null===e||void 0===e?void 0:e.onLength)&&e.onLength(u),s=Iee.DATA,t.next=36;break;case 29:if(t.prev=29,t.t0=t.catch(17),!(t.t0 instanceof RangeError)){t.next=35;break}if(!(o.byteLength>l)){t.next=34;break}throw cd(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");case 34:return t.abrupt("break",47);case 35:throw t.t0;case 36:if(s!==Iee.DATA){t.next=45;break}if(!(o.byteLength<u)){t.next=39;break}return t.abrupt("break",47);case 39:return m=o.sublist(0,u),o.consume(u),null!=(null===e||void 0===e?void 0:e.onData)&&e.onData(m),t.next=44,m;case 44:s=Iee.LENGTH;case 45:t.next=15;break;case 47:p=!1,t.next=10;break;case 50:t.next=56;break;case 52:t.prev=52,t.t1=t.catch(8),h=!0,d=t.t1;case 56:if(t.prev=56,t.prev=57,!p||null==v.return){t.next=61;break}return t.next=61,km(v.return());case 61:if(t.prev=61,!h){t.next=64;break}throw d;case 64:return t.finish(61);case 65:return t.finish(56);case 66:if(!(o.byteLength>0)){t.next=68;break}throw cd(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");case 68:case"end":return t.stop()}}),t,null,[[8,52,56,66],[17,29],[57,,61,65]])})));return function(e){return t.apply(this,arguments)}}();return t}Nee.bytes=0,Oee.fromReader=function(e,t){var r=1,n=Kh(Fh().mark((function t(){var n,a,i;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,km(e.next(r));case 4:if(n=t.sent,a=n.done,i=n.value,!0!==a){t.next=9;break}return t.abrupt("return");case 9:if(null==i){t.next=12;break}return t.next=12,i;case 12:t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(1),"ERR_UNDER_READ"!==t.t0.code){t.next=18;break}return t.abrupt("return",{done:!0,value:null});case 18:throw t.t0;case 19:return t.prev=19,r=1,t.finish(19);case 22:t.next=0;break;case 24:case"end":return t.stop()}}),t,null,[[1,14,19,22]])})))();return Oee(So(So({},null!==t&&void 0!==t?t:{}),{},{onLength:function(e){r=e}}))(n)};var Lee,Bee=function(){function e(t,r,n){var a;xn(this,e),this.rawStream=t,this.pushable=nF({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=null!==(a=n.maxBufferSize)&&void 0!==a?a:1/0,yF(See(this.pushable,this.closeController.signal,{returnOnAbort:!0}),Ree(),this.rawStream).catch(r)}return Sn(e,[{key:"protocol",get:function(){return this.rawStream.stat.protocol}},{key:"push",value:function(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error("OutboundStream buffer full, size > ".concat(this.maxBufferSize));this.pushable.push(e)}},{key:"close",value:function(){this.closeController.abort(),this.pushable.return(),this.rawStream.close()}}]),e}(),Mee=function(){function e(t){xn(this,e),this.rawStream=t,this.closeController=new AbortController,this.source=See(yF(this.rawStream,Oee()),this.closeController.signal,{returnOnAbort:!0})}return Sn(e,[{key:"close",value:function(){this.closeController.abort(),this.rawStream.close()}}]),e}();!function(e){e[e.started=0]="started",e[e.stopped=1]="stopped"}(Lee||(Lee={}));var Uee=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n,a,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(this,r),(i=t.call(this)).multicodecs=[_9,x9],i.peers=new Set,i.streamsInbound=new Map,i.streamsOutbound=new Map,i.outboundInflightQueue=nF({objectMode:!0}),i.direct=new Set,i.floodsubPeers=new Set,i.acceptFromWhitelist=new Map,i.topics=new Map,i.subscriptions=new Set,i.mesh=new Map,i.fanout=new Map,i.fanoutLastpub=new Map,i.gossip=new Map,i.control=new Map,i.peerhave=new Map,i.iasked=new Map,i.backoff=new Map,i.outbound=new Map,i.topicValidators=new Map,i.heartbeatTicks=0,i.components=new aee,i.directPeerInitial=null,i.status={code:Lee.stopped},i.heartbeatTimer=null,i.runHeartbeat=function(){var e,t=null===(e=i.metrics)||void 0===e?void 0:e.heartbeatDuration.startTimer();i.heartbeat().catch((function(e){i.log("Error running heartbeat",e)})).finally((function(){if(null!=t&&t(),i.status.code===Lee.started){clearTimeout(i.status.heartbeatTimeout);var e,r=i.opts.heartbeatInterval-(Date.now()-i.status.hearbeatStartMs)%i.opts.heartbeatInterval;if(r<.25*i.opts.heartbeatInterval)r+=i.opts.heartbeatInterval,null===(e=i.metrics)||void 0===e||e.heartbeatSkipped.inc();i.status.heartbeatTimeout=setTimeout(i.runHeartbeat,r)}}))};var s=So(So({fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:12e4,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300},o),{},{scoreParams:Z9(o.scoreParams),scoreThresholds:K9(o.scoreThresholds)});if(i.globalSignaturePolicy=null!==(e=s.globalSignaturePolicy)&&void 0!==e?e:O9,s.fallbackToFloodsub&&i.multicodecs.push(k9),i.log=ud(null!==(n=s.debugName)&&void 0!==n?n:"libp2p:gossipsub"),i.opts=s,i.direct=new Set(s.directPeers.map((function(e){return e.id.toString()}))),i.seenCache=new uee({validityMs:s.seenTTL}),i.publishedMessageIds=new uee({validityMs:s.seenTTL}),o.msgIdFn)i.msgIdFn=o.msgIdFn;else switch(i.globalSignaturePolicy){case O9:i.msgIdFn=bee;break;case L9:i.msgIdFn=gee}if(o.fastMsgIdFn&&(i.fastMsgIdFn=o.fastMsgIdFn,i.fastMsgIdCache=new uee({validityMs:s.seenTTL})),i.msgIdToStrFn=null!==(a=o.msgIdToStrFn)&&void 0!==a?a:C9,i.mcache=o.messageCache||new m9(s.mcacheGossip,s.mcacheLength,i.msgIdToStrFn),o.dataTransform&&(i.dataTransform=o.dataTransform),o.metricsRegister){if(!o.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");var u=Math.max.apply(Math,(0,kn.Z)(Object.values(s.scoreParams.topics).map((function(e){return e.meshMessageDeliveriesWindow}))).concat([1e3])),c=function(e,t,r){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:e.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:e.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:e.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedStatus:e.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,1*r.maxMeshMessageDeliveriesWindowSec,2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,1*r.behaviourPenaltyThreshold,2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,1*r.gossipPromiseExpireSec,2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),topicStrToLabel:t,toTopic:function(e){var t;return null!==(t=this.topicStrToLabel.get(e))&&void 0!==t?t:e},onJoin:function(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave:function(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh:function(e,t,r){var n=this.toTopic(e);this.meshPeerInclusionEvents.inc({topic:n,reason:t},r)},onRemoveFromMesh:function(e,t,r){var n=this.toTopic(e);this.meshPeerChurnEvents.inc({topic:n,reason:t},r)},onReportValidationMcacheHit:function(e){this.asyncValidationMcacheHit.inc({hit:e?"hit":"miss"})},onReportValidation:function(e,t){var r=this.toTopic(e);this.asyncValidationResult.inc({topic:r,acceptance:t})},onScorePenalty:function(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv:function(e,t,r){var n=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:n},t),this.ihaveRcvNotSeenMsgids.inc({topic:n},r)},onIwantRcv:function(e,t){var r,n=(0,zn.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=(0,wn.Z)(r.value,2),i=a[0],o=a[1],s=this.toTopic(i);this.iwantRcvMsgids.inc({topic:s},o)}}catch(sY){n.e(sY)}finally{n.f()}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg:function(e,t){var r=this.toTopic(e);this.msgForwardCount.inc({topic:r},1),this.msgForwardPeers.inc({topic:r},t)},onPublishMsg:function(e,t,r,n){var a=this.toTopic(e);this.msgPublishCount.inc({topic:a},1),this.msgPublishBytes.inc({topic:a},r*n),this.msgPublishPeers.inc({topic:a},r),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"direct"},t.direct),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"floodsub"},t.floodsub),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"mesh"},t.mesh),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"fanout"},t.fanout)},onMsgRecvPreValidation:function(e){var t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvResult:function(e,t){var r=this.toTopic(e);this.msgReceivedStatus.inc({topic:r,status:t})},onMsgRecvInvalid:function(e,t){var r=this.toTopic(e),n=t.reason===P9.Error?t.error:t.reason;this.msgReceivedInvalid.inc({topic:r,error:n},1)},onDuplicateMsgDelivery:function(e,t,r){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),r){var n=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:n},1)}},onRpcRecv:function(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),e.subscriptions&&this.rpcRecvSubscription.inc(e.subscriptions.length),e.messages&&this.rpcRecvMessage.inc(e.messages.length),e.control&&(this.rpcRecvControl.inc(1),e.control.ihave&&this.rpcRecvIHave.inc(e.control.ihave.length),e.control.iwant&&this.rpcRecvIWant.inc(e.control.iwant.length),e.control.graft&&this.rpcRecvGraft.inc(e.control.graft.length),e.control.prune&&this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent:function(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),e.subscriptions&&this.rpcSentSubscription.inc(e.subscriptions.length),e.messages&&this.rpcSentMessage.inc(e.messages.length),e.control){var r,n,a,i,o,s,u,c,l=null!==(r=null===(n=e.control.ihave)||void 0===n?void 0:n.length)&&void 0!==r?r:0,f=null!==(a=null===(i=e.control.iwant)||void 0===i?void 0:i.length)&&void 0!==a?a:0,p=null!==(o=null===(s=e.control.graft)||void 0===s?void 0:s.length)&&void 0!==o?o:0,h=null!==(u=null===(c=e.control.prune)||void 0===c?void 0:c.length)&&void 0!==u?u:0;l>0&&this.rpcSentIHave.inc(l),f>0&&this.rpcSentIWant.inc(f),p>0&&this.rpcSentGraft.inc(p),h>0&&this.rpcSentPrune.inc(h),(l>0||f>0||p>0||h>0)&&this.rpcSentControl.inc(1)}},registerScores:function(e,t){var r,n=0,a=0,i=0,o=0,s=(0,zn.Z)(e);try{for(s.s();!(r=s.n()).done;){var u=r.value;u>=t.graylistThreshold&&n++,u>=t.publishThreshold&&a++,u>=t.gossipThreshold&&i++,u>=0&&o++}}catch(sY){s.e(sY)}finally{s.f()}this.peersByScoreThreshold.set({threshold:nee.graylist},n),this.peersByScoreThreshold.set({threshold:nee.publish},a),this.peersByScoreThreshold.set({threshold:nee.gossip},i),this.peersByScoreThreshold.set({threshold:nee.mesh},o),this.score.set(e)},registerScoreWeights:function(e){var t,r=(0,zn.Z)(e.byTopic);try{for(r.s();!(t=r.n()).done;){var n=(0,wn.Z)(t.value,2),a=n[0],i=n[1];this.scoreWeights.set({topic:a,p:"p1"},i.p1w),this.scoreWeights.set({topic:a,p:"p2"},i.p2w),this.scoreWeights.set({topic:a,p:"p3"},i.p3w),this.scoreWeights.set({topic:a,p:"p3b"},i.p3bw),this.scoreWeights.set({topic:a,p:"p4"},i.p4w)}}catch(sY){r.e(sY)}finally{r.f()}this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh:function(e,t){var r=this,n=new Map;e.forEach((function(e,t){var a,i=null!==(a=r.topicStrToLabel.get(t))&&void 0!==a?a:"unknown",o=n.get(i);o||(o=new Set,n.set(i,o)),e.forEach((function(e){var t;return null===(t=o)||void 0===t?void 0:t.add(e)}))}));var a,i=(0,zn.Z)(n);try{var o=function(){var e=(0,wn.Z)(a.value,2),n=e[0],i=e[1],o=[];i.forEach((function(e){var r;o.push(null!==(r=t.get(e))&&void 0!==r?r:0)})),r.scorePerMesh.set({topic:n},o)};for(i.s();!(a=i.n()).done;)o()}catch(sY){i.e(sY)}finally{i.f()}}}}(o.metricsRegister,o.metricsTopicStrToLabel,{gossipPromiseExpireSec:i.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:s.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:u/1e3});c.mcacheSize.addCollect((function(){return i.onScrapeMetrics(c)}));var l,f=(0,zn.Z)(i.multicodecs);try{for(f.s();!(l=f.n()).done;){var p=l.value;c.protocolsEnabled.set({protocol:p},1)}}catch(sY){f.e(sY)}finally{f.f()}i.metrics=c}else i.metrics=null;return i.gossipTracer=new see(i.opts.gossipsubIWantFollowupMs,i.msgIdToStrFn,i.metrics),i.score=new oee(i.opts.scoreParams,i.metrics,{scoreCacheValidityMs:s.heartbeatInterval}),i.maxInboundStreams=o.maxInboundStreams,i.maxOutboundStreams=o.maxOutboundStreams,i}return Sn(r,[{key:"getPeers",value:function(){return(0,kn.Z)(this.peers.keys()).map((function(e){return KD(e)}))}},{key:"isStarted",value:function(){return this.status.code===Lee.started}},{key:"init",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.components=t,this.score.init(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:return this.log("starting"),e.next=5,M9(this.globalSignaturePolicy,this.components.getPeerId());case 5:return this.publishConfig=e.sent,this.outboundInflightQueue=nF({objectMode:!0}),yF(this.outboundInflightQueue,function(){var e=Zh(Fh().mark((function e(t){var r,n,a,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,o=xm(t);case 4:return e.next=6,o.next();case 6:if(!(r=!(s=e.sent).done)){e.next=13;break}return u=s.value,c=u.peerId,l=u.connection,e.next=10,i.createOutboundStream(c,l);case 10:r=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),n=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!n){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return i.log.error("outbound inflight queue error",e)})),e.next=10,Promise.all(this.opts.directPeers.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.components.getPeerStore().addressBook.add(t.id,t.addrs);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:return t=this.components.getRegistrar(),e.next=13,Promise.all(this.multicodecs.map((function(e){return t.handle(e,i.onIncomingStream.bind(i),{maxInboundStreams:i.maxInboundStreams,maxOutboundStreams:i.maxOutboundStreams})})));case 13:return r=f9({onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)}),e.next=16,Promise.all(this.multicodecs.map((function(e){return t.register(e,r)})));case 16:n=e.sent,a=setTimeout(this.runHeartbeat,100),this.status={code:Lee.started,registrarTopologyIds:n,heartbeatTimeout:a,hearbeatStartMs:Date.now()+100},this.score.start(),this.directPeerInitial=setTimeout((function(){Promise.resolve().then(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Array.from(i.direct).map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){i.log(e)}))}),1e3),this.log("started");case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log("stopping"),this.status.code===Lee.started){e.next=3;break}return e.abrupt("return");case 3:t=this.status.registrarTopologyIds,this.status={code:Lee.stopped},r=this.components.getRegistrar(),t.forEach((function(e){return r.unregister(e)})),this.outboundInflightQueue.end(),n=(0,zn.Z)(this.streamsOutbound.values());try{for(n.s();!(a=n.n()).done;)a.value.close()}catch(sY){n.e(sY)}finally{n.f()}this.streamsOutbound.clear(),i=(0,zn.Z)(this.streamsInbound.values());try{for(i.s();!(o=i.n()).done;)o.value.close()}catch(sY){i.e(sY)}finally{i.f()}this.streamsInbound.clear(),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dumpPeerScoreStats",value:function(){return this.score.dumpPeerScoreStats()}},{key:"onIncomingStream",value:function(e){var t=e.stream,r=e.connection;if(this.isStarted()){var n=r.remotePeer;this.addPeer(n,r.stat.direction),this.createInboundStream(n,t),this.outboundInflightQueue.push({peerId:n,connection:r})}}},{key:"onPeerConnected",value:function(e,t){this.isStarted()&&(this.addPeer(e,t.stat.direction),this.outboundInflightQueue.push({peerId:e,connection:t}))}},{key:"onPeerDisconnected",value:function(e){this.log("connection ended %p",e),this.removePeer(e)}},{key:"createOutboundStream",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:if(n=t.toString(),this.peers.has(n)){e.next=5;break}return e.abrupt("return");case 5:if(!this.streamsOutbound.has(n)){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.t0=Bee,e.next=11,r.newStream(this.multicodecs);case 11:e.t1=e.sent,e.t2=function(e){return s.log.error("outbound pipe error",e)},e.t3={maxBufferSize:this.opts.maxOutboundBufferSize},i=new e.t0(e.t1,e.t2,e.t3),this.log("create outbound stream %p",t),this.streamsOutbound.set(n,i),(o=i.protocol)===k9&&this.floodsubPeers.add(n),null===(a=this.metrics)||void 0===a||a.peersPerProtocol.inc({protocol:o},1),this.subscriptions.size>0&&(this.log("send subscriptions to",n),this.sendSubscriptions(n,Array.from(this.subscriptions),!0)),e.next=26;break;case 23:e.prev=23,e.t4=e.catch(7),this.log.error("createOutboundStream error",e.t4);case 26:case"end":return e.stop()}}),e,this,[[7,23]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createInboundStream",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:if(n=t.toString(),this.peers.has(n)){e.next=5;break}return e.abrupt("return");case 5:void 0!==(a=this.streamsInbound.get(n))&&(this.log("replacing existing inbound steam %s",n),a.close()),this.log("create inbound stream %s",n),i=new Mee(r),this.streamsInbound.set(n,i),this.pipePeerReadStream(t,i.source).catch((function(e){return o.log(e)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addPeer",value:function(e,t){var r=e.toString();this.peers.has(r)||(this.log("new peer %p",e),this.peers.add(r),this.score.addPeer(r),this.outbound.has(r)||this.outbound.set(r,"outbound"===t))}},{key:"removePeer",value:function(e){var t=e.toString();if(this.peers.has(t)){this.log("delete peer %p",e),this.peers.delete(t);var r,n=this.streamsOutbound.get(t),a=this.streamsInbound.get(t);if(n)null===(r=this.metrics)||void 0===r||r.peersPerProtocol.inc({protocol:n.protocol},-1);null===n||void 0===n||n.close(),null===a||void 0===a||a.close(),this.streamsOutbound.delete(t),this.streamsInbound.delete(t);var i,o=(0,zn.Z)(this.topics.values());try{for(o.s();!(i=o.n()).done;){i.value.delete(t)}}catch(sY){o.e(sY)}finally{o.f()}var s,u=(0,zn.Z)(this.mesh);try{for(u.s();!(s=u.n()).done;){var c,l=(0,wn.Z)(s.value,2),f=l[0];if(!0===l[1].delete(t))null===(c=this.metrics)||void 0===c||c.onRemoveFromMesh(f,eee.Dc,1)}}catch(sY){u.e(sY)}finally{u.f()}var p,h=(0,zn.Z)(this.fanout.values());try{for(h.s();!(p=h.n()).done;){p.value.delete(t)}}catch(sY){h.e(sY)}finally{h.f()}this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}}},{key:"started",get:function(){return this.status.code===Lee.started}},{key:"getMeshPeers",value:function(e){var t=this.mesh.get(e);return t?Array.from(t):[]}},{key:"getSubscribers",value:function(e){var t=this.topics.get(e);return(t?Array.from(t):[]).map((function(e){return KD(e)}))}},{key:"getTopics",value:function(){return Array.from(this.subscriptions)}},{key:"pipePeerReadStream",value:function(){var e=Zh(Fh().mark((function e(t,r){var n=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yF(r,function(){var e=Zh(Fh().mark((function e(r){var a,i,o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,s=xm(r);case 4:return e.next=6,s.next();case 6:if(!(a=!(u=e.sent).done)){e.next=26;break}if(c=u.value,e.prev=8,f=c.subarray(),p=w9.decode(f),null===(l=n.metrics)||void 0===l||l.onRpcRecv(p,f.length),!n.opts.awaitRpcHandler){e.next=17;break}return e.next=15,n.handleReceivedRpc(t,p);case 15:e.next=18;break;case 17:n.handleReceivedRpc(t,p).catch((function(e){return n.log(e)}));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),n.log(e.t0);case 23:a=!1,e.next=4;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(2),i=!0,o=e.t1;case 32:if(e.prev=32,e.prev=33,!a||null==s.return){e.next=37;break}return e.next=37,s.return();case 37:if(e.prev=37,!i){e.next=40;break}throw o;case 40:return e.finish(37);case 41:return e.finish(32);case 42:case"end":return e.stop()}}),e,null,[[2,28,32,42],[8,20],[33,,37,41]])})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this.log.error(e.t0),this.onPeerDisconnected(t);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleReceivedRpc",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.acceptFrom(t.toString())){e.next=4;break}return this.log("received message from unacceptable peer %p",t),null===(n=this.metrics)||void 0===n||n.rpcRecvNotAccepted.inc(),e.abrupt("return");case 4:if(this.log("rpc from %p",t),r.subscriptions&&r.subscriptions.length>0&&(r.subscriptions.forEach((function(e){u.handleReceivedSubscription(t,e)})),this.dispatchEvent(new g9("subscription-change",{detail:{peerId:t,subscriptions:r.subscriptions.filter((function(e){return null!==e.topic})).map((function(e){var t;return{topic:null!==(t=e.topic)&&void 0!==t?t:"",subscribe:Boolean(e.subscribe)}}))}}))),!r.messages){e.next=26;break}a=(0,zn.Z)(r.messages),e.prev=8,a.s();case 10:if((i=a.n()).done){e.next=18;break}if(o=i.value,s=this.handleReceivedMessage(t,o).catch((function(e){return u.log(e)})),!this.opts.awaitRpcMessageHandler){e.next=16;break}return e.next=16,s;case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:if(!r.control){e.next=29;break}return e.next=29,this.handleControlMessage(t.toString(),r.control);case 29:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleReceivedSubscription",value:function(e,t){if(null!=t.topic){this.log("subscription update from %p topic %s",e,t.topic);var r=this.topics.get(t.topic);null==r&&(r=new Set,this.topics.set(t.topic,r)),t.subscribe?r.add(e.toString()):r.delete(e.toString())}}},{key:"handleReceivedMessage",value:function(){var e=Zh(Fh().mark((function e(t,n){var a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(a=this.metrics)||void 0===a||a.onMsgRecvPreValidation(n.topic),e.next=3,this.validateReceivedMessage(t,n);case 3:s=e.sent,null===(i=this.metrics)||void 0===i||i.onMsgRecvResult(n.topic,s.code),e.t0=s.code,e.next=e.t0===N9.duplicate?8:e.t0===N9.invalid?11:e.t0===N9.valid?14:19;break;case 8:return this.score.duplicateMessage(t.toString(),s.msgIdStr,n.topic),this.mcache.observeDuplicate(s.msgIdStr,t.toString()),e.abrupt("return");case 11:return s.msgIdStr?(u=s.msgIdStr,this.score.rejectMessage(t.toString(),u,n.topic,s.reason),this.gossipTracer.rejectMessage(u,s.reason)):this.score.rejectInvalidMessage(t.toString(),n.topic),null===(o=this.metrics)||void 0===o||o.onMsgRecvInvalid(n.topic,s),e.abrupt("return");case 14:this.score.validateMessage(s.messageId.msgIdStr),this.gossipTracer.deliverMessage(s.messageId.msgIdStr),this.mcache.put(s.messageId,n,!this.opts.asyncValidation),this.subscriptions.has(n.topic)&&(this.components.getPeerId().equals(t)&&!this.opts.emitSelf||($b(Tn(r.prototype),"dispatchEvent",this).call(this,new g9("gossipsub:message",{detail:{propagationSource:t,msgId:s.messageId.msgIdStr,msg:s.msg}})),$b(Tn(r.prototype),"dispatchEvent",this).call(this,new g9("message",{detail:s.msg})))),this.opts.asyncValidation||this.forwardMessage(s.messageId.msgIdStr,n,t.toString());case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"validateReceivedMessage",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h,d,v;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(n=this.fastMsgIdFn)||void 0===n?void 0:n.call(this,r),!(s=o?null===(a=this.fastMsgIdCache)||void 0===a?void 0:a.get(o):void 0)){e.next=4;break}return e.abrupt("return",{code:N9.duplicate,msgIdStr:s});case 4:return e.next=6,vee(this.globalSignaturePolicy,r);case 6:if((u=e.sent).valid){e.next=9;break}return e.abrupt("return",{code:N9.invalid,reason:P9.Error,error:u.error});case 9:c=u.message,e.prev=10,this.dataTransform&&(c.data=this.dataTransform.inboundTransform(r.topic,c.data)),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(10),this.log("Invalid message, transform failed",e.t0),e.abrupt("return",{code:N9.invalid,reason:P9.Error,error:D9.TransformFailed});case 18:return e.next=20,this.msgIdFn(c);case 20:if(l=e.sent,f=this.msgIdToStrFn(l),p={msgId:l,msgIdStr:f},o&&(null===(i=this.fastMsgIdCache)||void 0===i||i.put(o,f)),!this.seenCache.has(f)){e.next=28;break}return e.abrupt("return",{code:N9.duplicate,msgIdStr:f});case 28:this.seenCache.put(f);case 29:if(null==(h=this.topicValidators.get(r.topic))){e.next=44;break}return e.prev=31,e.next=34,h(c.topic,c,t);case 34:d=e.sent,e.next=42;break;case 37:e.prev=37,e.t1=e.catch(31),"ERR_TOPIC_VALIDATOR_IGNORE"===(v=e.t1.code)&&(d=I9.Ignore),d="ERR_TOPIC_VALIDATOR_REJECT"===v?I9.Reject:I9.Ignore;case 42:if(d===I9.Accept){e.next=44;break}return e.abrupt("return",{code:N9.invalid,reason:B9(d),msgIdStr:f});case 44:return e.abrupt("return",{code:N9.valid,messageId:p,msg:c});case 45:case"end":return e.stop()}}),e,this,[[10,14],[31,37]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getScore",value:function(e){return this.score.score(e)}},{key:"sendSubscriptions",value:function(e,t,r){this.sendRpc(e,{subscriptions:t.map((function(e){return{topic:e,subscribe:r}})),messages:[]})}},{key:"handleControlMessage",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r){e.next=2;break}return e.abrupt("return");case 2:if(n=r.ihave?this.handleIHave(t,r.ihave):[],a=r.iwant?this.handleIWant(t,r.iwant):[],!r.graft){e.next=10;break}return e.next=7,this.handleGraft(t,r.graft);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=[];case 11:if(i=e.t0,e.t1=r.prune,!e.t1){e.next=16;break}return e.next=16,this.handlePrune(t,r.prune);case 16:if(n.length||a.length||i.length){e.next=18;break}return e.abrupt("return");case 18:this.sendRpc(t,S9(a,{iwant:n,prune:i}));case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"acceptFrom",value:function(e){if(this.direct.has(e))return!0;var t=Date.now(),r=this.acceptFromWhitelist.get(e);if(r&&r.messagesAccepted<128&&r.acceptUntil>=t)return r.messagesAccepted+=1,!0;var n=this.score.score(e);return n>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),n>=this.opts.scoreThresholds.graylistThreshold}},{key:"handleIHave",value:function(e,t){var r,n,a=this;if(!t.length)return[];var i,o=this.score.score(e);if(o<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,o),null===(i=this.metrics)||void 0===i||i.ihaveRcvIgnored.inc({reason:ree.LowScore}),[];var s,u=(null!==(r=this.peerhave.get(e))&&void 0!==r?r:0)+1;if(this.peerhave.set(e,u),u>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,u),null===(s=this.metrics)||void 0===s||s.ihaveRcvIgnored.inc({reason:ree.MaxIhave}),[];var c,l=null!==(n=this.iasked.get(e))&&void 0!==n?n:0;if(l>=E9)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,l),null===(c=this.metrics)||void 0===c||c.ihaveRcvIgnored.inc({reason:ree.MaxIasked}),[];var f=new Map;if(t.forEach((function(e){var t,r=e.topicID,n=e.messageIDs;if(r&&n&&a.mesh.has(r)){var i=0;n.forEach((function(e){var t=a.msgIdToStrFn(e);a.seenCache.has(t)||(f.set(t,e),i++)})),null===(t=a.metrics)||void 0===t||t.onIhaveRcv(r,n.length,i)}})),!f.size)return[];var p=f.size;p+l>E9&&(p=E9-l),this.log("IHAVE: Asking for %d out of %d messages from %s",p,f.size,e);var h=Array.from(f.values());return A9(h),h=h.slice(0,p),this.iasked.set(e,l+p),this.gossipTracer.addPromise(e,h),[{messageIDs:h}]}},{key:"handleIWant",value:function(e,t){var r,n=this;if(!t.length)return[];var a=this.score.score(e);if(a<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,a),[];var i=new Map,o=new Map,s=0;return t.forEach((function(t){var r=t.messageIDs;r&&r.forEach((function(t){var r,a=n.msgIdToStrFn(t),u=n.mcache.getWithIWantCount(a,e);null!=u?(o.set(u.msg.topic,1+(null!==(r=o.get(u.msg.topic))&&void 0!==r?r:0)),u.count>3?n.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):i.set(a,u.msg)):s++}))})),null===(r=this.metrics)||void 0===r||r.onIwantRcv(o,s),i.size?(this.log("IWANT: Sending %d messages to %s",i.size,e),Array.from(i.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}},{key:"handleGraft",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a=this.score.score(t),i=Date.now(),o=this.opts.doPX,r.forEach((function(e){var r,u,c=e.topicID;if(c){var l=s.mesh.get(c);if(l){if(!l.has(t)){if(s.direct.has(t))return s.log("GRAFT: ignoring request from direct peer %s",t),n.push(c),void(o=!1);var f=null===(r=s.backoff.get(c))||void 0===r?void 0:r.get(t);if("number"===typeof f&&i<f){s.log("GRAFT: ignoring backed off peer %s",t),s.score.addPenalty(t,1,tee.GraftBackoff),o=!1;var p=f+s.opts.graftFloodThreshold-s.opts.pruneBackoff;return i<p&&s.score.addPenalty(t,1,tee.GraftBackoff),s.addBackoff(t,c),void n.push(c)}if(a<0)return s.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",t,a,c),n.push(c),o=!1,void s.addBackoff(t,c);if(l.size>=s.opts.Dhi&&!s.outbound.get(t))return n.push(c),void s.addBackoff(t,c);s.log("GRAFT: Add mesh link from %s in %s",t,c),s.score.graft(t,c),l.add(t),null===(u=s.metrics)||void 0===u||u.onAddToMesh(c,$9.Subscribed,1)}}else o=!1}})),n.length){e.next=7;break}return e.abrupt("return",[]);case 7:return e.next=9,Promise.all(n.map((function(e){return s.makePrune(t,e,o)})));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handlePrune",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.score.score(t),a=(0,zn.Z)(r),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=23;break}if(o=i.value,s=o.topicID,u=o.backoff,c=o.peers,null!=s){e.next=8;break}return e.abrupt("continue",21);case 8:if(l=this.mesh.get(s)){e.next=11;break}return e.abrupt("return");case 11:if(this.log("PRUNE: Remove mesh link to %s in %s",t,s),this.score.prune(t,s),l.has(t)&&(l.delete(t),null===(f=this.metrics)||void 0===f||f.onRemoveFromMesh(s,eee.Unsub,1)),"number"===typeof u&&u>0?this.doAddBackoff(t,s,1e3*u):this.addBackoff(t,s),!c||!c.length){e.next=21;break}if(!(n<this.opts.scoreThresholds.acceptPXThreshold)){e.next=19;break}return this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",t,n,s),e.abrupt("continue",21);case 19:return e.next=21,this.pxConnect(c);case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(2),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[2,25,28,31]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addBackoff",value:function(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}},{key:"doAddBackoff",value:function(e,t,r){var n,a=this.backoff.get(t);a||(a=new Map,this.backoff.set(t,a));var i=Date.now()+r;(null!==(n=a.get(e))&&void 0!==n?n:0)<i&&a.set(e,i)}},{key:"applyIwantPenalties",value:function(){var e=this;this.gossipTracer.getBrokenPromises().forEach((function(t,r){e.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,t),e.score.addPenalty(r,t,tee.BrokenPromise)}))}},{key:"clearBackoff",value:function(){var e=this;if(this.heartbeatTicks%15===0){var t=Date.now();this.backoff.forEach((function(r,n){r.forEach((function(e,n){e<t&&r.delete(n)})),0===r.size&&e.backoff.delete(n)}))}}},{key:"directConnect",value:function(){var e=Zh(Fh().mark((function e(){var t,r=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.direct.forEach((function(e){r.streamsOutbound.has(e)||t.push(e)})),e.next=4,Promise.all(t.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pxConnect",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>this.opts.prunePeers&&(A9(t),t=t.slice(0,this.opts.prunePeers)),r=[],e.next=4,Promise.all(t.map(function(){var e=Zh(Fh().mark((function e(t){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.peerID){e.next=2;break}return e.abrupt("return");case 2:if(a=HD(t.peerID).toString(),!n.peers.has(a)){e.next=5;break}return e.abrupt("return");case 5:if(t.signedPeerRecord){e.next=8;break}return r.push(a),e.abrupt("return");case 8:return e.prev=8,e.next=11,r9.openAndCertify(t.signedPeerRecord,"libp2p-peer-record");case 11:if(i=e.sent,o=i.peerId,i.peerId.equals(a)){e.next=16;break}return n.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",o,a),e.abrupt("return");case 16:return e.next=18,n.components.getPeerStore().addressBook.consumePeerRecord(i);case 18:if(e.sent){e.next=21;break}return n.log("bogus peer record obtained through px: could not add peer record to address book"),e.abrupt("return");case 21:r.push(a),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),n.log("bogus peer record obtained through px: invalid signature or not a peer record");case 27:case"end":return e.stop()}}),e,null,[[8,24]])})));return function(t){return e.apply(this,arguments)}}()));case 4:if(r.length){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(r.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connect(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("Initiating connection with %s",t),r=KD(t),e.next=4,this.components.getConnectionManager().openConnection(r);case 4:n=e.sent,a=(0,zn.Z)(this.multicodecs);try{for(a.s();!(i=a.n()).done;){o=i.value,s=(0,zn.Z)(this.components.getRegistrar().getTopologies(o));try{for(s.s();!(u=s.n()).done;)u.value.onConnect(r,n)}catch(sY){s.e(sY)}finally{s.f()}}}catch(sY){a.e(sY)}finally{a.f()}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(e){if(this.status.code!==Lee.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);var t,r=(0,zn.Z)(this.peers.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;this.sendSubscriptions(n,[e],!0)}}catch(sY){r.e(sY)}finally{r.f()}}this.join(e)}},{key:"unsubscribe",value:function(e){var t=this;if(this.status.code!==Lee.started)throw new Error("Pubsub is not started");var r=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,r),r){var n,a=(0,zn.Z)(this.peers.keys());try{for(a.s();!(n=a.n()).done;){var i=n.value;this.sendSubscriptions(i,[e],!1)}}catch(sY){a.e(sY)}finally{a.f()}}this.leave(e).catch((function(e){t.log(e)}))}},{key:"join",value:function(e){var t,r=this;if(this.status.code!==Lee.started)throw new Error("Gossipsub has not started");if(!this.mesh.has(e)){this.log("JOIN %s",e),null===(t=this.metrics)||void 0===t||t.onJoin(e);var n,a=new Set,i=this.fanout.get(e);if(i)this.fanout.delete(e),this.fanoutLastpub.delete(e),i.forEach((function(e){!r.direct.has(e)&&r.score.score(e)>=0&&a.add(e)})),null===(n=this.metrics)||void 0===n||n.onAddToMesh(e,$9.Fanout,a.size);if(a.size<this.opts.D){var o,s=a.size;this.getRandomGossipPeers(e,this.opts.D,(function(e){return!a.has(e)&&!r.direct.has(e)&&r.score.score(e)>=0})).forEach((function(e){a.add(e)})),null===(o=this.metrics)||void 0===o||o.onAddToMesh(e,$9.Random,a.size-s)}this.mesh.set(e,a),a.forEach((function(t){r.log("JOIN: Add mesh link to %s in %s",t,e),r.sendGraft(t,e)}))}}},{key:"leave",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status.code===Lee.started){e.next=2;break}throw new Error("Gossipsub has not started");case 2:if(this.log("LEAVE %s",t),null===(r=this.metrics)||void 0===r||r.onLeave(t),!(n=this.mesh.get(t))){e.next=9;break}return e.next=8,Promise.all(Array.from(n).map(function(){var e=Zh(Fh().mark((function e(r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.log("LEAVE: Remove mesh link to %s in %s",r,t),e.next=3,a.sendPrune(r,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:this.mesh.delete(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectPeersToForward",value:function(e,t,r){var n=this,a=new Set,i=this.topics.get(e);i&&(this.direct.forEach((function(e){!i.has(e)||t===e||null!==r&&void 0!==r&&r.has(e)||a.add(e)})),this.floodsubPeers.forEach((function(e){i.has(e)&&t!==e&&(null===r||void 0===r||!r.has(e))&&n.score.score(e)>=n.opts.scoreThresholds.publishThreshold&&a.add(e)})));var o=this.mesh.get(e);return o&&o.size>0&&o.forEach((function(e){t===e||null!==r&&void 0!==r&&r.has(e)||a.add(e)})),a}},{key:"selectPeersToPublish",value:function(e){var t=this,r=new Set,n={direct:0,floodsub:0,mesh:0,fanout:0},a=this.topics.get(e);if(a)if(this.opts.floodPublish)a.forEach((function(e){t.direct.has(e)?(r.add(e),n.direct++):t.score.score(e)>=t.opts.scoreThresholds.publishThreshold&&(r.add(e),n.floodsub++)}));else{this.direct.forEach((function(e){a.has(e)&&(r.add(e),n.direct++)})),this.floodsubPeers.forEach((function(e){a.has(e)&&t.score.score(e)>=t.opts.scoreThresholds.publishThreshold&&(r.add(e),n.floodsub++)}));var i=this.mesh.get(e);if(i&&i.size>0)i.forEach((function(e){r.add(e),n.mesh++}));else{var o=this.fanout.get(e);if(o&&o.size>0)o.forEach((function(e){r.add(e),n.fanout++}));else{var s=this.getRandomGossipPeers(e,this.opts.D,(function(e){return t.score.score(e)>=t.opts.scoreThresholds.publishThreshold}));s.size>0&&(this.fanout.set(e,s),s.forEach((function(e){r.add(e),n.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:r,tosendCount:n}}},{key:"forwardMessage",value:function(e,t,r,n){var a,i=this;r&&this.score.deliverMessage(r,e,t.topic);var o=this.selectPeersToForward(t.topic,r,n),s=S9([t]);o.forEach((function(e){i.sendRpc(e,s)})),null===(a=this.metrics)||void 0===a||a.onForwardMsg(t.topic,o.size)}},{key:"publish",value:function(){var e=Zh(Fh().mark((function e(t,n){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.dataTransform?this.dataTransform.outboundTransform(t,n):n,null!=this.publishConfig){e.next=3;break}throw Error("PublishError.Uninitialized");case 3:return e.next=5,hee(this.publishConfig,t,n,i);case 5:return o=e.sent,s=o.raw,u=o.msg,e.next=10,this.msgIdFn(u);case 10:if(c=e.sent,l=this.msgIdToStrFn(c),!this.seenCache.has(l)){e.next=14;break}throw Error("PublishError.Duplicate");case 14:if(f=this.selectPeersToPublish(t),p=f.tosend,h=f.tosendCount,d=!0===this.opts.emitSelf&&this.subscriptions.has(t),0!==p.size||this.opts.allowPublishToZeroPeers||d){e.next=18;break}throw Error("PublishError.InsufficientPeers");case 18:this.seenCache.put(l),this.mcache.put({msgId:c,msgIdStr:l},s,!0),this.publishedMessageIds.put(l),v=S9([s]),y=(0,zn.Z)(p);try{for(y.s();!(b=y.n()).done;)g=b.value,this.sendRpc(g,v)||p.delete(g)}catch(sY){y.e(sY)}finally{y.f()}return null===(a=this.metrics)||void 0===a||a.onPublishMsg(t,h,p.size,null!=s.data?s.data.length:0),d&&(p.add(this.components.getPeerId().toString()),$b(Tn(r.prototype),"dispatchEvent",this).call(this,new g9("gossipsub:message",{detail:{propagationSource:this.components.getPeerId(),msgId:l,msg:u}})),$b(Tn(r.prototype),"dispatchEvent",this).call(this,new g9("message",{detail:u}))),e.abrupt("return",{recipients:Array.from(p.values()).map((function(e){return KD(e)}))});case 27:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"reportMessageValidationResult",value:function(e,t,r){if(r===I9.Accept){var n,a=this.mcache.validate(e);if(null===(n=this.metrics)||void 0===n||n.onReportValidationMcacheHit(null!==a),null!=a){var i,o=a.message,s=a.originatingPeers;this.score.deliverMessage(t.toString(),e,o.topic),this.forwardMessage(e,a.message,t.toString(),s),null===(i=this.metrics)||void 0===i||i.onReportValidation(o.topic,r)}}else{var u,c=this.mcache.remove(e);if(null===(u=this.metrics)||void 0===u||u.onReportValidationMcacheHit(null!==c),c){var l,f=B9(r),p=c.message,h=c.originatingPeers;this.score.rejectMessage(t.toString(),e,p.topic,f);var d,v=(0,zn.Z)(h);try{for(v.s();!(d=v.n()).done;){var y=d.value;this.score.rejectMessage(y,e,p.topic,f)}}catch(sY){v.e(sY)}finally{v.f()}null===(l=this.metrics)||void 0===l||l.onReportValidation(p.topic,r)}}}},{key:"sendGraft",value:function(e,t){var r=S9([],{graft:[{topicID:t}]});this.sendRpc(e,r)}},{key:"sendPrune",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makePrune(t,r,this.opts.doPX);case 2:e.t0=e.sent,n=[e.t0],a=S9([],{prune:n}),this.sendRpc(t,a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendRpc",value:function(e,t){var r,n=this.streamsOutbound.get(e);if(!n)return this.log("Cannot send RPC to ".concat(e," as there is no open stream to it available")),!1;var a=this.control.get(e);a&&(this.piggybackControl(e,t,a),this.control.delete(e));var i=this.gossip.get(e);i&&(this.piggybackGossip(e,t,i),this.gossip.delete(e));var o=w9.encode(t).finish();try{n.push(o)}catch(s){return this.log.error("Cannot send rpc to ".concat(e),s),a&&this.control.set(e,a),i&&this.gossip.set(e,i),!1}return null===(r=this.metrics)||void 0===r||r.onRpcSent(t,o.length),!0}},{key:"piggybackControl",value:function(e,t,r){var n=this,a=(r.graft||[]).filter((function(t){var r=t.topicID;return(r&&n.mesh.get(r)||new Set).has(e)})),i=(r.prune||[]).filter((function(t){var r=t.topicID;return!(r&&n.mesh.get(r)||new Set).has(e)}));(a.length||i.length)&&(t.control?(t.control.graft=t.control.graft&&t.control.graft.concat(a),t.control.prune=t.control.prune&&t.control.prune.concat(i)):t.control={graft:a,prune:i,ihave:[],iwant:[]})}},{key:"piggybackGossip",value:function(e,t,r){t.control||(t.control={ihave:[],iwant:[],graft:[],prune:[]}),t.control.ihave=r}},{key:"sendGraftPrune",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.opts.doPX,i=(0,zn.Z)(t),e.prev=2,s=Fh().mark((function e(){var t,i,s,u,c,l,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,wn.Z)(o.value,2),i=t[0],s=t[1],u=s.map((function(e){return{topicID:e}})),c=[],!(l=r.get(i))){e.next=9;break}return e.next=7,Promise.all(l.map(function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.makePrune(i,t,a&&!(null!==(r=n.get(i))&&void 0!==r&&r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:c=e.sent,r.delete(i);case 9:p=S9([],{graft:u,prune:c}),f.sendRpc(i,p);case 11:case"end":return e.stop()}}),e)})),i.s();case 5:if((o=i.n()).done){e.next=9;break}return e.delegateYield(s(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),i.e(e.t1);case 14:return e.prev=14,i.f(),e.finish(14);case 17:u=(0,zn.Z)(r),e.prev=18,l=Fh().mark((function e(){var t,r,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,wn.Z)(c.value,2),r=t[0],i=t[1],e.next=3,Promise.all(i.map(function(){var e=Zh(Fh().mark((function e(t){var i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.makePrune(r,t,a&&!(null!==(i=n.get(r))&&void 0!==i&&i));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:o=e.sent,s=S9([],{prune:o}),f.sendRpc(r,s);case 6:case"end":return e.stop()}}),e)})),u.s();case 21:if((c=u.n()).done){e.next=25;break}return e.delegateYield(l(),"t2",23);case 23:e.next=21;break;case 25:e.next=30;break;case 27:e.prev=27,e.t3=e.catch(18),u.e(e.t3);case 30:return e.prev=30,u.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[2,11,14,17],[18,27,30,33]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"emitGossip",value:function(e){var t,r=this.mcache.getGossipIDs(new Set(e.keys())),n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a,i=(0,wn.Z)(t.value,2),o=i[0],s=i[1];this.doEmitGossip(o,s,null!==(a=r.get(o))&&void 0!==a?a:[])}}catch(sY){n.e(sY)}finally{n.f()}}},{key:"doEmitGossip",value:function(e,t,r){var n=this;if(r.length&&(A9(r),r.length>E9&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length),t.size)){var a=this.opts.Dlazy,i=.25*t.size,o=t;i>a&&(a=i),a>o.size?a=o.size:o=A9(Array.from(o)).slice(0,a),o.forEach((function(t){var a=r;r.length>E9&&(a=A9(a.slice()).slice(0,E9)),n.pushGossip(t,{topicID:e,messageIDs:a})}))}}},{key:"flush",value:function(){var e,t=(0,zn.Z)(this.gossip.entries());try{for(t.s();!(e=t.n()).done;){var r=(0,wn.Z)(e.value,2),n=r[0],a=r[1];this.gossip.delete(n),this.sendRpc(n,S9([],{ihave:a}))}}catch(sY){t.e(sY)}finally{t.f()}var i,o=(0,zn.Z)(this.control.entries());try{for(o.s();!(i=o.n()).done;){var s=(0,wn.Z)(i.value,2),u=s[0],c=s[1];this.control.delete(u),this.sendRpc(u,S9([],{graft:c.graft,prune:c.prune}))}}catch(sY){o.e(sY)}finally{o.f()}}},{key:"pushGossip",value:function(e,t){this.log("Add gossip to %s",e);var r=this.gossip.get(e)||[];this.gossip.set(e,r.concat(t))}},{key:"makePrune",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.score.prune(t,r),this.streamsOutbound.get(t).protocol!==x9){e.next=3;break}return e.abrupt("return",{topicID:r,peers:[]});case 3:if(a=this.opts.pruneBackoff/1e3,n){e.next=6;break}return e.abrupt("return",{topicID:r,peers:[],backoff:a});case 6:return i=this.getRandomGossipPeers(r,this.opts.prunePeers,(function(e){return e!==t&&s.score.score(e)>=0})),e.next=9,Promise.all(Array.from(i).map(function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=KD(t),e.t0=r.toBytes(),e.next=4,s.components.getPeerStore().addressBook.getRawEnvelope(r);case 4:return e.t1=e.sent,e.abrupt("return",{peerID:e.t0,signedPeerRecord:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return o=e.sent,e.abrupt("return",{topicID:r,peers:o,backoff:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"heartbeat",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.opts,a=n.D,i=n.Dlo,o=n.Dhi,s=n.Dscore,u=n.Dout,c=n.fanoutTTL,this.heartbeatTicks++,l=new Map,f=function(e){var t=l.get(e);return void 0===t&&(t=b.score.score(e),l.set(e,t)),t},p=new Map,h=new Map,d=new Map,this.clearBackoff(),this.peerhave.clear(),null===(t=this.metrics)||void 0===t||t.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks!==0){e.next=15;break}return e.next=15,this.directConnect();case 15:return null===(r=this.fastMsgIdCache)||void 0===r||r.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune(),v=new Map,this.mesh.forEach((function(e,t){var r=b.topics.get(t),n=new Set,c=new Set;if(v.set(t,c),r){var l,y=A9(Array.from(r)),g=b.backoff.get(t),m=(0,zn.Z)(y);try{for(m.s();!(l=m.n()).done;){var w=l.value,k=b.streamsOutbound.get(w);if(k&&b.multicodecs.includes(k.protocol)&&!e.has(w)&&!b.direct.has(w)){var x=f(w);g&&g.has(w)||!(x>=0)||n.add(w),x>=b.opts.scoreThresholds.gossipThreshold&&c.add(w)}}}catch(sY){m.e(sY)}finally{m.f()}}var _=function(r,n){var a;b.log("HEARTBEAT: Remove mesh link to %s in %s",r,t),b.addBackoff(r,t),e.delete(r),f(r)>=b.opts.scoreThresholds.gossipThreshold&&c.add(r),null===(a=b.metrics)||void 0===a||a.onRemoveFromMesh(t,n,1);var i=h.get(r);i?i.push(t):h.set(r,[t])},E=function(r,n){var a;b.log("HEARTBEAT: Add mesh link to %s in %s",r,t),b.score.graft(r,t),e.add(r),c.delete(r),null===(a=b.metrics)||void 0===a||a.onAddToMesh(t,n,1);var i=p.get(r);i?i.push(t):p.set(r,[t])};(e.forEach((function(e){var r=f(e);r<0&&(b.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,r,t),_(e,eee.BadScore),d.set(e,!0))})),e.size<i)&&xee(n,a-e.size).forEach((function(e){E(e,$9.NotEnough)}));if(e.size>o){var S=Array.from(e);S.sort((function(e,t){return f(t)-f(e)})),S=S.slice(0,s).concat(A9(S.slice(s)));var A=0;if(S.slice(0,a).forEach((function(e){b.outbound.get(e)&&A++})),A<u){var C=function(e){for(var t=S[e],r=e;r>0;r--)S[r]=S[r-1];S[0]=t};if(A>0)for(var T=A,R=1;R<a&&T>0;R++)b.outbound.get(S[R])&&(C(R),T--);for(var I=a-A,P=a;P<S.length&&I>0;P++)b.outbound.get(S[P])&&(C(P),I--)}S.slice(a).forEach((function(e){_(e,eee.Excess)}))}if(e.size>=i){var D=0;if(e.forEach((function(e){b.outbound.get(e)&&D++})),D<u){var N=kee(n,u-D,(function(e){return!0===b.outbound.get(e)}));N.forEach((function(e){E(e,$9.Outbound)}))}}if(b.heartbeatTicks%b.opts.opportunisticGraftTicks===0&&e.size>1){var O=Array.from(e).sort((function(e,t){return f(e)-f(t)})),L=Math.floor(e.size/2),B=f(O[L]);if(B<b.opts.scoreThresholds.opportunisticGraftThreshold){var M,U=kee(n,b.opts.opportunisticGraftPeers,(function(e){return f(e)>B})),j=(0,zn.Z)(U);try{for(j.s();!(M=j.n()).done;){var F=M.value;b.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",F,t),E(F,$9.Opportunistic)}}catch(sY){j.e(sY)}finally{j.f()}}}})),y=Date.now(),this.fanoutLastpub.forEach((function(e,t){e+c<y&&(b.fanout.delete(t),b.fanoutLastpub.delete(t))})),this.fanout.forEach((function(e,t){var r=b.topics.get(t);e.forEach((function(t){(!r.has(t)||f(t)<b.opts.scoreThresholds.publishThreshold)&&e.delete(t)}));var n=b.topics.get(t),i=[],o=new Set;if(v.set(t,o),n){var s,u=A9(Array.from(n)),c=(0,zn.Z)(u);try{for(c.s();!(s=c.n()).done;){var l=s.value,p=b.streamsOutbound.get(l);if(p&&b.multicodecs.includes(p.protocol)&&!e.has(l)&&!b.direct.has(l)){var h=f(l);h>=b.opts.scoreThresholds.publishThreshold&&i.push(l),h>=b.opts.scoreThresholds.gossipThreshold&&o.add(l)}}}catch(sY){c.e(sY)}finally{c.f()}}if(e.size<a){var d=a-e.size;i.slice(0,d).forEach((function(t){e.add(t),null===o||void 0===o||o.delete(t)}))}})),this.emitGossip(v),e.next=27,this.sendGraftPrune(p,h,d);case 27:this.flush(),this.mcache.shift(),this.dispatchEvent(new g9("gossipsub:heartbeat"));case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRandomGossipPeers",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},a=this.topics.get(e);if(!a)return new Set;var i=[];return a.forEach((function(e){var t=r.streamsOutbound.get(e);t&&r.multicodecs.includes(t.protocol)&&n(e)&&i.push(e)})),i=A9(i),t>0&&i.length>t&&(i=i.slice(0,t)),new Set(i)}},{key:"onScrapeMetrics",value:function(e){var t,r;e.mcacheSize.set(this.mcache.size),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},null!==(t=null===(r=this.fastMsgIdCache)||void 0===r?void 0:r.size)&&void 0!==t?t:0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);var n,a=0,i=(0,zn.Z)(this.backoff.values());try{for(i.s();!(n=i.n()).done;){a+=n.value.size}}catch(sY){i.e(sY)}finally{i.f()}e.cacheSize.set({cache:"backoff"},a);var o,s=(0,zn.Z)(this.topics);try{for(s.s();!(o=s.n()).done;){var u=(0,wn.Z)(o.value,2),c=u[0],l=u[1];e.topicPeersCount.set({topicStr:c},l.size)}}catch(sY){s.e(sY)}finally{s.f()}var f,p=(0,zn.Z)(this.mesh);try{for(p.s();!(f=p.n()).done;){var h=(0,wn.Z)(f.value,2),d=h[0],v=h[1];e.meshPeerCounts.set({topicStr:d},v.size)}}catch(sY){p.e(sY)}finally{p.f()}var y=[],b=new Map;e.behaviourPenalty.reset();var g,m=(0,zn.Z)(this.peers.keys());try{for(m.s();!(g=m.n()).done;){var w,k,x=g.value,_=this.score.score(x);y.push(_),b.set(x,_),e.behaviourPenalty.observe(null!==(w=null===(k=this.score.peerStats.get(x))||void 0===k?void 0:k.behaviourPenalty)&&void 0!==w?w:0)}}catch(sY){m.e(sY)}finally{m.f()}e.registerScores(y,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,b);var E=function(e,t,r,n,a){var i,o={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]},s=(0,zn.Z)(e);try{for(s.s();!(i=s.n()).done;){var u=i.value,c=t.get(u);if(c){var l,f=wee(u,c,r,n,a),p=(0,zn.Z)(f.byTopic);try{for(p.s();!(l=p.n()).done;){var h=(0,wn.Z)(l.value,2),d=h[0],v=h[1],y=o.byTopic.get(d);y||(y={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},o.byTopic.set(d,y)),y.p1w.push(v.p1w),y.p2w.push(v.p2w),y.p3w.push(v.p3w),y.p3bw.push(v.p3bw),y.p4w.push(v.p4w)}}catch(sY){p.e(sY)}finally{p.f()}o.p5w.push(f.p5w),o.p6w.push(f.p6w),o.p7w.push(f.p7w),o.score.push(f.score)}else o.p5w.push(0),o.p6w.push(0),o.p7w.push(0),o.score.push(0)}}catch(sY){s.e(sY)}finally{s.f()}return o}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(E)}}]),r}(y9);Uee.multicodec=_9;var jee=function(){return{gossipsub:new Uee({allowPublishToZeroPeers:!0,fallbackToFloodsub:!0,emitSelf:!0,maxInboundStreams:64,maxOutboundStreams:128})}};function Fee(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}var zee=ud("libp2p-delegated-peer-routing"),Zee=function(){function e(t){if(xn(this,e),null==t)throw new Error("missing ipfs http client");this.client=t,this.started=!1,this.abortController=new AbortController,this.httpQueue=new zI({concurrency:4});var r=t.getEndpointConfig(),n=r.protocol,a=r.host,i=r.port;zee("enabled DelegatedPeerRouting via ".concat(n,"://").concat(a,":").concat(i))}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){this.started=!0}},{key:"stop",value:function(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}},{key:"findPeer",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:{},zee("findPeer starts: %p",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:3e4,n.signal=BR([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),a=Fee(),i=Fee(),this.httpQueue.add(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.resolve(),e.next=3,i.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),e.prev=7,e.next=10,a.promise;case 10:o=!1,s=!1,e.prev=12,c=xm(this.client.dht.findPeer(t,n));case 14:return e.next=16,c.next();case 16:if(!(o=!(l=e.sent).done)){e.next=24;break}if("FINAL_PEER"!==(f=l.value).name){e.next=21;break}return p={id:f.peer.id,multiaddrs:f.peer.multiaddrs,protocols:[]},e.abrupt("return",p);case 21:o=!1,e.next=14;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(12),s=!0,u=e.t0;case 30:if(e.prev=30,e.prev=31,!o||null==c.return){e.next=35;break}return e.next=35,c.return();case 35:if(e.prev=35,!s){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(30);case 40:e.next=46;break;case 42:throw e.prev=42,e.t1=e.catch(7),zee.error("findPeer errored: %o",e.t1),e.t1;case 46:return e.prev=46,i.resolve(),zee("findPeer finished: %p",t),e.finish(46);case 50:throw cd(new Error("Not found"),"ERR_NOT_FOUND");case 51:case"end":return e.stop()}}),e,this,[[7,42,46,50],[12,26,30,40],[31,,35,39]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=bv.asCID(e),i=null!=o?o:HD(e),zee("getClosestPeers starts: %s",i),r.timeout=null!==(a=r.timeout)&&void 0!==a?a:3e4,r.signal=BR([t.abortController.signal].concat(null!=r.signal?[r.signal]:[])),s=Fee(),u=Fee(),t.httpQueue.add(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.resolve(),e.next=3,u.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),n.prev=8,n.next=11,km(s.promise);case 11:c=!1,l=!1,n.prev=13,p=xm(t.client.dht.query(i,r));case 15:return n.next=17,km(p.next());case 17:if(!(c=!(h=n.sent).done)){n.next=24;break}if("PEER_RESPONSE"!==(d=h.value).name){n.next=21;break}return n.delegateYield(JD(xm(d.closer.map((function(e){return{id:e.id,multiaddrs:e.multiaddrs,protocols:[]}})))),"t0",21);case 21:c=!1,n.next=15;break;case 24:n.next=30;break;case 26:n.prev=26,n.t1=n.catch(13),l=!0,f=n.t1;case 30:if(n.prev=30,n.prev=31,!c||null==p.return){n.next=35;break}return n.next=35,km(p.return());case 35:if(n.prev=35,!l){n.next=38;break}throw f;case 38:return n.finish(35);case 39:return n.finish(30);case 40:n.next=46;break;case 42:throw n.prev=42,n.t2=n.catch(8),zee.error("getClosestPeers errored:",n.t2),n.t2;case 46:return n.prev=46,u.resolve(),zee("getClosestPeers finished: %b",e),n.finish(46);case 50:case"end":return n.stop()}}),n,null,[[8,42,46,50],[13,26,30,40],[31,,35,39]])})))()}}]),e}(),qee=ud("libp2p:delegated-content-routing"),Vee=3e4,Kee=function(){function e(t){if(xn(this,e),null==t)throw new Error("missing ipfs http client");this.client=t,this.started=!1,this.abortController=new AbortController,this.httpQueue=new zI({concurrency:4}),this.httpQueueRefs=new zI({concurrency:2});var r=t.getEndpointConfig(),n=r.protocol,a=r.host,i=r.port;qee("enabled DelegatedContentRouting via ".concat(n,"://").concat(a,":").concat(i))}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){this.started=!0}},{key:"stop",value:function(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f,p;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return qee("findProviders starts: %c",e),r.timeout=null!==(a=r.timeout)&&void 0!==a?a:Vee,r.signal=BR([t.abortController.signal].concat(null!=r.signal?[r.signal]:[])),i=Fee(),o=Fee(),t.httpQueue.add(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.resolve(),e.next=3,o.promise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),n.prev=6,n.next=9,km(i.promise);case 9:s=!1,u=!1,n.prev=11,l=xm(t.client.dht.findProvs(e,r));case 13:return n.next=15,km(l.next());case 15:if(!(s=!(f=n.sent).done)){n.next=22;break}if("PROVIDER"!==(p=f.value).name){n.next=19;break}return n.delegateYield(JD(xm(p.providers.map((function(e){return{id:e.id,protocols:[],multiaddrs:e.multiaddrs}})))),"t0",19);case 19:s=!1,n.next=13;break;case 22:n.next=28;break;case 24:n.prev=24,n.t1=n.catch(11),u=!0,c=n.t1;case 28:if(n.prev=28,n.prev=29,!s||null==l.return){n.next=33;break}return n.next=33,km(l.return());case 33:if(n.prev=33,!u){n.next=36;break}throw c;case 36:return n.finish(33);case 37:return n.finish(28);case 38:n.next=44;break;case 40:throw n.prev=40,n.t2=n.catch(6),qee.error("findProviders errored:",n.t2),n.t2;case 44:return n.prev=44,o.resolve(),qee("findProviders finished: %c",e),n.finish(44);case 48:case"end":return n.stop()}}),n,null,[[6,40,44,48],[11,24,28,38],[29,,33,37]])})))()}},{key:"provide",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a=this,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},qee("provide starts: %c",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:Vee,n.signal=BR([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),e.next=6,this.httpQueueRefs.add(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.client.block.stat(t,n);case 2:return e.next=4,OF(a.client.dht.provide(t,n));case 4:case"end":return e.stop()}}),e)}))));case 6:qee("provide finished: %c",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i=this,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},qee("put value start: %b",t),a.timeout=null!==(n=a.timeout)&&void 0!==n?n:Vee,a.signal=BR([this.abortController.signal].concat(null!=a.signal?[a.signal]:[])),e.next=6,this.httpQueue.add(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OF(i.client.dht.put(t,r,a));case 2:case"end":return e.stop()}}),e)}))));case 6:qee("put value finished: %b",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a=this,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},qee("get value start: %b",t),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:Vee,n.signal=BR([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),e.next=6,this.httpQueue.add(Zh(Fh().mark((function e(){var r,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,i=!1,e.prev=2,s=xm(a.client.dht.get(t,n));case 4:return e.next=6,s.next();case 6:if(!(r=!(u=e.sent).done)){e.next=14;break}if("VALUE"!==(c=u.value).name){e.next=11;break}return qee("get value finished: %b",t),e.abrupt("return",c.value);case 11:r=!1,e.next=4;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),i=!0,o=e.t0;case 20:if(e.prev=20,e.prev=21,!r||null==s.return){e.next=25;break}return e.next=25,s.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(20);case 30:throw cd(new Error("Not found"),"ERR_NOT_FOUND");case 31:case"end":return e.stop()}}),e,null,[[2,16,20,30],[21,,25,29]])}))));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Hee=function(e){return Promise.reject(new Error('No base found for "'.concat(e,'"')))},Wee=function(){function e(t){xn(this,e),this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase||Hee;var r,n=(0,zn.Z)(t.bases);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addBase(a)}}catch(sY){n.e(sY)}finally{n.f()}}return Sn(e,[{key:"addBase",value:function(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error('Codec already exists for codec "'.concat(e.name,'"'));this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}},{key:"removeBase",value:function(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}},{key:"getBase",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._basesByName[t]){e.next=2;break}return e.abrupt("return",this._basesByName[t]);case 2:if(!this._basesByPrefix[t]){e.next=4;break}return e.abrupt("return",this._basesByPrefix[t]);case 4:return e.next=6,this._loadBase(t);case 6:return r=e.sent,null==this._basesByName[r.name]&&null==this._basesByPrefix[r.prefix]&&this.addBase(r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listBases",value:function(){return Object.values(this._basesByName)}}]),e}(),Gee=function(e){return Promise.reject(new Error('No codec found for "'.concat(e,'"')))},Yee=function(){function e(t){xn(this,e),this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec||Gee;var r,n=(0,zn.Z)(t.codecs);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addCodec(a)}}catch(sY){n.e(sY)}finally{n.f()}}return Sn(e,[{key:"addCodec",value:function(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}},{key:"removeCodec",value:function(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}},{key:"getCodec",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r="string"===typeof t?this._codecsByName:this._codecsByCode)[t]){e.next=3;break}return e.abrupt("return",r[t]);case 3:return e.next=5,this._loadCodec(t);case 5:return n=e.sent,null==r[t]&&this.addCodec(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listCodecs",value:function(){return Object.values(this._codecsByName)}}]),e}(),Qee=function(e){return Promise.reject(new Error('No hasher found for "'.concat(e,'"')))},Jee=function(){function e(t){xn(this,e),this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher||Qee;var r,n=(0,zn.Z)(t.hashers);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addHasher(a)}}catch(sY){n.e(sY)}finally{n.f()}}return Sn(e,[{key:"addHasher",value:function(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}},{key:"removeHasher",value:function(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}},{key:"getHasher",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r="string"===typeof t?this._hashersByName:this._hashersByCode)[t]){e.next=3;break}return e.abrupt("return",r[t]);case 3:return e.next=5,this._loadHasher(t);case 5:return n=e.sent,null==r[t]&&this.addHasher(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listHashers",value:function(){return Object.values(this._hashersByName)}}]),e}();function Xee(e){try{e=Y1(Gx(e))}catch(sY){}return e=e.toString()}var $ee=ud("ipfs-http-client:lib:error-handler"),ete=Hh.bind({ignoreUndefined:!0}),tte=Wh.isBrowser||Wh.isWebWorker?location.protocol:"http",rte=Wh.isBrowser||Wh.isWebWorker?location.hostname:"localhost",nte=Wh.isBrowser||Wh.isWebWorker?location.port:"5001",ate=function(){var e=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.headers.get("Content-Type")||"").startsWith("application/json")){e.next=9;break}return e.next=4,t.json();case 4:n=e.sent,$ee(n),r=n.Message||n.message,e.next=12;break;case 9:return e.next=11,t.text();case 11:r=e.sent;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),$ee("Failed to parse error response",e.t0),r=e.t0.message;case 18:throw a=new ZI.HTTPError(t),r&&(r.includes("deadline has elapsed")&&(a=new ZI.TimeoutError),r&&r.includes("context deadline exceeded")&&(a=new ZI.TimeoutError)),r&&r.includes("request timed out")&&(a=new ZI.TimeoutError),r&&(a.message=r),a;case 23:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),ite=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,ote=function(e){return e.replace(ite,(function(e){return"-"+e.toLowerCase()}))},ste=function(e){return"string"===typeof e?FR(e):e},ute=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(this,r);var a=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};if("string"===typeof r||Hx(r))e=new URL(Xee(r));else if(r instanceof URL)e=r;else if("string"===typeof r.url||Hx(r.url))e=new URL(Xee(r.url)),n=r;else if(r.url instanceof URL)e=r.url,n=r;else{var a=((n=r||{}).protocol||tte).replace(":",""),i=(n.host||rte).split(":")[0],o=n.port||nte;e=new URL("".concat(a,"://").concat(i,":").concat(o))}if(n.apiPath?e.pathname=n.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),Wh.isNode){var s=void 0;t=n.agent||new s({keepAlive:!0,maxSockets:6})}return So(So({},n),{},{host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:t})}(n);e=t.call(this,{timeout:ste(a.timeout||0)||void 0,headers:a.headers,base:"".concat(a.url),handleError:ate,transformSearchParams:function(e){var t,r=new URLSearchParams,n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=(0,wn.Z)(t.value,2),i=a[0],o=a[1];"undefined"!==o&&"null"!==o&&"signal"!==i&&r.append(ote(i),o),"timeout"!==i||isNaN(o)||r.append(ote(i),o)}}catch(sY){n.e(sY)}finally{n.f()}return r},agent:a.agent}),delete e.get,delete e.put,delete e.delete,delete e.options;var i=e.fetch;return e.fetch=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof t||t.startsWith("/")||(t="".concat(a.url,"/").concat(t)),i.call(Pn(e),t,ete(r,{method:"POST"}))},e}return Sn(r)}(ZI),cte=(ZI.HTTPError,function(e){return function(t){return e(new ute(t),t)}});function lte(e,t){if(null==e)return{};var r,n,a=(0,ii.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fte(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function pte(e){if(null!=e){var t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){var r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw cd(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}var hte=["arg","searchParams","hashAlg","mtime","mode"];function dte(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.arg,r=e.searchParams,n=e.hashAlg,a=e.mtime,i=e.mode,o=lte(e,hte);r&&(o=So(So({},o),r)),n&&(o.hash=n),null!=a&&(a=pte(a),o.mtime=a.secs,o.mtimeNsecs=a.nsecs),null!=i&&(o.mode=fte(i)),o.timeout&&!isNaN(o.timeout)&&(o.timeout="".concat(o.timeout,"ms")),void 0===t||null===t?t=[]:Array.isArray(t)||(t=[t]);var s=new URLSearchParams(o);return t.forEach((function(e){return s.append("arg",e)})),s}var vte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bitswap/wantlist",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,t.abrupt("return",(n.Keys||[]).map((function(e){return bv.parse(e["/"])})));case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),yte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("bitswap/wantlist",{signal:n.signal,searchParams:dte(So(So({},n),{},{peer:r.toString()})),headers:n.headers});case 3:return t.next=5,t.sent.json();case 5:return a=t.sent,t.abrupt("return",(a.Keys||[]).map((function(e){return bv.parse(e["/"])})));case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),bte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bitswap/stat",{searchParams:dte(r),signal:r.signal,headers:r.headers});case 3:return n=t.sent,t.t0=gte,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function gte(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((function(e){return bv.parse(e["/"])})),peers:(e.Peers||[]).map((function(e){return KD(e)})),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}var mte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("bitswap/unwant",{signal:n.signal,searchParams:dte(So({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.abrupt("return",a.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function wte(e){return{wantlist:vte(e),wantlistForPeer:yte(e),unwant:mte(e),stat:bte(e)}}var kte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("block/get",{signal:n.signal,searchParams:dte(So({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.t0=Uint8Array,t.next=7,a.arrayBuffer();case 7:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function xte(e){return _te.apply(this,arguments)}function _te(){return _te=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_z(t)){e.next=2;break}return e.abrupt("return",new Blob([t]));case 2:if(!("string"===typeof t||t instanceof String)){e.next=4;break}return e.abrupt("return",new Blob([t.toString()]));case 4:if(!Ez(t)){e.next=6;break}return e.abrupt("return",t);case 6:if(Az(t)&&(t=gz(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=28;break}return r=wz(t),e.next=11,r.peek();case 11:if(n=e.sent,a=n.value,!n.done){e.next=16;break}return e.abrupt("return",Ete(r));case 16:if(r.push(a),!Number.isInteger(a)){e.next=26;break}return e.t0=Blob,e.t1=Uint8Array,e.next=22,kz(r);case 22:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.t4=[e.t3],e.abrupt("return",new e.t0(e.t4));case 26:if(!(_z(a)||"string"===typeof a||a instanceof String)){e.next=28;break}return e.abrupt("return",Ete(r));case 28:throw cd(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 29:case"end":return e.stop()}}),e)}))),_te.apply(this,arguments)}function Ete(e){return Ste.apply(this,arguments)}function Ste(){return Ste=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!1,a=!1,e.prev=3,o=xm(t);case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}u=s.value,r.push(u);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",new Blob(r));case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])}))),Ste.apply(this,arguments)}function Ate(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function Cte(e,t){return Tte.apply(this,arguments)}function Tte(){return Tte=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S.length>2&&void 0!==S[2]?S[2]:{},a=[],i=new FormData,o=0,s=0,u=!1,c=!1,e.prev=7,f=xm(OV(t,xte,!0));case 9:return e.next=11,f.next();case 11:if(!(u=!(p=e.sent).done)){e.next=37;break}if(h=p.value,d=h.content,v=h.path,y=h.mode,b=h.mtime,g="",m=d?"file":"dir",o>0&&(g="-".concat(o)),w=m+g,k=[],null!==y&&void 0!==y&&k.push("mode=".concat(Ate(y))),null!=b&&(x=b.secs,_=b.nsecs,k.push("mtime=".concat(x)),null!=_&&k.push("mtime-nsecs=".concat(_))),k.length&&(w="".concat(w,"?").concat(k.join("&"))),!d){e.next=28;break}i.set(w,d,null!=v?encodeURIComponent(v):void 0),E=s+d.size,a.push({name:v,start:s,end:E}),s=E,e.next=33;break;case 28:if(null==v){e.next=32;break}i.set(w,new File([""],encodeURIComponent(v),{type:"application/x-directory"})),e.next=33;break;case 32:throw new Error("path or content or both must be set");case 33:o++;case 34:u=!1,e.next=9;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(7),c=!0,l=e.t0;case 43:if(e.prev=43,e.prev=44,!u||null==f.return){e.next=48;break}return e.next=48,f.return();case 48:if(e.prev=48,!c){e.next=51;break}throw l;case 51:return e.finish(48);case 52:return e.finish(43);case 53:return e.abrupt("return",{total:s,parts:a,headers:n,body:i});case 54:case"end":return e.stop()}}),e,null,[[7,39,43,53],[44,,48,52]])}))),Tte.apply(this,arguments)}function Rte(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,BR.anySignal)(function(e){return e.filter(Boolean)}(t))}var Ite=cte((function(e){function t(e){return r.apply(this,arguments)}function r(){return r=Zh(Fh().mark((function r(n){var a,i,o,s,u,c=arguments;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},i=new AbortController,o=Rte(i.signal,a.signal),r.prev=3,r.t0=e,r.t1=So,r.t2={signal:o,searchParams:dte(a)},r.next=9,Cte([n],i,a.headers);case 9:return r.t3=r.sent,r.t4=(0,r.t1)(r.t2,r.t3),r.next=13,r.t0.post.call(r.t0,"block/put",r.t4);case 13:return u=r.sent,r.next=16,u.json();case 16:s=r.sent,r.next=28;break;case 19:if(r.prev=19,r.t5=r.catch(3),"dag-pb"!==a.format){r.next=25;break}return r.abrupt("return",t(n,So(So({},a),{},{format:"protobuf"})));case 25:if("dag-cbor"!==a.format){r.next=27;break}return r.abrupt("return",t(n,So(So({},a),{},{format:"cbor"})));case 27:throw r.t5;case 28:return r.abrupt("return",bv.parse(s.Key));case 29:case"end":return r.stop()}}),r,null,[[3,19]])}))),r.apply(this,arguments)}return t})),Pte=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Array.isArray(t)||(t=[t]),n.next=3,km(e.post("block/rm",{signal:r.signal,searchParams:dte(So({arg:t.map((function(e){return e.toString()})),"stream-channels":!0},r)),headers:r.headers}));case 3:a=n.sent,i=!1,o=!1,n.prev=6,u=xm(a.ndjson());case 8:return n.next=10,km(u.next());case 10:if(!(i=!(c=n.sent).done)){n.next=17;break}return l=c.value,n.next=14,Dte(l);case 14:i=!1,n.next=8;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(6),o=!0,s=n.t0;case 23:if(n.prev=23,n.prev=24,!i||null==u.return){n.next=28;break}return n.next=28,km(u.return());case 28:if(n.prev=28,!o){n.next=31;break}throw s;case 31:return n.finish(28);case 32:return n.finish(23);case 33:case"end":return n.stop()}}),n,null,[[6,19,23,33],[24,,28,32]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Dte(e){var t={cid:bv.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}var Nte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("block/stat",{signal:n.signal,searchParams:dte(So({arg:r.toString()},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{cid:bv.parse(i.Key),size:i.Size});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Ote(e){return{get:kte(e),put:Ite(e),rm:Pte(e),stat:Nte(e)}}var Lte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("bootstrap/add",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Peers,t.abrupt("return",{Peers:o.map((function(e){return Gx(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Bte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("bootstrap/rm",{signal:r.signal,searchParams:dte(So(So({},r),{},{all:!0})),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return Gx(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Mte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("bootstrap/list",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return Gx(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Ute=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("bootstrap/add",{signal:r.signal,searchParams:dte(So(So({},r),{},{default:!0})),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",{Peers:i.map((function(e){return Gx(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),jte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("bootstrap/rm",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Peers,t.abrupt("return",{Peers:o.map((function(e){return Gx(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Fte(e){return{add:Lte(e),clear:Bte(e),list:Mte(e),reset:Ute(e),rm:jte(e)}}var zte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("config/profile/apply",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{original:i.OldCfg,updated:i.NewCfg});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Zte(e){if(null==e)return e;var t=/^[A-Z]+$/;return Object.keys(e).reduce((function(r,n){return t.test(n)?r[n.toLowerCase()]=e[n]:t.test(n[0])?r[n[0].toLowerCase()+n.slice(1)]=e[n]:r[n]=e[n],r}),{})}var qte=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("config/profile/list",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.map((function(e){return Zte(e)})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function Vte(e){return{apply:zte(e),list:qte(e)}}var Kte=cte((function(e){var t=function(){var t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r){t.next=3;break}throw new Error("key argument is required");case 3:return t.next=5,e.post("config",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 5:return a=t.sent,t.next=8,a.json();case 8:return i=t.sent,t.abrupt("return",i.Value);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),Hte=cte((function(e){var t=function(){var t=Zh(Fh().mark((function t(){var r,n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("config/show",{signal:r.signal,searchParams:dte(So({},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t})),Wte=cte((function(e){var t=function(){var t=Zh(Fh().mark((function t(r){var n,a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},a=new AbortController,i=Rte(a.signal,n.signal),t.t0=e,t.t1=So,t.t2={signal:i,searchParams:dte(n)},t.next=8,Cte([mm(JSON.stringify(r))],a,n.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"config/replace",t.t4);case 12:return o=t.sent,t.next=15,o.text();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),Gte=cte((function(e){var t=function(){var t=Zh(Fh().mark((function t(r,n){var a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:{},"string"===typeof r){t.next=3;break}throw new Error("Invalid key type");case 3:return i=So(So({},a),Yte(r,n)),t.next=6,e.post("config",{signal:a.signal,searchParams:dte(i),headers:a.headers});case 6:return o=t.sent,t.next=9,o.text();case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return t})),Yte=function(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function Qte(e){return{getAll:Hte(e),get:Kte(e),set:Gte(e),replace:Wte(e),profiles:Vte(e)}}var Jte=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("dag/export",{signal:r.signal,searchParams:dte({arg:t.toString()}),headers:r.headers}));case 2:return a=n.sent,n.delegateYield(JD(xm(a.iterator())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Xte(e,t,r,n,a){return $te.apply(this,arguments)}function $te(){return $te=Kh(Fh().mark((function e(t,r,n,a,i){var o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=Zh(Fh().mark((function e(t){var r,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCodec(t.code);case 2:return r=e.sent,e.next=5,a(t,i);case 5:return o=e.sent,e.abrupt("return",r.decode(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=r.split("/").filter(Boolean),e.next=4,km(o(t));case 4:u=e.sent,c=t;case 6:if(!s.length){e.next=25;break}if(l=s.shift()){e.next=10;break}throw cd(new Error('Could not resolve path "'.concat(r,'"')),"ERR_INVALID_PATH");case 10:if(!Object.prototype.hasOwnProperty.call(u,l)){e.next=16;break}return u=u[l],e.next=14,{value:u,remainderPath:s.join("/")};case 14:e.next=17;break;case 16:throw cd(new Error('no link named "'.concat(l,'" under ').concat(c)),"ERR_NO_LINK");case 17:if(!(f=bv.asCID(u))){e.next=23;break}return c=f,e.next=22,km(o(u));case 22:u=e.sent;case 23:e.next=6;break;case 25:return e.next=27,{value:u,remainderPath:""};case 27:case"end":return e.stop()}}),e)}))),$te.apply(this,arguments)}var ere=function(e,t){var r=cte((function(t,r){var n=kte(r),a=function(){var t=Zh(Fh().mark((function t(r){var a,i,o,s,u,c,l=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=l.length>1&&void 0!==l[1]?l[1]:{}).path){t.next=16;break}if(!a.localResolve){t.next=8;break}return t.next=5,$J(Xte(r,a.path,e,n,a));case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,QD(Xte(r,a.path,e,n,a));case 10:t.t0=t.sent;case 11:if(i=t.t0,o=i){t.next=15;break}throw cd(new Error("Not found"),"ERR_NOT_FOUND");case 15:return t.abrupt("return",o);case 16:return t.next=18,e.getCodec(r.code);case 18:return s=t.sent,t.next=21,n(r,a);case 21:return u=t.sent,c=s.decode(u),t.abrupt("return",{value:c,remainderPath:""});case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a}));return r(t)},tre=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new AbortController,i=Rte(a.signal,r.signal),n.next=4,km(Cte(t,a,r.headers));case 4:return o=n.sent,s=o.headers,u=o.body,n.next=9,km(e.post("dag/import",{signal:i,headers:s,body:u,searchParams:dte({"pin-roots":r.pinRoots})}));case 9:c=n.sent,l=!1,f=!1,n.prev=12,h=xm(c.ndjson());case 14:return n.next=16,km(h.next());case 16:if(!(l=!(d=n.sent).done)){n.next=25;break}if(void 0===(v=d.value.Root)){n.next=22;break}return y=v.Cid["/"],b=v.PinErrorMsg,n.next=22,{root:{cid:bv.parse(y),pinErrorMsg:b}};case 22:l=!1,n.next=14;break;case 25:n.next=31;break;case 27:n.prev=27,n.t0=n.catch(12),f=!0,p=n.t0;case 31:if(n.prev=31,n.prev=32,!l||null==h.return){n.next=36;break}return n.next=36,km(h.return());case 36:if(n.prev=36,!f){n.next=39;break}throw p;case 39:return n.finish(36);case 40:return n.finish(31);case 41:case"end":return n.stop()}}),n,null,[[12,27,31,41],[32,,36,40]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),rre=function(e,t){var r=cte((function(t){var r=function(){var r=Zh(Fh().mark((function r(n){var a,i,o,s,u,c,l,f=arguments;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(a=So({storeCodec:"dag-cbor",hashAlg:"sha2-256"},f.length>1&&void 0!==f[1]?f[1]:{})).inputCodec){r.next=8;break}if(n instanceof Uint8Array){r.next=5;break}throw new Error("Can only inputCodec on raw bytes that can be decoded");case 5:i=n,r.next=13;break;case 8:return r.next=10,e.getCodec(a.storeCodec);case 10:o=r.sent,i=o.encode(n),a.inputCodec=a.storeCodec;case 13:return s=new AbortController,u=Rte(s.signal,a.signal),r.t0=t,r.t1=So,r.t2={timeout:a.timeout,signal:u,searchParams:dte(a)},r.next=20,Cte([i],s,a.headers);case 20:return r.t3=r.sent,r.t4=(0,r.t1)(r.t2,r.t3),r.next=24,r.t0.post.call(r.t0,"dag/put",r.t4);case 24:return c=r.sent,r.next=27,c.json();case 27:return l=r.sent,r.abrupt("return",bv.parse(l.Cid["/"]));case 29:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return r}));return r(t)},nre=cte((function(e){var t=function(){var t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("dag/resolve",{signal:n.signal,searchParams:dte(So({arg:"".concat(r).concat(n.path?"/".concat(n.path).replace(/\/[/]+/g,"/"):"")},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{cid:bv.parse(i.Cid["/"]),remainderPath:i.RemPath});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t}));function are(e,t){return{export:Jte(t),get:ere(e,t),import:tre(t),put:rre(e,t),resolve:nre(t)}}var ire=function(e){if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:KD(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((function(e){var t=e.ID,r=e.Addrs;return{id:KD(t),multiaddrs:r.map((function(e){return Gx(e)})),protocols:[]}})),providers:(e.Responses||[]).map((function(e){var t=e.ID,r=e.Addrs;return{id:KD(t),multiaddrs:r.map((function(e){return Gx(e)})),protocols:[]}}))};if(2===e.Type){var t,r={id:null!==(t=e.ID)&&void 0!==t?t:KD(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(r={id:KD(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((function(e){return Gx(e)})),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:r}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((function(e){var t=e.ID,r=e.Addrs;return{id:KD(t),multiaddrs:r.map((function(e){return Gx(e)})),protocols:[]}}))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:mm(e.Extra,"base64pad")};if(6===e.Type){var n=e.Responses.map((function(e){return KD(e.ID)}));if(!n.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:n[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:KD(e.ID)};throw new Error("Unknown DHT event type")},ore=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("dht/findpeer",{signal:r.signal,searchParams:dte(So({arg:t},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=xm(a.ndjson());case 7:return n.next=9,km(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,ire(l);case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,km(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),sre=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("dht/findprovs",{signal:r.signal,searchParams:dte(So({arg:t.toString()},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=xm(a.ndjson());case 7:return n.next=9,km(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,ire(l);case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,km(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),ure=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("dht/get",{signal:r.signal,searchParams:dte(So({arg:t instanceof Uint8Array?uN(t):t.toString()},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=xm(a.ndjson());case 7:return n.next=9,km(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,ire(l);case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,km(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),cre=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Array.isArray(t)?t:[t],n.next=3,km(e.post("dht/provide",{signal:r.signal,searchParams:dte(So({arg:a.map((function(e){return e.toString()}))},r)),headers:r.headers}));case 3:i=n.sent,o=!1,s=!1,n.prev=6,c=xm(i.ndjson());case 8:return n.next=10,km(c.next());case 10:if(!(o=!(l=n.sent).done)){n.next=17;break}return f=l.value,n.next=14,ire(f);case 14:o=!1,n.next=8;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(6),s=!0,u=n.t0;case 23:if(n.prev=23,n.prev=24,!o||null==c.return){n.next=28;break}return n.next=28,km(c.return());case 28:if(n.prev=28,!s){n.next=31;break}throw u;case 31:return n.finish(28);case 32:return n.finish(23);case 33:case"end":return n.stop()}}),n,null,[[6,19,23,33],[24,,28,32]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),lre=cte((function(e){function t(){return t=Kh((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fh().mark((function a(){var i,o,s,u,c,l,f,p,h;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=new AbortController,o=Rte(i.signal,n.signal),a.t0=km,a.t1=e,a.t2=So,a.t3={signal:o,searchParams:dte(So({arg:t instanceof Uint8Array?uN(t):t.toString()},n))},a.next=8,km(Cte([r],i,n.headers));case 8:return a.t4=a.sent,a.t5=(0,a.t2)(a.t3,a.t4),a.t6=a.t1.post.call(a.t1,"dht/put",a.t5),a.next=13,(0,a.t0)(a.t6);case 13:s=a.sent,u=!1,c=!1,a.prev=16,f=xm(s.ndjson());case 18:return a.next=20,km(f.next());case 20:if(!(u=!(p=a.sent).done)){a.next=27;break}return h=p.value,a.next=24,ire(h);case 24:u=!1,a.next=18;break;case 27:a.next=33;break;case 29:a.prev=29,a.t7=a.catch(16),c=!0,l=a.t7;case 33:if(a.prev=33,a.prev=34,!u||null==f.return){a.next=38;break}return a.next=38,km(f.return());case 38:if(a.prev=38,!c){a.next=41;break}throw l;case 41:return a.finish(38);case 42:return a.finish(33);case 43:case"end":return a.stop()}}),a,null,[[16,29,33,43],[34,,38,42]])}))()})),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),fre=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("dht/query",{signal:r.signal,searchParams:dte(So({arg:t.toString()},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=xm(a.ndjson());case 7:return n.next=9,km(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,ire(l);case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,km(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function pre(e){return{findPeer:ore(e),findProvs:sre(e),get:ure(e),provide:cre(e),put:lre(e),query:fre(e)}}var hre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/cmds",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),dre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/net",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),vre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("diag/sys",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function yre(e){return{cmds:hre(e),net:dre(e),sys:vre(e)}}var bre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},t.next=3,e.post("files/chmod",{signal:a.signal,searchParams:dte(So({arg:r,mode:n},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),gre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},i=Array.isArray(r)?r:[r],t.next=4,e.post("files/cp",{signal:a.signal,searchParams:dte(So({arg:i.concat(n).map((function(e){return bv.asCID(e)?"/ipfs/".concat(e):e}))},a)),headers:a.headers});case 4:return o=t.sent,t.next=7,o.text();case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),mre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r&&"string"===typeof r){t.next=3;break}throw new Error("ipfs.files.flush requires a path");case 3:return t.next=5,e.post("files/flush",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 5:return a=t.sent,t.next=8,a.json();case 8:return i=t.sent,t.abrupt("return",bv.parse(i.Cid));case 10:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function wre(e){var t=Zte(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}var kre=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}throw new Error("ipfs.files.ls requires a path");case 2:return n.next=4,km(e.post("files/ls",{signal:r.signal,searchParams:dte(So(So({arg:bv.asCID(t)?"/ipfs/".concat(t):t,long:!0},r),{},{stream:!0})),headers:r.headers}));case 4:a=n.sent,i=!1,o=!1,n.prev=7,u=xm(a.ndjson());case 9:return n.next=11,km(u.next());case 11:if(!(i=!(c=n.sent).done)){n.next=38;break}if(!("Entries"in(l=c.value))){n.next=33;break}f=(0,zn.Z)(l.Entries||[]),n.prev=15,f.s();case 17:if((p=f.n()).done){n.next=23;break}return h=p.value,n.next=21,xre(wre(h));case 21:n.next=17;break;case 23:n.next=28;break;case 25:n.prev=25,n.t0=n.catch(15),f.e(n.t0);case 28:return n.prev=28,f.f(),n.finish(28);case 31:n.next=35;break;case 33:return n.next=35,xre(wre(l));case 35:i=!1,n.next=9;break;case 38:n.next=44;break;case 40:n.prev=40,n.t1=n.catch(7),o=!0,s=n.t1;case 44:if(n.prev=44,n.prev=45,!i||null==u.return){n.next=49;break}return n.next=49,km(u.return());case 49:if(n.prev=49,!o){n.next=52;break}throw s;case 52:return n.finish(49);case 53:return n.finish(44);case 54:case"end":return n.stop()}}),n,null,[[7,40,44,54],[15,25,28,31],[45,,49,53]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function xre(e){return e.hash&&(e.cid=bv.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}var _re=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("files/mkdir",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Ere=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},Array.isArray(r)||(r=[r]),t.next=4,e.post("files/mv",{signal:a.signal,searchParams:dte(So({arg:r.concat(n)},a)),headers:a.headers});case 4:return i=t.sent,t.next=7,i.text();case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),Sre=__webpack_require__(6662),Are=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("files/read",{signal:r.signal,searchParams:dte(So({arg:t,count:r.length},r)),headers:r.headers}));case 2:return a=n.sent,n.delegateYield(JD(xm(Sre(a.body))),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Cre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("files/rm",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:if(""===(i=t.sent)){t.next=11;break}throw(o=new ZI.HTTPError(a)).message=i,o;case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Tre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("files/stat",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return(i=t.sent).WithLocality=i.WithLocality||!1,t.abrupt("return",Rre(wre(i)));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Rre(e){return e.cid=bv.parse(e.hash),delete e.hash,e}var Ire=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("files/touch",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Pre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},i=new AbortController,o=Rte(i.signal,a.signal),t.t0=e,t.t1=So,t.t2={signal:o,searchParams:dte(So({arg:r,streamChannels:!0,count:a.length},a))},t.next=8,Cte([{content:n,path:"arg",mode:fte(a.mode),mtime:pte(a.mtime)}],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"files/write",t.t4);case 12:return s=t.sent,t.next=15,s.text();case 15:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}));function Dre(e){return{chmod:bre(e),cp:gre(e),flush:mre(e),ls:kre(e),mkdir:_re(e),mv:Ere(e),read:Are(e),rm:Cre(e),stat:Tre(e),touch:Ire(e),write:Pre(e)}}var Nre=cte((function(e){var t=function(){var e=Zh(Fh().mark((function e(t,r){var n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.length>2&&void 0!==n[2]?n[2]:{},cd(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return t})),Ore=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{type:"Ed25519"},t.next=3,e.post("key/gen",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",Zte(i));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Lre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n,a){var i,o,s,u=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>3&&void 0!==u[3]?u[3]:{},t.next=3,e.post("key/import",{signal:i.signal,searchParams:dte(So({arg:r,pem:n,password:a},i)),headers:i.headers});case 3:return o=t.sent,t.next=6,o.json();case 6:return s=t.sent,t.abrupt("return",Zte(s));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r,n){return t.apply(this,arguments)}})),Bre=cte((function(e){var t=function(){var e=Zh(Fh().mark((function e(t){var r=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:{},cd(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t})),Mre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("key/list",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",(a.Keys||[]).map((function(e){return Zte(e)})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Ure=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},t.next=3,e.post("key/rename",{signal:a.signal,searchParams:dte(So({arg:[r,n]},a)),headers:a.headers});case 3:return i=t.sent,t.t0=Zte,t.next=7,i.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),jre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("key/rm",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",Zte(i.Keys[0]));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Fre(e){return{export:Nre(e),gen:Ore(e),import:Lre(e),info:Bre(e),list:Mre(e),rename:Ure(e),rm:jre(e)}}var zre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},t.next=3,e.post("log/level",{signal:a.signal,searchParams:dte(So({arg:[r,n]},a)),headers:a.headers});case 3:return i=t.sent,t.t0=Zte,t.next=7,i.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),Zre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("log/ls",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.Strings);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),qre=cte((function(e){function t(){return t=Kh((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(e.post("log/tail",{signal:t.signal,searchParams:dte(t),headers:t.headers}));case 2:return n=r.sent,r.delegateYield(JD(xm(n.ndjson())),"t0",4);case 4:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function Vre(e){return{level:zre(e),ls:Zre(e),tail:qre(e)}}var Kre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("name/publish",{signal:n.signal,searchParams:dte(So({arg:"".concat(r)},n)),headers:n.headers});case 3:return a=t.sent,t.t0=Zte,t.next=7,a.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Hre=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("name/resolve",{signal:r.signal,searchParams:dte(So({arg:t,stream:!0},r)),headers:r.headers}));case 2:a=n.sent,i=!1,o=!1,n.prev=5,u=xm(a.ndjson());case 7:return n.next=9,km(u.next());case 9:if(!(i=!(c=n.sent).done)){n.next=16;break}return l=c.value,n.next=13,l.Path;case 13:i=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,km(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Wre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,e.post("name/pubsub/cancel",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.t0=Zte,t.next=7,a.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Gre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("name/pubsub/state",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.t0=Zte,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Yre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("name/pubsub/subs",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",a.Strings||[]);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function Qre(e){return{cancel:Wre(e),state:Gre(e),subs:Yre(e)}}function Jre(e){return{publish:Kre(e),resolve:Hre(e),pubsub:Qre(e)}}var Xre=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("object/data",{signal:n.signal,searchParams:dte(So({arg:"".concat(r instanceof Uint8Array?bv.decode(r):r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.arrayBuffer();case 6:return i=t.sent,t.abrupt("return",new Uint8Array(i,0,i.byteLength));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),$re=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("object/get",{signal:n.signal,searchParams:dte(So({arg:"".concat(r instanceof Uint8Array?bv.decode(r):r),dataEncoding:"base64"},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",{Data:mm(i.Data,"base64pad"),Links:(i.Links||[]).map((function(e){return{Name:e.Name,Hash:bv.parse(e.Hash),Tsize:e.Size}}))});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),ene=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("object/links",{signal:n.signal,searchParams:dte(So({arg:"".concat(r instanceof Uint8Array?bv.decode(r):r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",(i.Links||[]).map((function(e){return{Name:e.Name,Tsize:e.Size,Hash:bv.parse(e.Hash)}})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),tne=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("object/new",{signal:r.signal,searchParams:dte(So({arg:r.template},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Hash,t.abrupt("return",bv.parse(i));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),rne=function(e,t){var r=cte((function(r){var n=rre(e,t);function a(){return a=Zh(Fh().mark((function e(t){var r,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",n(t,So(So({},r),{},{storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})));case 2:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return function(e){return a.apply(this,arguments)}}));return r(t)},nne=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("object/stat",{signal:n.signal,searchParams:dte(So({arg:"".concat(r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",So(So({},i),{},{Hash:bv.parse(i.Hash)}));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),ane=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},t.next=3,e.post("object/patch/add-link",{signal:a.signal,searchParams:dte(So({arg:["".concat(r),n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null]},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.json();case 6:return o=t.sent,s=o.Hash,t.abrupt("return",bv.parse(s));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),ine=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u,c,l=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:{},i=new AbortController,o=Rte(i.signal,a.signal),t.t0=e,t.t1=So,t.t2={signal:o,searchParams:dte(So({arg:"".concat(r)},a))},t.next=8,Cte([n],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"object/patch/append-data",t.t4);case 12:return s=t.sent,t.next=15,s.json();case 15:return u=t.sent,c=u.Hash,t.abrupt("return",bv.parse(c));case 18:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),one=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},t.next=3,e.post("object/patch/rm-link",{signal:a.signal,searchParams:dte(So({arg:["".concat(r),n.Name||n.name||null]},a)),headers:a.headers});case 3:return i=t.sent,t.next=6,i.json();case 6:return o=t.sent,s=o.Hash,t.abrupt("return",bv.parse(s));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),sne=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u,c,l=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:{},i=new AbortController,o=Rte(i.signal,a.signal),t.t0=e,t.t1=So,t.t2={signal:o,searchParams:dte(So({arg:["".concat(r)]},a))},t.next=8,Cte([n],i,a.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"object/patch/set-data",t.t4);case 12:return s=t.sent,t.next=15,s.json();case 15:return u=t.sent,c=u.Hash,t.abrupt("return",bv.parse(c));case 18:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}));function une(e){return{addLink:ane(e),appendData:ine(e),rmLink:one(e),setData:sne(e)}}function cne(e,t){return{data:Xre(t),get:$re(t),links:ene(t),new:tne(t),put:rne(e,t),stat:nne(t),patch:une(t)}}var lne=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(XD(t));case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=62;break}return c=u.value,l=c.path,f=c.recursive,p=c.metadata,n.next=10,km(e.post("pin/add",{signal:r.signal,searchParams:dte(So(So({},r),{},{arg:l,recursive:f,metadata:p?JSON.stringify(p):void 0,stream:!0})),headers:r.headers}));case 10:h=n.sent,d=!1,v=!1,n.prev=13,b=xm(h.ndjson());case 15:return n.next=17,km(b.next());case 17:if(!(d=!(g=n.sent).done)){n.next=43;break}if(!(m=g.value).Pins){n.next=38;break}w=(0,zn.Z)(m.Pins),n.prev=21,w.s();case 23:if((k=w.n()).done){n.next=29;break}return x=k.value,n.next=27,bv.parse(x);case 27:n.next=23;break;case 29:n.next=34;break;case 31:n.prev=31,n.t0=n.catch(21),w.e(n.t0);case 34:return n.prev=34,w.f(),n.finish(34);case 37:return n.abrupt("continue",40);case 38:return n.next=40,bv.parse(m);case 40:d=!1,n.next=15;break;case 43:n.next=49;break;case 45:n.prev=45,n.t1=n.catch(13),v=!0,y=n.t1;case 49:if(n.prev=49,n.prev=50,!d||null==b.return){n.next=54;break}return n.next=54,km(b.return());case 54:if(n.prev=54,!v){n.next=57;break}throw y;case 57:return n.finish(54);case 58:return n.finish(49);case 59:a=!1,n.next=4;break;case 62:n.next=68;break;case 64:n.prev=64,n.t2=n.catch(2),i=!0,o=n.t2;case 68:if(n.prev=68,n.prev=69,!a||null==s.return){n.next=73;break}return n.next=73,km(s.return());case 73:if(n.prev=73,!i){n.next=76;break}throw o;case 76:return n.finish(73);case 77:return n.finish(68);case 78:case"end":return n.stop()}}),n,null,[[2,64,68,78],[13,45,49,59],[21,31,34,37],[50,,54,58],[69,,73,77]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function fne(e){var t=lne(e);return cte((function(){function e(){return e=Zh(Fh().mark((function e(r){var n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",QD(t([So({path:r},n)],n)));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)}function pne(e,t,r){var n={type:e,cid:bv.parse(t)};return r&&(n.metadata=r),n}var hne=cte((function(e){function t(){return t=Kh((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n,a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=[],t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]),r.next=4,km(e.post("pin/ls",{signal:t.signal,searchParams:dte(So(So({},t),{},{arg:n.map((function(e){return"".concat(e)})),stream:!0})),headers:t.headers}));case 4:a=r.sent,i=!1,o=!1,r.prev=7,u=xm(a.ndjson());case 9:return r.next=11,km(u.next());case 11:if(!(i=!(c=r.sent).done)){r.next=28;break}if(!(l=c.value).Keys){r.next=23;break}f=0,p=Object.keys(l.Keys);case 15:if(!(f<p.length)){r.next=22;break}return h=p[f],r.next=19,pne(l.Keys[h].Type,h,l.Keys[h].Metadata);case 19:f++,r.next=15;break;case 22:return r.abrupt("return");case 23:return r.next=25,pne(l.Type,l.Cid,l.Metadata);case 25:i=!1,r.next=9;break;case 28:r.next=34;break;case 30:r.prev=30,r.t0=r.catch(7),o=!0,s=r.t0;case 34:if(r.prev=34,r.prev=35,!i||null==u.return){r.next=39;break}return r.next=39,km(u.return());case 39:if(r.prev=39,!o){r.next=42;break}throw s;case 42:return r.finish(39);case 43:return r.finish(34);case 44:case"end":return r.stop()}}),r,null,[[7,30,34,44],[35,,39,43]])}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),dne=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(XD(t));case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=49;break}return c=u.value,l=c.path,f=c.recursive,(p=new URLSearchParams(r.searchParams)).append("arg","".concat(l)),null!=f&&p.set("recursive",String(f)),n.next=13,km(e.post("pin/rm",{signal:r.signal,headers:r.headers,searchParams:dte(So(So({},r),{},{arg:"".concat(l),recursive:f}))}));case 13:h=n.sent,d=!1,v=!1,n.prev=16,b=xm(h.ndjson());case 18:return n.next=20,km(b.next());case 20:if(!(d=!(g=n.sent).done)){n.next=30;break}if(!(m=g.value).Pins){n.next=25;break}return n.delegateYield(JD(xm(m.Pins.map((function(e){return bv.parse(e)})))),"t0",24);case 24:return n.abrupt("continue",27);case 25:return n.next=27,bv.parse(m);case 27:d=!1,n.next=18;break;case 30:n.next=36;break;case 32:n.prev=32,n.t1=n.catch(16),v=!0,y=n.t1;case 36:if(n.prev=36,n.prev=37,!d||null==b.return){n.next=41;break}return n.next=41,km(b.return());case 41:if(n.prev=41,!v){n.next=44;break}throw y;case 44:return n.finish(41);case 45:return n.finish(36);case 46:a=!1,n.next=4;break;case 49:n.next=55;break;case 51:n.prev=51,n.t2=n.catch(2),i=!0,o=n.t2;case 55:if(n.prev=55,n.prev=56,!a||null==s.return){n.next=60;break}return n.next=60,km(s.return());case 60:if(n.prev=60,!i){n.next=63;break}throw o;case 63:return n.finish(60);case 64:return n.finish(55);case 65:case"end":return n.stop()}}),n,null,[[2,51,55,65],[16,32,36,46],[37,,41,45],[56,,60,64]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),vne=function(e){var t=dne(e);return cte((function(){function e(){return e=Zh(Fh().mark((function e(r){var n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",QD(t([So({path:r},n)],n)));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)},yne=function(e){var t=e.Name,r=e.Status,n=e.Cid;return{cid:bv.parse(n),name:t,status:r}},bne=function(e){if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},gne=function(e){if(bv.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of ".concat(typeof e))},mne=function(e){var t=e.service,r=e.cid,n=e.name,a=e.status,i=e.all,o=dte({service:bne(t),name:n,force:!!i||void 0});if(r){var s,u=(0,zn.Z)(r);try{for(u.s();!(s=u.n()).done;){var c=s.value;o.append("cid",gne(c))}}catch(sY){u.e(sY)}finally{u.f()}}if(a){var l,f=(0,zn.Z)(a);try{for(f.s();!(l=f.n()).done;){var p=l.value;o.append("status",p)}}catch(sY){f.e(sY)}finally{f.f()}}return o},wne=function(e){var t=e.cid,r=e.service,n=e.background,a=e.name,i=e.origins,o=dte({arg:gne(t),service:bne(r),name:a,background:!!n||void 0});if(i){var s,u=(0,zn.Z)(i);try{for(u.s();!(s=u.n()).done;){var c=s.value;o.append("origin",c.toString())}}catch(sY){u.e(sY)}finally{u.f()}}return o},kne=["timeout","signal","headers"];function xne(e){function t(){return(t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.timeout,i=n.signal,o=n.headers,s=lte(n,kne),t.next=3,e.post("pin/remote/add",{timeout:a,signal:i,headers:o,searchParams:wne(So({cid:r},s))});case 3:return u=t.sent,t.t0=yne,t.next=7,u.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}var _ne=["timeout","signal","headers"];function Ene(e){function t(){return(t=Kh((function(t){var r=t.timeout,n=t.signal,a=t.headers,i=lte(t,_ne);return Fh().mark((function t(){var o,s,u,c,l,f,p;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,km(e.post("pin/remote/ls",{timeout:r,signal:n,headers:a,searchParams:mne(i)}));case 2:o=t.sent,s=!1,u=!1,t.prev=5,l=xm(o.ndjson());case 7:return t.next=9,km(l.next());case 9:if(!(s=!(f=t.sent).done)){t.next=16;break}return p=f.value,t.next=13,yne(p);case 13:s=!1,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),u=!0,c=t.t0;case 22:if(t.prev=22,t.prev=23,!s||null==l.return){t.next=27;break}return t.next=27,km(l.return());case 27:if(t.prev=27,!u){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[5,18,22,32],[23,,27,31]])}))()}))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}var Sne=["timeout","signal","headers"];function Ane(e){function t(){return(t=Zh(Fh().mark((function t(r){var n,a,i,o;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.timeout,a=r.signal,i=r.headers,o=lte(r,Sne),t.next=3,e.post("pin/remote/rm",{timeout:n,signal:a,headers:i,searchParams:mne(So(So({},o),{},{all:!1}))});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}var Cne=["timeout","signal","headers"];function Tne(e){function t(){return(t=Zh(Fh().mark((function t(r){var n,a,i,o;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.timeout,a=r.signal,i=r.headers,o=lte(r,Cne),t.next=3,e.post("pin/remote/rm",{timeout:n,signal:a,headers:i,searchParams:mne(So(So({},o),{},{all:!0}))});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function Rne(e){var t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function Ine(e){return So({service:e.Service,endpoint:new URL(e.ApiEndpoint)},e.Stat&&{stat:Pne(e.Stat)})}function Pne(e){switch(e.Status){case"valid":var t=e.PinCount,r=t.Pinning,n=t.Pinned;return{status:"valid",pinCount:{queued:t.Queued,pinning:r,pinned:n,failed:t.Failed}};case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function Dne(e){function t(){return(t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.endpoint,i=n.key,o=n.headers,s=n.timeout,u=n.signal,t.next=3,e.post("pin/remote/service/add",{timeout:s,signal:u,searchParams:dte({arg:[r,Rne(a),i]}),headers:o});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}}function Nne(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o,s,u,c,l=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=l.length>0&&void 0!==l[0]?l[0]:{}).stat,a=r.headers,i=r.timeout,o=r.signal,t.next=4,e.post("pin/remote/service/ls",{timeout:i,signal:o,headers:a,searchParams:!0===n?dte({stat:n}):void 0});case 4:return s=t.sent,t.next=7,s.json();case 7:return u=t.sent,c=u.RemoteServices,t.abrupt("return",c.map(Ine));case 10:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}function One(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:dte({arg:r})});case 3:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function Lne(e){var t=new ute(e);return{add:Dne(t),ls:Nne(t),rm:One(t)}}function Bne(e){var t=new ute(e);return{add:xne(t),ls:Ene(t),rm:Ane(t),rmAll:Tne(t),service:Lne(e)}}function Mne(e){return{addAll:lne(e),add:fne(e),ls:hne(e),rmAll:dne(e),rm:vne(e),remote:Bne(e)}}var Une=function(e){return Array.isArray(e)?e.map(jne):e},jne=function(e){return uN(Fne(e))},Fne=function(e){return ag.decode(e)},zne=function(e){return BigInt("0x".concat(uN(ag.decode(e),"base16")))},Zne=function(e){return ag.encode(mm(e))},qne=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("pubsub/ls",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,a=n.Strings,t.abrupt("return",Une(a)||[]);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Vne=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("pubsub/peers",{signal:n.signal,searchParams:dte(So({arg:Zne(r)},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Strings,t.abrupt("return",o||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Kne=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r,n){var a,i,o,s,u,c=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:{},i=dte(So({arg:Zne(r)},a)),o=new AbortController,s=Rte(o.signal,a.signal),t.t0=e,t.t1=So,t.t2={signal:s,searchParams:i},t.next=9,Cte([n],o,a.headers);case 9:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=13,t.t0.post.call(t.t0,"pubsub/pub",t.t4);case 13:return u=t.sent,t.next=16,u.text();case 16:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,r){return t.apply(this,arguments)}})),Hne=ud("ipfs-http-client:pubsub:subscribe"),Wne=function(e,t){return cte((function(e){function r(){return r=Zh(Fh().mark((function r(n,a){var i,o,s,u,c,l=arguments;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(i=l.length>2&&void 0!==l[2]?l[2]:{}).signal=t.subscribe(n,a,i.signal),u=new Promise((function(e,t){o=e,s=t})),c=setTimeout((function(){return o()}),1e3),e.post("pubsub/sub",{signal:i.signal,searchParams:dte(So({arg:Zne(n)},i)),headers:i.headers}).catch((function(e){t.unsubscribe(n,a),s(e)})).then((function(e){clearTimeout(c),e&&(Gne(e,{onMessage:function(e){a&&("function"!==typeof a?"function"===typeof a.handleEvent&&a.handleEvent(e):a(e))},onEnd:function(){return t.unsubscribe(n,a)},onError:i.onError}),o())})),r.abrupt("return",u);case 6:case"end":return r.stop()}}),r)}))),r.apply(this,arguments)}return function(e,t){return r.apply(this,arguments)}}))(e)};function Gne(e,t){return Yne.apply(this,arguments)}function Yne(){return(Yne=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.onMessage,a=r.onEnd,i=(i=r.onError)||Hne,e.prev=2,o=!1,s=!1,e.prev=5,c=xm(t.ndjson());case 7:return e.next=9,c.next();case 9:if(!(o=!(l=e.sent).done)){e.next=24;break}if(f=l.value,e.prev=11,f.from){e.next=14;break}return e.abrupt("continue",21);case 14:null!=f.from&&null!=f.seqno?n({type:"signed",from:KD(f.from),data:Fne(f.data),sequenceNumber:zne(f.seqno),topic:jne(f.topicIDs[0]),key:Fne(null!==(p=f.key)&&void 0!==p?p:"u"),signature:Fne(null!==(h=f.signature)&&void 0!==h?h:"u")}):n({type:"unsigned",data:Fne(f.data),topic:jne(f.topicIDs[0])}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(11),e.t0.message="Failed to parse pubsub message: ".concat(e.t0.message),i(e.t0,!1,f);case 21:o=!1,e.next=7;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(5),s=!0,u=e.t1;case 30:if(e.prev=30,e.prev=31,!o||null==c.return){e.next=35;break}return e.next=35,c.return();case 35:if(e.prev=35,!s){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(30);case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(2),Qne(e.t2)||i(e.t2,!0);case 45:return e.prev=45,a(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[2,42,45,48],[5,26,30,40],[11,17],[31,,35,39]])})))).apply(this,arguments)}var Qne=function(e){switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}},Jne=function(e,t){function r(){return(r=Zh(Fh().mark((function e(r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unsubscribe(r,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e,t){return r.apply(this,arguments)}},Xne=function(){function e(){xn(this,e),this._subs=new Map}return Sn(e,[{key:"subscribe",value:function(e,t,r){var n=this,a=this._subs.get(e)||[];if(a.find((function(e){return e.handler===t})))throw new Error("Already subscribed to ".concat(e," with this handler"));var i=new AbortController;return this._subs.set(e,[{handler:t,controller:i}].concat(a)),r&&r.addEventListener("abort",(function(){return n.unsubscribe(e,t)})),i.signal}},{key:"unsubscribe",value:function(e,t){var r,n=this._subs.get(e)||[];t?(this._subs.set(e,n.filter((function(e){return e.handler!==t}))),r=n.filter((function(e){return e.handler===t}))):(this._subs.set(e,[]),r=n),(this._subs.get(e)||[]).length||this._subs.delete(e),r.forEach((function(e){return e.controller.abort()}))}}]),e}();function $ne(e){var t=new Xne;return{ls:qne(e),peers:Vne(e),publish:Kne(e),subscribe:Wne(e,t),unsubscribe:Jne(e,t)}}var eae=cte((function(e){function t(){return t=Kh((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(e.post("refs/local",{signal:t.signal,transform:Zte,searchParams:dte(t),headers:t.headers}));case 2:return n=r.sent,r.delegateYield(JD(xm(n.ndjson())),"t0",4);case 4:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),tae=cte((function(e,t){var r=function(){var t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Array.isArray(t)?t:[t],n.next=3,km(e.post("refs",{signal:r.signal,searchParams:dte(So({arg:a.map((function(e){return"".concat(e instanceof Uint8Array?bv.decode(e):e)}))},r)),headers:r.headers,transform:Zte}));case 3:return i=n.sent,n.delegateYield(JD(xm(i.ndjson())),"t0",5);case 5:case"end":return n.stop()}}),n)}))()}));return function(e){return t.apply(this,arguments)}}();return Object.assign(r,{local:eae(t)})})),rae=cte((function(e){function t(){return t=Kh((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(e.post("repo/gc",{signal:t.signal,searchParams:dte(t),headers:t.headers,transform:function(e){return{err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?bv.parse(e.Key["/"]):null}}}));case 2:return n=r.sent,r.delegateYield(JD(xm(n.ndjson())),"t0",4);case 4:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),nae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.post("repo/stat",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,t.abrupt("return",{numObjects:BigInt(a.NumObjects),repoSize:BigInt(a.RepoSize),repoPath:a.RepoPath,version:a.Version,storageMax:BigInt(a.StorageMax)});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),aae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("repo/version",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,t.abrupt("return",n.Version);case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function iae(e){return{gc:rae(e),stat:nae(e),version:aae(e)}}var oae=cte((function(e){function t(){return t=Kh((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fh().mark((function r(){var n;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,km(e.post("stats/bw",{signal:t.signal,searchParams:dte(t),headers:t.headers,transform:function(e){return{totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)}}}));case 2:return n=r.sent,r.delegateYield(JD(xm(n.ndjson())),"t0",4);case 4:case"end":return r.stop()}}),r)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function sae(e){return{bitswap:bte(e),repo:nae(e),bw:oae(e)}}var uae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("swarm/addrs",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Addrs,t.abrupt("return",Object.keys(i).map((function(e){return{id:KD(e),addrs:(i[e]||[]).map((function(e){return Gx(e)}))}})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),cae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("swarm/connect",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Strings,t.abrupt("return",o||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),lae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("swarm/disconnect",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Strings,t.abrupt("return",o||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),fae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("swarm/addrs/local",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Strings,t.abrupt("return",(i||[]).map((function(e){return Gx(e)})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),pae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("swarm/peers",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,i=a.Peers,t.abrupt("return",(i||[]).map((function(e){return{addr:Gx(e.Addr),peer:KD(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"}})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function hae(e){return{addrs:uae(e),connect:cae(e),disconnect:lae(e),localAddrs:fae(e),peers:pae(e)}}var dae=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new AbortController,i=Rte(a.signal,r.signal),n.next=4,km(Cte(t,a,r.headers));case 4:return o=n.sent,s=o.headers,u=o.body,c=o.total,l=o.parts,f="function"===typeof r.progress?vae(c,l,r.progress):[void 0,void 0],p=(0,wn.Z)(f,2),h=p[0],d=p[1],n.next=12,km(e.post("add",{searchParams:dte(So(So({"stream-channels":!0},r),{},{progress:Boolean(h)})),onUploadProgress:d,signal:i,headers:s,body:u}));case 12:v=n.sent,y=!1,b=!1,n.prev=15,m=xm(v.ndjson());case 17:return n.next=19,km(m.next());case 19:if(!(y=!(w=n.sent).done)){n.next=31;break}if(void 0===(k=Zte(k=w.value)).hash){n.next=27;break}return n.next=25,bae(k);case 25:n.next=28;break;case 27:h&&h(k.bytes||0,k.name);case 28:y=!1,n.next=17;break;case 31:n.next=37;break;case 33:n.prev=33,n.t0=n.catch(15),b=!0,g=n.t0;case 37:if(n.prev=37,n.prev=38,!y||null==m.return){n.next=42;break}return n.next=42,km(m.return());case 42:if(n.prev=42,!b){n.next=45;break}throw g;case 45:return n.finish(42);case 46:return n.finish(37);case 47:case"end":return n.stop()}}),n,null,[[15,33,37,47],[38,,42,46]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),vae=function(e,t,r){return t?[void 0,yae(e,t,r)]:[r,void 0]},yae=function(e,t,r){var n=0,a=t.length;return function(i){for(var o=i.loaded,s=i.total,u=Math.floor(o/s*e);n<a;){var c=t[n],l=c.start,f=c.end,p=c.name;if(u<f){r(u-l,p);break}r(f-l,p),n+=1}}};function bae(e){var t=e.name,r=e.hash,n=e.size,a=e.mode,i=e.mtime,o=e.mtimeNsecs,s={path:t,cid:bv.parse(r),size:parseInt(n)};return null!=a&&(s.mode=parseInt(a,8)),null!=i&&(s.mtime={secs:i,nsecs:o||0}),s}function gae(e){var t=dae(e);return cte((function(){function e(){return e=Zh(Fh().mark((function e(r){var n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,QD(t(Lz(r),n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)}var mae=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("cat",{signal:r.signal,searchParams:dte(So({arg:t.toString()},r)),headers:r.headers}));case 2:return a=n.sent,n.delegateYield(JD(xm(a.iterator())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),wae=cte((function(e){var t=function(){var t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("commands",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t})),kae=cte((function(e){var t=function(){var t=Zh(Fh().mark((function t(r){var n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("dns",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,t.abrupt("return",i.Path);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),xae=cte((function(e){return function(){var t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}})),_ae=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=So({arg:"".concat(t instanceof Uint8Array?bv.decode(t):t)},r)).compressionLevel&&(a["compression-level"]=a.compressionLevel,delete a.compressionLevel),n.next=4,km(e.post("get",{signal:r.signal,searchParams:dte(a),headers:r.headers}));case 4:return i=n.sent,n.delegateYield(JD(xm(i.iterator())),"t0",6);case 6:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Eae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a,i,o=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.post("id",{signal:r.signal,searchParams:dte(So({arg:r.peerId?r.peerId.toString():void 0},r)),headers:r.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,(i=So({},Zte(a))).id=KD(i.id),i.addresses&&(i.addresses=i.addresses.map((function(e){return Gx(e)}))),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Sae=function(e){var t=Eae(e);function r(){return r=Zh(Fh().mark((function e(){var r,n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,t(r);case 3:return n=e.sent,e.abrupt("return",Boolean(n&&n.addresses&&n.addresses.length));case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(){return r.apply(this,arguments)}},Aae=cte((function(e,t){function r(){return r=Kh((function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function a(){var i,o,s,u,c,l,f,p,h,d,v;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=function(){return s=Zh(Fh().mark((function e(r){var n,a,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=r.Hash).includes("/")){e.next=9;break}return a=n.startsWith("/ipfs/")?n:"/ipfs/".concat(n),e.next=5,Tre(t)(a);case 5:o=e.sent,n=o.cid,e.next=10;break;case 9:n=bv.parse(n);case 10:return s={name:r.Name,path:i+(r.Name?"/".concat(r.Name):""),size:r.Size,cid:n,type:Cae(r)},r.Mode&&(s.mode=parseInt(r.Mode,8)),void 0!==r.Mtime&&null!==r.Mtime&&(s.mtime={secs:r.Mtime},void 0!==r.MtimeNsecs&&null!==r.MtimeNsecs&&(s.mtime.nsecs=r.MtimeNsecs)),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},o=function(e){return s.apply(this,arguments)},i="".concat(r instanceof Uint8Array?bv.decode(r):r),a.next=5,km(e.post("ls",{signal:n.signal,searchParams:dte(So({arg:i},n)),headers:n.headers}));case 5:u=a.sent,c=!1,l=!1,a.prev=8,p=xm(u.ndjson());case 10:return a.next=12,km(p.next());case 12:if(!(c=!(h=a.sent).done)){a.next=31;break}if(d=(d=h.value).Objects){a.next=17;break}throw new Error("expected .Objects in results");case 17:if(d=d[0]){a.next=20;break}throw new Error("expected one array in results.Objects");case 20:if(v=d.Links,Array.isArray(v)){a.next=23;break}throw new Error("expected one array in results.Objects[0].Links");case 23:if(v.length){a.next=27;break}return a.next=26,o(d);case 26:return a.abrupt("return");case 27:return a.delegateYield(JD(xm(v.map(o))),"t0",28);case 28:c=!1,a.next=10;break;case 31:a.next=37;break;case 33:a.prev=33,a.t1=a.catch(8),l=!0,f=a.t1;case 37:if(a.prev=37,a.prev=38,!c||null==p.return){a.next=42;break}return a.next=42,km(p.return());case 42:if(a.prev=42,!l){a.next=45;break}throw f;case 45:return a.finish(42);case 46:return a.finish(37);case 47:case"end":return a.stop()}}),a,null,[[8,33,37,47],[38,,42,46]])}))()})),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}));function Cae(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}var Tae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("dns",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.t0=Zte,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Rae=cte((function(e){function t(){return t=Kh((function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(e.post("ping",{signal:r.signal,searchParams:dte(So({arg:"".concat(t)},r)),headers:r.headers,transform:Zte}));case 2:return a=n.sent,n.delegateYield(JD(xm(a.ndjson())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Iae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(r){var n,a,i,o,s=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=3,e.post("resolve",{signal:n.signal,searchParams:dte(So({arg:r},n)),headers:n.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return i=t.sent,o=i.Path,t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Pae=cte((function(e){var t=function(){var e=Zh(Fh().mark((function e(){var t=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw t.length>0&&void 0!==t[0]?t[0]:{},cd(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t})),Dae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("shutdown",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.next=6,n.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Nae=cte((function(e){function t(){return t=Zh(Fh().mark((function t(){var r,n,a=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("version",{signal:r.signal,searchParams:dte(r),headers:r.headers});case 3:return n=t.sent,t.t0=So,t.t1=So,t.t2={},t.t3=Zte,t.next=10,n.json();case 10:return t.t4=t.sent,t.t5=(0,t.t3)(t.t4),t.t6=(0,t.t1)(t.t2,t.t5),t.t7={},t.t8={"ipfs-http-client":"1.0.0"},t.abrupt("return",(0,t.t0)(t.t6,t.t7,t.t8));case 16:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));__webpack_require__(9880),__webpack_require__(5014);var Oae=Object.create(null);Oae.open="0",Oae.close="1",Oae.ping="2",Oae.pong="3",Oae.message="4",Oae.upgrade="5",Oae.noop="6";var Lae=Object.create(null);Object.keys(Oae).forEach((function(e){Lae[Oae[e]]=e}));for(var Bae={type:"error",data:"parser error"},Mae="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Uae="function"===typeof ArrayBuffer,jae=function(e,t){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)},Fae=function(e,t,r){var n,a=e.type,i=e.data;return Mae&&i instanceof Blob?t?r(i):jae(i,r):Uae&&(i instanceof ArrayBuffer||(n=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer))?t?r(i):jae(new Blob([i]),r):r(Oae[a]+(i||""))},zae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zae="undefined"===typeof Uint8Array?[]:new Uint8Array(256),qae=0;qae<64;qae++)Zae[zae.charCodeAt(qae)]=qae;var Vae="function"===typeof ArrayBuffer,Kae=function(e,t){if(Vae){var r=function(e){var t,r,n,a,i,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(t=0;t<s;t+=4)r=Zae[e.charCodeAt(t)],n=Zae[e.charCodeAt(t+1)],a=Zae[e.charCodeAt(t+2)],i=Zae[e.charCodeAt(t+3)],l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|a>>2,l[u++]=(3&a)<<6|63&i;return c}(e);return Hae(r,t)}return{base64:!0,data:e}},Hae=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},Wae=function(e,t){if("string"!==typeof e)return{type:"message",data:Hae(e,t)};var r=e.charAt(0);return"b"===r?{type:"message",data:Kae(e.substring(1),t)}:Lae[r]?e.length>1?{type:Lae[r],data:e.substring(1)}:{type:Lae[r]}:Bae},Gae=String.fromCharCode(30);function Yae(e){if(e)return function(e){for(var t in Yae.prototype)e[t]=Yae.prototype[t];return e}(e)}Yae.prototype.on=Yae.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Yae.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},Yae.prototype.off=Yae.prototype.removeListener=Yae.prototype.removeAllListeners=Yae.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<n.length;a++)if((r=n[a])===t||r.fn===t){n.splice(a,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},Yae.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var a=(r=r.slice(0)).length;n<a;++n)r[n].apply(this,t)}return this},Yae.prototype.emitReserved=Yae.prototype.emit,Yae.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Yae.prototype.hasListeners=function(e){return!!this.listeners(e).length};var Qae="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Jae(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((function(t,r){return e.hasOwnProperty(r)&&(t[r]=e[r]),t}),{})}var Xae=Qae.setTimeout,$ae=Qae.clearTimeout;function eie(e,t){t.useNativeTimers?(e.setTimeoutFn=Xae.bind(Qae),e.clearTimeoutFn=$ae.bind(Qae)):(e.setTimeoutFn=Qae.setTimeout.bind(Qae),e.clearTimeoutFn=Qae.clearTimeout.bind(Qae))}var tie,rie=function(e){Cn(r,e);var t=Dn(r);function r(e,n,a){var i;return xn(this,r),(i=t.call(this,e)).description=n,i.context=a,i.type="TransportError",i}return Sn(r)}(On(Error)),nie=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).writable=!1,eie(Pn(n),e),n.opts=e,n.query=e.query,n.socket=e.socket,n}return Sn(r,[{key:"onError",value:function(e,t,n){return $b(Tn(r.prototype),"emitReserved",this).call(this,"error",new rie(e,t,n)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,$b(Tn(r.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=Wae(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){$b(Tn(r.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",$b(Tn(r.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}}]),r}(Yae),aie="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),iie=64,oie={},sie=0,uie=0;function cie(e){var t="";do{t=aie[e%iie]+t,e=Math.floor(e/iie)}while(e>0);return t}function lie(){var e=cie(+new Date);return e!==tie?(sie=0,tie=e):e+"."+cie(sie++)}for(;uie<iie;uie++)oie[aie[uie]]=uie;function fie(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}var pie=!1;try{pie="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(sY){}var hie=pie;function die(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||hie))return new XMLHttpRequest}catch(r){}if(!t)try{return new(Qae[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}function vie(){}var yie=null!=new die({xdomain:!1}).responseType,bie=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;if(xn(this,r),(n=t.call(this,e)).polling=!1,"undefined"!==typeof location){var a="https:"===location.protocol,i=location.port;i||(i=a?"443":"80"),n.xd="undefined"!==typeof location&&e.hostname!==location.hostname||i!==e.port,n.xs=e.secure!==a}var o=e&&e.forceBase64;return n.supportsBinary=yie&&!o,n}return Sn(r,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var r=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var n=0;this.polling&&(n++,this.once("pollComplete",(function(){--n||r()}))),this.writable||(n++,this.once("drain",(function(){--n||r()})))}else r()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var r=e.split(Gae),n=[],a=0;a<r.length;a++){var i=Wae(r[a],t);if(n.push(i),"error"===i.type)break}return n})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var r=e.length,n=new Array(r),a=0;e.forEach((function(e,i){Fae(e,!1,(function(e){n[i]=e,++a===r&&t(n.join(Gae))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",r="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=lie()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);var n=fie(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new gie(this.uri(),e)}},{key:"doWrite",value:function(e,t){var r=this,n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(function(e,t){r.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,r){e.onError("xhr poll error",t,r)})),this.pollXhr=t}}]),r}(nie),gie=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),eie(Pn(a=t.call(this)),n),a.opts=n,a.method=n.method||"GET",a.uri=e,a.async=!1!==n.async,a.data=void 0!==n.data?n.data:null,a.create(),a}return Sn(r,[{key:"create",value:function(){var e=this,t=Jae(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var n=this.xhr=new die(t);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var a in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this.opts.extraHeaders[a])}catch(i){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{n.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(i){return void this.setTimeoutFn((function(){e.onError(i)}),0)}"undefined"!==typeof document&&(this.index=r.requestsCount++,r.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=vie,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete r.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),r}(Yae);if(gie.requestsCount=0,gie.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",mie);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Qae?"pagehide":"unload",mie,!1)}function mie(){for(var e in gie.requests)gie.requests.hasOwnProperty(e)&&gie.requests[e].abort()}var wie="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},kie=Qae.WebSocket||Qae.MozWebSocket,xie="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),_ie=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).supportsBinary=!e.forceBase64,n}return Sn(r,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,r=xie?{}:Jae(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=xie?new kie(e,t,r):t?new kie(e,t):new kie(e)}catch(sY){return this.emitReserved("error",sY)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var r=function(){var r=e[n],a=n===e.length-1;Fae(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(r){}a&&wie((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},n=0;n<e.length;n++)r()}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",r="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=lie()),this.supportsBinary||(e.b64=1);var n=fie(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}},{key:"check",value:function(){return!!kie}}]),r}(nie),Eie={websocket:_ie,polling:bie},Sie=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Aie=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Cie(e){var t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));for(var a=Sie.exec(e||""),i={},o=14;o--;)i[Aie[o]]=a[o]||"";return-1!=r&&-1!=n&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1);"/"==t.slice(-1)&&n.splice(n.length-1,1);return n}(0,i.path),i.queryKey=function(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}(0,i.query),i}var Tie=function(e){Cn(r,e);var t=Dn(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xn(this,r),(n=t.call(this)).writeBuffer=[],e&&"object"===typeof e&&(a=e,e=null),e?(e=Cie(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=Cie(a.host).host),eie(Pn(n),a),n.secure=null!=a.secure?a.secure:"undefined"!==typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=n.secure?"443":"80"),n.hostname=a.hostname||("undefined"!==typeof location?location.hostname:"localhost"),n.port=a.port||("undefined"!==typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=a.transports||["polling","websocket"],n.writeBuffer=[],n.prevBufferLen=0,n.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},a),n.opts.path=n.opts.path.replace(/\/$/,"")+(n.opts.addTrailingSlash?"/":""),"string"===typeof n.opts.query&&(n.opts.query=function(e){for(var t={},r=e.split("&"),n=0,a=r.length;n<a;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}(n.opts.query)),n.id=null,n.upgrades=null,n.pingInterval=null,n.pingTimeout=null,n.pingTimeoutTimer=null,"function"===typeof addEventListener&&(n.opts.closeOnBeforeunload&&(n.beforeunloadEventListener=function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())},addEventListener("beforeunload",n.beforeunloadEventListener,!1)),"localhost"!==n.hostname&&(n.offlineEventListener=function(){n.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",n.offlineEventListener,!1))),n.open(),n}return Sn(r,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Eie[e](r)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,n=this.createTransport(e),a=!1;r.priorWebsocketSuccess=!1;var i=function(){a||(n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(e){if(!a)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",n),!n)return;r.priorWebsocketSuccess="websocket"===n.name,t.transport.pause((function(){a||"closed"!==t.readyState&&(f(),t.setTransport(n),n.send([{type:"upgrade"}]),t.emitReserved("upgrade",n),n=null,t.upgrading=!1,t.flush())}))}else{var i=new Error("probe error");i.transport=n.name,t.emitReserved("upgradeError",i)}})))};function o(){a||(a=!0,f(),n.close(),n=null)}var s=function(e){var r=new Error("probe error: "+e);r.transport=n.name,o(),t.emitReserved("upgradeError",r)};function u(){s("transport closed")}function c(){s("socket closed")}function l(e){n&&e.name!==n.name&&o()}var f=function(){n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};n.once("open",i),n.once("error",s),n.once("close",u),this.once("close",c),this.once("upgrading",l),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,r=0;r<this.writeBuffer.length;r++){var n=this.writeBuffer[r].data;if(n&&(t+="string"===typeof(e=n)?function(e){for(var t=0,r=0,n=0,a=e.length;n<a;n++)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"send",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"sendPacket",value:function(e,t,r,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var a={type:e,data:t,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},r=function r(){e.off("upgrade",r),e.off("upgradeError",r),t()},n=function(){e.once("upgrade",r),e.once("upgradeError",r)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?n():t()})):this.upgrading?n():t()),this}},{key:"onError",value:function(e){r.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}]),r}(Yae);Tie.protocol=4;Tie.protocol;var Rie="function"===typeof ArrayBuffer,Iie=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},Pie=Object.prototype.toString,Die="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Pie.call(Blob),Nie="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Pie.call(File);function Oie(e){return Rie&&(e instanceof ArrayBuffer||Iie(e))||Die&&e instanceof Blob||Nie&&e instanceof File}function Lie(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var r=0,n=e.length;r<n;r++)if(Lie(e[r]))return!0;return!1}if(Oie(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Lie(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&Lie(e[a]))return!0;return!1}function Bie(e){var t=[],r=e.data,n=e;return n.data=Mie(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Mie(e,t){if(!e)return e;if(Oie(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){for(var n=new Array(e.length),a=0;a<e.length;a++)n[a]=Mie(e[a],t);return n}if("object"===typeof e&&!(e instanceof Date)){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=Mie(e[o],t));return i}return e}function Uie(e,t){return e.data=jie(e.data,t),delete e.attachments,e}function jie(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=jie(e[r],t);else if("object"===typeof e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=jie(e[n],t));return e}var Fie,zie=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Fie||(Fie={}));var Zie=function(){function e(t){xn(this,e),this.replacer=t}return Sn(e,[{key:"encode",value:function(e){return e.type!==Fie.EVENT&&e.type!==Fie.ACK||!Lie(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Fie.EVENT?Fie.BINARY_EVENT:Fie.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Fie.BINARY_EVENT&&e.type!==Fie.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=Bie(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}]),e}(),qie=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).reviver=e,n}return Sn(r,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var n=(t=this.decodeString(e)).type===Fie.BINARY_EVENT;n||t.type===Fie.BINARY_ACK?(t.type=n?Fie.EVENT:Fie.ACK,this.reconstructor=new Vie(t),0===t.attachments&&$b(Tn(r.prototype),"emitReserved",this).call(this,"decoded",t)):$b(Tn(r.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!Oie(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,$b(Tn(r.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,n={type:Number(e.charAt(0))};if(void 0===Fie[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Fie.BINARY_EVENT||n.type===Fie.BINARY_ACK){for(var a=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var i=e.substring(a,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(o,t)}else n.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}n.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!r.isPayloadValid(n.type,l))throw new Error("invalid payload");n.data=l}return n}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Fie.CONNECT:return"object"===typeof t;case Fie.DISCONNECT:return void 0===t;case Fie.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case Fie.EVENT:case Fie.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case Fie.ACK:case Fie.BINARY_ACK:return Array.isArray(t)}}}]),r}(Yae),Vie=function(){function e(t){xn(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return Sn(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Uie(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function Kie(e,t,r){return e.on(t,r),function(){e.off(t,r)}}var Hie=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Wie=function(e){Cn(r,e);var t=Dn(r);function r(e,n,a){var i;return xn(this,r),(i=t.call(this)).connected=!1,i.recovered=!1,i.receiveBuffer=[],i.sendBuffer=[],i._queue=[],i._queueSeq=0,i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=n,a&&a.auth&&(i.auth=a.auth),i._opts=Object.assign({},a),i.io._autoConnect&&i.open(),i}return Sn(r,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Kie(e,"open",this.onopen.bind(this)),Kie(e,"packet",this.onpacket.bind(this)),Kie(e,"error",this.onerror.bind(this)),Kie(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Hie.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;var a={type:Fie.EVENT,data:r,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof r[r.length-1]){var i=this.ids++,o=r.pop();this._registerAckCallback(i,o),a.id=i}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var r,n=this,a=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0!==a){var i=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),a);this.acks[e]=function(){n.io.clearTimeoutFn(i);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(r,a){n.push((function(e,t){return i?e?a(e):r(t):r(e)})),t.emit.apply(t,[e].concat(n))}))}},{key:"_addToQueue",value:function(e){var t,r=this;"function"===typeof e[e.length-1]&&(t=e.pop());var n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(n===r._queue[0]){if(null!==e)n.tryCount>r._opts.retries&&(r._queue.shift(),t&&t(e));else if(r._queue.shift(),t){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];t.apply(void 0,[null].concat(i))}return n.pending=!1,r._drainQueue()}})),this._queue.push(n),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:Fie.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Fie.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fie.EVENT:case Fie.BINARY_EVENT:this.onevent(e);break;case Fie.ACK:case Fie.BINARY_ACK:this.onack(e);break;case Fie.DISCONNECT:this.ondisconnect();break;case Fie.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,n=this._anyListeners.slice(),a=(0,zn.Z)(n);try{for(a.s();!(t=a.n()).done;){t.value.apply(this,e)}}catch(sY){a.e(sY)}finally{a.f()}}$b(Tn(r.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];t.packet({type:Fie.ACK,id:e,data:a})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Fie.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,r=this._anyOutgoingListeners.slice(),n=(0,zn.Z)(r);try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(sY){n.e(sY)}finally{n.f()}}}}]),r}(Yae);function Gie(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Gie.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},Gie.prototype.reset=function(){this.attempts=0},Gie.prototype.setMin=function(e){this.ms=e},Gie.prototype.setMax=function(e){this.max=e},Gie.prototype.setJitter=function(e){this.jitter=e};var Yie=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a,i;xn(this,r),(a=t.call(this)).nsps={},a.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",a.opts=n,eie(Pn(a),n),a.reconnection(!1!==n.reconnection),a.reconnectionAttempts(n.reconnectionAttempts||1/0),a.reconnectionDelay(n.reconnectionDelay||1e3),a.reconnectionDelayMax(n.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),a.backoff=new Gie({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==n.timeout?2e4:n.timeout),a._readyState="closed",a.uri=e;var o=n.parser||er;return a.encoder=new o.Encoder,a.decoder=new o.Decoder,a._autoConnect=!1!==n.autoConnect,a._autoConnect&&a.open(),a}return Sn(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Tie(this.uri,this.opts);var r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;var a=Kie(r,"open",(function(){n.onopen(),e&&e()})),i=Kie(r,"error",(function(r){n.cleanup(),n._readyState="closed",t.emitReserved("error",r),e?e(r):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&a();var s=this.setTimeoutFn((function(){a(),r.close(),r.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(a),this.subs.push(i),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Kie(e,"ping",this.onping.bind(this)),Kie(e,"data",this.ondata.bind(this)),Kie(e,"error",this.onerror.bind(this)),Kie(e,"close",this.onclose.bind(this)),Kie(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}},{key:"ondecoded",value:function(e){var t=this;wie((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Wie(this,e,t),this.nsps[e]=r),r}},{key:"_destroy",value:function(e){for(var t=0,r=Object.keys(this.nsps);t<r.length;t++){var n=r[t];if(this.nsps[n].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),r=0;r<t.length;r++)this.engine.write(t[r],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var r=this.backoff.duration();this._reconnecting=!0;var n=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(r){r?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",r)):t.onreconnect()})))}),r);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(Yae),Qie={};function Jie(e,t){"object"===typeof e&&(t=e,e=void 0);var r,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=e;r=r||"undefined"!==typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof r?r.protocol+"//"+e:"https://"+e),n=Cie(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),a=n.source,i=n.id,o=n.path,s=Qie[i]&&o in Qie[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?r=new Yie(a,t):(Qie[i]||(Qie[i]=new Yie(a,t)),r=Qie[i]),n.query&&!t.query&&(t.query=n.queryKey),r.socket(n.path,t)}Object.assign(Jie,{Manager:Yie,Socket:Wie,io:Jie,connect:Jie});var Xie=__webpack_require__(5410);var $ie=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},eoe=$ie,toe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),roe=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),noe=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return ioe(this,e)}}]),e}(),aoe=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return ioe(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),ioe=function(e,t){return new aoe(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},ooe=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new roe(t,r,n),this.decoder=new noe(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),soe=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new ooe(t,r,n,a)},uoe=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=eoe(n,r),i=a.encode,o=a.decode;return soe({prefix:t,name:r,encode:i,decode:function(e){return toe(o(e))}})},coe=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return soe({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},loe=soe({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),foe=coe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),poe=coe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),hoe=uoe({prefix:"9",name:"base10",alphabet:"0123456789"}),doe=coe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),voe=coe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),yoe=coe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),boe=coe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),goe=coe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),moe=coe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),woe=coe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),koe=coe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xoe=coe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_oe=coe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Eoe=coe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Soe=uoe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Aoe=uoe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Coe=uoe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Toe=uoe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Roe=coe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ioe=coe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Poe=coe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Doe=coe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Noe=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Ooe=Noe.reduce((function(e,t,r){return e[r]=t,e}),[]),Loe=Noe.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Boe=soe({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Ooe[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Loe[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),Moe=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Foe;)r[n++]=255&t|Uoe,t/=128;for(;t&joe;)r[n++]=255&t|Uoe,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Uoe=128,joe=-128,Foe=Math.pow(2,31);var zoe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&qoe)<<i:(n&qoe)*Math.pow(2,i),i+=7}while(n>=Zoe);return e.bytes=o-r,a},Zoe=128,qoe=127;var Voe=Math.pow(2,7),Koe=Math.pow(2,14),Hoe=Math.pow(2,21),Woe=Math.pow(2,28),Goe=Math.pow(2,35),Yoe=Math.pow(2,42),Qoe=Math.pow(2,49),Joe=Math.pow(2,56),Xoe=Math.pow(2,63),$oe={encode:Moe,decode:zoe,encodingLength:function(e){return e<Voe?1:e<Koe?2:e<Hoe?3:e<Woe?4:e<Goe?5:e<Yoe?6:e<Qoe?7:e<Joe?8:e<Xoe?9:10}},ese=$oe,tse=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ese.encode(e,t,r),t},rse=function(e){return ese.encodingLength(e)},nse=function(e,t){var r=t.byteLength,n=rse(e),a=n+rse(r),i=new Uint8Array(a+r);return tse(e,i,0),tse(r,i,n),i.set(t,a),new ase(e,r,t,i)},ase=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),ise=function(e){var t=e.name,r=e.code,n=e.encode;return new ose(t,r,n)},ose=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?nse(this.code,r):r.then((function(e){return nse(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),sse=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},use=ise({name:"sha2-256",code:18,encode:sse("SHA-256")}),cse=ise({name:"sha2-512",code:19,encode:sse("SHA-512")}),lse=toe,fse={code:0,name:"identity",encode:lse,digest:function(e){return nse(0,lse(e))}},pse="raw",hse=85,dse=function(e){return toe(e)},vse=function(e){return toe(e)},yse=new TextEncoder,bse=new TextDecoder,gse="json",mse=512,wse=function(e){return yse.encode(JSON.stringify(e))},kse=function(e){return JSON.parse(bse.decode(e))},xse=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},tr),rr),nr),ar),ir),or),sr),ur),cr),lr));So(So({},fr),pr);function _se(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?function(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ese(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Sse=Ese("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),Ase=Ese("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=_se((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Cse=So({utf8:Sse,"utf-8":Sse,hex:xse.base16,latin1:Ase,ascii:Ase,binary:Ase},xse);function Tse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Cse[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Rse=function(){function e(t,r){var n=this;xn(this,e),this.label=t.label,this.open=Fee(),this.channel=t,this.channel.binaryType="arraybuffer",this.log=r.log,"number"===typeof this.channel.bufferedAmountLowThreshold&&(this.channel.bufferedAmountLowThreshold=65536),t.addEventListener("message",(function(e){r.onMessage(e)})),t.addEventListener("bufferedamountlow",(function(){n.log("stop backpressure: bufferedAmount %d",n.channel.bufferedAmount),n.open.resolve()})),t.addEventListener("open",(function(){n.open.resolve(),r.onOpen()})),t.addEventListener("close",(function(){r.onClose()})),t.addEventListener("error",(function(e){var a,i,o,s,u;if("Transport channel closed"===(null===(a=e.error)||void 0===a?void 0:a.message))return n.close();r.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s',t.readyState,null===(i=e.error)||void 0===i?void 0:i.message,null===(o=e.error)||void 0===o?void 0:o.errorDetail);var c=e.error instanceof Error?e.error:new Error("datachannel error: ".concat(null===(s=e.error)||void 0===s?void 0:s.message," ").concat(null===(u=e.error)||void 0===u?void 0:u.errorDetail));r.onError(cd(c,"ERR_DATA_CHANNEL"))}));var a=!1;this.closingInterval=setInterval((function(){"closing"===t.readyState?(a&&r.onClose(),a=!0):a=!1}),5e3)}return Sn(e,[{key:"send",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open.promise;case 2:this.channel.send(t),this.channel.bufferedAmount>65536&&(this.log("start backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open=Fee());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){clearInterval(this.closingInterval),this.channel.close()}},{key:"bufferedAmount",get:function(){return this.channel.bufferedAmount}}]),e}(),Ise=__webpack_require__(2096),Pse={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]};var Dse=function(e){Cn(r,e);var t=Dn(r);function r(e){var n,a,i;return xn(this,r),(i=t.call(this)).id=null!==(n=e.id)&&void 0!==n?n:Tse(Xie(4),"hex").slice(0,7),i.log=ud("libp2p:webrtc-peer:".concat(e.logPrefix,":").concat(i.id)),i.wrtc=null!==(a=e.wrtc)&&void 0!==a?a:function(){var e,t,r,n,a,i;if("undefined"===typeof globalThis)throw cd(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");var o={RTCPeerConnection:null!==(e=null!==(t=globalThis.RTCPeerConnection)&&void 0!==t?t:globalThis.mozRTCPeerConnection)&&void 0!==e?e:globalThis.webkitRTCPeerConnection,RTCSessionDescription:null!==(r=null!==(n=globalThis.RTCSessionDescription)&&void 0!==n?n:globalThis.mozRTCSessionDescription)&&void 0!==r?r:globalThis.webkitRTCSessionDescription,RTCIceCandidate:null!==(a=null!==(i=globalThis.RTCIceCandidate)&&void 0!==i?i:globalThis.mozRTCIceCandidate)&&void 0!==a?a:globalThis.webkitRTCIceCandidate};if(null==o.RTCPeerConnection)throw cd(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");return o}(),i.peerConnection=new i.wrtc.RTCPeerConnection(Object.assign({},Pse,e.peerConnectionConfig)),i.closed=!1,i.connected=Fee(),i.source=nF(),i.sink=function(){var e=Zh(Fh().mark((function e(t){var r,n,a,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.connected.promise;case 2:if(null!=i.channel){e.next=4;break}throw cd(new Error("Connected but no channel?!"),"ERR_DATA_CHANNEL");case 4:r=!1,n=!1,e.prev=6,o=xm(t);case 8:return e.next=10,o.next();case 10:if(!(r=!(s=e.sent).done)){e.next=17;break}return u=s.value,e.next=14,i.channel.send(u);case 14:r=!1,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),n=!0,a=e.t0;case 23:if(e.prev=23,e.prev=24,!r||null==o.return){e.next=28;break}return e.next=28,o.return();case 28:if(e.prev=28,!n){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(23);case 33:return e.next=35,i.close();case 35:case"end":return e.stop()}}),e,null,[[6,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),i}return Sn(r,[{key:"handleDataChannelEvent",value:function(e){var t=this,r=e.channel;null!=r?this.channel=new Rse(r,{log:this.log,onMessage:function(e){t.source.push(new Uint8Array(e.data))},onOpen:function(){t.connected.resolve(),t.dispatchEvent(new g9("ready"))},onClose:function(){t.close().catch((function(e){t.log("error closing connection after channel close",e)}))},onError:function(e){t.close(e).catch((function(e){t.log("error closing connection after channel error",e)}))}}):this.close(cd(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL")).catch((function(e){t.log("Error closing after event channel was found to be null",e)}))}},{key:"close",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.closed=!0,null!=t||null==this.channel){e.next=7;break}case 2:if(!(this.channel.bufferedAmount>0)){e.next=7;break}return e.next=5,Ise(100);case 5:e.next=2;break;case 7:null===(r=this.channel)||void 0===r||r.close(),this.peerConnection.close(),this.source.end(t),this.dispatchEvent(new g9("close"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(y9),Nse=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).log=e.log,n.peerConnection=e.peerConnection,n.wrtc=e.wrtc,n.status="idle",n.peerConnection.addEventListener("negotiationneeded",(function(){n.log("peer connection negotiation needed"),n.handleRenegotiate({type:"renegotiate"}).catch((function(e){n.log.error("could not renegotiate %o",e)}))})),n}return Sn(r,[{key:"handleSignal",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log('incoming signal "%s"',t.type),"offer"!==t.type){e.next=7;break}return e.next=4,this.handleOffer(t);case 4:return e.abrupt("return",e.sent);case 7:if("answer"!==t.type){e.next=13;break}return e.next=10,this.handleAnswer(t);case 10:return e.abrupt("return",e.sent);case 13:if("candidate"!==t.type){e.next=19;break}return e.next=16,this.handleCandidate(t);case 16:return e.abrupt("return",e.sent);case 19:if("renegotiate"!==t.type){e.next=25;break}return e.next=22,this.handleRenegotiate(t);case 22:return e.abrupt("return",e.sent);case 25:if("goodbye"!==t.type){e.next=31;break}return e.next=28,this.handleGoodye(t);case 28:return e.abrupt("return",e.sent);case 31:this.log("Unknown signal type ".concat(t.type));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOffer",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleAnswer",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleRenegotiate",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleGoodye",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.peerConnection.close();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCandidate",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this.wrtc.RTCIceCandidate(t.candidate),e.prev=1,e.next=4,this.peerConnection.addIceCandidate(r);case 4:e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(1),null!=r.address&&!r.address.endsWith(".local")){e.next=12;break}this.log("ignoring unsupported ICE candidate."),e.next=13;break;case 12:throw cd(e.t0,"ERR_ADD_ICE_CANDIDATE");case 13:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(y9),Ose=ud("libp2p:webrtc-peer:receiver"),Lse=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xn(this,r),(e=t.call(this,So(So({},n),{},{logPrefix:"receiver"}))).handshake=new Bse({log:e.log,peerConnection:e.peerConnection,wrtc:e.wrtc,answerOptions:n.answerOptions}),e.handshake.addEventListener("signal",(function(t){return e.dispatchEvent(new g9("signal",{detail:t.detail}))})),e.peerConnection.addEventListener("datachannel",(function(t){e.handleDataChannelEvent(t)})),e}return Sn(r,[{key:"handleSignal",value:function(e){var t=this;this.handshake.handleSignal(e).catch((function(r){t.log("error handling signal %o %o",e,r)}))}}]),r}(Dse),Bse=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).options=e,n.status="idle",n.iceCandidates=[],n}return Sn(r,[{key:"handleRenegotiate",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ose.trace("renegotiate"),this.dispatchEvent(new g9("signal",{detail:{type:"renegotiate"}}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleOffer",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t));case 2:n=(0,zn.Z)(this.iceCandidates),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=11;break}return i=a.value,e.next=9,this.handleCandidate(i);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return this.iceCandidates=[],e.next=22,this.peerConnection.createAnswer(this.options.answerOptions);case 22:return o=e.sent,e.next=25,this.peerConnection.setLocalDescription(o);case 25:Ose.trace("handle offer",this.peerConnection.localDescription),this.dispatchEvent(new g9("signal",{detail:null!==(r=this.peerConnection.localDescription)&&void 0!==r?r:o}));case 27:case"end":return e.stop()}}),e,this,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCandidate",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.peerConnection.remoteDescription&&null!=this.peerConnection.remoteDescription.type){e.next=3;break}return this.iceCandidates.push(t),e.abrupt("return");case 3:return e.next=5,$b(Tn(r.prototype),"handleCandidate",this).call(this,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Nse),Mse=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).name="TimeoutError",n}return Sn(r)}(On(Error)),Use=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).name="AbortError",n.message=e,n}return Sn(r)}(On(Error)),jse=function(e){return void 0===globalThis.DOMException?new Use(e):new DOMException(e)},Fse=function(e){var t=void 0===e.reason?jse("This operation was aborted."):e.reason;return t instanceof Error?t:jse(t)};var zse=function(e){var t=e.on||e.addListener||e.addEventListener,r=e.off||e.removeListener||e.removeEventListener;if(!t||!r)throw new TypeError("Emitter is not compatible");return{addListener:t.bind(e),removeListener:r.bind(e)}};function Zse(e,t,r){var n,a=new Promise((function(a,i){if(!((r=So({rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1},r)).count>=0)||r.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");var o=[t].flat(),s=[],u=zse(e),c=u.addListener,l=u.removeListener,f=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=r.multiArgs?t:t[0];r.filter&&!r.filter(o)||(s.push(o),r.count===s.length&&(n(),a(s)))},p=function(e){n(),i(e)};n=function(){var e,t=(0,zn.Z)(o);try{for(t.s();!(e=t.n()).done;){var n=e.value;l(n,f)}}catch(sY){t.e(sY)}finally{t.f()}var a,i=(0,zn.Z)(r.rejectionEvents);try{for(i.s();!(a=i.n()).done;){var s=a.value;l(s,p)}}catch(sY){i.e(sY)}finally{i.f()}};var h,d=(0,zn.Z)(o);try{for(d.s();!(h=d.n()).done;){c(h.value,f)}}catch(sY){d.e(sY)}finally{d.f()}var v,y=(0,zn.Z)(r.rejectionEvents);try{for(y.s();!(v=y.n()).done;){c(v.value,p)}}catch(sY){y.e(sY)}finally{y.f()}r.resolveImmediately&&a(s)}));if(a.cancel=n,"number"===typeof r.timeout){var i=function(e,t,r,n){var a,i=new Promise((function(i,o){if("number"!==typeof t||1!==Math.sign(t))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(t,"`"));if(t!==Number.POSITIVE_INFINITY){if((n=So({customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout}},n)).signal){var s=n.signal;s.aborted&&o(Fse(s)),s.addEventListener("abort",(function(){o(Fse(s))}))}a=n.customTimers.setTimeout.call(void 0,(function(){if("function"!==typeof r){var n="string"===typeof r?r:"Promise timed out after ".concat(t," milliseconds"),a=r instanceof Error?r:new Mse(n);"function"===typeof e.cancel&&e.cancel(),o(a)}else try{i(r())}catch(s){o(s)}}),t),Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=i,t.next=4,e;case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),o(t.t2);case 11:return t.prev=11,n.customTimers.clearTimeout.call(void 0,a),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}else i(e)}));return i.clear=function(){clearTimeout(a),a=void 0},i}(a,r.timeout);return i.cancel=n,i}return a}function qse(e,t,r){"function"===typeof r&&(r={filter:r});var n=Zse(e,t,r=So(So({},r),{},{count:1,resolveImmediately:!1})),a=n.then((function(e){return e[0]}));return a.cancel=n.cancel,a}var Vse=ud("libp2p:webrtc-peer:initator"),Kse=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xn(this,r),(n=t.call(this,So(So({},a),{},{logPrefix:"initiator"}))).handleDataChannelEvent({channel:n.peerConnection.createDataChannel(null!==(e=a.dataChannelLabel)&&void 0!==e?e:Tse(Xie(20),"hex").slice(0,7),a.dataChannelInit)}),n.handshake=new Hse({log:n.log,peerConnection:n.peerConnection,wrtc:n.wrtc,offerOptions:a.offerOptions}),n.handshake.addEventListener("signal",(function(e){n.dispatchEvent(new g9("signal",{detail:e.detail}))})),n}return Sn(r,[{key:"handleSignal",value:function(e){var t=this;this.handshake.handleSignal(e).catch((function(r){t.log("error handling signal %o %o",e,r)}))}}]),r}(Dse),Hse=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this,e)).options=e,n.status="idle",n.peerConnection.addEventListener("icecandidate",(function(e){if(null!=e.candidate){var t={type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}};Vse.trace("create candidate",t),n.dispatchEvent(new g9("signal",{detail:t})),n.dispatchEvent(new g9("ice-candidate"))}})),n}return Sn(r,[{key:"handleRenegotiate",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("negotiating"!==this.status){e.next=3;break}return this.log("already negotiating, queueing"),e.abrupt("return");case 3:return this.status="negotiating",e.next=6,this.peerConnection.createOffer(this.options.offerOptions);case 6:return r=e.sent,e.next=9,this.peerConnection.setLocalDescription(r);case 9:return e.next=11,qse(this,"ice-candidate");case 11:return e.next=13,Ise(1e3);case 13:Vse.trace("renegotiate",this.peerConnection.localDescription),this.dispatchEvent(new g9("signal",{detail:null!==(t=this.peerConnection.localDescription)&&void 0!==t?t:r}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAnswer",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vse.trace("handle answer",t),e.next=3,this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(t));case 3:this.status="idle";case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Nse),Wse=ud("libp2p:webrtc-star:socket");function Gse(e,t){var r=e.sink,n=e.source,a={remoteAddr:t.remoteAddr,sink:function(e){return Zh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null!=t.signal&&(e=See(e,t.signal)),n.prev=1,n.next=4,r(e);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),"aborted"!==n.t0.type&&Wse.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},source:null!=t.signal?See(n,t.signal):n,timeline:{open:Date.now()},close:function(){return Zh(Fh().mark((function t(){var r,n;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.closed){t.next=2;break}return t.abrupt("return");case 2:return r=Date.now(),n=setTimeout((function(){if(null!=a.remoteAddr){var t=a.remoteAddr.toOptions(),n=t.host,i=t.port;Wse("timeout closing socket to %s:%s after %dms, destroying it manually",n,i,Date.now()-r)}e.closed||e.close().catch((function(e){Wse.error("could not close socket",e)}))}),2e3),t.prev=4,t.next=7,e.close();case 7:return t.prev=7,clearTimeout(n),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[4,,7,10]])})))()}};return e.addEventListener("close",(function(){null==a.timeline.close&&(a.timeline.close=Date.now())}),{once:!0}),a}function Yse(e){var t,r=e.toString().split("/"),n=e.protos()[1].name,a=e.protos()[2].name,i=e.stringTuples()[1][1];if("tcp"!==n||"ws"!==a&&"wss"!==a)throw new Error("invalid multiaddr: ".concat(e.toString()));if(!Hx(t=e)||!t.protos().some((function(e){return e.resolvable})))return"http://".concat(r[2],":").concat(r[4]);if("ws"===a)return"http://".concat(r[2]).concat(null==i||"80"===i?"":":".concat(i));if("wss"===a)return"https://".concat(r[2]).concat(null==i||"443"===i?"":":".concat(i));throw new Error("invalid multiaddr: "+e.toString())}var Qse=ud("libp2p:webrtc-star:listener"),Jse={transports:["websocket"],path:"/socket.io-next/"},Xse=function(e){Cn(r,e);var t=Dn(r);function r(e,n,a,i,o){var s;xn(this,r),(s=t.call(this)).signallingAddr=n,s.socket=Jie(e,Jse),s.connections=[],s.channels=new Map,s.pendingSignals=new Map,s.upgrader=a,s.handler=i,s.channelOptions=o,s.handleWsHandshake=s.handleWsHandshake.bind(Pn(s));var u=!1;return s.socket.on("connect_error",(function(e){u&&"TransportError"===e.type||s.dispatchEvent(new g9("error",{detail:e}))})),s.socket.on("error",(function(e){s.dispatchEvent(new g9("error",{detail:e}))})),s.socket.on("ws-handshake",s.handleWsHandshake),s.socket.on("ws-peer",(function(e){s.dispatchEvent(new g9("peer",{detail:e}))})),s.socket.on("connect",(function(){s.socket.emit("ss-join",s.signallingAddr.toString()),u&&s.dispatchEvent(new g9("reconnect"))})),s.socket.once("connect",(function(){u=!0,s.dispatchEvent(new g9("listening"))})),s.socket.on("disconnect",(function(){s.dispatchEvent(new g9("disconnect"))})),s}return Sn(r,[{key:"_createChannel",value:function(e,t,r){var n=this,a=So({},this.channelOptions),i=new Lse(a),o=function(e){var t=e.detail;Qse.error("incoming connection errored",t)};return i.addEventListener("error",o),i.addEventListener("close",(function(){i.removeEventListener("error",o)}),{once:!0}),i.addEventListener("signal",(function(a){var i=a.detail;n.socket.emit("ss-handshake",{intentId:e,srcMultiaddr:t,dstMultiaddr:r,answer:!0,signal:i})})),i.addEventListener("ready",(function(){var t=Gse(i,{remoteAddr:n.signallingAddr});Qse("new inbound connection %s",t.remoteAddr);try{n.upgrader.upgradeInbound(t).then((function(r){Qse("inbound connection %s upgraded",t.remoteAddr),n.connections.push(t);i.addEventListener("close",(function(){n.connections=n.connections.filter((function(e){return e!==t})),n.channels.delete(e),n.pendingSignals.delete(e)}),{once:!0}),n.dispatchEvent(new g9("connection",{detail:r})),n.handler(r)})).catch((function(e){Qse.error("inbound connection failed to upgrade",e),t.close().catch((function(e){Qse.error("inbound connection failed to close after failing to upgrade",e)}))}))}catch(sY){Qse.error("inbound connection failed to upgrade",sY),t.close().catch((function(e){Qse.error("inbound connection failed to close after failing to upgrade",e)}))}}),{once:!0}),i}},{key:"handleWsHandshake",value:function(e){if(Qse('incoming handshake. signal type "%s" is answer %s',e.signal.type,e.answer),!0!==e.answer&&null==e.err&&null!=e.intentId){var t=e.intentId,r=this.pendingSignals.get(t);null==r&&(r=[],this.pendingSignals.set(t,r)),r.push(e);var n=this.channels.get(t);if(null==n){if("offer"!==e.signal.type)return void Qse("handshake is not an offer and channel does not exist, buffering until we receive an offer");Qse("creating new channel to handle offer handshake"),n=this._createChannel(e.intentId,e.srcMultiaddr,e.dstMultiaddr),this.channels.set(t,n)}else Qse("channel already exists, using it to handle handshake");for(;r.length>0;){var a=r.shift();null!=(null===a||void 0===a?void 0:a.signal)&&n.handleSignal(a.signal)}}}},{key:"close",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),e.next=5,Promise.all([].concat((0,kn.Z)(this.connections.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,kn.Z)(Array.from(this.channels.values()).map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))));case 5:this.dispatchEvent(new g9("close"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(y9),$se=function(e){Cn(r,e);var t=Dn(r);function r(e,n,a,i,o){var s;return xn(this,r),(s=t.call(this)).upgrader=e,s.handler=n,s.peerId=a,s.transport=i,s.options=o,s}return Sn(r,[{key:"listen",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.listeningAddr){e.next=2;break}throw cd(new Error("listener already in use"),"ERR_ALREADY_LISTENING");case 2:return r=Fee(),this.listeningAddr=t,n=t.protoCodes().includes(421)?t:t.encapsulate("/p2p/".concat(this.peerId.toString())),a=this.signallingUrl=Yse(t),Qse("connecting to signalling server on: %s",this.signallingUrl),(i=new Xse(this.signallingUrl,n,this.upgrader,this.handler,this.options.channelOptions)).addEventListener("error",(function(e){var t=e.detail;Qse("error connecting to signalling server %o",t),i.close().catch((function(e){Qse.error("error closing server after error",e)})),r.reject(t)})),i.addEventListener("listening",(function(){Qse("connected to signalling server"),o.dispatchEvent(new g9("listening")),r.resolve()})),i.addEventListener("peer",(function(e){o.transport.peerDiscovered(e.detail)})),i.addEventListener("connection",(function(e){var r=e.detail;if(null==r.remoteAddr)try{r.remoteAddr=t.decapsulateCode(421).encapsulate("/p2p/".concat(r.remotePeer.toString()))}catch(sY){Qse.error("could not determine remote address",sY)}o.dispatchEvent(new g9("connection",{detail:r}))})),i.addEventListener("disconnect",(function(){o.transport.sigServers.delete(a)})),i.addEventListener("reconnect",(function(){o.transport.sigServers.set(a,i)})),this.transport.sigServers.set(this.signallingUrl,i),e.next=17,r.promise;case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.signallingUrl){e.next=6;break}if(null==(t=this.transport.sigServers.get(this.signallingUrl))){e.next=6;break}return e.next=5,t.close();case 5:this.transport.sigServers.delete(this.signallingUrl);case 6:this.dispatchEvent(new g9("close")),this.listeningAddr=void 0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAddrs",value:function(){return null!=this.listeningAddr?[this.listeningAddr]:[]}}]),r}(y9);var eue=Symbol.for("@libp2p/transport");Symbol.for("@libp2p/peer-discovery");var tue=Symbol.for("@libp2p/peer-discovery");var rue,nue,aue="RTCPeerConnection"in globalThis,iue=ud("libp2p:webrtc-star"),oue=function(){},sue=function(e,t){Cn(n,e);var r=Dn(n);function n(){var e;return xn(this,n),(e=r.apply(this,arguments)).started=!1,e}return Sn(n,[{key:tue,get:function(){return!0}},{key:t,get:function(){return"@libp2p/webrtc-star-discovery"}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchEvent",value:function(e){return!!this.isStarted()&&$b(Tn(n.prototype),"dispatchEvent",this).call(this,e)}}]),n}(y9,Symbol.toStringTag),uue=function(e){function t(e){xn(this,t),this.components=new aee,null!=(null===e||void 0===e?void 0:e.wrtc)&&(this.wrtc=e.wrtc),this.sigServers=new Map,this.discovery=new sue,this.peerDiscovered=this.peerDiscovered.bind(this)}return Sn(t,[{key:eue,get:function(){return!0}},{key:e,get:function(){return"@libp2p/webrtc-star"}},{key:"init",value:function(e){this.components=e}},{key:"dial",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._connect(t,r);case 2:return n=e.sent,a=Gse(n,{remoteAddr:t,signal:r.signal}),iue("new outbound connection %s",a.remoteAddr),e.next=7,r.upgrader.upgradeOutbound(a);case 7:return i=e.sent,iue("outbound connection %s upgraded",a.remoteAddr),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_connect",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(null===(n=r.signal)||void 0===n?void 0:n.aborted)){e.next=2;break}throw new _ee;case 2:return i=So({},null!==(a=r.channelOptions)&&void 0!==a?a:{}),null!=this.wrtc&&(i.wrtc=this.wrtc),o=t.toOptions(),s=uN(Xie(36),"hex"),e.next=8,new Promise((function(e,n){var a,c=u.sigServers.get(Yse(t));if(null==(null===c||void 0===c?void 0:c.socket))return n(cd(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));var l=!1;iue("dialing %s:%s",o.host,o.port);var f=new Kse(i),p=function(e){var t=e.detail;if(!l){var r="connection error ".concat(o.host,":").concat(o.port,": ").concat(t.message);iue.error(r),v(t)}},h=function(){l=!0,iue("connection opened %s:%s",o.host,o.port),v()},d=function(){iue.error("connection aborted %s:%s",o.host,o.port),f.close().finally((function(){v(new _ee)}))},v=function(t){var a;f.removeEventListener("ready",h),null===(a=r.signal)||void 0===a||a.removeEventListener("abort",d),null==t?e(f):n(t)};f.addEventListener("ready",h,{once:!0}),f.addEventListener("close",(function(){f.removeEventListener("error",p)})),null===(a=r.signal)||void 0===a||a.addEventListener("abort",d),f.addEventListener("signal",(function(e){var r=e.detail;c.socket.emit("ss-handshake",{intentId:s,srcMultiaddr:c.signallingAddr.toString(),dstMultiaddr:t.toString(),signal:r})})),c.socket.on("ws-handshake",(function(e){e.intentId===s&&null!=e.err&&f.close().finally((function(){n(cd(new Error(e.err),"ERR_SIGNALLING_FAILED"))})),e.intentId!==s||null==e.answer||f.closed||f.handleSignal(e.signal)}))}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){var t,r;if(!aue&&null==this.wrtc)throw cd(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return e.channelOptions=null!==(t=e.channelOptions)&&void 0!==t?t:{},null!=this.wrtc&&(e.channelOptions.wrtc=this.wrtc),function(e,t,r,n,a){return new $se(e,t,r,n,a)}(e.upgrader,null!==(r=e.handler)&&void 0!==r?r:oue,this.components.getPeerId(),this,e)}},{key:"filter",value:function(e){return(e=Array.isArray(e)?e:[e]).filter((function(e){return!e.protoCodes().includes(290)&&GS.matches(e)}))}},{key:"peerDiscovered",value:function(e){iue("peer discovered: %s",e),e=function(e){var t="/libp2p-webrtc-star";if(e.startsWith(t)){var r=Gx(e=e.substring(19,e.length)),n=r.stringTuples().filter((function(e){return 421===e[0]}))[0];if(null==n[1])throw new Error("invalid multiaddr: "+e);e=(r=(r=(r=r.decapsulate("p2p")).encapsulate("/p2p-webrtc-star")).encapsulate("/p2p/".concat(n[1]))).toString()}return e}(e);var t=Gx(e),r=t.getPeerId();if(null!=r){var n=KD(r);this.discovery.dispatchEvent(new g9("peer",{detail:{id:n,multiaddrs:[t],protocols:[]}}))}}}]),t}(Symbol.toStringTag);function cue(e,t){return lue.apply(this,arguments)}function lue(){return lue=Kh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(JD(xm(dz(t,function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.addressBook.add(t.id,t.multiaddrs);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))),"t0",1);case 1:case"end":return e.stop()}}),e)}))),lue.apply(this,arguments)}function fue(e){var t=new Set;return vz(e,(function(e){return!t.has(e.id.toString())&&(t.add(e.id.toString()),!0)}))}function pue(e){return hue.apply(this,arguments)}function hue(){return hue=Kh((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Fh().mark((function r(){var n,a,i,o,s,u,c;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0,a=!1,i=!1,r.prev=3,s=xm(e);case 5:return r.next=7,km(s.next());case 7:if(!(a=!(u=r.sent).done)){r.next=15;break}return c=u.value,n++,r.next=12,c;case 12:a=!1,r.next=5;break;case 15:r.next=21;break;case 17:r.prev=17,r.t0=r.catch(3),i=!0,o=r.t0;case 21:if(r.prev=21,r.prev=22,!a||null==s.return){r.next=26;break}return r.next=26,km(s.return());case 26:if(r.prev=26,!i){r.next=29;break}throw o;case 29:return r.finish(26);case 30:return r.finish(21);case 31:if(!(n<t)){r.next=33;break}throw cd(new Error("not found"),"NOT_FOUND");case 33:case"end":return r.stop()}}),r,null,[[3,17,21,31],[22,,26,30]])}))()})),hue.apply(this,arguments)}!function(e){e.NOT_STARTED_YET="The libp2p node is not started yet",e.DHT_DISABLED="DHT is not available",e.PUBSUB_DISABLED="PubSub is not available",e.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",e.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",e.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",e.NOT_FOUND="Not found"}(rue||(rue={})),function(e){e.DHT_DISABLED="ERR_DHT_DISABLED",e.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",e.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",e.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",e.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",e.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",e.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",e.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",e.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",e.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",e.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",e.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",e.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",e.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",e.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",e.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",e.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",e.ERR_DIALED_SELF="ERR_DIALED_SELF",e.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",e.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",e.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",e.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",e.ERR_INVALID_KEY="ERR_INVALID_KEY",e.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",e.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",e.ERR_INVALID_PEER="ERR_INVALID_PEER",e.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",e.ERR_NOT_FOUND="ERR_NOT_FOUND",e.ERR_TIMEOUT="ERR_TIMEOUT",e.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",e.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",e.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",e.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",e.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",e.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",e.ERR_FIND_SELF="ERR_FIND_SELF",e.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",e.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",e.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",e.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",e.ERR_INVALID_CMS="ERR_INVALID_CMS",e.ERR_MISSING_KEYS="ERR_MISSING_KEYS",e.ERR_NO_KEY="ERR_NO_KEY",e.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",e.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",e.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",e.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",e.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",e.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",e.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",e.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",e.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",e.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",e.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",e.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",e.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",e.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",e.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",e.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",e.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",e.ERR_INVALID_RECORD="ERR_INVALID_RECORD",e.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",e.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",e.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",e.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS"}(nue||(nue={}));var due=__webpack_require__(8928),vue=__webpack_require__(7465),yue=ud("libp2p:peer-routing"),bue=function(){function e(t,r){var n;xn(this,e),this.components=t,this.routers=r.routers,this.refreshManagerInit=null!==(n=r.refreshManager)&&void 0!==n?n:{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started&&0!==this.routers.length&&null==this.timeoutId&&!1!==this.refreshManagerInit.enabled){e.next=2;break}return e.abrupt("return");case 2:this.timeoutId=(0,due.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_findClosestPeersTask",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.abortController){e.next=2;break}return e.abrupt("return");case 2:e.prev=2,this.abortController=new wm.TimeoutController(null!==(t=this.refreshManagerInit.timeout)&&void 0!==t?t:1e4);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,this.abortController.signal)}catch(n){}return e.next=7,OF(this.getClosestPeers(this.components.getPeerId().toBytes(),{signal:this.abortController.signal}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),yue.error(e.t0);case 12:return e.prev=12,null===(r=this.abortController)||void 0===r||r.clear(),this.abortController=void 0,e.finish(12);case 16:case"end":return e.stop()}}),e,this,[[2,9,12,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,due.clearDelayedInterval)(this.timeoutId),null===(t=this.abortController)||void 0===t||t.abort(),this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findPeer",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.routers.length){e.next=2;break}throw cd(new Error("No peer routers available"),nue.ERR_NO_ROUTERS_AVAILABLE);case 2:if(t.toString()!==this.components.getPeerId().toString()){e.next=4;break}throw cd(new Error("Should not try to find self"),nue.ERR_FIND_SELF);case 4:return e.next=6,yF(w6.apply(void 0,(0,kn.Z)(this.routers.map((function(e){return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,km(e.findPeer(t,r));case 3:return n.next=5,n.sent;case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),yue.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()})))),(function(e){return vz(e,Boolean)}),(function(e){return cue(e,a.components.getPeerStore())}),function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$J(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:if(null==(n=e.sent)){e.next=9;break}return e.abrupt("return",n);case 9:throw cd(new Error(rue.NOT_FOUND),nue.ERR_NOT_FOUND);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e,t){var r=this;return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==r.routers.length){n.next=2;break}throw cd(new Error("No peer routers available"),nue.ERR_NO_ROUTERS_AVAILABLE);case 2:return n.delegateYield(JD(xm(yF(w6.apply(void 0,(0,kn.Z)(r.routers.map((function(r){return r.getClosestPeers(e,t)})))),(function(e){return cue(e,r.components.getPeerStore())}),(function(e){return fue(e)}),(function(e){return pue(e)})))),"t0",3);case 3:case"end":return n.stop()}}),n)})))()}}]),e}(),gue=function(){function e(t,r){var n;xn(this,e),this.routers=null!==(n=r.routers)&&void 0!==n?n:[],this.started=!1,this.components=t}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==t.routers.length){n.next=2;break}throw cd(new Error("No content this.routers available"),nue.ERR_NO_ROUTERS_AVAILABLE);case 2:return n.delegateYield(JD(xm(yF(w6.apply(void 0,(0,kn.Z)(t.routers.map((function(t){return t.findProviders(e,r)})))),(function(e){return cue(e,t.components.getPeerStore())}),(function(e){return fue(e)}),(function(e){return pue(e)})))),"t0",3);case 3:case"end":return n.stop()}}),n)})))()}},{key:"provide",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},0!==this.routers.length){e.next=3;break}throw cd(new Error("No content routers available"),nue.ERR_NO_ROUTERS_AVAILABLE);case 3:return e.next=5,Promise.all(this.routers.map(function(){var e=Zh(Fh().mark((function e(n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.provide(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}throw cd(new Error(rue.NOT_STARTED_YET),nue.DHT_NOT_STARTED);case 2:if(null==(a=this.components.getDHT())){e.next=6;break}return e.next=6,OF(a.put(t,r,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}throw cd(new Error(rue.NOT_STARTED_YET),nue.DHT_NOT_STARTED);case 2:if(null==(n=this.components.getDHT())){e.next=33;break}a=!1,i=!1,e.prev=6,s=xm(n.get(t,r));case 8:return e.next=10,s.next();case 10:if(!(a=!(u=e.sent).done)){e.next=17;break}if("VALUE"!==(c=u.value).name){e.next=14;break}return e.abrupt("return",c.value);case 14:a=!1,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),i=!0,o=e.t0;case 23:if(e.prev=23,e.prev=24,!a||null==s.return){e.next=28;break}return e.next=28,s.return();case 28:if(e.prev=28,!i){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(23);case 33:throw cd(new Error(rue.NOT_FOUND),nue.ERR_NOT_FOUND);case 34:case"end":return e.stop()}}),e,this,[[6,19,23,33],[24,,28,32]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e,t,r){var n=this;return Kh(Fh().mark((function a(){var i,o,s,u,c,l,f,p;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.isStarted()){a.next=2;break}throw cd(new Error(rue.NOT_STARTED_YET),nue.DHT_NOT_STARTED);case 2:if(null!=t&&0!==t){a.next=4;break}return a.abrupt("return");case 4:if(i=0,null==(o=n.components.getDHT())){a.next=40;break}s=!1,u=!1,a.prev=9,l=xm(o.get(e,r));case 11:return a.next=13,km(l.next());case 13:if(!(s=!(f=a.sent).done)){a.next=24;break}if("VALUE"!==(p=f.value).name){a.next=21;break}return a.next=18,{from:p.from,val:p.value};case 18:if(++i!==t){a.next=21;break}return a.abrupt("break",24);case 21:s=!1,a.next=11;break;case 24:a.next=30;break;case 26:a.prev=26,a.t0=a.catch(9),u=!0,c=a.t0;case 30:if(a.prev=30,a.prev=31,!s||null==l.return){a.next=35;break}return a.next=35,km(l.return());case 35:if(a.prev=35,!u){a.next=38;break}throw c;case 38:return a.finish(35);case 39:return a.finish(30);case 40:if(0!==i){a.next=42;break}throw cd(new Error(rue.NOT_FOUND),nue.ERR_NOT_FOUND);case 42:case"end":return a.stop()}}),a,null,[[9,26,30,40],[31,,35,39]])})))()}}]),e}();function mue(e){return OD(e)?{id:e,multiaddrs:[],protocols:[]}:("string"===typeof e&&(e=Gx(e)),Hx(e)&&(t=e,e=function(e){var t=e.getPeerId();if(null==t)throw cd(new Error("".concat(e.toString()," does not have a valid peer type")),nue.ERR_INVALID_MULTIADDR);try{return KD(t)}catch(sY){throw cd(new Error("".concat(e.toString()," is not a valid peer type")),nue.ERR_INVALID_MULTIADDR)}}(e)),{id:e,multiaddrs:null!=t?[t]:[],protocols:[]});var t}var wue=function(e){return e},kue=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a,i;xn(this,r),i=t.call(this);var o=n.listen,s=void 0===o?[]:o,u=n.announce,c=void 0===u?[]:u;return i.components=e,i.listen=new Set(s.map((function(e){return e.toString()}))),i.announce=new Set(c.map((function(e){return e.toString()}))),i.observed=new Set,i.announceFilter=null!==(a=n.announceFilter)&&void 0!==a?a:wue,i}return Sn(r,[{key:"getListenAddrs",value:function(){return Array.from(this.listen).map((function(e){return Gx(e)}))}},{key:"getAnnounceAddrs",value:function(){return Array.from(this.announce).map((function(e){return Gx(e)}))}},{key:"getObservedAddrs",value:function(){return Array.from(this.observed).map((function(e){return Gx(e)}))}},{key:"addObservedAddr",value:function(e){var t=Gx(e),r=t.getPeerId();null!=r&&(KD(r).equals(this.components.getPeerId())&&(t=t.decapsulate(Gx("/p2p/".concat(this.components.getPeerId().toString())))));var n=t.toString();this.observed.has(n)||(this.observed.add(n),this.dispatchEvent(new g9("change:addresses")))}},{key:"getAddresses",value:function(){var e=this,t=this.getAnnounceAddrs().map((function(e){return e.toString()}));0===t.length&&(t=this.components.getTransportManager().getAddrs().map((function(e){return e.toString()}))),t=t.concat(this.getObservedAddrs().map((function(e){return e.toString()})));var r=new Set(t);return this.announceFilter(Array.from(r).map((function(e){return Gx(e)}))).map((function(t){return t.getPeerId()===e.components.getPeerId().toString()?t:t.encapsulate("/p2p/".concat(e.components.getPeerId().toString()))}))}}]),r}(y9),xue=ud("libp2p:connection-manager:latency-monitor:visibility-change-emitter"),_ue=function(e){Cn(r,e);var t=Dn(r);function r(){var e;return xn(this,r),(e=t.call(this)).hidden="hidden",e.visibilityChange="visibilityChange",null!=globalThis.document&&(e._initializeVisibilityVarNames(),e._addVisibilityChangeListener()),e}return Sn(r,[{key:"_initializeVisibilityVarNames",value:function(){var e="hidden",t="visibilitychange";"undefined"!==typeof globalThis.document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof globalThis.document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):"undefined"!==typeof globalThis.document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof globalThis.document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this.hidden=e,this.visibilityChange=t}},{key:"_addVisibilityChangeListener",value:function(){"undefined"===typeof globalThis.document.addEventListener||"undefined"===typeof document[this.hidden]?xue("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}},{key:"isVisible",value:function(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}},{key:"_handleVisibilityChange",value:function(){var e=!1===globalThis.document[this.hidden];xue(e?"Page Visible":"Page Hidden"),this.dispatchEvent(new g9("visibilityChange",{detail:e}))}}]),r}(y9),Eue=ud("libp2p:connection-manager:latency-monitor"),Sue=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(this,r),a=t.call(this);var o=i.latencyCheckIntervalMs,s=i.dataEmitIntervalMs,u=i.asyncTestFn,c=i.latencyRandomPercentage;return a.latencyCheckIntervalMs=null!==o&&void 0!==o?o:500,a.latencyRandomPercentage=null!==c&&void 0!==c?c:10,a.latencyCheckMultiply=a.latencyRandomPercentage/100*2*a.latencyCheckIntervalMs,a.latencyCheckSubtract=a.latencyCheckMultiply/2,a.dataEmitIntervalMs=null===s||0===s?void 0:null!==s&&void 0!==s?s:5e3,Eue("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",a.latencyCheckIntervalMs,a.dataEmitIntervalMs),null!=a.dataEmitIntervalMs?Eue("Expecting ~%s events per summary",a.latencyCheckIntervalMs/a.dataEmitIntervalMs):Eue("Not emitting summaries"),a.asyncTestFn=u,null!=(null===(e=globalThis.process)||void 0===e?void 0:e.hrtime)?(Eue("Using process.hrtime for timing"),a.now=globalThis.process.hrtime,a.getDeltaMS=function(e){var t=a.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!==typeof window&&null!=(null===(n=window.performance)||void 0===n?void 0:n.now)?(Eue("Using performance.now for timing"),a.now=window.performance.now.bind(window.performance),a.getDeltaMS=function(e){return Math.round(a.now()-e)}):(Eue("Using Date.now for timing"),a.now=Date.now,a.getDeltaMS=function(e){return a.now()-e}),a.latencyData=a.initLatencyData(),a}return Sn(r,[{key:"start",value:function(){var e,t=this;"undefined"!==typeof globalThis.window&&(this.visibilityChangeEmitter=new _ue,this.visibilityChangeEmitter.addEventListener("visibilityChange",(function(e){e.detail?t._startTimers():(t._emitSummary(),t._stopTimers())}))),!0===(null===(e=this.visibilityChangeEmitter)||void 0===e?void 0:e.isVisible())&&this._startTimers()}},{key:"stop",value:function(){this._stopTimers()}},{key:"_startTimers",value:function(){var e=this;null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((function(){return e._emitSummary()}),this.dataEmitIntervalMs),"function"===typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}},{key:"_stopTimers",value:function(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}},{key:"_emitSummary",value:function(){var e=this.getSummary();e.events>0&&this.dispatchEvent(new g9("data",{detail:e}))}},{key:"getSummary",value:function(){var e={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),Eue.trace("Summary: %O",e),e}},{key:"checkLatency",value:function(){var e=this,t=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,r={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+t),startTime:this.now()},n=function(){if(null!=e.checkLatencyID){var t=e.getDeltaMS(r.startTime)-r.deltaOffset;e.checkLatency(),e.latencyData.events++,e.latencyData.minMs=Math.min(e.latencyData.minMs,t),e.latencyData.maxMs=Math.max(e.latencyData.maxMs,t),e.latencyData.totalMs+=t,Eue.trace("MS: %s Data: %O",t,e.latencyData)}};Eue.trace("localData: %O",r),this.checkLatencyID=setTimeout((function(){null!=e.asyncTestFn?(r.deltaOffset=0,r.startTime=e.now(),e.asyncTestFn(n)):(r.deltaOffset-=1,n())}),r.deltaOffset),"function"===typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}},{key:"initLatencyData",value:function(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}]),r}(y9);var Aue=__webpack_require__(1779),Cue="OPEN",Tue="CLOSING",Rue="CLOSED";function Iue(e,t){var r,n=(r={},(0,oi.Z)(r,Symbol.iterator,(function(){return n})),(0,oi.Z)(r,"next",(function(){var r=e.next(),n=r.value;return!0===r.done||null==n?{done:!0,value:void 0}:{done:!1,value:t(n)}})),r);return n}var Pue,Due=function(e){function t(e){if(xn(this,t),this.map=new Map,null!=e){var r,n=(0,zn.Z)(e.entries());try{for(n.s();!(r=n.n()).done;){var a=(0,wn.Z)(r.value,2),i=a[0],o=a[1];this.map.set(i.toString(),o)}}catch(sY){n.e(sY)}finally{n.f()}}}return Sn(t,[{key:Symbol.iterator,value:function(){return this.entries()}},{key:"clear",value:function(){this.map.clear()}},{key:"delete",value:function(e){this.map.delete(e.toString())}},{key:"entries",value:function(){return Iue(this.map.entries(),(function(e){return[KD(e[0]),e[1]]}))}},{key:"forEach",value:function(e){var t=this;this.map.forEach((function(r,n){e(r,KD(n),t)}))}},{key:"get",value:function(e){return this.map.get(e.toString())}},{key:"has",value:function(e){return this.map.has(e.toString())}},{key:"set",value:function(e,t){this.map.set(e.toString(),t)}},{key:"keys",value:function(){return Iue(this.map.keys(),(function(e){return KD(e)}))}},{key:"values",value:function(){return this.map.values()}},{key:"size",get:function(){return this.map.size}}]),t}(),Nue=function(e){function t(e){if(xn(this,t),this.set=new Set,null!=e){var r,n=(0,zn.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.set.add(a.toString())}}catch(sY){n.e(sY)}finally{n.f()}}}return Sn(t,[{key:"size",get:function(){return this.set.size}},{key:Symbol.iterator,value:function(){return this.values()}},{key:"add",value:function(e){this.set.add(e.toString())}},{key:"clear",value:function(){this.set.clear()}},{key:"delete",value:function(e){this.set.delete(e.toString())}},{key:"entries",value:function(){return Iue(this.set.entries(),(function(e){var t=KD(e[0]);return[t,t]}))}},{key:"forEach",value:function(e){var t=this;this.set.forEach((function(r){var n=KD(r);e(n,n,t)}))}},{key:"has",value:function(e){return this.set.has(e.toString())}},{key:"values",value:function(){return Iue(this.set.values(),(function(e){return KD(e)}))}},{key:"intersection",value:function(e){var r,n=new t,a=(0,zn.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.has(i)&&n.add(i)}}catch(sY){a.e(sY)}finally{a.f()}return n}},{key:"difference",value:function(e){var r,n=new t,a=(0,zn.Z)(this);try{for(a.s();!(r=a.n()).done;){var i=r.value;e.has(i)||n.add(i)}}catch(sY){a.e(sY)}finally{a.f()}return n}},{key:"union",value:function(e){var r,n=new t,a=(0,zn.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.add(i)}}catch(sY){a.e(sY)}finally{a.f()}var o,s=(0,zn.Z)(this);try{for(s.s();!(o=s.n()).done;){var u=o.value;n.add(u)}}catch(sY){s.e(sY)}finally{s.f()}return n}}]),t}(),Oue=ud("libp2p:connection-manager"),Lue={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4},Bue="libp2p",Mue="connection-manager",Uue=function(e){Cn(r,e);var t=Dn(r);function r(e){var n,a,i;if(xn(this,r),(i=t.call(this)).components=new aee,i.opts=Hh.call({ignoreUndefined:!0},Lue,e),i.opts.maxConnections<i.opts.minConnections)throw cd(new Error("Connection Manager maxConnections must be greater than minConnections"),nue.ERR_INVALID_PARAMETERS);Oue("options: %o",i.opts),i.connections=new Map,i.started=!1,i._checkMetrics=i._checkMetrics.bind(Pn(i)),i.latencyMonitor=new Sue({latencyCheckIntervalMs:e.pollInterval,dataEmitIntervalMs:e.pollInterval});try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,Pn(i))}catch(o){}return i.onConnect=i.onConnect.bind(Pn(i)),i.onDisconnect=i.onDisconnect.bind(Pn(i)),i.startupReconnectTimeout=null!==(n=e.startupReconnectTimeout)&&void 0!==n?n:6e4,i.dialTimeout=null!==(a=e.dialTimeout)&&void 0!==a?a:3e4,i}return Sn(r,[{key:"init",value:function(e){var t,r,n,a=this;this.components=e,null===(t=this.components.getMetrics())||void 0===t||t.updateComponentMetric({system:Bue,component:Mue,metric:"connections",label:"direction",value:function(){var e,t={inbound:0,outbound:0},r=(0,zn.Z)(a.connections.values());try{for(r.s();!(e=r.n()).done;){var n,i=e.value,o=(0,zn.Z)(i);try{for(o.s();!(n=o.n()).done;){"inbound"===n.value.stat.direction?t.inbound++:t.outbound++}}catch(sY){o.e(sY)}finally{o.f()}}}catch(sY){r.e(sY)}finally{r.f()}return t}}),null===(r=this.components.getMetrics())||void 0===r||r.updateComponentMetric({system:Bue,component:Mue,metric:"protocol-streams-total",label:"protocol",value:function(){var e,t={},r=(0,zn.Z)(a.connections.values());try{for(r.s();!(e=r.n()).done;){var n,i=e.value,o=(0,zn.Z)(i);try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=(0,zn.Z)(u.streams);try{for(c.s();!(s=c.n()).done;){var l,f,p=s.value,h="".concat(p.stat.direction," ").concat(null!==(l=p.stat.protocol)&&void 0!==l?l:"unnegotiated");t[h]=(null!==(f=t[h])&&void 0!==f?f:0)+1}}catch(sY){c.e(sY)}finally{c.f()}}}catch(sY){o.e(sY)}finally{o.f()}}}catch(sY){r.e(sY)}finally{r.f()}return t}}),null===(n=this.components.getMetrics())||void 0===n||n.updateComponentMetric({system:Bue,component:Mue,metric:"protocol-streams-per-connection-90th-percentile",label:"protocol",value:function(){var e,t={},r=(0,zn.Z)(a.connections.values());try{for(r.s();!(e=r.n()).done;){var n,i=e.value,o=(0,zn.Z)(i);try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c={},l=(0,zn.Z)(u.streams);try{for(l.s();!(s=l.n()).done;){var f,p,h=s.value,d="".concat(h.stat.direction," ").concat(null!==(f=h.stat.protocol)&&void 0!==f?f:"unnegotiated");c[d]=(null!==(p=c[d])&&void 0!==p?p:0)+1}}catch(sY){l.e(sY)}finally{l.f()}for(var v=0,y=Object.entries(c);v<y.length;v++){var b,g=(0,wn.Z)(y[v],2),m=g[0],w=g[1];t[m]=null!==(b=t[m])&&void 0!==b?b:[],t[m].push(w)}}}catch(sY){o.e(sY)}finally{o.f()}}}catch(sY){r.e(sY)}finally{r.f()}for(var k={},x=0,_=Object.entries(t);x<_.length;x++){var E=(0,wn.Z)(_[x],2),S=E[0],A=E[1];A=A.sort((function(e,t){return e-t}));var C=Math.floor(.9*A.length);k[S]=A[C]}return k}})}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.components.getMetrics()&&(this.timer=null!==(t=this.timer)&&void 0!==t?t:Aue(this._checkMetrics,this.opts.pollInterval)),this.latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this.latencyMonitor.addEventListener("data",this._onLatencyMeasure),this.started=!0,Oue("started");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=Zh(Fh().mark((function e(){var t=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.components.getUpgrader().addEventListener("connection",this.onConnect),this.components.getUpgrader().addEventListener("connectionEnd",this.onDisconnect),Promise.resolve().then(Zh(Fh().mark((function e(){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.t0=zn.Z,e.next=4,t.components.getPeerStore().all();case 4:e.t1=e.sent,a=(0,e.t0)(e.t1),e.prev=6,a.s();case 8:if((i=a.n()).done){e.next=17;break}return o=i.value,e.next=12,t.components.getPeerStore().getTags(o.id);case 12:s=e.sent,s.filter((function(e){return"keep-alive"===e.name})).length>0&&n.push(o.id);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(6),a.e(e.t2);case 22:return e.prev=22,a.f(),e.finish(22);case 25:null===(r=t.connectOnStartupController)||void 0===r||r.clear(),t.connectOnStartupController=new wm.TimeoutController(t.startupReconnectTimeout);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,t.connectOnStartupController.signal)}catch(u){}return e.next=30,Promise.all(n.map(function(){var e=Zh(Fh().mark((function e(r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.openConnection(r,{signal:null===(n=t.connectOnStartupController)||void 0===n?void 0:n.signal}).catch((function(e){Oue.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 30:case"end":return e.stop()}}),e,null,[[6,19,22,25]])})))).catch((function(e){Oue.error(e)})).finally((function(){var e;null===(e=t.connectOnStartupController)||void 0===e||e.clear()}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeStop",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.connectOnStartupController)||void 0===t||t.abort(),this.components.getUpgrader().removeEventListener("connection",this.onConnect),this.components.getUpgrader().removeEventListener("connectionEnd",this.onDisconnect);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.timer)||void 0===t||t.clear(),this.latencyMonitor.removeEventListener("data",this._onLatencyMeasure),this.latencyMonitor.stop(),this.started=!1,e.next=6,this._close();case 6:Oue("stopped");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_close",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=(0,zn.Z)(this.connections.values()),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=24;break}a=n.value,i=(0,zn.Z)(a),e.prev=7,s=Fh().mark((function e(){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.value,t.push(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.close();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Oue.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))());case 2:case"end":return e.stop()}}),e)})),i.s();case 10:if((o=i.n()).done){e.next=14;break}return e.delegateYield(s(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(2),r.e(e.t2);case 29:return e.prev=29,r.f(),e.finish(29);case 32:return Oue("closing %d connections",t.length),e.next=35,Promise.all(t);case 35:this.connections.clear();case 36:case"end":return e.stop()}}),e,this,[[2,26,29,32],[7,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"_checkMetrics",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.components.getMetrics())){e.next=17;break}return e.prev=2,r=t.getGlobal().getMovingAverages(),n=r.dataReceived[this.opts.movingAverageInterval].movingAverage,e.next=7,this._checkMaxLimit("maxReceivedData",n);case 7:return a=r.dataSent[this.opts.movingAverageInterval].movingAverage,e.next=10,this._checkMaxLimit("maxSentData",a);case 10:return i=n+a,e.next=13,this._checkMaxLimit("maxData",i);case 13:Oue.trace("metrics update",i);case 14:return e.prev=14,this.timer=Aue(this._checkMetrics,this.opts.pollInterval),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onConnect",value:function(e){this._onConnect(e).catch((function(e){Oue.error(e)}))}},{key:"_onConnect",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.detail,this.started){e.next=5;break}return e.next=4,r.close();case 4:return e.abrupt("return");case 5:if(n=r.remotePeer,a=n.toString(),null!=(i=this.connections.get(a))?i.push(r):this.connections.set(a,[r]),null==n.publicKey){e.next=12;break}return e.next=12,this.components.getPeerStore().keyBook.set(n,n.publicKey);case 12:return o=this.getConnections().length,s=o-this.opts.maxConnections,e.next=16,this._checkMaxLimit("maxConnections",o,s);case 16:this.dispatchEvent(new g9("peer:connect",{detail:r}));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDisconnect",value:function(e){var t=e.detail;if(this.started){var r=t.remotePeer.toString(),n=this.connections.get(r);if(null!=n&&n.length>1)n=n.filter((function(e){return e.id!==t.id})),this.connections.set(r,n);else if(null!=n){var a;this.connections.delete(r),this.dispatchEvent(new g9("peer:disconnect",{detail:t})),null===(a=this.components.getMetrics())||void 0===a||a.onPeerDisconnected(t.remotePeer)}}}},{key:"getConnections",value:function(e){var t;if(null!=e)return null!==(t=this.connections.get(e.toString()))&&void 0!==t?t:[];var r,n=[],a=(0,zn.Z)(this.connections.values());try{for(a.s();!(r=a.n()).done;){var i=r.value;n=n.concat(i)}}catch(sY){a.e(sY)}finally{a.f()}return n}},{key:"openConnection",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},Oue("dial to %p",t),!((n=this.getConnections(t)).length>0)){e.next=6;break}return Oue("had an existing connection to %p",t),e.abrupt("return",n[0]);case 6:if(null==(null===r||void 0===r?void 0:r.signal)){a=new wm.TimeoutController(this.dialTimeout),r.signal=a.signal;try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,a.signal)}catch(f){}}return e.prev=7,e.next=10,this.components.getDialer().dial(t,r);case 10:i=e.sent,null==(o=this.connections.get(t.toString()))&&(o=[],this.connections.set(t.toString(),o)),s=!1,u=(0,zn.Z)(o);try{for(u.s();!(c=u.n()).done;)c.value.id===i.id&&(s=!0)}catch(sY){u.e(sY)}finally{u.f()}return s||o.push(i),e.abrupt("return",i);case 18:return e.prev=18,null!=a&&a.clear(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"closeConnections",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==(r=this.connections.get(t.toString()))&&void 0!==r?r:[],e.next=3,Promise.all(n.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(e){if(!OD(e))throw cd(new Error("peerId must be an instance of peer-id"),nue.ERR_INVALID_PARAMETERS);var t=e.toString(),r=this.connections.get(t);return null!=r?r.filter((function(e){return e.stat.status===Cue})):[]}},{key:"_onLatencyMeasure",value:function(e){var t=e.detail;this._checkMaxLimit("maxEventLoopDelay",t.avgMs,1).catch((function(e){Oue.error(e)}))}},{key:"_checkMaxLimit",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:1,a=this.opts[t],Oue.trace("checking limit of %s. current value: %d of %d",t,r,a),!(r>a)){e.next=7;break}return Oue("%s: limit exceeded: %p, %d/%d, pruning %d connection(s)",this.components.getPeerId(),t,r,a,n),e.next=7,this._maybePruneConnections(n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_maybePruneConnections",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=this.getConnections()).length<=this.opts.minConnections||t<1)){e.next=3;break}return e.abrupt("return");case 3:n=new Due,a=(0,zn.Z)(r),e.prev=5,a.s();case 7:if((i=a.n()).done){e.next=18;break}if(o=i.value,s=o.remotePeer,!n.has(s)){e.next=12;break}return e.abrupt("continue",16);case 12:return e.next=14,this.components.getPeerStore().getTags(s);case 14:u=e.sent,n.set(s,u.reduce((function(e,t){return e+t.value}),0));case 16:e.next=7;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:c=r.sort((function(e,t){var r,a,i=null!==(r=n.get(e.remotePeer))&&void 0!==r?r:0,o=null!==(a=n.get(t.remotePeer))&&void 0!==a?a:0;return i>o?1:i<o?-1:0})),l=[],f=(0,zn.Z)(c),e.prev=29,f.s();case 31:if((p=f.n()).done){e.next=39;break}if(h=p.value,Oue("too many connections open - closing a connection to %p",h.remotePeer),l.push(h),l.length!==t){e.next=37;break}return e.abrupt("break",39);case 37:e.next=31;break;case 39:e.next=44;break;case 41:e.prev=41,e.t1=e.catch(29),f.e(e.t1);case 44:return e.prev=44,f.f(),e.finish(44);case 47:return e.next=49,Promise.all(l.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.close();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Oue.error(e.t0);case 8:d.onDisconnect(new g9("connectionEnd",{detail:t}));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 49:case"end":return e.stop()}}),e,this,[[5,20,23,26],[29,41,44,47]])})));return function(t){return e.apply(this,arguments)}}()},{key:"acceptIncomingConnection",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(y9),jue=__webpack_require__(1261),Fue=ud("libp2p:connection-manager:auto-dialler"),zue={enabled:!0,minConnections:0,autoDialInterval:1e4},Zue=function(){function e(t,r){xn(this,e),this.components=t,this.options=Hh.call({ignoreUndefined:!0},zue,r),this.running=!1,this._autoDial=this._autoDial.bind(this),Fue("options: %j",this.options)}return Sn(e,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.enabled){e.next=3;break}return Fue("not enabled"),e.abrupt("return");case 3:this.running=!0,this._autoDial().catch((function(e){Fue.error("could start autodial",e)})),Fue("started");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.enabled){e.next=3;break}return Fue("not enabled"),e.abrupt("return");case 3:this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),Fue("stopped");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_autoDial",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),t=this.options.minConnections,!(this.components.getConnectionManager().getConnections().length>=t)){e.next=5;break}return this.autoDialTimeout=Aue(this._autoDial,this.options.autoDialInterval),e.abrupt("return");case 5:return e.next=7,this.components.getPeerStore().all();case 7:return r=e.sent,e.next=10,yF(r.sort((function(){return Math.random()>.5?1:-1})),(function(e){return vz(e,(function(e){return!e.id.equals(o.components.getPeerId())}))}),(function(e){return jue(e,(function(e,t){return t.protocols.length>e.protocols.length||null!=t.id.publicKey&&null==e.id.publicKey?1:-1}))}),function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kz(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:n=e.sent,a=0;case 12:if(!(this.running&&a<n.length&&this.components.getConnectionManager().getConnections().length<t)){e.next=29;break}if(this.running){e.next=15;break}return e.abrupt("return");case 15:if(i=n[a],0!==this.components.getConnectionManager().getConnections(i.id).length){e.next=26;break}return Fue("connecting to a peerStore stored peer %p",i.id),e.prev=18,e.next=21,this.components.getConnectionManager().openConnection(i.id);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(18),Fue.error("could not connect to peerStore stored peer",e.t0);case 26:a++,e.next=12;break;case 29:if(this.running){e.next=31;break}return e.abrupt("return");case 31:this.autoDialTimeout=Aue(this._autoDial,this.options.autoDialInterval);case 32:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(){return e.apply(this,arguments)}}()}]),e}();!function(e){var t,r,n;!function(e){e.SUCCESS="SUCCESS",e.HOP_SRC_ADDR_TOO_LONG="HOP_SRC_ADDR_TOO_LONG",e.HOP_DST_ADDR_TOO_LONG="HOP_DST_ADDR_TOO_LONG",e.HOP_SRC_MULTIADDR_INVALID="HOP_SRC_MULTIADDR_INVALID",e.HOP_DST_MULTIADDR_INVALID="HOP_DST_MULTIADDR_INVALID",e.HOP_NO_CONN_TO_DST="HOP_NO_CONN_TO_DST",e.HOP_CANT_DIAL_DST="HOP_CANT_DIAL_DST",e.HOP_CANT_OPEN_DST_STREAM="HOP_CANT_OPEN_DST_STREAM",e.HOP_CANT_SPEAK_RELAY="HOP_CANT_SPEAK_RELAY",e.HOP_CANT_RELAY_TO_SELF="HOP_CANT_RELAY_TO_SELF",e.STOP_SRC_ADDR_TOO_LONG="STOP_SRC_ADDR_TOO_LONG",e.STOP_DST_ADDR_TOO_LONG="STOP_DST_ADDR_TOO_LONG",e.STOP_SRC_MULTIADDR_INVALID="STOP_SRC_MULTIADDR_INVALID",e.STOP_DST_MULTIADDR_INVALID="STOP_DST_MULTIADDR_INVALID",e.STOP_RELAY_REFUSED="STOP_RELAY_REFUSED",e.MALFORMED_MESSAGE="MALFORMED_MESSAGE"}(e.Status||(e.Status={})),function(e){e[e.SUCCESS=100]="SUCCESS",e[e.HOP_SRC_ADDR_TOO_LONG=220]="HOP_SRC_ADDR_TOO_LONG",e[e.HOP_DST_ADDR_TOO_LONG=221]="HOP_DST_ADDR_TOO_LONG",e[e.HOP_SRC_MULTIADDR_INVALID=250]="HOP_SRC_MULTIADDR_INVALID",e[e.HOP_DST_MULTIADDR_INVALID=251]="HOP_DST_MULTIADDR_INVALID",e[e.HOP_NO_CONN_TO_DST=260]="HOP_NO_CONN_TO_DST",e[e.HOP_CANT_DIAL_DST=261]="HOP_CANT_DIAL_DST",e[e.HOP_CANT_OPEN_DST_STREAM=262]="HOP_CANT_OPEN_DST_STREAM",e[e.HOP_CANT_SPEAK_RELAY=270]="HOP_CANT_SPEAK_RELAY",e[e.HOP_CANT_RELAY_TO_SELF=280]="HOP_CANT_RELAY_TO_SELF",e[e.STOP_SRC_ADDR_TOO_LONG=320]="STOP_SRC_ADDR_TOO_LONG",e[e.STOP_DST_ADDR_TOO_LONG=321]="STOP_DST_ADDR_TOO_LONG",e[e.STOP_SRC_MULTIADDR_INVALID=350]="STOP_SRC_MULTIADDR_INVALID",e[e.STOP_DST_MULTIADDR_INVALID=351]="STOP_DST_MULTIADDR_INVALID",e[e.STOP_RELAY_REFUSED=390]="STOP_RELAY_REFUSED",e[e.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE"}(t||(t={})),function(e){e.codec=function(){return uj(t)}}(e.Status||(e.Status={})),function(e){e.HOP="HOP",e.STOP="STOP",e.STATUS="STATUS",e.CAN_HOP="CAN_HOP"}(e.Type||(e.Type={})),function(e){e[e.HOP=1]="HOP",e[e.STOP=2]="STOP",e[e.STATUS=3]="STATUS",e[e.CAN_HOP=4]="CAN_HOP"}(r||(r={})),function(e){e.codec=function(){return uj(r)}}(e.Type||(e.Type={})),function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.id)throw new Error('Protocol error: required field "id" was not found in object');if(t.uint32(10),t.bytes(e.id),null==e.addrs)throw new Error('Protocol error: required field "addrs" was not found in object');var n,a=(0,zn.Z)(e.addrs);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(18),t.bytes(i)}}catch(sY){a.e(sY)}finally{a.f()}!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r,n,a={},i=null==t?e.len:e.pos+t;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:a.id=e.bytes();break;case 2:a.addrs=null!==(r=a.addrs)&&void 0!==r?r:[],a.addrs.push(e.bytes());break;default:e.skipType(7&o)}}if(a.addrs=null!==(n=a.addrs)&&void 0!==n?n:[],null==a.id)throw new Error('Protocol error: value for required field "id" was not found in protobuf');if(null==a.addrs)throw new Error('Protocol error: value for required field "addrs" was not found in protobuf');return a}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(e.Peer||(e.Peer={})),e.codec=function(){return null==n&&(n=cj((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.Type.codec().encode(t.type,r)),null!=t.srcPeer&&(r.uint32(18),e.Peer.codec().encode(t.srcPeer,r)),null!=t.dstPeer&&(r.uint32(26),e.Peer.codec().encode(t.dstPeer,r)),null!=t.code&&(r.uint32(32),e.Status.codec().encode(t.code,r)),!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.type=e.Type.codec().decode(t);break;case 2:n.srcPeer=e.Peer.codec().decode(t,t.uint32());break;case 3:n.dstPeer=e.Peer.codec().decode(t,t.uint32());break;case 4:n.code=e.Status.codec().decode(t);break;default:t.skipType(7&i)}}return n}))),n},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(Pue||(Pue={}));var que=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this,null!==e&&void 0!==e?e:"The operation was aborted")).type="aborted",a.code=null!==n&&void 0!==n?n:"ABORT_ERR",a}return Sn(r)}(On(Error));function Vue(e,t,r){var n=null!==r&&void 0!==r?r:{},a=Eee(e);function i(){return i=Kh(Fh().mark((function r(){var i,o,s,u,c,l,f,p;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=function(){null!=i&&i()},t.addEventListener("abort",o);case 2:if(s=void 0,r.prev=4,!t.aborted){r.next=8;break}throw u=n.abortMessage,c=n.abortCode,new que(u,c);case 8:return l=new Promise((function(e,t){i=function(){var e=n.abortMessage,r=n.abortCode;t(new que(e,r))}})),r.next=11,km(Promise.race([l,a.next()]));case 11:s=r.sent,i=null,r.next=24;break;case 15:if(r.prev=15,r.t0=r.catch(4),t.removeEventListener("abort",o),(f="aborted"===r.t0.type&&t.aborted)&&null!=n.onAbort&&n.onAbort(e),"function"===typeof a.return)try{(p=a.return())instanceof Promise&&p.catch((function(e){null!=n.onReturnError&&n.onReturnError(e)}))}catch(sY){null!=n.onReturnError&&n.onReturnError(sY)}if(!f||!0!==n.returnOnAbort){r.next=23;break}return r.abrupt("return");case 23:throw r.t0;case 24:if(!0!==s.done){r.next=26;break}return r.abrupt("break",30);case 26:return r.next=28,s.value;case 28:r.next=2;break;case 30:t.removeEventListener("abort",o);case 31:case"end":return r.stop()}}),r,null,[[4,15]])}))),i.apply(this,arguments)}return function(){return i.apply(this,arguments)}()}var Kue=ud("libp2p:stream:converter");function Hue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.stream,n=e.remoteAddr,a=r.sink,i=r.source,o=Kh(Fh().mark((function e(){var t,r,n,a,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,r=!1,e.prev=2,a=xm(i);case 4:return e.next=6,km(a.next());case 6:if(!(t=!(o=e.sent).done)){e.next=17;break}if(!((s=o.value)instanceof Uint8Array)){e.next=13;break}return e.next=11,s;case 11:e.next=14;break;case 13:return e.delegateYield(JD(xm(s)),"t0",14);case 14:t=!1,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(2),r=!0,n=e.t1;case 23:if(e.prev=23,e.prev=24,!t||null==a.return){e.next=28;break}return e.next=28,km(a.return());case 28:if(e.prev=28,!r){e.next=31;break}throw n;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})))(),s={sink:function(e){return Zh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null!=t.signal&&(e=Vue(e,t.signal)),r.prev=1,r.next=4,a(e);case 4:return r.next=6,u();case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),"aborted"!==r.t0.type&&Kue(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},source:null!=t.signal?Vue(o,t.signal):o,remoteAddr:n,timeline:{open:Date.now(),close:void 0},close:function(){return Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Uint8Array(0);case 2:case"end":return e.stop()}}),e)})))());case 2:return e.next=4,u();case 4:case"end":return e.stop()}}),e)})))()}};function u(){return c.apply(this,arguments)}function c(){return(c=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==s.timeline.close&&(s.timeline.close=Date.now()),e.next=3,Promise.resolve();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s}var Wue="/libp2p/circuit/relay/0.1.0";function Gue(e,t){e.write({type:Pue.Type.STATUS,code:t})}function Yue(e,t){try{var r;null!=(null===(r=e.dstPeer)||void 0===r?void 0:r.addrs)&&e.dstPeer.addrs.forEach((function(e){return Gx(e)}))}catch(sY){throw Gue(t,e.type===Pue.Type.HOP?Pue.Status.HOP_DST_MULTIADDR_INVALID:Pue.Status.STOP_DST_MULTIADDR_INVALID),sY}try{var n;null!=(null===(n=e.srcPeer)||void 0===n?void 0:n.addrs)&&e.srcPeer.addrs.forEach((function(e){return Gx(e)}))}catch(sY){throw Gue(t,e.type===Pue.Type.HOP?Pue.Status.HOP_SRC_MULTIADDR_INVALID:Pue.Status.STOP_SRC_MULTIADDR_INVALID),sY}}function Que(e){var t,r=nF(),n=function(e){var t=Kh(Fh().mark((function t(){var r,n,a,i,o,s,u,c,l;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void(t.next=2);case 2:r=t.sent,n=new BK,a=!1,i=!1,t.prev=6,s=xm(e);case 8:return t.next=10,km(s.next());case 10:if(!(a=!(u=t.sent).done)){t.next=38;break}if(c=u.value,null!=r){t.next=19;break}return n.append(c),t.next=16,n;case 16:return r=t.sent,n=new BK,t.abrupt("continue",35);case 19:n.append(c);case 20:if(!(n.length>=r)){t.next=35;break}return l=n.sublist(0,r),n.consume(r),t.next=25,l;case 25:if(null!=(r=t.sent)){t.next=33;break}if(!(n.length>0)){t.next=32;break}return t.next=30,n;case 30:r=t.sent,n=new BK;case 32:return t.abrupt("break",35);case 33:t.next=20;break;case 35:a=!1,t.next=8;break;case 38:t.next=44;break;case 40:t.prev=40,t.t0=t.catch(6),i=!0,o=t.t0;case 44:if(t.prev=44,t.prev=45,!a||null==s.return){t.next=49;break}return t.next=49,km(s.return());case 49:if(t.prev=49,!i){t.next=52;break}throw o;case 52:return t.finish(49);case 53:return t.finish(44);case 54:if(null==r){t.next=56;break}throw Object.assign(new Error("stream ended before ".concat(r," bytes became available")),{code:"ERR_UNDER_READ",buffer:n});case 56:case"end":return t.stop()}}),t,null,[[6,40,44,54],[45,,49,53]])})))();return t.next(),t}(e.source),a=Fee(),i=e.sink(Kh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(JD(xm(r)),"t0",1);case 1:return e.next=3,km(a.promise);case 3:return t=e.sent,e.delegateYield(JD(xm(t)),"t1",5);case 5:case"end":return e.stop()}}),e)})))());i.catch((function(e){t=e}));var o={sink:function(){var e=Zh(Fh().mark((function e(r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=4;break}return e.next=3,Promise.reject(t);case 3:return e.abrupt("return");case 4:return a.resolve(r),e.next=7,i;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),source:n};return{reader:n,writer:r,stream:o,rest:function(){return r.end()},write:r.push,read:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.next();case 2:if(null==(t=e.sent).value){e.next=5;break}return e.abrupt("return",t.value);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}var Jue=ud("libp2p:circuit:stream-handler"),Xue=function(){function e(t){xn(this,e);var r=t.stream,n=t.maxLength,a=void 0===n?4096:n;this.stream=r,this.shake=Que(this.stream),this.decoder=Oee.fromReader(this.shake.reader,{maxDataLength:a})}return Sn(e,[{key:"read",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decoder.next();case 2:if(null==(t=e.sent).value){e.next=7;break}return r=Pue.decode(t.value),Jue("read message type",r.type),e.abrupt("return",r);case 7:Jue("read received no value, closing stream"),this.close();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"write",value:function(e){Jue("write message type %s",e.type),this.shake.write(Ree.single(Pue.encode(e)))}},{key:"rest",value:function(){return this.shake.rest(),this.shake.stream}},{key:"end",value:function(e){this.write(e),this.close()}},{key:"close",value:function(){Jue("closing the stream"),this.rest().sink([]).catch((function(e){Jue.error(e)}))}}]),e}(),$ue=ud("libp2p:circuit:stop");function ece(e){var t=e.connection,r=e.request,n=e.streamHandler;try{Yue(r,n)}catch(sY){return void $ue.error("invalid stop request via peer %p %o",t.remotePeer,sY)}return $ue("stop request is valid"),n.write({type:Pue.Type.STATUS,code:Pue.Status.SUCCESS}),n.rest()}function tce(e){return rce.apply(this,arguments)}function rce(){return rce=Zh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.connection,n=t.request,a=t.signal,e.next=3,r.newStream(Wue,{signal:a});case 3:return i=e.sent,$ue("starting stop request to %p",r.remotePeer),(o=new Xue({stream:i})).write(n),e.next=9,o.read();case 9:if(null!=(s=e.sent)){e.next=13;break}return o.close(),e.abrupt("return");case 13:if(s.code!==Pue.Status.SUCCESS){e.next=16;break}return $ue("stop request to %p was successful",r.remotePeer),e.abrupt("return",o.rest());case 16:$ue("stop request failed with code %d",s.code),o.close();case 18:case"end":return e.stop()}}),e)}))),rce.apply(this,arguments)}var nce=ud("libp2p:circuit:hop");function ace(e){return ice.apply(this,arguments)}function ice(){return ice=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.connection,n=t.request,a=t.streamHandler,i=t.circuit,o=t.connectionManager,i.hopEnabled()){e.next=4;break}return nce("HOP request received but we are not acting as a relay"),e.abrupt("return",a.end({type:Pue.Type.STATUS,code:Pue.Status.HOP_CANT_SPEAK_RELAY}));case 4:e.prev=4,Yue(n,a),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(4),nce.error("invalid hop request via peer %p %o",r.remotePeer,e.t0),e.abrupt("return");case 12:if(null!=n.dstPeer){e.next=15;break}return nce("HOP request received but we do not receive a dstPeer"),e.abrupt("return");case 15:if(s=HD(n.dstPeer.id),0!==(u=o.getConnections(s)).length||i.hopActive()){e.next=20;break}return nce("HOP request received but we are not connected to the destination peer"),e.abrupt("return",a.end({type:Pue.Type.STATUS,code:Pue.Status.HOP_NO_CONN_TO_DST}));case 20:if(0!==u.length){e.next=23;break}return nce("did not have connection to remote peer"),e.abrupt("return",a.end({type:Pue.Type.STATUS,code:Pue.Status.HOP_NO_CONN_TO_DST}));case 23:return c={type:Pue.Type.STOP,dstPeer:n.dstPeer,srcPeer:n.srcPeer},e.prev=24,nce("performing STOP request"),e.next=28,tce({connection:u[0],request:c});case 28:if(null!=(f=e.sent)){e.next=31;break}throw new Error("Could not stop");case 31:l=f,e.next=38;break;case 34:return e.prev=34,e.t1=e.catch(24),nce.error(e.t1),e.abrupt("return");case 38:return nce("hop request from %p is valid",r.remotePeer),a.write({type:Pue.Type.STATUS,code:Pue.Status.SUCCESS}),p=a.rest(),nce("creating related connections"),e.next=44,yF(p,l,p);case 44:return e.abrupt("return",e.sent);case 45:case"end":return e.stop()}}),e,null,[[4,8],[24,34]])}))),ice.apply(this,arguments)}function oce(e){return sce.apply(this,arguments)}function sce(){return sce=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,a=t.request,i=t.signal,e.next=3,n.newStream(Wue,{signal:i});case 3:return o=e.sent,(s=new Xue({stream:o})).write(a),e.next=8,s.read();case 8:if(null!=(u=e.sent)){e.next=11;break}throw cd(new Error("HOP request had no response"),nue.ERR_HOP_REQUEST_FAILED);case 11:if(u.code!==Pue.Status.SUCCESS){e.next=14;break}return nce("hop request was successful"),e.abrupt("return",s.rest());case 14:throw nce("hop request failed with code %d, closing stream",u.code),s.close(),cd(new Error('HOP request failed with code "'.concat(null!==(r=u.code)&&void 0!==r?r:"unknown",'"')),nue.ERR_HOP_REQUEST_FAILED);case 17:case"end":return e.stop()}}),e)}))),sce.apply(this,arguments)}function uce(e){return cce.apply(this,arguments)}function cce(){return(cce=Zh(Fh().mark((function e(t){var r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.connection,n=t.signal,e.next=3,r.newStream(Wue,{signal:n});case 3:return a=e.sent,(i=new Xue({stream:a})).write({type:Pue.Type.CAN_HOP}),e.next=8,i.read();case 8:return o=e.sent,e.next=11,i.close();case 11:if(null!=o&&o.code===Pue.Status.SUCCESS){e.next=13;break}return e.abrupt("return",!1);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lce(e){var t=e.connection,r=e.streamHandler,n=e.circuit.hopEnabled();nce("can hop (%s) request from %p",n,t.remotePeer),r.end({type:Pue.Type.STATUS,code:n?Pue.Status.SUCCESS:Pue.Status.HOP_CANT_SPEAK_RELAY})}var fce=ud("libp2p:circuit"),pce=function(e){function t(e){xn(this,t),this.components=new aee,this._init=e}return Sn(t,[{key:"init",value:function(e){var t=this;this.components=e,this.components.getRegistrar().handle(Wue,(function(e){t._onProtocol(e).catch((function(e){fce.error(e)}))})).catch((function(e){fce.error(e)}))}},{key:"hopEnabled",value:function(){return!0}},{key:"hopActive",value:function(){return!0}},{key:eue,get:function(){return!0}},{key:e,get:function(){return"libp2p/circuit-relay-v1"}},{key:"_onProtocol",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.connection,n=t.stream,a=new wm.TimeoutController(this._init.hop.timeout);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,a.signal)}catch(y){}return e.prev=3,i=Cee(n,a.signal),o=new Xue({stream:So(So({},n),i)}),e.next=8,o.read();case 8:if(null!=(s=e.sent)){e.next=14;break}return fce("request was invalid, could not read from stream"),o.write({type:Pue.Type.STATUS,code:Pue.Status.MALFORMED_MESSAGE}),o.close(),e.abrupt("return");case 14:e.t0=s.type,e.next=e.t0===Pue.Type.CAN_HOP?17:e.t0===Pue.Type.HOP?21:e.t0===Pue.Type.STOP?25:30;break;case 17:return fce("received CAN_HOP request from %p",r.remotePeer),e.next=20,lce({circuit:this,connection:r,streamHandler:o});case 20:return e.abrupt("break",34);case 21:return fce("received HOP request from %p",r.remotePeer),e.next=24,ace({connection:r,request:s,streamHandler:o,circuit:this,connectionManager:this.components.getConnectionManager()});case 24:return e.abrupt("break",34);case 25:return fce("received STOP request from %p",r.remotePeer),e.next=28,ece({connection:r,request:s,streamHandler:o});case 28:return u=e.sent,e.abrupt("break",34);case 30:return fce("Request of type %s not supported",s.type),o.write({type:Pue.Type.STATUS,code:Pue.Status.MALFORMED_MESSAGE}),o.close(),e.abrupt("return");case 34:if(null==u){e.next=45;break}return f=r.remoteAddr.encapsulate("/p2p-circuit").encapsulate(Gx(null===(c=s.dstPeer)||void 0===c?void 0:c.addrs[0])),p=Gx(null===(l=s.srcPeer)||void 0===l?void 0:l.addrs[0]),h=Hue({stream:u,remoteAddr:f,localAddr:p}),d=s.type===Pue.Type.HOP?"relay":"inbound",fce("new %s connection %s",d,h.remoteAddr),e.next=42,this.components.getUpgrader().upgradeInbound(h);case 42:v=e.sent,fce("%s connection %s upgraded",d,h.remoteAddr),null!=this.handler&&this.handler(v);case 45:return e.prev=45,a.clear(),e.finish(45);case 48:case"end":return e.stop()}}),e,this,[[3,,45,48]])})));return function(t){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>1&&void 0!==b[1]?b[1]:{},n=t.toString().split("/p2p-circuit"),a=Gx(n[0]),i=Gx(n[n.length-1]),o=a.getPeerId(),s=i.getPeerId(),null!=o&&null!=s){e.next=10;break}throw u="Circuit relay dial failed as addresses did not have peer id",fce.error(u),cd(new Error(u),nue.ERR_RELAYED_DIAL);case 10:if(c=KD(o),l=KD(s),f=!1,p=this.components.getConnectionManager().getConnections(c),null!=(h=p[0])){e.next=22;break}return e.next=18,this.components.getPeerStore().addressBook.add(c,[a]);case 18:return e.next=20,this.components.getConnectionManager().openConnection(c,r);case 20:h=e.sent,f=!0;case 22:return e.prev=22,e.next=25,oce(So(So({},r),{},{connection:h,request:{type:Pue.Type.HOP,srcPeer:{id:this.components.getPeerId().toBytes(),addrs:this.components.getAddressManager().getAddresses().map((function(e){return e.bytes}))},dstPeer:{id:l.toBytes(),addrs:[Gx(i).bytes]}}}));case 25:return d=e.sent,v=a.encapsulate("/p2p-circuit/p2p/".concat(this.components.getPeerId().toString())),y=Hue({stream:d,remoteAddr:t,localAddr:v}),fce("new outbound connection %s",y.remoteAddr),e.next=31,this.components.getUpgrader().upgradeOutbound(y);case 31:return e.abrupt("return",e.sent);case 34:if(e.prev=34,e.t0=e.catch(22),fce.error("Circuit relay dial failed",e.t0),e.t1=f,!e.t1){e.next=41;break}return e.next=41,h.close();case 41:throw e.t0;case 42:case"end":return e.stop()}}),e,this,[[22,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){return this.handler=e.handler,function(e){var t=new Map;function r(){return(r=Zh(Fh().mark((function r(a){var i,o,s,u,c,l;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=a.toString().split("/p2p-circuit").find((function(e){return""!==e})),o=Gx(i),null!=(s=o.getPeerId())){r.next=5;break}throw new Error("Could not determine relay peer from multiaddr");case 5:return u=KD(s),r.next=8,e.peerStore.addressBook.add(u,[o]);case 8:return r.next=10,e.connectionManager.openConnection(u);case 10:c=r.sent,l=c.remoteAddr.encapsulate("/p2p-circuit"),t.set(c.remotePeer.toString(),l),n.dispatchEvent(new g9("listening"));case 14:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var n=Object.assign(new y9,{close:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),listen:function(e){return r.apply(this,arguments)},getAddrs:function(){var e,r=[],n=(0,zn.Z)(t.values());try{for(n.s();!(e=n.n()).done;){var a=e.value;r.push(a)}}catch(sY){n.e(sY)}finally{n.f()}return r}});return e.connectionManager.addEventListener("peer:disconnect",(function(e){var r=e.detail;t.delete(r.remotePeer.toString())&&n.dispatchEvent(new g9("close"))})),n}({connectionManager:this.components.getConnectionManager(),peerStore:this.components.getPeerStore()})}},{key:"filter",value:function(e){return(e=Array.isArray(e)?e:[e]).filter((function(e){return $S.matches(e)}))}}]),t}(Symbol.toStringTag);function hce(e){return dce.apply(this,arguments)}function dce(){return dce=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new TextEncoder).encode(t),e.next=3,Kg.digest(r);case 3:return n=e.sent,e.abrupt("return",bv.createV0(n));case 5:case"end":return e.stop()}}),e)}))),dce.apply(this,arguments)}var vce="hop_relay",yce="true",bce="/libp2p/relay",gce=__webpack_require__(7922),mce="[a-fA-F\\d:]",wce=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(mce,")|(?<=").concat(mce,")(?=\\s|$))"):""},kce="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",xce="[a-fA-F\\d]{1,4}",_ce="\n(?:\n(?:".concat(xce,":){7}(?:").concat(xce,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(xce,":){6}(?:").concat(kce,"|:").concat(xce,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(xce,":){5}(?::").concat(kce,"|(?::").concat(xce,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(xce,":){4}(?:(?::").concat(xce,"){0,1}:").concat(kce,"|(?::").concat(xce,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(xce,":){3}(?:(?::").concat(xce,"){0,2}:").concat(kce,"|(?::").concat(xce,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(xce,":){2}(?:(?::").concat(xce,"){0,3}:").concat(kce,"|(?::").concat(xce,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(xce,":){1}(?:(?::").concat(xce,"){0,4}:").concat(kce,"|(?::").concat(xce,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(xce,"){0,5}:").concat(kce,"|(?::").concat(xce,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Ece=new RegExp("(?:^".concat(kce,"$)|(?:^").concat(_ce,"$)")),Sce=new RegExp("^".concat(kce,"$")),Ace=new RegExp("^".concat(_ce,"$")),Cce=function(e){return e&&e.exact?Ece:new RegExp("(?:".concat(wce(e)).concat(kce).concat(wce(e),")|(?:").concat(wce(e)).concat(_ce).concat(wce(e),")"),"g")};Cce.v4=function(e){return e&&e.exact?Sce:new RegExp("".concat(wce(e)).concat(kce).concat(wce(e)),"g")},Cce.v6=function(e){return e&&e.exact?Ace:new RegExp("".concat(wce(e)).concat(_ce).concat(wce(e)),"g")};var Tce=Cce,Rce=__webpack_require__(7201),Ice=Rce.isValid,Pce=Rce.parse,Dce=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((function(e){return new gce.Netmask(e)}));function Nce(e){return/^::$/.test(e)||/^::1$/.test(e)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}var Oce=function(e){if(Ice(e)){var t=Pce(e);if("ipv4"===t.kind())return function(e){var t,r=(0,zn.Z)(Dce);try{for(r.s();!(t=r.n()).done;)if(t.value.contains(e))return!0}catch(sY){r.e(sY)}finally{r.f()}return!1}(t.toNormalizedString());if("ipv6"===t.kind())return Nce(e)}else if(fw(e)&&Tce.v6().test(e))return Nce(e)};function Lce(e){try{var t=e.nodeAddress().address;return Boolean(Oce(t))}catch(r){return!0}}function Bce(e,t){var r=Lce(e.multiaddr),n=Lce(t.multiaddr);return r&&!n?1:!r&&n||e.isCertified&&!t.isCertified?-1:!e.isCertified&&t.isCertified?1:0}var Mce=ud("libp2p:auto-relay"),Uce=function(){},jce=function(){function e(t,r){var n,a,i,o=this;xn(this,e),this.components=t,this.addressSorter=null!==(n=r.addressSorter)&&void 0!==n?n:Bce,this.maxListeners=null!==(a=r.maxListeners)&&void 0!==a?a:1,this.listenRelays=new Set,this.onError=null!==(i=r.onError)&&void 0!==i?i:Uce,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.getPeerStore().addEventListener("change:protocols",(function(e){o._onProtocolChange(e).catch((function(e){Mce.error(e)}))})),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onPeerDisconnected)}return Sn(e,[{key:"_onProtocolChange",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.detail,n=r.peerId,a=r.protocols,i=n.toString(),o=a.find((function(e){return e===Wue})),null!=o){e.next=8;break}if(!this.listenRelays.has(i)){e.next=7;break}return e.next=7,this._removeListenRelay(i);case 7:return e.abrupt("return");case 8:if(!this.listenRelays.has(i)){e.next=10;break}return e.abrupt("return");case 10:if(e.prev=10,0!==(s=this.components.getConnectionManager().getConnections(n)).length){e.next=14;break}return e.abrupt("return");case 14:if(!(u=s[0]).remoteAddr.protoCodes().includes(290)){e.next=18;break}return Mce("relayed connection to ".concat(i," will not be used to hop on")),e.abrupt("return");case 18:return e.next=20,uce({connection:u});case 20:if(!e.sent){e.next=26;break}return e.next=24,this.components.getPeerStore().metadataBook.setValue(n,vce,mm(yce));case 24:return e.next=26,this._addListenRelay(u,i);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),this.onError(e.t0);case 31:case"end":return e.stop()}}),e,this,[[10,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_onPeerDisconnected",value:function(e){var t=e.detail.remotePeer.toString();this.listenRelays.has(t)&&this._removeListenRelay(t).catch((function(e){Mce.error(e)}))}},{key:"_addListenRelay",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.listenRelays.size>=this.maxListeners)){e.next=3;break}return e.abrupt("return");case 3:return e.t0=yF,e.next=6,this.components.getPeerStore().addressBook.get(t.remotePeer);case 6:return e.t1=e.sent,e.t2=function(e){return jue(e,a.addressSorter)},e.t3=function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kz(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=11,(0,e.t0)(e.t1,e.t2,e.t3);case 11:return n=e.sent,e.next=14,Promise.all(n.map(function(){var e=Zh(Fh().mark((function e(r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null==(n=r.multiaddr).getPeerId()&&(n=n.encapsulate("/p2p/".concat(t.remotePeer.toString()))),n=n.encapsulate("/p2p-circuit"),e.next=6,a.components.getTransportManager().listen([n]);case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),Mce.error("error listening on circuit address",e.t0),a.onError(e.t0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));case 14:e.sent.includes(!0)&&this.listenRelays.add(r),e.next=22;break;case 18:e.prev=18,e.t4=e.catch(0),this.onError(e.t4),this.listenRelays.delete(r);case 22:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_removeListenRelay",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.listenRelays.delete(t)){e.next=3;break}return e.next=3,this._listenOnAvailableHopRelays([t]);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_listenOnAvailableHopRelays",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.length>0&&void 0!==_[0]?_[0]:[],!(this.listenRelays.size>=this.maxListeners)){e.next=3;break}return e.abrupt("return");case 3:return r=[],e.next=6,this.components.getPeerStore().all();case 6:n=e.sent,a=(0,zn.Z)(n),e.prev=8,a.s();case 10:if((i=a.n()).done){e.next=30;break}if(o=i.value,s=o.id,u=o.metadata,c=s.toString(),!this.listenRelays.has(c)){e.next=15;break}return e.abrupt("continue",28);case 15:if(!t.includes(c)){e.next=17;break}return e.abrupt("continue",28);case 17:if(null!=(l=u.get(vce))&&uN(l)===yce){e.next=20;break}return e.abrupt("continue",28);case 20:if(0!==(f=this.components.getConnectionManager().getConnections(s)).length){e.next=24;break}return r.push(s),e.abrupt("continue",28);case 24:return e.next=26,this._addListenRelay(f[0],c);case 26:if(!(this.listenRelays.size>=this.maxListeners)){e.next=28;break}return e.abrupt("return");case 28:e.next=10;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(8),a.e(e.t0);case 35:return e.prev=35,a.f(),e.finish(35);case 38:p=0,h=r;case 39:if(!(p<h.length)){e.next=48;break}return d=h[p],e.next=43,this._tryToListenOnRelay(d);case 43:if(!(this.listenRelays.size>=this.maxListeners)){e.next=45;break}return e.abrupt("return");case 45:p++,e.next=39;break;case 48:return e.prev=48,e.next=51,hce(bce);case 51:v=e.sent,y=!1,b=!1,e.prev=54,m=xm(this.components.getContentRouting().findProviders(v));case 56:return e.next=58,m.next();case 58:if(!(y=!(w=e.sent).done)){e.next=74;break}if(0!==(k=w.value).multiaddrs.length){e.next=62;break}return e.abrupt("continue",71);case 62:if(!(x=k.id).equals(this.components.getPeerId())){e.next=65;break}return e.abrupt("continue",71);case 65:return e.next=67,this.components.getPeerStore().addressBook.add(x,k.multiaddrs);case 67:return e.next=69,this._tryToListenOnRelay(x);case 69:if(!(this.listenRelays.size>=this.maxListeners)){e.next=71;break}return e.abrupt("return");case 71:y=!1,e.next=56;break;case 74:e.next=80;break;case 76:e.prev=76,e.t1=e.catch(54),b=!0,g=e.t1;case 80:if(e.prev=80,e.prev=81,!y||null==m.return){e.next=85;break}return e.next=85,m.return();case 85:if(e.prev=85,!b){e.next=88;break}throw g;case 88:return e.finish(85);case 89:return e.finish(80);case 90:e.next=95;break;case 92:e.prev=92,e.t2=e.catch(48),this.onError(e.t2);case 95:case"end":return e.stop()}}),e,this,[[8,32,35,38],[48,92],[54,76,80,90],[81,,85,89]])})));return function(){return e.apply(this,arguments)}}()},{key:"_tryToListenOnRelay",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.components.getConnectionManager().openConnection(t);case 3:return r=e.sent,e.next=6,this._addListenRelay(r,t.toString());case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),Mce.error("Could not use %p as relay",t,e.t0),this.onError(e.t0,"could not connect and listen on known hop relay ".concat(t.toString()));case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Fce=ud("libp2p:relay"),zce=function(){function e(t,r){var n;xn(this,e),this.components=t,this.autoRelay=!1!==(null===(n=r.autoRelay)||void 0===n?void 0:n.enabled)?new jce(t,So({addressSorter:r.addressSorter},r.autoRelay)):void 0,this.started=!1,this.init=r,this._advertiseService=this._advertiseService.bind(this)}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,due.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.timeout&&(0,due.clearDelayedInterval)(this.timeout),this.started=!1;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_advertiseService",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hce(bce);case 3:return t=e.sent,e.next=6,this.components.getContentRouting().provide(t);case 6:e.next=17;break;case 8:if(e.prev=8,e.t0=e.catch(0),e.t0.code!==nue.ERR_NO_ROUTERS_AVAILABLE){e.next=16;break}return Fce.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e.t0),e.next=14,this.stop();case 14:e.next=17;break;case 16:Fce.error(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zce=__webpack_require__(6327),qce=(__webpack_require__(4660),__webpack_require__(3391),fN.pki),Vce=function(e,t){var r=qce.rsa.setPublicKey(t.n,t.e),n=qce.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);var a=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return n.setSubject(a),n.setIssuer(a),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(t),n};function Kce(e,t){return Hce.apply(this,arguments)}function Hce(){return(Hce=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(r),e.next=3,Promise.all(n);case 3:return a=e.sent,i=a.findIndex((function(e){return e})),e.abrupt("return",t[i]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wce=ud("libp2p:keychain:cms"),Gce=new WeakMap,Yce=function(){function e(t,r){if(xn(this,e),null==t)throw cd(new Error("keychain is required"),nue.ERR_KEYCHAIN_REQUIRED);this.keychain=t,Gce.set(this,{dek:r})}return Sn(e,[{key:"encrypt",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array){e.next=2;break}throw cd(new Error("Plain data must be a Uint8Array"),nue.ERR_INVALID_PARAMETERS);case 2:return e.next=4,this.keychain.findKeyByName(t);case 4:return n=e.sent,e.next=7,this.keychain.getPrivateKey(t);case 7:if(a=e.sent,null!=(i=Gce.get(this))){e.next=11;break}throw cd(new Error("dek missing"),nue.ERR_INVALID_PARAMETERS);case 11:return o=i.dek,s=fN.pki.decryptRsaPrivateKey(a,o),e.next=15,Vce(n,s);case 15:return u=e.sent,(c=fN.pkcs7.createEnvelopedData()).addRecipient(u),c.content=fN.util.createBuffer(r),c.encrypt(),l=fN.asn1.toDer(c.toAsn1()).getBytes(),e.abrupt("return",mm(l,"ascii"));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw cd(new Error("CMS data is required"),nue.ERR_INVALID_PARAMETERS);case 2:e.prev=2,n=fN.util.createBuffer(uN(t,"ascii")),a=fN.asn1.fromDer(n),r=fN.pkcs7.messageFromAsn1(a),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),Wce.error(e.t0),cd(new Error("Invalid CMS"),nue.ERR_INVALID_CMS);case 12:return i=r.recipients.filter((function(e){return e.issuer.find((function(e){return"O"===e.shortName&&"ipfs"===e.value}))})).filter((function(e){return e.issuer.find((function(e){return"CN"===e.shortName}))})).map((function(e){return{recipient:e,keyId:e.issuer.find((function(e){return"CN"===e.shortName})).value}})),e.next=15,Kce(i,function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.keychain.findKeyById(t.keyId);case 3:if(null==e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());case 15:if(null!=(o=e.sent)){e.next=19;break}throw s=i.map((function(e){return e.keyId})),cd(new Error("Decryption needs one of the key(s): ".concat(s.join(", "))),nue.ERR_MISSING_KEYS,{missingKeys:s});case 19:return e.next=21,this.keychain.findKeyById(o.keyId);case 21:if(null!=(u=e.sent)){e.next=24;break}throw cd(new Error("No key available to decrypto"),nue.ERR_NO_KEY);case 24:return e.next=26,this.keychain.getPrivateKey(u.name);case 26:if(c=e.sent,null!=(l=Gce.get(this))){e.next=30;break}throw cd(new Error("dek missing"),nue.ERR_INVALID_PARAMETERS);case 30:return f=l.dek,p=fN.pki.decryptRsaPrivateKey(c,f),r.decrypt(o.recipient,p),e.abrupt("return",mm(r.content.getBytes(),"ascii"));case 34:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Qce=ud("libp2p:keychain"),Jce="/info/",Xce=new WeakMap,$ce=14,ele=16,tle=1e3,rle={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function nle(e){return null!=e&&("string"===typeof e&&(e===Zce(e.trim())&&e.length>0))}function ale(){return ile.apply(this,arguments)}function ile(){return ile=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,1e3,t=800*Math.random()+200,e.next=5,new Promise((function(e){return setTimeout(e,t)}));case 5:case"end":return e.stop()}}),e)}))),ile.apply(this,arguments)}function ole(e){return new LR("/pkcs8/"+e)}function sle(e){return new LR(Jce+e)}var ule=function(){function e(t,r){var n,a,i,o,s,u,c,l,f,p;if(xn(this,e),this.components=t,this.init=Hh(rle,r),null!=this.init.pass&&(null===(n=this.init.pass)||void 0===n?void 0:n.length)<20)throw new Error("pass must be least 20 characters");if(null!=(null===(a=this.init.dek)||void 0===a?void 0:a.keyLength)&&this.init.dek.keyLength<$ce)throw new Error("dek.keyLength must be least ".concat($ce," bytes"));if(null!=(null===(i=this.init.dek)||void 0===i||null===(o=i.salt)||void 0===o?void 0:o.length)&&this.init.dek.salt.length<ele)throw new Error("dek.saltLength must be least ".concat(ele," bytes"));if(null!=(null===(s=this.init.dek)||void 0===s?void 0:s.iterationCount)&&this.init.dek.iterationCount<tle)throw new Error("dek.iterationCount must be least ".concat(tle));var h=null!=this.init.pass&&null!=(null===(u=this.init.dek)||void 0===u?void 0:u.salt)?fee(this.init.pass,null===(c=this.init.dek)||void 0===c?void 0:c.salt,null===(l=this.init.dek)||void 0===l?void 0:l.iterationCount,null===(f=this.init.dek)||void 0===f?void 0:f.keyLength,null===(p=this.init.dek)||void 0===p?void 0:p.hash):"";Xce.set(this,{dek:h}),this.started=!1}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sle("self"),e.next=3,this.components.getDatastore().has(t);case 3:if(e.sent){e.next=6;break}return e.next=6,this.importPeer("self",this.components.getPeerId());case 6:this.started=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.started=!1}},{key:"cms",get:function(){var e=Xce.get(this);if(null==e)throw cd(new Error("dek missing"),nue.ERR_INVALID_PARAMETERS);var t=e.dek;return new Yce(this,t)}},{key:"createKey",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>2&&void 0!==p[2]?p[2]:2048,nle(t)&&"self"!==t){e.next=5;break}return e.next=4,ale();case 4:throw cd(new Error("Invalid key name"),nue.ERR_INVALID_KEY_NAME);case 5:if("string"===typeof r){e.next=9;break}return e.next=8,ale();case 8:throw cd(new Error("Invalid key type"),nue.ERR_INVALID_KEY_TYPE);case 9:return a=ole(t),e.next=12,this.components.getDatastore().has(a);case 12:if(!e.sent){e.next=17;break}return e.next=16,ale();case 16:throw cd(new Error("Key name already exists"),nue.ERR_KEY_ALREADY_EXISTS);case 17:e.t0=r.toLowerCase(),e.next="rsa"===e.t0?20:25;break;case 20:if(Number.isSafeInteger(n)&&!(n<2048)){e.next=24;break}return e.next=23,ale();case 23:throw cd(new Error("Invalid RSA key size"),nue.ERR_INVALID_KEY_SIZE);case 24:case 25:return e.abrupt("break",26);case 26:return e.prev=26,e.next=29,ZU(r,n);case 29:return o=e.sent,e.next=32,o.id();case 32:if(s=e.sent,null!=(u=Xce.get(this))){e.next=36;break}throw cd(new Error("dek missing"),nue.ERR_INVALID_PARAMETERS);case 36:return c=u.dek,e.next=39,o.export(c);case 39:return l=e.sent,i={name:t,id:s},(f=this.components.getDatastore().batch()).put(a,mm(l)),f.put(sle(t),mm(JSON.stringify(i))),e.next=46,f.commit();case 46:e.next=53;break;case 48:return e.prev=48,e.t1=e.catch(26),e.next=52,ale();case 52:throw e.t1;case 53:return e.abrupt("return",i);case 54:case"end":return e.stop()}}),e,this,[[26,48]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"listKeys",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={prefix:Jce},r=[],n=!1,a=!1,e.prev=4,o=xm(this.components.getDatastore().query(t));case 6:return e.next=8,o.next();case 8:if(!(n=!(s=e.sent).done)){e.next=14;break}u=s.value,r.push(JSON.parse(uN(u.value)));case 11:n=!1,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,this,[[4,16,20,30],[21,,25,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"findKeyById",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.listKeys();case 3:return r=e.sent,e.abrupt("return",r.find((function(e){return e.id===t})));case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,ale();case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"findKeyByName",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nle(t)){e.next=4;break}return e.next=3,ale();case 3:throw cd(new Error("Invalid key name '".concat(t,"'")),nue.ERR_INVALID_KEY_NAME);case 4:return r=sle(t),e.prev=5,e.next=8,this.components.getDatastore().get(r);case 8:return n=e.sent,e.abrupt("return",JSON.parse(uN(n)));case 12:return e.prev=12,e.t0=e.catch(5),e.next=16,ale();case 16:throw Qce.error(e.t0),cd(new Error("Key '".concat(t,"' does not exist.")),nue.ERR_KEY_NOT_FOUND);case 18:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeKey",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nle(t)&&"self"!==t){e.next=4;break}return e.next=3,ale();case 3:throw cd(new Error("Invalid key name '".concat(t,"'")),nue.ERR_INVALID_KEY_NAME);case 4:return r=ole(t),e.next=7,this.findKeyByName(t);case 7:return n=e.sent,(a=this.components.getDatastore().batch()).delete(r),a.delete(sle(t)),e.next=13,a.commit();case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameKey",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nle(t)&&"self"!==t){e.next=4;break}return e.next=3,ale();case 3:throw cd(new Error("Invalid old key name '".concat(t,"'")),nue.ERR_OLD_KEY_NAME_INVALID);case 4:if(nle(r)&&"self"!==r){e.next=8;break}return e.next=7,ale();case 7:throw cd(new Error("Invalid new key name '".concat(r,"'")),nue.ERR_NEW_KEY_NAME_INVALID);case 8:return n=ole(t),a=ole(r),i=sle(t),o=sle(r),e.next=14,this.components.getDatastore().has(a);case 14:if(!e.sent){e.next=19;break}return e.next=18,ale();case 18:throw cd(new Error("Key '".concat(r,"' already exists")),nue.ERR_KEY_ALREADY_EXISTS);case 19:return e.prev=19,e.next=22,this.components.getDatastore().get(n);case 22:return s=e.sent,e.next=25,this.components.getDatastore().get(i);case 25:return u=e.sent,(c=JSON.parse(uN(u))).name=r,(l=this.components.getDatastore().batch()).put(a,s),l.put(o,mm(JSON.stringify(c))),l.delete(n),l.delete(i),e.next=35,l.commit();case 35:return e.abrupt("return",c);case 38:return e.prev=38,e.t0=e.catch(19),e.next=42,ale();case 42:throw e.t0;case 43:case"end":return e.stop()}}),e,this,[[19,38]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"exportKey",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nle(t)){e.next=4;break}return e.next=3,ale();case 3:throw cd(new Error("Invalid key name '".concat(t,"'")),nue.ERR_INVALID_KEY_NAME);case 4:if(null!=r){e.next=8;break}return e.next=7,ale();case 7:throw cd(new Error("Password is required"),nue.ERR_PASSWORD_REQUIRED);case 8:return n=ole(t),e.prev=9,e.next=12,this.components.getDatastore().get(n);case 12:if(a=e.sent,i=uN(a),null!=(o=Xce.get(this))){e.next=17;break}throw cd(new Error("dek missing"),nue.ERR_INVALID_PARAMETERS);case 17:return s=o.dek,e.next=20,YU(i,s);case 20:return u=e.sent,e.next=23,u.export(r);case 23:return e.abrupt("return",e.sent);case 26:return e.prev=26,e.t0=e.catch(9),e.next=30,ale();case 30:throw e.t0;case 31:case"end":return e.stop()}}),e,this,[[9,26]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"importKey",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nle(t)&&"self"!==t){e.next=4;break}return e.next=3,ale();case 3:throw cd(new Error("Invalid key name '".concat(t,"'")),nue.ERR_INVALID_KEY_NAME);case 4:if(null!=r){e.next=8;break}return e.next=7,ale();case 7:throw cd(new Error("PEM encoded key is required"),nue.ERR_PEM_REQUIRED);case 8:return a=ole(t),e.next=11,this.components.getDatastore().has(a);case 11:if(!e.sent){e.next=16;break}return e.next=15,ale();case 15:throw cd(new Error("Key '".concat(t,"' already exists")),nue.ERR_KEY_ALREADY_EXISTS);case 16:return e.prev=16,e.next=19,YU(r,n);case 19:i=e.sent,e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(16),e.next=26,ale();case 26:throw cd(new Error("Cannot read the key, most likely the password is wrong"),nue.ERR_CANNOT_READ_KEY);case 27:return e.prev=27,e.next=30,i.id();case 30:if(o=e.sent,null!=(s=Xce.get(this))){e.next=34;break}throw cd(new Error("dek missing"),nue.ERR_INVALID_PARAMETERS);case 34:return u=s.dek,e.next=37,i.export(u);case 37:r=e.sent,e.next=45;break;case 40:return e.prev=40,e.t1=e.catch(27),e.next=44,ale();case 44:throw e.t1;case 45:return c={name:t,id:o},(l=this.components.getDatastore().batch()).put(a,mm(r)),l.put(sle(t),mm(JSON.stringify(c))),e.next=51,l.commit();case 51:return e.abrupt("return",c);case 52:case"end":return e.stop()}}),e,this,[[16,22],[27,40]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"importPeer",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,nle(t)){e.next=3;break}throw cd(new Error("Invalid key name '".concat(t,"'")),nue.ERR_INVALID_KEY_NAME);case 3:if(null!=r){e.next=5;break}throw cd(new Error("PeerId is required"),nue.ERR_MISSING_PRIVATE_KEY);case 5:if(null!=r.privateKey){e.next=7;break}throw cd(new Error("PeerId.privKey is required"),nue.ERR_MISSING_PRIVATE_KEY);case 7:return e.next=9,HU(r.privateKey);case 9:return n=e.sent,a=ole(t),e.next=13,this.components.getDatastore().has(a);case 13:if(!e.sent){e.next=18;break}return e.next=17,ale();case 17:throw cd(new Error("Key '".concat(t,"' already exists")),nue.ERR_KEY_ALREADY_EXISTS);case 18:if(null!=(i=Xce.get(this))){e.next=21;break}throw cd(new Error("dek missing"),nue.ERR_INVALID_PARAMETERS);case 21:return o=i.dek,e.next=24,n.export(o);case 24:return s=e.sent,u={name:t,id:r.toString()},(c=this.components.getDatastore().batch()).put(a,mm(s)),c.put(sle(t),mm(JSON.stringify(u))),e.next=31,c.commit();case 31:return e.abrupt("return",u);case 34:return e.prev=34,e.t0=e.catch(0),e.next=38,ale();case 38:throw e.t0;case 39:case"end":return e.stop()}}),e,this,[[0,34]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getPrivateKey",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nle(t)){e.next=4;break}return e.next=3,ale();case 3:throw cd(new Error("Invalid key name '".concat(t,"'")),nue.ERR_INVALID_KEY_NAME);case 4:return e.prev=4,r=ole(t),e.next=8,this.components.getDatastore().get(r);case 8:return n=e.sent,e.abrupt("return",uN(n));case 12:return e.prev=12,e.t0=e.catch(4),e.next=16,ale();case 16:throw Qce.error(e.t0),cd(new Error("Key '".concat(t,"' does not exist.")),nue.ERR_KEY_NOT_FOUND);case 18:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"rotateKeychainPass",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t){e.next=4;break}return e.next=3,ale();case 3:throw cd(new Error("Invalid old pass type '".concat(typeof t,"'")),nue.ERR_INVALID_OLD_PASS_TYPE);case 4:if("string"===typeof r){e.next=8;break}return e.next=7,ale();case 7:throw cd(new Error("Invalid new pass type '".concat(typeof r,"'")),nue.ERR_INVALID_NEW_PASS_TYPE);case 8:if(!(r.length<20)){e.next=12;break}return e.next=11,ale();case 11:throw cd(new Error("Invalid pass length ".concat(r.length)),nue.ERR_INVALID_PASS_LENGTH);case 12:if(Qce("recreating keychain"),null!=(s=Xce.get(this))){e.next=16;break}throw cd(new Error("dek missing"),nue.ERR_INVALID_PARAMETERS);case 16:return u=s.dek,this.init.pass=r,c=null!=r&&null!=(null===(n=this.init.dek)||void 0===n?void 0:n.salt)?fee(r,this.init.dek.salt,null===(a=this.init.dek)||void 0===a?void 0:a.iterationCount,null===(i=this.init.dek)||void 0===i?void 0:i.keyLength,null===(o=this.init.dek)||void 0===o?void 0:o.hash):"",Xce.set(this,{dek:c}),e.next=22,this.listKeys();case 22:l=e.sent,f=(0,zn.Z)(l),e.prev=24,f.s();case 26:if((p=f.n()).done){e.next=47;break}return h=p.value,e.next=30,this.components.getDatastore().get(ole(h.name));case 30:return d=e.sent,v=uN(d),e.next=34,YU(v,u);case 34:return y=e.sent,b=c.toString(),e.next=38,y.export(b);case 38:return g=e.sent,m=this.components.getDatastore().batch(),w={name:h.name,id:h.id},m.put(ole(h.name),mm(g)),m.put(sle(h.name),mm(JSON.stringify(w))),e.next=45,m.commit();case 45:e.next=26;break;case 47:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(24),f.e(e.t0);case 52:return e.prev=52,f.f(),e.finish(52);case 55:Qce("keychain reconstructed");case 56:case"end":return e.stop()}}),e,this,[[24,49,52,55]])})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"generateOptions",value:function(){var e=Object.assign({},rle),t=3*Math.ceil(ele/3);return e.dek.salt=uN(nU(t),"base64"),e}},{key:"options",get:function(){return rle}}]),e}(),cle=__webpack_require__(1309),lle=50,fle=function(){function e(t){if(xn(this,e),"number"!==typeof t)throw new Error("must provide a timespan to the moving average constructor");if(t<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");this.timespan=t,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}return Sn(e,[{key:"alpha",value:function(e,t){return 1-Math.exp(-(e-t)/this.timespan)}},{key:"push",value:function(e,t){if(null!=this.previousTime){var r=this.alpha(e,this.previousTime),n=t-this.movingAverage,a=r*n;this.movingAverage=r*t+(1-r)*this.movingAverage,this.variance=(1-r)*(this.variance+n*a),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+r*n}else this.movingAverage=t;this.previousTime=e}}]),e}();function ple(e){return new fle(e)}var hle,dle=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;xn(this,r),(n=t.call(this)).enabled=e.enabled,n.queue=[],n.stats={dataReceived:0n,dataSent:0n},n.frequencyLastTime=Date.now(),n.frequencyAccumulators={},n.movingAverages={dataReceived:[],dataSent:[]},n.computeThrottleMaxQueueSize=e.computeThrottleMaxQueueSize,n.computeThrottleTimeout=e.computeThrottleTimeout,n._update=n._update.bind(Pn(n)),n.movingAverageIntervals=e.movingAverageIntervals;for(var a=0;a<e.initialCounters.length;a++){var i=e.initialCounters[a];n.stats[i]=0n,n.movingAverages[i]=[];for(var o=0;o<n.movingAverageIntervals.length;o++){var s=n.movingAverageIntervals[o];(n.movingAverages[i][s]=ple(s)).push(n.frequencyLastTime,0)}}return n}return Sn(r,[{key:"start",value:function(){this.enabled&&this.queue.length>0&&this._resetComputeTimeout()}},{key:"stop",value:function(){null!=this.timeout&&(this.timeout.clear(),this.timeout=null)}},{key:"getSnapshot",value:function(){return Object.assign({},this.stats)}},{key:"getMovingAverages",value:function(){return Object.assign({},this.movingAverages)}},{key:"push",value:function(e,t){this.queue.push([e,t,Date.now()]),this._resetComputeTimeout()}},{key:"_resetComputeTimeout",value:function(){this.timeout=Aue(this._update,this._nextTimeout())}},{key:"_nextTimeout",value:function(){var e=this.queue.length/this.computeThrottleMaxQueueSize;return Math.max(this.computeThrottleTimeout*(1-e),0)}},{key:"_update",value:function(){if(this.timeout=null,this.queue.length>0){var e,t=["",0,0],r=(0,zn.Z)(this.queue);try{for(r.s();!(e=r.n()).done;)t=e.value,this._applyOp(t)}catch(sY){r.e(sY)}finally{r.f()}this.queue=[],t.length>2&&""!==t[0]&&this._updateFrequency(t[2]),this.dispatchEvent(new g9("update",{detail:this.stats}))}}},{key:"_updateFrequency",value:function(e){var t=e-this.frequencyLastTime;this._updateFrequencyFor("dataReceived",t,e),this._updateFrequencyFor("dataSent",t,e),this.frequencyLastTime=e}},{key:"_updateFrequencyFor",value:function(e,t,r){var n,a=null!==(n=this.frequencyAccumulators[e])&&void 0!==n?n:0;this.frequencyAccumulators[e]=0;var i=a/(null!==t&&void 0!==t?t:1)*1e3,o=this.movingAverages[e];null==o&&(o=this.movingAverages[e]=[]);for(var s=this.movingAverageIntervals,u=0;u<s.length;u++){var c=s[u],l=o[c];null==l&&(l=o[c]=ple(c)),l.push(r,i)}}},{key:"_applyOp",value:function(e){var t,r=e[0],n=e[1];if("number"!==typeof n)throw new Error("invalid increment number");t=Object.prototype.hasOwnProperty.call(this.stats,r)?this.stats[r]:this.stats[r]=0n,this.stats[r]=t+BigInt(n),null==this.frequencyAccumulators[r]&&(this.frequencyAccumulators[r]=0),this.frequencyAccumulators[r]+=n}}]),r}(y9),vle=["dataReceived","dataSent"],yle={in:"dataReceived",out:"dataSent"},ble=function(){function e(t){var r;xn(this,e),this.enabled=t.enabled,this.statsInit=So(So({},t),{},{initialCounters:vle}),this.globalStats=new dle(this.statsInit),this.peerStats=new Map,this.protocolStats=new Map,this.oldPeers=tI(null!==(r=t.maxOldPeersRetention)&&void 0!==r?r:lle),this.running=!1,this._onMessage=this._onMessage.bind(this),this.systems=new Map}return Sn(e,[{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:this.running=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.running){e.next=2;break}return e.abrupt("return");case 2:this.running=!1,this.globalStats.stop(),t=(0,zn.Z)(this.peerStats.values());try{for(t.s();!(r=t.n()).done;)r.value.stop()}catch(sY){t.e(sY)}finally{t.f()}n=(0,zn.Z)(this.protocolStats.values());try{for(n.s();!(a=n.n()).done;)a.value.stop()}catch(sY){n.e(sY)}finally{n.f()}case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGlobal",value:function(){return this.globalStats}},{key:"getPeers",value:function(){return Array.from(this.peerStats.keys())}},{key:"getComponentMetrics",value:function(){return this.systems}},{key:"updateComponentMetric",value:function(e){var t=e.system,r=void 0===t?"libp2p":t,n=e.component,a=e.metric,i=e.value,o=e.label,s=e.help;this.systems.has(r)||this.systems.set(r,new Map);var u=this.systems.get(r);if(null==u)throw new Error("Unknown metric system");u.has(n)||u.set(n,new Map);var c=u.get(n);if(null==c)throw new Error("Unknown metric component");c.set(a,{label:o,help:s,calculate:"function"!==typeof i?function(){return i}:i})}},{key:"forPeer",value:function(e){var t,r=e.toString();return null!==(t=this.peerStats.get(r))&&void 0!==t?t:this.oldPeers.get(r)}},{key:"getProtocols",value:function(){return Array.from(this.protocolStats.keys())}},{key:"forProtocol",value:function(e){return this.protocolStats.get(e)}},{key:"onPeerDisconnected",value:function(e){var t=e.toString(),r=this.peerStats.get(t);null!=r&&(r.stop(),this.peerStats.delete(t),this.oldPeers.set(t,r))}},{key:"_onMessage",value:function(e){if(this.running){var t=e.remotePeer,r=e.protocol,n=e.direction,a=e.dataLength,i=yle[n],o=this.forPeer(t);if(null==o){var s=new dle(this.statsInit);this.peerStats.set(t.toString(),s),o=s}if(o.push(i,a),this.globalStats.push(i,a),null!=r){var u=this.forProtocol(r);if(null==u){var c=new dle(this.statsInit);this.protocolStats.set(r,c),u=c}u.push(i,a)}}}},{key:"updatePlaceholder",value:function(e,t){var r,n;if(this.running){var a,i,o=e.toString(),s=null!==(r=this.peerStats.get(o))&&void 0!==r?r:this.oldPeers.get(o),u=t.toString(),c=null!==(n=this.peerStats.get(u))&&void 0!==n?n:this.oldPeers.get(u),l=s;null!=c&&(i=l,(a=c).stop(),i.stop(),a.queue=[].concat((0,kn.Z)(a.queue),(0,kn.Z)(i.queue)),l=a,this.oldPeers.remove(u)),this.peerStats.delete(e.toString()),this.peerStats.set(u,l),l.start()}}},{key:"trackStream",value:function(e){var t=this,r=e.stream,n=e.remotePeer,a=e.protocol;if(this.running){var i=r.source;r.source=cle(i,(function(e){return t._onMessage({remotePeer:n,protocol:a,direction:"in",dataLength:e.byteLength})}));var o=r.sink;r.sink=function(){var e=Zh(Fh().mark((function e(r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yF(r,(function(e){return cle(e,(function(e){t._onMessage({remotePeer:n,protocol:a,direction:"out",dataLength:e.byteLength})}))}),o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}]),e}();function gle(e){return mle.apply(this,arguments)}function mle(){return mle=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return r=e.sent,e.abrupt("return",{status:"fulfilled",value:r,isFulfilled:!0,isRejected:!1});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"rejected",reason:e.t0,isFulfilled:!1,isRejected:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),mle.apply(this,arguments)}function wle(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,h9(e,t,"set"),r),r}var kle=Sn((function e(t){xn(this,e),(0,oi.Z)(this,"value",void 0),(0,oi.Z)(this,"next",void 0),this.value=t})),xle=new WeakMap,_le=new WeakMap,Ele=new WeakMap;hle=Symbol.iterator;var Sle=function(){function e(){xn(this,e),p9(this,xle,{writable:!0,value:void 0}),p9(this,_le,{writable:!0,value:void 0}),p9(this,Ele,{writable:!0,value:void 0}),this.clear()}return Sn(e,[{key:"enqueue",value:function(e){var t,r=new kle(e);d9(this,xle)?(d9(this,_le).next=r,wle(this,_le,r)):(wle(this,xle,r),wle(this,_le,r)),wle(this,Ele,(t=d9(this,Ele),t++,t))}},{key:"dequeue",value:function(){var e,t=d9(this,xle);if(t)return wle(this,xle,d9(this,xle).next),wle(this,Ele,(e=d9(this,Ele),e--,e)),t.value}},{key:"clear",value:function(){wle(this,xle,void 0),wle(this,_le,void 0),wle(this,Ele,0)}},{key:"size",get:function(){return d9(this,Ele)}},{key:hle,value:Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d9(this,xle);case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}]),e}();function Ale(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");var t=new Sle,r=0,n=function(){var e=Zh(Fh().mark((function e(n,a,i){var o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r++,o=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.apply(void 0,(0,kn.Z)(i)));case 1:case"end":return e.stop()}}),e)})))(),a(o),e.prev=3,e.next=6,o;case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:r--,t.size>0&&t.dequeue()();case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),a=function(a){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return new Promise((function(i){!function(a,i,o){t.enqueue(n.bind(void 0,a,i,o)),Zh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve();case 2:r<e&&t.size>0&&t.dequeue()();case 3:case"end":return n.stop()}}),n)})))()}(a,i,o)}))};return Object.defineProperties(a,{activeCount:{get:function(){return r}},pendingCount:{get:function(){return t.size}},clearQueue:{value:function(){t.clear()}}}),a}function Cle(e){return Tle.apply(this,arguments)}function Tle(){return Tle=Zh(Fh().mark((function e(t){var r,n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(i.length>1&&void 0!==i[1]?i[1]:{}).concurrency,n=void 0===r?Number.POSITIVE_INFINITY:r,a=Ale(n),e.abrupt("return",Promise.all(t.map((function(e){return e&&"function"===typeof e.then?gle(e):gle("function"===typeof e?a((function(){return e()})):Promise.resolve(e))}))));case 4:case"end":return e.stop()}}),e)}))),Tle.apply(this,arguments)}var Rle=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;xn(this,r),n=t.call(this);var a=e.system,i=e.component,o=e.metric,s=e.metrics;return n.system=null!==a&&void 0!==a?a:"libp2p",n.component=i,n.metric=o,n.metrics=s,n.updateComponentMetric(),n}return Sn(r,[{key:"set",value:function(e,t){return $b(Tn(r.prototype),"set",this).call(this,e,t),this.updateComponentMetric(),this}},{key:"delete",value:function(e){var t=$b(Tn(r.prototype),"delete",this).call(this,e);return this.updateComponentMetric(),t}},{key:"clear",value:function(){$b(Tn(r.prototype),"clear",this).call(this),this.updateComponentMetric()}},{key:"updateComponentMetric",value:function(){this.metrics.updateComponentMetric({system:this.system,component:this.component,metric:this.metric,value:this.size})}}]),r}(On(Map));function Ile(e){var t=e.system,r=e.component,n=e.metric,a=e.metrics;return null!=a?new Rle({system:t,component:r,metric:n,metrics:a}):new Map}var Ple,Dle=ud("libp2p:transports"),Nle=function(e){Cn(r,e);var t=Dn(r);function r(e){var n,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xn(this,r),(a=t.call(this)).components=e,a.started=!1,a.transports=new Map,a.listeners=Ile({component:"transport-manager",metric:"listeners",metrics:a.components.getMetrics()}),a.faultTolerance=null!==(n=i.faultTolerance)&&void 0!==n?n:Ple.FATAL_ALL,a}return Sn(r,[{key:"add",value:function(e){var t=e[Symbol.toStringTag];if(null==t)throw cd(new Error("Transport must have a valid tag"),nue.ERR_INVALID_KEY);if(this.transports.has(t))throw cd(new Error("There is already a transport with this tag"),nue.ERR_DUPLICATE_TRANSPORT);Dle("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.components.getAddressManager().getListenAddrs(),e.next=3,this.listen(t);case 3:this.started=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=(0,zn.Z)(this.listeners),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=16;break}a=(0,wn.Z)(n.value,2),i=a[0],o=a[1],Dle("closing listeners for %s",i);case 7:if(!(o.length>0)){e.next=14;break}if(null!=(s=o.pop())){e.next=11;break}return e.abrupt("continue",7);case 11:t.push(s.close()),e.next=7;break;case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return e.next=26,Promise.all(t);case 26:Dle("all listeners closed"),u=(0,zn.Z)(this.listeners.keys());try{for(u.s();!(c=u.n()).done;)l=c.value,this.listeners.set(l,[])}catch(sY){u.e(sY)}finally{u.f()}this.started=!1;case 30:case"end":return e.stop()}}),e,this,[[2,18,21,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.transportForMultiaddr(t))){e.next=3;break}throw cd(new Error("No transport available for address ".concat(String(t))),nue.ERR_TRANSPORT_UNAVAILABLE);case 3:return e.prev=3,e.next=6,n.dial(t,So(So({},r),{},{upgrader:this.components.getUpgrader()}));case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(3),null==e.t0.code&&(e.t0.code=nue.ERR_TRANSPORT_DIAL_FAILED),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAddrs",value:function(){var e,t=[],r=(0,zn.Z)(this.listeners.values());try{for(r.s();!(e=r.n()).done;){var n,a=e.value,i=(0,zn.Z)(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;t=[].concat((0,kn.Z)(t),(0,kn.Z)(o.getAddrs()))}}catch(sY){i.e(sY)}finally{i.f()}}}catch(sY){r.e(sY)}finally{r.f()}return t}},{key:"getTransports",value:function(){return Array.of.apply(Array,(0,kn.Z)(this.transports.values()))}},{key:"transportForMultiaddr",value:function(e){var t,r=(0,zn.Z)(this.transports.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.filter([e]).length>0)return n}}catch(sY){r.e(sY)}finally{r.f()}}},{key:"listen",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!==t.length){e.next=3;break}return Dle("no addresses were provided for listening, this node is dial only"),e.abrupt("return");case 3:r=[],n=(0,zn.Z)(this.transports.entries()),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=38;break}i=(0,wn.Z)(a.value,2),o=i[0],s=i[1],u=s.filter(t),c=[],l=(0,zn.Z)(u),e.prev=12,p=Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.value,Dle("creating listener for %s on %s",o,t),r=s.createListener({upgrader:v.components.getUpgrader()}),null==(n=v.listeners.get(o))&&(n=[],v.listeners.set(o,n)),n.push(r),r.addEventListener("listening",(function(){v.dispatchEvent(new g9("listener:listening",{detail:r}))})),r.addEventListener("close",(function(){v.dispatchEvent(new g9("listener:close",{detail:r}))})),c.push(r.listen(t));case 9:case"end":return e.stop()}}),e)})),l.s();case 15:if((f=l.n()).done){e.next=19;break}return e.delegateYield(p(),"t0",17);case 17:e.next=15;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(12),l.e(e.t1);case 24:return e.prev=24,l.f(),e.finish(24);case 27:if(0!==c.length){e.next=30;break}return r.push(o),e.abrupt("continue",36);case 30:return e.next=32,Cle(c);case 32:if(h=e.sent,null!=h.find((function(e){return e.isFulfilled}))||this.faultTolerance===Ple.NO_FATAL){e.next=36;break}throw cd(new Error("Transport (".concat(o,") could not listen on any available address")),nue.ERR_NO_VALID_ADDRESSES);case 36:e.next=7;break;case 38:e.next=43;break;case 40:e.prev=40,e.t2=e.catch(5),n.e(e.t2);case 43:return e.prev=43,n.f(),e.finish(43);case 46:if(r.length!==this.transports.size){e.next=51;break}if(d="no valid addresses were provided for transports [".concat(r.join(", "),"]"),this.faultTolerance!==Ple.FATAL_ALL){e.next=50;break}throw cd(new Error(d),nue.ERR_NO_VALID_ADDRESSES);case 50:Dle("libp2p in dial mode only: ".concat(d));case 51:case"end":return e.stop()}}),e,this,[[5,40,43,46],[12,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dle("removing %s",t),n=(0,zn.Z)(null!==(r=this.listeners.get(t))&&void 0!==r?r:[]),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=10;break}return i=a.value,e.next=8,i.close();case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:this.transports.delete(t),this.listeners.delete(t);case 20:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeAll",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=(0,zn.Z)(this.transports.keys());try{for(r.s();!(n=r.n()).done;)a=n.value,t.push(this.remove(a))}catch(sY){r.e(sY)}finally{r.f()}return e.next=5,Promise.all(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(y9);!function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"}(Ple||(Ple={}));var Ole="/multistream/1.0.0",Lle=1024;function Ble(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Mle(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Ble(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ule(e){return null!=e[Symbol.asyncIterator]}var jle=function e(t){var r=t9.encodingLength(t),n=Mle(r);return t9.encode(t,n),e.bytes=r,n};function Fle(e,t){var r,n,a=Fh().mark(o),i=null!==(n=(t=null!==(r=t)&&void 0!==r?r:{}).lengthEncoder)&&void 0!==n?n:jle;function o(e){var t;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!((t=i(e.byteLength))instanceof Uint8Array)){r.next=6;break}return r.next=4,t;case 4:r.next=7;break;case 6:return r.delegateYield(t,"t0",7);case 7:if(!(e instanceof Uint8Array)){r.next=12;break}return r.next=10,e;case 10:r.next=13;break;case 12:return r.delegateYield(e,"t1",13);case 13:case"end":return r.stop()}}),a)}return Ule(e)?Kh(Fh().mark((function t(){var r,n,a,i,s,u;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=xm(e);case 4:return t.next=6,km(i.next());case 6:if(!(r=!(s=t.sent).done)){t.next=12;break}return u=s.value,t.delegateYield(JD(xm(o(u))),"t0",9);case 9:r=!1,t.next=4;break;case 12:t.next=18;break;case 14:t.prev=14,t.t1=t.catch(2),n=!0,a=t.t1;case 18:if(t.prev=18,t.prev=19,!r||null==i.return){t.next=23;break}return t.next=23,km(i.return());case 23:if(t.prev=23,!n){t.next=26;break}throw a;case 26:return t.finish(23);case 27:return t.finish(18);case 28:case"end":return t.stop()}}),t,null,[[2,14,18,28],[19,,23,27]])})))():Fh().mark((function t(){var r,n,a;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=(0,zn.Z)(e),t.prev=1,r.s();case 3:if((n=r.n()).done){t.next=8;break}return a=n.value,t.delegateYield(o(a),"t0",6);case 6:t.next=3;break;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(1),r.e(t.t1);case 13:return t.prev=13,r.f(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])}))()}jle.bytes=0,Fle.single=function(e,t){var r,n,a=null!==(n=(t=null!==(r=t)&&void 0!==r?r:{}).lengthEncoder)&&void 0!==n?n:jle;return new BK(a(e.byteLength),e)};var zle,Zle=8,qle=4194304;!function(e){e[e.LENGTH=0]="LENGTH",e[e.DATA=1]="DATA"}(zle||(zle={}));var Vle=function e(t){var r=t9.decode(t);return e.bytes=t9.encodingLength(r),r};function Kle(e,t){var r,n,a,i=Fh().mark(p),o=new BK,s=zle.LENGTH,u=-1,c=null!==(r=null===t||void 0===t?void 0:t.lengthDecoder)&&void 0!==r?r:Vle,l=null!==(n=null===t||void 0===t?void 0:t.maxLengthLength)&&void 0!==n?n:Zle,f=null!==(a=null===t||void 0===t?void 0:t.maxDataLength)&&void 0!==a?a:qle;function p(){var e,r;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o.byteLength>0)){n.next=32;break}if(s!==zle.LENGTH){n.next=21;break}if(n.prev=2,!((u=c(o))<0)){n.next=6;break}throw cd(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");case 6:if(!(u>f)){n.next=8;break}throw cd(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");case 8:e=c.bytes,o.consume(e),null!=(null===t||void 0===t?void 0:t.onLength)&&t.onLength(u),s=zle.DATA,n.next=21;break;case 14:if(n.prev=14,n.t0=n.catch(2),!(n.t0 instanceof RangeError)){n.next=20;break}if(!(o.byteLength>l)){n.next=19;break}throw cd(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");case 19:return n.abrupt("break",32);case 20:throw n.t0;case 21:if(s!==zle.DATA){n.next=30;break}if(!(o.byteLength<u)){n.next=24;break}return n.abrupt("break",32);case 24:return r=o.sublist(0,u),o.consume(u),null!=(null===t||void 0===t?void 0:t.onData)&&t.onData(r),n.next=29,r;case 29:s=zle.LENGTH;case 30:n.next=0;break;case 32:case"end":return n.stop()}}),i,null,[[2,14]])}return Ule(e)?Kh(Fh().mark((function t(){var r,n,a,i,s,u;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=xm(e);case 4:return t.next=6,km(i.next());case 6:if(!(r=!(s=t.sent).done)){t.next=13;break}return u=s.value,o.append(u),t.delegateYield(JD(xm(p())),"t0",10);case 10:r=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t1=t.catch(2),n=!0,a=t.t1;case 19:if(t.prev=19,t.prev=20,!r||null==i.return){t.next=24;break}return t.next=24,km(i.return());case 24:if(t.prev=24,!n){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(19);case 29:if(!(o.byteLength>0)){t.next=31;break}throw cd(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");case 31:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})))():Fh().mark((function t(){var r,n,a;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=(0,zn.Z)(e),t.prev=1,r.s();case 3:if((n=r.n()).done){t.next=9;break}return a=n.value,o.append(a),t.delegateYield(p(),"t0",7);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(1),r.e(t.t1);case 14:return t.prev=14,r.f(),t.finish(14);case 17:if(!(o.byteLength>0)){t.next=19;break}throw cd(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");case 19:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))()}Vle.bytes=0,Kle.fromReader=function(e,t){var r=1,n=Kh(Fh().mark((function t(){var n,a,i;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,km(e.next(r));case 4:if(n=t.sent,a=n.done,i=n.value,!0!==a){t.next=9;break}return t.abrupt("return");case 9:if(null==i){t.next=12;break}return t.next=12,i;case 12:t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(1),"ERR_UNDER_READ"!==t.t0.code){t.next=18;break}return t.abrupt("return",{done:!0,value:null});case 18:throw t.t0;case 19:return t.prev=19,r=1,t.finish(19);case 22:t.next=0;break;case 24:case"end":return t.stop()}}),t,null,[[1,14,19,22]])})))();return Kle(n,So(So({},null!==t&&void 0!==t?t:{}),{},{onLength:function(e){r=e}}))};var Hle=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=[],a=0,i=t;a<i.length;a++){var o=i[a];null==o[Symbol.asyncIterator]&&n.push(o)}return n.length===t.length?Fh().mark((function e(){var t,r,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,zn.Z)(n),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=8;break}return a=r.value,e.delegateYield(a,"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),t.e(e.t1);case 13:return e.prev=13,t.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])}))():Kh(Fh().mark((function e(){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nF({objectMode:!0}),Promise.resolve().then(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.map(function(){var e=Zh(Fh().mark((function e(t){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=xm(t);case 4:return e.next=6,o.next();case 6:if(!(n=!(s=e.sent).done)){e.next=12;break}u=s.value,r.push(u);case 9:n=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),a=!0,i=e.t0;case 18:if(e.prev=18,e.prev=19,!n||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!a){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()));case 3:r.end(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r.end(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),e.delegateYield(JD(xm(r)),"t0",3);case 3:case"end":return e.stop()}}),e)})))()};function Wle(e){if(null==e)throw new Error("Empty pipeline");if(Jle(e)){var t=e;e=function(){return t.source}}else if(Qle(e)||Yle(e)){var r=e;e=function(){return r}}for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var o=[e].concat(a);if(o.length>1&&Jle(o[o.length-1])&&(o[o.length-1]=o[o.length-1].sink),o.length>2)for(var s=1;s<o.length-1;s++)Jle(o[s])&&(o[s]=Xle(o[s]));return Gle.apply(void 0,(0,kn.Z)(o))}var Gle=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length>0;)e=r.shift()(e);return e},Yle=function(e){return null!=(null===e||void 0===e?void 0:e[Symbol.asyncIterator])},Qle=function(e){return null!=(null===e||void 0===e?void 0:e[Symbol.iterator])},Jle=function(e){return null!=e&&(null!=e.sink&&null!=e.source)},Xle=function(e){return function(t){var r=e.sink(t);if(null!=(null===r||void 0===r?void 0:r.then)){var n,a=nF({objectMode:!0});r.then((function(){a.end()}),(function(e){a.end(e)}));var i=e.source;if(Yle(i))n=function(){var e=Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(JD(xm(i)),"t0",1);case 1:a.end();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();else{if(!Qle(i))throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");n=Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(i,"t0",1);case 1:a.end();case 2:case"end":return e.stop()}}),e)}))}return Hle(a,n())}return e.source}};var $le=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},efe=$le,tfe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),rfe=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),nfe=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return ife(this,e)}}]),e}(),afe=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return ife(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),ife=function(e,t){return new afe(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},ofe=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new rfe(t,r,n),this.decoder=new nfe(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),sfe=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new ofe(t,r,n,a)},ufe=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=efe(n,r),i=a.encode,o=a.decode;return sfe({prefix:t,name:r,encode:i,decode:function(e){return tfe(o(e))}})},cfe=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return sfe({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},lfe=sfe({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),ffe=cfe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),pfe=cfe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),hfe=ufe({prefix:"9",name:"base10",alphabet:"0123456789"}),dfe=cfe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vfe=cfe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),yfe=cfe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bfe=cfe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gfe=cfe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mfe=cfe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wfe=cfe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kfe=cfe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xfe=cfe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_fe=cfe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Efe=cfe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Sfe=ufe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Afe=ufe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Cfe=ufe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Tfe=ufe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Rfe=cfe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ife=cfe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pfe=cfe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Dfe=cfe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Nfe=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Ofe=Nfe.reduce((function(e,t,r){return e[r]=t,e}),[]),Lfe=Nfe.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Bfe=sfe({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Ofe[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Lfe[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),Mfe=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Ffe;)r[n++]=255&t|Ufe,t/=128;for(;t&jfe;)r[n++]=255&t|Ufe,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Ufe=128,jfe=-128,Ffe=Math.pow(2,31);var zfe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&qfe)<<i:(n&qfe)*Math.pow(2,i),i+=7}while(n>=Zfe);return e.bytes=o-r,a},Zfe=128,qfe=127;var Vfe=Math.pow(2,7),Kfe=Math.pow(2,14),Hfe=Math.pow(2,21),Wfe=Math.pow(2,28),Gfe=Math.pow(2,35),Yfe=Math.pow(2,42),Qfe=Math.pow(2,49),Jfe=Math.pow(2,56),Xfe=Math.pow(2,63),$fe={encode:Mfe,decode:zfe,encodingLength:function(e){return e<Vfe?1:e<Kfe?2:e<Hfe?3:e<Wfe?4:e<Gfe?5:e<Yfe?6:e<Qfe?7:e<Jfe?8:e<Xfe?9:10}},epe=$fe,tpe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return epe.encode(e,t,r),t},rpe=function(e){return epe.encodingLength(e)},npe=function(e,t){var r=t.byteLength,n=rpe(e),a=n+rpe(r),i=new Uint8Array(a+r);return tpe(e,i,0),tpe(r,i,n),i.set(t,a),new ape(e,r,t,i)},ape=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),ipe=function(e){var t=e.name,r=e.code,n=e.encode;return new ope(t,r,n)},ope=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?npe(this.code,r):r.then((function(e){return npe(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),spe=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},upe=ipe({name:"sha2-256",code:18,encode:spe("SHA-256")}),cpe=ipe({name:"sha2-512",code:19,encode:spe("SHA-512")}),lpe=tfe,fpe={code:0,name:"identity",encode:lpe,digest:function(e){return npe(0,lpe(e))}},ppe="raw",hpe=85,dpe=function(e){return tfe(e)},vpe=function(e){return tfe(e)},ype=new TextEncoder,bpe=new TextDecoder,gpe="json",mpe=512,wpe=function(e){return ype.encode(JSON.stringify(e))},kpe=function(e){return JSON.parse(bpe.decode(e))},xpe=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},vr),yr),br),gr),mr),wr),kr),xr),_r),Er));So(So({},Sr),Ar);function _pe(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Epe=_pe("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),Spe=_pe("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=Mle((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Ape=So({utf8:Epe,"utf-8":Epe,hex:xpe.base16,latin1:Spe,ascii:Spe,binary:Spe},xpe);function Cpe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Ape[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):Ble(globalThis.Buffer.from(e,"utf-8"))}var Tpe=function(e){if(null!=e[Symbol.asyncIterator])return Zh(Fh().mark((function t(){var r,n,a,i,o,s;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=xm(e);case 4:return t.next=6,i.next();case 6:if(!(r=!(o=t.sent).done)){t.next=12;break}return s=o.value,t.abrupt("return",s);case 9:r=!1,t.next=4;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),n=!0,a=t.t0;case 18:if(t.prev=18,t.prev=19,!r||null==i.return){t.next=23;break}return t.next=23,i.return();case 23:if(t.prev=23,!n){t.next=26;break}throw a;case 26:return t.finish(23);case 27:return t.finish(18);case 28:return t.abrupt("return",void 0);case 29:case"end":return t.stop()}}),t,null,[[2,14,18,28],[19,,23,27]])})))();var t,r=(0,zn.Z)(e);try{for(r.s();!(t=r.n()).done;){return t.value}}catch(sY){r.e(sY)}finally{r.f()}},Rpe=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this,null!==e&&void 0!==e?e:"The operation was aborted")).type="aborted",a.code=null!==n&&void 0!==n?n:"ABORT_ERR",a}return Sn(r)}(On(Error));function Ipe(e,t,r){var n=null!==r&&void 0!==r?r:{},a=Eee(e);function i(){return i=Kh(Fh().mark((function r(){var i,o,s,u,c,l,f,p;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=function(){null!=i&&i()},t.addEventListener("abort",o);case 2:if(s=void 0,r.prev=4,!t.aborted){r.next=8;break}throw u=n.abortMessage,c=n.abortCode,new Rpe(u,c);case 8:return l=new Promise((function(e,t){i=function(){var e=n.abortMessage,r=n.abortCode;t(new Rpe(e,r))}})),r.next=11,km(Promise.race([l,a.next()]));case 11:s=r.sent,i=null,r.next=24;break;case 15:if(r.prev=15,r.t0=r.catch(4),t.removeEventListener("abort",o),(f="aborted"===r.t0.type&&t.aborted)&&null!=n.onAbort&&n.onAbort(e),"function"===typeof a.return)try{(p=a.return())instanceof Promise&&p.catch((function(e){null!=n.onReturnError&&n.onReturnError(e)}))}catch(sY){null!=n.onReturnError&&n.onReturnError(sY)}if(!f||!0!==n.returnOnAbort){r.next=23;break}return r.abrupt("return");case 23:throw r.t0;case 24:if(!0!==s.done){r.next=26;break}return r.abrupt("break",30);case 26:return r.next=28,s.value;case 28:r.next=2;break;case 30:t.removeEventListener("abort",o);case 31:case"end":return r.stop()}}),r,null,[[4,15]])}))),i.apply(this,arguments)}return function(){return i.apply(this,arguments)}()}function Ppe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Ape[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Dpe=ud("libp2p:mss"),Npe=Cpe("\n");function Ope(e){var t=new BK(e,Npe);return Fle.single(t)}function Lpe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Ope(t);!0===r.writeBytes?e.push(n.subarray()):e.push(n)}function Bpe(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new BK,i=(0,zn.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;a.append(Ope(o))}}catch(sY){i.e(sY)}finally{i.f()}!0===n.writeBytes?e.push(a.subarray()):e.push(a)}function Mpe(e,t){return Upe.apply(this,arguments)}function Upe(){return Upe=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=1,n={},(0,oi.Z)(n,Symbol.asyncIterator,(function(){return i})),(0,oi.Z)(n,"next",function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.next(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),o=i=n,null!=(null===r||void 0===r?void 0:r.signal)&&(o=Ipe(i,r.signal)),s=function(e){a=e},e.next=7,Wle(o,(function(e){return Kle(e,{onLength:s,maxDataLength:Lle})}),function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tpe(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:if(null!=(u=e.sent)&&0!==u.length){e.next=10;break}throw new gS("no buffer returned","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");case 10:if(u.get(u.byteLength-1)===Npe[0]){e.next=13;break}throw Dpe.error("Invalid mss message - missing newline - %s",u.subarray()),new gS("missing newline","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");case 13:return e.abrupt("return",u.sublist(0,-1));case 14:case"end":return e.stop()}}),e)}))),Upe.apply(this,arguments)}function jpe(e,t){return Fpe.apply(this,arguments)}function Fpe(){return Fpe=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mpe(t,r);case 2:return n=e.sent,e.abrupt("return",Ppe(n.subarray()));case 4:case"end":return e.stop()}}),e)}))),Fpe.apply(this,arguments)}var zpe=ud("libp2p:mss:select");function Zpe(e,t){return qpe.apply(this,arguments)}function qpe(){return qpe=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h,d,v,y,b=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>2&&void 0!==b[2]?b[2]:{},r=Array.isArray(r)?(0,kn.Z)(r):[r],a=Que(t),i=a.reader,o=a.writer,s=a.rest,u=a.stream,null!=(c=r.shift())){e.next=6;break}throw new Error("At least one protocol must be specified");case 6:return zpe.trace('select: write ["%s", "%s"]',Ole,c),l=Cpe(Ole),f=Cpe(c),Bpe(o,[l,f],n),e.next=12,jpe(i,n);case 12:if(p=e.sent,zpe.trace('select: read "%s"',p),p!==Ole){e.next=19;break}return e.next=17,jpe(i,n);case 17:p=e.sent,zpe.trace('select: read "%s"',p);case 19:if(p!==c){e.next=22;break}return s(),e.abrupt("return",{stream:u,protocol:c});case 22:h=(0,zn.Z)(r),e.prev=23,h.s();case 25:if((d=h.n()).done){e.next=38;break}return v=d.value,zpe.trace('select: write "%s"',v),Lpe(o,Cpe(v),n),e.next=31,jpe(i,n);case 31:if(y=e.sent,zpe.trace('select: read "%s" for "%s"',y,v),y!==v){e.next=36;break}return s(),e.abrupt("return",{stream:u,protocol:v});case 36:e.next=25;break;case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(23),h.e(e.t0);case 43:return e.prev=43,h.f(),e.finish(43);case 46:throw s(),new gS("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL");case 48:case"end":return e.stop()}}),e,null,[[23,40,43,46]])}))),qpe.apply(this,arguments)}var Vpe=ud("libp2p:mss:handle");function Kpe(e,t,r){return Hpe.apply(this,arguments)}function Hpe(){return Hpe=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Array.isArray(r)?r:[r],a=Que(t),i=a.writer,o=a.reader,s=a.rest,u=a.stream;case 2:return e.next=5,jpe(o,n);case 5:if(c=e.sent,Vpe.trace('read "%s"',c),c!==Ole){e.next=11;break}return Vpe.trace('respond with "%s" for "%s"',Ole,c),Lpe(i,Cpe(Ole),n),e.abrupt("continue",2);case 11:if(!r.includes(c)){e.next=16;break}return Lpe(i,Cpe(c),n),Vpe.trace('respond with "%s" for "%s"',c,c),s(),e.abrupt("return",{stream:u,protocol:c});case 16:if("ls"!==c){e.next=20;break}return Lpe(i,Nn(BK,(0,kn.Z)(r.map((function(e){return Ope(Cpe(e))})))),n),Vpe.trace('respond with "%s" for %s',r,c),e.abrupt("continue",2);case 20:Lpe(i,Cpe("na"),n),Vpe('respond with "na" for "%s"',c),e.next=2;break;case 24:case"end":return e.stop()}}),e)}))),Hpe.apply(this,arguments)}var Wpe=__webpack_require__(486),Gpe=Symbol.for("@libp2p/connection");var Ype=ud("libp2p:connection"),Qpe=function(e){function t(e){xn(this,t);var r=e.remoteAddr,n=e.remotePeer,a=e.newStream,i=e.close,o=e.getStreams,s=e.stat;this.id="".concat(parseInt(String(1e9*Math.random())).toString(36)).concat(Date.now()),this.remoteAddr=r,this.remotePeer=n,this.stat=So(So({},s),{},{status:Cue}),this._newStream=a,this._close=i,this._getStreams=o,this.tags=[],this._closing=!1}return Sn(t,[{key:Symbol.toStringTag,get:function(){return"Connection"}},{key:Gpe,get:function(){return!0}},{key:"streams",get:function(){return this._getStreams()}},{key:"newStream",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stat.status!==Tue){e.next=2;break}throw cd(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");case 2:if(this.stat.status!==Rue){e.next=4;break}throw cd(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");case 4:return Array.isArray(t)||(t=[t]),e.next=7,this._newStream(t,r);case 7:return(n=e.sent).stat.direction="outbound",e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addStream",value:function(e){e.stat.direction="inbound"}},{key:"removeStream",value:function(e){}},{key:"close",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stat.status!==Rue&&!this._closing){e.next=2;break}return e.abrupt("return");case 2:this.stat.status=Tue;try{this.streams.forEach((function(e){return e.close()}))}catch(sY){Ype.error(sY)}return this._closing=!0,e.next=7,this._close();case 7:this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=Rue;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}();var Jpe=ud("libp2p:registrar"),Xpe=function(){function e(t){xn(this,e),this.topologies=new Map,this.handlers=new Map,this.components=t,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onDisconnect),this.components.getPeerStore().addEventListener("change:protocols",this._onProtocolChange)}return Sn(e,[{key:"getProtocols",value:function(){return Array.from(new Set([].concat((0,kn.Z)(this.topologies.keys()),(0,kn.Z)(this.handlers.keys())))).sort()}},{key:"getHandler",value:function(e){var t=this.handlers.get(e);if(null==t)throw cd(new Error("No handler registered for protocol ".concat(e)),nue.ERR_NO_HANDLER_FOR_PROTOCOL);return t}},{key:"getTopologies",value:function(e){var t=this.topologies.get(e);return null==t?[]:(0,kn.Z)(t.values())}},{key:"handle",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.handlers.has(t)){e.next=2;break}throw cd(new Error("Handler already registered for protocol ".concat(t)),nue.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);case 2:return a=Hh.bind({ignoreUndefined:!0})({maxInboundStreams:32,maxOutboundStreams:64},n),this.handlers.set(t,{handler:r,options:a}),e.next=6,this.components.getPeerStore().protoBook.add(this.components.getPeerId(),[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"unhandle",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Array.isArray(t)?t:[t]).forEach((function(e){n.handlers.delete(e)})),e.next=4,this.components.getPeerStore().protoBook.remove(this.components.getPeerId(),r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=r)&&Boolean(i[s9])){e.next=3;break}throw Jpe.error("topology must be an instance of interfaces/topology"),cd(new Error("topology must be an instance of interfaces/topology"),nue.ERR_INVALID_PARAMETERS);case 3:return n="".concat((1e9*Math.random()).toString(36)).concat(Date.now()),null==(a=this.topologies.get(t))&&(a=new Map,this.topologies.set(t,a)),a.set(n,r),e.next=9,r.setRegistrar(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}var i}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unregister",value:function(e){var t,r=(0,zn.Z)(this.topologies.entries());try{for(r.s();!(t=r.n()).done;){var n=(0,wn.Z)(t.value,2),a=n[0],i=n[1];i.has(e)&&(i.delete(e),0===i.size&&this.topologies.delete(a))}}catch(sY){r.e(sY)}finally{r.f()}}},{key:"_onDisconnect",value:function(e){var t=this,r=e.detail;this.components.getPeerStore().protoBook.get(r.remotePeer).then((function(e){var n,a=(0,zn.Z)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.topologies.get(i);if(null!=o){var s,u=(0,zn.Z)(o.values());try{for(u.s();!(s=u.n()).done;){s.value.onDisconnect(r.remotePeer)}}catch(sY){u.e(sY)}finally{u.f()}}}}catch(sY){a.e(sY)}finally{a.f()}})).catch((function(e){Jpe.error(e)}))}},{key:"_onProtocolChange",value:function(e){var t,r=e.detail,n=r.peerId,a=r.protocols,i=r.oldProtocols,o=i.filter((function(e){return!a.includes(e)})),s=a.filter((function(e){return!i.includes(e)})),u=(0,zn.Z)(o);try{for(u.s();!(t=u.n()).done;){var c=t.value,l=this.topologies.get(c);if(null!=l){var f,p=(0,zn.Z)(l.values());try{for(p.s();!(f=p.n()).done;){f.value.onDisconnect(n)}}catch(sY){p.e(sY)}finally{p.f()}}}}catch(sY){u.e(sY)}finally{u.f()}var h,d=(0,zn.Z)(s);try{for(d.s();!(h=d.n()).done;){var v=h.value,y=this.topologies.get(v);if(null!=y){var b,g=(0,zn.Z)(y.values());try{for(g.s();!(b=g.n()).done;){var m=b.value,w=this.components.getConnectionManager().getConnections(n)[0];null!=w&&m.onConnect(n,w)}}catch(sY){g.e(sY)}finally{g.f()}}}}catch(sY){d.e(sY)}finally{d.f()}}}]),e}(),$pe=ud("libp2p:upgrader");function ehe(e,t){try{return t.getHandler(e).options.maxInboundStreams}catch(sY){if(sY.code!==nue.ERR_NO_HANDLER_FOR_PROTOCOL)throw sY}return 32}function the(e,t){try{return t.getHandler(e).options.maxOutboundStreams}catch(sY){if(sY.code!==nue.ERR_NO_HANDLER_FOR_PROTOCOL)throw sY}return 64}function rhe(e,t,r){var n=0;return r.streams.forEach((function(r){r.stat.direction===t&&r.stat.protocol===e&&n++})),n}var nhe,ahe=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this)).components=e,a.connectionEncryption=new Map,n.connectionEncryption.forEach((function(e){a.connectionEncryption.set(e.protocol,e)})),a.muxers=new Map,n.muxers.forEach((function(e){a.muxers.set(e.protocol,e)})),a.inboundUpgradeTimeout=n.inboundUpgradeTimeout,a}return Sn(r,[{key:"upgradeInbound",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=this.components.getMetrics(),l=new wm.TimeoutController(this.inboundUpgradeTimeout);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,l.signal)}catch(g){}return e.prev=3,f=Cee(t,l.signal),t.source=f.source,t.sink=f.sink,e.next=9,this.components.getConnectionGater().denyInboundConnection(t);case 9:if(!e.sent){e.next=11;break}throw cd(new Error("The multiaddr connection is blocked by gater.acceptConnection"),nue.ERR_CONNECTION_INTERCEPTED);case 11:if(null!=c&&(p=Wpe(),s=p.setTarget,u=p.proxy,h="".concat((1e9*Math.random()).toString(36)).concat(Date.now()),s({toString:function(){return h}}),c.trackStream({stream:t,remotePeer:u})),$pe("starting the inbound connection upgrade"),d=t,null==(v=this.components.getConnectionProtector())){e.next=20;break}return $pe("protecting the inbound connection"),e.next=19,v.protect(t);case 19:d=e.sent;case 20:return e.prev=20,e.next=23,this._encryptInbound(d);case 23:return y=e.sent,r=y.conn,n=y.remotePeer,o=y.protocol,e.next=29,this.components.getConnectionGater().denyInboundEncryptedConnection(n,So(So({},d),r));case 29:if(!e.sent){e.next=31;break}throw cd(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),nue.ERR_CONNECTION_INTERCEPTED);case 31:if(!(this.muxers.size>0)){e.next=39;break}return e.next=34,this._multiplexInbound(So(So({},d),r),this.muxers);case 34:b=e.sent,i=b.muxerFactory,a=b.stream,e.next=40;break;case 39:a=r;case 40:e.next=48;break;case 42:return e.prev=42,e.t0=e.catch(20),$pe.error("Failed to upgrade inbound connection",e.t0),e.next=47,t.close(e.t0);case 47:throw e.t0;case 48:return e.next=50,this.components.getConnectionGater().denyInboundUpgradedConnection(n,So(So({},d),r));case 50:if(!e.sent){e.next=52;break}throw cd(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),nue.ERR_CONNECTION_INTERCEPTED);case 52:return null!=c&&(c.updatePlaceholder(u,n),s(n)),$pe("Successfully upgraded inbound connection"),e.abrupt("return",this._createConnection({cryptoProtocol:o,direction:"inbound",maConn:t,upgradedConn:a,muxerFactory:i,remotePeer:n}));case 55:return e.prev=55,l.clear(),e.finish(55);case 58:case"end":return e.stop()}}),e,this,[[3,,55,58],[20,42]])})));return function(t){return e.apply(this,arguments)}}()},{key:"upgradeOutbound",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=t.remoteAddr.getPeerId())){e.next=3;break}throw cd(new Error("outbound connection must have a peer id"),nue.ERR_INVALID_MULTIADDR);case 3:return n=KD(r),e.next=6,this.components.getConnectionGater().denyOutboundConnection(n,t);case 6:if(!e.sent){e.next=8;break}throw cd(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),nue.ERR_CONNECTION_INTERCEPTED);case 8:if(null!=(f=this.components.getMetrics())&&(p=Wpe(),c=p.setTarget,l=p.proxy,h="".concat((1e9*Math.random()).toString(36)).concat(Date.now()),c({toB58String:function(){return h}}),f.trackStream({stream:t,remotePeer:l})),$pe("Starting the outbound connection upgrade"),d=t,null==(v=this.components.getConnectionProtector())){e.next=17;break}return e.next=16,v.protect(t);case 16:d=e.sent;case 17:return e.prev=17,e.next=20,this._encryptOutbound(d,n);case 20:return y=e.sent,a=y.conn,i=y.remotePeer,s=y.protocol,e.next=26,this.components.getConnectionGater().denyOutboundEncryptedConnection(i,So(So({},d),a));case 26:if(!e.sent){e.next=28;break}throw cd(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),nue.ERR_CONNECTION_INTERCEPTED);case 28:if(!(this.muxers.size>0)){e.next=36;break}return e.next=31,this._multiplexOutbound(So(So({},d),a),this.muxers);case 31:b=e.sent,u=b.muxerFactory,o=b.stream,e.next=37;break;case 36:o=a;case 37:e.next=45;break;case 39:return e.prev=39,e.t0=e.catch(17),$pe.error("Failed to upgrade outbound connection",e.t0),e.next=44,t.close(e.t0);case 44:throw e.t0;case 45:return e.next=47,this.components.getConnectionGater().denyOutboundUpgradedConnection(i,So(So({},d),a));case 47:if(!e.sent){e.next=49;break}throw cd(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),nue.ERR_CONNECTION_INTERCEPTED);case 49:return null!=f&&(f.updatePlaceholder(l,i),c(i)),$pe("Successfully upgraded outbound connection"),e.abrupt("return",this._createConnection({cryptoProtocol:s,direction:"outbound",maConn:t,upgradedConn:o,muxerFactory:u,remotePeer:i}));case 52:case"end":return e.stop()}}),e,this,[[17,39]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createConnection",value:function(e){var t,r,n,a,i,o=this,s=e.cryptoProtocol,u=e.direction,c=e.maConn,l=e.upgradedConn,f=e.remotePeer,p=e.muxerFactory;null!=p&&(n=p.createStreamMuxer({direction:u,onIncomingStream:function(e){null!=i&&Promise.resolve().then(Zh(Fh().mark((function t(){var r,n,a,s,c,l;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.components.getRegistrar().getProtocols(),t.next=3,Kpe(e,r);case 3:if(n=t.sent,a=n.stream,s=n.protocol,$pe("%s: incoming stream opened on %s",u,s),null!=(c=o.components.getMetrics())&&c.trackStream({stream:a,remotePeer:f,protocol:s}),null!=i){t.next=11;break}return t.abrupt("return");case 11:if(l=ehe(s,o.components.getRegistrar()),rhe(s,"inbound",i)!==l){t.next=16;break}return e.abort(cd(new Error('Too many inbound protocol streams for protocol "'.concat(s,'" - limit ').concat(l)),nue.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS)),t.abrupt("return");case 16:e.source=a.source,e.sink=a.sink,e.stat.protocol=s,o.components.getPeerStore().protoBook.add(f,[s]).catch((function(e){return $pe.error(e)})),i.addStream(e),o._onStream({connection:i,stream:e,protocol:s});case 22:case"end":return t.stop()}}),t)})))).catch((function(t){$pe.error(t),null==e.stat.timeline.close&&e.close()}))},onStreamEnd:function(e){var t;null===(t=i)||void 0===t||t.removeStream(e.id)}}),J9(n)&&n.init(this.components),a=function(){var e=Zh(Fh().mark((function e(t){var r,a,s,c,l,p,h,d,v,y=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]?y[1]:{},null!=n){e.next=3;break}throw cd(new Error("Stream is not multiplexed"),nue.ERR_MUXER_UNAVAILABLE);case 3:if($pe("%s: starting new stream on %s",u,t),a=n.newStream(),s=o.components.getMetrics(),e.prev=6,null==r.signal){$pe("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",t),c=new wm.TimeoutController(3e4),r.signal=c.signal;try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,c.signal)}catch(b){}}return e.next=10,Zpe(a,t,r);case 10:if(l=e.sent,p=l.stream,h=l.protocol,null!=s&&s.trackStream({stream:p,remotePeer:f,protocol:h}),d=the(h,o.components.getRegistrar()),rhe(h,"outbound",i)!==d){e.next=20;break}throw v=cd(new Error('Too many outbound protocol streams for protocol "'.concat(h,'" - limit ').concat(d)),nue.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS),a.abort(v),v;case 20:return o.components.getPeerStore().protoBook.add(f,[h]).catch((function(e){return $pe.error(e)})),a.source=p.source,a.sink=p.sink,a.stat.protocol=h,e.abrupt("return",a);case 27:if(e.prev=27,e.t0=e.catch(6),$pe.error("could not create new stream",e.t0),null==a.stat.timeline.close&&a.close(),null==e.t0.code){e.next=33;break}throw e.t0;case 33:throw cd(e.t0,nue.ERR_UNSUPPORTED_PROTOCOL);case 34:return e.prev=34,null!=c&&c.clear(),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[6,27,34,37]])})));return function(t){return e.apply(this,arguments)}}(),yF(l,n,l).catch($pe.error));var h=c.timeline;c.timeline=new Proxy(h,{set:function(){return null!=i&&"close"===(arguments.length<=1?void 0:arguments[1])&&null!=(arguments.length<=2?void 0:arguments[2])&&null==h.close&&Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"OPEN"!==i.stat.status){e.next=4;break}return e.next=4,i.close();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),$pe.error(e.t0);case 9:return e.prev=9,o.dispatchEvent(new g9("connectionEnd",{detail:i})),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))().catch((function(e){$pe.error(e)})),Reflect.set.apply(Reflect,arguments)}}),c.timeline.upgraded=Date.now();var d,v=function(){throw cd(new Error("connection is not multiplexed"),nue.ERR_CONNECTION_NOT_MULTIPLEXED)};return d={remoteAddr:c.remoteAddr,remotePeer:f,stat:{status:"OPEN",direction:u,timeline:c.timeline,multiplexer:null===(t=n)||void 0===t?void 0:t.protocol,encryption:s},newStream:null!==(r=a)&&void 0!==r?r:v,getStreams:function(){return null!=n?n.streams:v()},close:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.close();case 2:null!=n&&n.close();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},i=new Qpe(d),this.dispatchEvent(new g9("connection",{detail:i})),i}},{key:"_onStream",value:function(e){var t=e.connection,r=e.stream,n=e.protocol;(0,this.components.getRegistrar().getHandler(n).handler)({connection:t,stream:r})}},{key:"_encryptInbound",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.from(this.connectionEncryption.keys()),$pe("handling inbound crypto protocol selection",r),e.prev=2,e.next=5,Kpe(t,r,{writeBytes:!0});case 5:if(n=e.sent,a=n.stream,i=n.protocol,null!=(o=this.connectionEncryption.get(i))){e.next=11;break}throw new Error("no crypto module found for ".concat(i));case 11:return $pe("encrypting inbound connection..."),e.t0=So,e.t1=So,e.t2={},e.next=17,o.secureInbound(this.components.getPeerId(),a);case 17:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={protocol:i},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 24:throw e.prev=24,e.t7=e.catch(2),cd(e.t7,nue.ERR_ENCRYPTION_FAILED);case 27:case"end":return e.stop()}}),e,this,[[2,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_encryptOutbound",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(this.connectionEncryption.keys()),$pe("selecting outbound crypto protocol",n),e.prev=2,e.next=5,Zpe(t,n,{writeBytes:!0});case 5:if(a=e.sent,i=a.stream,o=a.protocol,null!=(s=this.connectionEncryption.get(o))){e.next=11;break}throw new Error("no crypto module found for ".concat(o));case 11:return $pe("encrypting outbound connection to %p",r),e.t0=So,e.t1=So,e.t2={},e.next=17,s.secureOutbound(this.components.getPeerId(),i,r);case 17:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={protocol:o},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 24:throw e.prev=24,e.t7=e.catch(2),cd(e.t7,nue.ERR_ENCRYPTION_FAILED);case 27:case"end":return e.stop()}}),e,this,[[2,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_multiplexOutbound",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(r.keys()),$pe("outbound selecting muxer %s",n),e.prev=2,e.next=5,Zpe(t,n,{writeBytes:!0});case 5:return a=e.sent,i=a.stream,o=a.protocol,$pe("%s selected as muxer protocol",o),s=r.get(o),e.abrupt("return",{stream:i,muxerFactory:s});case 13:throw e.prev=13,e.t0=e.catch(2),$pe.error("error multiplexing outbound stream",e.t0),cd(e.t0,nue.ERR_MUXER_UNAVAILABLE);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_multiplexInbound",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(r.keys()),$pe("inbound handling muxers %s",n),e.prev=2,e.next=5,Kpe(t,n,{writeBytes:!0});case 5:return a=e.sent,i=a.stream,o=a.protocol,s=r.get(o),e.abrupt("return",{stream:i,muxerFactory:s});case 12:throw e.prev=12,e.t0=e.catch(2),$pe.error("error multiplexing inbound stream",e.t0),cd(e.t0,nue.ERR_MUXER_UNAVAILABLE);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(y9);!function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.protocolVersion&&(t.uint32(42),t.string(e.protocolVersion)),null!=e.agentVersion&&(t.uint32(50),t.string(e.agentVersion)),null!=e.publicKey&&(t.uint32(10),t.bytes(e.publicKey)),null==e.listenAddrs)throw new Error('Protocol error: required field "listenAddrs" was not found in object');var n,a=(0,zn.Z)(e.listenAddrs);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(18),t.bytes(i)}}catch(sY){a.e(sY)}finally{a.f()}if(null!=e.observedAddr&&(t.uint32(34),t.bytes(e.observedAddr)),null==e.protocols)throw new Error('Protocol error: required field "protocols" was not found in object');var o,s=(0,zn.Z)(e.protocols);try{for(s.s();!(o=s.n()).done;){var u=o.value;t.uint32(26),t.string(u)}}catch(sY){s.e(sY)}finally{s.f()}null!=e.signedPeerRecord&&(t.uint32(66),t.bytes(e.signedPeerRecord)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r,n,a,i,o={},s=null==t?e.len:e.pos+t;e.pos<s;){var u=e.uint32();switch(u>>>3){case 5:o.protocolVersion=e.string();break;case 6:o.agentVersion=e.string();break;case 1:o.publicKey=e.bytes();break;case 2:o.listenAddrs=null!==(r=o.listenAddrs)&&void 0!==r?r:[],o.listenAddrs.push(e.bytes());break;case 4:o.observedAddr=e.bytes();break;case 3:o.protocols=null!==(n=o.protocols)&&void 0!==n?n:[],o.protocols.push(e.string());break;case 8:o.signedPeerRecord=e.bytes();break;default:e.skipType(7&u)}}if(o.listenAddrs=null!==(a=o.listenAddrs)&&void 0!==a?a:[],o.protocols=null!==(i=o.protocols)&&void 0!==i?i:[],null==o.listenAddrs)throw new Error('Protocol error: value for required field "listenAddrs" was not found in protobuf');if(null==o.protocols)throw new Error('Protocol error: value for required field "protocols" was not found in protobuf');return o}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(nhe||(nhe={}));var ihe,ohe,she="0.0.0",uhe="js-libp2p/".concat(she),che=ud("libp2p:identify"),lhe=function(){function e(t,r){var n=this;xn(this,e),this.components=t,this.started=!1,this.init=r,this.identifyProtocolStr="/".concat(r.protocolPrefix,"/").concat("id","/").concat("1.0.0"),this.identifyPushProtocolStr="/".concat(r.protocolPrefix,"/").concat("id/push","/").concat("1.0.0"),this.host=So({protocolVersion:"".concat(r.protocolPrefix,"/").concat("0.1.0")},r.host),this.components.getConnectionManager().addEventListener("peer:connect",(function(e){var t=e.detail;n.identify(t).catch(che.error)})),this.components.getPeerStore().addEventListener("change:multiaddrs",(function(e){var t=e.detail.peerId;n.components.getPeerId().equals(t)&&n.pushToPeerStore().catch((function(e){return che.error(e)}))})),this.components.getPeerStore().addEventListener("change:protocols",(function(e){var t=e.detail.peerId;n.components.getPeerId().equals(t)&&n.pushToPeerStore().catch((function(e){return che.error(e)}))}))}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"AgentVersion",mm(this.host.agentVersion));case 4:return e.next=6,this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"ProtocolVersion",mm(this.host.protocolVersion));case 6:return e.next=8,this.components.getRegistrar().handle(this.identifyProtocolStr,(function(e){t._handleIdentify(e).catch((function(e){che.error(e)}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams});case 8:return e.next=10,this.components.getRegistrar().handle(this.identifyPushProtocolStr,(function(e){t._handlePush(e).catch((function(e){che.error(e)}))}),{maxInboundStreams:this.init.maxPushIncomingStreams,maxOutboundStreams:this.init.maxPushOutgoingStreams});case 10:this.started=!0;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(this.identifyProtocolStr);case 2:return e.next=4,this.components.getRegistrar().unhandle(this.identifyPushProtocolStr);case 4:this.started=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getPeerStore().addressBook.getRawEnvelope(this.components.getPeerId());case 2:return r=e.sent,n=this.components.getAddressManager().getAddresses().map((function(e){return e.bytes})),e.next=6,this.components.getPeerStore().protoBook.get(this.components.getPeerId());case 6:return a=e.sent,i=t.map(function(){var e=Zh(Fh().mark((function e(t){var i,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new wm.TimeoutController(o.init.timeout);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,s.signal)}catch(c){}return e.prev=2,e.next=5,t.newStream([o.identifyPushProtocolStr],{signal:s.signal});case 5:return i=e.sent,u=Cee(i,s.signal),e.next=9,yF([nhe.encode({listenAddrs:n,signedPeerRecord:r,protocols:a})],Ree(),u,OF);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),che.error("could not push identify update to peer",e.t0);case 14:return e.prev=14,null!=i&&i.close(),s.clear(),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,18]])})));return function(t){return e.apply(this,arguments)}}()),e.next=10,Promise.all(i);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pushToPeerStore",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isStarted()){e.next=2;break}return e.abrupt("return");case 2:t=[],r=(0,zn.Z)(this.components.getConnectionManager().getConnections()),e.prev=4,r.s();case 6:if((n=r.n()).done){e.next=17;break}return a=n.value,i=a.remotePeer,e.next=11,this.components.getPeerStore().get(i);case 11:if(e.sent.protocols.includes(this.identifyPushProtocolStr)){e.next=14;break}return e.abrupt("continue",15);case 14:t.push(a);case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.next=27,this.push(t);case 27:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"_identify",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=(u.length>1&&void 0!==u[1]?u[1]:{}).signal)){r=new wm.TimeoutController(this.init.timeout),n=r.signal;try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,r.signal)}catch(c){}}return e.prev=3,e.next=6,t.newStream([this.identifyProtocolStr],{signal:n});case 6:return a=e.sent,o=Cee(a,n),e.next=10,yF([],o,Oee({maxDataLength:null!==(i=this.init.maxIdentifyMessageSize)&&void 0!==i?i:8192}),function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$J(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:if(null!=(s=e.sent)){e.next=13;break}throw cd(new Error("No data could be retrieved"),nue.ERR_CONNECTION_ENDED);case 13:return e.prev=13,e.abrupt("return",nhe.decode(s));case 17:throw e.prev=17,e.t0=e.catch(13),cd(e.t0,nue.ERR_INVALID_MESSAGE);case 20:return e.prev=20,null!=r&&r.clear(),null!=a&&a.close(),e.finish(20);case 24:case"end":return e.stop()}}),e,this,[[3,,20,24],[13,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"identify",value:function(){var t=Zh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l,f,p,h,d,v=arguments;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:{},t.next=3,this._identify(r,n);case 3:if(a=t.sent,i=a.publicKey,o=a.listenAddrs,s=a.protocols,u=a.observedAddr,c=a.signedPeerRecord,l=a.agentVersion,f=a.protocolVersion,null!=i){t.next=7;break}throw cd(new Error("public key was missing from identify message"),nue.ERR_MISSING_PUBLIC_KEY);case 7:return t.next=9,WD(i);case 9:if(p=t.sent,r.remotePeer.equals(p)){t.next=12;break}throw cd(new Error("identified peer does not match the expected peer"),nue.ERR_INVALID_PEER);case 12:if(!this.components.getPeerId().equals(p)){t.next=14;break}throw cd(new Error("identified peer is our own peer id?"),nue.ERR_INVALID_PEER);case 14:if(h=e.getCleanMultiaddr(u),null==c){t.next=43;break}return che("received signed peer record from %p",p),t.prev=17,t.next=20,r9.openAndCertify(c,o9.DOMAIN);case 20:if((d=t.sent).peerId.equals(p)){t.next=23;break}throw cd(new Error("identified peer does not match the expected peer"),nue.ERR_INVALID_PEER);case 23:return t.next=25,this.components.getPeerStore().addressBook.consumePeerRecord(d);case 25:if(!t.sent){t.next=36;break}return t.next=28,this.components.getPeerStore().protoBook.set(p,s);case 28:if(null==l){t.next=31;break}return t.next=31,this.components.getPeerStore().metadataBook.setValue(p,"AgentVersion",mm(l));case 31:if(null==f){t.next=34;break}return t.next=34,this.components.getPeerStore().metadataBook.setValue(p,"ProtocolVersion",mm(f));case 34:return che("identify completed for peer %p and protocols %o",p,s),t.abrupt("return");case 36:t.next=41;break;case 38:t.prev=38,t.t0=t.catch(17),che("received invalid envelope, discard it and fallback to listenAddrs is available",t.t0);case 41:t.next=44;break;case 43:che("no signed peer record received from %p",p);case 44:return che("falling back to legacy addresses from %p",p),t.prev=45,t.next=48,this.components.getPeerStore().addressBook.set(p,o.map((function(e){return Gx(e)})));case 48:t.next=53;break;case 50:t.prev=50,t.t1=t.catch(45),che.error("received invalid addrs",t.t1);case 53:return t.next=55,this.components.getPeerStore().protoBook.set(p,s);case 55:if(null==l){t.next=58;break}return t.next=58,this.components.getPeerStore().metadataBook.setValue(p,"AgentVersion",mm(l));case 58:if(null==f){t.next=61;break}return t.next=61,this.components.getPeerStore().metadataBook.setValue(p,"ProtocolVersion",mm(f));case 61:che("identify completed for peer %p and protocols %o",p,s),che("received observed address of %s",null===h||void 0===h?void 0:h.toString());case 63:case"end":return t.stop()}}),t,this,[[17,38],[45,50]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_handleIdentify",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.connection,n=t.stream,a=new wm.TimeoutController(this.init.timeout);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,a.signal)}catch(d){}return e.prev=3,o=null!==(i=this.components.getPeerId().publicKey)&&void 0!==i?i:new Uint8Array(0),e.next=7,this.components.getPeerStore().get(this.components.getPeerId());case 7:if(s=e.sent,u=this.components.getAddressManager().getAddresses().map((function(e){return e.decapsulateCode(lx("p2p").code)})),c=s.peerRecordEnvelope,!(u.length>0&&null==c)){e.next=18;break}return l=new o9({peerId:this.components.getPeerId(),multiaddrs:u}),e.next=14,r9.seal(l,this.components.getPeerId());case 14:return f=e.sent,e.next=17,this.components.getPeerStore().addressBook.consumePeerRecord(f);case 17:c=f.marshal().subarray();case 18:return p=nhe.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:o,listenAddrs:u.map((function(e){return e.bytes})),signedPeerRecord:c,observedAddr:r.remoteAddr.bytes,protocols:s.protocols}),h=Cee(n,a.signal),e.next=22,yF([p],Ree(),h,OF);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),che.error("could not respond to identify request",e.t0);case 27:return e.prev=27,n.close(),a.clear(),e.finish(27);case 31:case"end":return e.stop()}}),e,this,[[3,24,27,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_handlePush",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.connection,n=t.stream,a=new wm.TimeoutController(this.init.timeout);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,a.signal)}catch(f){}return e.prev=3,s=Cee(n,a.signal),e.next=7,yF([],s,Oee({maxDataLength:null!==(o=this.init.maxIdentifyMessageSize)&&void 0!==o?o:8192}),function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$J(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:null!=(u=e.sent)&&(i=nhe.decode(u)),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",che.error("received invalid message",e.t0));case 14:return e.prev=14,n.close(),a.clear(),e.finish(14);case 18:if(null!=i){e.next=20;break}return e.abrupt("return",che.error("received invalid message"));case 20:if(c=r.remotePeer,!this.components.getPeerId().equals(c)){e.next=24;break}return che("received push from ourselves?"),e.abrupt("return");case 24:if(che("received push from %p",c),null==i.signedPeerRecord){e.next=48;break}return che("received signedPeerRecord in push"),e.prev=27,e.next=30,r9.openAndCertify(i.signedPeerRecord,o9.DOMAIN);case 30:return l=e.sent,e.next=33,this.components.getPeerStore().addressBook.consumePeerRecord(l);case 33:if(!e.sent){e.next=40;break}return che("consumed signedPeerRecord sent in push"),e.next=37,this.components.getPeerStore().protoBook.set(c,i.protocols);case 37:return e.abrupt("return");case 40:che("failed to consume signedPeerRecord sent in push");case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(27),che("received invalid envelope, discard it and fallback to listenAddrs is available",e.t1);case 46:e.next=49;break;case 48:che("did not receive signedPeerRecord in push");case 49:return e.prev=49,e.next=52,this.components.getPeerStore().addressBook.set(c,i.listenAddrs.map((function(e){return Gx(e)})));case 52:e.next=57;break;case 54:e.prev=54,e.t2=e.catch(49),che.error("received invalid addrs",e.t2);case 57:return e.prev=57,e.next=60,this.components.getPeerStore().protoBook.set(c,i.protocols);case 60:e.next=65;break;case 62:e.prev=62,e.t3=e.catch(57),che.error("received invalid protocols",e.t3);case 65:che("handled push from %p",c);case 66:case"end":return e.stop()}}),e,this,[[3,11,14,18],[27,43],[49,54],[57,62]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getCleanMultiaddr",value:function(e){if(null!=e&&e.length>0)try{return Gx(e)}catch(t){}}}]),e}();!function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.identifier)throw new Error('Protocol error: required field "identifier" was not found in object');t.uint32(10),t.string(e.identifier),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.identifier=e.string();else e.skipType(7&a)}if(null==r.identifier)throw new Error('Protocol error: value for required field "identifier" was not found in protobuf');return r}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(ihe||(ihe={})),function(e){var t,r;!function(e){e.OK="OK",e.NOT_FOUND="NOT_FOUND",e.ERROR="ERROR"}(e.StatusCode||(e.StatusCode={})),function(e){e[e.OK=0]="OK",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.ERROR=2]="ERROR"}(t||(t={})),function(e){e.codec=function(){return uj(t)}}(e.StatusCode||(e.StatusCode={})),e.codec=function(){return null==r&&(r=cj((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),null==t.status)throw new Error('Protocol error: required field "status" was not found in object');if(r.uint32(8),e.StatusCode.codec().encode(t.status,r),null==t.data)throw new Error('Protocol error: required field "data" was not found in object');r.uint32(18),r.bytes(t.data),!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.status=e.StatusCode.codec().decode(t);break;case 2:n.data=t.bytes();break;default:t.skipType(7&i)}}if(null==n.status)throw new Error('Protocol error: value for required field "status" was not found in protobuf');if(null==n.data)throw new Error('Protocol error: value for required field "data" was not found in protobuf');return n}))),r},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(ohe||(ohe={}));var fhe=ud("libp2p:fetch"),phe=function(){function e(t,r){var n;xn(this,e),this.started=!1,this.components=t,this.protocol="/".concat(null!==(n=r.protocolPrefix)&&void 0!==n?n:"libp2p","/").concat("fetch","/").concat("0.0.1"),this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this),this.init=r}return Sn(e,[{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().handle(this.protocol,(function(e){t.handleMessage(e).catch((function(e){fhe.error(e)})).finally((function(){e.stream.close()}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams});case 2:this.started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(this.protocol);case 2:this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"fetch",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:{},fhe("dialing %s to %p",this.protocol,t),e.next=4,this.components.getConnectionManager().openConnection(t,n);case 4:if(a=e.sent,null==(o=n.signal)){i=new wm.TimeoutController(this.init.timeout),o=i.signal;try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,i.signal)}catch(f){}}return e.prev=7,e.next=10,a.newStream([this.protocol],{signal:o});case 10:return s=e.sent,u=Cee(s,o),e.next=14,yF([ihe.encode({identifier:r})],Ree(),u,Oee(),function(){var e=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$J(t);case 2:if(null!=(r=e.sent)){e.next=5;break}throw cd(new Error("No data received"),nue.ERR_INVALID_MESSAGE);case 5:n=ohe.decode(r),e.t0=n.status,e.next=e.t0===ohe.StatusCode.OK?9:e.t0===ohe.StatusCode.NOT_FOUND?10:e.t0===ohe.StatusCode.ERROR?11:13;break;case 9:return e.abrupt("return",n.data);case 10:return e.abrupt("return",null);case 11:throw a=(new TextDecoder).decode(n.data),cd(new Error("Error in fetch protocol response: "+a),nue.ERR_INVALID_PARAMETERS);case 13:throw cd(new Error("Unknown response status"),nue.ERR_INVALID_MESSAGE);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:return c=e.sent,e.abrupt("return",null!==c&&void 0!==c?c:null);case 16:return e.prev=16,null!=i&&i.clear(),null!=s&&s.close(),e.finish(16);case 20:case"end":return e.stop()}}),e,this,[[7,,16,20]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleMessage",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stream,n=this,e.next=4,yF(r,Oee(),function(){var e=Kh(Fh().mark((function e(t){var r,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,km($J(t));case 2:if(null!=(r=e.sent)){e.next=5;break}throw cd(new Error("No data received"),nue.ERR_INVALID_MESSAGE);case 5:if(a=ihe.decode(r),null==(o=n._getLookupFunction(a.identifier))){e.next=14;break}return e.next=10,km(o(a.identifier));case 10:s=e.sent,i=null!=s?{status:ohe.StatusCode.OK,data:s}:{status:ohe.StatusCode.NOT_FOUND,data:new Uint8Array(0)},e.next=16;break;case 14:u=(new TextEncoder).encode("No lookup function registered for key: "+a.identifier),i={status:ohe.StatusCode.ERROR,data:u};case 16:return e.next=18,ohe.encode(i);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ree(),r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getLookupFunction",value:function(e){var t,r=(0,zn.Z)(this.lookupFunctions.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e.startsWith(n))return this.lookupFunctions.get(n)}}catch(sY){r.e(sY)}finally{r.f()}}},{key:"registerLookupFunction",value:function(e,t){if(this.lookupFunctions.has(e))throw cd(new Error("Fetch protocol handler for key prefix '"+e+"' already registered"),nue.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(e,t)}},{key:"unregisterLookupFunction",value:function(e,t){if(null!=t&&this.lookupFunctions.get(e)!==t)return;this.lookupFunctions.delete(e)}}]),e}(),hhe=ud("libp2p:ping"),dhe=function(){function e(t,r){xn(this,e),this.components=t,this.started=!1,this.protocol="/".concat(r.protocolPrefix,"/").concat("ping","/").concat("1.0.0"),this.init=r}return Sn(e,[{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().handle(this.protocol,this.handleMessage,{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams});case 2:this.started=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(this.protocol);case 2:this.started=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"handleMessage",value:function(e){var t=e.stream;yF(t,t).catch((function(e){hhe.error(e)}))}},{key:"ping",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},hhe("dialing %s to %p",this.protocol,t),n=Date.now(),a=nU(32),e.next=6,this.components.getConnectionManager().openConnection(t,r);case 6:if(i=e.sent,null==(s=r.signal)){o=new wm.TimeoutController(this.init.timeout),s=o.signal;try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,o.signal)}catch(h){}}return e.prev=9,e.next=12,i.newStream([this.protocol],{signal:s});case 12:return u=e.sent,c=Cee(u,s),e.next=16,yF([a],c,function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$J(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:if(l=e.sent,f=Date.now(),null!=l&&cN(a,l.subarray())){e.next=20;break}throw cd(new Error("Received wrong ping ack"),nue.ERR_WRONG_PING_ACK);case 20:return e.abrupt("return",f-n);case 21:return e.prev=21,null!=o&&o.clear(),null!=u&&u.close(),e.finish(21);case 25:case"end":return e.stop()}}),e,this,[[9,,21,25]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function vhe(){return yhe.apply(this,arguments)}function yhe(){return(yhe=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not supported in browsers");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bhe=__webpack_require__(2193),ghe="object"===typeof window&&"object"===typeof document&&9===document.nodeType,mhe=bhe(),whe=ghe&&!mhe,khe=mhe&&!ghe,xhe=mhe&&ghe,_he="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!mhe,Ehe="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,She=("undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env.NODE_ENV,"undefined"!==typeof navigator&&"ReactNative"===navigator.product),Ahe=__webpack_require__(3931);function Che(e){var t,r=e.nodeAddress().address;return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t=r)||/^::1$/.test(t)}var The=ud("libp2p:nat"),Rhe=7200;function Ihe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65535;return Math.floor(Math.random()*(t-e+1)+e)}var Phe=function(){function e(t,r){var n,a,i;if(xn(this,e),this.components=t,this.started=!1,this.enabled=r.enabled,this.externalAddress=r.externalAddress,this.localAddress=r.localAddress,this.description=null!==(n=r.description)&&void 0!==n?n:"".concat("libp2p","@").concat(she," ").concat(this.components.getPeerId().toString()),this.ttl=null!==(a=r.ttl)&&void 0!==a?a:Rhe,this.keepAlive=null===(i=r.keepAlive)||void 0===i||i,this.gateway=r.gateway,this.ttl<Rhe)throw cd(new Error("NatManager ttl should be at least ".concat(Rhe," seconds")),nue.ERR_INVALID_PARAMETERS)}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){}},{key:"afterStart",value:function(){whe||!this.enabled||this.started||(this.started=!0,this._start().catch((function(e){The.error(e)})))}},{key:"_start",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.components.getTransportManager().getAddrs(),r=(0,zn.Z)(t),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=33;break}if(i=n.value,o=i.toOptions(),s=o.family,u=o.host,c=o.port,l=o.transport,i.isThinWaistAddress()&&"tcp"===l){e.next=9;break}return e.abrupt("continue",31);case 9:if(!Che(i)){e.next=11;break}return e.abrupt("continue",31);case 11:if(4===s){e.next=13;break}return e.abrupt("continue",31);case 13:return e.next=15,this._getClient();case 15:if(f=e.sent,null===(a=this.externalAddress)||void 0===a){e.next=20;break}e.t0=a,e.next=23;break;case 20:return e.next=22,f.externalIp();case 22:e.t0=e.sent;case 23:if(p=e.t0,!Ahe(p)){e.next=26;break}throw new Error("".concat(p," is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT"));case 26:return h=Ihe(),The("opening uPnP connection from ".concat(p,":").concat(h," to ").concat(u,":").concat(c)),e.next=30,f.map({publicPort:h,localPort:c,localAddress:this.localAddress,protocol:"TCP"===l.toUpperCase()?"TCP":"UDP"});case 30:this.components.getAddressManager().addObservedAddr(Kx({family:4,address:p,port:h},l));case 31:e.next=4;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(2),r.e(e.t1);case 38:return e.prev=38,r.f(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[2,35,38,41]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getClient",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.client){e.next=2;break}return e.abrupt("return",this.client);case 2:return e.next=4,vhe({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway});case 4:return this.client=e.sent,e.abrupt("return",this.client);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!whe&&null!=this.client){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.client.close();case 5:this.client=void 0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),The.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Dhe=ud("libp2p:peer-record-updater"),Nhe=function(){function e(t){xn(this,e),this.components=t,this.started=!1,this.update=this.update.bind(this)}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0,this.components.getTransportManager().addEventListener("listener:listening",this.update),this.components.getTransportManager().addEventListener("listener:close",this.update),this.components.getAddressManager().addEventListener("change:addresses",this.update);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,this.components.getTransportManager().removeEventListener("listener:listening",this.update),this.components.getTransportManager().removeEventListener("listener:close",this.update),this.components.getAddressManager().removeEventListener("change:addresses",this.update);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=this;Promise.resolve().then(Zh(Fh().mark((function t(){var r,n;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new o9({peerId:e.components.getPeerId(),multiaddrs:e.components.getAddressManager().getAddresses().map((function(e){return e.decapsulateCode(lx("p2p").code)}))}),t.next=3,r9.seal(r,e.components.getPeerId());case 3:return n=t.sent,t.next=6,e.components.getPeerStore().addressBook.consumePeerRecord(n);case 6:case"end":return t.stop()}}),t)})))).catch((function(e){Dhe.error("Could not update self peer record: %o",e)}))}}]),e}(),Ohe=function(){function e(t){xn(this,e),this.dht=t}return Sn(e,[{key:"findPeer",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>1&&void 0!==c[1]?c[1]:{},n=!1,a=!1,e.prev=3,o=xm(this.dht.findPeer(t,r));case 5:return e.next=7,o.next();case 7:if(!(n=!(s=e.sent).done)){e.next=14;break}if("FINAL_PEER"!==(u=s.value).name){e.next=11;break}return e.abrupt("return",u.peer);case 11:n=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==o.return){e.next=25;break}return e.next=25,o.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:throw cd(new Error(rue.NOT_FOUND),nue.ERR_NOT_FOUND);case 31:case"end":return e.stop()}}),e,this,[[3,16,20,30],[21,,25,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(t.dht.getClosestPeers(e,r));case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=14;break}if("FINAL_PEER"!==(c=u.value).name){n.next=11;break}return n.next=11,c.peer;case 11:a=!1,n.next=4;break;case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(2),i=!0,o=n.t0;case 20:if(n.prev=20,n.prev=21,!a||null==s.return){n.next=25;break}return n.next=25,km(s.return());case 25:if(n.prev=25,!i){n.next=28;break}throw o;case 28:return n.finish(25);case 29:return n.finish(20);case 30:case"end":return n.stop()}}),n,null,[[2,16,20,30],[21,,25,29]])})))()}}]),e}(),Lhe={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_NOT_FOUND:"ERR_NOT_FOUND"},Bhe=ud("libp2p:peer-store:address-book"),Mhe="change:multiaddrs";function Uhe(){return jhe.apply(this,arguments)}function jhe(){return(jhe=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fhe=function(){function e(t,r,n){xn(this,e),this.dispatchEvent=t,this.store=r,this.addressFilter=null!==n&&void 0!==n?n:Uhe}return Sn(e,[{key:"consumePeerRecord",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bhe.trace("consumePeerRecord await write lock"),e.next=3,this.store.lock.writeLock();case 3:r=e.sent,Bhe.trace("consumePeerRecord got write lock"),e.prev=5,e.prev=6,o=o9.createFromProtobuf(t.payload),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(6),Bhe.error("invalid peer record received"),e.abrupt("return",!1);case 14:if(n=o.peerId,s=o.multiaddrs,n.equals(t.peerId)){e.next=19;break}return Bhe("signing key does not match PeerId in the PeerRecord"),e.abrupt("return",!1);case 19:if(null!=s&&0!==s.length){e.next=21;break}return e.abrupt("return",!1);case 21:return e.next=23,this.store.has(n);case 23:if(!e.sent){e.next=35;break}return e.next=26,this.store.load(n);case 26:if(null==(a=e.sent).peerRecordEnvelope){e.next=35;break}return e.next=30,r9.createFromProtobuf(a.peerRecordEnvelope);case 30:if(u=e.sent,!((c=o9.createFromProtobuf(u.payload)).seqNumber>=o.seqNumber)){e.next=35;break}return Bhe("sequence number was lower or equal to existing sequence number - stored: %d received: %d",c.seqNumber,o.seqNumber),e.abrupt("return",!1);case 35:return e.next=37,zhe(n,s,this.addressFilter,!0);case 37:return l=e.sent,e.next=40,this.store.patchOrCreate(n,{addresses:l,peerRecordEnvelope:t.marshal().subarray()});case 40:i=e.sent,Bhe("stored provided peer record for %p",o.peerId);case 42:return e.prev=42,Bhe.trace("consumePeerRecord release write lock"),r(),e.finish(42);case 46:return this.dispatchEvent(new g9(Mhe,{detail:{peerId:n,multiaddrs:i.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==a?[]:a.addresses.map((function(e){return e.multiaddr}))}})),e.abrupt("return",!0);case 48:case"end":return e.stop()}}),e,this,[[5,,42,46],[6,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getRawEnvelope",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bhe.trace("getRawEnvelope await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,Bhe.trace("getRawEnvelope got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return n=e.sent,e.abrupt("return",n.peerRecordEnvelope);case 12:if(e.prev=12,e.t0=e.catch(5),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=16;break}throw e.t0;case 16:return e.prev=16,Bhe.trace("getRawEnvelope release read lock"),r(),e.finish(16);case 20:case"end":return e.stop()}}),e,this,[[5,12,16,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPeerRecord",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRawEnvelope(t);case 2:if(null!=(r=e.sent)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,r9.createFromProtobuf(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Bhe.trace("get wait for read lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,Bhe.trace("get got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.addresses);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=17;break}throw e.t0;case 17:return e.prev=17,Bhe.trace("get release read lock"),r(),e.finish(17);case 21:return e.abrupt("return",[]);case 22:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VD(t),Array.isArray(r)){e.next=4;break}throw Bhe.error("multiaddrs must be an array of Multiaddrs"),cd(new Error("multiaddrs must be an array of Multiaddrs"),Lhe.ERR_INVALID_PARAMETERS);case 4:return Bhe.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Bhe.trace("set got write lock"),a=!1,e.prev=10,e.next=13,zhe(t,r,this.addressFilter);case 13:if(0!==(s=e.sent).length){e.next=16;break}return e.abrupt("return");case 16:return e.prev=16,e.next=19,this.store.load(t);case 19:if(i=e.sent,a=!0,new Set([].concat((0,kn.Z)(s.map((function(e){return e.multiaddr.toString()}))),(0,kn.Z)(i.addresses.map((function(e){return e.multiaddr.toString()}))))).size!==i.addresses.length||s.length!==i.addresses.length){e.next=23;break}return e.abrupt("return");case 23:e.next=29;break;case 25:if(e.prev=25,e.t0=e.catch(16),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=29;break}throw e.t0;case 29:return e.next=31,this.store.patchOrCreate(t,{addresses:s});case 31:o=e.sent,Bhe("set multiaddrs for %p",t);case 33:return e.prev=33,Bhe.trace("set multiaddrs for %p",t),Bhe("set release write lock"),n(),e.finish(33);case 38:this.dispatchEvent(new g9(Mhe,{detail:{peerId:t,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==i?[]:i.addresses.map((function(e){return e.multiaddr}))}})),a||this.dispatchEvent(new g9("peer",{detail:{id:t,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),protocols:o.protocols}}));case 40:case"end":return e.stop()}}),e,this,[[10,,33,38],[16,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VD(t),Array.isArray(r)){e.next=4;break}throw Bhe.error("multiaddrs must be an array of Multiaddrs"),cd(new Error("multiaddrs must be an array of Multiaddrs"),Lhe.ERR_INVALID_PARAMETERS);case 4:return Bhe.trace("add await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Bhe.trace("add got write lock"),e.prev=9,e.next=12,zhe(t,r,this.addressFilter);case 12:if(0!==(s=e.sent).length){e.next=15;break}return e.abrupt("return");case 15:return e.prev=15,e.next=18,this.store.load(t);case 18:if(i=e.sent,a=!0,new Set([].concat((0,kn.Z)(s.map((function(e){return e.multiaddr.toString()}))),(0,kn.Z)(i.addresses.map((function(e){return e.multiaddr.toString()}))))).size!==i.addresses.length){e.next=22;break}return e.abrupt("return");case 22:e.next=28;break;case 24:if(e.prev=24,e.t0=e.catch(15),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=28;break}throw e.t0;case 28:return e.next=30,this.store.mergeOrCreate(t,{addresses:s});case 30:o=e.sent,Bhe("added multiaddrs for %p",t);case 32:return e.prev=32,Bhe.trace("set release write lock"),n(),e.finish(32);case 36:this.dispatchEvent(new g9(Mhe,{detail:{peerId:t,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),oldMultiaddrs:null==i?[]:i.addresses.map((function(e){return e.multiaddr}))}})),!0===a&&this.dispatchEvent(new g9("peer",{detail:{id:t,multiaddrs:o.addresses.map((function(e){return e.multiaddr})),protocols:o.protocols}}));case 38:case"end":return e.stop()}}),e,this,[[9,,32,36],[15,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Bhe.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,Bhe.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{addresses:[]});case 19:return e.prev=19,Bhe.trace("delete release write lock"),r(),e.finish(19);case 23:null!=n&&this.dispatchEvent(new g9(Mhe,{detail:{peerId:t,multiaddrs:[],oldMultiaddrs:null==n?[]:n.addresses.map((function(e){return e.multiaddr}))}}));case 24:case"end":return e.stop()}}),e,this,[[6,,19,23],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function zhe(e,t,r){return Zhe.apply(this,arguments)}function Zhe(){return Zhe=Zh(Fh().mark((function e(t,r,n){var a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]&&i[3],e.next=3,yF(r,(function(e){return cle(e,(function(e){if(!Hx(e))throw Bhe.error("multiaddr must be an instance of Multiaddr"),cd(new Error("multiaddr must be an instance of Multiaddr"),Lhe.ERR_INVALID_PARAMETERS)}))}),(function(e){return vz(e,function(){var e=Zh(Fh().mark((function e(r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),(function(e){return dz(e,(function(e){return{multiaddr:e,isCertified:a}}))}),function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kz(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Zhe.apply(this,arguments)}var qhe,Vhe,Khe,Hhe=ud("libp2p:peer-store:key-book"),Whe="change:pubkey",Ghe=function(){function e(t,r){xn(this,e),this.dispatchEvent=t,this.store=r}return Sn(e,[{key:"set",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VD(t),r instanceof Uint8Array){e.next=4;break}throw Hhe.error("publicKey must be an instance of Uint8Array to store data"),cd(new Error("publicKey must be an instance of PublicKey"),Lhe.ERR_INVALID_PARAMETERS);case 4:return Hhe.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Hhe.trace("set got write lock"),a=!1,e.prev=10,e.prev=11,e.next=14,this.store.load(t);case 14:if(null==(i=e.sent).pubKey||!cN(i.pubKey,r)){e.next=17;break}return e.abrupt("return");case 17:e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(11),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=23;break}throw e.t0;case 23:return e.next=25,this.store.patchOrCreate(t,{pubKey:r});case 25:a=!0;case 26:return e.prev=26,Hhe.trace("set release write lock"),n(),e.finish(26);case 30:a&&this.dispatchEvent(new g9(Whe,{detail:{peerId:t,publicKey:r,oldPublicKey:null==i?void 0:i.pubKey}}));case 31:case"end":return e.stop()}}),e,this,[[10,,26,30],[11,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Hhe.trace("get await write lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,Hhe.trace("get got write lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.pubKey);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=17;break}throw e.t0;case 17:return e.prev=17,Hhe("get release write lock"),r(),e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Hhe.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,Hhe.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{pubKey:void 0});case 19:e.next=25;break;case 21:if(e.prev=21,e.t1=e.catch(6),e.t1.code===Lhe.ERR_NOT_FOUND){e.next=25;break}throw e.t1;case 25:return e.prev=25,Hhe.trace("delete release write lock"),r(),e.finish(25);case 29:this.dispatchEvent(new g9(Whe,{detail:{peerId:t,publicKey:void 0,oldPublicKey:null==n?void 0:n.pubKey}}));case 30:case"end":return e.stop()}}),e,this,[[6,21,25,29],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Yhe=ud("libp2p:peer-store:metadata-book"),Qhe="change:metadata",Jhe=function(){function e(t,r){xn(this,e),this.dispatchEvent=t,this.store=r}return Sn(e,[{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Yhe.trace("get await read lock"),e.next=4,this.store.lock.readLock();case 4:return r=e.sent,Yhe.trace("get got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return n=e.sent,e.abrupt("return",n.metadata);case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=17;break}throw e.t0;case 17:return e.prev=17,Yhe.trace("get release read lock"),r(),e.finish(17);case 21:return e.abrupt("return",new Map);case 22:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getValue",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Yhe.trace("getValue await read lock"),e.next=4,this.store.lock.readLock();case 4:return n=e.sent,Yhe.trace("getValue got read lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return a=e.sent,e.abrupt("return",a.metadata.get(r));case 13:if(e.prev=13,e.t0=e.catch(6),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=17;break}throw e.t0;case 17:return e.prev=17,Yhe.trace("getValue release write lock"),n(),e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[6,13,17,21]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VD(t),r instanceof Map){e.next=4;break}throw Yhe.error("valid metadata must be provided to store data"),cd(new Error("valid metadata must be provided"),Lhe.ERR_INVALID_PARAMETERS);case 4:return Yhe.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Yhe.trace("set got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:a=e.sent,e.next=20;break;case 16:if(e.prev=16,e.t0=e.catch(10),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=20;break}throw e.t0;case 20:return e.next=22,this.store.mergeOrCreate(t,{metadata:r});case 22:return e.prev=22,Yhe.trace("set release write lock"),n(),e.finish(22);case 26:this.dispatchEvent(new g9(Qhe,{detail:{peerId:t,metadata:r,oldMetadata:null==a?new Map:a.metadata}}));case 27:case"end":return e.stop()}}),e,this,[[9,,22,26],[10,16]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setValue",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VD(t),"string"===typeof r&&n instanceof Uint8Array){e.next=4;break}throw Yhe.error("valid key and value must be provided to store data"),cd(new Error("valid key and value must be provided"),Lhe.ERR_INVALID_PARAMETERS);case 4:return Yhe.trace("setValue await write lock"),e.next=7,this.store.lock.writeLock();case 7:return a=e.sent,Yhe.trace("setValue got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(i=e.sent,null==(s=i.metadata.get(r))||!cN(n,s)){e.next=17;break}return e.abrupt("return");case 17:e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(10),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=23;break}throw e.t0;case 23:return e.next=25,this.store.mergeOrCreate(t,{metadata:new Map([[r,n]])});case 25:o=e.sent;case 26:return e.prev=26,Yhe.trace("setValue release write lock"),a(),e.finish(26);case 30:this.dispatchEvent(new g9(Qhe,{detail:{peerId:t,metadata:o.metadata,oldMetadata:null==i?new Map:i.metadata}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,19]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Yhe.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,Yhe.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=17;break}throw e.t0;case 17:if(null==n){e.next=20;break}return e.next=20,this.store.patch(t,{metadata:new Map});case 20:return e.prev=20,Yhe.trace("delete release write lock"),r(),e.finish(20);case 24:null!=n&&this.dispatchEvent(new g9(Qhe,{detail:{peerId:t,metadata:new Map,oldMetadata:n.metadata}}));case 25:case"end":return e.stop()}}),e,this,[[6,,20,24],[7,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteValue",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Yhe.trace("deleteValue await write lock"),e.next=4,this.store.lock.writeLock();case 4:return n=e.sent,Yhe.trace("deleteValue got write lock"),e.prev=6,e.next=9,this.store.load(t);case 9:return i=e.sent,(a=i.metadata).delete(r),e.next=14,this.store.patch(t,{metadata:a});case 14:e.next=20;break;case 16:if(e.prev=16,e.t0=e.catch(6),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=20;break}throw e.t0;case 20:return e.prev=20,Yhe.trace("deleteValue release write lock"),n(),e.finish(20);case 24:null!=a&&this.dispatchEvent(new g9(Qhe,{detail:{peerId:t,metadata:a,oldMetadata:null==i?new Map:i.metadata}}));case 25:case"end":return e.stop()}}),e,this,[[6,16,20,24]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Xhe=ud("libp2p:peer-store:proto-book"),$he="change:protocols",ede=function(){function e(t,r){xn(this,e),this.dispatchEvent=t,this.store=r}return Sn(e,[{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xhe.trace("get wait for read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,Xhe.trace("get got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return n=e.sent,e.abrupt("return",n.protocols);case 12:if(e.prev=12,e.t0=e.catch(5),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=16;break}throw e.t0;case 16:return e.prev=16,Xhe.trace("get release read lock"),r(),e.finish(16);case 20:return e.abrupt("return",[]);case 21:case"end":return e.stop()}}),e,this,[[5,12,16,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VD(t),Array.isArray(r)){e.next=4;break}throw Xhe.error("protocols must be provided to store data"),cd(new Error("protocols must be provided"),Lhe.ERR_INVALID_PARAMETERS);case 4:return Xhe.trace("set await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Xhe.trace("set got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(a=e.sent,new Set((0,kn.Z)(r)).size!==a.protocols.length){e.next=16;break}return e.abrupt("return");case 16:e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(10),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=22;break}throw e.t0;case 22:return e.next=24,this.store.patchOrCreate(t,{protocols:r});case 24:i=e.sent,Xhe("stored provided protocols for %p",t);case 26:return e.prev=26,Xhe.trace("set release write lock"),n(),e.finish(26);case 30:this.dispatchEvent(new g9($he,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VD(t),Array.isArray(r)){e.next=4;break}throw Xhe.error("protocols must be provided to store data"),cd(new Error("protocols must be provided"),Lhe.ERR_INVALID_PARAMETERS);case 4:return Xhe.trace("add await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Xhe.trace("add got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:if(a=e.sent,new Set([].concat((0,kn.Z)(a.protocols),(0,kn.Z)(r))).size!==a.protocols.length){e.next=16;break}return e.abrupt("return");case 16:e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(10),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=22;break}throw e.t0;case 22:return e.next=24,this.store.mergeOrCreate(t,{protocols:r});case 24:i=e.sent,Xhe("added provided protocols for %p",t);case 26:return e.prev=26,Xhe.trace("add release write lock"),n(),e.finish(26);case 30:this.dispatchEvent(new g9($he,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 31:case"end":return e.stop()}}),e,this,[[9,,26,30],[10,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VD(t),Array.isArray(r)){e.next=4;break}throw Xhe.error("protocols must be provided to store data"),cd(new Error("protocols must be provided"),Lhe.ERR_INVALID_PARAMETERS);case 4:return Xhe.trace("remove await write lock"),e.next=7,this.store.lock.writeLock();case 7:return n=e.sent,Xhe.trace("remove got write lock"),e.prev=9,e.prev=10,e.next=13,this.store.load(t);case 13:a=e.sent,o=new Set(a.protocols),s=(0,zn.Z)(r);try{for(s.s();!(u=s.n()).done;)c=u.value,o.delete(c)}catch(sY){s.e(sY)}finally{s.f()}if(a.protocols.length!==o.size){e.next=19;break}return e.abrupt("return");case 19:r=Array.from(o),e.next=26;break;case 22:if(e.prev=22,e.t0=e.catch(10),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=26;break}throw e.t0;case 26:return e.next=28,this.store.patchOrCreate(t,{protocols:r});case 28:i=e.sent;case 29:return e.prev=29,Xhe.trace("remove release write lock"),n(),e.finish(29);case 33:this.dispatchEvent(new g9($he,{detail:{peerId:t,protocols:i.protocols,oldProtocols:null==a?[]:a.protocols}}));case 34:case"end":return e.stop()}}),e,this,[[9,,29,33],[10,22]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=VD(t),Xhe.trace("delete await write lock"),e.next=4,this.store.lock.writeLock();case 4:return r=e.sent,Xhe.trace("delete got write lock"),e.prev=6,e.prev=7,e.next=10,this.store.load(t);case 10:n=e.sent,e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=17;break}throw e.t0;case 17:return e.next=19,this.store.patchOrCreate(t,{protocols:[]});case 19:return e.prev=19,Xhe.trace("delete release write lock"),r(),e.finish(19);case 23:null!=n&&this.dispatchEvent(new g9($he,{detail:{peerId:t,protocols:[],oldProtocols:n.protocols}}));case 24:case"end":return e.stop()}}),e,this,[[6,,19,23],[7,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();!function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.addresses)throw new Error('Protocol error: required field "addresses" was not found in object');var n,a=(0,zn.Z)(e.addresses);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(10),Vhe.codec().encode(i,t)}}catch(sY){a.e(sY)}finally{a.f()}if(null==e.protocols)throw new Error('Protocol error: required field "protocols" was not found in object');var o,s=(0,zn.Z)(e.protocols);try{for(s.s();!(o=s.n()).done;){var u=o.value;t.uint32(18),t.string(u)}}catch(sY){s.e(sY)}finally{s.f()}if(null==e.metadata)throw new Error('Protocol error: required field "metadata" was not found in object');var c,l=(0,zn.Z)(e.metadata);try{for(l.s();!(c=l.n()).done;){var f=c.value;t.uint32(26),Khe.codec().encode(f,t)}}catch(sY){l.e(sY)}finally{l.f()}null!=e.pubKey&&(t.uint32(34),t.bytes(e.pubKey)),null!=e.peerRecordEnvelope&&(t.uint32(42),t.bytes(e.peerRecordEnvelope)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={addresses:[],protocols:[],metadata:[]},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.addresses.push(Vhe.codec().decode(e,e.uint32()));break;case 2:r.protocols.push(e.string());break;case 3:r.metadata.push(Khe.codec().decode(e,e.uint32()));break;case 4:r.pubKey=e.bytes();break;case 5:r.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(qhe||(qhe={})),function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.multiaddr)throw new Error('Protocol error: required field "multiaddr" was not found in object');t.uint32(10),t.bytes(e.multiaddr),null!=e.isCertified&&(t.uint32(16),t.bool(e.isCertified)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={multiaddr:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.multiaddr=e.bytes();break;case 2:r.isCertified=e.bool();break;default:e.skipType(7&a)}}if(null==r.multiaddr)throw new Error('Protocol error: value for required field "multiaddr" was not found in protobuf');return r}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(Vhe||(Vhe={})),function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.key)throw new Error('Protocol error: required field "key" was not found in object');if(t.uint32(10),t.string(e.key),null==e.value)throw new Error('Protocol error: required field "value" was not found in object');t.uint32(18),t.bytes(e.value),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={key:"",value:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.key=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&a)}}if(null==r.key)throw new Error('Protocol error: value for required field "key" was not found in protobuf');if(null==r.value)throw new Error('Protocol error: value for required field "value" was not found in protobuf');return r}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(Khe||(Khe={}));var tde,rde,nde=ud("libp2p:peer-store:store"),ade="/peers/",ide=function(){function e(){xn(this,e),this.components=new aee,this.lock=T0({name:"peer-store",singleProcess:!0})}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"_peerIdToDatastoreKey",value:function(e){if(null==e.type)throw nde.error("peerId must be an instance of peer-id to store data"),cd(new Error("peerId must be an instance of peer-id"),Lhe.ERR_INVALID_PARAMETERS);var t=e.toCID().toString();return new LR("".concat(ade).concat(t))}},{key:"has",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getDatastore().has(this._peerIdToDatastoreKey(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getDatastore().delete(this._peerIdToDatastoreKey(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getDatastore().get(this._peerIdToDatastoreKey(t));case 2:a=e.sent,i=qhe.decode(a),o=new Map,s=(0,zn.Z)(i.metadata);try{for(s.s();!(u=s.n()).done;)c=u.value,o.set(c.key,c.value)}catch(sY){s.e(sY)}finally{s.f()}return e.abrupt("return",So(So({},i),{},{id:t,addresses:i.addresses.map((function(e){var t=e.multiaddr,r=e.isCertified;return{multiaddr:Gx(t),isCertified:null!==r&&void 0!==r&&r}})),metadata:o,pubKey:null!==(r=i.pubKey)&&void 0!==r?r:void 0,peerRecordEnvelope:null!==(n=i.peerRecordEnvelope)&&void 0!==n?n:void 0}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.pubKey||null==t.id.publicKey||cN(t.pubKey,t.id.publicKey)){e.next=3;break}throw nde.error("peer publicKey bytes do not match peer id publicKey bytes"),cd(new Error("publicKey bytes do not match peer id publicKey bytes"),Lhe.ERR_INVALID_PARAMETERS);case 3:return r=new Set,n=t.addresses.filter((function(e){return!r.has(e.multiaddr.toString())&&(r.add(e.multiaddr.toString()),!0)})).sort((function(e,t){return e.multiaddr.toString().localeCompare(t.multiaddr.toString())})).map((function(e){var t=e.multiaddr,r=e.isCertified;return{multiaddr:t.bytes,isCertified:r}})),a=[],(0,kn.Z)(t.metadata.keys()).sort().forEach((function(e){var r=t.metadata.get(e);null!=r&&a.push({key:e,value:r})})),i=qhe.encode({addresses:n,protocols:t.protocols.sort(),pubKey:t.pubKey,metadata:a,peerRecordEnvelope:t.peerRecordEnvelope}),e.next=10,this.components.getDatastore().put(this._peerIdToDatastoreKey(t.id),i.subarray());case 10:return e.next=12,this.load(t.id);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return n=e.sent,e.next=5,this._patch(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"patchOrCreate",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.load(t);case 3:n=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=10;break}throw e.t0;case 10:n={id:t,addresses:[],protocols:[],metadata:new Map};case 11:return e.next=13,this._patch(t,r,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_patch",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.save(So(So(So({},n),r),{},{id:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"merge",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return n=e.sent,e.next=5,this._merge(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mergeOrCreate",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.load(t);case 3:n=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.code===Lhe.ERR_NOT_FOUND){e.next=10;break}throw e.t0;case 10:n={id:t,addresses:[],protocols:[],metadata:new Map};case 11:return e.next=13,this._merge(t,r,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_merge",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=new Map,n.addresses.forEach((function(e){h.set(e.multiaddr.toString(),e.isCertified)})),(null!==(a=r.addresses)&&void 0!==a?a:[]).forEach((function(e){var t=e.multiaddr.toString(),r=Boolean(h.get(t))||e.isCertified;h.set(t,r)})),e.next=5,this.save({id:t,addresses:Array.from(h.entries()).map((function(e){var t=(0,wn.Z)(e,2),r=t[0],n=t[1];return{multiaddr:Gx(r),isCertified:n}})),protocols:Array.from(new Set([].concat((0,kn.Z)(null!==(i=n.protocols)&&void 0!==i?i:[]),(0,kn.Z)(null!==(o=r.protocols)&&void 0!==o?o:[])))),metadata:new Map([].concat((0,kn.Z)(null!==(s=null===(u=n.metadata)||void 0===u?void 0:u.entries())&&void 0!==s?s:[]),(0,kn.Z)(null!==(c=null===(l=r.metadata)||void 0===l?void 0:l.entries())&&void 0!==c?c:[]))),pubKey:null!==(f=r.pubKey)&&void 0!==f?f:null!=n?n.pubKey:void 0,peerRecordEnvelope:null!==(p=r.peerRecordEnvelope)&&void 0!==p?p:null!=n?n.peerRecordEnvelope:void 0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=this;return Kh(Fh().mark((function t(){var r,n,a,i,o,s,u,c;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,i=xm(e.components.getDatastore().queryKeys({prefix:ade}));case 4:return t.next=6,km(i.next());case 6:if(!(r=!(o=t.sent).done)){t.next=15;break}return s=o.value,u=s.toString().split("/")[2],c=uv.decode(u),t.next=12,e.load(HD(c));case 12:r=!1,t.next=4;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(2),n=!0,a=t.t0;case 21:if(t.prev=21,t.prev=22,!r||null==i.return){t.next=26;break}return t.next=26,km(i.return());case 26:if(t.prev=26,!n){t.next=29;break}throw a;case 29:return t.finish(26);case 30:return t.finish(21);case 31:case"end":return t.stop()}}),t,null,[[2,17,21,31],[22,,26,30]])})))()}}]),e}();!function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.tags)throw new Error('Protocol error: required field "tags" was not found in object');var n,a=(0,zn.Z)(e.tags);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.uint32(10),rde.codec().encode(i,t)}}catch(sY){a.e(sY)}finally{a.f()}!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={tags:[]},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.tags.push(rde.codec().decode(e,e.uint32()));else e.skipType(7&a)}return r}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(tde||(tde={})),function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.name)throw new Error('Protocol error: required field "name" was not found in object');t.uint32(10),t.string(e.name),null!=e.value&&(t.uint32(16),t.uint32(e.value)),null!=e.expiry&&(t.uint32(24),t.uint64(e.expiry)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={name:""},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.name=e.string();break;case 2:r.value=e.uint32();break;case 3:r.expiry=e.uint64();break;default:e.skipType(7&a)}}if(null==r.name)throw new Error('Protocol error: value for required field "name" was not found in protobuf');return r}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(rde||(rde={}));var ode=ud("libp2p:peer-store"),sde=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xn(this,r),(e=t.call(this)).components=new aee,e.store=new ide,e.addressBook=new Fhe(e.dispatchEvent.bind(Pn(e)),e.store,n.addressFilter),e.keyBook=new Ghe(e.dispatchEvent.bind(Pn(e)),e.store),e.metadataBook=new Jhe(e.dispatchEvent.bind(Pn(e)),e.store),e.protoBook=new ede(e.dispatchEvent.bind(Pn(e)),e.store),e}return Sn(r,[{key:"init",value:function(e){this.components=e,this.store.init(e)}},{key:"forEach",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ode.trace("getPeers await read lock"),e.next=3,this.store.lock.readLock();case 3:r=e.sent,ode.trace("getPeers got read lock"),e.prev=5,n=!1,a=!1,e.prev=8,o=xm(this.store.all());case 10:return e.next=12,o.next();case 12:if(!(n=!(s=e.sent).done)){e.next=20;break}if(!(u=s.value).id.equals(this.components.getPeerId())){e.next=16;break}return e.abrupt("continue",17);case 16:t(u);case 17:n=!1,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),a=!0,i=e.t0;case 26:if(e.prev=26,e.prev=27,!n||null==o.return){e.next=31;break}return e.next=31,o.return();case 31:if(e.prev=31,!a){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(26);case 36:return e.prev=36,ode.trace("getPeers release read lock"),r(),e.finish(36);case 40:case"end":return e.stop()}}),e,this,[[5,,36,40],[8,22,26,36],[27,,31,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.forEach((function(e){t.push(e)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ode.trace("delete await write lock"),e.next=3,this.store.lock.writeLock();case 3:return r=e.sent,ode.trace("delete got write lock"),e.prev=5,e.next=8,this.store.delete(t);case 8:return e.prev=8,ode.trace("delete release write lock"),r(),e.finish(8);case 12:case"end":return e.stop()}}),e,this,[[5,,8,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ode.trace("get await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,ode.trace("get got read lock"),e.prev=5,e.next=8,this.store.load(t);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,ode.trace("get release read lock"),r(),e.finish(9);case 13:case"end":return e.stop()}}),e,this,[[5,,9,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ode.trace("has await read lock"),e.next=3,this.store.lock.readLock();case 3:return r=e.sent,ode.trace("has got read lock"),e.prev=5,e.next=8,this.store.has(t);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,ode.trace("has release read lock"),r(),e.finish(9);case 13:case"end":return e.stop()}}),e,this,[[5,,9,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tagPeer",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p,h=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null!==(n=(i=h.length>2&&void 0!==h[2]?h[2]:{}).value)&&void 0!==n?n:0,s=Math.round(o),u=null!==(a=i.ttl)&&void 0!==a?a:void 0,!(s!==o||s<0||s>100)){e.next=6;break}throw cd(new Error("Tag value must be between 0-100"),"ERR_TAG_VALUE_OUT_OF_BOUNDS");case 6:return e.next=8,this.metadataBook.getValue(t,"tags");case 8:c=e.sent,l=[],null!=c&&(l=tde.decode(c).tags),f=(0,zn.Z)(l),e.prev=12,f.s();case 14:if((p=f.n()).done){e.next=20;break}if(p.value.name!==r){e.next=18;break}throw cd(new Error("Peer already tagged"),"ERR_DUPLICATE_TAG");case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),f.e(e.t0);case 25:return e.prev=25,f.f(),e.finish(25);case 28:return l.push({name:r,value:s,expiry:null==u?void 0:BigInt(Date.now()+u)}),e.next=31,this.metadataBook.setValue(t,"tags",tde.encode({tags:l}).subarray());case 31:case"end":return e.stop()}}),e,this,[[12,22,25,28]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"unTagPeer",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.metadataBook.getValue(t,"tags");case 2:return n=e.sent,a=[],null!=n&&(a=tde.decode(n).tags),a=a.filter((function(e){return e.name!==r})),e.next=8,this.metadataBook.setValue(t,"tags",tde.encode({tags:a}).subarray());case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTags",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.metadataBook.getValue(t,"tags");case 2:if(r=e.sent,n=[],null!=r&&(n=tde.decode(r).tags),a=BigInt(Date.now()),(i=n.filter((function(e){return null==e.expiry||e.expiry>a}))).length===n.length){e.next=10;break}return e.next=10,this.metadataBook.setValue(t,"tags",tde.encode({tags:i}).subarray());case 10:return e.abrupt("return",i.map((function(e){var t;return{name:e.name,value:null!==(t=e.value)&&void 0!==t?t:0}})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(y9),ude=function(){function e(t){xn(this,e),this.dht=t}return Sn(e,[{key:"provide",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OF(this.dht.provide(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(t.dht.findProviders(e,r));case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}if("PROVIDER"!==(c=u.value).name){n.next=10;break}return n.delegateYield(JD(xm(c.providers)),"t0",10);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t1=n.catch(2),i=!0,o=n.t1;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,km(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OF(this.dht.put(t,r,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=xm(this.dht.get(t,r));case 4:return e.next=6,o.next();case 6:if(!(n=!(s=e.sent).done)){e.next=13;break}if("VALUE"!==(u=s.value).name){e.next=10;break}return e.abrupt("return",u.value);case 10:n=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:throw cd(new Error("Not found"),"ERR_NOT_FOUND");case 30:case"end":return e.stop()}}),e,this,[[2,15,19,29],[20,,24,28]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),cde=ud("libp2p:dialer:auto-dialer"),lde=function(){function e(t,r){xn(this,e),this.components=t,this.enabled=r.enabled,this.minConnections=r.minConnections,this.dialTimeout=r.dialTimeout}return Sn(e,[{key:"handle",value:function(e){var t,r=e.detail;if(this.enabled&&(0===this.components.getConnectionManager().getConnections(r.id).length&&(null!==(t=this.minConnections)&&void 0!==t?t:0)>this.components.getConnectionManager().getConnections().length)){cde("auto-dialing discovered peer %p with timeout %d",r.id,this.dialTimeout);var n=new wm.TimeoutController(this.dialTimeout);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,n.signal)}catch(a){}this.components.getConnectionManager().openConnection(r.id,{signal:n.signal}).catch((function(e){cde.error("could not connect to discovered peer %p with %o",r.id,e)})).finally((function(){n.clear()}))}}}]),e}(),fde=__webpack_require__(449),pde=globalThis.fetch,hde=globalThis.Headers;globalThis.Request,globalThis.Response;function dde(e,t,r){return"".concat(e,"?name=").concat(t,"&type=").concat(r)}function vde(e,t){return yde.apply(this,arguments)}function yde(){return(yde=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pde(t,{headers:new hde({accept:"application/dns-json"}),signal:r});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bde(e,t){return"".concat(t,"_").concat(e)}var gde=Object.assign(Gh("dns-over-http-resolver"),{error:Gh("dns-over-http-resolver:error")}),mde=function(){function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(this,e),this._cache=new fde({max:null!==(t=null===a||void 0===a?void 0:a.maxCache)&&void 0!==t?t:100}),this._TXTcache=new fde({max:null!==(r=null===a||void 0===a?void 0:a.maxCache)&&void 0!==r?r:100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=null!==(n=a.request)&&void 0!==n?n:vde,this._abortControllers=[]}return Sn(e,[{key:"cancel",value:function(){this._abortControllers.forEach((function(e){return e.abort()}))}},{key:"getServers",value:function(){return this._servers}},{key:"_getShuffledServers",value:function(){for(var e=(0,kn.Z)(this._servers),t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*t),n=e[t];e[t]=e[r],e[r]=n}return e}},{key:"setServers",value:function(e){this._servers=e}},{key:"resolve",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.length>1&&void 0!==n[1]?n[1]:"A",e.t0=r,e.next="A"===e.t0?4:"AAAA"===e.t0?7:"TXT"===e.t0?10:13;break;case 4:return e.next=6,this.resolve4(t);case 6:case 9:case 12:return e.abrupt("return",e.sent);case 7:return e.next=9,this.resolve6(t);case 10:return e.next=12,this.resolveTxt(t);case 13:throw new Error("".concat(r," is not supported"));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve4",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="A",null==(n=this._cache.get(bde(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=(0,zn.Z)(this._getShuffledServers()),e.prev=6,s=Fh().mark((function e(){var n,i,s,u,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(dde(n,t,r),i.signal);case 6:return s=e.sent,u=s.Answer.map((function(e){return e.data})),l=Math.min.apply(Math,(0,kn.Z)(s.Answer.map((function(e){return e.TTL})))),c._cache.set(bde(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),gde.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((o=i.n()).done){e.next=16;break}return e.delegateYield(s(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve6",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="AAAA",null==(n=this._cache.get(bde(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=(0,zn.Z)(this._getShuffledServers()),e.prev=6,s=Fh().mark((function e(){var n,i,s,u,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(dde(n,t,r),i.signal);case 6:return s=e.sent,u=s.Answer.map((function(e){return e.data})),l=Math.min.apply(Math,(0,kn.Z)(s.Answer.map((function(e){return e.TTL})))),c._cache.set(bde(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),gde.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((o=i.n()).done){e.next=16;break}return e.delegateYield(s(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolveTxt",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="TXT",null==(n=this._TXTcache.get(bde(t,r)))){e.next=4;break}return e.abrupt("return",n);case 4:a=!1,i=(0,zn.Z)(this._getShuffledServers()),e.prev=6,s=Fh().mark((function e(){var n,i,s,u,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.value,i=new AbortController,c._abortControllers.push(i),e.prev=3,e.next=6,c._request(dde(n,t,r),i.signal);case 6:return s=e.sent,u=s.Answer.map((function(e){return[e.data.replace(/['"]+/g,"")]})),l=Math.min.apply(Math,(0,kn.Z)(s.Answer.map((function(e){return e.TTL})))),c._TXTcache.set(bde(t,r),u,{ttl:l}),e.abrupt("return",{v:u});case 13:e.prev=13,e.t0=e.catch(3),i.signal.aborted&&(a=!0),gde.error("".concat(n," could not resolve ").concat(t," record ").concat(r));case 17:return e.prev=17,c._abortControllers=c._abortControllers.filter((function(e){return e!==i})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})),i.s();case 9:if((o=i.n()).done){e.next=16;break}return e.delegateYield(s(),"t0",11);case 11:if("object"!==typeof(u=e.t0)){e.next=14;break}return e.abrupt("return",u.v);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:if(!a){e.next=26;break}throw Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});case 26:throw new Error("Could not resolve ".concat(t," record ").concat(r));case 27:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"clearCache",value:function(){this._cache.clear(),this._TXTcache.clear()}}]),e}(),wde=mde,kde=lx("dnsaddr").code;function xde(){return xde=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:{},a=new wde,null!=n.signal&&n.signal.addEventListener("abort",(function(){a.cancel()})),i=t.getPeerId(),o=null!==(r=t.stringTuples().find((function(e){return(0,wn.Z)(e,1)[0]===kde})))&&void 0!==r?r:[],s=(0,wn.Z)(o,2),null!=(u=s[1])){e.next=7;break}throw new Error("No hostname found in multiaddr");case 7:return e.next=9,a.resolveTxt("_dnsaddr.".concat(u));case 9:return c=e.sent,l=c.flat().map((function(e){return e.split("=")[1]})).filter(Boolean),null!=i&&(l=l.filter((function(e){return e.includes(i)}))),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)}))),xde.apply(this,arguments)}var _de={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:function(e){return e}},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:100,maxDialsPerPeer:4,dialTimeout:3e4,inboundUpgradeTimeout:3e4,resolvers:{dnsaddr:function(e){return xde.apply(this,arguments)}},addressSorter:Bce},connectionGater:{},transportManager:{faultTolerance:Ple.FATAL_ALL},metrics:{enabled:!1,computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:9e5,enabled:!1,ttl:18e5},hop:{enabled:!1,active:!1,timeout:3e4},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:uhe},timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1},ping:{protocolPrefix:"ipfs",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4},fetch:{protocolPrefix:"libp2p",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4}};function Ede(e){var t,r,n=Hh(_de,e);if(null==n.transports||n.transports.length<1)throw cd(new Error(rue.ERR_TRANSPORTS_REQUIRED),nue.ERR_TRANSPORTS_REQUIRED);if(null==n.connectionEncryption||0===n.connectionEncryption.length)throw cd(new Error(rue.CONN_ENCRYPTION_REQUIRED),nue.CONN_ENCRYPTION_REQUIRED);if(null===n.connectionProtector&&null!=(null===(t=globalThis.process)||void 0===t||null===(r=t.env)||void 0===r?void 0:r.LIBP2P_FORCE_PNET))throw cd(new Error(rue.ERR_PROTECTOR_REQUIRED),nue.ERR_PROTECTOR_REQUIRED);return n.identify.host.agentVersion===uhe&&(_he||khe?n.identify.host.agentVersion+=" UserAgent=".concat(globalThis.process.version):(whe||Ehe||xhe||She)&&(n.identify.host.agentVersion+=" UserAgent=".concat(globalThis.navigator.userAgent))),n}var Sde=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},Ade=Sde,Cde=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Tde=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Rde=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Pde(this,e)}}]),e}(),Ide=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return Pde(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Pde=function(e,t){return new Ide(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},Dde=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Tde(t,r,n),this.decoder=new Rde(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Nde=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new Dde(t,r,n,a)},Ode=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=Ade(n,r),i=a.encode,o=a.decode;return Nde({prefix:t,name:r,encode:i,decode:function(e){return Cde(o(e))}})},Lde=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return Nde({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},Bde=Nde({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Mde=Lde({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ude=Lde({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),jde=Ode({prefix:"9",name:"base10",alphabet:"0123456789"}),Fde=Lde({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zde=Lde({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Zde=Lde({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qde=Lde({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Vde=Lde({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kde=Lde({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Hde=Lde({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Wde=Lde({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Gde=Lde({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Yde=Lde({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qde=Lde({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Jde=Ode({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Xde=Ode({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),$de=Ode({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eve=Ode({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),tve=Lde({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rve=Lde({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nve=Lde({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ave=Lde({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ive=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),ove=ive.reduce((function(e,t,r){return e[r]=t,e}),[]),sve=ive.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var uve=Nde({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=ove[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=sve[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),cve=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=pve;)r[n++]=255&t|lve,t/=128;for(;t&fve;)r[n++]=255&t|lve,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},lve=128,fve=-128,pve=Math.pow(2,31);var hve=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&vve)<<i:(n&vve)*Math.pow(2,i),i+=7}while(n>=dve);return e.bytes=o-r,a},dve=128,vve=127;var yve=Math.pow(2,7),bve=Math.pow(2,14),gve=Math.pow(2,21),mve=Math.pow(2,28),wve=Math.pow(2,35),kve=Math.pow(2,42),xve=Math.pow(2,49),_ve=Math.pow(2,56),Eve=Math.pow(2,63),Sve={encode:cve,decode:hve,encodingLength:function(e){return e<yve?1:e<bve?2:e<gve?3:e<mve?4:e<wve?5:e<kve?6:e<xve?7:e<_ve?8:e<Eve?9:10}},Ave=Sve,Cve=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ave.encode(e,t,r),t},Tve=function(e){return Ave.encodingLength(e)},Rve=function(e,t){var r=t.byteLength,n=Tve(e),a=n+Tve(r),i=new Uint8Array(a+r);return Cve(e,i,0),Cve(r,i,n),i.set(t,a),new Ive(e,r,t,i)},Ive=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),Pve=function(e){var t=e.name,r=e.code,n=e.encode;return new Dve(t,r,n)},Dve=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?Rve(this.code,r):r.then((function(e){return Rve(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Nve=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ove=Pve({name:"sha2-256",code:18,encode:Nve("SHA-256")}),Lve=Pve({name:"sha2-512",code:19,encode:Nve("SHA-512")}),Bve=Cde,Mve={code:0,name:"identity",encode:Bve,digest:function(e){return Rve(0,Bve(e))}},Uve="raw",jve=85,Fve=function(e){return Cde(e)},zve=function(e){return Cde(e)},Zve=new TextEncoder,qve=new TextDecoder,Vve="json",Kve=512,Hve=function(e){return Zve.encode(JSON.stringify(e))},Wve=function(e){return JSON.parse(qve.decode(e))},Gve=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},Rr),Ir),Pr),Dr),Nr),Or),Lr),Br),Mr),Ur));So(So({},jr),Fr);function Yve(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?function(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Qve(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Jve=Qve("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),Xve=Qve("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=Yve((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}));So({utf8:Jve,"utf-8":Jve,hex:Gve.base16,latin1:Xve,ascii:Xve,binary:Xve},Gve);dB._configure(),pB._configure(hB),vB._configure(yB);var $ve,eye,tye=["uint64","int64","sint64","fixed64","sfixed64"];function rye(e){return function(e){var t,r=(0,zn.Z)(tye);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(){return BigInt(n.call(this).toString())}};for(r.s();!(t=r.n()).done;)n()}catch(sY){r.e(sY)}finally{r.f()}return e}(new pB(e))}function nye(){return function(e){var t,r=(0,zn.Z)(tye);try{var n=function(){var r=t.value;if(null==e[r])return"continue";var n=e[r];e[r]=function(e){return n.call(this,e.toString())}};for(r.s();!(t=r.n()).done;)n()}catch(sY){r.e(sY)}finally{r.f()}return e}(vB.create())}!function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}($ve||($ve={})),function(e){var t;e.codec=function(){return null==t&&(t=function(e,t){return function(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}("message",$ve.LENGTH_DELIMITED,e,t)}((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.id&&e.id.byteLength>0)&&(t.uint32(10),t.bytes(e.id)),null!=e.pubKey&&(t.uint32(18),t.bytes(e.pubKey)),null!=e.privKey&&(t.uint32(26),t.bytes(e.privKey)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={id:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.id=e.bytes();break;case 2:r.pubKey=e.bytes();break;case 3:r.privKey=e.bytes();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return function(e,t){var r=nye();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}(t,e.codec())},e.decode=function(t){return function(e,t){var r=rye(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}(t,e.codec())}}(eye||(eye={}));var aye=function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZU("Ed25519");case 2:return t=e.sent,e.next=5,oye(t);case 5:if("Ed25519"!==(r=e.sent).type){e.next=8;break}return e.abrupt("return",r);case 8:throw new Error('Generated unexpected PeerId type "'.concat(r.type,'"'));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),iye=function(){var e=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZU("RSA",null!==(r=null===t||void 0===t?void 0:t.bits)&&void 0!==r?r:2048);case 2:return n=e.sent,e.next=5,oye(n);case 5:if("RSA"!==(a=e.sent).type){e.next=8;break}return e.abrupt("return",a);case 8:throw new Error('Generated unexpected PeerId type "'.concat(a.type,'"'));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function oye(e){return sye.apply(this,arguments)}function sye(){return(sye=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WD(KU(t.public),GU(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uye=function(e,t){Cn(n,e);var r=Dn(n);function n(){return xn(this,n),r.apply(this,arguments)}return Sn(n,[{key:tue,get:function(){return!0}},{key:t,get:function(){return"@libp2p/dummy-dht"}},{key:"wan",get:function(){throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED)}},{key:"lan",get:function(){throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED)}},{key:"get",value:function(){throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED)}},{key:"findProviders",value:function(){throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED)}},{key:"findPeer",value:function(){throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED)}},{key:"getClosestPeers",value:function(){throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED)}},{key:"provide",value:function(){throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED)}},{key:"put",value:function(){throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED)}},{key:"getMode",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshRoutingTable",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw cd(new Error(rue.DHT_DISABLED),nue.DHT_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(y9,Symbol.toStringTag),cye=function(e){Cn(r,e);var t=Dn(r);function r(){return xn(this,r),t.apply(this,arguments)}return Sn(r,[{key:"isStarted",value:function(){return!1}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"globalSignaturePolicy",get:function(){throw cd(new Error(rue.PUBSUB_DISABLED),nue.ERR_PUBSUB_DISABLED)}},{key:"multicodecs",get:function(){throw cd(new Error(rue.PUBSUB_DISABLED),nue.ERR_PUBSUB_DISABLED)}},{key:"getPeers",value:function(){throw cd(new Error(rue.PUBSUB_DISABLED),nue.ERR_PUBSUB_DISABLED)}},{key:"getTopics",value:function(){throw cd(new Error(rue.PUBSUB_DISABLED),nue.ERR_PUBSUB_DISABLED)}},{key:"subscribe",value:function(){throw cd(new Error(rue.PUBSUB_DISABLED),nue.ERR_PUBSUB_DISABLED)}},{key:"unsubscribe",value:function(){throw cd(new Error(rue.PUBSUB_DISABLED),nue.ERR_PUBSUB_DISABLED)}},{key:"getSubscribers",value:function(){throw cd(new Error(rue.PUBSUB_DISABLED),nue.ERR_PUBSUB_DISABLED)}},{key:"publish",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw cd(new Error(rue.PUBSUB_DISABLED),nue.ERR_PUBSUB_DISABLED);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(y9),lye=__webpack_require__(9879),fye=ud("libp2p:dialer:dial-request"),pye=function(){function e(t){xn(this,e);var r=t.addrs,n=t.dialAction,a=t.dialer;this.addrs=r,this.dialer=a,this.dialAction=n}return Sn(e,[{key:"run",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l=this,f=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:{},!((r=this.dialer.getTokens(this.addrs.length)).length<1)){e.next=4;break}throw cd(new Error("No dial tokens available"),nue.ERR_NO_DIAL_TOKENS);case 4:n=new lye,a=(0,zn.Z)(r);try{for(a.s();!(i=a.n()).done;)o=i.value,n.push(o).catch((function(e){fye.error(e)}))}catch(sY){a.e(sY)}finally{a.f()}if(s=this.addrs.map((function(){var e=new AbortController;try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,e.signal)}catch(t){}return e})),null!=t.signal)try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,t.signal)}catch(p){}return u=0,c=!1,e.prev=11,e.next=14,Promise.any(this.addrs.map(function(){var e=Zh(Fh().mark((function e(a,i){var o,f,p,h;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shift();case 2:if(o=e.sent,!c){e.next=6;break}throw l.dialer.releaseToken(r.splice(r.indexOf(o),1)[0]),cd(new Error("dialAction already succeeded"),nue.ERR_ALREADY_SUCCEEDED);case 6:if(null!=(f=s[i])){e.next=9;break}throw cd(new Error("dialAction did not come with an AbortController"),nue.ERR_INVALID_PARAMETERS);case 9:return e.prev=9,h=f.signal,e.next=13,l.dialAction(a,So(So({},t),{},{signal:null!=t.signal?(0,BR.anySignal)([h,t.signal]):h}));case 13:p=e.sent,s[i]=void 0;case 15:return e.prev=15,u++,l.addrs.length-u>=r.length?n.push(o).catch((function(e){fye.error(e)})):l.dialer.releaseToken(r.splice(r.indexOf(o),1)[0]),e.finish(15);case 19:if(null!=p){e.next=23;break}throw cd(new Error("dialAction led to empty object"),nue.ERR_TRANSPORT_DIAL_FAILED);case 23:c=!0;case 24:return e.abrupt("return",p);case 25:case"end":return e.stop()}}),e,null,[[9,,15,19]])})));return function(t,r){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",e.sent);case 15:return e.prev=15,s.forEach((function(e){void 0!==e&&e.abort()})),r.forEach((function(e){return l.dialer.releaseToken(e)})),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[11,,15,19]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),hye=ud("libp2p:dialer"),dye="dialler",vye=function(){function e(t){var r,n,a,i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xn(this,e),this.started=!1,this.addressSorter=null!==(r=s.addressSorter)&&void 0!==r?r:Bce,this.maxAddrsToDial=null!==(n=s.maxAddrsToDial)&&void 0!==n?n:25,this.timeout=null!==(a=s.dialTimeout)&&void 0!==a?a:3e4,this.maxDialsPerPeer=null!==(i=s.maxDialsPerPeer)&&void 0!==i?i:4,this.tokens=(0,kn.Z)(new Array(null!==(o=s.maxParallelDials)&&void 0!==o?o:100)).map((function(e,t){return t})),this.components=t,this.pendingDials=Ile({component:dye,metric:"pending-dials",metrics:s.metrics}),this.pendingDialTargets=Ile({component:dye,metric:"pending-dial-targets",metrics:t.getMetrics()});for(var u=0,c=Object.entries(null!==(l=s.resolvers)&&void 0!==l?l:{});u<c.length;u++){var l,f=(0,wn.Z)(c[u],2),p=f[0],h=f[1];qx.set(p,h)}}return Sn(e,[{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,t=(0,zn.Z)(this.pendingDials.values());try{for(t.s();!(r=t.n()).done;){n=r.value;try{n.controller.abort()}catch(sY){hye.error(sY)}}}catch(sY){t.e(sY)}finally{t.f()}this.pendingDials.clear(),a=(0,zn.Z)(this.pendingDialTargets.values());try{for(a.s();!(i=a.n()).done;)i.value.reject(new bS("Dialer was destroyed"))}catch(sY){a.e(sY)}finally{a.f()}this.pendingDialTargets.clear();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dial",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},a=mue(t),i=a.id,o=a.multiaddrs,!this.components.getPeerId().equals(i)){e.next=4;break}throw cd(new Error("Tried to dial self"),nue.ERR_DIALED_SELF);case 4:if(hye("check multiaddrs %p",i),!(null!=o&&o.length>0)){e.next=9;break}return hye("storing multiaddrs %p",i,o),e.next=9,this.components.getPeerStore().addressBook.add(i,o);case 9:return e.next=11,this.components.getConnectionGater().denyDialPeer(i);case 11:if(!e.sent){e.next=13;break}throw cd(new Error("The dial request is blocked by gater.allowDialPeer"),nue.ERR_PEER_DIAL_INTERCEPTED);case 13:return hye("creating dial target for %p",i),e.next=16,this._createCancellableDialTarget(i,n);case 16:if(0!==(s=e.sent).addrs.length){e.next=19;break}throw cd(new Error("The dial request has no valid addresses"),nue.ERR_NO_VALID_ADDRESSES);case 19:return u=null!==(r=this.pendingDials.get(s.id))&&void 0!==r?r:this._createPendingDial(s,n),e.prev=20,e.next=23,u.promise;case 23:return c=e.sent,hye("dial succeeded to %s",s.id),e.abrupt("return",c);case 28:throw e.prev=28,e.t0=e.catch(20),hye("dial failed to %s",s.id,e.t0),u.controller.signal.aborted&&(e.t0.code=nue.ERR_TIMEOUT),hye.error(e.t0),e.t0;case 34:return e.prev=34,u.destroy(),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[20,28,34,37]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createCancellableDialTarget",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(parseInt(String(1e9*Math.random()),10).toString()).concat(Date.now()),a=new Promise((function(e,t){o.pendingDialTargets.set(n,{resolve:e,reject:t})})),e.prev=2,e.next=5,Promise.race([this._createDialTarget(t,r),a]);case 5:return i=e.sent,e.abrupt("return",i);case 7:return e.prev=7,this.pendingDialTargets.delete(n),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[2,,7,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_createDialTarget",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._resolve.bind(this),e.t0=yF,e.next=4,this.components.getPeerStore().addressBook.get(t);case 4:return e.t1=e.sent,e.t2=function(e){return vz(e,function(){var e=Zh(Fh().mark((function e(r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.components.getConnectionGater().denyDialMultiaddr(t,r.multiaddr);case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},e.t3=function(e){return jue(e,i.addressSorter)},e.t4=function(){var e=Kh(Fh().mark((function e(t){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,s=xm(t);case 4:return e.next=6,km(s.next());case 6:if(!(a=!(u=e.sent).done)){e.next=19;break}return c=u.value,e.t0=JD,e.t1=xm,e.next=12,km(n(c.multiaddr,r));case 12:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=km,e.delegateYield((0,e.t0)(e.t3,e.t4),"t5",16);case 16:a=!1,e.next=4;break;case 19:e.next=25;break;case 21:e.prev=21,e.t6=e.catch(2),i=!0,o=e.t6;case 25:if(e.prev=25,e.prev=26,!a||null==s.return){e.next=30;break}return e.next=30,km(s.return());case 30:if(e.prev=30,!i){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[2,21,25,35],[26,,30,34]])})));return function(t){return e.apply(this,arguments)}}(),e.t5=function(e){return vz(e,(function(e){return Boolean(i.components.getTransportManager().transportForMultiaddr(e))}))},e.t6=function(e){return dz(e,(function(e){return t.toString()===e.getPeerId()?e:e.encapsulate("/p2p/".concat(t.toString()))}))},e.t7=function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kz(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=13,(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5,e.t6,e.t7);case 13:if(!((a=e.sent).length>this.maxAddrsToDial)){e.next=18;break}return e.next=17,this.components.getPeerStore().delete(t);case 17:throw cd(new Error("dial with more addresses than allowed"),nue.ERR_TOO_MANY_ADDRESSES);case 18:return e.abrupt("return",{id:t.toString(),addrs:a});case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_createPendingDial",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){var e=Zh(Fh().mark((function e(r){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(null===(n=(a=i.length>1&&void 0!==i[1]?i[1]:{}).signal)||void 0===n?void 0:n.aborted)){e.next=3;break}throw cd(new Error("already aborted"),nue.ERR_ALREADY_ABORTED);case 3:return e.next=5,t.components.getTransportManager().dial(r,a).catch((function(e){throw hye.error("dial to %s failed",r,e),e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=new pye({addrs:e.addrs,dialAction:n,dialer:this}),i=new wm.TimeoutController(this.timeout),o=[i.signal];null!=r.signal&&o.push(r.signal);var s=(0,BR.anySignal)(o);try{null===vue.setMaxListeners||void 0===vue.setMaxListeners||(0,vue.setMaxListeners)(1/0,s)}catch(c){}var u={dialRequest:a,controller:i,promise:a.run(So(So({},r),{},{signal:s})),destroy:function(){i.clear(),t.pendingDials.delete(e.id)}};return this.pendingDials.set(e.id,u),u}},{key:"getTokens",value:function(e){var t=Math.min(e,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,t);return hye("%d tokens request, returning %d, %d remaining",e,t,this.tokens.length),r}},{key:"releaseToken",value:function(e){this.tokens.includes(e)||(hye("token %d released",e),this.tokens.push(e))}},{key:"_resolve",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.protoNames().includes("dnsaddr")){e.next=3;break}return e.abrupt("return",[t]);case 3:return e.next=5,this._resolveRecord(t,r);case 5:return n=e.sent,e.next=8,Promise.all(n.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o._resolve(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return a=e.sent,i=a.flat(),e.abrupt("return",i.reduce((function(e,t){return null==e.find((function(e){return e.equals(t)}))&&e.push(t),e}),[]));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_resolveRecord",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Gx(t.toString()),e.next=4,t.resolve(r);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),hye.error("multiaddr ".concat(t.toString()," could not be resolved"),e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),yye=ud("libp2p"),bye=function(e){Cn(r,e);var t=Dn(r);function r(e){var n,a,i,o,s,u,c,l;xn(this,r),(l=t.call(this)).initializables=[],l.started=!1,l.peerId=e.peerId,l.components=new aee({peerId:e.peerId,datastore:null!==(n=e.datastore)&&void 0!==n?n:new lF,connectionGater:So({denyDialPeer:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyDialMultiaddr:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundConnection:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundConnection:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundEncryptedConnection:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundEncryptedConnection:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyInboundUpgradedConnection:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),denyOutboundUpgradedConnection:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),filterMultiaddrForPeer:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e.connectionGater)}),l.components.setPeerStore(new sde(So({addressFilter:l.components.getConnectionGater().filterMultiaddrForPeer},e.peerStore))),l.services=[l.components],e.metrics.enabled&&(l.metrics=l.components.setMetrics(new ble(e.metrics))),l.peerStore=l.components.getPeerStore(),l.peerStore.addEventListener("peer",(function(e){var t=e.detail;l.dispatchEvent(new g9("peer:discovery",{detail:t}))})),null!=e.connectionProtector&&l.components.setConnectionProtector(e.connectionProtector),l.components.setUpgrader(new ahe(l.components,{connectionEncryption:(null!==(a=e.connectionEncryption)&&void 0!==a?a:[]).map((function(e){return l.configureComponent(e)})),muxers:(null!==(i=e.streamMuxers)&&void 0!==i?i:[]).map((function(e){return l.configureComponent(e)})),inboundUpgradeTimeout:e.connectionManager.inboundUpgradeTimeout})),l.components.setDialer(new vye(l.components,e.connectionManager)),l.connectionManager=l.components.setConnectionManager(new Uue(e.connectionManager)),l.registrar=l.components.setRegistrar(new Xpe(l.components)),l.components.setTransportManager(new Nle(l.components,e.transportManager)),l.components.setAddressManager(new kue(l.components,e.addresses)),l.configureComponent(new Nhe(l.components)),l.configureComponent(new Zue(l.components,{enabled:e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,autoDialInterval:e.connectionManager.autoDialInterval}));var f=ule.generateOptions();l.keychain=l.configureComponent(new ule(l.components,So(So({},f),e.keychain))),l.services.push(new Phe(l.components,e.nat)),e.transports.forEach((function(e){l.components.getTransportManager().add(l.configureComponent(e))})),null!=e.streamMuxers&&e.streamMuxers.length>0&&(l.identifyService=new lhe(l.components,So({},e.identify)),l.configureComponent(l.identifyService)),null!=e.dht?l.dht=l.components.setDHT(e.dht):l.dht=new uye,null!=e.pubsub?l.pubsub=l.components.setPubSub(e.pubsub):l.pubsub=new cye;var p=(null!==(o=e.peerRouters)&&void 0!==o?o:[]).map((function(e){return l.configureComponent(e)}));null!=e.dht&&(p.push(l.configureComponent(new Ohe(l.dht))),l.dht.addEventListener("peer",(function(e){l.onDiscoveryPeer(e)}))),l.peerRouting=l.components.setPeerRouting(l.configureComponent(new bue(l.components,So(So({},e.peerRouting),{},{routers:p}))));var h=(null!==(s=e.contentRouters)&&void 0!==s?s:[]).map((function(e){return l.configureComponent(e)}));null!=e.dht&&h.push(l.configureComponent(new ude(l.dht))),l.contentRouting=l.components.setContentRouting(l.configureComponent(new gue(l.components,{routers:h}))),e.relay.enabled&&(l.components.getTransportManager().add(l.configureComponent(new pce(e.relay))),l.configureComponent(new zce(l.components,So({addressSorter:e.connectionManager.addressSorter},e.relay)))),l.fetchService=l.configureComponent(new phe(l.components,So({},e.fetch))),l.pingService=l.configureComponent(new dhe(l.components,So({},e.ping)));var d=l.configureComponent(new lde(l.components,{enabled:!1!==e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,dialTimeout:null!==(u=e.connectionManager.dialTimeout)&&void 0!==u?u:3e4}));l.addEventListener("peer:discovery",(function(e){l.isStarted()&&d.handle(e)}));var v,y=(0,zn.Z)(null!==(c=e.peerDiscovery)&&void 0!==c?c:[]);try{for(y.s();!(v=y.n()).done;){var b=v.value;l.configureComponent(b),b.addEventListener("peer",(function(e){l.onDiscoveryPeer(e)}))}}catch(sY){y.e(sY)}finally{y.f()}return l}return Sn(r,[{key:"configureComponent",value:function(e){return Q9(e)&&this.services.push(e),J9(e)&&this.initializables.push(e),e}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:return this.started=!0,yye("libp2p is starting"),e.prev=4,this.initializables.forEach((function(e){e.init(t.components)})),e.next=8,Promise.all(this.services.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStart){e.next=3;break}return e.next=3,t.beforeStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.next=10,Promise.all(this.services.map((function(e){return e.start()})));case 10:return e.next=12,Promise.all(this.services.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStart){e.next=3;break}return e.next=3,t.afterStart();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:yye("libp2p has started"),e.next=21;break;case 15:return e.prev=15,e.t0=e.catch(4),yye.error("An error occurred starting libp2p",e.t0),e.next=20,this.stop();case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.started){e.next=2;break}return e.abrupt("return");case 2:return yye("libp2p is stopping"),this.started=!1,e.next=6,Promise.all(this.services.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.beforeStop){e.next=3;break}return e.next=3,t.beforeStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.next=8,Promise.all(this.services.map((function(e){return e.stop()})));case 8:return e.next=10,Promise.all(this.services.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.afterStop){e.next=3;break}return e.next=3,t.afterStop();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:yye("libp2p has stopped");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.started}},{key:"getConnections",value:function(e){return this.components.getConnectionManager().getConnections(e)}},{key:"getPeers",value:function(){var e,t=new Nue,r=(0,zn.Z)(this.components.getConnectionManager().getConnections());try{for(r.s();!(e=r.n()).done;){var n=e.value;t.add(n.remotePeer)}}catch(sY){r.e(sY)}finally{r.f()}return Array.from(t)}},{key:"dial",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=mue(t),a=n.id,i=n.multiaddrs,e.next=4,this.components.getPeerStore().addressBook.add(a,i);case 4:return e.next=6,this.components.getConnectionManager().openConnection(a,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dialProtocol",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:{},null!=r){e.next=3;break}throw cd(new Error("no protocols were provided to open a stream"),nue.ERR_INVALID_PROTOCOLS_FOR_STREAM);case 3:if(0!==(r=Array.isArray(r)?r:[r]).length){e.next=6;break}throw cd(new Error("no protocols were provided to open a stream"),nue.ERR_INVALID_PROTOCOLS_FOR_STREAM);case 6:return e.next=8,this.dial(t,n);case 8:return a=e.sent,e.next=11,a.newStream(r,n);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultiaddrs",value:function(){return this.components.getAddressManager().getAddresses()}},{key:"hangUp",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mue(t),n=r.id,e.next=3,this.components.getConnectionManager().closeConnections(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPublicKey",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:{},yye("getPublicKey %p",t),null==t.publicKey){e.next=4;break}return e.abrupt("return",t.publicKey);case 4:return e.next=6,this.peerStore.get(t);case 6:if(null==(n=e.sent).pubKey){e.next=9;break}return e.abrupt("return",n.pubKey);case 9:if(null!=this.dht){e.next=11;break}throw cd(new Error("Public key was not in the peer store and the DHT is not enabled"),nue.ERR_NO_ROUTERS_AVAILABLE);case 11:a=(0,lj.concat)([mm("/pk/"),t.multihash.digest]),i=!1,o=!1,e.prev=14,u=xm(this.dht.get(a,r));case 16:return e.next=18,u.next();case 18:if(!(i=!(c=e.sent).done)){e.next=28;break}if("VALUE"!==(l=c.value).name){e.next=25;break}return f=VU(l.value),e.next=24,this.peerStore.keyBook.set(t,l.value);case 24:return e.abrupt("return",f.bytes);case 25:i=!1,e.next=16;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(14),o=!0,s=e.t0;case 34:if(e.prev=34,e.prev=35,!i||null==u.return){e.next=39;break}return e.next=39,u.return();case 39:if(e.prev=39,!o){e.next=42;break}throw s;case 42:return e.finish(39);case 43:return e.finish(34);case 44:throw cd(new Error("Node not responding with its public key: ".concat(t.toString())),nue.ERR_INVALID_RECORD);case 45:case"end":return e.stop()}}),e,this,[[14,30,34,44],[35,,39,43]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>2&&void 0!==s[2]?s[2]:{},a=mue(t),i=a.id,null==(o=a.multiaddrs)){e.next=5;break}return e.next=5,this.components.getPeerStore().addressBook.add(i,o);case 5:return e.next=7,this.fetchService.fetch(i,r,n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"ping",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},n=mue(t),a=n.id,!((i=n.multiaddrs).length>0)){e.next=5;break}return e.next=5,this.components.getPeerStore().addressBook.add(a,i);case 5:return e.next=7,this.pingService.ping(a,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(t)||(t=[t]),e.next=3,Promise.all(t.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.components.getRegistrar().handle(t,r,n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"unhandle",value:function(){var e=Zh(Fh().mark((function e(t){var r=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(t)||(t=[t]),e.next=3,Promise.all(t.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.components.getRegistrar().unhandle(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDiscoveryPeer",value:function(e){var t=e.detail;t.id.toString()!==this.peerId.toString()?(t.multiaddrs.length>0&&this.components.getPeerStore().addressBook.add(t.id,t.multiaddrs).catch((function(e){return yye.error(e)})),t.protocols.length>0&&this.components.getPeerStore().protoBook.set(t.id,t.protocols).catch((function(e){return yye.error(e)})),this.dispatchEvent(new g9("peer:discovery",{detail:t}))):yye.error(new Error(nue.ERR_DISCOVERED_SELF))}}]),r}(y9);function gye(e){return mye.apply(this,arguments)}function mye(){return(mye=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.peerId){e.next=4;break}return e.next=3,aye();case 3:t.peerId=e.sent;case 4:return e.abrupt("return",new bye(Ede(t)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wye(){return(wye=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gye(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kye=__webpack_require__(3137),xye="/dht/provider",_ye=Number(3e5),Eye=Number(3e4),Sye=Number(3e5),Aye=Number(3e4),Cye=Number(3e4),Tye=mm("/pk/");function Rye(e){return So(So({},e),{},{multiaddrs:e.multiaddrs.filter((function(e){var t=e.stringTuples(),r=(0,wn.Z)(t,1),n=(0,wn.Z)(r[0],2),a=n[0],i=n[1];return(4===a||6===a)&&(null!=i&&!Ahe(i))}))})}function Iye(e){return So(So({},e),{},{multiaddrs:e.multiaddrs.filter((function(e){var t=e.stringTuples(),r=(0,wn.Z)(t,1),n=(0,wn.Z)(r[0],2),a=n[0],i=n[1];return(4===a||6===a)&&(null!=i&&Ahe(i))}))})}function Pye(e){return Dye.apply(this,arguments)}function Dye(){return Dye=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kg.digest(t);case 2:return r=e.sent,e.abrupt("return",r.digest);case 4:case"end":return e.stop()}}),e)}))),Dye.apply(this,arguments)}function Nye(e){return Oye.apply(this,arguments)}function Oye(){return(Oye=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pye(t.toBytes());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lye(e){return new LR("".concat("/dht/record","/").concat(uN(e,"base32")),!1)}function Bye(e){return(0,lj.concat)([Tye,e.toBytes()])}function Mye(e){return"/pk/"===uN(e.subarray(0,4))}function Uye(e){return HD(e.subarray(4))}function jye(e,t){var r=new Date;return new PF(e,t,r).serialize()}var Fye="routing-table-size",zye=function(){function e(t){var r=this;xn(this,e),this.components=new aee;var n=t.kBucketSize,a=t.pingTimeout,i=t.lan,o=t.pingConcurrency,s=t.protocol,u=t.tagName,c=t.tagValue;this.log=ud("libp2p:kad-dht:".concat(i?"lan":"wan",":routing-table")),this.kBucketSize=null!==n&&void 0!==n?n:20,this.pingTimeout=null!==a&&void 0!==a?a:1e4,this.pingConcurrency=null!==o&&void 0!==o?o:10,this.lan=i,this.running=!1,this.protocol=s,this.tagName=null!==u&&void 0!==u?u:"kad-close",this.tagValue=null!==c&&void 0!==c?c:50;var l=function(){var e,t;null===(e=r.components.getMetrics())||void 0===e||e.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(r.lan?"lan":"wan"),metric:"ping-queue-size",value:r.pingQueue.size}),null===(t=r.components.getMetrics())||void 0===t||t.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(r.lan?"lan":"wan"),metric:"ping-running",value:r.pingQueue.pending})};this.pingQueue=new zI({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",l),this.pingQueue.addListener("next",l),this._onPing=this._onPing.bind(this)}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!0,e.t0=kye,e.next=4,Nye(this.components.getPeerId());case 4:e.t1=e.sent,e.t2=this.kBucketSize,e.t3={localNodeId:e.t1,numberOfNodesPerKBucket:e.t2,numberOfNodesToPing:1},t=new e.t0(e.t3),this.kb=t,t.on("ping",this._onPing),this._tagPeers(t);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,this.pingQueue.clear(),this.kb=void 0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_tagPeers",value:function(e){var t=this,r=new Nue,n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){clearTimeout(t),t=setTimeout((function(){return e()}),r)}}((function(){var n=new Nue(e.closest(e.localNodeId,20).map((function(e){return e.peer}))),a=n.difference(r),i=r.difference(n);Promise.resolve().then(Zh(Fh().mark((function e(){var r,n,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,zn.Z)(a),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}return o=n.value,e.next=7,t.components.getPeerStore().tagPeer(o,t.tagName,{value:t.tagValue});case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:s=(0,zn.Z)(i),e.prev=18,s.s();case 20:if((u=s.n()).done){e.next=26;break}return c=u.value,e.next=24,t.components.getPeerStore().unTagPeer(c,t.tagName);case 24:e.next=20;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(18),s.e(e.t1);case 31:return e.prev=31,s.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[1,11,14,17],[18,28,31,34]])})))).catch((function(e){t.log.error("Could not update peer tags",e)})),r=n}));e.on("added",(function(){n()})),e.on("removed",(function(){n()}))}},{key:"_onPing",value:function(e,t){var r=this;this.pingQueue.add(Zh(Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.running){n.next=2;break}return n.abrupt("return");case 2:return a=0,n.prev=3,n.next=6,Promise.all(e.map(function(){var e=Zh(Fh().mark((function e(t){var n,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new wm.TimeoutController(r.pingTimeout),i={signal:n.signal},r.log("pinging old contact %p",t.peer),e.next=6,r.components.getConnectionManager().openConnection(t.peer,i);case 6:return o=e.sent,e.next=9,o.newStream(r.protocol,i);case 9:e.sent.close(),a++,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r.running&&null!=r.kb&&(r.log.error("could not ping peer %p",t.peer,e.t0),r.log("evicting old contact after ping failed %p",t),r.kb.remove(t.id));case 17:return e.prev=17,null!=n&&n.clear(),null===(s=r.components.getMetrics())||void 0===s||s.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(r.lan?"lan":"wan"),metric:Fye,value:r.size}),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[0,14,17,21]])})));return function(t){return e.apply(this,arguments)}}()));case 6:r.running&&a<e.length&&null!=r.kb&&(r.log("adding new contact %p",t.peer),r.kb.add(t)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),r.log.error("could not process k-bucket ping event",n.t0);case 12:case"end":return n.stop()}}),n,null,[[3,9]])})))).catch((function(e){r.log.error("could not process k-bucket ping event",e)}))}},{key:"size",get:function(){return null==this.kb?0:this.kb.count()}},{key:"find",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nye(t);case 2:if(r=e.sent,null==(n=this.closestPeer(r))||!t.equals(n)){e.next=6;break}return e.abrupt("return",n);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closestPeer",value:function(e){var t=this.closestPeers(e,1);if(t.length>0)return t[0]}},{key:"closestPeers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.kBucketSize;return null==this.kb?[]:this.kb.closest(e,t).map((function(e){return e.peer}))}},{key:"add",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.kb){e.next=2;break}throw new Error("RoutingTable is not started");case 2:return e.next=4,Nye(t);case 4:n=e.sent,this.kb.add({id:n,peer:t}),this.log("added %p with kad id %b",t,n),null===(r=this.components.getMetrics())||void 0===r||r.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(this.lan?"lan":"wan"),metric:Fye,value:this.size});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.kb){e.next=2;break}throw new Error("RoutingTable is not started");case 2:return e.next=4,Nye(t);case 4:n=e.sent,this.kb.remove(n),null===(r=this.components.getMetrics())||void 0===r||r.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(this.lan?"lan":"wan"),metric:Fye,value:this.size});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Zye(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var r=(0,hm.E)(e.length),n=0;n<e.length;n++)r[n]=e[n]^t[n];return(0,gm.P)(r)}var qye,Vye,Kye=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782],Hye=function(){function e(t){xn(this,e);var r=t.peerRouting,n=t.routingTable,a=t.refreshInterval,i=t.refreshQueryTimeout,o=t.lan;this.log=ud("libp2p:kad-dht:".concat(o?"lan":"wan",":routing-table:refresh")),this.peerRouting=r,this.routingTable=n,this.refreshInterval=null!==a&&void 0!==a?a:Sye,this.refreshQueryTimeout=null!==i&&void 0!==i?i:Aye,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}return Sn(e,[{key:"init",value:function(e){}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.log("refreshing routing table every ".concat(this.refreshInterval,"ms")),this.refreshTable(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshTable",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.log("refreshing routing table");var r=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(r);this.log("max common prefix length ".concat(r)),this.log("tracked CPLs [ ".concat(n.map((function(e){return e.toISOString()})).join(", ")," ]")),Promise.all(n.map(function(){var a=Zh(Fh().mark((function a(i,o){var s,u;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e._refreshCommonPrefixLength(o,i,t);case 3:if(0!==e._numPeersForCpl(r)){a.next=18;break}s=Math.min(2*(o+1),n.length-1),u=o+1;case 6:if(!(u<s+1)){a.next=18;break}return a.prev=7,a.next=10,e._refreshCommonPrefixLength(u,i,t);case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(7),e.log.error(a.t0);case 15:u++,a.next=6;break;case 18:a.next=23;break;case 20:a.prev=20,a.t1=a.catch(0),e.log.error(a.t1);case 23:case"end":return a.stop()}}),a,null,[[0,20],[7,12]])})));return function(e,t){return a.apply(this,arguments)}}())).catch((function(t){e.log.error(t)})).then((function(){e.refreshTimeoutId=setTimeout(e.refreshTable,e.refreshInterval),null!=e.refreshTimeoutId.unref&&e.refreshTimeoutId.unref()})).catch((function(t){e.log.error(t)}))}},{key:"_refreshCommonPrefixLength",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||!(r.getTime()>Date.now()-this.refreshInterval)){e.next=3;break}return this.log("not running refresh for cpl %s as time since last refresh not above interval",t),e.abrupt("return");case 3:return e.next=5,this._generateRandomPeerId(t);case 5:return a=e.sent,this.log("starting refreshing cpl %s with key %p (routing table size was %s)",t,a,this.routingTable.size),i=new wm.TimeoutController(this.refreshQueryTimeout),e.prev=8,e.next=11,j3(this.peerRouting.getClosestPeers(a.toBytes(),{signal:i.signal}));case 11:o=e.sent,this.log("found ".concat(o," peers that were close to imaginary peer %p"),a),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",t,a,this.routingTable.size);case 14:return e.prev=14,i.clear(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[8,,14,17]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_getTrackedCommonPrefixLengthsForRefresh",value:function(e){e>15&&(e=15);for(var t=[],r=0;r<=e;r++){var n;t[r]=null!==(n=this.commonPrefixLengthRefreshedAt[r])&&void 0!==n?n:new Date}return t}},{key:"_generateRandomPeerId",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.routingTable.kb){e.next=2;break}throw new Error("Routing table not started");case 2:return r=nU(2),n=(r[1]<<8)+r[0],e.next=6,this._makePeerId(this.routingTable.kb.localNodeId,n,t);case 6:return a=e.sent,e.abrupt("return",HD(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_makePeerId",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>15)){e.next=2;break}throw new Error("Cannot generate peer ID for common prefix length greater than ".concat(15));case 2:return a=new DataView(t.buffer,t.byteOffset,t.byteLength),i=a.getUint16(0,!1),s=Kye[(i^32768>>n)&(o=65535<<16-(n+1))|r&~o],u=new ArrayBuffer(34),(c=new DataView(u,0,u.byteLength)).setUint8(0,Kg.code),c.setUint8(1,32),c.setUint32(2,s,!1),e.abrupt("return",new Uint8Array(c.buffer,c.byteOffset,c.byteLength));case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_maxCommonPrefix",value:function(){var e,t=0,r=(0,zn.Z)(this._prefixLengths());try{for(r.s();!(e=r.n()).done;){var n=e.value;n>t&&(t=n)}}catch(sY){r.e(sY)}finally{r.f()}return t}},{key:"_numPeersForCpl",value:function(e){var t,r=0,n=(0,zn.Z)(this._prefixLengths());try{for(n.s();!(t=n.n()).done;){t.value===e&&r++}}catch(sY){n.e(sY)}finally{n.f()}return r}},{key:"_prefixLengths",value:Fh().mark((function e(){var t,r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.routingTable.kb){e.next=2;break}return e.abrupt("return");case 2:t=(0,zn.Z)(this.routingTable.kb.toIterable()),e.prev=3,t.s();case 5:if((r=t.n()).done){e.next=33;break}n=r.value.id,a=Zye(this.routingTable.kb.localNodeId,n),i=0,o=(0,zn.Z)(a),e.prev=10,o.s();case 12:if((s=o.n()).done){e.next=21;break}if(0!==s.value){e.next=18;break}i++,e.next=19;break;case 18:return e.abrupt("break",21);case 19:e.next=12;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:return e.next=31,i;case 31:e.next=5;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(3),t.e(e.t1);case 38:return e.prev=38,t.f(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[3,35,38,41],[10,23,26,29]])}))}]),e}();!function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.key&&(t.uint32(10),t.bytes(e.key)),null!=e.value&&(t.uint32(18),t.bytes(e.value)),null!=e.author&&(t.uint32(26),t.bytes(e.author)),null!=e.signature&&(t.uint32(34),t.bytes(e.signature)),null!=e.timeReceived&&(t.uint32(42),t.string(e.timeReceived)),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.key=e.bytes();break;case 2:r.value=e.bytes();break;case 3:r.author=e.bytes();break;case 4:r.signature=e.bytes();break;case 5:r.timeReceived=e.string();break;default:e.skipType(7&a)}}return r}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(qye||(qye={})),function(e){var t,r,n;!function(e){e.PUT_VALUE="PUT_VALUE",e.GET_VALUE="GET_VALUE",e.ADD_PROVIDER="ADD_PROVIDER",e.GET_PROVIDERS="GET_PROVIDERS",e.FIND_NODE="FIND_NODE",e.PING="PING"}(e.MessageType||(e.MessageType={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(t||(t={})),function(e){e.codec=function(){return uj(t)}}(e.MessageType||(e.MessageType={})),function(e){e.NOT_CONNECTED="NOT_CONNECTED",e.CONNECTED="CONNECTED",e.CAN_CONNECT="CAN_CONNECT",e.CANNOT_CONNECT="CANNOT_CONNECT"}(e.ConnectionType||(e.ConnectionType={})),function(e){e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.CONNECTED=1]="CONNECTED",e[e.CAN_CONNECT=2]="CAN_CONNECT",e[e.CANNOT_CONNECT=3]="CANNOT_CONNECT"}(r||(r={})),function(e){e.codec=function(){return uj(r)}}(e.ConnectionType||(e.ConnectionType={})),function(t){var r;t.codec=function(){return null==r&&(r=cj((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),null!=t.id&&(r.uint32(10),r.bytes(t.id)),null==t.addrs)throw new Error('Protocol error: required field "addrs" was not found in object');var a,i=(0,zn.Z)(t.addrs);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.uint32(18),r.bytes(o)}}catch(sY){i.e(sY)}finally{i.f()}null!=t.connection&&(r.uint32(24),e.ConnectionType.codec().encode(t.connection,r)),!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={addrs:[]},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.id=t.bytes();break;case 2:n.addrs.push(t.bytes());break;case 3:n.connection=e.ConnectionType.codec().decode(t);break;default:t.skipType(7&i)}}return n}))),r},t.encode=function(e){return oj(e,t.codec())},t.decode=function(e){return rj(e,t.codec())}}(e.Peer||(e.Peer={})),e.codec=function(){return null==n&&(n=cj((function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.MessageType.codec().encode(t.type,r)),null!=t.clusterLevelRaw&&(r.uint32(80),r.int32(t.clusterLevelRaw)),null!=t.key&&(r.uint32(18),r.bytes(t.key)),null!=t.record&&(r.uint32(26),r.bytes(t.record)),null==t.closerPeers)throw new Error('Protocol error: required field "closerPeers" was not found in object');var a,i=(0,zn.Z)(t.closerPeers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.uint32(66),e.Peer.codec().encode(o,r)}}catch(sY){i.e(sY)}finally{i.f()}if(null==t.providerPeers)throw new Error('Protocol error: required field "providerPeers" was not found in object');var s,u=(0,zn.Z)(t.providerPeers);try{for(u.s();!(s=u.n()).done;){var c=s.value;r.uint32(74),e.Peer.codec().encode(c,r)}}catch(sY){u.e(sY)}finally{u.f()}!1!==n.lengthDelimited&&r.ldelim()}),(function(t,r){for(var n={closerPeers:[],providerPeers:[]},a=null==r?t.len:t.pos+r;t.pos<a;){var i=t.uint32();switch(i>>>3){case 1:n.type=e.MessageType.codec().decode(t);break;case 10:n.clusterLevelRaw=t.int32();break;case 2:n.key=t.bytes();break;case 3:n.record=t.bytes();break;case 8:n.closerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;case 9:n.providerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;default:t.skipType(7&i)}}return n}))),n},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(Vye||(Vye={}));var Wye=Vye.MessageType,Gye=Vye.ConnectionType,Yye=Object.keys(Wye),Qye=function(){function e(t,r,n){if(xn(this,e),!(r instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=t,this.key=r,this.clusterLevelRaw=n,this.closerPeers=[],this.providerPeers=[],this.record=void 0}return Sn(e,[{key:"clusterLevel",get:function(){var e=this.clusterLevelRaw-1;return e<0?0:e},set:function(e){this.clusterLevelRaw=e}},{key:"serialize",value:function(){return Vye.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(Jye),providerPeers:this.providerPeers.map(Jye),record:null==this.record?void 0:this.record.serialize().subarray()})}}],[{key:"deserialize",value:function(t){var r,n,a,i,o=Vye.decode(t),s=new e(null!==(r=o.type)&&void 0!==r?r:Vye.MessageType.PUT_VALUE,null!==(n=o.key)&&void 0!==n?n:Uint8Array.from([]),null!==(a=o.clusterLevelRaw)&&void 0!==a?a:0);return s.closerPeers=o.closerPeers.map(Xye),s.providerPeers=o.providerPeers.map(Xye),null!=(null===(i=o.record)||void 0===i?void 0:i.length)&&(s.record=PF.deserialize(o.record)),s}}]),e}();function Jye(e){var t;return{id:e.id.toBytes(),addrs:(null!==(t=e.multiaddrs)&&void 0!==t?t:[]).map((function(e){return e.bytes})),connection:Gye.CONNECTED}}function Xye(e){var t;if(null==e.id)throw new Error("Invalid peer in message");return{id:HD(e.id),multiaddrs:(null!==(t=e.addrs)&&void 0!==t?t:[]).map((function(e){return Gx(e)})),protocols:[]}}function $ye(e){return So(So({},e),{},{name:"SENDING_QUERY",type:0,messageName:e.type,messageType:Yye.indexOf(e.type.toString())})}function ebe(e){return So(So({},e),{},{name:"PEER_RESPONSE",type:1,messageName:e.messageType,closer:null!=e.closer?e.closer:[],providers:null!=e.providers?e.providers:[]})}function tbe(e){return So(So({},e),{},{name:"FINAL_PEER",type:2})}function rbe(e){return So(So({},e),{},{name:"QUERY_ERROR",type:3})}function nbe(e){return So(So({},e),{},{name:"PROVIDER",type:4})}function abe(e){return So(So({},e),{},{name:"VALUE",type:5})}function ibe(e){return So(So({},e),{},{name:"DIALING_PEER",type:7})}var obe=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;xn(this,r),(n=t.call(this)).components=new aee;var a=e.protocol,i=e.lan;return n.log=ud("libp2p:kad-dht:".concat(i?"lan":"wan",":network")),n.running=!1,n.protocol=a,n}return Sn(r,[{key:"init",value:function(e){this.components=e}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:this.running=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.running}},{key:"sendRequest",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kh(Fh().mark((function a(){var i,o,s;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.running){a.next=2;break}return a.abrupt("return");case 2:return r.log("sending %s to %p",t.type,e),a.next=5,ibe({peer:e});case 5:return a.next=7,$ye({to:e,type:t.type});case 7:return a.prev=7,a.next=10,km(r.components.getConnectionManager().openConnection(e,n));case 10:return i=a.sent,a.next=13,km(i.newStream(r.protocol,n));case 13:return o=a.sent,a.next=16,km(r._writeReadMessage(o,t.serialize(),n));case 16:return s=a.sent,a.next=19,ebe({from:e,messageType:s.type,closer:s.closerPeers,providers:s.providerPeers,record:s.record});case 19:a.next=25;break;case 21:return a.prev=21,a.t0=a.catch(7),a.next=25,rbe({from:e,error:a.t0});case 25:return a.prev=25,a.finish(25);case 28:case"end":return a.stop()}}),a,null,[[7,21,25,28]])})))()}},{key:"sendMessage",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kh(Fh().mark((function a(){var i,o;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.running){a.next=2;break}return a.abrupt("return");case 2:return r.log("sending %s to %p",t.type,e),a.next=5,ibe({peer:e});case 5:return a.next=7,$ye({to:e,type:t.type});case 7:return a.prev=7,a.next=10,km(r.components.getConnectionManager().openConnection(e,n));case 10:return i=a.sent,a.next=13,km(i.newStream(r.protocol,n));case 13:return o=a.sent,a.next=16,km(r._writeMessage(o,t.serialize(),n));case 16:return a.next=18,ebe({from:e,messageType:t.type});case 18:a.next=24;break;case 20:return a.prev=20,a.t0=a.catch(7),a.next=24,rbe({from:e,error:a.t0});case 24:return a.prev=24,a.finish(24);case 27:case"end":return a.stop()}}),a,null,[[7,20,24,27]])})))()}},{key:"_writeMessage",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=n.signal&&(t=Cee(t,n.signal)),e.next=3,yF([r],Ree(),t,OF);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_writeReadMessage",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=n.signal&&(t=Cee(t,n.signal)),e.next=3,yF([r],Ree(),t,Oee(),function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$J(t);case 2:if(null==(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:throw cd(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return a=e.sent,(i=Qye.deserialize(a)).closerPeers.forEach((function(e){o.dispatchEvent(new g9("peer",{detail:e}))})),i.providerPeers.forEach((function(e){o.dispatchEvent(new g9("peer",{detail:e}))})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}(y9);var sbe=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},ube=sbe,cbe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),lbe=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),fbe=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return hbe(this,e)}}]),e}(),pbe=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return hbe(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),hbe=function(e,t){return new pbe(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},dbe=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new lbe(t,r,n),this.decoder=new fbe(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),vbe=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new dbe(t,r,n,a)},ybe=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=ube(n,r),i=a.encode,o=a.decode;return vbe({prefix:t,name:r,encode:i,decode:function(e){return cbe(o(e))}})},bbe=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return vbe({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},gbe=vbe({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),mbe=bbe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),wbe=bbe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),kbe=ybe({prefix:"9",name:"base10",alphabet:"0123456789"}),xbe=bbe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_be=bbe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Ebe=bbe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Sbe=bbe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Abe=bbe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Cbe=bbe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Tbe=bbe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rbe=bbe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ibe=bbe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pbe=bbe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Dbe=bbe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Nbe=ybe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Obe=ybe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Lbe=ybe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bbe=ybe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Mbe=bbe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ube=bbe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),jbe=bbe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fbe=bbe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),zbe=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Zbe=zbe.reduce((function(e,t,r){return e[r]=t,e}),[]),qbe=zbe.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Vbe=vbe({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Zbe[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=qbe[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),Kbe=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Gbe;)r[n++]=255&t|Hbe,t/=128;for(;t&Wbe;)r[n++]=255&t|Hbe,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Hbe=128,Wbe=-128,Gbe=Math.pow(2,31);var Ybe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&Jbe)<<i:(n&Jbe)*Math.pow(2,i),i+=7}while(n>=Qbe);return e.bytes=o-r,a},Qbe=128,Jbe=127;var Xbe=Math.pow(2,7),$be=Math.pow(2,14),ege=Math.pow(2,21),tge=Math.pow(2,28),rge=Math.pow(2,35),nge=Math.pow(2,42),age=Math.pow(2,49),ige=Math.pow(2,56),oge=Math.pow(2,63),sge={encode:Kbe,decode:Ybe,encodingLength:function(e){return e<Xbe?1:e<$be?2:e<ege?3:e<tge?4:e<rge?5:e<nge?6:e<age?7:e<ige?8:e<oge?9:10}},uge=sge,cge=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uge.encode(e,t,r),t},lge=function(e){return uge.encodingLength(e)},fge=function(e,t){var r=t.byteLength,n=lge(e),a=n+lge(r),i=new Uint8Array(a+r);return cge(e,i,0),cge(r,i,n),i.set(t,a),new pge(e,r,t,i)},pge=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),hge=function(e){var t=e.name,r=e.code,n=e.encode;return new dge(t,r,n)},dge=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?fge(this.code,r):r.then((function(e){return fge(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),vge=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},yge=hge({name:"sha2-256",code:18,encode:vge("SHA-256")}),bge=hge({name:"sha2-512",code:19,encode:vge("SHA-512")}),gge=cbe,mge={code:0,name:"identity",encode:gge,digest:function(e){return fge(0,gge(e))}},wge="raw",kge=85,xge=function(e){return cbe(e)},_ge=function(e){return cbe(e)},Ege=new TextEncoder,Sge=new TextDecoder,Age="json",Cge=512,Tge=function(e){return Ege.encode(JSON.stringify(e))},Rge=function(e){return JSON.parse(Sge.decode(e))},Ige=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},qr),Vr),Kr),Hr),Wr),Gr),Yr),Qr),Jr),Xr));So(So({},$r),en);function Pge(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?function(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Dge(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Nge=Dge("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),Oge=Dge("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=Pge((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Lge=So({utf8:Nge,"utf-8":Nge,hex:Ige.base16,latin1:Oge,ascii:Oge,binary:Oge},Ige);function Bge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Lge[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}new Uint8Array(0);var Mge=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Fge;)r[n++]=255&t|Uge,t/=128;for(;t&jge;)r[n++]=255&t|Uge,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Uge=128,jge=-128,Fge=Math.pow(2,31);var zge=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&qge)<<i:(n&qge)*Math.pow(2,i),i+=7}while(n>=Zge);return e.bytes=o-r,a},Zge=128,qge=127;var Vge=Math.pow(2,7),Kge=Math.pow(2,14),Hge=Math.pow(2,21),Wge=Math.pow(2,28),Gge=Math.pow(2,35),Yge=Math.pow(2,42),Qge=Math.pow(2,49),Jge=Math.pow(2,56),Xge=Math.pow(2,63),$ge={encode:Mge,decode:zge,encodingLength:function(e){return e<Vge?1:e<Kge?2:e<Hge?3:e<Wge?4:e<Gge?5:e<Yge?6:e<Qge?7:e<Jge?8:e<Xge?9:10}},eme=$ge,tme=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return eme.encode(e,t,r),t},rme=function(e){return eme.encodingLength(e)},nme=function(e,t){var r=t.byteLength,n=rme(e),a=n+rme(r),i=new Uint8Array(a+r);return tme(e,i,0),tme(r,i,n),i.set(t,a),new ame(e,r,t,i)},ame=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),ime=function(e){var t=e.name,r=e.code,n=e.encode;return new ome(t,r,n)},ome=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?nme(this.code,r):r.then((function(e){return nme(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),sme=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ume=ime({name:"sha2-256",code:18,encode:sme("SHA-256")});ime({name:"sha2-512",code:19,encode:sme("SHA-512")});function cme(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function lme(e,t){var r=t.key,n=Bge(r).split("/");if(!(n.length<3)){var a=e[n[1].toString()];if(null==a){throw cd(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE")}return a(r,t.value)}}var fme=function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw cd(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");case 2:if(!(t.byteLength<5)){e.next=4;break}throw cd(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");case 4:if("/pk/"===Bge(t.subarray(0,4))){e.next=7;break}throw cd(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");case 7:return n=t.slice(4),e.next=10,ume.digest(r);case 10:if(a=e.sent,cme(n,a.bytes)){e.next=13;break}throw cd(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH");case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),pme={pk:fme};function hme(e,t,r){if(0===r.length){throw cd(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED")}var n=Bge(t).split("/");if(n.length<3){throw cd(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}var a=e[n[1].toString()];if(null==a){var i="Unrecognized key prefix: ".concat(n[1]);throw cd(new Error(i),"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===r.length?0:a(t,r)}var dme={pk:function(e,t){return 0}},vme=function(){function e(t){xn(this,e),this.components=new aee;var r=t.validators,n=t.selectors,a=t.peerRouting,i=t.queryManager,o=t.routingTable,s=t.network,u=t.lan;this.log=ud("libp2p:kad-dht:".concat(u?"lan":"wan",":content-fetching")),this.validators=r,this.selectors=n,this.peerRouting=a,this.queryManager=i,this.routingTable=o,this.network=s}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"putLocal",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lye(t),e.next=3,this.components.getDatastore().put(n,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getLocal",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("getLocal %b",t),r=Lye(t),this.log("fetching record for key %k",r),e.next=5,this.components.getDatastore().get(r);case 5:return n=e.sent,this.log("found %k in local datastore",r),a=PF.deserialize(n),e.next=10,lme(this.validators,a);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendCorrectionRecord",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Kh(Fh().mark((function i(){var o,s,u,c,l,f,p,h,d,v,y,b,g,m,w;return Fh().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.log("sendCorrection for %b",e),i.next=3,km(jye(e,r));case 3:o=i.sent,s=(0,zn.Z)(t),i.prev=5,s.s();case 7:if((u=s.n()).done){i.next=63;break}if(c=u.value,l=c.value,f=c.from,!cN(l,r)){i.next=12;break}return n.log("record was ok"),i.abrupt("continue",61);case 12:if(!n.components.getPeerId().equals(f)){i.next=24;break}return i.prev=13,p=Lye(e),n.log("Storing corrected record for key ".concat(p.toString())),i.next=18,km(n.components.getDatastore().put(p,o.subarray()));case 18:i.next=23;break;case 20:i.prev=20,i.t0=i.catch(13),n.log.error("Failed error correcting self",i.t0);case 23:return i.abrupt("continue",61);case 24:h=!1,(d=new Qye(Wye.PUT_VALUE,e,0)).record=PF.deserialize(o),v=!1,y=!1,i.prev=29,g=xm(n.network.sendRequest(f,d,a));case 31:return i.next=33,km(g.next());case 33:if(!(v=!(m=i.sent).done)){i.next=41;break}return"PEER_RESPONSE"===(w=m.value).name&&null!=w.record&&cN(w.record.value,PF.deserialize(o).value)&&(h=!0),i.next=38,w;case 38:v=!1,i.next=31;break;case 41:i.next=47;break;case 43:i.prev=43,i.t1=i.catch(29),y=!0,b=i.t1;case 47:if(i.prev=47,i.prev=48,!v||null==g.return){i.next=52;break}return i.next=52,km(g.return());case 52:if(i.prev=52,!y){i.next=55;break}throw b;case 55:return i.finish(52);case 56:return i.finish(47);case 57:if(h){i.next=60;break}return i.next=60,rbe({from:f,error:cd(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")});case 60:n.log.error("Failed error correcting entry");case 61:i.next=7;break;case 63:i.next=68;break;case 65:i.prev=65,i.t2=i.catch(5),s.e(i.t2);case 68:return i.prev=68,s.f(),i.finish(68);case 71:case"end":return i.stop()}}),i,null,[[5,65,68,71],[13,20],[29,43,47,57],[48,,52,56]])})))()}},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kh(Fh().mark((function a(){var i,o;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.log("put key %b value %b",e,t),a.next=3,km(jye(e,t));case 3:return i=a.sent,o=Lye(e),r.log("storing record for key ".concat(o.toString())),a.next=8,km(r.components.getDatastore().put(o,i.subarray()));case 8:return a.delegateYield(JD(xm(yF(r.peerRouting.getClosestPeers(e,{signal:n.signal}),(function(t){return dz(t,(function(t){return Zh(Fh().mark((function a(){var o,s,u,c,l,f,p,h;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("FINAL_PEER"===t.name){a.next=2;break}return a.abrupt("return",[t]);case 2:o=[],(s=new Qye(Wye.PUT_VALUE,e,0)).record=PF.deserialize(i),r.log("send put to %p",t.peer.id),u=!1,c=!1,a.prev=8,f=xm(r.network.sendRequest(t.peer.id,s,n));case 10:return a.next=12,f.next();case 12:if(!(u=!(p=a.sent).done)){a.next=21;break}if(h=p.value,o.push(h),"PEER_RESPONSE"===h.name){a.next=17;break}return a.abrupt("continue",18);case 17:null!=h.record&&cN(h.record.value,PF.deserialize(i).value)||o.push(rbe({from:t.peer.id,error:cd(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")}));case 18:u=!1,a.next=10;break;case 21:a.next=27;break;case 23:a.prev=23,a.t0=a.catch(8),c=!0,l=a.t0;case 27:if(a.prev=27,a.prev=28,!u||null==f.return){a.next=32;break}return a.next=32,f.return();case 32:if(a.prev=32,!c){a.next=35;break}throw l;case 35:return a.finish(32);case 36:return a.finish(27);case 37:return a.abrupt("return",o);case 38:case"end":return a.stop()}}),a,null,[[8,23,27,37],[28,,32,36]])})))}))}),(function(e){return hz(e,{ordered:!1,concurrency:3})}),function(){var e=Kh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t);case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=12;break}return s=o.value,e.delegateYield(JD(xm(s)),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),n=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,km(i.return());case 23:if(e.prev=23,!n){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()))),"t0",9);case 9:case"end":return a.stop()}}),a)})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.log("get %b",e),a=[],i=!1,o=!1,n.prev=4,u=xm(t.getMany(e,r));case 6:return n.next=8,km(u.next());case 8:if(!(i=!(c=n.sent).done)){n.next=16;break}return"VALUE"===(l=c.value).name&&a.push(l),n.next=13,l;case 13:i=!1,n.next=6;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(4),o=!0,s=n.t0;case 22:if(n.prev=22,n.prev=23,!i||null==u.return){n.next=27;break}return n.next=27,km(u.return());case 27:if(n.prev=27,!o){n.next=30;break}throw s;case 30:return n.finish(27);case 31:return n.finish(22);case 32:if(0!==a.length){n.next=34;break}return n.abrupt("return");case 34:f=a.map((function(e){return e.value})),p=0,n.prev=36,p=hme(t.selectors,e,f),n.next=44;break;case 40:if(n.prev=40,n.t1=n.catch(36),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"===n.t1.code){n.next=44;break}throw n.t1;case 44:if(h=f[p],t.log("GetValue %b %b",e,h),null!=h){n.next=48;break}throw cd(new Error("best value was not found"),"ERR_NOT_FOUND");case 48:return n.delegateYield(JD(xm(t.sendCorrectionRecord(e,a,h,r))),"t2",49);case 49:return n.next=51,a[p];case 51:case"end":return n.stop()}}),n,null,[[4,18,22,32],[23,,27,31],[36,40]])})))()}},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("getMany values for %b",e),n.prev=1,n.next=4,km(t.getLocal(e));case 4:return a=n.sent,n.next=7,abe({value:a.value,from:t.components.getPeerId()});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),t.log("error getting local value for %b",e,n.t0);case 12:return n.next=14,km(Pye(e));case 14:return i=n.sent,o=t.routingTable.closestPeers(i),t.log("found %d peers in routing table",o.length),s=t,u=function(){var t=Kh((function(t){var r=t.peer,n=t.signal;return Fh().mark((function t(){var a,i,o,u,c,l;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=!1,i=!1,t.prev=2,u=xm(s.peerRouting.getValueOrPeers(r,e,{signal:n}));case 4:return t.next=6,km(u.next());case 6:if(!(a=!(c=t.sent).done)){t.next=16;break}return l=c.value,t.next=10,l;case 10:if("PEER_RESPONSE"!==l.name||null==l.record){t.next=13;break}return t.next=13,abe({from:r,value:l.record.value});case 13:a=!1,t.next=4;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),i=!0,o=t.t0;case 22:if(t.prev=22,t.prev=23,!a||null==u.return){t.next=27;break}return t.next=27,km(u.return());case 27:if(t.prev=27,!i){t.next=30;break}throw o;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[2,18,22,32],[23,,27,31]])}))()}));return function(e){return t.apply(this,arguments)}}(),n.delegateYield(JD(xm(t.queryManager.run(e,o,u,r))),"t1",20);case 20:case"end":return n.stop()}}),n,null,[[1,9]])})))()}}]),e}(),yme=function(){function e(t){xn(this,e),this.components=new aee;var r=t.network,n=t.peerRouting,a=t.queryManager,i=t.routingTable,o=t.providers,s=t.lan;this.log=ud("libp2p:kad-dht:".concat(s?"lan":"wan",":content-routing")),this.network=r,this.peerRouting=n,this.queryManager=a,this.routingTable=i,this.providers=o}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"provide",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kh(Fh().mark((function a(){var i,o,s;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.log("provide %s",e),a.next=3,km(r.providers.addProvider(e,r.components.getPeerId()));case 3:return(i=new Qye(Wye.ADD_PROVIDER,e.bytes,0)).providerPeers=[{id:r.components.getPeerId(),multiaddrs:t,protocols:[]}],o=0,s=function(t){return Zh(Fh().mark((function a(){var s,u,c,l,f,p,h;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("FINAL_PEER"===t.name){a.next=2;break}return a.abrupt("return",[t]);case 2:s=[],r.log("putProvider %s to %p",e,t.peer.id),a.prev=4,r.log("sending provider record for %s to %p",e,t.peer.id),u=!1,c=!1,a.prev=8,f=xm(r.network.sendMessage(t.peer.id,i,n));case 10:return a.next=12,f.next();case 12:if(!(u=!(p=a.sent).done)){a.next=19;break}"PEER_RESPONSE"===(h=p.value).name&&(r.log("sent provider record for %s to %p",e,t.peer.id),o++),s.push(h);case 16:u=!1,a.next=10;break;case 19:a.next=25;break;case 21:a.prev=21,a.t0=a.catch(8),c=!0,l=a.t0;case 25:if(a.prev=25,a.prev=26,!u||null==f.return){a.next=30;break}return a.next=30,f.return();case 30:if(a.prev=30,!c){a.next=33;break}throw l;case 33:return a.finish(30);case 34:return a.finish(25);case 35:a.next=41;break;case 37:a.prev=37,a.t1=a.catch(4),r.log.error("error sending provide record to peer %p",t.peer.id,a.t1),s.push(rbe({from:t.peer.id,error:a.t1}));case 41:return a.abrupt("return",s);case 42:case"end":return a.stop()}}),a,null,[[4,37],[8,21,25,35],[26,,30,34]])})))},a.delegateYield(JD(xm(yF(r.peerRouting.getClosestPeers(e.multihash.bytes,n),(function(e){return dz(e,(function(e){return s(e)}))}),(function(e){return hz(e,{ordered:!1,concurrency:3})}),function(){var e=Kh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t);case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=12;break}return s=o.value,e.delegateYield(JD(xm(s)),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),n=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,km(i.return());case 23:if(e.prev=23,!n){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}()))),"t0",8);case 8:r.log("sent provider records to %d peers",o);case 9:case"end":return a.stop()}}),a)})))()}},{key:"findProviders",value:function(e,t){var r=this;return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.routingTable.kBucketSize,i=e.multihash.bytes,n.next=4,km(Pye(i));case 4:return o=n.sent,s=r,r.log("findProviders %c",e),n.next=9,km(r.providers.getProviders(e));case 9:if(!((u=n.sent).length>0)){n.next=48;break}c=[],l=(0,zn.Z)(u.slice(0,a)),n.prev=13,l.s();case 15:if((f=l.n()).done){n.next=36;break}return h=f.value,n.t0=c,n.t1=h,n.next=21,km(r.components.getPeerStore().addressBook.get(h));case 21:if(n.t3=p=n.sent,n.t2=null!==n.t3,!n.t2){n.next=25;break}n.t2=void 0!==p;case 25:if(!n.t2){n.next=29;break}n.t4=p,n.next=30;break;case 29:n.t4=[];case 30:n.t5=n.t4.map((function(e){return e.multiaddr})),n.t6=[],n.t7={id:n.t1,multiaddrs:n.t5,protocols:n.t6},n.t0.push.call(n.t0,n.t7);case 34:n.next=15;break;case 36:n.next=41;break;case 38:n.prev=38,n.t8=n.catch(13),l.e(n.t8);case 41:return n.prev=41,l.f(),n.finish(41);case 44:return n.next=46,ebe({from:r.components.getPeerId(),messageType:Wye.GET_PROVIDERS,providers:c});case 46:return n.next=48,nbe({from:r.components.getPeerId(),providers:c});case 48:if(!(u.length>=a)){n.next=50;break}return n.abrupt("return");case 50:d=function(){var e=Kh((function(e){var t=e.peer,r=e.signal;return Fh().mark((function e(){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Qye(Wye.GET_PROVIDERS,i,0),e.delegateYield(JD(xm(s.network.sendRequest(t,n,{signal:r}))),"t0",2);case 2:case"end":return e.stop()}}),e)}))()}));return function(t){return e.apply(this,arguments)}}(),v=new Set(u.map((function(e){return e.toString()}))),y=!1,b=!1,n.prev=54,m=xm(r.queryManager.run(i,r.routingTable.closestPeers(o),d,t));case 56:return n.next=58,km(m.next());case 58:if(!(y=!(w=n.sent).done)){n.next=92;break}return k=w.value,n.next=62,k;case 62:if("PEER_RESPONSE"!==k.name){n.next=89;break}r.log("Found %d provider entries for %c and %d closer peers",k.providers.length,e,k.closer.length),x=[],_=(0,zn.Z)(k.providers),n.prev=66,_.s();case 68:if((E=_.n()).done){n.next=76;break}if(S=E.value,!v.has(S.id.toString())){n.next=72;break}return n.abrupt("continue",74);case 72:v.add(S.id.toString()),x.push(S);case 74:n.next=68;break;case 76:n.next=81;break;case 78:n.prev=78,n.t9=n.catch(66),_.e(n.t9);case 81:return n.prev=81,_.f(),n.finish(81);case 84:if(!(x.length>0)){n.next=87;break}return n.next=87,nbe({from:k.from,providers:x});case 87:if(v.size!==a){n.next=89;break}return n.abrupt("return");case 89:y=!1,n.next=56;break;case 92:n.next=98;break;case 94:n.prev=94,n.t10=n.catch(54),b=!0,g=n.t10;case 98:if(n.prev=98,n.prev=99,!y||null==m.return){n.next=103;break}return n.next=103,km(m.return());case 103:if(n.prev=103,!b){n.next=106;break}throw g;case 106:return n.finish(103);case 107:return n.finish(98);case 108:case"end":return n.stop()}}),n,null,[[13,38,41,44],[54,94,98,108],[66,78,81,84],[99,,103,107]])})))()}}]),e}(),bme=function(){function e(t,r){xn(this,e),this.originDhtKey=t,this.capacity=r,this.peerDistances=[]}return Sn(e,[{key:"length",get:function(){return this.peerDistances.length}},{key:"peers",get:function(){return this.peerDistances.map((function(e){return e.peerId}))}},{key:"add",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.peerDistances.find((function(e){return e.peerId.equals(t)}))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Nye(t);case 4:r=e.sent,n={peerId:t,distance:Zye(this.originDhtKey,r)},this.peerDistances.push(n),this.peerDistances.sort((function(e,t){return a4(e.distance,t.distance)})),this.peerDistances=this.peerDistances.slice(0,this.capacity);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"anyCloser",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(0!==this.length){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,Promise.all(t.map(Nye));case 6:r=e.sent,n=this.peerDistances[this.peerDistances.length-1].distance,a=(0,zn.Z)(r),e.prev=9,a.s();case 11:if((i=a.n()).done){e.next=18;break}if(o=i.value,!(a4(Zye(this.originDhtKey,o),n)<0)){e.next=16;break}return e.abrupt("return",!0);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,this,[[9,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),gme=function(){function e(t){xn(this,e),this.components=new aee;var r=t.routingTable,n=t.network,a=t.validators,i=t.queryManager,o=t.lan;this.routingTable=r,this.network=n,this.validators=a,this.queryManager=i,this.log=ud("libp2p:kad-dht:".concat(o?"lan":"wan",":peer-routing"))}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"findPeerLocal",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.routingTable.find(t);case 2:if(null==(n=e.sent)){e.next=15;break}return this.log("findPeerLocal found %p in routing table",t),e.prev=5,e.next=8,this.components.getPeerStore().get(n);case 8:r=e.sent,e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(5),"ERR_NOT_FOUND"===e.t0.code){e.next=15;break}throw e.t0;case 15:if(null!=r){e.next=26;break}return e.prev=16,e.next=19,this.components.getPeerStore().get(t);case 19:r=e.sent,e.next=26;break;case 22:if(e.prev=22,e.t1=e.catch(16),"ERR_NOT_FOUND"===e.t1.code){e.next=26;break}throw e.t1;case 26:if(null==r){e.next=29;break}return this.log("findPeerLocal found %p in peer store",t),e.abrupt("return",{id:r.id,multiaddrs:r.addresses.map((function(e){return e.multiaddr})),protocols:[]});case 29:return e.abrupt("return",void 0);case 30:case"end":return e.stop()}}),e,this,[[5,11],[16,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getValueSingle",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kh(Fh().mark((function a(){var i;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=new Qye(Wye.GET_VALUE,t,0),a.delegateYield(JD(xm(r.network.sendRequest(e,i,n))),"t0",2);case 2:case"end":return a.stop()}}),a)})))()}},{key:"getPublicKeyFromNode",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=Bye(e),i=!1,o=!1,n.prev=3,u=xm(t._getValueSingle(e,a,r));case 5:return n.next=7,km(u.next());case 7:if(!(i=!(c=n.sent).done)){n.next=24;break}return l=c.value,n.next=11,l;case 11:if("PEER_RESPONSE"!==l.name||null==l.record){n.next=21;break}return n.next=14,km(WD(KU({bytes:l.record.value})));case 14:if((f=n.sent).equals(e)){n.next=17;break}throw cd(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");case 17:if(null!=f.publicKey){n.next=19;break}throw cd(new Error("public key missing"),"ERR_PUBLIC_KEY_MISSING");case 19:return n.next=21,abe({from:e,value:f.publicKey});case 21:i=!1,n.next=5;break;case 24:n.next=30;break;case 26:n.prev=26,n.t0=n.catch(3),o=!0,s=n.t0;case 30:if(n.prev=30,n.prev=31,!i||null==u.return){n.next=35;break}return n.next=35,km(u.return());case 35:if(n.prev=35,!o){n.next=38;break}throw s;case 38:return n.finish(35);case 39:return n.finish(30);case 40:throw cd(new Error("Node not responding with its public key: ".concat(e.toString())),"ERR_INVALID_RECORD");case 41:case"end":return n.stop()}}),n,null,[[3,26,30,40],[31,,35,39]])})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("findPeer %p",e),n.next=3,km(t.findPeerLocal(e));case 3:if(null==(a=n.sent)){n.next=9;break}return t.log("found local"),n.next=8,tbe({from:t.components.getPeerId(),peer:a});case 8:return n.abrupt("return");case 9:return n.next=11,km(Nye(e));case 11:if(i=n.sent,o=t.routingTable.closestPeers(i),null==o.find((function(t){return t.equals(e)}))){n.next=29;break}return n.prev=15,n.next=18,km(t.components.getPeerStore().get(e));case 18:return s=n.sent,t.log("found in peerStore"),n.next=22,tbe({from:t.components.getPeerId(),peer:{id:s.id,multiaddrs:s.addresses.map((function(e){return e.multiaddr})),protocols:[]}});case 22:return n.abrupt("return");case 25:if(n.prev=25,n.t0=n.catch(15),"ERR_NOT_FOUND"===n.t0.code){n.next=29;break}throw n.t0;case 29:u=t,c=function(){var t=Kh((function(t){var r=t.peer,n=t.signal;return Fh().mark((function t(){var a,i,o,s,c,l,f,p;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=new Qye(Wye.FIND_NODE,e.toBytes(),0),i=!1,o=!1,t.prev=3,c=xm(u.network.sendRequest(r,a,{signal:n}));case 5:return t.next=7,km(c.next());case 7:if(!(i=!(l=t.sent).done)){t.next=19;break}return f=l.value,t.next=11,f;case 11:if("PEER_RESPONSE"!==f.name){t.next=16;break}if(null==(p=f.closer.find((function(t){return t.id.equals(e)})))){t.next=16;break}return t.next=16,tbe({from:f.from,peer:p});case 16:i=!1,t.next=5;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(3),o=!0,s=t.t0;case 25:if(t.prev=25,t.prev=26,!i||null==c.return){t.next=30;break}return t.next=30,km(c.return());case 30:if(t.prev=30,!o){t.next=33;break}throw s;case 33:return t.finish(30);case 34:return t.finish(25);case 35:case"end":return t.stop()}}),t,null,[[3,21,25,35],[26,,30,34]])}))()}));return function(e){return t.apply(this,arguments)}}(),l=!1,f=!1,p=!1,n.prev=34,d=xm(t.queryManager.run(e.toBytes(),o,c,r));case 36:return n.next=38,km(d.next());case 38:if(!(f=!(v=n.sent).done)){n.next=46;break}return"FINAL_PEER"===(y=v.value).name&&(l=!0),n.next=43,y;case 43:f=!1,n.next=36;break;case 46:n.next=52;break;case 48:n.prev=48,n.t1=n.catch(34),p=!0,h=n.t1;case 52:if(n.prev=52,n.prev=53,!f||null==d.return){n.next=57;break}return n.next=57,km(d.return());case 57:if(n.prev=57,!p){n.next=60;break}throw h;case 60:return n.finish(57);case 61:return n.finish(52);case 62:if(l){n.next=65;break}return n.next=65,rbe({from:t.components.getPeerId(),error:cd(new Error("Not found"),"ERR_NOT_FOUND")});case 65:case"end":return n.stop()}}),n,null,[[15,25],[34,48,52,62],[53,,57,61]])})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h,d,v,y,b,g;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.log("getClosestPeers to %b",e),n.next=3,km(Pye(e));case 3:return a=n.sent,i=t.routingTable.closestPeers(a),o=t,s=new bme(a,t.routingTable.kBucketSize),n.next=9,km(Promise.all(i.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.add(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 9:u=function(){var t=Kh((function(t){var r=t.peer,n=t.signal;return Fh().mark((function t(){var a;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.log("closerPeersSingle %s from %p",uN(e,"base32"),r),a=new Qye(Wye.FIND_NODE,e,0),t.delegateYield(JD(xm(o.network.sendRequest(r,a,{signal:n}))),"t0",3);case 3:case"end":return t.stop()}}),t)}))()}));return function(e){return t.apply(this,arguments)}}(),c=!1,l=!1,n.prev=12,p=xm(t.queryManager.run(e,i,u,r));case 14:return n.next=16,km(p.next());case 16:if(!(c=!(h=n.sent).done)){n.next=26;break}return d=h.value,n.next=20,d;case 20:if("PEER_RESPONSE"!==d.name){n.next=23;break}return n.next=23,km(Promise.all(d.closer.map(function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.add(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 23:c=!1,n.next=14;break;case 26:n.next=32;break;case 28:n.prev=28,n.t0=n.catch(12),l=!0,f=n.t0;case 32:if(n.prev=32,n.prev=33,!c||null==p.return){n.next=37;break}return n.next=37,km(p.return());case 37:if(n.prev=37,!l){n.next=40;break}throw f;case 40:return n.finish(37);case 41:return n.finish(32);case 42:t.log("found %d peers close to %b",s.length,e),v=(0,zn.Z)(s.peers),n.prev=44,v.s();case 46:if((y=v.n()).done){n.next=70;break}return g=y.value,n.t1=tbe,n.t2=t.components.getPeerId(),n.t3=g,n.next=53,km(t.components.getPeerStore().addressBook.get(g));case 53:if(n.t5=b=n.sent,n.t4=null!==n.t5,!n.t4){n.next=57;break}n.t4=void 0!==b;case 57:if(!n.t4){n.next=61;break}n.t6=b,n.next=62;break;case 61:n.t6=[];case 62:return n.t7=n.t6.map((function(e){return e.multiaddr})),n.t8=[],n.t9={id:n.t3,multiaddrs:n.t7,protocols:n.t8},n.t10={from:n.t2,peer:n.t9},n.next=68,(0,n.t1)(n.t10);case 68:n.next=46;break;case 70:n.next=75;break;case 72:n.prev=72,n.t11=n.catch(44),v.e(n.t11);case 75:return n.prev=75,v.f(),n.finish(75);case 78:case"end":return n.stop()}}),n,null,[[12,28,32,42],[33,,37,41],[44,72,75,78]])})))()}},{key:"getValueOrPeers",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kh(Fh().mark((function a(){var i,o,s,u,c,l,f;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=!1,o=!1,a.prev=2,u=xm(r._getValueSingle(e,t,n));case 4:return a.next=6,km(u.next());case 6:if(!(i=!(c=a.sent).done)){a.next=27;break}if("PEER_RESPONSE"!==(l=c.value).name){a.next=22;break}if(null==l.record){a.next=22;break}return a.prev=10,a.next=13,km(r._verifyRecordOnline(l.record));case 13:a.next=22;break;case 15:return a.prev=15,a.t0=a.catch(10),f="invalid record received, discarded",r.log(f),a.next=21,rbe({from:l.from,error:cd(new Error(f),"ERR_INVALID_RECORD")});case 21:return a.abrupt("continue",24);case 22:return a.next=24,l;case 24:i=!1,a.next=4;break;case 27:a.next=33;break;case 29:a.prev=29,a.t1=a.catch(2),o=!0,s=a.t1;case 33:if(a.prev=33,a.prev=34,!i||null==u.return){a.next=38;break}return a.next=38,km(u.return());case 38:if(a.prev=38,!o){a.next=41;break}throw s;case 41:return a.finish(38);case 42:return a.finish(33);case 43:case"end":return a.stop()}}),a,null,[[2,29,33,43],[10,15],[34,,38,42]])})))()}},{key:"_verifyRecordOnline",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.timeReceived){e.next=2;break}throw cd(new Error("invalid record received"),"ERR_INVALID_RECORD");case 2:return e.next=4,lme(this.validators,new PF(t.key,t.value,t.timeReceived));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCloserPeersOffline",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pye(t);case 2:n=e.sent,a=this.routingTable.closestPeers(n),i=[],o=(0,zn.Z)(a),e.prev=6,o.s();case 8:if((s=o.n()).done){e.next=28;break}if(!(u=s.value).equals(r)){e.next=12;break}return e.abrupt("continue",26);case 12:return e.prev=12,e.next=15,this.components.getPeerStore().addressBook.get(u);case 15:return c=e.sent,e.next=18,this.components.getPeerStore().protoBook.get(u);case 18:l=e.sent,i.push({id:u,multiaddrs:c.map((function(e){return e.multiaddr})),protocols:l}),e.next=26;break;case 22:if(e.prev=22,e.t0=e.catch(12),"ERR_NOT_FOUND"===e.t0.code){e.next=26;break}throw e.t0;case 26:e.next=8;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(6),o.e(e.t1);case 33:return e.prev=33,o.f(),e.finish(33);case 36:return i.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",i.length,t,r):this.log("getCloserPeersOffline could not find peer closer to %b than %p",t,r),e.abrupt("return",i);case 38:case"end":return e.stop()}}),e,this,[[6,30,33,36],[12,22]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),mme=ud("libp2p:kad-dht:providers"),wme=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(this,e),this.components=new aee;var r=t.cacheSize,n=t.cleanupInterval,a=t.provideValidity;this.cleanupInterval=null!==n&&void 0!==n?n:36e5,this.provideValidity=null!==a&&void 0!==a?a:864e5,this.cache=tI(null!==r&&void 0!==r?r:256),this.syncQueue=new zI({concurrency:1}),this.started=!1}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.started}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.started){e.next=2;break}return e.abrupt("return");case 2:this.started=!0,this.cleaner=setInterval((function(){t._cleanup().catch((function(e){mme.error(e)}))}),this.cleanupInterval);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_cleanup",value:function(){var e=Zh(Fh().mark((function e(){var t=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add(Zh(Fh().mark((function e(){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T,R,I,P,D;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Date.now(),n=0,a=0,i=new Map,o=t.components.getDatastore().batch(),s=t.components.getDatastore().query({prefix:xye}),u=!1,c=!1,e.prev=8,f=xm(s);case 10:return e.next=12,f.next();case 12:if(!(u=!(p=e.sent).done)){e.next=18;break}h=p.value;try{d=Eme(h.key),v=d.cid,y=d.peerId,b=Cme(h.value).getTime(),g=Date.now(),w=(m=g-b)>t.provideValidity,mme("comparing: %d - %d = %d > %d %s",g,b,m,t.provideValidity,w?"(expired)":""),w&&(a++,o.delete(h.key),(x=null!==(k=i.get(v))&&void 0!==k?k:new Set).add(y),i.set(v,x)),n++}catch(sY){mme.error(sY.message)}case 15:u=!1,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),c=!0,l=e.t0;case 24:if(e.prev=24,e.prev=25,!u||null==f.return){e.next=29;break}return e.next=29,f.return();case 29:if(e.prev=29,!c){e.next=32;break}throw l;case 32:return e.finish(29);case 33:return e.finish(24);case 34:if(!(i.size>0)){e.next=40;break}return mme("deleting %d / %d entries",a,n),e.next=38,o.commit();case 38:e.next=41;break;case 40:mme("nothing to delete");case 41:_=(0,zn.Z)(i);try{for(_.s();!(E=_.n()).done;)if(S=(0,wn.Z)(E.value,2),A=S[0],C=S[1],T=kme(A),null!=(R=t.cache.get(T))){I=(0,zn.Z)(C);try{for(I.s();!(P=I.n()).done;)D=P.value,R.delete(D)}catch(sY){I.e(sY)}finally{I.f()}0===R.size?t.cache.remove(T):t.cache.set(T,R)}}catch(sY){_.e(sY)}finally{_.f()}mme("Cleanup successful (%dms)",Date.now()-r);case 44:case"end":return e.stop()}}),e,null,[[8,20,24,34],[25,,29,33]])}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getProvidersMap",value:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kme(t),null!=(n=this.cache.get(r))){e.next=7;break}return e.next=5,Sme(this.components.getDatastore(),t);case 5:n=e.sent,this.cache.set(r,n);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addProvider",value:function(){var e=Zh(Fh().mark((function e(t,r){var n=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add(Zh(Fh().mark((function e(){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mme("%p provides %s",r,t),e.next=3,n._getProvidersMap(t);case 3:return a=e.sent,mme("loaded %s provs",a.size),i=new Date,a.set(r.toString(),i),o=kme(t),n.cache.set(o,a),e.next=11,xme(n.components.getDatastore(),t,r,i);case 11:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getProviders",value:function(){var e=Zh(Fh().mark((function e(t){var r=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncQueue.add(Zh(Fh().mark((function e(){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mme("get providers for %s",t),e.next=3,r._getProvidersMap(t);case 3:return n=e.sent,e.abrupt("return",(0,kn.Z)(n.keys()).map((function(e){return KD(e)})));case 5:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function kme(e){var t="string"===typeof e?e:uN(e.multihash.bytes,"base32");return"".concat(xye,"/").concat(t)}function xme(e,t,r,n){return _me.apply(this,arguments)}function _me(){return _me=Zh(Fh().mark((function e(t,r,n,a){var i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[kme(r),"/",n.toString()].join(""),o=new LR(i),s=Uint8Array.from(fx.encode(a.getTime())),e.next=5,t.put(o,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),_me.apply(this,arguments)}function Eme(e){var t=e.toString().split("/");if(5!==t.length)throw new Error("incorrectly formatted provider entry key in datastore: ".concat(e.toString()));return{cid:t[3],peerId:t[4]}}function Sme(e,t){return Ame.apply(this,arguments)}function Ame(){return(Ame=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Map,a=t.query({prefix:kme(r)}),i=!1,o=!1,e.prev=4,u=xm(a);case 6:return e.next=8,u.next();case 8:if(!(i=!(c=e.sent).done)){e.next=15;break}l=c.value,f=Eme(l.key),p=f.peerId,n.set(p,Cme(l.value));case 12:i=!1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),o=!0,s=e.t0;case 21:if(e.prev=21,e.prev=22,!i||null==u.return){e.next=26;break}return e.next=26,u.return();case 26:if(e.prev=26,!o){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,null,[[4,17,21,31],[22,,26,30]])})))).apply(this,arguments)}function Cme(e){return new Date(fx.decode(e))}var Tme=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");function Rme(e){return Ime.apply(this,arguments)}function Ime(){return Ime=Kh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=function(e,t){if(null!=e){h.add(e);var n=BigInt("0x"+uN(Zye(t,v),"base16"));d.add(Zh(Fh().mark((function t(){var s,l,b,g,m,w,k,x,_,E,S,A,C,T,R;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=[i],null!=f&&(s=new wm.TimeoutController(f),l.push(s.signal)),b=(0,BR.anySignal)(l),t.prev=3,m=!1,w=!1,t.prev=6,x=xm(o({key:r,peer:e,signal:b,pathIndex:u,numPaths:c}));case 8:return t.next=10,x.next();case 10:if(!(m=!(_=t.sent).done)){t.next=49;break}if(E=_.value,!b.aborted){t.next=14;break}return t.abrupt("return");case 14:if("PEER_RESPONSE"!==E.name){t.next=45;break}S=(0,zn.Z)(E.closer),t.prev=16,S.s();case 18:if((A=S.n()).done){t.next=37;break}if(C=A.value,!h.has(C.id)){t.next=23;break}return p("already seen %p in query",C.id),t.abrupt("continue",35);case 23:if(!a.equals(C.id)){t.next=26;break}return p("not querying ourselves"),t.abrupt("continue",35);case 26:return t.next=28,Nye(C.id);case 28:if(T=t.sent,!(BigInt("0x"+uN(Zye(T,v),"base16"))>n)){t.next=33;break}return p("skipping %p as they are not closer to %b than %p",C.id,r,e),t.abrupt("continue",35);case 33:p("querying closer peer %p",C.id),y(C.id,T);case 35:t.next=18;break;case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(16),S.e(t.t0);case 42:return t.prev=42,S.f(),t.finish(42);case 45:d.emit("completed",E);case 46:m=!1,t.next=8;break;case 49:t.next=55;break;case 51:t.prev=51,t.t1=t.catch(6),w=!0,k=t.t1;case 55:if(t.prev=55,t.prev=56,!m||null==x.return){t.next=60;break}return t.next=60,x.return();case 60:if(t.prev=60,!w){t.next=63;break}throw k;case 63:return t.finish(60);case 64:return t.finish(55);case 65:null===(g=s)||void 0===g||g.clear(),t.next=71;break;case 68:t.prev=68,t.t2=t.catch(3),i.aborted?d.emit("error",t.t2):d.emit("completed",rbe({from:e,error:t.t2}));case 71:return t.prev=71,null===(R=s)||void 0===R||R.clear(),t.finish(71);case 74:case"end":return t.stop()}}),t,null,[[3,68,71,74],[6,51,55,65],[16,39,42,45],[56,,60,64]])}))),{priority:Tme-n}).catch((function(e){p.error(e)}))}},r=t.key,n=t.startingPeer,a=t.ourPeerId,i=t.signal,o=t.query,s=t.alpha,u=t.pathIndex,c=t.numPaths,l=t.cleanUp,f=t.queryFuncTimeout,p=t.log,h=t.peersSeen,d=new zI({concurrency:s}),e.next=5,km(Pye(r));case 5:return v=e.sent,e.t0=y,e.t1=n,e.next=10,km(Nye(n));case 10:return e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.delegateYield(JD(xm(Pme(d,i,l,p))),"t3",13);case 13:case"end":return e.stop()}}),e)}))),Ime.apply(this,arguments)}function Pme(e,t,r,n){return Dme.apply(this,arguments)}function Dme(){return Dme=Kh(Fh().mark((function e(t,r,n,a){var i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Fee(),o=!0,s=[],u=function(){o&&(a("clean up queue, results %d, queue size %d, pending tasks %d",s.length,t.size,t.pending),o=!1,t.clear(),s.splice(0,s.length))},t.on("completed",(function(e){s.push(e),i.resolve()})),t.on("error",(function(e){a("queue error",e),u(),i.reject(e)})),t.on("idle",(function(){a("queue idle"),o=!1,i.resolve()})),r.addEventListener("abort",(function(){a("abort queue");var e=o;u(),e&&i.reject(cd(new Error("Query aborted"),"ERR_QUERY_ABORTED"))})),n.addEventListener("cleanup",(function(){u(),i.resolve()}));case 9:if(!o){e.next=22;break}return e.next=12,km(i.promise);case 12:i=Fee();case 13:if(!(s.length>0)){e.next=20;break}if(null==(c=s.shift())){e.next=18;break}return e.next=18,c;case 18:e.next=13;break;case 20:e.next=9;break;case 22:return e.delegateYield(JD(xm(s)),"t0",23);case 23:case"end":return e.stop()}}),e)}))),Dme.apply(this,arguments)}var Nme="running-queries",Ome=function(){function e(t){xn(this,e),this.components=new aee;var r=t.lan,n=void 0!==r&&r,a=t.disjointPaths,i=void 0===a?20:a,o=t.alpha,s=void 0===o?3:o;this.disjointPaths=null!==i&&void 0!==i?i:20,this.controllers=new Set,this.running=!1,this.alpha=null!==s&&void 0!==s?s:3,this.lan=n,this.queries=0}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,t=(0,zn.Z)(this.controllers);try{for(t.s();!(r=t.n()).done;)r.value.abort()}catch(sY){t.e(sY)}finally{t.f()}this.controllers.clear();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Kh(Fh().mark((function i(){var o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_;return Fh().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.running){i.next=2;break}throw new Error("QueryManager not started");case 2:if(null==a.signal){o=new wm.TimeoutController(Cye),a.signal=o.signal;try{null!=vue.setMaxListeners&&(0,vue.setMaxListeners)(1/0,o.signal)}catch(E){}}s=new AbortController,n.controllers.add(s),u=[s.signal],null!=a.signal&&u.push(a.signal),c=(0,BR.anySignal)(u);try{null!=vue.setMaxListeners&&(0,vue.setMaxListeners)(1/0,c)}catch(S){}if(l=ud("libp2p:kad-dht:".concat(n.lan?"lan":"wan",":query:")+uN(e,"base58btc")),f=t.slice(0,Math.min(n.disjointPaths,t.length)),p=Date.now(),h=new y9,i.prev=13,l("query:start"),n.queries++,null===(d=n.components.getMetrics())||void 0===d||d.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(n.lan?"lan":"wan"),metric:Nme,value:n.queries}),0!==t.length){i.next=20;break}return l.error("Running query with no peers"),i.abrupt("return");case 20:v=new Nue,y=f.map((function(t,i){return Rme({key:e,startingPeer:t,ourPeerId:n.components.getPeerId(),signal:c,query:r,pathIndex:i,numPaths:f.length,alpha:n.alpha,cleanUp:h,queryFuncTimeout:a.queryFuncTimeout,log:l,peersSeen:v})})),b=!1,g=!1,i.prev=24,w=xm(w6.apply(void 0,(0,kn.Z)(y)));case 26:return i.next=28,km(w.next());case 28:if(!(b=!(k=i.sent).done)){i.next=36;break}return x=k.value,i.next=32,x;case 32:"QUERY_ERROR"===x.name&&l("error",x.error);case 33:b=!1,i.next=26;break;case 36:i.next=42;break;case 38:i.prev=38,i.t0=i.catch(24),g=!0,m=i.t0;case 42:if(i.prev=42,i.prev=43,!b||null==w.return){i.next=47;break}return i.next=47,km(w.return());case 47:if(i.prev=47,!g){i.next=50;break}throw m;case 50:return i.finish(47);case 51:return i.finish(42);case 52:i.next=60;break;case 54:if(i.prev=54,i.t1=i.catch(13),n.running||"ERR_QUERY_ABORTED"!==i.t1.code){i.next=59;break}i.next=60;break;case 59:throw i.t1;case 60:return i.prev=60,n.controllers.delete(s),null!=o&&o.clear(),n.queries--,null===(_=n.components.getMetrics())||void 0===_||_.updateComponentMetric({system:"libp2p",component:"kad-dht-".concat(n.lan?"lan":"wan"),metric:Nme,value:n.queries}),h.dispatchEvent(new g9("cleanup")),l("query:done in %dms",Date.now()-p),i.finish(60);case 68:case"end":return i.stop()}}),i,null,[[13,54,60,68],[24,38,42,52],[43,,47,51]])})))()}}]),e}(),Lme=ud("libp2p:kad-dht:rpc:handlers:add-provider"),Bme=function(){function e(t){xn(this,e);var r=t.providers;this.providers=r}return Sn(e,[{key:"init",value:function(){}},{key:"handle",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lme("start"),null!=r.key&&0!==r.key.length){e.next=3;break}throw cd(new Error("Missing key"),"ERR_MISSING_KEY");case 3:e.prev=3,n=bv.decode(r.key),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(3),cd(new Error("Invalid CID"),"ERR_INVALID_CID");case 10:return null!=r.providerPeers&&0!==r.providerPeers.length||Lme.error("no providers found in message"),e.next=13,Promise.all(r.providerPeers.map(function(){var e=Zh(Fh().mark((function e(r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id.equals(t)){e.next=3;break}return Lme("invalid provider peer %p from %p",r.id,t),e.abrupt("return");case 3:if(!(r.multiaddrs.length<1)){e.next=6;break}return Lme("no valid addresses for provider %p. Ignore",t),e.abrupt("return");case 6:return Lme("received provider %p for %s (addrs %s)",t,n,r.multiaddrs.map((function(e){return e.toString()}))),e.next=9,a.providers.addProvider(n,r.id);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Mme=ud("libp2p:kad-dht:rpc:handlers:find-node"),Ume=function(){function e(t){xn(this,e),this.components=new aee;var r=t.peerRouting,n=t.lan;this.peerRouting=r,this.lan=Boolean(n)}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"handle",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mme("incoming request from %p for peers closer to %b",t,r.key),n=[],!cN(this.components.getPeerId().toBytes(),r.key)){e.next=6;break}n=[{id:this.components.getPeerId(),multiaddrs:this.components.getAddressManager().getAddresses().map((function(e){return e.decapsulateCode(lx("p2p").code)})),protocols:[]}],e.next=9;break;case 6:return e.next=8,this.peerRouting.getCloserPeersOffline(r.key,t);case 8:n=e.sent;case 9:return n=n.map(this.lan?Iye:Rye).filter((function(e){return e.multiaddrs.length})),a=new Qye(r.type,new Uint8Array(0),r.clusterLevel),n.length>0?a.closerPeers=n:Mme("could not find any peers closer to %b than %p",r.key,t),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),jme=ud("libp2p:kad-dht:rpc:handlers:get-providers"),Fme=function(){function e(t){xn(this,e),this.components=new aee;var r=t.peerRouting,n=t.providers,a=t.lan;this.peerRouting=r,this.providers=n,this.lan=Boolean(a)}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"handle",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=bv.decode(r.key),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),cd(new Error("Invalid CID"),"ERR_INVALID_CID");case 7:return jme("%p asking for providers for %s",t,n),e.next=10,Promise.all([this.providers.getProviders(n),this.peerRouting.getCloserPeersOffline(r.key,t)]);case 10:return a=e.sent,i=(0,wn.Z)(a,2),o=i[0],s=i[1],e.next=16,this._getPeers(o);case 16:return u=e.sent,e.next=19,this._getPeers(s.map((function(e){return e.id})));case 19:return c=e.sent,l=new Qye(r.type,r.key,r.clusterLevel),u.length>0&&(l.providerPeers=u),c.length>0&&(l.closerPeers=c),jme("got %s providers %s closerPeers",u.length,c.length),e.abrupt("return",l);case 25:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getAddresses",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getPeerStore().addressBook.get(t);case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return e.multiaddr})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPeers",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=this.lan?Iye:Rye,a=(0,zn.Z)(t),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=18;break}return o=i.value,e.t0=n,e.t1=o,e.next=11,this._getAddresses(o);case 11:e.t2=e.sent,e.t3=[],e.t4={id:e.t1,multiaddrs:e.t2,protocols:e.t3},(s=(0,e.t0)(e.t4)).multiaddrs.length>0&&r.push(s);case 16:e.next=5;break;case 18:e.next=23;break;case 20:e.prev=20,e.t5=e.catch(3),a.e(e.t5);case 23:return e.prev=23,a.f(),e.finish(23);case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,this,[[3,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),zme=ud("libp2p:kad-dht:rpc:handlers:get-value"),Zme=function(){function e(t){xn(this,e),this.components=new aee;var r=t.peerRouting;this.peerRouting=r}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"handle",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.key,zme("%p asked for key %b",t,n),null!=n&&0!==n.length){e.next=4;break}throw cd(new Error("Invalid key"),"ERR_INVALID_KEY");case 4:if(a=new Qye(Wye.GET_VALUE,n,r.clusterLevel),!Mye(n)){e.next=25;break}return zme("is public key"),i=Uye(n),e.prev=8,e.next=11,this.components.getPeerStore().keyBook.get(i);case 11:if(null!=(s=e.sent)){e.next=14;break}throw cd(new Error("No public key found in key book"),"ERR_NOT_FOUND");case 14:o=s,e.next=21;break;case 17:if(e.prev=17,e.t0=e.catch(8),"ERR_NOT_FOUND"===e.t0.code){e.next=21;break}throw e.t0;case 21:if(null==o){e.next=25;break}return zme("returning found public key"),a.record=new PF(n,o,new Date),e.abrupt("return",a);case 25:return e.next=27,Promise.all([this._checkLocalDatastore(n),this.peerRouting.getCloserPeersOffline(r.key,t)]);case 27:return u=e.sent,c=(0,wn.Z)(u,2),l=c[0],f=c[1],null!=l&&(zme("had record for %b in local datastore",n),a.record=l),f.length>0&&(zme("had %s closer peers in routing table",f.length),a.closerPeers=f),e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[8,17]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_checkLocalDatastore",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zme("checkLocalDatastore looking for %b",t),r=Lye(t),e.prev=2,e.next=5,this.components.getDatastore().get(r);case 5:n=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),"ERR_NOT_FOUND"!==e.t0.code){e.next=12;break}return e.abrupt("return",void 0);case 12:throw e.t0;case 13:if(null!=(a=PF.deserialize(n))){e.next=16;break}throw cd(new Error("Invalid record"),"ERR_INVALID_RECORD");case 16:if(!(null==a.timeReceived||Date.now()-a.timeReceived.getTime()>1296e5)){e.next=20;break}return e.next=19,this.components.getDatastore().delete(r);case 19:return e.abrupt("return",void 0);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qme=ud("libp2p:kad-dht:rpc:handlers:ping"),Vme=function(){function e(){xn(this,e)}return Sn(e,[{key:"handle",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qme("ping from %p",t),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"init",value:function(){}}]),e}(),Kme=function(){function e(t){xn(this,e),this.components=new aee;var r=t.validators;this.log=ud("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=r}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"handle",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.key,this.log("%p asked us to store value for key %b",t,n),null!=(a=r.record)){e.next=7;break}throw i="Empty record from: ".concat(t.toString()),this.log.error(i),cd(new Error(i),"ERR_EMPTY_RECORD");case 7:return e.prev=7,e.next=10,lme(this.validators,a);case 10:return a.timeReceived=new Date,o=Lye(a.key),e.next=14,this.components.getDatastore().put(o,a.serialize().subarray());case 14:this.log("put record for %b into datastore under key %k",n,o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),this.log("did not put record for key %b into datastore %o",n,e.t0);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Hme=function(){function e(t){var r;xn(this,e);var n=t.providers,a=t.peerRouting,i=t.validators,o=t.lan;this.log=ud("libp2p:kad-dht:rpc"),this.routingTable=t.routingTable,this.handlers=(r={},(0,oi.Z)(r,Wye.GET_VALUE,new Zme({peerRouting:a})),(0,oi.Z)(r,Wye.PUT_VALUE,new Kme({validators:i})),(0,oi.Z)(r,Wye.FIND_NODE,new Ume({peerRouting:a,lan:o})),(0,oi.Z)(r,Wye.ADD_PROVIDER,new Bme({providers:n})),(0,oi.Z)(r,Wye.GET_PROVIDERS,new Fme({peerRouting:a,providers:n,lan:o})),(0,oi.Z)(r,Wye.PING,new Vme),r)}return Sn(e,[{key:"init",value:function(e){for(var t=0,r=Object.values(this.handlers);t<r.length;t++){r[t].init(e)}}},{key:"handleMessage",value:function(){var e=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.routingTable.add(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.log.error("Failed to update the kbucket store",e.t0);case 8:if(null!=(n=this.handlers[r.type])){e.next=12;break}return this.log.error("no handler found for message type: ".concat(r.type)),e.abrupt("return");case 12:return e.next=14,n.handle(t,r);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"onIncomingStream",value:function(e){var t=this;Promise.resolve().then(Zh(Fh().mark((function r(){var n,a,i,o;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.stream,a=e.connection,i=a.remotePeer,r.prev=2,r.next=5,t.routingTable.add(i);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),t.log.error(r.t0);case 10:return o=t,r.next=13,yF(n,Oee(),function(){var e=Kh(Fh().mark((function e(t){var r,n,a,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,s=xm(t);case 4:return e.next=6,km(s.next());case 6:if(!(r=!(u=e.sent).done)){e.next=19;break}return c=u.value,l=Qye.deserialize(c),o.log("incoming %s from %p",l.type,i),e.next=12,km(o.handleMessage(i,l));case 12:if(null==(f=e.sent)){e.next=16;break}return e.next=16,f.serialize();case 16:r=!1,e.next=4;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),n=!0,a=e.t0;case 25:if(e.prev=25,e.prev=26,!r||null==s.return){e.next=30;break}return e.next=30,km(s.return());case 30:if(e.prev=30,!n){e.next=33;break}throw a;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[2,21,25,35],[26,,30,34]])})));return function(t){return e.apply(this,arguments)}}(),Ree(),n);case 13:case"end":return r.stop()}}),r,null,[[2,7]])})))).catch((function(e){t.log.error(e)}))}}]),e}(),Wme=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;xn(this,r),(n=t.call(this)).components=new aee;var a=e.protocol,i=e.lan;return n.log=ud("libp2p:kad-dht:topology-listener:".concat(i?"lan":"wan")),n.running=!1,n.protocol=a,n}return Sn(r,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t,r=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:return this.running=!0,t=f9({onConnect:function(e){r.log("observed peer %p with protocol %s",e,r.protocol),r.dispatchEvent(new g9("peer",{detail:e}))}}),e.next=6,this.components.getRegistrar().register(this.protocol,t);case 6:this.registrarId=e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.running=!1,null!=this.registrarId&&(this.components.getRegistrar().unregister(this.registrarId),this.registrarId=void 0)}}]),r}(y9),Gme=function(){function e(t){xn(this,e),this.components=new aee;var r=t.peerRouting,n=t.lan,a=t.count,i=t.interval,o=t.queryTimeout;this.log=ud("libp2p:kad-dht:".concat(n?"lan":"wan",":query-self")),this.running=!1,this.peerRouting=r,this.count=null!==a&&void 0!==a?a:20,this.interval=null!==i&&void 0!==i?i:_ye,this.queryTimeout=null!==o&&void 0!==o?o:Eye}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"isStarted",value:function(){return this.running}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:this.running=!0,this._querySelf();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_querySelf",value:function(){var e=this;Promise.resolve().then(Zh(Fh().mark((function t(){var r,n,a;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new wm.TimeoutController(e.queryTimeout),t.prev=1,e.controller=new AbortController,n=(0,BR.anySignal)([e.controller.signal,r.signal]);try{null!=vue.setMaxListeners&&(0,vue.setMaxListeners)(1/0,n)}catch(i){}return t.next=7,yF(e.peerRouting.getClosestPeers(e.components.getPeerId().toBytes(),{signal:n}),(function(t){return G6(t,e.count)}),function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j3(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:a=t.sent,e.log("query ran successfully - found %d peers",a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.log("query error",t.t0);case 14:return t.prev=14,e.timeoutId=setTimeout(e._querySelf.bind(e),e.interval),r.clear(),t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[1,11,14,18]])})))).catch((function(t){e.log("query error",t)}))}}]),e}(),Yme=function(e,t){Cn(n,e);var r=Dn(n);function n(e){var t;xn(this,n),(t=r.call(this)).components=new aee;var a=e.kBucketSize,i=e.clientMode,o=e.validators,s=e.selectors,u=e.querySelfInterval,c=e.lan,l=e.protocolPrefix,f=e.pingTimeout,p=e.pingConcurrency,h=e.maxInboundStreams,d=e.maxOutboundStreams;return t.running=!1,t.lan=Boolean(c),t.log=ud("libp2p:kad-dht:".concat(!0===c?"lan":"wan")),t.protocol="".concat(null!==l&&void 0!==l?l:"/ipfs").concat(!0===c?"/lan":"").concat("/kad/1.0.0"),t.kBucketSize=null!==a&&void 0!==a?a:20,t.clientMode=null===i||void 0===i||i,t.maxInboundStreams=null!==h&&void 0!==h?h:32,t.maxOutboundStreams=null!==d&&void 0!==d?d:64,t.routingTable=new zye({kBucketSize:a,lan:t.lan,pingTimeout:f,pingConcurrency:p,protocol:t.protocol}),t.providers=new wme,t.validators=So(So({},pme),o),t.selectors=So(So({},dme),s),t.network=new obe({protocol:t.protocol,lan:t.lan}),t.queryManager=new Ome({disjointPaths:Math.ceil(t.kBucketSize/2),lan:c}),t.peerRouting=new gme({routingTable:t.routingTable,network:t.network,validators:t.validators,queryManager:t.queryManager,lan:t.lan}),t.contentFetching=new vme({validators:t.validators,selectors:t.selectors,peerRouting:t.peerRouting,queryManager:t.queryManager,routingTable:t.routingTable,network:t.network,lan:t.lan}),t.contentRouting=new yme({network:t.network,peerRouting:t.peerRouting,queryManager:t.queryManager,routingTable:t.routingTable,providers:t.providers,lan:t.lan}),t.routingTableRefresh=new Hye({peerRouting:t.peerRouting,routingTable:t.routingTable,lan:t.lan}),t.rpc=new Hme({routingTable:t.routingTable,providers:t.providers,peerRouting:t.peerRouting,validators:t.validators,lan:t.lan}),t.topologyListener=new Wme({protocol:t.protocol,lan:t.lan}),t.querySelf=new Gme({peerRouting:t.peerRouting,interval:u,lan:t.lan}),t.network.addEventListener("peer",(function(e){var r=e.detail;t.onPeerConnect(r).catch((function(e){t.log.error("could not add %p to routing table",r.id,e)})),t.dispatchEvent(new g9("peer",{detail:r}))})),t.topologyListener.addEventListener("peer",(function(e){var r=e.detail;Promise.resolve().then(Zh(Fh().mark((function e(){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.components.getPeerStore().addressBook.get(r);case 2:return n=e.sent,a={id:r,multiaddrs:n.map((function(e){return e.multiaddr})),protocols:[]},e.next=6,t.onPeerConnect(a);case 6:case"end":return e.stop()}}),e)})))).catch((function(e){t.log.error("could not add %p to routing table",r,e)}))})),t}return Sn(n,[{key:tue,get:function(){return!0}},{key:t,get:function(){return"@libp2p/kad-dht"}},{key:"init",value:function(e){this.components=e,this.routingTable.init(e),this.providers.init(e),this.network.init(e),this.queryManager.init(e),this.peerRouting.init(e),this.contentFetching.init(e),this.contentRouting.init(e),this.routingTableRefresh.init(e),this.rpc.init(e),this.topologyListener.init(e),this.querySelf.init(e)}},{key:"onPeerConnect",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log("peer %p connected with protocols %s",t.id,t.protocols),0!==(t=this.lan?Iye(t):Rye(t)).multiaddrs.length){e.next=5;break}return this.log("ignoring %p as they do not have any %s addresses in %s",t.id,this.lan?"private":"public",t.multiaddrs.map((function(e){return e.toString()}))),e.abrupt("return");case 5:return e.prev=5,e.next=8,this.routingTable.add(t.id);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.log.error("could not add %p to routing table",t.id,e.t0);case 13:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isStarted",value:function(){return this.running}},{key:"getMode",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.clientMode?"client":"server");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.components.getRegistrar().unhandle(this.protocol);case 2:if("client"!==t){e.next=7;break}this.log("enabling client mode"),this.clientMode=!0,e.next=11;break;case 7:return this.log("enabling server mode"),this.clientMode=!1,e.next=11,this.components.getRegistrar().handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!0,e.next=3,this.setMode(this.clientMode?"client":"server");case 3:return e.next=5,Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]);case 5:return e.next=7,this.routingTableRefresh.start();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.running=!1,e.next=3,Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kh(Fh().mark((function a(){return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(JD(xm(r.contentFetching.put(e,t,n))),"t0",1);case 1:case"end":return a.stop()}}),a)})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(t.contentFetching.get(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"provide",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(t.contentRouting.provide(e,t.components.getAddressManager().getAddresses(),r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(t.contentRouting.findProviders(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(t.peerRouting.findPeer(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(t.peerRouting.getClosestPeers(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"refreshRoutingTable",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.routingTableRefresh.refreshTable(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(y9,Symbol.toStringTag),Qme=ud("libp2p:kad-dht"),Jme=function(e,t){Cn(n,e);var r=Dn(n);function n(e,t){var a;return xn(this,n),(a=r.call(this)).components=new aee,a.wan=e,a.lan=t,a.wan.addEventListener("peer",(function(e){a.dispatchEvent(new g9("peer",{detail:e.detail}))})),a.lan.addEventListener("peer",(function(e){a.dispatchEvent(new g9("peer",{detail:e.detail}))})),a}return Sn(n,[{key:tue,get:function(){return!0}},{key:t,get:function(){return"@libp2p/dual-kad-dht"}},{key:"init",value:function(e){this.components=e,this.wan.init(e),this.lan.init(e)}},{key:"isStarted",value:function(){return this.wan.isStarted()&&this.lan.isStarted()}},{key:"getMode",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wan.getMode();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMode",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wan.setMode(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.start(),this.wan.start()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.stop(),this.wan.stop()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Kh(Fh().mark((function a(){var i,o,s,u,c,l;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=!1,o=!1,a.prev=2,u=xm(w6(r.lan.put(e,t,n),r.wan.put(e,t,n)));case 4:return a.next=6,km(u.next());case 6:if(!(i=!(c=a.sent).done)){a.next=13;break}return l=c.value,a.next=10,l;case 10:i=!1,a.next=4;break;case 13:a.next=19;break;case 15:a.prev=15,a.t0=a.catch(2),o=!0,s=a.t0;case 19:if(a.prev=19,a.prev=20,!i||null==u.return){a.next=24;break}return a.next=24,km(u.return());case 24:if(a.prev=24,!o){a.next=27;break}throw s;case 27:return a.finish(24);case 28:return a.finish(19);case 29:case"end":return a.stop()}}),a,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,o=!1,s=!1,n.prev=4,c=xm(w6(t.lan.get(e,r),t.wan.get(e,r)));case 6:return n.next=8,km(c.next());case 8:if(!(o=!(l=n.sent).done)){n.next=18;break}return f=l.value,n.next=12,f;case 12:"DIALING_PEER"===f.name&&(a=!0),"VALUE"===f.name&&(a=!0,null!=f.value&&(i=!0)),"SENDING_QUERY"===f.name&&(a=!0);case 15:o=!1,n.next=6;break;case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(4),s=!0,u=n.t0;case 24:if(n.prev=24,n.prev=25,!o||null==c.return){n.next=29;break}return n.next=29,km(c.return());case 29:if(n.prev=29,!s){n.next=32;break}throw u;case 32:return n.finish(29);case 33:return n.finish(24);case 34:if(a){n.next=36;break}throw cd(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");case 36:if(i){n.next=39;break}return n.next=39,rbe({from:t.components.getPeerId(),error:cd(new Error("Not found"),"ERR_NOT_FOUND")});case 39:case"end":return n.stop()}}),n,null,[[4,20,24,34],[25,,29,33]])})))()}},{key:"provide",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=0,i=0,o=[],s=[t.lan],n.next=6,km(t.wan.getMode());case 6:if(n.t0=n.sent,"server"!==n.t0){n.next=9;break}s.push(t.wan);case 9:u=!1,c=!1,n.prev=11,f=xm(w6.apply(void 0,(0,kn.Z)(s.map((function(t){return t.provide(e,r)})))));case 13:return n.next=15,km(f.next());case 15:if(!(u=!(p=n.sent).done)){n.next=25;break}return h=p.value,n.next=19,h;case 19:"SENDING_QUERY"===h.name&&a++,"QUERY_ERROR"===h.name&&o.push(h.error),"PEER_RESPONSE"===h.name&&"ADD_PROVIDER"===h.messageName&&(Qme("sent provider record for %s to %p",e,h.from),i++);case 22:u=!1,n.next=13;break;case 25:n.next=31;break;case 27:n.prev=27,n.t1=n.catch(11),c=!0,l=n.t1;case 31:if(n.prev=31,n.prev=32,!u||null==f.return){n.next=36;break}return n.next=36,km(f.return());case 36:if(n.prev=36,!c){n.next=39;break}throw l;case 39:return n.finish(36);case 40:return n.finish(31);case 41:if(0!==i){n.next=45;break}if(!(o.length>0)){n.next=44;break}throw cd(new Error("Failed to provide to ".concat(o.length," of ").concat(a," peers")),"ERR_PROVIDES_FAILED",{errors:o});case 44:throw cd(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED");case 45:case"end":return n.stop()}}),n,null,[[11,27,31,41],[32,,36,40]])})))()}},{key:"findProviders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(w6(t.lan.findProviders(e,r),t.wan.findProviders(e,r)))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"findPeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,o=!1,n.prev=3,u=xm(w6(t.lan.findPeer(e,r),t.wan.findPeer(e,r)));case 5:return n.next=7,km(u.next());case 7:if(!(i=!(c=n.sent).done)){n.next=15;break}return l=c.value,n.next=11,l;case 11:"SENDING_QUERY"!==l.name&&"FINAL_PEER"!==l.name||(a=!0);case 12:i=!1,n.next=5;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(3),o=!0,s=n.t0;case 21:if(n.prev=21,n.prev=22,!i||null==u.return){n.next=26;break}return n.next=26,km(u.return());case 26:if(n.prev=26,!o){n.next=29;break}throw s;case 29:return n.finish(26);case 30:return n.finish(21);case 31:if(a){n.next=33;break}throw cd(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED");case 33:case"end":return n.stop()}}),n,null,[[3,17,21,31],[22,,26,30]])})))()}},{key:"getClosestPeers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(w6(t.lan.getClosestPeers(e,r),t.wan.getClosestPeers(e,r)))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"refreshRoutingTable",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(y9,Symbol.toStringTag),Xme=function(e){Cn(r,e);var t=Dn(r);function r(e){return xn(this,r),t.call(this,new Yme(So(So({protocolPrefix:"/ipfs"},e),{},{lan:!1})),new Yme(So(So({protocolPrefix:"/ipfs"},e),{},{clientMode:!1,lan:!0})))}return Sn(r)}(Jme),$me=ud("libp2p:bootstrap"),ewe=function(e,t){Cn(n,e);var r=Dn(n);function n(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]};if(xn(this,n),null==a.list||0===a.list.length)throw new Error("Bootstrap requires a list of peer addresses");(t=r.call(this)).interval=null!==(e=a.interval)&&void 0!==e?e:1e4,t.list=[];var i,o=(0,zn.Z)(a.list);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(eA.matches(s)){var u=Gx(s),c=u.getPeerId();if(null!=c){var l={id:KD(c),multiaddrs:[u],protocols:[]};t.list.push(l)}else $me.error("Invalid bootstrap multiaddr without peer id")}else $me.error("Invalid multiaddr")}}catch(sY){o.e(sY)}finally{o.f()}return t}return Sn(n,[{key:tue,get:function(){return!0}},{key:t,get:function(){return"@libp2p/bootstrap"}},{key:"isStarted",value:function(){return Boolean(this.timer)}},{key:"start",value:function(){var e=this;null==this.timer&&(this.timer=setInterval((function(){return e._discoverBootstrapPeers()}),this.interval),$me("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}},{key:"_discoverBootstrapPeers",value:function(){var e=this;null!=this.timer&&this.list.forEach((function(t){e.dispatchEvent(new g9("peer",{detail:t}))}))}},{key:"stop",value:function(){null!=this.timer&&clearInterval(this.timer),this.timer=void 0}}]),n}(y9,Symbol.toStringTag);ewe.tag="bootstrap";var twe=WebSocket,rwe=__webpack_require__(3634);var nwe=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},awe=nwe,iwe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),owe=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),swe=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return cwe(this,e)}}]),e}(),uwe=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return cwe(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),cwe=function(e,t){return new uwe(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},lwe=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new owe(t,r,n),this.decoder=new swe(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),fwe=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new lwe(t,r,n,a)},pwe=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=awe(n,r),i=a.encode,o=a.decode;return fwe({prefix:t,name:r,encode:i,decode:function(e){return iwe(o(e))}})},hwe=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return fwe({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})},dwe=fwe({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),vwe=hwe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ywe=hwe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),bwe=pwe({prefix:"9",name:"base10",alphabet:"0123456789"}),gwe=hwe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mwe=hwe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),wwe=hwe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),kwe=hwe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xwe=hwe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_we=hwe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ewe=hwe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Swe=hwe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Awe=hwe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Cwe=hwe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Twe=hwe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Rwe=pwe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Iwe=pwe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Pwe=pwe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Dwe=pwe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Nwe=hwe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Owe=hwe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lwe=hwe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Bwe=hwe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Mwe=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Uwe=Mwe.reduce((function(e,t,r){return e[r]=t,e}),[]),jwe=Mwe.reduce((function(e,t,r){return e[t.codePointAt(0)]=r,e}),[]);var Fwe=fwe({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=Uwe[t]}),"")},decode:function(e){var t,r=[],n=(0,zn.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=jwe[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));r.push(i)}}catch(sY){n.e(sY)}finally{n.f()}return new Uint8Array(r)}}),zwe=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=Vwe;)r[n++]=255&t|Zwe,t/=128;for(;t&qwe;)r[n++]=255&t|Zwe,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r},Zwe=128,qwe=-128,Vwe=Math.pow(2,31);var Kwe=function e(t,r){var n,a=0,i=0,o=r=r||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],a+=i<28?(n&Wwe)<<i:(n&Wwe)*Math.pow(2,i),i+=7}while(n>=Hwe);return e.bytes=o-r,a},Hwe=128,Wwe=127;var Gwe=Math.pow(2,7),Ywe=Math.pow(2,14),Qwe=Math.pow(2,21),Jwe=Math.pow(2,28),Xwe=Math.pow(2,35),$we=Math.pow(2,42),eke=Math.pow(2,49),tke=Math.pow(2,56),rke=Math.pow(2,63),nke={encode:zwe,decode:Kwe,encodingLength:function(e){return e<Gwe?1:e<Ywe?2:e<Qwe?3:e<Jwe?4:e<Xwe?5:e<$we?6:e<eke?7:e<tke?8:e<rke?9:10}},ake=nke,ike=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ake.encode(e,t,r),t},oke=function(e){return ake.encodingLength(e)},ske=function(e,t){var r=t.byteLength,n=oke(e),a=n+oke(r),i=new Uint8Array(a+r);return ike(e,i,0),ike(r,i,n),i.set(t,a),new uke(e,r,t,i)},uke=Sn((function e(t,r,n,a){xn(this,e),this.code=t,this.size=r,this.digest=n,this.bytes=a})),cke=function(e){var t=e.name,r=e.code,n=e.encode;return new lke(t,r,n)},lke=function(){function e(t,r,n){xn(this,e),this.name=t,this.code=r,this.encode=n}return Sn(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var r=this.encode(e);return r instanceof Uint8Array?ske(this.code,r):r.then((function(e){return ske(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),fke=function(e){return function(){var t=Zh(Fh().mark((function t(r){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,r);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},pke=cke({name:"sha2-256",code:18,encode:fke("SHA-256")}),hke=cke({name:"sha2-512",code:19,encode:fke("SHA-512")}),dke=iwe,vke={code:0,name:"identity",encode:dke,digest:function(e){return ske(0,dke(e))}},yke="raw",bke=85,gke=function(e){return iwe(e)},mke=function(e){return iwe(e)},wke=new TextEncoder,kke=new TextDecoder,xke="json",_ke=512,Eke=function(e){return wke.encode(JSON.stringify(e))},Ske=function(e){return JSON.parse(kke.decode(e))},Ake=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),So(So(So(So(So(So(So(So(So(So({},nn),an),on),sn),un),cn),ln),fn),pn),hn));So(So({},dn),vn);function Cke(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Tke(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Rke=Tke("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),Ike=Tke("ascii","a",(function(e){for(var t="a",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(function(e){for(var t=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Cke(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}((e=e.substring(1)).length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Pke=So({utf8:Rke,"utf-8":Rke,hex:Ake.base16,latin1:Ike,ascii:Ike,binary:Ike},Ake);function Dke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Pke[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):Cke(globalThis.Buffer.from(e,"utf-8"))}function Nke(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.name)&&"number"===typeof(null===e||void 0===e?void 0:e.byteLength)}var Oke=function(e){if(e.readyState>=2)throw new Error("socket closed");if(1!==e.readyState)return new Promise((function(t,r){function n(){e.removeEventListener("open",a),e.removeEventListener("error",i)}function a(){n(),t()}function i(t){var a;n(),r(null!==(a=t.error)&&void 0!==a?a:new Error("connect ECONNREFUSED ".concat(e.url)))}e.addEventListener("open",a),e.addEventListener("error",i)}))},Lke=function(e,t){var r;(t=null!==(r=t)&&void 0!==r?r:{}).closeOnEnd=!1!==t.closeOnEnd;var n=function(){var r=Zh(Fh().mark((function r(n){var a,i,o,s,u,c;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,i=!1,r.prev=2,s=xm(n);case 4:return r.next=6,s.next();case 6:if(!(a=!(u=r.sent).done)){r.next=22;break}return c=u.value,r.prev=8,r.next=11,Oke(e);case 11:r.next=18;break;case 13:if(r.prev=13,r.t0=r.catch(8),"socket closed"!==r.t0.message){r.next=17;break}return r.abrupt("break",22);case 17:throw r.t0;case 18:e.send(c);case 19:a=!1,r.next=4;break;case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(2),i=!0,o=r.t1;case 28:if(r.prev=28,r.prev=29,!a||null==s.return){r.next=33;break}return r.next=33,s.return();case 33:if(r.prev=33,!i){r.next=36;break}throw o;case 36:return r.finish(33);case 37:return r.finish(28);case 38:if(!(null!=t.closeOnEnd&&e.readyState<=1)){r.next=42;break}return r.next=41,new Promise((function(t,r){e.addEventListener("close",(function(e){if(e.wasClean||1006===e.code)t();else{var n=Object.assign(new Error("ws error"),{event:e});r(n)}})),setTimeout((function(){return e.close()}))}));case 41:return r.abrupt("return",r.sent);case 42:case"end":return r.stop()}}),r,null,[[2,24,28,38],[8,13],[29,,33,37]])})));return function(e){return r.apply(this,arguments)}}();return n},Bke=function(e,t){var r;t=null!==(r=t)&&void 0!==r?r:{};var n=function(e){e.binaryType="arraybuffer";var t,r=function(){var r=Zh(Fh().mark((function r(){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(r,n){if(a)return r();if(null!=t)return n(t);var i=function(t){e.removeEventListener("open",o),e.removeEventListener("error",s),t()},o=function(){return i(r)},s=function(t){i((function(){var r;return n(null!==(r=t.error)&&void 0!==r?r:new Error("connect ECONNREFUSED ".concat(e.url)))}))};e.addEventListener("open",o),e.addEventListener("error",s)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),n=Kh(Fh().mark((function t(){var n,a,i,o,s,u,c;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new rwe.zN((function(t){var r=t.push,n=t.stop,a=t.fail,i=function(e){var t=null;"string"===typeof e.data&&(t=Dke(e.data)),Nke(e.data)&&(t=new Uint8Array(e.data)),e.data instanceof Uint8Array&&(t=e.data),null!=t&&r(t)},o=function(e){var t;return a(null!==(t=e.error)&&void 0!==t?t:new Error("Socket error"))};return e.addEventListener("message",i),e.addEventListener("error",o),e.addEventListener("close",n),function(){e.removeEventListener("message",i),e.removeEventListener("error",o),e.removeEventListener("close",n)}}),{highWaterMark:1/0}),t.next=3,km(r());case 3:a=!1,i=!1,t.prev=5,s=xm(n);case 7:return t.next=9,km(s.next());case 9:if(!(a=!(u=t.sent).done)){t.next=16;break}return c=u.value,t.next=13,Nke(c)?new Uint8Array(c):c;case 13:a=!1,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),i=!0,o=t.t0;case 22:if(t.prev=22,t.prev=23,!a||null==s.return){t.next=27;break}return t.next=27,km(s.return());case 27:if(t.prev=27,!i){t.next=30;break}throw o;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[5,18,22,32],[23,,27,31]])})))(),a=1===e.readyState;return e.addEventListener("open",(function(){a=!0,t=null})),e.addEventListener("close",(function(){a=!1,t=null})),e.addEventListener("error",(function(r){var n;a||(t=null!==(n=r.error)&&void 0!==n?n:new Error("connect ECONNREFUSED ".concat(e.url)))})),Object.assign(n,{connected:r})}(e),a=t.remoteAddress,i=t.remotePort;if(null!=e.url)try{var o=new URL(e.url);a=o.hostname,i=parseInt(o.port,10)}catch(u){}if(null==a||null==i)throw new Error("Remote connection did not have address and/or port");var s={sink:Lke(e,t),source:n,connected:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connected();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),close:function(){var t=Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.readyState!==e.CONNECTING&&e.readyState!==e.OPEN){t.next=3;break}return t.next=3,new Promise((function(t){e.addEventListener("close",(function(){t()})),e.close()}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),destroy:function(){null!=e.terminate?e.terminate():e.close()},remoteAddress:a,remotePort:i,socket:e};return s},Mke={http:"ws",https:"wss"};function Uke(e,t){var r;t=null!==(r=t)&&void 0!==r?r:{};var n=function(e,t){return(0,yA.relative)(e,t,Mke,"ws")}(e,("undefined"===typeof window?"":window.location).toString()),a=new twe(n,t.websocket);return Bke(a,t)}var jke=ud("libp2p:websockets:socket");function Fke(e,t,r){var n,a={sink:function(t){return Zh(Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null!=(null===(a=r)||void 0===a?void 0:a.signal)&&(t=See(t,r.signal)),n.prev=1,n.next=4,e.sink(t);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),"aborted"!==n.t0.type&&jke.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},source:null!=(r=null!==(n=r)&&void 0!==n?n:{}).signal?See(e.source,r.signal):e.source,remoteAddr:t,timeline:{open:Date.now()},close:function(){return Zh(Fh().mark((function t(){var r,n,i,o;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.prev=1,t.next=4,s0(e.close(),{milliseconds:2e3});case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),n=a.remoteAddr.toOptions(),i=n.host,o=n.port,jke("timeout closing stream to %s:%s after %dms, destroying it manually",i,o,Date.now()-r),e.destroy();case 11:return t.prev=11,a.timeline.close=Date.now(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,6,11,14]])})))()}};return e.socket.addEventListener("close",(function(){null==a.timeline.close&&(a.timeline.close=Date.now())}),{once:!0}),a}function zke(e){return e.filter((function(e){if(e.protoCodes().includes(290))return!1;var t=e.decapsulateCode(421);return ZS.matches(t)||qS.matches(t)}))}var Zke,qke=ud("libp2p:websockets"),Vke=function(e){function t(e){xn(this,t),this.init=e}return Sn(t,[{key:Symbol.toStringTag,get:function(){return"@libp2p/websockets"}},{key:eue,get:function(){return!0}},{key:"dial",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qke("dialing %s",t),r=null!==(n=r)&&void 0!==n?n:{},e.next=4,this._connect(t,r);case 4:return a=e.sent,i=Fke(a,t),qke("new outbound connection %s",i.remoteAddr),e.next=9,r.upgrader.upgradeOutbound(i);case 9:return o=e.sent,qke("outbound connection %s upgraded",i.remoteAddr),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_connect",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(null===r||void 0===r||null===(n=r.signal)||void 0===n?void 0:n.aborted)){e.next=2;break}throw new bS;case 2:if(a=t.toOptions(),qke("dialing %s:%s",a.host,a.port),i=Fee(),o=function(e){qke.error("connection error:",e),i.reject(e)},null!=(s=Uke(Y1(t),this.init)).socket.on?s.socket.on("error",o):s.socket.onerror=o,null!=r.signal){e.next=13;break}return e.next=11,Promise.race([s.connected(),i.promise]);case 11:case 20:return qke("connected %s",t),e.abrupt("return",s);case 13:return c=new Promise((function(e,t){var n,a;if(u=function(){t(new bS),s.close().catch((function(e){qke.error("error closing raw socket",e)}))},!0===(null===r||void 0===r||null===(n=r.signal)||void 0===n?void 0:n.aborted))return u();null===r||void 0===r||null===(a=r.signal)||void 0===a||a.addEventListener("abort",u)})),e.prev=14,e.next=17,Promise.race([c,i.promise,s.connected()]);case 17:return e.prev=17,null!=u&&(null===r||void 0===r||null===(l=r.signal)||void 0===l||l.removeEventListener("abort",u)),e.finish(17);case 22:case"end":return e.stop()}}),e,this,[[14,,17,20]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createListener",value:function(e){return function(){throw new Error("WebSocket Servers can not be created in the browser!")}(So(So({},this.init),e))}},{key:"filter",value:function(e){var t,r;return e=Array.isArray(e)?e:[e],null!=(null===(t=this.init)||void 0===t?void 0:t.filter)?null===(r=this.init)||void 0===r?void 0:r.filter(e):whe||Ehe?function(e){return e.filter((function(e){if(e.protoCodes().includes(290))return!1;var t=e.decapsulateCode(421);return qS.matches(t)&&BS.matches(t.decapsulateCode(6).decapsulateCode(478))}))}(e):zke(e)}}]),t}();function Kke(e){return new Uint8Array(e)}!function(e){e[e.NEW_STREAM=0]="NEW_STREAM",e[e.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",e[e.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",e[e.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",e[e.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",e[e.RESET_RECEIVER=5]="RESET_RECEIVER",e[e.RESET_INITIATOR=6]="RESET_INITIATOR"}(Zke||(Zke={}));var Hke=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),Wke=Object.freeze({NEW_STREAM:Zke.NEW_STREAM,MESSAGE:Zke.MESSAGE_INITIATOR,CLOSE:Zke.CLOSE_INITIATOR,RESET:Zke.RESET_INITIATOR}),Gke=Object.freeze({MESSAGE:Zke.MESSAGE_RECEIVER,CLOSE:Zke.CLOSE_RECEIVER,RESET:Zke.RESET_RECEIVER}),Yke=10240,Qke=function(){function e(){xn(this,e),this._pool=Kke(Yke),this._poolOffset=0}return Sn(e,[{key:"write",value:function(e){var t=this._pool,r=this._poolOffset;fx.encode(e.id<<3|e.type,t,r),r+=fx.encode.bytes,e.type!==Zke.NEW_STREAM&&e.type!==Zke.MESSAGE_INITIATOR&&e.type!==Zke.MESSAGE_RECEIVER||null==e.data?fx.encode(0,t,r):fx.encode(e.data.length,t,r),r+=fx.encode.bytes;var n=t.subarray(this._poolOffset,r);return Yke-r<100?(this._pool=Kke(Yke),this._poolOffset=0):this._poolOffset=r,e.type!==Zke.NEW_STREAM&&e.type!==Zke.MESSAGE_INITIATOR&&e.type!==Zke.MESSAGE_RECEIVER||null==e.data?[n]:[n].concat((0,kn.Z)(e.data instanceof Uint8Array?[e.data]:e.data))}}]),e}(),Jke=new Qke;function Xke(){return Xke=Kh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n=!1,e.prev=2,i=xm(t);case 4:return e.next=6,km(i.next());case 6:if(!(r=!(o=e.sent).done)){e.next=31;break}if(s=o.value,!Array.isArray(s)){e.next=27;break}u=(0,zn.Z)(s),e.prev=10,u.s();case 12:if((c=u.n()).done){e.next=17;break}return l=c.value,e.delegateYield(JD(xm(Jke.write(l))),"t0",15);case 15:e.next=12;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(10),u.e(e.t1);case 22:return e.prev=22,u.f(),e.finish(22);case 25:e.next=28;break;case 27:return e.delegateYield(JD(xm(Jke.write(s))),"t2",28);case 28:r=!1,e.next=4;break;case 31:e.next=37;break;case 33:e.prev=33,e.t3=e.catch(2),n=!0,a=e.t3;case 37:if(e.prev=37,e.prev=38,!r||null==i.return){e.next=42;break}return e.next=42,km(i.return());case 42:if(e.prev=42,!n){e.next=45;break}throw a;case 45:return e.finish(42);case 46:return e.finish(37);case 47:case"end":return e.stop()}}),e,null,[[2,33,37,47],[10,19,22,25],[38,,42,46]])}))),Xke.apply(this,arguments)}var $ke=function(){function e(){xn(this,e),this._buffer=new BK,this._headerInfo=null}return Sn(e,[{key:"write",value:function(e){if(null==e||0===e.length)return[];this._buffer.append(e);for(var t=[];0!==this._buffer.length;){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(u){break}var r=this._headerInfo,n=r.id,a=r.type,i=r.length,o=r.offset;if(this._buffer.length-o<i)break;var s={id:n,type:a};a!==Zke.NEW_STREAM&&a!==Zke.MESSAGE_INITIATOR&&a!==Zke.MESSAGE_RECEIVER||(s.data=this._buffer.sublist(o,o+i)),t.push(s),this._buffer.consume(o+i),this._headerInfo=null}return t}},{key:"_decodeHeader",value:function(e){var t=rxe(e),r=t.value,n=t.offset,a=rxe(e,n),i=a.value,o=a.offset,s=7&r;if(null==Hke[s])throw new Error("Invalid type received: ".concat(s));return{id:r>>3,type:s,offset:n+o,length:i}}}]),e}(),exe=128,txe=127;function rxe(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,a=0,i=r,o=e.length;do{if(i>=o||a>49)throw r=0,new RangeError("Could not decode varint");t=e.get(i++),n+=a<28?(t&txe)<<a:(t&txe)*Math.pow(2,a),a+=7}while(t>=exe);return{value:n,offset:r=i-r}}function nxe(e){return axe.apply(this,arguments)}function axe(){return axe=Kh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new $ke,n=!1,a=!1,e.prev=3,o=xm(t);case 5:return e.next=7,km(o.next());case 7:if(!(n=!(s=e.sent).done)){e.next=16;break}if(u=s.value,!((c=r.write(u)).length>0)){e.next=13;break}return e.next=13,c;case 13:n=!1,e.next=5;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),a=!0,i=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==o.return){e.next=27;break}return e.next=27,km(o.return());case 27:if(e.prev=27,!a){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}}),e,null,[[3,18,22,32],[23,,27,31]])}))),axe.apply(this,arguments)}var ixe=1<<20;function oxe(e){var t=null!==e&&void 0!==e?e:ixe,r=function(e){if((e.type===Zke.NEW_STREAM||e.type===Zke.MESSAGE_INITIATOR||e.type===Zke.MESSAGE_RECEIVER)&&e.data.byteLength>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return function(e){return function(){var t=Kh(Fh().mark((function t(){var n,a,i,o,s,u;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,o=xm(e);case 4:return t.next=6,km(o.next());case 6:if(!(n=!(s=t.sent).done)){t.next=19;break}if(u=s.value,!Array.isArray(u)){t.next=13;break}return u.forEach(r),t.delegateYield(JD(xm(u)),"t0",11);case 11:t.next=16;break;case 13:return r(u),t.next=16,u;case 16:n=!1,t.next=4;break;case 19:t.next=25;break;case 21:t.prev=21,t.t1=t.catch(2),a=!0,i=t.t1;case 25:if(t.prev=25,t.prev=26,!n||null==o.return){t.next=30;break}return t.next=30,km(o.return());case 30:if(t.prev=30,!a){t.next=33;break}throw i;case 33:return t.finish(30);case 34:return t.finish(25);case 35:case"end":return t.stop()}}),t,null,[[2,21,25,35],[26,,30,34]])})));return function(){return t.apply(this,arguments)}}()()}}var sxe=ud("libp2p:mplex:stream"),uxe="ERR_STREAM_RESET";var cxe=__webpack_require__(7896),lxe=ud("libp2p:mplex");function fxe(e){var t=So(So({},e),{},{type:"".concat(Hke[e.type]," (").concat(e.type,")")});return e.type===Zke.NEW_STREAM&&(t.data=uN(e.data instanceof Uint8Array?e.data:e.data.subarray())),e.type!==Zke.MESSAGE_INITIATOR&&e.type!==Zke.MESSAGE_RECEIVER||(t.data=uN(e.data instanceof Uint8Array?e.data:e.data.subarray(),"base16")),t}var pxe,hxe,dxe=function(){function e(t,r){var n,a;xn(this,e),this.protocol="/mplex/6.7.0",r=null!==(n=r)&&void 0!==n?n:{},this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=r,this.sink=this._createSink();var i=this._createSource();this._source=i,this.source=i,this.closeController=new AbortController,this.rateLimiter=new cxe.RateLimiterMemory({points:null!==(a=r.disconnectThreshold)&&void 0!==a?a:5,duration:1})}return Sn(e,[{key:"init",value:function(e){}},{key:"streams",get:function(){var e,t=[],r=(0,zn.Z)(this._streams.initiators.values());try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n)}}catch(sY){r.e(sY)}finally{r.f()}var a,i=(0,zn.Z)(this._streams.receivers.values());try{for(i.s();!(a=i.n()).done;){var o=a.value;t.push(o)}}catch(sY){i.e(sY)}finally{i.f()}return t}},{key:"newStream",value:function(e){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");var t=this._streamId++;e=null==e?t.toString():e.toString();var r=this._streams.initiators;return this._newStream({id:t,name:e,type:"initiator",registry:r})}},{key:"close",value:function(e){this.closeController.signal.aborted||(null!=e?this.streams.forEach((function(t){return t.abort(e)})):this.streams.forEach((function(e){return e.close()})),this.closeController.abort())}},{key:"_newReceiverStream",value:function(e){var t=e.id,r=e.name,n=this._streams.receivers;return this._newStream({id:t,name:r,type:"receiver",registry:n})}},{key:"_newStream",value:function(e){var t,r=this,n=e.id,a=e.name,i=e.type,o=e.registry;if(lxe("new %s stream %s %s",i,n),"initiator"===i&&this._streams.initiators.size===(null!==(t=this._init.maxOutboundStreams)&&void 0!==t?t:1024))throw cd(new Error("Too many outbound streams open"),"ERR_TOO_MANY_OUTBOUND_STREAMS");if(o.has(n))throw new Error("".concat(i," stream ").concat(n," already exists!"));var s=function(e){var t,r=e.id,n=e.name,a=e.send,i=e.onEnd,o=e.type,s=void 0===o?"initiator":o,u=e.maxMsgSize,c=void 0===u?ixe:u,l=new AbortController,f=new AbortController,p=new AbortController,h="initiator"===s?Wke:Gke,d="initiator"===s?"i".concat(r):"r".concat(r),v="".concat(null==n?r:n),y=!1,b=!1,g=!1,m={open:Date.now()},w=function(e){b||(b=!0,sxe.trace("%s stream %s sink end - err: %o",s,v,e),null!=e&&null==t&&(t=e),y&&(m.close=Date.now(),null!=i&&i(t)))},k=nF({onEnd:function(e){y||(y=!0,sxe.trace("%s stream %s source end - err: %o",s,v,e),null!=e&&null==t&&(t=e),b&&(x.stat.timeline.close=Date.now(),null!=i&&i(t)))}}),x={close:function(){sxe.trace("%s stream %s close",s,v),x.closeRead(),x.closeWrite()},closeRead:function(){sxe.trace("%s stream %s closeRead",s,v),y||k.end()},closeWrite:function(){if(sxe.trace("%s stream %s closeWrite",s,v),!b){p.abort();try{a({id:r,type:h.CLOSE})}catch(sY){sxe.trace("%s stream %s error sending close",s,n,sY)}w()}},abort:function(e){sxe.trace("%s stream %s abort",s,v,e),k.end(e),l.abort(),w(e)},reset:function(){var e=cd(new Error("stream reset"),uxe);f.abort(),k.end(e),w(e)},sink:function(){var e=Zh(Fh().mark((function e(t){var i,o,u,d,y,m,x;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}throw cd(new Error("sink already called on stream"),"ERR_DOUBLE_SINK");case 2:if(g=!0,!b){e.next=5;break}throw cd(new Error("stream closed for writing"),"ERR_SINK_ENDED");case 5:t=See(t,(0,BR.anySignal)([l.signal,f.signal,p.signal])),e.prev=6,"initiator"===s&&a({id:r,type:Wke.NEW_STREAM,data:new BK(mm(v))}),i=new BK,o=!1,u=!1,e.prev=11,y=xm(t);case 13:return e.next=15,y.next();case 15:if(!(o=!(m=e.sent).done)){e.next=34;break}if(!((x=m.value).length<=c)){e.next=21;break}a({id:r,type:h.MESSAGE,data:x instanceof BK?x:new BK(x)}),e.next=31;break;case 21:i.append(x);case 22:if(0===i.length){e.next=31;break}if(!(i.length<=c)){e.next=27;break}return a({id:r,type:h.MESSAGE,data:i.sublist()}),i.consume(i.length),e.abrupt("break",31);case 27:a({id:r,type:h.MESSAGE,data:i.sublist(0,c)}),i.consume(c),e.next=22;break;case 31:o=!1,e.next=13;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(11),u=!0,d=e.t0;case 40:if(e.prev=40,e.prev=41,!o||null==y.return){e.next=45;break}return e.next=45,y.return();case 45:if(e.prev=45,!u){e.next=48;break}throw d;case 48:return e.finish(45);case 49:return e.finish(40);case 50:e.next=63;break;case 52:if(e.prev=52,e.t1=e.catch(6),"aborted"!==e.t1.type||"The operation was aborted"!==e.t1.message){e.next=59;break}if(!p.signal.aborted){e.next=57;break}return e.abrupt("return");case 57:f.signal.aborted&&(e.t1.message="stream reset",e.t1.code=uxe),l.signal.aborted&&(e.t1.message="stream aborted",e.t1.code="ERR_STREAM_ABORT");case 59:if(e.t1.code===uxe)sxe.trace("%s stream %s reset",s,n);else{sxe.trace("%s stream %s error",s,n,e.t1);try{a({id:r,type:h.RESET})}catch(sY){sxe.trace("%s stream %s error sending reset",s,n,sY)}}return k.end(e.t1),w(e.t1),e.abrupt("return");case 63:try{a({id:r,type:h.CLOSE})}catch(sY){sxe.trace("%s stream %s error sending close",s,n,sY)}w();case 65:case"end":return e.stop()}}),e,null,[[6,52],[11,36,40,50],[41,,45,49]])})));return function(t){return e.apply(this,arguments)}}(),source:k,sourcePush:function(e){k.push(e)},sourceReadableLength:function(){return k.readableLength},stat:{direction:"initiator"===s?"outbound":"inbound",timeline:m},metadata:{},id:d};return x}({id:n,name:a,send:function(e){lxe.enabled&&lxe.trace("%s stream %s send",i,n,fxe(e)),r._source.push(e)},type:i,onEnd:function(){lxe("%s stream with id %s and protocol %s ended",i,n,s.stat.protocol),o.delete(n),null!=r._init.onStreamEnd&&r._init.onStreamEnd(s)},maxMsgSize:this._init.maxMsgSize});return o.set(n,s),s}},{key:"_createSink",value:function(){var e=this,t=function(){var t=Zh(Fh().mark((function t(r){var n;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[e.closeController.signal],null!=e._init.signal&&n.push(e._init.signal),r=See(r,BR(n)),t.prev=3,t.next=6,yF(r,nxe,oxe(e._init.maxMsgSize),function(){var t=Zh(Fh().mark((function t(r){var n,a,i,o,s,u;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,o=xm(r);case 4:return t.next=6,o.next();case 6:if(!(n=!(s=t.sent).done)){t.next=13;break}return u=s.value,t.next=10,e._handleIncoming(u);case 10:n=!1,t.next=4;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),a=!0,i=t.t0;case 19:if(t.prev=19,t.prev=20,!n||null==o.return){t.next=24;break}return t.next=24,o.return();case 24:if(t.prev=24,!a){t.next=27;break}throw i;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,null,[[2,15,19,29],[20,,24,28]])})));return function(e){return t.apply(this,arguments)}}());case 6:e._source.end(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),lxe("error in sink",t.t0),e._source.end(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}();return t}},{key:"_createSource",value:function(){var e=this,t=function(){return aF((function(e){for(var t,r=[];!e.isEmpty()&&null!=(t=e.shift());){if(null!=t.error)throw t.error;!1===t.done&&r.push(t.value)}return null==t?{done:!0}:{done:!0===t.done,value:r}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({objectMode:!0,onEnd:function(t){e.close(t)}});return Object.assign(function(e){return Xke.apply(this,arguments)}(t),{push:t.push,end:t.end,return:t.return})}},{key:"_handleIncoming",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,a=t.type,lxe.enabled&&lxe.trace("incoming message",fxe(t)),t.type!==Zke.NEW_STREAM){e.next=20;break}if(this._streams.receivers.size!==(null!==(i=this._init.maxInboundStreams)&&void 0!==i?i:1024)){e.next=17;break}return lxe("too many inbound streams open"),this._source.push({id:n,type:Zke.RESET_RECEIVER}),e.prev=6,e.next=9,this.rateLimiter.consume("new-stream",1);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(6),lxe("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),this._source.end(new Error("Too many open streams")),e.abrupt("return");case 16:return e.abrupt("return");case 17:return o=this._newReceiverStream({id:n,name:uN(t.data instanceof Uint8Array?t.data:t.data.subarray())}),null!=this._init.onIncomingStream&&this._init.onIncomingStream(o),e.abrupt("return");case 20:if(s=1===(1&a)?this._streams.initiators:this._streams.receivers,null!=(u=s.get(n))){e.next=25;break}return lxe("missing stream %s for message type %s",n,Hke[a]),e.abrupt("return");case 25:c=null!==(r=this._init.maxStreamBufferSize)&&void 0!==r?r:4194304,e.t1=a,e.next=e.t1===Zke.MESSAGE_INITIATOR||e.t1===Zke.MESSAGE_RECEIVER?29:e.t1===Zke.CLOSE_INITIATOR||e.t1===Zke.CLOSE_RECEIVER?36:e.t1===Zke.RESET_INITIATOR||e.t1===Zke.RESET_RECEIVER?38:40;break;case 29:if(!(u.sourceReadableLength()>c)){e.next=34;break}return this._source.push({id:t.id,type:a===Zke.MESSAGE_INITIATOR?Zke.RESET_RECEIVER:Zke.RESET_INITIATOR}),l=cd(new Error("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers"),"ERR_STREAM_INPUT_BUFFER_FULL"),u.abort(l),e.abrupt("return");case 34:return u.sourcePush(t.data),e.abrupt("break",41);case 36:return u.closeRead(),e.abrupt("break",41);case 38:return u.reset(),e.abrupt("break",41);case 40:lxe("unknown message type %s",a);case 41:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),vxe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(this,e),this.protocol="/mplex/6.7.0",this.components=new aee,this._init=t}return Sn(e,[{key:"init",value:function(e){this.components=e}},{key:"createStreamMuxer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new dxe(this.components,So(So({},e),this._init))}}]),e}(),yxe=__webpack_require__(2497),bxe=__webpack_require__(2029),gxe=__webpack_require__(4888),mxe=__webpack_require__(3642),wxe={hashSHA256:function(e){return(0,gxe.vp)(e)},getHKDF:function(e,t){var r=new yxe.t(gxe.mE,t,e).expand(96);return[r.subarray(0,32),r.subarray(32,64),r.subarray(64,96)]},generateX25519KeyPair:function(){var e=bxe.Au();return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519KeyPairFromSeed:function(e){var t=bxe._w(e);return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519SharedKey:function(e,t){return bxe.gi(e,t)},chaCha20Poly1305Encrypt:function(e,t,r,n){return new mxe.OK(n).seal(t,e,r)},chaCha20Poly1305Decrypt:function(e,t,r,n){return new mxe.OK(n).open(t,e,r)}};function kxe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Que(e),n=Oee.fromReader(r.reader,t),a={read:function(){var e=Zh(Fh().mark((function e(t){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.reader.next(t);case 2:if(n=e.sent,null!=(a=n.value)){e.next=6;break}throw new Error("Value is null");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),readLP:function(){var e=Zh(Fh().mark((function e(){var t,r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.next();case 2:if(t=e.sent,null!=(r=t.value)){e.next=6;break}throw new Error("Value is null");case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),readPB:function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.readLP();case 2:if(null!=(r=e.sent)){e.next=5;break}throw new Error("Value is null");case 5:return n=r instanceof Uint8Array?r:r.subarray(),e.abrupt("return",t.decode(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),write:function(e){e instanceof Uint8Array?r.writer.push(e):r.writer.push(e.subarray())},writeLP:function(e){a.write(Ree.single(e,t))},writePB:function(e,t){a.writeLP(t.encode(e))},pb:function(e){return{read:function(){var t=Zh(Fh().mark((function t(){return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.readPB(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),write:function(t){a.writePB(t,e)}}},unwrap:function(){return r.rest(),r.stream}};return a}function xxe(){var e=Fee(),t=!1;return{sink:function(){var r=Zh(Fh().mark((function r(n){return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=2;break}throw new Error("already piped");case 2:t=!0,e.resolve(n);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),source:Kh(Fh().mark((function t(){var r;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,km(e.promise);case 2:return r=t.sent,t.delegateYield(JD(xm(r)),"t0",4);case 4:case"end":return t.stop()}}),t)})))()}}function _xe(){var e=xxe(),t=xxe();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}var Exe=65535,Sxe=Boolean(null===(pxe=globalThis.process)||void 0===pxe||null===(hxe=pxe.env)||void 0===hxe?void 0:hxe.DUMP_SESSION_KEYS);function Axe(e){return function(){var t=Kh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l,f;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,o=xm(r);case 4:return t.next=6,km(o.next());case 6:if(!(n=!(s=t.sent).done)){t.next=21;break}u=s.value,c=0;case 9:if(!(c<u.length)){t.next=18;break}return(l=c+65519)>u.length&&(l=u.length),f=e.encrypt(u.subarray(c,l),e.session),t.next=15,f;case 15:c+=65519,t.next=9;break;case 18:n=!1,t.next=4;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(2),a=!0,i=t.t0;case 27:if(t.prev=27,t.prev=28,!n||null==o.return){t.next=32;break}return t.next=32,km(o.return());case 32:if(t.prev=32,!a){t.next=35;break}throw i;case 35:return t.finish(32);case 36:return t.finish(27);case 37:case"end":return t.stop()}}),t,null,[[2,23,27,37],[28,,32,36]])})));return function(e){return t.apply(this,arguments)}}()}function Cxe(e){return function(){var t=Kh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l,f,p;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,a=!1,t.prev=2,o=xm(r);case 4:return t.next=6,km(o.next());case 6:if(!(n=!(s=t.sent).done)){t.next=27;break}u=s.value,c=0;case 9:if(!(c<u.length)){t.next=24;break}return(l=c+Exe)>u.length&&(l=u.length),t.next=14,km(e.decrypt(u.subarray(c,l),e.session));case 14:if(f=t.sent,p=f.plaintext,f.valid){t.next=19;break}throw new Error("Failed to validate decrypted chunk");case 19:return t.next=21,p;case 21:c+=Exe,t.next=9;break;case 24:n=!1,t.next=4;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(2),a=!0,i=t.t0;case 33:if(t.prev=33,t.prev=34,!n||null==o.return){t.next=38;break}return t.next=38,km(o.return());case 38:if(t.prev=38,!a){t.next=41;break}throw i;case 41:return t.finish(38);case 42:return t.finish(33);case 43:case"end":return t.stop()}}),t,null,[[2,29,33,43],[34,,38,42]])})));return function(e){return t.apply(this,arguments)}}()}var Txe=function(e){var t,r=(t=2,globalThis.Buffer?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t));return new DataView(r.buffer,r.byteOffset,r.byteLength).setUint16(0,e,!1),r};Txe.bytes=2;var Rxe=function(e){if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};function Ixe(e){return(0,lj.concat)([e.ne,e.ciphertext],e.ne.length+e.ciphertext.length)}function Pxe(e){return(0,lj.concat)([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length)}function Dxe(e){return(0,lj.concat)([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length)}function Nxe(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.subarray(0,32),ciphertext:e.subarray(32,e.length),ns:new Uint8Array(0)}}function Oxe(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.subarray(0,32),ns:e.subarray(32,80),ciphertext:e.subarray(80,e.length)}}function Lxe(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:e.subarray(0,48),ciphertext:e.subarray(48,e.length)}}Rxe.bytes=2;var Bxe,Mxe=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected Peer";return xn(this,r),(e=t.call(this,n)).code=r.code,e}return Sn(r,null,[{key:"code",get:function(){return"ERR_UNEXPECTED_PEER"}}]),r}(On(Error)),Uxe=function(e){Cn(r,e);var t=Dn(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto exchange";return xn(this,r),(e=t.call(this,n)).code=r.code,e}return Sn(r,null,[{key:"code",get:function(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}]),r}(On(Error));Error;!function(e){!function(e){var t;e.codec=function(){return null==t&&(t=cj((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.identityKey)throw new Error('Protocol error: required field "identityKey" was not found in object');if(t.uint32(10),t.bytes(e.identityKey),null==e.identitySig)throw new Error('Protocol error: required field "identitySig" was not found in object');if(t.uint32(18),t.bytes(e.identitySig),null==e.data)throw new Error('Protocol error: required field "data" was not found in object');t.uint32(26),t.bytes(e.data),!1!==r.lengthDelimited&&t.ldelim()}),(function(e,t){for(var r={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0),data:new Uint8Array(0)},n=null==t?e.len:e.pos+t;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.identityKey=e.bytes();break;case 2:r.identitySig=e.bytes();break;case 3:r.data=e.bytes();break;default:e.skipType(7&a)}}if(null==r.identityKey)throw new Error('Protocol error: value for required field "identityKey" was not found in protobuf');if(null==r.identitySig)throw new Error('Protocol error: value for required field "identitySig" was not found in protobuf');if(null==r.data)throw new Error('Protocol error: value for required field "data" was not found in protobuf');return r}))),t},e.encode=function(t){return oj(t,e.codec())},e.decode=function(t){return rj(t,e.codec())}}(e.NoiseHandshakePayload||(e.NoiseHandshakePayload={}))}(Bxe||(Bxe={}));var jxe=Bxe.NoiseHandshakePayload;function Fxe(e,t,r){return zxe.apply(this,arguments)}function zxe(){return(zxe=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qxe(t,Gxe(r));case 2:if(a=e.sent,i=null!==n&&void 0!==n?n:new Uint8Array(0),null!=t.publicKey){e.next=6;break}throw new Error("PublicKey was missing from local PeerId");case 6:return e.abrupt("return",Zxe(t.publicKey,a,i));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zxe(e,t,r){return jxe.encode({identityKey:e,identitySig:t,data:null!==r&&void 0!==r?r:new Uint8Array(0)}).subarray()}function qxe(e,t){return Vxe.apply(this,arguments)}function Vxe(){return(Vxe=Zh(Fh().mark((function e(t,r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.privateKey){e.next=2;break}throw new Error("PrivateKey was missing from PeerId");case 2:return e.next=4,HU(t.privateKey);case 4:return n=e.sent,e.next=7,n.sign(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kxe(e){return Hxe.apply(this,arguments)}function Hxe(){return(Hxe=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WD(t.identityKey);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wxe(e){return jxe.decode(e)}function Gxe(e){var t=mm("noise-libp2p-static-key:");return(0,lj.concat)([t,e],t.length+e.length)}function Yxe(e,t,r){return Qxe.apply(this,arguments)}function Qxe(){return(Qxe=Zh(Fh().mark((function e(t,r,n){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WD(r.identityKey);case 2:if((a=e.sent).equals(n)){e.next=5;break}throw new Error("Peer ID doesn't match libp2p public key.");case 5:if(i=Gxe(t),null!=a.publicKey){e.next=8;break}throw new Error("PublicKey was missing from PeerId");case 8:if(null!=r.identitySig){e.next=10;break}throw new Error("Signature was missing from message");case 10:return o=VU(a.publicKey),e.next=13,o.verify(i,r.identitySig);case 13:if(e.sent){e.next=16;break}throw new Error("Static key doesn't match to peer that signed payload!");case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jxe(e){return e instanceof Uint8Array&&32===e.length}var Xxe,$xe=ud("libp2p:noise");function e_e(e){e?(Xxe("LOCAL_PUBLIC_EPHEMERAL_KEY ".concat(uN(e.publicKey,"hex"))),Xxe("LOCAL_PRIVATE_EPHEMERAL_KEY ".concat(uN(e.privateKey,"hex")))):Xxe("Missing local ephemeral keys.")}function t_e(e){Xxe("REMOTE_EPHEMERAL_PUBLIC_KEY ".concat(uN(e,"hex")))}Xxe=Sxe?$xe:Object.assign((function(){}),{enabled:!1,trace:function(){},error:function(){}});var r_e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;xn(this,e),this.n=t,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,t,!0)}return Sn(e,[{key:"increment",value:function(){this.n++,this.view.setUint32(4,this.n,!0)}},{key:"getBytes",value:function(){return this.bytes}},{key:"getUint64",value:function(){return this.n}},{key:"assertValue",value:function(){if(this.n>4294967295)throw new Error("Cipherstate has reached maximum n, a new handshake must be performed")}}]),e}(),n_e=function(){function e(t){xn(this,e),this.crypto=t}return Sn(e,[{key:"encryptWithAd",value:function(e,t,r){var n=this.encrypt(e.k,e.n,t,r);return e.n.increment(),n}},{key:"decryptWithAd",value:function(e,t,r){var n=this.decrypt(e.k,e.n,t,r),a=n.plaintext,i=n.valid;return i&&e.n.increment(),{plaintext:a,valid:i}}},{key:"hasKey",value:function(e){return!this.isEmptyKey(e.k)}},{key:"createEmptyKey",value:function(){return new Uint8Array(32)}},{key:"isEmptyKey",value:function(e){return cN(this.createEmptyKey(),e)}},{key:"encrypt",value:function(e,t,r,n){return t.assertValue(),this.crypto.chaCha20Poly1305Encrypt(n,t.getBytes(),r,e)}},{key:"encryptAndHash",value:function(e,t){var r;return r=this.hasKey(e.cs)?this.encryptWithAd(e.cs,e.h,t):t,this.mixHash(e,r),r}},{key:"decrypt",value:function(e,t,r,n){t.assertValue();var a=this.crypto.chaCha20Poly1305Decrypt(n,t.getBytes(),r,e);return a?{plaintext:a,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}},{key:"decryptAndHash",value:function(e,t){var r,n=!0;if(this.hasKey(e.cs)){var a=this.decryptWithAd(e.cs,e.h,t);r=a.plaintext,n=a.valid}else r=t;return this.mixHash(e,t),{plaintext:r,valid:n}}},{key:"dh",value:function(e,t){try{var r=this.crypto.generateX25519SharedKey(e,t);return 32===r.length?r:r.subarray(0,32)}catch(n){return $xe(n.message),new Uint8Array(32)}}},{key:"mixHash",value:function(e,t){e.h=this.getHash(e.h,t)}},{key:"getHash",value:function(e,t){return this.crypto.hashSHA256((0,lj.concat)([e,t],e.length+t.length))}},{key:"mixKey",value:function(e,t){var r=this.crypto.getHKDF(e.ck,t),n=(0,wn.Z)(r,2),a=n[0],i=n[1];e.cs=this.initializeKey(i),e.ck=a}},{key:"initializeKey",value:function(e){return{k:e,n:new r_e}}},{key:"initializeSymmetric",value:function(e){var t=mm(e,"utf-8"),r=this.hashProtocolName(t),n=r,a=this.createEmptyKey();return{cs:this.initializeKey(a),ck:n,h:r}}},{key:"hashProtocolName",value:function(e){if(e.length<=32){var t=new Uint8Array(32);return t.set(e),t}return this.getHash(e,new Uint8Array(0))}},{key:"split",value:function(e){var t=this.crypto.getHKDF(e.ck,new Uint8Array(0)),r=(0,wn.Z)(t,2),n=r[0],a=r[1];return{cs1:this.initializeKey(n),cs2:this.initializeKey(a)}}},{key:"writeMessageRegular",value:function(e,t){var r=this.encryptWithAd(e,new Uint8Array(0),t);return{ne:this.createEmptyKey(),ns:new Uint8Array(0),ciphertext:r}}},{key:"readMessageRegular",value:function(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}}]),e}(),a_e=function(e){Cn(r,e);var t=Dn(r);function r(){return xn(this,r),t.apply(this,arguments)}return Sn(r,[{key:"initializeInitiator",value:function(e,t,r,n){var a=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");return this.mixHash(a,e),{ss:a,s:t,rs:r,psk:n,re:new Uint8Array(32)}}},{key:"initializeResponder",value:function(e,t,r,n){var a=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");return this.mixHash(a,e),{ss:a,s:t,rs:r,psk:n,re:new Uint8Array(32)}}},{key:"writeMessageA",value:function(e,t,r){var n=new Uint8Array(0);e.e=void 0!==r?r:this.crypto.generateX25519KeyPair();var a=e.e.publicKey;return this.mixHash(e.ss,a),{ne:a,ns:n,ciphertext:this.encryptAndHash(e.ss,t)}}},{key:"writeMessageB",value:function(e,t){e.e=this.crypto.generateX25519KeyPair();var r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));var n=e.s.publicKey,a=this.encryptAndHash(e.ss,n);return this.mixKey(e.ss,this.dh(e.s.privateKey,e.re)),{ne:r,ns:a,ciphertext:this.encryptAndHash(e.ss,t)}}},{key:"writeMessageC",value:function(e,t){var r=e.s.publicKey,n=this.encryptAndHash(e.ss,r);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));var a=this.encryptAndHash(e.ss,t),i={ne:this.createEmptyKey(),ns:n,ciphertext:a},o=this.split(e.ss),s=o.cs1,u=o.cs2;return{h:e.ss.h,messageBuffer:i,cs1:s,cs2:u}}},{key:"readMessageA",value:function(e,t){return Jxe(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}},{key:"readMessageB",value:function(e,t){if(Jxe(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));var r=this.decryptAndHash(e.ss,t.ns),n=r.plaintext,a=r.valid;a&&Jxe(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));var i=this.decryptAndHash(e.ss,t.ciphertext),o=i.plaintext,s=i.valid;return{plaintext:o,valid:a&&s}}},{key:"readMessageC",value:function(e,t){var r=this.decryptAndHash(e.ss,t.ns),n=r.plaintext,a=r.valid;if(a&&Jxe(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));var i=this.decryptAndHash(e.ss,t.ciphertext),o=i.plaintext,s=i.valid,u=this.split(e.ss),c=u.cs1,l=u.cs2;return{h:e.ss.h,plaintext:o,valid:a&&s,cs1:c,cs2:l}}},{key:"initSession",value:function(e,t,r){var n=this.createEmptyKey(),a=new Uint8Array(32);return{hs:e?this.initializeInitiator(t,r,a,n):this.initializeResponder(t,r,a,n),i:e,mc:0}}},{key:"sendMessage",value:function(e,t,r){var n;if(0===e.mc)n=this.writeMessageA(e.hs,t,r);else if(1===e.mc)n=this.writeMessageB(e.hs,t);else if(2===e.mc){var a=this.writeMessageC(e.hs,t),i=a.h,o=a.messageBuffer,s=a.cs1,u=a.cs2;n=o,e.h=i,e.cs1=s,e.cs2=u}else{if(!(e.mc>2))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,t)}}return e.mc++,n}},{key:"recvMessage",value:function(e,t){var r=new Uint8Array(0),n=!1;if(0===e.mc){var a=this.readMessageA(e.hs,t);r=a.plaintext,n=a.valid}else if(1===e.mc){var i=this.readMessageB(e.hs,t);r=i.plaintext,n=i.valid}else if(2===e.mc){var o=this.readMessageC(e.hs,t),s=o.h,u=o.plaintext,c=o.valid,l=o.cs1,f=o.cs2;r=u,n=c,e.h=s,e.cs1=l,e.cs2=f}return e.mc++,{plaintext:r,valid:n}}}]),r}(n_e),i_e=function(){function e(t,r,n,a,i,o,s,u){xn(this,e),this.isInitiator=t,this.payload=r,this.prologue=n,this.staticKeypair=i,this.connection=o,s&&(this.remotePeer=s),this.xx=null!==u&&void 0!==u?u:new a_e(a),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}return Sn(e,[{key:"propose",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.session.hs.s,Xxe("LOCAL_STATIC_PUBLIC_KEY ".concat(uN(a.publicKey,"hex"))),Xxe("LOCAL_STATIC_PRIVATE_KEY ".concat(uN(a.privateKey,"hex"))),!this.isInitiator){e.next=9;break}$xe("Stage 0 - Initiator starting to send first message."),t=this.xx.sendMessage(this.session,new Uint8Array(0)),this.connection.writeLP(Ixe(t)),$xe("Stage 0 - Initiator finished sending first message."),e_e(this.session.hs.e),e.next=20;break;case 9:return $xe("Stage 0 - Responder waiting to receive first message..."),e.t0=Nxe,e.next=13,this.connection.readLP();case 13:if(e.t1=e.sent.subarray(),r=(0,e.t0)(e.t1),n=this.xx.recvMessage(this.session,r),n.valid){e.next=18;break}throw new Uxe("xx handshake stage 0 validation fail");case 18:$xe("Stage 0 - Responder received first message."),t_e(this.session.hs.re);case 20:case"end":return e.stop()}var a}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exchange",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=34;break}return $xe("Stage 1 - Initiator waiting to receive first message from responder..."),e.t0=Oxe,e.next=5,this.connection.readLP();case 5:if(e.t1=e.sent.subarray(),t=(0,e.t0)(e.t1),r=this.xx.recvMessage(this.session,t),n=r.plaintext,r.valid){e.next=10;break}throw new Uxe("xx handshake stage 1 validation fail");case 10:if($xe("Stage 1 - Initiator received the message."),t_e(this.session.hs.re),s=this.session.hs.rs,Xxe("REMOTE_STATIC_PUBLIC_KEY ".concat(uN(s,"hex"))),$xe("Initiator going to check remote's signature..."),e.prev=14,a=Wxe(n),e.t2=this.remotePeer,e.t2){e.next=21;break}return e.next=20,Kxe(a);case 20:e.t2=e.sent;case 21:return this.remotePeer=e.t2,e.next=24,Yxe(this.session.hs.rs,a,this.remotePeer);case 24:this.setRemoteEarlyData(a.data),e.next=31;break;case 27:throw e.prev=27,e.t3=e.catch(14),i=e.t3,new Mxe("Error occurred while verifying signed payload: ".concat(i.message));case 31:$xe("All good with the signature!"),e.next=39;break;case 34:$xe("Stage 1 - Responder sending out first message with signed payload and static key."),o=this.xx.sendMessage(this.session,this.payload),this.connection.writeLP(Pxe(o)),$xe("Stage 1 - Responder sent the second handshake message with signed payload."),e_e(this.session.hs.e);case 39:case"end":return e.stop()}var s}),e,this,[[14,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"finish",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitiator){e.next=7;break}$xe("Stage 2 - Initiator sending third handshake message."),t=this.xx.sendMessage(this.session,this.payload),this.connection.writeLP(Dxe(t)),$xe("Stage 2 - Initiator sent message with signed payload."),e.next=34;break;case 7:return $xe("Stage 2 - Responder waiting for third handshake message..."),e.t0=Lxe,e.next=11,this.connection.readLP();case 11:if(e.t1=e.sent.subarray(),r=(0,e.t0)(e.t1),n=this.xx.recvMessage(this.session,r),a=n.plaintext,n.valid){e.next=16;break}throw new Uxe("xx handshake stage 2 validation fail");case 16:if($xe("Stage 2 - Responder received the message, finished handshake."),e.prev=17,i=Wxe(a),e.t2=this.remotePeer,e.t2){e.next=24;break}return e.next=23,Kxe(i);case 23:e.t2=e.sent;case 24:return this.remotePeer=e.t2,e.next=27,Yxe(this.session.hs.rs,i,this.remotePeer);case 27:this.setRemoteEarlyData(i.data),e.next=34;break;case 30:throw e.prev=30,e.t3=e.catch(17),o=e.t3,new Mxe("Error occurred while verifying signed payload: ".concat(o.message));case 34:(s=this.session).cs1&&s.cs2?(Xxe("CIPHER_STATE_1 ".concat(s.cs1.n.getUint64()," ").concat(uN(s.cs1.k,"hex"))),Xxe("CIPHER_STATE_2 ".concat(s.cs2.n.getUint64()," ").concat(uN(s.cs2.k,"hex")))):Xxe("Missing cipher state.");case 35:case"end":return e.stop()}var s}),e,this,[[17,30]])})));return function(){return e.apply(this,arguments)}}()},{key:"encrypt",value:function(e,t){var r=this.getCS(t);return this.xx.encryptWithAd(r,new Uint8Array(0),e)}},{key:"decrypt",value:function(e,t){var r=this.getCS(t,!1);return this.xx.decryptWithAd(r,new Uint8Array(0),e)}},{key:"getRemoteStaticKey",value:function(){return this.session.hs.rs}},{key:"getCS",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.cs1||!e.cs2)throw new Uxe("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}},{key:"setRemoteEarlyData",value:function(e){e&&(this.remoteEarlyData=e)}}]),e}(),o_e=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wxe,a=arguments.length>3?arguments[3]:void 0;xn(this,e),this.protocol="/noise",this.earlyData=null!==r&&void 0!==r?r:new Uint8Array(0),this.crypto=n,this.staticKeys=t?this.crypto.generateX25519KeyPairFromSeed(t):this.crypto.generateX25519KeyPair(),this.prologue=null!==a&&void 0!==a?a:new Uint8Array(0)}return Sn(e,[{key:"secureOutbound",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kxe(r,{lengthEncoder:Txe,lengthDecoder:Rxe,maxDataLength:Exe}),e.next=3,this.performHandshake({connection:a,isInitiator:!0,localPeer:t,remotePeer:n});case 3:return i=e.sent,e.next=6,this.createSecureConnection(a,i);case 6:return o=e.sent,e.abrupt("return",{conn:o,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"secureInbound",value:function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kxe(r,{lengthEncoder:Txe,lengthDecoder:Rxe,maxDataLength:Exe}),e.next=3,this.performHandshake({connection:a,isInitiator:!1,localPeer:t,remotePeer:n});case 3:return i=e.sent,e.next=6,this.createSecureConnection(a,i);case 6:return o=e.sent,e.abrupt("return",{conn:o,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"performHandshake",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fxe(t.localPeer,this.staticKeys.publicKey,this.earlyData);case 2:return r=e.sent,e.next=5,this.performXXHandshake(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"performXXHandshake",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isInitiator,a=t.remotePeer,i=t.connection,o=new i_e(n,r,this.prologue,this.crypto,this.staticKeys,i,a),e.prev=2,e.next=5,o.propose();case 5:return e.next=7,o.exchange();case 7:return e.next=9,o.finish();case 9:e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(2),!(e.t0 instanceof Error)){e.next=16;break}throw e.t0.message="Error occurred during XX handshake: ".concat(e.t0.message),e.t0;case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createSecureConnection",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_xe(),a=(0,wn.Z)(n,2),i=a[0],o=a[1],s=t.unwrap(),e.next=4,yF(i,Axe(r),Ree({lengthEncoder:Txe}),s,Oee({lengthDecoder:Rxe}),Cxe(r),i);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),s_e=Hh.bind({ignoreUndefined:!0,concatArrays:!0});function u_e(e){var t=e.options,a=void 0===t?{}:t,s=e.peerId,u=e.multiaddrs,c=void 0===u?[]:u,l=e.repo,f=e.keychainConfig,p=void 0===f?{}:f,h=e.config,d=void 0===h?{}:h,v=l.datastore,y=function(e){var t=e.options,a=e.config,s=e.datastore,u=e.keychainConfig,c=e.peerId,l=e.multiaddrs,f=function(){var e=sF(a,"Pubsub.Router")||"gossipsub",t=jee();if(!t[e])throw cd(new Error("Router unavailable. Configure libp2p.modules.pubsub to use the ".concat(e," router.")),"ERR_NOT_SUPPORTED");return t[e]},p={datastore:s,peerId:c},h={addresses:{listen:l.map((function(e){return e.toString()})),announce:sF(t,"addresses.announce",sF(a,"Addresses.Announce",[])),noAnnounce:sF(t,"addresses.noAnnounce",sF(a,"Addresses.NoAnnounce",[]))},connectionManager:sF(t,"connectionManager",{maxConnections:sF(t,"config.Swarm.ConnMgr.HighWater",sF(a,"Swarm.ConnMgr.HighWater")),minConnections:sF(t,"config.Swarm.ConnMgr.LowWater",sF(a,"Swarm.ConnMgr.LowWater"))}),keychain:u,identify:{host:{agentVersion:"js-ipfs/".concat(rJ)}},contentRouters:[],peerRouters:[],peerDiscovery:[],transports:[],streamMuxers:[new vxe({maxInboundStreams:256,maxOutboundStreams:1024})],connectionEncryption:[new o_e],relay:{enabled:sF(t,"relay.enabled",sF(a,"relay.enabled",!0)),hop:{enabled:sF(t,"relay.hop.enabled",sF(a,"relay.hop.enabled",!1)),active:sF(t,"relay.hop.active",sF(a,"relay.hop.active",!1))}},nat:{enabled:!sF(a,"Swarm.DisableNatPortMap",!1)}};sF(t,"config.Pubsub.Enabled",sF(a,"Pubsub.Enabled",!0))&&(h.pubsub=f());"none"!==sF(a,"Routing.Type","dhtclient")&&(h.dht=new Xme({clientMode:"dhtserver"!==sF(a,"Routing.Type","dht"),kBucketSize:sF(t,"dht.kBucketSize",20),validators:{ipns:Mj},selectors:{ipns:uF}}));var d,v=sF(t,"config.Bootstrap",sF(a,"Bootstrap",[]));v.length>0&&(null===(d=h.peerDiscovery)||void 0===d||d.push(new ewe({list:v})));var y=sF(t,"libp2p",void 0);"function"===typeof y&&(y=void 0);var b,g=s_e(p,function(){var e=new uue;return{transports:[e],peerDiscovery:[e.discovery],connectionManager:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4,autoDial:!0},nat:{enabled:!1},metrics:{enabled:!0}}}(),h,y),m=sF(t,"config.Addresses.Delegates",sF(a,"Addresses.Delegates",[]));if(m.length>0){var w,k,x=Gx(m[Math.floor(Math.random()*m.length)]).toOptions(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:Pg.name,code:Pg.code,encode:function(e){return e},decode:function(e){return e}},a=Object.values(nm);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach((function(e){return a.push(e)}));var s=new Wee({bases:a,loadBase:e.ipld&&e.ipld.loadBase}),u=Object.values(im);[r,n,i,o,t].concat(e.ipld&&e.ipld.codecs||[]).forEach((function(e){return u.push(e)}));var c=new Yee({codecs:u,loadCodec:e.ipld&&e.ipld.loadCodec}),l=Object.values(am);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach((function(e){return l.push(e)}));var f=new Jee({hashers:l,loadHasher:e.ipld&&e.ipld.loadHasher});return{add:gae(e),addAll:dae(e),bitswap:wte(e),block:Ote(e),bootstrap:Fte(e),cat:mae(e),commands:wae(e),config:Qte(e),dag:are(c,e),dht:pre(e),diag:yre(e),dns:kae(e),files:Dre(e),get:_ae(e),getEndpointConfig:xae(e),id:Eae(e),isOnline:Sae(e),key:Fre(e),log:Vre(e),ls:Aae(e),mount:Tae(e),name:Jre(e),object:cne(c,e),pin:Mne(e),ping:Rae(e),pubsub:$ne(e),refs:tae(e),repo:iae(e),resolve:Iae(e),start:Pae(e),stats:sae(e),stop:Dae(e),swarm:hae(e),version:Nae(e),bases:s,codecs:c,hashers:f}}({host:x.host,protocol:443===parseInt(x.port)?"https":"http",port:x.port});null===(w=g.contentRouters)||void 0===w||w.push(new Kee(_)),null===(k=g.peerRouters)||void 0===k||k.push(new Zee(_))}sF(t,"config.Discovery.MDNS.Enabled",sF(a,"Discovery.MDNS.Enabled",!0))||(g.peerDiscovery=null===(b=g.peerDiscovery)||void 0===b?void 0:b.filter((function(e){return null!=e&&"@libp2p/mdns"!==e[Symbol.toStringTag]})));null==g.transports&&(g.transports=[]);null==g.transports.find((function(e){return"@libp2p/websockets"===e[Symbol.toStringTag]}))&&g.transports.push(new Vke);return g}({options:a,config:d,datastore:v,keychainConfig:p,peerId:s,multiaddrs:c});return"function"===typeof a.libp2p?a.libp2p({libp2pOptions:y,options:a,config:d,datastore:v,peerId:s}):function(e){return wye.apply(this,arguments)}(y)}var c_e=Hh.bind({ignoreUndefined:!0}),l_e=ud("ipfs:components:peer:storage"),f_e=function(){function e(t,r,n,a,i){xn(this,e),this.print=a,this.peerId=t,this.keychain=r,this.repo=n,this.print=a,this.isNew=i}return Sn(e,null,[{key:"start",value:function(){var t=Zh(Fh().mark((function t(r,n,a){var i,o,s,u,c,l,f,p;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.repoAutoMigrate,o=a.repo,s=a.onMigrationProgress,u="string"===typeof o||null==o?n8(r,n,{path:o,autoMigrate:i,onMigrationProgress:s}):o,t.next=4,p_e(r,u,a);case 4:return c=t.sent,l=c.peerId,f=c.keychain,p=c.isNew,t.abrupt("return",new e(l,f,u,r,p));case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()}]),e}(),p_e=function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.closed){e.next=11;break}return e.t0=So,e.t1=So,e.t2={},e.next=6,b_e(r,n);case 6:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={isNew:!1},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 11:return e.prev=11,e.next=14,r.open();case 14:return e.t7=So,e.t8=So,e.t9={},e.next=19,b_e(r,n);case 19:return e.t10=e.sent,e.t11=(0,e.t8)(e.t9,e.t10),e.t12={},e.t13={isNew:!1},e.abrupt("return",(0,e.t7)(e.t11,e.t12,e.t13));case 26:if(e.prev=26,e.t14=e.catch(11),e.t14.code===Z5){e.next=30;break}throw e.t14;case 30:if(!n.init||!1!==n.init.allowNew){e.next=32;break}throw new pm("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");case 32:return e.t15=So,e.t16=So,e.t17={},e.next=37,h_e(t,r,n);case 37:return e.t18=e.sent,e.t19=(0,e.t16)(e.t17,e.t18),e.t20={},e.t21={isNew:!0},e.abrupt("return",(0,e.t15)(e.t19,e.t20,e.t21));case 42:case"end":return e.stop()}}),e,null,[[11,26]])})));return function(t,r,n){return e.apply(this,arguments)}}(),h_e=function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.init||{},e.next=3,r.exists();case 3:if(i=e.sent,l_e("repo exists?",i),!0!==i){e.next=7;break}throw new Error("repo already exists");case 7:if(!a.privateKey){e.next=13;break}return e.next=10,d_e(a.privateKey);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,v_e(t,a);case 15:e.t0=e.sent;case 16:return o=e.t0,s=y_e(o),l_e("peer identity: %s",s.PeerID),u=So(So({},c_e(m_e(fz(),a.profiles),n.config)),{},{Identity:s}),e.next=22,r.init(u);case 22:return e.next=24,r.open();case 24:return l_e("repo opened"),c={pass:n.pass},e.prev=26,e.next=29,r.config.get("Keychain.DEK");case 29:c.dek=e.sent,e.next=36;break;case 32:if(e.prev=32,e.t1=e.catch(26),"ERR_NOT_FOUND"===e.t1.code){e.next=36;break}throw e.t1;case 36:return e.next=38,u_e({options:void 0,multiaddrs:void 0,peerId:o,repo:r,config:u,keychainConfig:c});case 38:return l=e.sent,e.next=41,r.datastore.has(new LR("/info/self"));case 41:if(e.sent){e.next=44;break}return e.next=44,l.keychain.importPeer("self",o);case 44:return e.next=46,r.config.set("Keychain",{DEK:l.keychain.init.dek});case 46:return e.abrupt("return",{peerId:o,keychain:l.keychain});case 47:case"end":return e.stop()}}),e,null,[[26,32]])})));return function(t,r,n){return e.apply(this,arguments)}}(),d_e=function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l_e("using user-supplied private-key"),!OD(t)){e.next=3;break}return e.abrupt("return",t);case 3:return r=mm(t,"base64pad"),e.next=6,HU(r);case 6:return n=e.sent,e.next=9,WD(n.public.bytes,n.bytes);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v_e=function(e,t){var r=t.algorithm,n=void 0===r?"Ed25519":r,a=t.bits,i=void 0===a?2048:a;if(e("generating %s keypair...",n),"Ed25519"===n)return aye();if("RSA"===n)return iye({bits:i});throw cd(new Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},y_e=function(e){if(null==e.privateKey)throw cd(new Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:e.toString(),PrivKey:uN(e.privateKey,"base64pad")}},b_e=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.config,a=r.init&&r.init.profiles||[],i=r.pass,e.next=5,t.config.getAll();case 5:if(o=e.sent,s=g_e(m_e(o,a),n),o===s){e.next=10;break}return e.next=10,t.config.replace(s);case 10:if(s.Identity&&s.Identity.PrivKey){e.next=12;break}throw new om("No private key was found in the config, please intialize the repo");case 12:return u=mm(s.Identity.PrivKey,"base64pad"),e.next=15,HU(u);case 15:return c=e.sent,e.next=18,WD(c.public.bytes,c.bytes);case 18:return l=e.sent,e.next=21,u_e({options:void 0,multiaddrs:void 0,peerId:l,repo:t,config:s,keychainConfig:So({pass:i},s.Keychain)});case 21:return f=e.sent,e.abrupt("return",{peerId:l,keychain:f.keychain});case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g_e=function(e,t){return t?c_e(e,t):e},m_e=function(e,t){return(t||[]).reduce((function(e,t){var r=lJ[t];if(!r)throw new Error("Could not find profile with name '".concat(t,"'"));return l_e("applying profile %s",t),r.transform(e)}),e)},w_e=__webpack_require__(9806);var k_e=function(e){var t,r=new Uint8Array(e.reduce((function(e,t){return e+fx.encodingLength(t)}),0)),n=0,a=(0,zn.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;r=fx.encode(i,r,n),n+=fx.encodingLength(i)}}catch(sY){a.e(sY)}finally{a.f()}return r},x_e=function(e){function t(e,r,n){xn(this,t),this._refCounter=1,this.cid=e,this.priority=r||1,this.wantType=n}return Sn(t,[{key:"inc",value:function(){this._refCounter+=1}},{key:"dec",value:function(){this._refCounter=Math.max(0,this._refCounter-1)}},{key:"hasRefs",value:function(){return this._refCounter>0}},{key:Symbol.toStringTag,get:function(){var e=this.cid.toString(ov);return"WantlistEntry <key: ".concat(e,", priority: ").concat(this.priority,", refs: ").concat(this._refCounter,">")}},{key:"equals",value:function(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}}]),t}(),__e=ld.Reader,E_e=ld.Writer,S_e=ld.util,A_e=ld.roots["ipfs-bitswap"]||(ld.roots["ipfs-bitswap"]={}),C_e=A_e.Message=function(){function e(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.wantlist=null,e.prototype.blocks=S_e.emptyArray,e.prototype.payload=S_e.emptyArray,e.prototype.blockPresences=S_e.emptyArray,e.prototype.pendingBytes=0,e.encode=function(e,t){if(t||(t=E_e.create()),null!=e.wantlist&&Object.hasOwnProperty.call(e,"wantlist")&&A_e.Message.Wantlist.encode(e.wantlist,t.uint32(10).fork()).ldelim(),null!=e.blocks&&e.blocks.length)for(var r=0;r<e.blocks.length;++r)t.uint32(18).bytes(e.blocks[r]);if(null!=e.payload&&e.payload.length)for(r=0;r<e.payload.length;++r)A_e.Message.Block.encode(e.payload[r],t.uint32(26).fork()).ldelim();if(null!=e.blockPresences&&e.blockPresences.length)for(r=0;r<e.blockPresences.length;++r)A_e.Message.BlockPresence.encode(e.blockPresences[r],t.uint32(34).fork()).ldelim();return null!=e.pendingBytes&&Object.hasOwnProperty.call(e,"pendingBytes")&&t.uint32(40).int32(e.pendingBytes),t},e.decode=function(e,t){e instanceof __e||(e=__e.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new A_e.Message;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.wantlist=A_e.Message.Wantlist.decode(e,e.uint32());break;case 2:n.blocks&&n.blocks.length||(n.blocks=[]),n.blocks.push(e.bytes());break;case 3:n.payload&&n.payload.length||(n.payload=[]),n.payload.push(A_e.Message.Block.decode(e,e.uint32()));break;case 4:n.blockPresences&&n.blockPresences.length||(n.blockPresences=[]),n.blockPresences.push(A_e.Message.BlockPresence.decode(e,e.uint32()));break;case 5:n.pendingBytes=e.int32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof A_e.Message)return e;var t=new A_e.Message;if(null!=e.wantlist){if("object"!==typeof e.wantlist)throw TypeError(".Message.wantlist: object expected");t.wantlist=A_e.Message.Wantlist.fromObject(e.wantlist)}if(e.blocks){if(!Array.isArray(e.blocks))throw TypeError(".Message.blocks: array expected");t.blocks=[];for(var r=0;r<e.blocks.length;++r)"string"===typeof e.blocks[r]?S_e.base64.decode(e.blocks[r],t.blocks[r]=S_e.newBuffer(S_e.base64.length(e.blocks[r])),0):e.blocks[r].length>=0&&(t.blocks[r]=e.blocks[r])}if(e.payload){if(!Array.isArray(e.payload))throw TypeError(".Message.payload: array expected");t.payload=[];for(r=0;r<e.payload.length;++r){if("object"!==typeof e.payload[r])throw TypeError(".Message.payload: object expected");t.payload[r]=A_e.Message.Block.fromObject(e.payload[r])}}if(e.blockPresences){if(!Array.isArray(e.blockPresences))throw TypeError(".Message.blockPresences: array expected");t.blockPresences=[];for(r=0;r<e.blockPresences.length;++r){if("object"!==typeof e.blockPresences[r])throw TypeError(".Message.blockPresences: object expected");t.blockPresences[r]=A_e.Message.BlockPresence.fromObject(e.blockPresences[r])}}return null!=e.pendingBytes&&(t.pendingBytes=0|e.pendingBytes),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocks=[],r.payload=[],r.blockPresences=[]),t.defaults&&(r.wantlist=null,r.pendingBytes=0),null!=e.wantlist&&e.hasOwnProperty("wantlist")&&(r.wantlist=A_e.Message.Wantlist.toObject(e.wantlist,t)),e.blocks&&e.blocks.length){r.blocks=[];for(var n=0;n<e.blocks.length;++n)r.blocks[n]=t.bytes===String?S_e.base64.encode(e.blocks[n],0,e.blocks[n].length):t.bytes===Array?Array.prototype.slice.call(e.blocks[n]):e.blocks[n]}if(e.payload&&e.payload.length){r.payload=[];for(n=0;n<e.payload.length;++n)r.payload[n]=A_e.Message.Block.toObject(e.payload[n],t)}if(e.blockPresences&&e.blockPresences.length){r.blockPresences=[];for(n=0;n<e.blockPresences.length;++n)r.blockPresences[n]=A_e.Message.BlockPresence.toObject(e.blockPresences[n],t)}return null!=e.pendingBytes&&e.hasOwnProperty("pendingBytes")&&(r.pendingBytes=e.pendingBytes),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message"},e.Wantlist=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.entries=S_e.emptyArray,e.prototype.full=!1,e.encode=function(e,t){if(t||(t=E_e.create()),null!=e.entries&&e.entries.length)for(var r=0;r<e.entries.length;++r)A_e.Message.Wantlist.Entry.encode(e.entries[r],t.uint32(10).fork()).ldelim();return null!=e.full&&Object.hasOwnProperty.call(e,"full")&&t.uint32(16).bool(e.full),t},e.decode=function(e,t){e instanceof __e||(e=__e.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new A_e.Message.Wantlist;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.entries&&n.entries.length||(n.entries=[]),n.entries.push(A_e.Message.Wantlist.Entry.decode(e,e.uint32()));break;case 2:n.full=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof A_e.Message.Wantlist)return e;var t=new A_e.Message.Wantlist;if(e.entries){if(!Array.isArray(e.entries))throw TypeError(".Message.Wantlist.entries: array expected");t.entries=[];for(var r=0;r<e.entries.length;++r){if("object"!==typeof e.entries[r])throw TypeError(".Message.Wantlist.entries: object expected");t.entries[r]=A_e.Message.Wantlist.Entry.fromObject(e.entries[r])}}return null!=e.full&&(t.full=Boolean(e.full)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.entries=[]),t.defaults&&(r.full=!1),e.entries&&e.entries.length){r.entries=[];for(var n=0;n<e.entries.length;++n)r.entries[n]=A_e.Message.Wantlist.Entry.toObject(e.entries[n],t)}return null!=e.full&&e.hasOwnProperty("full")&&(r.full=e.full),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist"},e.WantType=function(){var e={},t=Object.create(e);return t[e[0]="Block"]=0,t[e[1]="Have"]=1,t}(),e.Entry=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.block=S_e.newBuffer([]),e.prototype.priority=0,e.prototype.cancel=!1,e.prototype.wantType=0,e.prototype.sendDontHave=!1,e.encode=function(e,t){return t||(t=E_e.create()),null!=e.block&&Object.hasOwnProperty.call(e,"block")&&t.uint32(10).bytes(e.block),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(16).int32(e.priority),null!=e.cancel&&Object.hasOwnProperty.call(e,"cancel")&&t.uint32(24).bool(e.cancel),null!=e.wantType&&Object.hasOwnProperty.call(e,"wantType")&&t.uint32(32).int32(e.wantType),null!=e.sendDontHave&&Object.hasOwnProperty.call(e,"sendDontHave")&&t.uint32(40).bool(e.sendDontHave),t},e.decode=function(e,t){e instanceof __e||(e=__e.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new A_e.Message.Wantlist.Entry;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.block=e.bytes();break;case 2:n.priority=e.int32();break;case 3:n.cancel=e.bool();break;case 4:n.wantType=e.int32();break;case 5:n.sendDontHave=e.bool();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof A_e.Message.Wantlist.Entry)return e;var t=new A_e.Message.Wantlist.Entry;switch(null!=e.block&&("string"===typeof e.block?S_e.base64.decode(e.block,t.block=S_e.newBuffer(S_e.base64.length(e.block)),0):e.block.length>=0&&(t.block=e.block)),null!=e.priority&&(t.priority=0|e.priority),null!=e.cancel&&(t.cancel=Boolean(e.cancel)),e.wantType){case"Block":case 0:t.wantType=0;break;case"Have":case 1:t.wantType=1}return null!=e.sendDontHave&&(t.sendDontHave=Boolean(e.sendDontHave)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.block="":(r.block=[],t.bytes!==Array&&(r.block=S_e.newBuffer(r.block))),r.priority=0,r.cancel=!1,r.wantType=t.enums===String?"Block":0,r.sendDontHave=!1),null!=e.block&&e.hasOwnProperty("block")&&(r.block=t.bytes===String?S_e.base64.encode(e.block,0,e.block.length):t.bytes===Array?Array.prototype.slice.call(e.block):e.block),null!=e.priority&&e.hasOwnProperty("priority")&&(r.priority=e.priority),null!=e.cancel&&e.hasOwnProperty("cancel")&&(r.cancel=e.cancel),null!=e.wantType&&e.hasOwnProperty("wantType")&&(r.wantType=t.enums===String?A_e.Message.Wantlist.WantType[e.wantType]:e.wantType),null!=e.sendDontHave&&e.hasOwnProperty("sendDontHave")&&(r.sendDontHave=e.sendDontHave),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist.Entry"},e}(),e}(),e.Block=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.prefix=S_e.newBuffer([]),e.prototype.data=S_e.newBuffer([]),e.encode=function(e,t){return t||(t=E_e.create()),null!=e.prefix&&Object.hasOwnProperty.call(e,"prefix")&&t.uint32(10).bytes(e.prefix),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof __e||(e=__e.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new A_e.Message.Block;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.prefix=e.bytes();break;case 2:n.data=e.bytes();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof A_e.Message.Block)return e;var t=new A_e.Message.Block;return null!=e.prefix&&("string"===typeof e.prefix?S_e.base64.decode(e.prefix,t.prefix=S_e.newBuffer(S_e.base64.length(e.prefix)),0):e.prefix.length>=0&&(t.prefix=e.prefix)),null!=e.data&&("string"===typeof e.data?S_e.base64.decode(e.data,t.data=S_e.newBuffer(S_e.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.prefix="":(r.prefix=[],t.bytes!==Array&&(r.prefix=S_e.newBuffer(r.prefix))),t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=S_e.newBuffer(r.data)))),null!=e.prefix&&e.hasOwnProperty("prefix")&&(r.prefix=t.bytes===String?S_e.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?S_e.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Block"},e}(),e.BlockPresenceType=function(){var e={},t=Object.create(e);return t[e[0]="Have"]=0,t[e[1]="DontHave"]=1,t}(),e.BlockPresence=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.cid=S_e.newBuffer([]),e.prototype.type=0,e.encode=function(e,t){return t||(t=E_e.create()),null!=e.cid&&Object.hasOwnProperty.call(e,"cid")&&t.uint32(10).bytes(e.cid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),t},e.decode=function(e,t){e instanceof __e||(e=__e.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new A_e.Message.BlockPresence;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.cid=e.bytes();break;case 2:n.type=e.int32();break;default:e.skipType(7&a)}}return n},e.fromObject=function(e){if(e instanceof A_e.Message.BlockPresence)return e;var t=new A_e.Message.BlockPresence;switch(null!=e.cid&&("string"===typeof e.cid?S_e.base64.decode(e.cid,t.cid=S_e.newBuffer(S_e.base64.length(e.cid)),0):e.cid.length>=0&&(t.cid=e.cid)),e.type){case"Have":case 0:t.type=0;break;case"DontHave":case 1:t.type=1}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.cid="":(r.cid=[],t.bytes!==Array&&(r.cid=S_e.newBuffer(r.cid))),r.type=t.enums===String?"Have":0),null!=e.cid&&e.hasOwnProperty("cid")&&(r.cid=t.bytes===String?S_e.base64.encode(e.cid,0,e.cid.length):t.bytes===Array?Array.prototype.slice.call(e.cid):e.cid),null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?A_e.Message.BlockPresenceType[e.type]:e.type),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ld.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.BlockPresence"},e}(),e}(),T_e=C_e.Wantlist.WantType.Block,R_e=C_e.Wantlist.WantType.Have,I_e=function(){function e(t,r){xn(this,e),this.set=r?Ile({system:"ipfs",component:"bitswap",metric:"wantlist",metrics:r.metrics}):new Map,this._stats=t}return Sn(e,[{key:"length",get:function(){return this.set.size}},{key:"add",value:function(e,t,r){var n=e.toString(ov),a=this.set.get(n);a?(a.inc(),a.priority=t,a.wantType===R_e&&r===T_e&&(a.wantType=r)):(this.set.set(n,new x_e(e,t,r)),this._stats&&this._stats.push(null,"wantListSize",1))}},{key:"remove",value:function(e){var t=e.toString(ov),r=this.set.get(t);r&&(r.dec(),r.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}},{key:"removeForce",value:function(e){this.set.has(e)&&this.set.delete(e)}},{key:"forEach",value:function(e){return this.set.forEach(e)}},{key:"entries",value:function(){return this.set.entries()}},{key:"sortedEntries",value:function(){return new Map((e=function(e){return e[1].key},t=Array.from(this.set.entries()),Array.prototype.slice.call(t,0).sort((function(t,r){var n=e(t),a=e(r);return n<a?-1:n>a?1:0}))));var e,t}},{key:"contains",value:function(e){var t=e.toString(ov);return this.set.has(t)}},{key:"get",value:function(e){var t=e.toString(ov);return this.set.get(t)}}]),e}();I_e.Entry=x_e;var P_e=I_e.Entry,D_e=function(e){function t(e,r,n,a,i){xn(this,t),this.entry=new P_e(e,r,n),this.cancel=Boolean(a),this.sendDontHave=Boolean(i)}return Sn(t,[{key:"cid",get:function(){return this.entry.cid},set:function(e){this.entry.cid=e}},{key:"priority",get:function(){return this.entry.priority},set:function(e){this.entry.priority=e}},{key:"wantType",get:function(){return this.entry.wantType},set:function(e){this.entry.wantType=e}},{key:Symbol.toStringTag,get:function(){var e=this.cid.toString(ov);return"BitswapMessageEntry ".concat(e," <cancel: ").concat(this.cancel,", priority: ").concat(this.priority,">")}},{key:"equals",value:function(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}]),t}(),N_e=function(e,t){var r=["bitswap"];return t&&r.push(t),e&&r.push("".concat(e.toString().slice(0,8))),Object.assign(Gh(r.join(":")),{error:Gh(r.concat(["error"]).join(":"))})},O_e=function(e,t){if(e.size!==t.size)return!1;var r,n=(0,zn.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=(0,wn.Z)(r.value,2),i=a[0],o=a[1],s=t.get(i);if(void 0===s)return!1;if(o instanceof Uint8Array&&s instanceof Uint8Array&&!cN(o,s))return!1;if(o instanceof D_e&&s instanceof D_e&&!o.equals(s))return!1}}catch(sY){n.e(sY)}finally{n.f()}return!0},L_e=function(e){function t(e){xn(this,t),this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}return Sn(t,[{key:"empty",get:function(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}},{key:"addEntry",value:function(e,r,n,a,i){null==n&&(n=t.WantType.Block);var o=e.toString(ov),s=this.wantlist.get(o);s?(s.wantType===n&&(s.priority=r),a&&(s.cancel=Boolean(a)),i&&(s.sendDontHave=Boolean(i)),n===t.WantType.Block&&s.wantType===t.WantType.Have&&(s.wantType=n)):this.wantlist.set(o,new D_e(e,r,n,a,i))}},{key:"addBlock",value:function(e,t){var r=e.toString(ov);this.blocks.set(r,t)}},{key:"addHave",value:function(e){var r=e.toString(ov);this.blockPresences.has(r)||this.blockPresences.set(r,t.BlockPresenceType.Have)}},{key:"addDontHave",value:function(e){var r=e.toString(ov);this.blockPresences.has(r)||this.blockPresences.set(r,t.BlockPresenceType.DontHave)}},{key:"cancel",value:function(e){var r=e.toString(ov);this.wantlist.delete(r),this.addEntry(e,0,t.WantType.Block,!0,!1)}},{key:"setPendingBytes",value:function(e){this.pendingBytes=e}},{key:"serializeToBitswap100",value:function(){var e={wantlist:{entries:Array.from(this.wantlist.values()).map((function(e){return{block:e.cid.bytes,priority:Number(e.priority),cancel:Boolean(e.cancel)}})),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return C_e.encode(e).finish()}},{key:"serializeToBitswap110",value:function(){var e,t={wantlist:{entries:Array.from(this.wantlist.values()).map((function(e){return{block:e.cid.bytes,priority:Number(e.priority),wantType:e.wantType,cancel:Boolean(e.cancel),sendDontHave:Boolean(e.sendDontHave)}})),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes},r=(0,zn.Z)(this.blocks.entries());try{for(r.s();!(e=r.n()).done;){var n=(0,wn.Z)(e.value,2),a=n[0],i=n[1],o=bv.parse(a),s=o.version,u=o.code,c=o.multihash.code,l=o.multihash.digest.length,f=k_e([s,u,c,l]);t.payload.push(new C_e.Block({prefix:f,data:i}))}}catch(sY){r.e(sY)}finally{r.f()}var p,h=(0,zn.Z)(this.blockPresences);try{for(h.s();!(p=h.n()).done;){var d=(0,wn.Z)(p.value,2),v=d[0],y=d[1];t.blockPresences.push(new C_e.BlockPresence({cid:bv.parse(v).bytes,type:y}))}}catch(sY){h.e(sY)}finally{h.f()}return this.pendingBytes>0&&(t.pendingBytes=this.pendingBytes),C_e.encode(t).finish()}},{key:"equals",value:function(e){return!!(this.full===e.full&&this.pendingBytes===e.pendingBytes&&O_e(this.wantlist,e.wantlist)&&O_e(this.blocks,e.blocks)&&O_e(this.blockPresences,e.blockPresences))}},{key:Symbol.toStringTag,get:function(){var e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return"BitswapMessage <full: ".concat(this.full,", list: ").concat(e,", blocks: ").concat(t,">")}}]),t}();L_e.deserialize=function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=C_e.decode(t),a=n.wantlist&&n.wantlist.full||!1,i=new L_e(a),n.wantlist&&n.wantlist.entries&&n.wantlist.entries.forEach((function(e){if(e.block){var t=bv.decode(e.block);i.addEntry(t,e.priority||0,e.wantType,Boolean(e.cancel),Boolean(e.sendDontHave))}})),n.blockPresences&&n.blockPresences.forEach((function(e){if(e.cid){var t=bv.decode(e.cid);e.type===L_e.BlockPresenceType.Have?i.addHave(t):i.addDontHave(t)}})),!(n.blocks.length>0)){e.next=9;break}return e.next=8,Promise.all(n.blocks.map(function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kg.digest(t);case 2:r=e.sent,n=bv.createV0(r),i.addBlock(n,t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case 14:return e.abrupt("return",i);case 9:if(!(n.payload.length>0)){e.next=14;break}return e.next=12,Promise.all(n.payload.map(function(){var e=Zh(Fh().mark((function e(t){var n,a,o,s,u,c,l;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.prefix&&t.data){e.next=2;break}return e.abrupt("return");case 2:if(n=w_e(t.prefix),a=n[0],o=n[1],(s=n[2])!==Kg.code){e.next=10;break}e.t0=Kg,e.next=16;break;case 10:if(e.t1=r,!e.t1){e.next=15;break}return e.next=14,r.getHasher(s);case 14:e.t1=e.sent;case 15:e.t0=e.t1;case 16:if(u=e.t0){e.next=19;break}throw cd(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");case 19:return e.next=21,u.digest(t.data);case 21:c=e.sent,l=bv.create(a,o,c),i.addBlock(l,t.data);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return i.setPendingBytes(n.pendingBytes),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),L_e.blockPresenceSize=function(e){return e.bytes.length+1},L_e.Entry=D_e,L_e.WantType={Block:C_e.Wantlist.WantType.Block,Have:C_e.Wantlist.WantType.Have},L_e.BlockPresenceType={Have:C_e.BlockPresenceType.Have,DontHave:C_e.BlockPresenceType.DontHave};var B_e=Math.pow(2,31)-1,M_e=function(e,t,r){var n=null,a=null,i=function(){n&&(clearTimeout(n),a=null,n=null)},o=function(){if(!t)return e.apply(this,arguments);var o=this,s=arguments,u=r&&!n;return i(),a=function(){e.apply(o,s)},n=setTimeout((function(){if(n=null,!u){var e=a;return a=null,e()}}),t),u?a():void 0};return o.cancel=i,o.flush=function(){var e=a;i(),e&&e()},o};var U_e=function(){function e(t,r,n){xn(this,e),this.peerId=r,this.network=n,this.refcnt=1,this._entries=[],this._log=N_e(t,"msgqueue"),this.sendEntries=M_e(this._sendEntries.bind(this),1)}return Sn(e,[{key:"addMessage",value:function(e){e.empty||this.send(e)}},{key:"addEntries",value:function(e){this._entries=this._entries.concat(e),this.sendEntries()}},{key:"_sendEntries",value:function(){if(this._entries.length){var e=new L_e(!1);this._entries.forEach((function(t){t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}}},{key:"send",value:function(){var e=Zh(Fh().mark((function e(t){var r=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.network.connectTo(this.peerId);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),this._log.error("cant connect to peer %s: %s",this.peerId.toString(),e.t0.message),e.abrupt("return");case 9:this._log("sending message to peer %s",this.peerId.toString()),this.network.sendMessage(this.peerId,t).catch((function(e){r._log.error("send error: %s",e.message)}));case 11:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),j_e=function(){function e(t,r,n,a){xn(this,e),this.peers=Ile({system:"ipfs",component:"bitswap",metric:"want-manager-peers",metrics:a.metrics}),this.wantlist=new I_e(n,a),this.network=r,this._stats=n,this._peerId=t,this._log=N_e(t,"want")}return Sn(e,[{key:"_addEntries",value:function(e,t,r){var n=this,a=e.map((function(e,r){return new L_e.Entry(e,B_e-r,L_e.WantType.Block,t)}));a.forEach((function(e){e.cancel?r?n.wantlist.removeForce(e.cid.toString(ov)):n.wantlist.remove(e.cid):(n._log("adding to wl"),n.wantlist.add(e.cid,e.priority))}));var i,o=(0,zn.Z)(this.peers.values());try{for(o.s();!(i=o.n()).done;){i.value.addEntries(a)}}catch(sY){o.e(sY)}finally{o.f()}}},{key:"_startPeerHandler",value:function(e){var t=this.peers.get(e.toString());if(!t){t=new U_e(this._peerId,e,this.network);var r,n=new L_e(!0),a=(0,zn.Z)(this.wantlist.entries());try{for(a.s();!(r=a.n()).done;){var i=r.value;n.addEntry(i[1].cid,i[1].priority)}}catch(sY){a.e(sY)}finally{a.f()}return t.addMessage(n),this.peers.set(e.toString(),t),t}t.refcnt++}},{key:"_stopPeerHandler",value:function(e){var t=this.peers.get(e.toString());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toString()))}},{key:"wantBlocks",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._addEntries(e,!1),r&&r.signal&&r.signal.addEventListener("abort",(function(){t.cancelWants(e)}))}},{key:"unwantBlocks",value:function(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}},{key:"cancelWants",value:function(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}},{key:"connectedPeers",value:function(){return Array.from(this.peers.keys())}},{key:"connected",value:function(e){this._startPeerHandler(e)}},{key:"disconnected",value:function(e){this._stopPeerHandler(e)}},{key:"start",value:function(){}},{key:"stop",value:function(){var e=this;this.peers.forEach((function(t){return e.disconnected(t.peerId)}))}}]),e}(),F_e="/ipfs/bitswap/1.0.0",z_e="/ipfs/bitswap/1.1.0",Z_e="/ipfs/bitswap/1.2.0",q_e=function(){function e(t,r,n){var a,i,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};xn(this,e),this._log=N_e(t.peerId,"network"),this._libp2p=t,this._bitswap=r,this._protocols=[F_e],s.b100Only||(this._protocols.unshift(z_e),this._protocols.unshift(Z_e)),this._stats=n,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=s.hashLoader,this._maxInboundStreams=null!==(a=s.maxInboundStreams)&&void 0!==a?a:32,this._maxOutboundStreams=null!==(i=s.maxOutboundStreams)&&void 0!==i?i:128,this._incomingStreamTimeout=null!==(o=s.incomingStreamTimeout)&&void 0!==o?o:3e4}return Sn(e,[{key:"start",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._running=!0,e.next=3,this._libp2p.handle(this._protocols,this._onConnection,{maxInboundStreams:this._maxInboundStreams,maxOutboundStreams:this._maxOutboundStreams});case 3:t=f9({onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect}),this._registrarIds=[],r=(0,zn.Z)(this._protocols),e.prev=6,r.s();case 8:if((n=r.n()).done){e.next=17;break}return a=n.value,e.t0=this._registrarIds,e.next=13,this._libp2p.registrar.register(a,t);case 13:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(6),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this._libp2p.getConnections().forEach((function(e){i._onPeerConnect(e.remotePeer)}));case 26:case"end":return e.stop()}}),e,this,[[6,19,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._running=!1,e.next=3,this._libp2p.unhandle(this._protocols);case 3:if(null!=this._registrarIds){t=(0,zn.Z)(this._registrarIds);try{for(t.s();!(r=t.n()).done;)n=r.value,this._libp2p.registrar.unregister(n)}catch(sY){t.e(sY)}finally{t.f()}this._registrarIds=[]}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_onConnection",value:function(e){var t=this,r=e.stream,n=e.connection;if(this._running){var a=new wm.TimeoutController(this._incomingStreamTimeout);Promise.resolve().then(Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._log("incoming new bitswap %s connection from %p",r.stat.protocol,n.remotePeer),e.next=3,yF(See(r.source,a.signal),Oee(),function(){var e=Zh(Fh().mark((function e(r){var i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,o=!1,e.prev=2,u=xm(r);case 4:return e.next=6,u.next();case 6:if(!(i=!(c=e.sent).done)){e.next=24;break}return l=c.value,e.prev=8,e.next=11,L_e.deserialize(l.subarray(),t._hashLoader);case 11:return f=e.sent,e.next=14,t._bitswap._receiveMessage(n.remotePeer,f);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(8),t._bitswap._receiveError(e.t0),e.abrupt("break",24);case 20:a.reset();case 21:i=!1,e.next=4;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(2),o=!0,s=e.t1;case 30:if(e.prev=30,e.prev=31,!i||null==u.return){e.next=35;break}return e.next=35,u.return();case 35:if(e.prev=35,!o){e.next=38;break}throw s;case 38:return e.finish(35);case 39:return e.finish(30);case 40:case"end":return e.stop()}}),e,null,[[2,26,30,40],[8,16],[31,,35,39]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).catch((function(e){t._log(e),r.abort(e)})).finally((function(){a.clear(),r.close()}))}}},{key:"_onPeerConnect",value:function(e){this._bitswap._onPeerConnected(e)}},{key:"_onPeerDisconnect",value:function(e){this._bitswap._onPeerDisconnected(e)}},{key:"findProviders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._libp2p.contentRouting.findProviders(e,t)}},{key:"findAndConnect",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0,i=!1,o=!1,e.prev=4,u=xm(this.findProviders(t,r));case 6:return e.next=8,u.next();case 8:if(!(i=!(c=e.sent).done)){e.next=18;break}if(l=c.value,this._log("connecting to provider ".concat(l.id)),n.push(this.connectTo(l.id,r).catch((function(e){f._log.error(e)}))),3!==++a){e.next=15;break}return e.abrupt("break",18);case 15:i=!1,e.next=6;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),o=!0,s=e.t0;case 24:if(e.prev=24,e.prev=25,!i||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!o){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(24);case 34:return e.next=36,Promise.all(n);case 36:case"end":return e.stop()}}),e,this,[[4,20,24,34],[25,,29,33]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"provide",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._libp2p.contentRouting.provide(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}throw new Error("network isn't running");case 2:return n=t.toString(),this._log("sendMessage to %s",n,r),e.next=6,this._libp2p.dial(t);case 6:return a=e.sent,e.next=9,a.newStream([Z_e,z_e,F_e]);case 9:return i=e.sent,e.next=12,V_e(i,r,this._log);case 12:this._updateSentStats(t,r.blocks);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"connectTo",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}throw new Error("network isn't running");case 2:return e.abrupt("return",this._libp2p.dial(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateSentStats",value:function(e,t){var r=e.toString();if(this._stats){var n,a=(0,zn.Z)(t.values());try{for(a.s();!(n=a.n()).done;){var i=n.value;this._stats.push(r,"dataSent",i.length)}}catch(sY){a.e(sY)}finally{a.f()}this._stats.push(r,"blocksSent",t.size)}}}]),e}();function V_e(e,t,r){return K_e.apply(this,arguments)}function K_e(){return K_e=Zh(Fh().mark((function e(t,r,n){var a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t.stat.protocol,e.next=e.t0===F_e?4:e.t0===z_e||e.t0===Z_e?6:8;break;case 4:return a=r.serializeToBitswap100(),e.abrupt("break",9);case 6:return a=r.serializeToBitswap110(),e.abrupt("break",9);case 8:throw new Error("Unknown protocol: "+t.stat.protocol);case 9:return e.next=11,yF([a],Ree(),t);case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(0),n(e.t1);case 16:return e.prev=16,t.close(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])}))),K_e.apply(this,arguments)}var H_e=function(){function e(t){xn(this,e),this.partner=t,this.wantlist=new I_e,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}return Sn(e,[{key:"sentBytes",value:function(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}},{key:"receivedBytes",value:function(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}},{key:"wants",value:function(e,t,r){this.wantlist.add(e,t,r)}},{key:"cancelWant",value:function(e){this.wantlist.remove(e)}},{key:"wantlistContains",value:function(e){return this.wantlist.get(e)}},{key:"debtRatio",value:function(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}]),e}(),W_e=function(e,t){Cn(n,e);var r=Dn(n);function n(e,t){var a;xn(this,n),(a=r.call(this))._cmp=t||a._defaultSort,a._keys=[];var i,o=(0,zn.Z)(e||[]);try{for(o.s();!(i=o.n()).done;){var s=(0,wn.Z)(i.value,2),u=s[0],c=s[1];a.set(u,c)}}catch(sY){o.e(sY)}finally{o.f()}return a}return Sn(n,[{key:"update",value:function(e){if(!(e<0||e>=this._keys.length)){var t=this._keys[e];this._keys.splice(e,1);var r=this._find(t);this._keys.splice(r,0,t)}}},{key:"set",value:function(e,t){if(this.has(e)){var r=this.indexOf(e);this._keys.splice(r,1)}$b(Tn(n.prototype),"set",this).call(this,e,t);var a=this._find(e);return this._keys.splice(a,0,e),this}},{key:"clear",value:function(){$b(Tn(n.prototype),"clear",this).call(this),this._keys=[]}},{key:"delete",value:function(e){if(!this.has(e))return!1;var t=this.indexOf(e);return this._keys.splice(t,1),$b(Tn(n.prototype),"delete",this).call(this,e)}},{key:"indexOf",value:function(e){if(!this.has(e))return-1;var t=this._find(e);if(this._keys[t]===e)return t;for(var r=1;r<this._keys.length;r++){if(this._keys[t+r]===e)return t+r;if(this._keys[t-r]===e)return t-r}return-1}},{key:"_find",value:function(e){for(var t=0,r=this._keys.length;t<r;){var n=t+r>>>1,a=this._kCmp(this._keys[n],e);if(a<0)t=n+1;else{if(!(a>0))return n;r=n}}return t}},{key:"keys",value:Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,zn.Z)(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,n;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,zn.Z)(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,this.get(n);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"entries",value:Fh().mark((function e(){var t,r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,zn.Z)(this._keys),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,[n,this.get(n)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:t,value:Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.entries(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"forEach",value:function(e,t){if(e){var r,n=(0,zn.Z)(this._keys);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.apply(t,[[a,this.get(a)]])}}catch(sY){n.e(sY)}finally{n.f()}}}},{key:"_defaultSort",value:function(e,t){return e[0]<t[0]?-1:t[0]<e[0]?1:0}},{key:"_kCmp",value:function(e,t){return this._cmp([e,this.get(e)],[t,this.get(t)])}}]),n}(On(Map),Symbol.iterator),G_e={hasNewInfo:function(){return!1},merge:function(){}},Y_e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G_e;xn(this,e),this._taskMerger=t,this._byPeer=new W_e([],Q_e.compare)}return Sn(e,[{key:"pushTasks",value:function(e,t){var r=this._byPeer.get(e.toString());r||(r=new Q_e(e,this._taskMerger)),r.pushTasks(t),this._byPeer.set(e.toString(),r)}},{key:"popTasks",value:function(e){var t=this._head();if(void 0===t)return{tasks:[],pendingSize:0};var r=t.popTasks(e),n=r.tasks,a=r.pendingSize;if(0===n.length)return{tasks:n,pendingSize:a};var i=t.peerId;return t.isIdle()?this._byPeer.delete(i.toString()):this._byPeer.update(0),{peerId:i,tasks:n,pendingSize:a}}},{key:"_head",value:function(){if(0!==this._byPeer.size){var e,t=(0,zn.Z)(this._byPeer);try{for(t.s();!(e=t.n()).done;){return(0,wn.Z)(e.value,2)[1]}}catch(sY){t.e(sY)}finally{t.f()}}}},{key:"remove",value:function(e,t){var r=this._byPeer.get(t.toString());r&&r.remove(e)}},{key:"tasksDone",value:function(e,t){var r=this._byPeer.get(e.toString());if(r){var n,a=this._byPeer.indexOf(e.toString()),i=(0,zn.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.taskDone(o)}}catch(sY){i.e(sY)}finally{i.f()}this._byPeer.update(a)}}}]),e}(),Q_e=function(){function e(t,r){xn(this,e),this.peerId=t,this._taskMerger=r,this._activeTotalSize=0,this._pending=new J_e,this._active=new Set}return Sn(e,[{key:"pushTasks",value:function(e){var t,r=(0,zn.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this._pushTask(n)}}catch(sY){r.e(sY)}finally{r.f()}}},{key:"_pushTask",value:function(e){if(this._taskHasMoreInfoThanActiveTasks(e)){var t=this._pending.get(e.topic);if(t)return e.priority>t.priority&&this._pending.updatePriority(e.topic,e.priority),void this._taskMerger.merge(e,t);this._pending.add(e)}}},{key:"_taskHasMoreInfoThanActiveTasks",value:function(e){var t,r=[],n=(0,zn.Z)(this._active);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.topic===e.topic&&r.push(a)}}catch(sY){n.e(sY)}finally{n.f()}return 0===r.length||this._taskMerger.hasNewInfo(e,r)}},{key:"popTasks",value:function(e){for(var t=0,r=[],n=this._pending.tasks(),a=0;a<n.length&&t<e;a++){var i=n[a];r.push(i),t+=i.size,this._pending.delete(i.topic),this._activeTotalSize+=i.size,this._active.add(i)}return{tasks:r,pendingSize:this._pending.totalSize}}},{key:"taskDone",value:function(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}},{key:"remove",value:function(e){this._pending.delete(e)}},{key:"isIdle",value:function(){return 0===this._pending.length&&0===this._active.size}}],[{key:"compare",value:function(e,t){return 0===e[1]._pending.length?1:0===t[1]._pending.length?-1:e[1]._activeTotalSize===t[1]._activeTotalSize?t[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-t[1]._activeTotalSize}}]),e}(),J_e=function(){function e(){xn(this,e),this._tasks=new W_e([],this._compare)}return Sn(e,[{key:"length",get:function(){return this._tasks.size}},{key:"totalSize",get:function(){return(0,kn.Z)(this._tasks.values()).reduce((function(e,t){return e+t.task.size}),0)}},{key:"get",value:function(e){return(this._tasks.get(e)||{}).task}},{key:"add",value:function(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}},{key:"delete",value:function(e){this._tasks.delete(e)}},{key:"tasks",value:function(){return(0,kn.Z)(this._tasks.values()).map((function(e){return e.task}))}},{key:"updatePriority",value:function(e,t){var r=this._tasks.get(e);if(r){var n=this._tasks.indexOf(e);r.task.priority=t,this._tasks.update(n)}}},{key:"_compare",value:function(e,t){return e[1].task.priority===t[1].task.priority?e[1].created-t[1].created:t[1].task.priority-e[1].task.priority}}]),e}(),X_e={hasNewInfo:function(e,t){var r,n=!1,a=!1,i=(0,zn.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.data.haveBlock&&(n=!0),o.data.isWantBlock&&(a=!0)}}catch(sY){i.e(sY)}finally{i.f()}return!(a||!e.data.isWantBlock)||!(n||!e.data.haveBlock)},merge:function(e,t){var r=e.data,n=t.data;!n.haveBlock&&r.haveBlock&&(n.haveBlock=r.haveBlock,n.blockSize=r.blockSize),!n.isWantBlock&&r.isWantBlock&&(n.isWantBlock=!0,n.haveBlock&&!r.haveBlock||(n.haveBlock=r.haveBlock,t.size=e.size)),n.isWantBlock&&n.haveBlock&&(t.size=n.blockSize)}},$_e=L_e.WantType,eEe=function(){function e(t,r,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};xn(this,e),this._log=N_e(t,"engine"),this.blockstore=r,this.network=n,this._stats=a,this._opts=this._processOpts(o),this.ledgerMap=Ile({system:"ipfs",component:"bitswap",metric:"ledger-map",metrics:i.metrics}),this._running=!1,this._requestQueue=new Y_e(X_e)}return Sn(e,[{key:"_processOpts",value:function(e){return So({maxSizeReplaceHasWithBlock:1024,targetMessageSize:16384},e)}},{key:"_scheduleProcessTasks",value:function(){var e=this;setTimeout((function(){e._processTasks()}))}},{key:"_processTasks",value:function(){var e=Zh(Fh().mark((function e(){var t,r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running){e.next=2;break}return e.abrupt("return");case 2:if(t=this._requestQueue.popTasks(this._opts.targetMessageSize),r=t.peerId,n=t.tasks,a=t.pendingSize,0!==n.length){e.next=5;break}return e.abrupt("return");case 5:(i=new L_e(!1)).setPendingBytes(a),o=[],s=new Map,u=(0,zn.Z)(n);try{for(u.s();!(c=u.n()).done;)l=c.value,f=bv.parse(l.topic),l.data.haveBlock?l.data.isWantBlock?(o.push(f),s.set(l.topic,l.data)):i.addHave(f):i.addDontHave(f)}catch(sY){u.e(sY)}finally{u.f()}return e.next=13,this._getBlocks(o);case 13:p=e.sent,h=(0,zn.Z)(s);try{for(h.s();!(d=h.n()).done;)v=(0,wn.Z)(d.value,2),y=v[0],b=v[1],g=bv.parse(y),(m=p.get(y))?i.addBlock(g,m):b.sendDontHave&&i.addDontHave(g)}catch(sY){h.e(sY)}finally{h.f()}if(!i.empty){e.next=20;break}return r&&this._requestQueue.tasksDone(r,n),this._scheduleProcessTasks(),e.abrupt("return");case 20:if(e.prev=20,e.t0=r,!e.t0){e.next=25;break}return e.next=25,this.network.sendMessage(r,i);case 25:w=(0,zn.Z)(p.entries());try{for(w.s();!(k=w.n()).done;)x=(0,wn.Z)(k.value,2),_=x[0],E=x[1],r&&this.messageSent(r,bv.parse(_),E)}catch(sY){w.e(sY)}finally{w.f()}e.next=32;break;case 29:e.prev=29,e.t1=e.catch(20),this._log.error(e.t1);case 32:r&&this._requestQueue.tasksDone(r,n),this._scheduleProcessTasks();case 34:case"end":return e.stop()}}),e,this,[[20,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"wantlistForPeer",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);return r?r.wantlist.sortedEntries():new Map}},{key:"ledgerForPeer",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);return r?{peer:r.partner,value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}},{key:"peers",value:function(){return Array.from(this.ledgerMap.values()).map((function(e){return e.partner}))}},{key:"receivedBlocks",value:function(e){if(e.length){var t,r=(0,zn.Z)(this.ledgerMap.values());try{for(r.s();!(t=r.n()).done;){var n,a=t.value,i=(0,zn.Z)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=a.wantlistContains(o.cid);if(s){var u=o.data.length,c=this._sendAsBlock(s.wantType,u),l=u;c||(l=L_e.blockPresenceSize(s.cid)),this._requestQueue.pushTasks(a.partner,[{topic:s.cid.toString(ov),priority:s.priority,size:l,data:{blockSize:u,isWantBlock:c,haveBlock:!0,sendDontHave:!1}}])}}}catch(sY){i.e(sY)}finally{i.f()}}}catch(sY){r.e(sY)}finally{r.f()}this._scheduleProcessTasks()}}},{key:"messageReceived",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._findOrCreate(t),!r.empty){e.next=3;break}return e.abrupt("return");case 3:if(r.full&&(n.wantlist=new I_e),this._updateBlockAccounting(r.blocks,n),0!==r.wantlist.size){e.next=8;break}return this._scheduleProcessTasks(),e.abrupt("return");case 8:return a=[],i=[],r.wantlist.forEach((function(e){e.cancel?(n.cancelWant(e.cid),a.push(e.cid)):(n.wants(e.cid,e.priority,e.wantType),i.push(e))})),this._cancelWants(t,a),e.next=14,this._addWants(t,i);case 14:this._scheduleProcessTasks();case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_cancelWants",value:function(e,t){var r,n=(0,zn.Z)(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;this._requestQueue.remove(a.toString(ov),e)}}catch(sY){n.e(sY)}finally{n.f()}}},{key:"_addWants",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l,f;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlockSizes(r.map((function(e){return e.cid})));case 2:n=e.sent,a=[],i=(0,zn.Z)(r);try{for(i.s();!(o=i.n()).done;)s=o.value,u=s.cid.toString(ov),null==(c=n.get(u))?s.sendDontHave&&a.push({topic:u,priority:s.priority,size:L_e.blockPresenceSize(s.cid),data:{isWantBlock:s.wantType===$_e.Block,blockSize:0,haveBlock:!1,sendDontHave:s.sendDontHave}}):(l=this._sendAsBlock(s.wantType,c),f=c,l||(f=L_e.blockPresenceSize(s.cid)),a.push({topic:u,priority:s.priority,size:f,data:{isWantBlock:l,blockSize:c,haveBlock:!0,sendDontHave:s.sendDontHave}})),this._requestQueue.pushTasks(t,a)}catch(sY){i.e(sY)}finally{i.f()}case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_sendAsBlock",value:function(e,t){return e===$_e.Block||t<=this._opts.maxSizeReplaceHasWithBlock}},{key:"_getBlockSizes",value:function(){var e=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocks(t);case 2:return r=e.sent,e.abrupt("return",new Map((0,kn.Z)(r).map((function(e){var t=(0,wn.Z)(e,2);return[t[0],t[1].length]}))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getBlocks",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Map,e.next=3,Promise.all(t.map(function(){var e=Zh(Fh().mark((function e(t){var a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.blockstore.get(t);case 3:a=e.sent,r.set(t.toString(ov),a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"ERR_NOT_FOUND"!==e.t0.code&&n._log.error("failed to query blockstore for %s: %s",t,e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateBlockAccounting",value:function(e,t){var r,n=(0,zn.Z)(e.values());try{for(n.s();!(r=n.n()).done;){var a=r.value;this._log("got block (%s bytes)",a.length),t.receivedBytes(a.length)}}catch(sY){n.e(sY)}finally{n.f()}}},{key:"messageSent",value:function(e,t,r){var n=this._findOrCreate(e);n.sentBytes(r.length),n.wantlist.remove(t)}},{key:"numBytesSentTo",value:function(e){return this._findOrCreate(e).accounting.bytesSent}},{key:"numBytesReceivedFrom",value:function(e){return this._findOrCreate(e).accounting.bytesRecv}},{key:"peerDisconnected",value:function(e){this.ledgerMap.delete(e.toString())}},{key:"_findOrCreate",value:function(e){var t=e.toString(),r=this.ledgerMap.get(t);if(r)return r;var n=new H_e(e);return this.ledgerMap.set(t,n),this._stats&&this._stats.push(t,"peerCount",1),n}},{key:"start",value:function(){this._running=!0}},{key:"stop",value:function(){this._running=!1}}]),e}(),tEe=function(e){return"unwant:".concat(uN(e.multihash.bytes,"base64"))},rEe=function(e){return"block:".concat(uN(e.multihash.bytes,"base64"))},nEe=function(e){Cn(r,e);var t=Dn(r);function r(e){var n;return xn(this,r),(n=t.call(this)).setMaxListeners(1e3),n._log=N_e(e,"notif"),n}return Sn(r,[{key:"hasBlock",value:function(e,t){var r=rEe(e);this._log(r),this.emit(r,t)}},{key:"wantBlock",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Not a valid cid");var n=rEe(e),a=tEe(e);return this._log("wantBlock:".concat(e)),new Promise((function(i,o){var s=function(){t.removeListener(n,u),o(new Error("Block for ".concat(e," unwanted")))},u=function(e){t.removeListener(a,s),i(e)};t.once(a,s),t.once(n,u),r&&r.signal&&r.signal.addEventListener("abort",(function(){t.removeListener(n,u),t.removeListener(a,s),o(new Error("Want for ".concat(e," aborted")))}))}))}},{key:"unwantBlock",value:function(e){var t=tEe(e);this._log(t),this.emit(t)}}]),r}(vue.EventEmitter),aEe=__webpack_require__(6755),iEe=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this))._options=n,a._queue=[],a._stats={},a._frequencyLastTime=Date.now(),a._frequencyAccumulators={},a._movingAverages={},a._update=a._update.bind(Pn(a)),e.forEach((function(e){a._stats[e]=BigInt(0),a._movingAverages[e]={},a._options.movingAverageIntervals.forEach((function(t){(a._movingAverages[e][t]=aEe(t)).push(a._frequencyLastTime,0)}))})),a._enabled=a._options.enabled,a}return Sn(r,[{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._disabled=!0}},{key:"stop",value:function(){this._timeout&&clearTimeout(this._timeout)}},{key:"snapshot",get:function(){return Object.assign({},this._stats)}},{key:"movingAverages",get:function(){return Object.assign({},this._movingAverages)}},{key:"push",value:function(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}},{key:"_resetComputeTimeout",value:function(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}},{key:"_nextTimeout",value:function(){var e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}},{key:"_update",value:function(){if(this._timeout=null,this._queue.length){for(var e;this._queue.length;){var t=e=this._queue.shift();t&&this._applyOp(t)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}},{key:"_updateFrequency",value:function(e){var t=this,r=e-this._frequencyLastTime;r&&Object.keys(this._stats).forEach((function(n){t._updateFrequencyFor(n,r,e)})),this._frequencyLastTime=e}},{key:"_updateFrequencyFor",value:function(e,t,r){var n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;var a=n/t*1e3,i=this._movingAverages[e];i||(i=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((function(e){var t=i[e];t||(t=i[e]=aEe(e)),t.push(r,a)}))}},{key:"_applyOp",value:function(e){var t=e[0],r=e[1];if("number"!==typeof r)throw new Error("invalid increment number: ".concat(r));Object.prototype.hasOwnProperty.call(this._stats,t)||(this._stats[t]=BigInt(0)),this._stats[t]=BigInt(this._stats[t])+BigInt(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}]),r}(vue.EventEmitter),oEe={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[6e4,3e5,9e5]},sEe=function(e){Cn(r,e);var t=Dn(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oEe;xn(this,r),n=t.call(this);var o=Object.assign({},oEe,i);if("number"!==typeof o.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!==typeof o.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");return n._initialCounters=a,n._options=o,n._enabled=n._options.enabled,n._global=new iEe(a,o),n._global.on("update",(function(e){return n.emit("update",e)})),n._peers=Ile({system:"ipfs",component:"bitswap",metric:"stats-peers",metrics:e.metrics}),n}return Sn(r,[{key:"enable",value:function(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}},{key:"disable",value:function(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}},{key:"stop",value:function(){this._enabled=!1,this._global.stop();var e,t=(0,zn.Z)(this._peers);try{for(t.s();!(e=t.n()).done;){e.value[1].stop()}}catch(sY){t.e(sY)}finally{t.f()}}},{key:"snapshot",get:function(){return this._global.snapshot}},{key:"movingAverages",get:function(){return this._global.movingAverages}},{key:"forPeer",value:function(e){var t="string"!==typeof e&&e.toString?e.toString():"".concat(e);return this._peers.get(t)}},{key:"push",value:function(e,t,r){if(this._enabled&&(this._global.push(t,r),e)){var n=this._peers.get(e);n||(n=new iEe(this._initialCounters,this._options),this._peers.set(e,n)),n.push(t,r)}}},{key:"disconnected",value:function(e){var t=e.toString(),r=this._peers.get(t);r&&(r.stop(),this._peers.delete(t))}}]),r}(vue.EventEmitter),uEe={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},cEe=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"],lEe=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return xn(this,r),(a=t.call(this))._libp2p=e,a._log=N_e(a.peerId),a._options=Object.assign({},uEe,i),a._stats=new sEe(e,cEe,{enabled:a._options.statsEnabled,computeThrottleTimeout:a._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:a._options.statsComputeThrottleMaxQueueSize}),a.network=new q_e(e,Pn(a),a._stats,{hashLoader:i.hashLoader,maxInboundStreams:i.maxInboundStreams,maxOutboundStreams:i.maxOutboundStreams,incomingStreamTimeout:i.incomingStreamTimeout}),a.blockstore=n,a.engine=new eEe(a.peerId,n,a.network,a._stats,e),a.wm=new j_e(a.peerId,a.network,a._stats,e),a.notifications=new nEe(a.peerId),a.started=!1,a}return Sn(r,[{key:"isStarted",value:function(){return this.started}},{key:"peerId",get:function(){return this._libp2p.peerId}},{key:"_receiveMessage",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a,i,o,s,u,c,l=this;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.engine.messageReceived(t,r);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this._log("failed to receive message",r);case 8:if(0!==r.blocks.size){e.next=10;break}return e.abrupt("return");case 10:n=[],a=(0,zn.Z)(r.blocks.entries());try{for(a.s();!(i=a.n()).done;)o=(0,wn.Z)(i.value,2),s=o[0],u=o[1],c=bv.parse(s),n.push({wasWanted:this.wm.wantlist.contains(c),cid:c,data:u})}catch(sY){a.e(sY)}finally{a.f()}return this.wm.cancelWants(n.filter((function(e){return e.wasWanted})).map((function(e){return e.cid}))),e.next=16,Promise.all(n.map((function(e){var r=e.cid,n=e.wasWanted,a=e.data;return l._handleReceivedBlock(t,r,a,n)})));case 16:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_handleReceivedBlock",value:function(){var e=Zh(Fh().mark((function e(t,r,n,a){var i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._log("received block"),e.next=3,this.blockstore.has(r);case 3:if(i=e.sent,this._updateReceiveCounters(t.toString(),r,n,i),a){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.put(r,n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_updateReceiveCounters",value:function(e,t,r,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",r.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",r.length))}},{key:"_receiveError",value:function(e){this._log.error("ReceiveError: %s",e.message)}},{key:"_onPeerConnected",value:function(e){this.wm.connected(e)}},{key:"_onPeerDisconnected",value:function(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}},{key:"enableStats",value:function(){this._stats.enable()}},{key:"disableStats",value:function(){this._stats.disable()}},{key:"wantlistForPeer",value:function(e,t){return this.engine.wantlistForPeer(e)}},{key:"ledgerForPeer",value:function(e){return this.engine.ledgerForPeer(e)}},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r,n,a,i,o,s,u,c=this,l=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},n=function(e,t){return c.wm.wantBlocks([e],t),c.notifications.wantBlock(e,t)},a=!1,i=function(){var e=Zh(Fh().mark((function e(t,r){var i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.blockstore.get(t,r);case 3:return i=e.sent,e.abrupt("return",i);case 7:if(e.prev=7,e.t0=e.catch(0),"ERR_NOT_FOUND"===e.t0.code){e.next=11;break}throw e.t0;case 11:return a||(a=!0,c.network.findAndConnect(t,r).catch((function(e){return c._log.error(e)}))),e.abrupt("return",n(t,r));case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),o=new AbortController,s=r.signal?(0,BR.anySignal)([r.signal,o.signal]):o.signal,e.prev=6,e.next=9,Promise.race([this.notifications.wantBlock(t,{signal:s}),i(t,{signal:s})]);case 9:return u=e.sent,e.abrupt("return",u);case 11:return e.prev=11,o.abort(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[6,,11,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i,o,s,u,c;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(e);case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=13;break}return c=u.value,n.next=10,t.get(c,r);case 10:a=!1,n.next=4;break;case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i=!0,o=n.t0;case 19:if(n.prev=19,n.prev=20,!a||null==s.return){n.next=24;break}return n.next=24,km(s.return());case 24:if(n.prev=24,!i){n.next=27;break}throw o;case 27:return n.finish(24);case 28:return n.finish(19);case 29:case"end":return n.stop()}}),n,null,[[2,15,19,29],[20,,24,28]])})))()}},{key:"unwant",value:function(e){var t=this,r=Array.isArray(e)?e:[e];this.wm.unwantBlocks(r),r.forEach((function(e){return t.notifications.unwantBlock(e)}))}},{key:"cancelWants",value:function(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.blockstore.put(t,r);case 2:this._sendHaveBlockNotifications(t,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e,t){var r=this;return Kh(Fh().mark((function n(){var a,i,o,s,u,c,l,f;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=!1,i=!1,n.prev=2,s=xm(r.blockstore.putMany(e,t));case 4:return n.next=6,km(s.next());case 6:if(!(a=!(u=n.sent).done)){n.next=14;break}return c=u.value,l=c.key,f=c.value,r._sendHaveBlockNotifications(l,f),n.next=11,{key:l,value:f};case 11:a=!1,n.next=4;break;case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(2),i=!0,o=n.t0;case 20:if(n.prev=20,n.prev=21,!a||null==s.return){n.next=25;break}return n.next=25,km(s.return());case 25:if(n.prev=25,!i){n.next=28;break}throw o;case 28:return n.finish(25);case 29:return n.finish(20);case 30:case"end":return n.stop()}}),n,null,[[2,16,20,30],[21,,25,29]])})))()}},{key:"_sendHaveBlockNotifications",value:function(e,t){var r=this;this.notifications.hasBlock(e,t),this.engine.receivedBlocks([{cid:e,data:t}]),this.network.provide(e).catch((function(e){r._log.error("Failed to provide: %s",e.message)}))}},{key:"getWantlist",value:function(){return this.wm.wantlist.entries()}},{key:"peers",value:function(){return this.engine.peers()}},{key:"stat",value:function(){return this._stats}},{key:"start",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wm.start(),e.next=3,this.network.start();case 3:this.engine.start(),this.started=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._stats.stop(),this.wm.stop(),e.next=4,this.network.stop();case 4:this.engine.stop(),this.started=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unwrap",value:function(){return this.blockstore}}]),r}(Q6),fEe=function(e,t){return new lEe(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})};function pEe(e){return e=e||new Error("Not Found"),cd(e,"ERR_NOT_FOUND")}function hEe(e){return e=e||new Error("Aborted"),cd(e,"ERR_ABORTED")}var dEe=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,a=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,o=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,p=i-1;(0!==l||f<a)&&-1!==p;p--,f++)l+=s*o[p]>>>0,o[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=f,t++}if(" "!==e[t]){for(var h=i-a;h!==i&&0===o[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=o[h++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*l+1>>>0,c=new Uint8Array(o);a!==i;){for(var f=t[a],p=0,h=o-1;(0!==f||p<n)&&-1!==h;h--,p++)f+=256*c[h]>>>0,c[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=p,a++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var v=u.repeat(r);d<o;++d)v+=e.charAt(c[d]);return v},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},vEe=dEe,yEe=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),bEe=function(){function e(t,r,n){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n}return Sn(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),gEe=function(){function e(t,r,n){if(xn(this,e),this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}return Sn(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return wEe(this,e)}}]),e}(),mEe=function(){function e(t){xn(this,e),this.decoders=t}return Sn(e,[{key:"or",value:function(e){return wEe(this,e)}},{key:"decode",value:function(e){var t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),wEe=function(e,t){return new mEe(So(So({},e.decoders||(0,oi.Z)({},e.prefix,e)),t.decoders||(0,oi.Z)({},t.prefix,t)))},kEe=function(){function e(t,r,n,a){xn(this,e),this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new bEe(t,r,n),this.decoder=new gEe(t,r,a)}return Sn(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),xEe=function(e){var t=e.name,r=e.prefix,n=e.encode,a=e.decode;return new kEe(t,r,n,a)},_Ee=function(e){var t=e.prefix,r=e.name,n=e.alphabet,a=vEe(n,r),i=a.encode,o=a.decode;return xEe({prefix:t,name:r,encode:i,decode:function(e){return yEe(o(e))}})},EEe=function(e){var t=e.name,r=e.prefix,n=e.bitsPerChar,a=e.alphabet;return xEe({prefix:r,name:t,encode:function(e){return function(e,t,r){for(var n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0,u=0;u<e.length;++u)for(s=s<<8|e[u],o+=8;o>r;)i+=t[a&s>>(o-=r)];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i}(e,a,n)},decode:function(e){return function(e,t,r,n){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*r/8|0),u=0,c=0,l=0,f=0;f<o;++f){var p=a[e[f]];if(void 0===p)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|p,(u+=r)>=8&&(u-=8,s[l++]=255&c>>u)}if(u>=r||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return s}(e,a,n,t)}})};EEe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),EEe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),EEe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),EEe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),EEe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),EEe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),EEe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),EEe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),EEe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Math.pow(2,31);Math.pow(2,7),Math.pow(2,14),Math.pow(2,21),Math.pow(2,28),Math.pow(2,35),Math.pow(2,42),Math.pow(2,49),Math.pow(2,56),Math.pow(2,63),_Ee({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_Ee({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),new WeakMap,Symbol.for("@ipld/js-cid/CID"),So({},gn);var SEe=function(e){Cn(r,e);var t=Dn(r);function r(e,n){var a;return xn(this,r),(a=t.call(this)).child=e,a.bitswap=n,a}return Sn(r,[{key:"open",value:function(){return this.child.open()}},{key:"close",value:function(){return this.child.close()}},{key:"unwrap",value:function(){return this.child}},{key:"put",value:function(){var e=Zh(Fh().mark((function e(t,r){var n,a=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,this.has(t);case 3:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!this.bitswap.isStarted()){e.next=10;break}return e.next=8,this.bitswap.put(t,r,n);case 8:e.next=12;break;case 10:return e.next=12,this.child.put(t,r,n);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"putMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=vz(e,function(){var e=Zh(Fh().mark((function e(r){var n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.key,e.next=3,t.has(n);case 3:return e.abrupt("return",!e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!t.bitswap.isStarted()){n.next=5;break}return n.delegateYield(JD(xm(t.bitswap.putMany(a,r))),"t0",3);case 3:n.next=6;break;case 5:return n.delegateYield(JD(xm(t.child.putMany(a,r))),"t1",6);case 6:case"end":return n.stop()}}),n)})))()}},{key:"get",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.has(t);case 3:if(e.t0=!e.sent,!e.t0){e.next=6;break}e.t0=this.bitswap.isStarted();case 6:if(!e.t0){e.next=10;break}return e.abrupt("return",this.bitswap.get(t,r));case 10:return e.abrupt("return",this.child.get(t,r));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMany",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){var a,i;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=nF({objectMode:!0}),i=nF({objectMode:!0}),Promise.resolve().then(Zh(Fh().mark((function r(){var n,o,s,u,c,l;return Fh().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,o=!1,r.prev=2,u=xm(e);case 4:return r.next=6,u.next();case 6:if(!(n=!(c=r.sent).done)){r.next=21;break}return l=c.value,r.next=10,t.has(l);case 10:if(r.t0=!r.sent,!r.t0){r.next=13;break}r.t0=t.bitswap.isStarted();case 13:if(!r.t0){r.next=17;break}a.push(l),r.next=18;break;case 17:i.push(l);case 18:n=!1,r.next=4;break;case 21:r.next=27;break;case 23:r.prev=23,r.t1=r.catch(2),o=!0,s=r.t1;case 27:if(r.prev=27,r.prev=28,!n||null==u.return){r.next=32;break}return r.next=32,u.return();case 32:if(r.prev=32,!o){r.next=35;break}throw s;case 35:return r.finish(32);case 36:return r.finish(27);case 37:a.end(),i.end();case 39:case"end":return r.stop()}}),r,null,[[2,23,27,37],[28,,32,36]])})))),n.delegateYield(JD(xm(w6(t.bitswap.getMany(a,r),t.child.getMany(i,r)))),"t0",4);case 4:case"end":return n.stop()}}),n)})))()}},{key:"delete",value:function(){var e=Zh(Fh().mark((function e(t,r){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.child.delete(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteMany",value:function(e,t){var r=this;return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(r.child.deleteMany(e,t))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"has",value:function(){var e=Zh(Fh().mark((function e(t){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",this.child.has(t,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"query",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(t.child.query(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},{key:"queryKeys",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function n(){return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(JD(xm(t.child.queryKeys(e,r))),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}}]),r}(Q6),AEe=function(){function e(t,r,n,a,i){xn(this,e),this.peerId=t,this.libp2p=r,this.bitswap=n,this.repo=a,this.blockstore=i}return Sn(e,null,[{key:"start",value:function(){var t=Zh(Fh().mark((function t(r){var n,a,i,o,s,u,c,l,f,p,h,d;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.peerId,a=r.repo,i=r.print,o=r.hashers,s=r.options,!a.closed){t.next=4;break}return t.next=4,a.open();case 4:return t.next=6,a.config.getAll();case 6:return u=t.sent,t.next=9,u_e({options:s,repo:a,peerId:n,multiaddrs:CEe(n,u),config:u,keychainConfig:void 0});case 9:return c=t.sent,t.next=12,c.start();case 12:l=(0,zn.Z)(c.getMultiaddrs());try{for(l.s();!(f=l.n()).done;)p=f.value,i("Swarm listening on ".concat(p.toString()))}catch(sY){l.e(sY)}finally{l.f()}return h=fEe(c,a.blocks,{statsEnabled:!0,hashLoader:o,maxInboundStreams:1024,maxOutboundStreams:1024}),t.next=17,h.start();case 17:return d=new SEe(a.blocks,h),a.blocks=d,a.pins.blockstore=d,t.abrupt("return",new e(n,c,h,a,d));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.repo.blocks=t.blockstore.unwrap(),t.repo.pins.blockstore=t.blockstore.unwrap(),e.next=4,t.bitswap.stop();case 4:return e.next=6,t.libp2p.stop();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),CEe=function(e,t){var r,n=e.toString(),a=[],i=t.Addresses&&t.Addresses.Swarm||[],o=(0,zn.Z)(i);try{for(o.s();!(r=o.n()).done;){var s=Gx(r.value);if(s.protoCodes().includes(TEe))throw cd(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");var u=s.getPeerId();u&&u!==n&&(s=s.encapsulate("/p2p/".concat(n))),a.push(s)}}catch(sY){o.e(sY)}finally{o.f()}return a},TEe=479;var REe=Sn((function e(t){var r=t.network;xn(this,e),this.addrs=function(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(){var r,n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:{},n=[],e.next=4,t.use(r);case 4:return a=e.sent,i=a.libp2p,e.next=8,i.peerStore.forEach((function(e){n.push({id:e.id,addrs:e.addresses.map((function(e){return e.multiaddr}))})}));case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({network:r}),this.connect=function(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(r){var n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.libp2p,e.next=7,i.dial(r,n);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({network:r}),this.disconnect=function(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(r){var n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,t.use(n);case 3:return a=e.sent,i=a.libp2p,e.next=7,i.hangUp(r);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({network:r}),this.localAddrs=function(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(){var r,n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,t.use(r);case 3:return n=e.sent,a=n.libp2p,e.abrupt("return",a.getMultiaddrs());case 6:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({network:r}),this.peers=function(e){var t=e.network;function r(){return r=Zh(Fh().mark((function e(){var r,n,a,i,o,s,u,c,l,f,p,h,d,v=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,t.use(r);case 3:if(n=e.sent,a=n.libp2p,!r.verbose){e.next=10;break}i=[],o=(0,zn.Z)(a.getConnections());try{for(o.s();!(s=o.n()).done;)u=s.value,c={addr:u.remoteAddr,peer:u.remotePeer},(r.verbose||r.direction)&&(c.direction=u.stat.direction),r.verbose&&(c.muxer=u.stat.multiplexer,c.latency="n/a",c.streams=[]),i.push(c)}catch(sY){o.e(sY)}finally{o.f()}return e.abrupt("return",i);case 10:l=new Map,f=(0,zn.Z)(a.getConnections());try{for(f.s();!(p=f.n()).done;)h=p.value,d={addr:h.remoteAddr,peer:h.remotePeer},l.set(h.remotePeer.toString(),d)}catch(sY){f.e(sY)}finally{f.f()}return e.abrupt("return",Array.from(l.values()));case 14:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({network:r})})),IEe={success:!0,time:0,text:""};var PEe="/ipns/";function DEe(e){var t;if(e.startsWith(PEe)&&(e=e.substring(PEe.length)),"1"!==e[0]&&"Q"!==e[0]||(e="z".concat(e)),"z"===e[0]&&(t=ov.decode(e)),"k"===e[0]&&(t=Ug.decode(e)),!t)throw new Error("Could not parse string");if(1!==t[0]&&114!==t[1]&&(t=(0,lj.concat)([[1,114],t])),40!==t.length)throw new Error("Incorrect length "+t.length);return(0,lj.concat)([mm(PEe),t.subarray(2)])}var NEe=function(){var e=Zh(Fh().mark((function e(t,r,n){var a,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.use(n);case 2:if(null==(a=e.sent).libp2p.dht){e.next=7;break}return e.abrupt("return",a);case 7:return i=function(){var e=Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{from:r,name:"QUERY_ERROR",type:3,error:new pm("dht not enabled")};case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",{libp2p:{dht:{get:i,put:i,findProviders:i,findPeer:i,provide:i,getClosestPeers:i}}});case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();var OEe=function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new pm("pubsub not enabled");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),LEe=Hh.bind({ignoreUndefined:!0}),BEe=ud("ipfs"),MEe=3e4,UEe=function(){function e(t){var r=t.print,n=t.storage,a=t.codecs,i=t.options;xn(this,e);var o=n.peerId,s=n.repo,u=n.keychain,c=eI.create(AEe),l=t0(i.preload),f=function(){var e=function(){var e=Zh(Fh().mark((function e(t){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{recursive:!0},"string"===typeof t){e.next=3;break}throw new Error("Invalid arguments, domain must be a string");case 3:return t=YI(t),e.abrupt("return",WI(t,r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return ZR(e)}(),p=function(e){var t=e.network;return function(){var e=t.try();return null!=e&&Boolean(e.libp2p.isStarted())}}({network:c}),h=new jF(i),d=Object.values(am);(i.ipld&&i.ipld.hashers?i.ipld.hashers:[]).forEach((function(e){return d.push(e)})),this.hashers=new Jee({hashers:d,loadHasher:i.ipld&&i.ipld.loadHasher});var v=Object.values(nm);(i.ipld&&i.ipld.bases?i.ipld.bases:[]).forEach((function(e){return v.push(e)})),this.bases=new Wee({bases:v,loadBase:i.ipld&&i.ipld.loadBase});var y=new nN({repo:s,codecs:a}),b=new bz({codecs:a,hashers:this.hashers,preload:l,repo:s}),g=new YF({dns:f,ipns:h,repo:s,codecs:a,peerId:o,isOnline:p,keychain:u,options:i}),m=function(e){var t=e.repo,r=e.codecs,n=e.bases,a=e.name;function i(){return i=Zh(Fh().mark((function e(i){var o,s,u,c,l,f,p,h,d,v,y,b,g,m,w,k,x,_,E,S,A,C,T,R,I,P=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=P.length>1&&void 0!==P[1]?P[1]:{},eT(i)){e.next=3;break}throw new Error("invalid argument "+i);case 3:if(!tT(i)){e.next=32;break}s=!1,u=!1,e.prev=6,l=xm(a.resolve(i,o));case 8:return e.next=10,l.next();case 10:if(!(s=!(f=e.sent).done)){e.next=16;break}p=f.value,i=p;case 13:s=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),u=!0,c=e.t0;case 22:if(e.prev=22,e.prev=23,!s||null==l.return){e.next=27;break}return e.next=27,l.return();case 27:if(e.prev=27,!u){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(22);case 32:if(h=i.split("/"),d=jn(h),v=d[1],y=d[2],b=d.slice(3),!o.cidBase){e.next=39;break}return e.next=36,n.getBase(o.cidBase);case 36:e.t1=e.sent,e.next=40;break;case 39:e.t1=void 0;case 40:if(g=e.t1,m=YD(y),0!==b.length){e.next=45;break}return w=g?g.encoder.encode(m):y,e.abrupt("return","/".concat(v,"/").concat(w));case 45:k=bv.decode(m),i=b.join("/"),x=$R(k,i,r,t,o),_=k,E=i,S=!1,A=!1,e.prev=52,T=xm(x);case 54:return e.next=56,T.next();case 56:if(!(S=!(R=e.sent).done)){e.next=62;break}I=R.value,bv.asCID(I.value)&&(_=I.value,E=I.remainderPath);case 59:S=!1,e.next=54;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e.catch(52),A=!0,C=e.t2;case 68:if(e.prev=68,e.prev=69,!S||null==T.return){e.next=73;break}return e.next=73,T.return();case 73:if(e.prev=73,!A){e.next=76;break}throw C;case 76:return e.finish(73);case 77:return e.finish(68);case 78:return e.abrupt("return","/ipfs/".concat(_.toString(g&&g.encoder)).concat(E?"/"+E:""));case 79:case"end":return e.stop()}}),e,null,[[6,18,22,32],[23,,27,31],[52,64,68,78],[69,,73,77]])}))),i.apply(this,arguments)}return ZR((function(e){return i.apply(this,arguments)}))}({repo:s,codecs:a,bases:this.bases,name:g}),w=new fX({repo:s,codecs:a,hashers:this.hashers,preload:l}),k=Object.assign(function(e){var t=e.repo,r=e.codecs,n=e.resolve,a=e.preload;function i(){return i=Kh((function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function o(){var s,u,c,l,f,p,h;return Fh().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(0!==i.maxDepth){o.next=2;break}return o.abrupt("return");case 2:if(!i.edges||!i.format||i.format===JF.default){o.next=4;break}throw new Error("Cannot set edges to true and also specify format");case 4:i.format=i.edges?JF.edges:i.format,"number"!==typeof i.maxDepth&&(i.maxDepth=i.recursive?1/0:1),i.timeout&&(s=new wm.TimeoutController(i.timeout),u=[s.signal],i.signal&&u.push(i.signal),i.signal=(0,BR.anySignal)(u)),c=Array.isArray(e)?e:[e],l=c.map((function(e){return XF(a,e,i)})),f=(0,zn.Z)(l),o.prev=10,f.s();case 12:if((p=f.n()).done){o.next=24;break}return h=p.value,o.prev=14,o.delegateYield(JD(xm($F(n,t,r,h,i))),"t0",16);case 16:o.next=22;break;case 18:return o.prev=18,o.t1=o.catch(14),o.next=22,{ref:"",err:o.t1.message};case 22:o.next=12;break;case 24:o.next=29;break;case 26:o.prev=26,o.t2=o.catch(10),f.e(o.t2);case 29:return o.prev=29,f.f(),o.finish(29);case 32:case"end":return o.stop()}}),o,null,[[10,26,29,32],[14,18]])}))()})),i.apply(this,arguments)}return function(e){return i.apply(this,arguments)}}({repo:s,codecs:a,resolve:m,preload:l}),{local:sz({repo:n.repo})}),x=new tJ({preload:l,repo:s,options:i.EXPERIMENTAL,hashers:this.hashers}),_=x.add,E=x.addAll,S=x.cat,A=x.get,C=x.ls,T=E3({repo:s,preload:l,hashers:this.hashers,options:i}),R=function(e){var t=e.preload,r=e.files,n=e.options,a=void 0===n?{}:n;if(a.interval=a.interval||3e4,!a.enabled){r0("MFS preload disabled");var i=function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{start:i,stop:i}}var o,s="",u=function(){var e=Zh(Fh().mark((function e(){var n,i;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.stat("/");case 3:if(n=e.sent,i=n.cid.toString(),s===i){e.next=10;break}return r0("preloading updated MFS root ".concat(s," -> ").concat(n.cid)),e.next=9,t(n.cid);case 9:s=i;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r0.error("failed to preload MFS root",e.t0);case 15:return e.prev=15,o=setTimeout(u,a.interval),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return{start:function(){return Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.stat("/");case 2:t=e.sent,s=t.cid.toString(),r0("monitoring MFS root ".concat(t.cid)),o=setTimeout(u,a.interval);case 6:case"end":return e.stop()}}),e)})))()},stop:function(){clearTimeout(o)}}}({files:T,preload:l,options:i.preload});this.preload=l,this.name=g,this.ipns=h,this.pin=y,this.resolve=m,this.block=b,this.refs=k,this.start=function(e){var t=e.network,r=e.preload,n=e.peerId,a=e.keychain,i=e.repo,o=e.ipns,s=e.mfsPreload,u=e.print,c=e.hashers,l=e.options,f=function(){var e=Zh(Fh().mark((function e(){var f,p;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eI.start(t,{peerId:n,repo:i,print:u,hashers:c,options:l});case 2:return f=e.sent,p=f.libp2p,e.next=6,Promise.all([o.startOnline({keychain:a,libp2p:p,peerId:n,repo:i}),r.start(),s.start()]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f}({network:c,peerId:o,repo:s,preload:l,ipns:h,mfsPreload:R,print:r,keychain:u,hashers:this.hashers,options:i}),this.stop=function(e){var t=e.network,r=e.preload,n=e.ipns,a=e.repo,i=e.mfsPreload,o=function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.stop(),n.stop(),i.stop()]);case 2:return e.next=4,eI.stop(t);case 4:return e.next=6,a.close();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o}({network:c,preload:l,mfsPreload:R,ipns:h,repo:s}),this.dht=function(e){var t=e.network,r=e.repo,n=e.peerId,a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function a(){var i,o,s;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,km(NEe(t,n,r));case 2:if(i=a.sent,o=i.libp2p,s=e instanceof Uint8Array?e:DEe(e),null!=o.dht){a.next=7;break}throw cd(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 7:return a.delegateYield(JD(xm(o.dht.get(s,r))),"t0",8);case 8:case"end":return a.stop()}}),a)})))()},i=function(e,r,a){return Kh(Fh().mark((function i(){var o,s,u;return Fh().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,km(NEe(t,n,a));case 2:if(o=i.sent,s=o.libp2p,u=e instanceof Uint8Array?e:DEe(e),null!=s.dht){i.next=7;break}throw cd(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 7:return i.delegateYield(JD(xm(s.dht.put(u,r,a))),"t0",8);case 8:case"end":return i.stop()}}),i)})))()},o=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function a(){var i,o;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,km(NEe(t,n,r));case 2:if(i=a.sent,null!=(o=i.libp2p).dht){a.next=6;break}throw cd(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 6:return a.delegateYield(JD(xm(o.dht.findProviders(e,{signal:r.signal}))),"t0",7);case 7:case"end":return a.stop()}}),a)})))()},s=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function a(){var i,o;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,km(NEe(t,n,r));case 2:if(i=a.sent,null!=(o=i.libp2p).dht){a.next=6;break}throw cd(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 6:return a.delegateYield(JD(xm(o.dht.findPeer(e,{signal:r.signal}))),"t0",7);case 7:case"end":return a.stop()}}),a)})))()},u=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return Kh(Fh().mark((function i(){var o,s;return Fh().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,km(NEe(t,n,a));case 2:return o=i.sent,s=o.libp2p,i.next=6,km(r.blocks.has(e));case 6:if(i.sent){i.next=9;break}throw cd(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");case 9:if(!a.recursive){i.next=11;break}throw cd(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");case 11:if(null!=s.dht){i.next=13;break}throw cd(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 13:return i.delegateYield(JD(xm(s.dht.provide(e))),"t0",14);case 14:case"end":return i.stop()}}),i)})))()},c=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kh(Fh().mark((function a(){var i,o,s,u;return Fh().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,km(NEe(t,n,r));case 2:if(i=a.sent,o=i.libp2p,u=bv.asCID(e),s=null!=u?u.multihash.bytes:KD(e.toString()).toBytes(),null!=o.dht){a.next=8;break}throw cd(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");case 8:return a.delegateYield(JD(xm(o.dht.getClosestPeers(s,r))),"t0",9);case 9:case"end":return a.stop()}}),a)})))()},l=i,f=o,p=s,h=u,d=c;return{get:ZR(a),put:ZR(l),findProvs:ZR(f),findPeer:ZR(p),provide:ZR(h),query:ZR(d)}}({network:c,repo:s,peerId:o}),this.pubsub=function(e){var t,r=e.network,n=e.config,a=sF(n||{},"Pubsub.Enabled",!0),i={};return{subscribe:a?ZR((function(e,t){return o.apply(this,arguments)})):OEe,unsubscribe:a?ZR((function(e,t){return s.apply(this,arguments)})):OEe,publish:a?ZR((function(e,t){return u.apply(this,arguments)})):OEe,ls:a?ZR((function(){return c.apply(this,arguments)})):OEe,peers:a?ZR((function(e){return l.apply(this,arguments)})):OEe};function o(){return o=Zh(Fh().mark((function e(n,a){var o,s,u,c=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,r.use(o);case 3:s=e.sent,(u=s.libp2p).pubsub.subscribe(n),null==t&&(t=function(e){var t=e.detail;i[t.topic]&&i[t.topic].forEach((function(e){"function"!==typeof e?null!=e&&null!=e.handleEvent&&e.handleEvent(t):e(t)}))},u.pubsub.addEventListener("message",t)),null!=a&&(null==i[n]&&(i[n]=[]),i[n].push(a));case 8:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(){return s=Zh(Fh().mark((function e(n,a){var o,s,u,c=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,r.use(o);case 3:s=e.sent,u=s.libp2p,null!=a&&null!=i[n]&&(i[n]=i[n].filter((function(e){return e!==a})),0===i[n].length&&delete i[n]),"function"!==typeof a&&delete i[n],null==i[n]&&u.pubsub.unsubscribe(n),0===Object.keys(i).length&&(u.pubsub.removeEventListener("message",t),t=void 0);case 9:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(){return u=Zh(Fh().mark((function e(t,n){var a,i,o,s=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,r.use(a);case 3:if(i=e.sent,o=i.libp2p,n){e.next=7;break}throw cd(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");case 7:return e.next=9,o.pubsub.publish(t,n);case 9:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function c(){return c=Zh(Fh().mark((function e(){var t,n,a,i=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,r.use(t);case 3:return n=e.sent,a=n.libp2p,e.abrupt("return",a.pubsub.getTopics());case 6:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(){return l=Zh(Fh().mark((function e(t){var n,a,i,o=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,r.use(n);case 3:return a=e.sent,i=a.libp2p,e.abrupt("return",i.pubsub.getSubscribers(t));case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}}({network:c,config:i.config}),this.dns=f,this.isOnline=p,this.id=function(e){var t=e.peerId,r=e.network;function n(){return n=Zh(Fh().mark((function e(){var n,a,i,o,s,u,c,l,f,p=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>0&&void 0!==p[0]?p[0]:{},a=r.try()){e.next=8;break}if(!n.peerId){e.next=5;break}throw new cm;case 5:if(null!=t.publicKey){e.next=7;break}throw cd(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");case 7:return e.abrupt("return",{id:t,publicKey:uN(t.publicKey,"base64pad"),addresses:[],agentVersion:"js-ipfs/".concat(rJ),protocolVersion:"9000",protocols:[]});case 8:return i=a.libp2p,o=n.peerId?n.peerId:t,e.next=12,aJ(o,i,n);case 12:return s=e.sent,u=uN(s.metadata.get("AgentVersion")||new Uint8Array),c=uN(s.metadata.get("ProtocolVersion")||new Uint8Array),l=s.id.toString(),f=s.publicKey?uN(s.publicKey,"base64pad"):"",e.abrupt("return",{id:o,publicKey:f,addresses:(s.addresses||[]).map((function(e){var t=e.toString();return t.endsWith("/p2p/".concat(l))?t:"".concat(t,"/p2p/").concat(l)})).sort().map((function(e){return Gx(e)})),agentVersion:u,protocolVersion:c,protocols:(s.protocols||[]).sort()});case 18:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return ZR((function(){return n.apply(this,arguments)}))}({network:c,peerId:o}),this.version=function(e){var t=e.repo;function r(){return r=Zh(Fh().mark((function e(){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.next=3,t.version.get();case 3:return r=e.sent,e.abrupt("return",{version:rJ,commit:"d1f1e75b2060c5c2e64d133a7a6bbabd2641e5ef",repo:"".concat(r),"ipfs-core":rJ,"interface-ipfs-core":"^0.156.1"});case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return ZR((function(){return r.apply(this,arguments)}))}({repo:s}),this.bitswap=new cz({network:c}),this.bootstrap=new pz({repo:s}),this.config=function(e){var t=e.repo;return{getAll:ZR((function(){return r.apply(this,arguments)})),get:ZR((function(e,t){return n.apply(this,arguments)})),set:ZR((function(e,t,r){return a.apply(this,arguments)})),replace:ZR((function(e,t){return i.apply(this,arguments)})),profiles:{apply:ZR((function(e){return o.apply(this,arguments)})),list:ZR(pJ)}};function r(){return r=Zh(Fh().mark((function e(){var r,n=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",t.config.getAll(r));case 2:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function n(){return(n=Zh(Fh().mark((function e(r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("key argument is required")));case 2:return e.abrupt("return",t.config.get(r,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return a=Zh(Fh().mark((function e(r,n,a){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.config.set(r,n,a));case 1:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function i(){return i=Zh(Fh().mark((function e(r,n){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.config.replace(r,n));case 1:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function o(){return o=Zh(Fh().mark((function e(r){var n,a,i,o,s,u=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(n=u.length>1&&void 0!==u[1]?u[1]:{dryRun:!1}).dryRun,i=lJ[r]){e.next=5;break}throw new Error("No profile with name '".concat(r,"' exists"));case 5:return e.prev=5,e.next=8,t.config.getAll(n);case 8:if(o=e.sent,s=JSON.parse(JSON.stringify(o)),s=i.transform(s),a){e.next=14;break}return e.next=14,t.config.replace(s,n);case 14:return delete o.Identity.PrivKey,delete s.Identity.PrivKey,e.abrupt("return",{original:o,updated:s});case 19:throw e.prev=19,e.t0=e.catch(5),fJ(e.t0),new Error("Could not apply profile '".concat(r,"' to config: ").concat(e.t0.message));case 23:case"end":return e.stop()}}),e,null,[[5,19]])}))),o.apply(this,arguments)}}({repo:s}),this.ping=function(e){var t=e.network;function r(){return r=Kh((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fh().mark((function n(){var a,i,o,s,u,c,l,f,p,h;return Fh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,km(t.use());case 2:return a=n.sent,i=a.libp2p,r.count=r.count||10,n.next=7,km(i.peerStore.get(e));case 7:if(o=n.sent,s=o&&o.id){n.next=16;break}return n.next=12,So(So({},IEe),{},{text:"Looking up peer ".concat(e)});case 12:return n.next=14,km(i.peerRouting.findPeer(e));case 14:u=n.sent,s=u&&u.id;case 16:if(s){n.next=18;break}throw new Error("Peer was not found");case 18:return n.next=20,So(So({},IEe),{},{text:"PING ".concat(s.toString())});case 20:c=0,l=0,f=0;case 23:if(!(f<r.count)){n.next=41;break}return n.prev=24,n.next=27,km(i.ping(s));case 27:return p=n.sent,l+=p,c++,n.next=32,So(So({},IEe),{},{time:p});case 32:n.next=38;break;case 34:return n.prev=34,n.t0=n.catch(24),n.next=38,So(So({},IEe),{},{success:!1,text:n.t0.toString()});case 38:f++,n.next=23;break;case 41:if(!c){n.next=45;break}return h=l/c,n.next=45,So(So({},IEe),{},{text:"Average latency: ".concat(h,"ms")});case 45:case"end":return n.stop()}}),n,null,[[24,34]])}))()})),r.apply(this,arguments)}return ZR((function(e){return r.apply(this,arguments)}))}({network:c}),this.add=_,this.addAll=E,this.cat=S,this.get=A,this.ls=C,this.dag=w,this.files=T,this.key=new A3({keychain:u}),this.object=new P3({preload:l,codecs:a,repo:s}),this.repo=new L3({repo:s,hashers:this.hashers}),this.stats=new M3({repo:s,network:c}),this.swarm=new REe({network:c}),Object.defineProperty(this,"libp2p",{get:function(){var e=c.try();return e?e.libp2p:void 0}});var I=function(){return Promise.reject(cd(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED"))},P=function(){var e=Kh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw cd(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();this.commands=I,this.diag={cmds:I,net:I,sys:I},this.log={level:I,ls:I,tail:P},this.mount=I,this.codecs=a}return Sn(e,[{key:"init",value:function(){var e=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new um;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jEe=function(){var e=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ty({Data:new _d({type:"directory"}).marshal(),Links:[]}),e.next=3,t.block.put(r,{mhtype:"sha2-256",format:"dag-pb"});case 3:return n=e.sent,e.next=6,t.pin.add(n);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),FEe=function(){return{start:!0,EXPERIMENTAL:{},preload:{enabled:!Wh.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}}};function zEe(){return zEe=Zh(Fh().mark((function e(){var t,a,s,u,c,l,f,p,h,d,v,y=arguments;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},t=LEe(FEe(),t),a=t.init||{},s={name:Pg.name,code:Pg.code,encode:function(e){return e},decode:function(e){return e}},u=Object.values(im),[r,n,i,o,s].concat(t.ipld&&t.ipld.codecs||[]).forEach((function(e){return u.push(e)})),c=new Yee({codecs:u,loadCodec:t.ipld&&t.ipld.loadCodec}),l=t.silent?BEe:console.log,BEe("creating repo"),e.next=11,f_e.start(l,c,t);case 11:return f=e.sent,BEe("getting repo config"),e.next=15,f.repo.config.getAll();case 15:return p=e.sent,h=new UEe({storage:f,print:l,codecs:c,options:So(So({},t),{},{config:p})}),BEe("starting preload"),e.next=20,h.preload.start();case 20:if(BEe("starting storage"),h.ipns.startOffline(f),!f.isNew||a.emptyRepo){e.next=39;break}return e.next=25,jEe(h);case 25:return d=e.sent,BEe("adding default assets"),e.next=29,void h.addAll;case 29:if(BEe("initializing IPNS keyspace"),null!=f.peerId.publicKey){e.next=32;break}throw cd(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");case 32:return v=new wm.TimeoutController(MEe),e.prev=33,e.next=36,h.ipns.initializeKeyspace(f.peerId,mm("/ipfs/".concat(d)),{signal:v.signal});case 36:return e.prev=36,v.clear(),e.finish(36);case 39:if(!1===t.start){e.next=43;break}return BEe("starting node"),e.next=43,h.start();case 43:return e.abrupt("return",h);case 44:case"end":return e.stop()}}),e,null,[[33,,36,39]])}))),zEe.apply(this,arguments)}__webpack_require__(2596);var ZEe=function(){return zEe.apply(this,arguments)},qEe=null;function VEe(){var e=(0,mn.useState)(Boolean(qEe)),t=(0,wn.Z)(e,2),r=t[0],n=t[1],a=(0,mn.useState)(null),i=(0,wn.Z)(a,2),o=i[0],s=i[1];function u(){return(u=Zh(Fh().mark((function e(){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qEe){e.next=4;break}console.log("IPFS already started"),e.next=24;break;case 4:if(!window.ipfs||!window.ipfs.enable){e.next=11;break}return console.log("Found window.ipfs"),e.next=8,window.ipfs.enable({commands:["id"]});case 8:qEe=e.sent,e.next=24;break;case 11:return e.prev=11,console.time("IPFS Started"),e.next=15,ZEe();case 15:qEe=e.sent,console.timeEnd("IPFS Started"),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(11),console.error("IPFS init error:",e.t0),qEe=null,s(e.t0);case 24:n(Boolean(qEe));case 25:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}function c(){return(c=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f(JSON.stringify(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,h(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=Zh(Fh().mark((function e(t){var r;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qEe.add(t);case 2:return r=e.sent,e.abrupt("return",r.path);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return d.apply(this,arguments)}function d(){return(d=Zh(Fh().mark((function e(t){var r,n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qEe.cat(t),e.next=3,xz()(r);case 3:return n=e.sent,a=(0,lj.concat)(n),e.abrupt("return",String.fromCharCode.apply(null,a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,mn.useEffect)((function(){return function(){u.apply(this,arguments)}(),function(){qEe&&qEe.stop&&(console.log("Stopping IPFS"),qEe.stop().catch((function(e){return console.error(e)})),qEe=null,n(!1))}}),[]),{ipfs:qEe,ipfsReady:r,ipfsInitError:o,saveJSON:function(e){return c.apply(this,arguments)},loadJSON:function(e){return l.apply(this,arguments)},saveString:f,loadString:h}}var KEe=(0,ni.Z)();var HEe=function(){var e=function(e){var t=[localStorage.getItem(e)],r=mn.useState(t[0]),n=(0,wn.Z)(r,2),a=n[0],i=n[1],o=VEe(),s=o.ipfsReady,u=o.saveJSON,c=o.loadJSON,l=mn.useState(),f=(0,wn.Z)(l,2),p=f[0],h=f[1];function d(e){return v.apply(this,arguments)}function v(){return(v=Zh(Fh().mark((function t(r){var n;return Fh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("saving roster:",r),t.next=3,u(r);case 3:n=t.sent,console.log("saving roster path:",n),localStorage.setItem(e,n),i(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=Zh(Fh().mark((function e(t){var r,n;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:return r=e.sent,d(n=[].concat((0,kn.Z)(p),[r])),h(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Zh(Fh().mark((function e(t){return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Zh(Fh().mark((function e(t,r){var n,a;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(r);case 2:return n=e.sent,console.log("update",t,n),(a=(0,kn.Z)(p))[t]=n,d(a),h(a),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return mn.useEffect((function(){function e(){return(e=Zh(Fh().mark((function e(){var t;return Fh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return e.next=3,c(a);case 3:t=e.sent,h(t),console.log("Loaded roster",t),e.next=10;break;case 8:console.log("No roster saved"),h([]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log({ipfsReady:s}),s&&function(){e.apply(this,arguments)}()}),[s]),{ready:!!p,list:p,history:t,isMember:function(e){return p.indexOf(e)},addMember:function(e){return y.apply(this,arguments)},loadMember:function(e){return b.apply(this,arguments)},updateMember:function(e,t){return g.apply(this,arguments)},removeMember:function(e){var t=(0,kn.Z)(p);t.splice(e,1),d(t),h(t)}}}("HeroDrop-v0.0.1");return(0,li.jsxs)(mi,{theme:KEe,children:[(0,li.jsx)(Oi,{}),(0,li.jsx)(ei,{children:(0,li.jsxs)(Ja,{children:[(0,li.jsx)(Ya,{exact:!0,path:"/home",element:(0,li.jsx)(ns,{})}),(0,li.jsx)(Ya,{path:"/character-sheet/*",element:(0,li.jsx)(jh,{roster:e})}),(0,li.jsx)(Ya,{path:"*",element:(0,li.jsx)(Ga,{to:"/home"})})]})})]})},WEe=function(e){e&&e instanceof Function&&__webpack_require__.e(787).then(__webpack_require__.bind(__webpack_require__,787)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),i(e),o(e)}))};(0,__webpack_require__(1250).s)(document.getElementById("root")).render((0,li.jsx)(mn.StrictMode,{children:(0,li.jsx)(HEe,{})})),WEe()}()})();
//# sourceMappingURL=main.fbf708c4.js.map